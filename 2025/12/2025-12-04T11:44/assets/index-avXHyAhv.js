function oA(i,t){for(var a=0;a<t.length;a++){const d=t[a];if(typeof d!="string"&&!Array.isArray(d)){for(const f in d)if(f!=="default"&&!(f in i)){const g=Object.getOwnPropertyDescriptor(d,f);g&&Object.defineProperty(i,f,g.get?g:{enumerable:!0,get:()=>d[f]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))d(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const _ of g.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&d(_)}).observe(document,{childList:!0,subtree:!0});function a(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(f){if(f.ep)return;f.ep=!0;const g=a(f);fetch(f.href,g)}})();function og(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var M1={exports:{}},v_={};var wT;function bI(){if(wT)return v_;wT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(d,f,g){var _=null;if(g!==void 0&&(_=""+g),f.key!==void 0&&(_=""+f.key),"key"in f){g={};for(var c in f)c!=="key"&&(g[c]=f[c])}else g=f;return f=g.ref,{$$typeof:i,type:d,key:_,ref:f!==void 0?f:null,props:g}}return v_.Fragment=t,v_.jsx=a,v_.jsxs=a,v_}var TT;function xI(){return TT||(TT=1,M1.exports=bI()),M1.exports}var Q=xI(),C1={exports:{}},kn={};var ST;function wI(){if(ST)return kn;ST=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),_=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),V=Symbol.iterator;function H(Oe){return Oe===null||typeof Oe!="object"?null:(Oe=V&&Oe[V]||Oe["@@iterator"],typeof Oe=="function"?Oe:null)}var ne={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ae=Object.assign,q={};function he(Oe,et,bt){this.props=Oe,this.context=et,this.refs=q,this.updater=bt||ne}he.prototype.isReactComponent={},he.prototype.setState=function(Oe,et){if(typeof Oe!="object"&&typeof Oe!="function"&&Oe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Oe,et,"setState")},he.prototype.forceUpdate=function(Oe){this.updater.enqueueForceUpdate(this,Oe,"forceUpdate")};function Ae(){}Ae.prototype=he.prototype;function Ee(Oe,et,bt){this.props=Oe,this.context=et,this.refs=q,this.updater=bt||ne}var Fe=Ee.prototype=new Ae;Fe.constructor=Ee,ae(Fe,he.prototype),Fe.isPureReactComponent=!0;var De=Array.isArray;function ke(){}var ze={H:null,A:null,T:null,S:null},rt=Object.prototype.hasOwnProperty;function Se(Oe,et,bt){var Tt=bt.ref;return{$$typeof:i,type:Oe,key:et,ref:Tt!==void 0?Tt:null,props:bt}}function nt(Oe,et){return Se(Oe.type,et,Oe.props)}function Mt(Oe){return typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===i}function Ct(Oe){var et={"=":"=0",":":"=2"};return"$"+Oe.replace(/[=:]/g,function(bt){return et[bt]})}var Ft=/\/+/g;function Ut(Oe,et){return typeof Oe=="object"&&Oe!==null&&Oe.key!=null?Ct(""+Oe.key):et.toString(36)}function Gt(Oe){switch(Oe.status){case"fulfilled":return Oe.value;case"rejected":throw Oe.reason;default:switch(typeof Oe.status=="string"?Oe.then(ke,ke):(Oe.status="pending",Oe.then(function(et){Oe.status==="pending"&&(Oe.status="fulfilled",Oe.value=et)},function(et){Oe.status==="pending"&&(Oe.status="rejected",Oe.reason=et)})),Oe.status){case"fulfilled":return Oe.value;case"rejected":throw Oe.reason}}throw Oe}function Ge(Oe,et,bt,Tt,Nt){var zt=typeof Oe;(zt==="undefined"||zt==="boolean")&&(Oe=null);var Kt=!1;if(Oe===null)Kt=!0;else switch(zt){case"bigint":case"string":case"number":Kt=!0;break;case"object":switch(Oe.$$typeof){case i:case t:Kt=!0;break;case O:return Kt=Oe._init,Ge(Kt(Oe._payload),et,bt,Tt,Nt)}}if(Kt)return Nt=Nt(Oe),Kt=Tt===""?"."+Ut(Oe,0):Tt,De(Nt)?(bt="",Kt!=null&&(bt=Kt.replace(Ft,"$&/")+"/"),Ge(Nt,et,bt,"",function(qi){return qi})):Nt!=null&&(Mt(Nt)&&(Nt=nt(Nt,bt+(Nt.key==null||Oe&&Oe.key===Nt.key?"":(""+Nt.key).replace(Ft,"$&/")+"/")+Kt)),et.push(Nt)),1;Kt=0;var rn=Tt===""?".":Tt+":";if(De(Oe))for(var Tn=0;Tn<Oe.length;Tn++)Tt=Oe[Tn],zt=rn+Ut(Tt,Tn),Kt+=Ge(Tt,et,bt,zt,Nt);else if(Tn=H(Oe),typeof Tn=="function")for(Oe=Tn.call(Oe),Tn=0;!(Tt=Oe.next()).done;)Tt=Tt.value,zt=rn+Ut(Tt,Tn++),Kt+=Ge(Tt,et,bt,zt,Nt);else if(zt==="object"){if(typeof Oe.then=="function")return Ge(Gt(Oe),et,bt,Tt,Nt);throw et=String(Oe),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(Oe).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return Kt}function ct(Oe,et,bt){if(Oe==null)return Oe;var Tt=[],Nt=0;return Ge(Oe,Tt,"","",function(zt){return et.call(bt,zt,Nt++)}),Tt}function St(Oe){if(Oe._status===-1){var et=Oe._result;et=et(),et.then(function(bt){(Oe._status===0||Oe._status===-1)&&(Oe._status=1,Oe._result=bt)},function(bt){(Oe._status===0||Oe._status===-1)&&(Oe._status=2,Oe._result=bt)}),Oe._status===-1&&(Oe._status=0,Oe._result=et)}if(Oe._status===1)return Oe._result.default;throw Oe._result}var pt=typeof reportError=="function"?reportError:function(Oe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Oe=="object"&&Oe!==null&&typeof Oe.message=="string"?String(Oe.message):String(Oe),error:Oe});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Oe);return}console.error(Oe)},Vt={map:ct,forEach:function(Oe,et,bt){ct(Oe,function(){et.apply(this,arguments)},bt)},count:function(Oe){var et=0;return ct(Oe,function(){et++}),et},toArray:function(Oe){return ct(Oe,function(et){return et})||[]},only:function(Oe){if(!Mt(Oe))throw Error("React.Children.only expected to receive a single React element child.");return Oe}};return kn.Activity=z,kn.Children=Vt,kn.Component=he,kn.Fragment=a,kn.Profiler=f,kn.PureComponent=Ee,kn.StrictMode=d,kn.Suspense=A,kn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ze,kn.__COMPILER_RUNTIME={__proto__:null,c:function(Oe){return ze.H.useMemoCache(Oe)}},kn.cache=function(Oe){return function(){return Oe.apply(null,arguments)}},kn.cacheSignal=function(){return null},kn.cloneElement=function(Oe,et,bt){if(Oe==null)throw Error("The argument must be a React element, but you passed "+Oe+".");var Tt=ae({},Oe.props),Nt=Oe.key;if(et!=null)for(zt in et.key!==void 0&&(Nt=""+et.key),et)!rt.call(et,zt)||zt==="key"||zt==="__self"||zt==="__source"||zt==="ref"&&et.ref===void 0||(Tt[zt]=et[zt]);var zt=arguments.length-2;if(zt===1)Tt.children=bt;else if(1<zt){for(var Kt=Array(zt),rn=0;rn<zt;rn++)Kt[rn]=arguments[rn+2];Tt.children=Kt}return Se(Oe.type,Nt,Tt)},kn.createContext=function(Oe){return Oe={$$typeof:_,_currentValue:Oe,_currentValue2:Oe,_threadCount:0,Provider:null,Consumer:null},Oe.Provider=Oe,Oe.Consumer={$$typeof:g,_context:Oe},Oe},kn.createElement=function(Oe,et,bt){var Tt,Nt={},zt=null;if(et!=null)for(Tt in et.key!==void 0&&(zt=""+et.key),et)rt.call(et,Tt)&&Tt!=="key"&&Tt!=="__self"&&Tt!=="__source"&&(Nt[Tt]=et[Tt]);var Kt=arguments.length-2;if(Kt===1)Nt.children=bt;else if(1<Kt){for(var rn=Array(Kt),Tn=0;Tn<Kt;Tn++)rn[Tn]=arguments[Tn+2];Nt.children=rn}if(Oe&&Oe.defaultProps)for(Tt in Kt=Oe.defaultProps,Kt)Nt[Tt]===void 0&&(Nt[Tt]=Kt[Tt]);return Se(Oe,zt,Nt)},kn.createRef=function(){return{current:null}},kn.forwardRef=function(Oe){return{$$typeof:c,render:Oe}},kn.isValidElement=Mt,kn.lazy=function(Oe){return{$$typeof:O,_payload:{_status:-1,_result:Oe},_init:St}},kn.memo=function(Oe,et){return{$$typeof:D,type:Oe,compare:et===void 0?null:et}},kn.startTransition=function(Oe){var et=ze.T,bt={};ze.T=bt;try{var Tt=Oe(),Nt=ze.S;Nt!==null&&Nt(bt,Tt),typeof Tt=="object"&&Tt!==null&&typeof Tt.then=="function"&&Tt.then(ke,pt)}catch(zt){pt(zt)}finally{et!==null&&bt.types!==null&&(et.types=bt.types),ze.T=et}},kn.unstable_useCacheRefresh=function(){return ze.H.useCacheRefresh()},kn.use=function(Oe){return ze.H.use(Oe)},kn.useActionState=function(Oe,et,bt){return ze.H.useActionState(Oe,et,bt)},kn.useCallback=function(Oe,et){return ze.H.useCallback(Oe,et)},kn.useContext=function(Oe){return ze.H.useContext(Oe)},kn.useDebugValue=function(){},kn.useDeferredValue=function(Oe,et){return ze.H.useDeferredValue(Oe,et)},kn.useEffect=function(Oe,et){return ze.H.useEffect(Oe,et)},kn.useEffectEvent=function(Oe){return ze.H.useEffectEvent(Oe)},kn.useId=function(){return ze.H.useId()},kn.useImperativeHandle=function(Oe,et,bt){return ze.H.useImperativeHandle(Oe,et,bt)},kn.useInsertionEffect=function(Oe,et){return ze.H.useInsertionEffect(Oe,et)},kn.useLayoutEffect=function(Oe,et){return ze.H.useLayoutEffect(Oe,et)},kn.useMemo=function(Oe,et){return ze.H.useMemo(Oe,et)},kn.useOptimistic=function(Oe,et){return ze.H.useOptimistic(Oe,et)},kn.useReducer=function(Oe,et,bt){return ze.H.useReducer(Oe,et,bt)},kn.useRef=function(Oe){return ze.H.useRef(Oe)},kn.useState=function(Oe){return ze.H.useState(Oe)},kn.useSyncExternalStore=function(Oe,et,bt){return ze.H.useSyncExternalStore(Oe,et,bt)},kn.useTransition=function(){return ze.H.useTransition()},kn.version="19.2.0",kn}var ET;function i2(){return ET||(ET=1,C1.exports=wI()),C1.exports}var ie=i2();const Nl=og(ie),AT=oA({__proto__:null,default:Nl},[ie]);var D1={exports:{}},b_={},I1={exports:{}},R1={};var MT;function TI(){return MT||(MT=1,function(i){function t(Ge,ct){var St=Ge.length;Ge.push(ct);e:for(;0<St;){var pt=St-1>>>1,Vt=Ge[pt];if(0<f(Vt,ct))Ge[pt]=ct,Ge[St]=Vt,St=pt;else break e}}function a(Ge){return Ge.length===0?null:Ge[0]}function d(Ge){if(Ge.length===0)return null;var ct=Ge[0],St=Ge.pop();if(St!==ct){Ge[0]=St;e:for(var pt=0,Vt=Ge.length,Oe=Vt>>>1;pt<Oe;){var et=2*(pt+1)-1,bt=Ge[et],Tt=et+1,Nt=Ge[Tt];if(0>f(bt,St))Tt<Vt&&0>f(Nt,bt)?(Ge[pt]=Nt,Ge[Tt]=St,pt=Tt):(Ge[pt]=bt,Ge[et]=St,pt=et);else if(Tt<Vt&&0>f(Nt,St))Ge[pt]=Nt,Ge[Tt]=St,pt=Tt;else break e}}return ct}function f(Ge,ct){var St=Ge.sortIndex-ct.sortIndex;return St!==0?St:Ge.id-ct.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;i.unstable_now=function(){return g.now()}}else{var _=Date,c=_.now();i.unstable_now=function(){return _.now()-c}}var A=[],D=[],O=1,z=null,V=3,H=!1,ne=!1,ae=!1,q=!1,he=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,Ee=typeof setImmediate<"u"?setImmediate:null;function Fe(Ge){for(var ct=a(D);ct!==null;){if(ct.callback===null)d(D);else if(ct.startTime<=Ge)d(D),ct.sortIndex=ct.expirationTime,t(A,ct);else break;ct=a(D)}}function De(Ge){if(ae=!1,Fe(Ge),!ne)if(a(A)!==null)ne=!0,ke||(ke=!0,Ct());else{var ct=a(D);ct!==null&&Gt(De,ct.startTime-Ge)}}var ke=!1,ze=-1,rt=5,Se=-1;function nt(){return q?!0:!(i.unstable_now()-Se<rt)}function Mt(){if(q=!1,ke){var Ge=i.unstable_now();Se=Ge;var ct=!0;try{e:{ne=!1,ae&&(ae=!1,Ae(ze),ze=-1),H=!0;var St=V;try{t:{for(Fe(Ge),z=a(A);z!==null&&!(z.expirationTime>Ge&&nt());){var pt=z.callback;if(typeof pt=="function"){z.callback=null,V=z.priorityLevel;var Vt=pt(z.expirationTime<=Ge);if(Ge=i.unstable_now(),typeof Vt=="function"){z.callback=Vt,Fe(Ge),ct=!0;break t}z===a(A)&&d(A),Fe(Ge)}else d(A);z=a(A)}if(z!==null)ct=!0;else{var Oe=a(D);Oe!==null&&Gt(De,Oe.startTime-Ge),ct=!1}}break e}finally{z=null,V=St,H=!1}ct=void 0}}finally{ct?Ct():ke=!1}}}var Ct;if(typeof Ee=="function")Ct=function(){Ee(Mt)};else if(typeof MessageChannel<"u"){var Ft=new MessageChannel,Ut=Ft.port2;Ft.port1.onmessage=Mt,Ct=function(){Ut.postMessage(null)}}else Ct=function(){he(Mt,0)};function Gt(Ge,ct){ze=he(function(){Ge(i.unstable_now())},ct)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ge){Ge.callback=null},i.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rt=0<Ge?Math.floor(1e3/Ge):5},i.unstable_getCurrentPriorityLevel=function(){return V},i.unstable_next=function(Ge){switch(V){case 1:case 2:case 3:var ct=3;break;default:ct=V}var St=V;V=ct;try{return Ge()}finally{V=St}},i.unstable_requestPaint=function(){q=!0},i.unstable_runWithPriority=function(Ge,ct){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var St=V;V=Ge;try{return ct()}finally{V=St}},i.unstable_scheduleCallback=function(Ge,ct,St){var pt=i.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?pt+St:pt):St=pt,Ge){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=St+Vt,Ge={id:O++,callback:ct,priorityLevel:Ge,startTime:St,expirationTime:Vt,sortIndex:-1},St>pt?(Ge.sortIndex=St,t(D,Ge),a(A)===null&&Ge===a(D)&&(ae?(Ae(ze),ze=-1):ae=!0,Gt(De,St-pt))):(Ge.sortIndex=Vt,t(A,Ge),ne||H||(ne=!0,ke||(ke=!0,Ct()))),Ge},i.unstable_shouldYield=nt,i.unstable_wrapCallback=function(Ge){var ct=V;return function(){var St=V;V=ct;try{return Ge.apply(this,arguments)}finally{V=St}}}}(R1)),R1}var CT;function SI(){return CT||(CT=1,I1.exports=TI()),I1.exports}var k1={exports:{}},Ro={};var DT;function EI(){if(DT)return Ro;DT=1;var i=i2();function t(A){var D="https://react.dev/errors/"+A;if(1<arguments.length){D+="?args[]="+encodeURIComponent(arguments[1]);for(var O=2;O<arguments.length;O++)D+="&args[]="+encodeURIComponent(arguments[O])}return"Minified React error #"+A+"; visit "+D+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var d={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},f=Symbol.for("react.portal");function g(A,D,O){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:z==null?null:""+z,children:A,containerInfo:D,implementation:O}}var _=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(A,D){if(A==="font")return"";if(typeof D=="string")return D==="use-credentials"?D:""}return Ro.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Ro.createPortal=function(A,D){var O=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D||D.nodeType!==1&&D.nodeType!==9&&D.nodeType!==11)throw Error(t(299));return g(A,D,null,O)},Ro.flushSync=function(A){var D=_.T,O=d.p;try{if(_.T=null,d.p=2,A)return A()}finally{_.T=D,d.p=O,d.d.f()}},Ro.preconnect=function(A,D){typeof A=="string"&&(D?(D=D.crossOrigin,D=typeof D=="string"?D==="use-credentials"?D:"":void 0):D=null,d.d.C(A,D))},Ro.prefetchDNS=function(A){typeof A=="string"&&d.d.D(A)},Ro.preinit=function(A,D){if(typeof A=="string"&&D&&typeof D.as=="string"){var O=D.as,z=c(O,D.crossOrigin),V=typeof D.integrity=="string"?D.integrity:void 0,H=typeof D.fetchPriority=="string"?D.fetchPriority:void 0;O==="style"?d.d.S(A,typeof D.precedence=="string"?D.precedence:void 0,{crossOrigin:z,integrity:V,fetchPriority:H}):O==="script"&&d.d.X(A,{crossOrigin:z,integrity:V,fetchPriority:H,nonce:typeof D.nonce=="string"?D.nonce:void 0})}},Ro.preinitModule=function(A,D){if(typeof A=="string")if(typeof D=="object"&&D!==null){if(D.as==null||D.as==="script"){var O=c(D.as,D.crossOrigin);d.d.M(A,{crossOrigin:O,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0})}}else D==null&&d.d.M(A)},Ro.preload=function(A,D){if(typeof A=="string"&&typeof D=="object"&&D!==null&&typeof D.as=="string"){var O=D.as,z=c(O,D.crossOrigin);d.d.L(A,O,{crossOrigin:z,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0,type:typeof D.type=="string"?D.type:void 0,fetchPriority:typeof D.fetchPriority=="string"?D.fetchPriority:void 0,referrerPolicy:typeof D.referrerPolicy=="string"?D.referrerPolicy:void 0,imageSrcSet:typeof D.imageSrcSet=="string"?D.imageSrcSet:void 0,imageSizes:typeof D.imageSizes=="string"?D.imageSizes:void 0,media:typeof D.media=="string"?D.media:void 0})}},Ro.preloadModule=function(A,D){if(typeof A=="string")if(D){var O=c(D.as,D.crossOrigin);d.d.m(A,{as:typeof D.as=="string"&&D.as!=="script"?D.as:void 0,crossOrigin:O,integrity:typeof D.integrity=="string"?D.integrity:void 0})}else d.d.m(A)},Ro.requestFormReset=function(A){d.d.r(A)},Ro.unstable_batchedUpdates=function(A,D){return A(D)},Ro.useFormState=function(A,D,O){return _.H.useFormState(A,D,O)},Ro.useFormStatus=function(){return _.H.useHostTransitionStatus()},Ro.version="19.2.0",Ro}var IT;function sA(){if(IT)return k1.exports;IT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),k1.exports=EI(),k1.exports}var RT;function AI(){if(RT)return b_;RT=1;var i=SI(),t=i2(),a=sA();function d(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)u+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function g(o){var u=o,y=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(y=u.return),o=u.return;while(o)}return u.tag===3?y:null}function _(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function A(o){if(g(o)!==o)throw Error(d(188))}function D(o){var u=o.alternate;if(!u){if(u=g(o),u===null)throw Error(d(188));return u!==o?null:o}for(var y=o,S=u;;){var I=y.return;if(I===null)break;var N=I.alternate;if(N===null){if(S=I.return,S!==null){y=S;continue}break}if(I.child===N.child){for(N=I.child;N;){if(N===y)return A(I),o;if(N===S)return A(I),u;N=N.sibling}throw Error(d(188))}if(y.return!==S.return)y=I,S=N;else{for(var W=!1,ue=I.child;ue;){if(ue===y){W=!0,y=I,S=N;break}if(ue===S){W=!0,S=I,y=N;break}ue=ue.sibling}if(!W){for(ue=N.child;ue;){if(ue===y){W=!0,y=N,S=I;break}if(ue===S){W=!0,S=N,y=I;break}ue=ue.sibling}if(!W)throw Error(d(189))}}if(y.alternate!==S)throw Error(d(190))}if(y.tag!==3)throw Error(d(188));return y.stateNode.current===y?o:u}function O(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=O(o),u!==null)return u;o=o.sibling}return null}var z=Object.assign,V=Symbol.for("react.element"),H=Symbol.for("react.transitional.element"),ne=Symbol.for("react.portal"),ae=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),Ae=Symbol.for("react.consumer"),Ee=Symbol.for("react.context"),Fe=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),ze=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),Se=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),Mt=Symbol.iterator;function Ct(o){return o===null||typeof o!="object"?null:(o=Mt&&o[Mt]||o["@@iterator"],typeof o=="function"?o:null)}var Ft=Symbol.for("react.client.reference");function Ut(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Ft?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ae:return"Fragment";case he:return"Profiler";case q:return"StrictMode";case De:return"Suspense";case ke:return"SuspenseList";case Se:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case ne:return"Portal";case Ee:return o.displayName||"Context";case Ae:return(o._context.displayName||"Context")+".Consumer";case Fe:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ze:return u=o.displayName||null,u!==null?u:Ut(o.type)||"Memo";case rt:u=o._payload,o=o._init;try{return Ut(o(u))}catch{}}return null}var Gt=Array.isArray,Ge=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,St={pending:!1,data:null,method:null,action:null},pt=[],Vt=-1;function Oe(o){return{current:o}}function et(o){0>Vt||(o.current=pt[Vt],pt[Vt]=null,Vt--)}function bt(o,u){Vt++,pt[Vt]=o.current,o.current=u}var Tt=Oe(null),Nt=Oe(null),zt=Oe(null),Kt=Oe(null);function rn(o,u){switch(bt(zt,u),bt(Nt,o),bt(Tt,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?W0(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=W0(u),o=ry(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}et(Tt),bt(Tt,o)}function Tn(){et(Tt),et(Nt),et(zt)}function qi(o){o.memoizedState!==null&&bt(Kt,o);var u=Tt.current,y=ry(u,o.type);u!==y&&(bt(Nt,o),bt(Tt,y))}function tr(o){Nt.current===o&&(et(Tt),et(Nt)),Kt.current===o&&(et(Kt),Md._currentValue=St)}var Ri,Hr;function bn(o){if(Ri===void 0)try{throw Error()}catch(y){var u=y.stack.trim().match(/\n( *(at )?)/);Ri=u&&u[1]||"",Hr=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ri+o+Hr}var xn=!1;function gr(o,u){if(!o||xn)return"";xn=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(u){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch(at){var tt=at}Reflect.construct(o,[],_t)}else{try{_t.call()}catch(at){tt=at}o.call(_t.prototype)}}else{try{throw Error()}catch(at){tt=at}(_t=o())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch(at){if(at&&tt&&typeof at.stack=="string")return[at.stack,tt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=S.DetermineComponentFrameRoot(),W=N[0],ue=N[1];if(W&&ue){var Le=W.split(`
`),Ke=ue.split(`
`);for(I=S=0;S<Le.length&&!Le[S].includes("DetermineComponentFrameRoot");)S++;for(;I<Ke.length&&!Ke[I].includes("DetermineComponentFrameRoot");)I++;if(S===Le.length||I===Ke.length)for(S=Le.length-1,I=Ke.length-1;1<=S&&0<=I&&Le[S]!==Ke[I];)I--;for(;1<=S&&0<=I;S--,I--)if(Le[S]!==Ke[I]){if(S!==1||I!==1)do if(S--,I--,0>I||Le[S]!==Ke[I]){var ht=`
`+Le[S].replace(" at new "," at ");return o.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",o.displayName)),ht}while(1<=S&&0<=I);break}}}finally{xn=!1,Error.prepareStackTrace=y}return(y=o?o.displayName||o.name:"")?bn(y):""}function Wn(o,u){switch(o.tag){case 26:case 27:case 5:return bn(o.type);case 16:return bn("Lazy");case 13:return o.child!==u&&u!==null?bn("Suspense Fallback"):bn("Suspense");case 19:return bn("SuspenseList");case 0:case 15:return gr(o.type,!1);case 11:return gr(o.type.render,!1);case 1:return gr(o.type,!0);case 31:return bn("Activity");default:return""}}function ba(o){try{var u="",y=null;do u+=Wn(o,y),y=o,o=o.return;while(o);return u}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var oa=Object.prototype.hasOwnProperty,jr=i.unstable_scheduleCallback,Wr=i.unstable_cancelCallback,xa=i.unstable_shouldYield,Qa=i.unstable_requestPaint,ki=i.unstable_now,Sr=i.unstable_getCurrentPriorityLevel,Cn=i.unstable_ImmediatePriority,sa=i.unstable_UserBlockingPriority,la=i.unstable_NormalPriority,Au=i.unstable_LowPriority,il=i.unstable_IdlePriority,Mu=i.log,Dc=i.unstable_setDisableYieldValue,wa=null,zi=null;function Ie(o){if(typeof Mu=="function"&&Dc(o),zi&&typeof zi.setStrictMode=="function")try{zi.setStrictMode(wa,o)}catch{}}var K=Math.clz32?Math.clz32:xe,te=Math.log,le=Math.LN2;function xe(o){return o>>>=0,o===0?32:31-(te(o)/le|0)|0}var Te=256,Ue=262144,me=4194304;function je(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Qe(o,u,y){var S=o.pendingLanes;if(S===0)return 0;var I=0,N=o.suspendedLanes,W=o.pingedLanes;o=o.warmLanes;var ue=S&134217727;return ue!==0?(S=ue&~N,S!==0?I=je(S):(W&=ue,W!==0?I=je(W):y||(y=ue&~o,y!==0&&(I=je(y))))):(ue=S&~N,ue!==0?I=je(ue):W!==0?I=je(W):y||(y=S&~o,y!==0&&(I=je(y)))),I===0?0:u!==0&&u!==I&&(u&N)===0&&(N=I&-I,y=u&-u,N>=y||N===32&&(y&4194048)!==0)?u:I}function Je(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function it(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lt(){var o=me;return me<<=1,(me&62914560)===0&&(me=4194304),o}function Yt(o){for(var u=[],y=0;31>y;y++)u.push(o);return u}function on(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Hi(o,u,y,S,I,N){var W=o.pendingLanes;o.pendingLanes=y,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=y,o.entangledLanes&=y,o.errorRecoveryDisabledLanes&=y,o.shellSuspendCounter=0;var ue=o.entanglements,Le=o.expirationTimes,Ke=o.hiddenUpdates;for(y=W&~y;0<y;){var ht=31-K(y),_t=1<<ht;ue[ht]=0,Le[ht]=-1;var tt=Ke[ht];if(tt!==null)for(Ke[ht]=null,ht=0;ht<tt.length;ht++){var at=tt[ht];at!==null&&(at.lane&=-536870913)}y&=~_t}S!==0&&Sn(o,S,0),N!==0&&I===0&&o.tag!==0&&(o.suspendedLanes|=N&~(W&~u))}function Sn(o,u,y){o.pendingLanes|=u,o.suspendedLanes&=~u;var S=31-K(u);o.entangledLanes|=u,o.entanglements[S]=o.entanglements[S]|1073741824|y&261930}function Yn(o,u){var y=o.entangledLanes|=u;for(o=o.entanglements;y;){var S=31-K(y),I=1<<S;I&u|o[S]&u&&(o[S]|=u),y&=~I}}function hi(o,u){var y=u&-u;return y=(y&42)!==0?1:vt(y),(y&(o.suspendedLanes|u))!==0?0:y}function vt(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function di(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function fi(){var o=ct.p;return o!==0?o:(o=window.event,o===void 0?32:wb(o.type))}function lr(o,u){var y=ct.p;try{return ct.p=o,u()}finally{ct.p=y}}var qn=Math.random().toString(36).slice(2),dt="__reactFiber$"+qn,kt="__reactProps$"+qn,qt="__reactContainer$"+qn,ca="__reactEvents$"+qn,Ic="__reactListeners$"+qn,Br="__reactHandles$"+qn,tn="__reactResources$"+qn,Ka="__reactMarker$"+qn;function Ul(o){delete o[dt],delete o[kt],delete o[ca],delete o[Ic],delete o[Br]}function Po(o){var u=o[dt];if(u)return u;for(var y=o.parentNode;y;){if(u=y[qt]||y[dt]){if(y=u.alternate,u.child!==null||y!==null&&y.child!==null)for(o=J0(o);o!==null;){if(y=o[dt])return y;o=J0(o)}return u}o=y,y=o.parentNode}return null}function ua(o){if(o=o[dt]||o[qt]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function zo(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(d(33))}function Fo(o){var u=o[tn];return u||(u=o[tn]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Wi(o){o[Ka]=!0}var Pa=new Set,pi={};function Rc(o,u){Ta(o,u),Ta(o+"Capture",u)}function Ta(o,u){for(pi[o]=u,o=0;o<u.length;o++)Pa.add(u[o])}var kh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fi={},rl={};function Ip(o){return oa.call(rl,o)?!0:oa.call(Fi,o)?!1:kh.test(o)?rl[o]=!0:(Fi[o]=!0,!1)}function al(o,u,y){if(Ip(u))if(y===null)o.removeAttribute(u);else{switch(typeof y){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var S=u.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+y)}}function Cu(o,u,y){if(y===null)o.removeAttribute(u);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+y)}}function za(o,u,y,S){if(S===null)o.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(y);return}o.setAttributeNS(u,y,""+S)}}function Ja(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Rp(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function u0(o,u,y){var S=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var I=S.get,N=S.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return I.call(this)},set:function(W){y=""+W,N.call(this,W)}}),Object.defineProperty(o,u,{enumerable:S.enumerable}),{getValue:function(){return y},setValue:function(W){y=""+W},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function lf(o){if(!o._valueTracker){var u=Rp(o)?"checked":"value";o._valueTracker=u0(o,u,""+o[u])}}function kp(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var y=u.getValue(),S="";return o&&(S=Rp(o)?o.checked?"true":"false":o.value),o=S,o!==y?(u.setValue(o),!0):!1}function Oh(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Op=/[\n"\\]/g;function Fa(o){return o.replace(Op,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function cf(o,u,y,S,I,N,W,ue){o.name="",W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?o.type=W:o.removeAttribute("type"),u!=null?W==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Ja(u)):o.value!==""+Ja(u)&&(o.value=""+Ja(u)):W!=="submit"&&W!=="reset"||o.removeAttribute("value"),u!=null?Lh(o,W,Ja(u)):y!=null?Lh(o,W,Ja(y)):S!=null&&o.removeAttribute("value"),I==null&&N!=null&&(o.defaultChecked=!!N),I!=null&&(o.checked=I&&typeof I!="function"&&typeof I!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?o.name=""+Ja(ue):o.removeAttribute("name")}function uf(o,u,y,S,I,N,W,ue){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.type=N),u!=null||y!=null){if(!(N!=="submit"&&N!=="reset"||u!=null)){lf(o);return}y=y!=null?""+Ja(y):"",u=u!=null?""+Ja(u):y,ue||u===o.value||(o.value=u),o.defaultValue=u}S=S??I,S=typeof S!="function"&&typeof S!="symbol"&&!!S,o.checked=ue?o.checked:!!S,o.defaultChecked=!!S,W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(o.name=W),lf(o)}function Lh(o,u,y){u==="number"&&Oh(o.ownerDocument)===o||o.defaultValue===""+y||(o.defaultValue=""+y)}function kc(o,u,y,S){if(o=o.options,u){u={};for(var I=0;I<y.length;I++)u["$"+y[I]]=!0;for(y=0;y<o.length;y++)I=u.hasOwnProperty("$"+o[y].value),o[y].selected!==I&&(o[y].selected=I),I&&S&&(o[y].defaultSelected=!0)}else{for(y=""+Ja(y),u=null,I=0;I<o.length;I++){if(o[I].value===y){o[I].selected=!0,S&&(o[I].defaultSelected=!0);return}u!==null||o[I].disabled||(u=o[I])}u!==null&&(u.selected=!0)}}function bs(o,u,y){if(u!=null&&(u=""+Ja(u),u!==o.value&&(o.value=u),y==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=y!=null?""+Ja(y):""}function Nh(o,u,y,S){if(u==null){if(S!=null){if(y!=null)throw Error(d(92));if(Gt(S)){if(1<S.length)throw Error(d(93));S=S[0]}y=S}y==null&&(y=""),u=y}y=Ja(u),o.defaultValue=y,S=o.textContent,S===y&&S!==""&&S!==null&&(o.value=S),lf(o)}function Oc(o,u){if(u){var y=o.firstChild;if(y&&y===o.lastChild&&y.nodeType===3){y.nodeValue=u;return}}o.textContent=u}var xs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lp(o,u,y){var S=u.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":S?o.setProperty(u,y):typeof y!="number"||y===0||xs.has(u)?u==="float"?o.cssFloat=y:o[u]=(""+y).trim():o[u]=y+"px"}function fg(o,u,y){if(u!=null&&typeof u!="object")throw Error(d(62));if(o=o.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||u!=null&&u.hasOwnProperty(S)||(S.indexOf("--")===0?o.setProperty(S,""):S==="float"?o.cssFloat="":o[S]="");for(var I in u)S=u[I],u.hasOwnProperty(I)&&y[I]!==S&&Lp(o,I,S)}else for(var N in u)u.hasOwnProperty(N)&&Lp(o,N,u[N])}function ws(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sa(o){return Dn.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function mn(){}var Ts=null;function nr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var cr=null,ur=null;function yr(o){var u=ua(o);if(u&&(o=u.stateNode)){var y=o[kt]||null;e:switch(o=u.stateNode,u.type){case"input":if(cf(o,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),u=y.name,y.type==="radio"&&u!=null){for(y=o;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Fa(""+u)+'"][type="radio"]'),u=0;u<y.length;u++){var S=y[u];if(S!==o&&S.form===o.form){var I=S[kt]||null;if(!I)throw Error(d(90));cf(S,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(u=0;u<y.length;u++)S=y[u],S.form===o.form&&kp(S)}break e;case"textarea":bs(o,y.value,y.defaultValue);break e;case"select":u=y.value,u!=null&&kc(o,!!y.multiple,u,!1)}}}var li=!1;function Ph(o,u,y){if(li)return o(u,y);li=!0;try{var S=o(u);return S}finally{if(li=!1,(cr!==null||ur!==null)&&(Wf(),cr&&(u=cr,o=ur,ur=cr=null,yr(u),o)))for(u=0;u<o.length;u++)yr(o[u])}}function Er(o,u){var y=o.stateNode;if(y===null)return null;var S=y[kt]||null;if(S===null)return null;y=S[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(o=o.type,S=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!S;break e;default:o=!1}if(o)return null;if(y&&typeof y!="function")throw Error(d(231,u,typeof y));return y}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vr=!1;if(ir)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){Vr=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{Vr=!1}var Ea=null,mi=null,ol=null;function sl(){if(ol)return ol;var o,u=mi,y=u.length,S,I="value"in Ea?Ea.value:Ea.textContent,N=I.length;for(o=0;o<y&&u[o]===I[o];o++);var W=y-o;for(S=1;S<=W&&u[y-S]===I[N-S];S++);return ol=I.slice(o,1<S?1-S:void 0)}function Gl(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Xr(){return!0}function xi(){return!1}function Xi(o){function u(y,S,I,N,W){this._reactName=y,this._targetInst=I,this.type=S,this.nativeEvent=N,this.target=W,this.currentTarget=null;for(var ue in o)o.hasOwnProperty(ue)&&(y=o[ue],this[ue]=y?y(N):N[ue]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Xr:xi,this.isPropagationStopped=xi,this}return z(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),u}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=Xi(En),Ss=z({},En,{view:0,detail:0}),Pn=Xi(Ss),Zl,eo,ll,Es=z({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ff,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ll&&(ll&&o.type==="mousemove"?(Zl=o.screenX-ll.screenX,eo=o.screenY-ll.screenY):eo=Zl=0,ll=o),Zl)},movementY:function(o){return"movementY"in o?o.movementY:eo}}),zh=Xi(Es),Fh=z({},Es,{dataTransfer:0}),jh=Xi(Fh),hf=z({},Ss,{relatedTarget:0}),$l=Xi(hf),pg=z({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),As=Xi(pg),Qr=z({},En,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),df=Xi(Qr),mg=z({},En,{data:0}),Ur=Xi(mg),_r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Np(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Iu[o])?!!u[o]:!1}function ff(){return Np}var Bo=z({},Ss,{key:function(o){if(o.key){var u=_r[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Gl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?jo[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ff,charCode:function(o){return o.type==="keypress"?Gl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Gl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),pf=Xi(Bo),Pp=z({},Es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gg=Xi(Pp),yg=z({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ff}),mf=Xi(yg),gf=z({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),ja=Xi(gf),yf=z({},Es,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Nc=Xi(yf),zp=z({},En,{newState:0,oldState:0}),Bh=Xi(zp),Ms=[9,13,27,32],Fp=ir&&"CompositionEvent"in window,Pc=null;ir&&"documentMode"in document&&(Pc=document.documentMode);var Vh=ir&&"TextEvent"in window&&!Pc,cl=ir&&(!Fp||Pc&&8<Pc&&11>=Pc),_g=" ",Ru=!1;function jp(o,u){switch(o){case"keyup":return Ms.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Fc=!1;function vg(o,u){switch(o){case"compositionend":return zc(u);case"keypress":return u.which!==32?null:(Ru=!0,_g);case"textInput":return o=u.data,o===_g&&Ru?null:o;default:return null}}function h0(o,u){if(Fc)return o==="compositionend"||!Fp&&jp(o,u)?(o=sl(),ol=mi=Ea=null,Fc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return cl&&u.locale!=="ko"?null:u.data;default:return null}}var bg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _f(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!bg[o.type]:u==="textarea"}function Bp(o,u,y,S){cr?ur?ur.push(S):ur=[S]:cr=S,u=Em(u,"onChange"),0<u.length&&(y=new hn("onChange","change",null,y,S),o.push({event:y,listeners:u}))}var jc=null,Bc=null;function Vp(o){hu(o,0)}function Cs(o){var u=zo(o);if(kp(u))return o}function Up(o,u){if(o==="change")return u}var Gp=!1;if(ir){var Vc;if(ir){var ku="oninput"in document;if(!ku){var Ou=document.createElement("div");Ou.setAttribute("oninput","return;"),ku=typeof Ou.oninput=="function"}Vc=ku}else Vc=!1;Gp=Vc&&(!document.documentMode||9<document.documentMode)}function xg(){jc&&(jc.detachEvent("onpropertychange",wg),Bc=jc=null)}function wg(o){if(o.propertyName==="value"&&Cs(Bc)){var u=[];Bp(u,Bc,o,nr(o)),Ph(Vp,u)}}function Tg(o,u,y){o==="focusin"?(xg(),jc=u,Bc=y,jc.attachEvent("onpropertychange",wg)):o==="focusout"&&xg()}function vf(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Cs(Bc)}function Zp(o,u){if(o==="click")return Cs(u)}function $p(o,u){if(o==="input"||o==="change")return Cs(u)}function Sg(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Kr=typeof Object.is=="function"?Object.is:Sg;function Ba(o,u){if(Kr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var y=Object.keys(o),S=Object.keys(u);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var I=y[S];if(!oa.call(u,I)||!Kr(o[I],u[I]))return!1}return!0}function bf(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function xf(o,u){var y=bf(o);o=0;for(var S;y;){if(y.nodeType===3){if(S=o+y.textContent.length,o<=u&&S>=u)return{node:y,offset:u-o};o=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=bf(y)}}function wf(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?wf(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Tf(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Oh(o.document);u instanceof o.HTMLIFrameElement;){try{var y=typeof u.contentWindow.location.href=="string"}catch{y=!1}if(y)o=u.contentWindow;else break;u=Oh(o.document)}return u}function Uh(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var Uc=ir&&"documentMode"in document&&11>=document.documentMode,Yl=null,Yp=null,zn=null,qp=!1;function Eg(o,u,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;qp||Yl==null||Yl!==Oh(S)||(S=Yl,"selectionStart"in S&&Uh(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),zn&&Ba(zn,S)||(zn=S,S=Em(Yp,"onSelect"),0<S.length&&(u=new hn("onSelect","select",null,u,y),o.push({event:u,listeners:S}),u.target=Yl)))}function ql(o,u){var y={};return y[o.toLowerCase()]=u.toLowerCase(),y["Webkit"+o]="webkit"+u,y["Moz"+o]="moz"+u,y}var Lu={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionrun:ql("Transition","TransitionRun"),transitionstart:ql("Transition","TransitionStart"),transitioncancel:ql("Transition","TransitionCancel"),transitionend:ql("Transition","TransitionEnd")},Sf={},Gh={};ir&&(Gh=document.createElement("div").style,"AnimationEvent"in window||(delete Lu.animationend.animation,delete Lu.animationiteration.animation,delete Lu.animationstart.animation),"TransitionEvent"in window||delete Lu.transitionend.transition);function Ds(o){if(Sf[o])return Sf[o];if(!Lu[o])return o;var u=Lu[o],y;for(y in u)if(u.hasOwnProperty(y)&&y in Gh)return Sf[o]=u[y];return o}var Zh=Ds("animationend"),Ef=Ds("animationiteration"),Hl=Ds("animationstart"),$h=Ds("transitionrun"),Nu=Ds("transitionstart"),_o=Ds("transitioncancel"),Hp=Ds("transitionend"),Wp=new Map,Yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yh.push("scrollEnd");function Jr(o,u){Wp.set(o,u),Rc(u,[o])}var Gc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Aa=[],Is=0,Pu=0;function qh(){for(var o=Is,u=Pu=Is=0;u<o;){var y=Aa[u];Aa[u++]=null;var S=Aa[u];Aa[u++]=null;var I=Aa[u];Aa[u++]=null;var N=Aa[u];if(Aa[u++]=null,S!==null&&I!==null){var W=S.pending;W===null?I.next=I:(I.next=W.next,W.next=I),S.pending=I}N!==0&&Af(y,I,N)}}function ul(o,u,y,S){Aa[Is++]=o,Aa[Is++]=u,Aa[Is++]=y,Aa[Is++]=S,Pu|=S,o.lanes|=S,o=o.alternate,o!==null&&(o.lanes|=S)}function Wl(o,u,y,S){return ul(o,u,y,S),gn(o)}function Xl(o,u){return ul(o,null,null,u),gn(o)}function Af(o,u,y){o.lanes|=y;var S=o.alternate;S!==null&&(S.lanes|=y);for(var I=!1,N=o.return;N!==null;)N.childLanes|=y,S=N.alternate,S!==null&&(S.childLanes|=y),N.tag===22&&(o=N.stateNode,o===null||o._visibility&1||(I=!0)),o=N,N=N.return;return o.tag===3?(N=o.stateNode,I&&u!==null&&(I=31-K(y),o=N.hiddenUpdates,S=o[I],S===null?o[I]=[u]:S.push(u),u.lane=y|536870912),N):null}function gn(o){if(50<cu)throw cu=0,R0=null,Error(d(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var hl={};function d0(o,u,y,S){this.tag=o,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Va(o,u,y,S){return new d0(o,u,y,S)}function Zc(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Vo(o,u){var y=o.alternate;return y===null?(y=Va(o.tag,u,o.key,o.mode),y.elementType=o.elementType,y.type=o.type,y.stateNode=o.stateNode,y.alternate=o,o.alternate=y):(y.pendingProps=u,y.type=o.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=o.flags&65011712,y.childLanes=o.childLanes,y.lanes=o.lanes,y.child=o.child,y.memoizedProps=o.memoizedProps,y.memoizedState=o.memoizedState,y.updateQueue=o.updateQueue,u=o.dependencies,y.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},y.sibling=o.sibling,y.index=o.index,y.ref=o.ref,y.refCleanup=o.refCleanup,y}function Ag(o,u){o.flags&=65011714;var y=o.alternate;return y===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=y.childLanes,o.lanes=y.lanes,o.child=y.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=y.memoizedProps,o.memoizedState=y.memoizedState,o.updateQueue=y.updateQueue,o.type=y.type,u=y.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Hh(o,u,y,S,I,N){var W=0;if(S=o,typeof o=="function")Zc(o)&&(W=1);else if(typeof o=="string")W=a_(o,y,Tt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case Se:return o=Va(31,y,u,I),o.elementType=Se,o.lanes=N,o;case ae:return $c(y.children,I,N,u);case q:W=8,I|=24;break;case he:return o=Va(12,y,u,I|2),o.elementType=he,o.lanes=N,o;case De:return o=Va(13,y,u,I),o.elementType=De,o.lanes=N,o;case ke:return o=Va(19,y,u,I),o.elementType=ke,o.lanes=N,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ee:W=10;break e;case Ae:W=9;break e;case Fe:W=11;break e;case ze:W=14;break e;case rt:W=16,S=null;break e}W=29,y=Error(d(130,o===null?"null":typeof o,"")),S=null}return u=Va(W,y,u,I),u.elementType=o,u.type=S,u.lanes=N,u}function $c(o,u,y,S){return o=Va(7,o,S,u),o.lanes=y,o}function zu(o,u,y){return o=Va(6,o,null,u),o.lanes=y,o}function Wh(o){var u=Va(18,null,null,0);return u.stateNode=o,u}function Fu(o,u,y){return u=Va(4,o.children!==null?o.children:[],o.key,u),u.lanes=y,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Ql=new WeakMap;function Ma(o,u){if(typeof o=="object"&&o!==null){var y=Ql.get(o);return y!==void 0?y:(u={value:o,source:u,stack:ba(u)},Ql.set(o,u),u)}return{value:o,source:u,stack:ba(u)}}var Yc=[],dl=0,qc=null,Kl=0,ea=[],Ca=0,fl=null,Ua=1,Rs="";function Uo(o,u){Yc[dl++]=Kl,Yc[dl++]=qc,qc=o,Kl=u}function ju(o,u,y){ea[Ca++]=Ua,ea[Ca++]=Rs,ea[Ca++]=fl,fl=o;var S=Ua;o=Rs;var I=32-K(S)-1;S&=~(1<<I),y+=1;var N=32-K(u)+I;if(30<N){var W=I-I%5;N=(S&(1<<W)-1).toString(32),S>>=W,I-=W,Ua=1<<32-K(u)+I|y<<I|S,Rs=N+o}else Ua=1<<N|y<<I|S,Rs=o}function Bu(o){o.return!==null&&(Uo(o,1),ju(o,1,0))}function Mf(o){for(;o===qc;)qc=Yc[--dl],Yc[dl]=null,Kl=Yc[--dl],Yc[dl]=null;for(;o===fl;)fl=ea[--Ca],ea[Ca]=null,Rs=ea[--Ca],ea[Ca]=null,Ua=ea[--Ca],ea[Ca]=null}function Xp(o,u){ea[Ca++]=Ua,ea[Ca++]=Rs,ea[Ca++]=fl,Ua=u.id,Rs=u.overflow,fl=o}var vr=null,wi=null,Fn=!1,ks=null,Un=!1,Go=Error(d(519));function hr(o){var u=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(Ma(u,o)),Go}function Vu(o){var u=o.stateNode,y=o.type,S=o.memoizedProps;switch(u[dt]=o,u[kt]=S,y){case"dialog":jn("cancel",u),jn("close",u);break;case"iframe":case"object":case"embed":jn("load",u);break;case"video":case"audio":for(y=0;y<Tm.length;y++)jn(Tm[y],u);break;case"source":jn("error",u);break;case"img":case"image":case"link":jn("error",u),jn("load",u);break;case"details":jn("toggle",u);break;case"input":jn("invalid",u),uf(u,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":jn("invalid",u);break;case"textarea":jn("invalid",u),Nh(u,S.value,S.defaultValue,S.children)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||u.textContent===""+y||S.suppressHydrationWarning===!0||wd(u.textContent,y)?(S.popover!=null&&(jn("beforetoggle",u),jn("toggle",u)),S.onScroll!=null&&jn("scroll",u),S.onScrollEnd!=null&&jn("scrollend",u),S.onClick!=null&&(u.onclick=mn),u=!0):u=!1,u||hr(o,!0)}function Jl(o){for(vr=o.return;vr;)switch(vr.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:vr=vr.return}}function Hc(o){if(o!==vr)return!1;if(!Fn)return Jl(o),Fn=!0,!1;var u=o.tag,y;if((y=u!==3&&u!==27)&&((y=u===5)&&(y=o.type,y=!(y!=="form"&&y!=="button")||Cm(o.type,o.memoizedProps)),y=!y),y&&wi&&hr(o),Jl(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(d(317));wi=mb(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(d(317));wi=mb(o)}else u===27?(u=wi,kr(o.type)?(o=oh,oh=null,wi=o):wi=u):wi=vr?ma(o.stateNode.nextSibling):null;return!0}function vo(){wi=vr=null,Fn=!1}function Xh(){var o=ks;return o!==null&&(oo===null?oo=o:oo.push.apply(oo,o),ks=null),o}function pl(o){ks===null?ks=[o]:ks.push(o)}var Qh=Oe(null),ec=null,Zo=null;function Os(o,u,y){bt(Qh,u._currentValue),u._currentValue=y}function to(o){o._currentValue=Qh.current,et(Qh)}function Cf(o,u,y){for(;o!==null;){var S=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,S!==null&&(S.childLanes|=u)):S!==null&&(S.childLanes&u)!==u&&(S.childLanes|=u),o===y)break;o=o.return}}function Ls(o,u,y,S){var I=o.child;for(I!==null&&(I.return=o);I!==null;){var N=I.dependencies;if(N!==null){var W=I.child;N=N.firstContext;e:for(;N!==null;){var ue=N;N=I;for(var Le=0;Le<u.length;Le++)if(ue.context===u[Le]){N.lanes|=y,ue=N.alternate,ue!==null&&(ue.lanes|=y),Cf(N.return,y,o),S||(W=null);break e}N=ue.next}}else if(I.tag===18){if(W=I.return,W===null)throw Error(d(341));W.lanes|=y,N=W.alternate,N!==null&&(N.lanes|=y),Cf(W,y,o),W=null}else W=I.child;if(W!==null)W.return=I;else for(W=I;W!==null;){if(W===o){W=null;break}if(I=W.sibling,I!==null){I.return=W.return,W=I;break}W=W.return}I=W}}function tc(o,u,y,S){o=null;for(var I=u,N=!1;I!==null;){if(!N){if((I.flags&524288)!==0)N=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var W=I.alternate;if(W===null)throw Error(d(387));if(W=W.memoizedProps,W!==null){var ue=I.type;Kr(I.pendingProps.value,W.value)||(o!==null?o.push(ue):o=[ue])}}else if(I===Kt.current){if(W=I.alternate,W===null)throw Error(d(387));W.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(o!==null?o.push(Md):o=[Md])}I=I.return}o!==null&&Ls(u,o,y,S),u.flags|=262144}function Kh(o){for(o=o.firstContext;o!==null;){if(!Kr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ml(o){ec=o,Zo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ar(o){return Qp(ec,o)}function gl(o,u){return ec===null&&ml(o),Qp(o,u)}function Qp(o,u){var y=u._currentValue;if(u={context:u,memoizedValue:y,next:null},Zo===null){if(o===null)throw Error(d(308));Zo=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Zo=Zo.next=u;return y}var Mg=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(y,S){o.push(S)}};this.abort=function(){u.aborted=!0,o.forEach(function(y){return y()})}},Cg=i.unstable_scheduleCallback,Df=i.unstable_NormalPriority,dr={$$typeof:Ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ga(){return{controller:new Mg,data:new Map,refCount:0}}function Mr(o){o.refCount--,o.refCount===0&&Cg(Df,function(){o.controller.abort()})}var Ns=null,ji=0,Ps=0,bo=null;function f0(o,u){if(Ns===null){var y=Ns=[];ji=0,Ps=xm(),bo={status:"pending",value:void 0,then:function(S){y.push(S)}}}return ji++,u.then(Dg,Dg),u}function Dg(){if(--ji===0&&Ns!==null){bo!==null&&(bo.status="fulfilled");var o=Ns;Ns=null,Ps=0,bo=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function Jh(o,u){var y=[],S={status:"pending",value:null,reason:null,then:function(I){y.push(I)}};return o.then(function(){S.status="fulfilled",S.value=u;for(var I=0;I<y.length;I++)(0,y[I])(u)},function(I){for(S.status="rejected",S.reason=I,I=0;I<y.length;I++)(0,y[I])(void 0)}),S}var Kp=Ge.S;Ge.S=function(o,u){Jv=ki(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&f0(o,u),Kp!==null&&Kp(o,u)};var zs=Oe(null);function Wc(){var o=zs.current;return o!==null?o:Ei.pooledCache}function Za(o,u){u===null?bt(zs,zs.current):bt(zs,u.pool)}function Ot(){var o=Wc();return o===null?null:{parent:dr._currentValue,pool:o}}var $o=Error(d(460)),ed=Error(d(474)),td=Error(d(542)),nc={then:function(){}};function Fs(o){return o=o.status,o==="fulfilled"||o==="rejected"}function If(o,u,y){switch(y=o[y],y===void 0?o.push(u):y!==u&&(u.then(mn,mn),u=y),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Uu(o),o;default:if(typeof u.status=="string")u.then(mn,mn);else{if(o=Ei,o!==null&&100<o.shellSuspendCounter)throw Error(d(482));o=u,o.status="pending",o.then(function(S){if(u.status==="pending"){var I=u;I.status="fulfilled",I.value=S}},function(S){if(u.status==="pending"){var I=u;I.status="rejected",I.reason=S}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Uu(o),o}throw xo=u,$o}}function Xc(o){try{var u=o._init;return u(o._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(xo=y,$o):y}}var xo=null;function Jp(){if(xo===null)throw Error(d(459));var o=xo;return xo=null,o}function Uu(o){if(o===$o||o===td)throw Error(d(483))}var yl=null,Qc=0;function nd(o){var u=Qc;return Qc+=1,yl===null&&(yl=[]),If(yl,o,u)}function Gu(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Zu(o,u){throw u.$$typeof===V?Error(d(525)):(o=Object.prototype.toString.call(u),Error(d(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function Rf(o){function u(Ze,Ve){if(o){var Xe=Ze.deletions;Xe===null?(Ze.deletions=[Ve],Ze.flags|=16):Xe.push(Ve)}}function y(Ze,Ve){if(!o)return null;for(;Ve!==null;)u(Ze,Ve),Ve=Ve.sibling;return null}function S(Ze){for(var Ve=new Map;Ze!==null;)Ze.key!==null?Ve.set(Ze.key,Ze):Ve.set(Ze.index,Ze),Ze=Ze.sibling;return Ve}function I(Ze,Ve){return Ze=Vo(Ze,Ve),Ze.index=0,Ze.sibling=null,Ze}function N(Ze,Ve,Xe){return Ze.index=Xe,o?(Xe=Ze.alternate,Xe!==null?(Xe=Xe.index,Xe<Ve?(Ze.flags|=67108866,Ve):Xe):(Ze.flags|=67108866,Ve)):(Ze.flags|=1048576,Ve)}function W(Ze){return o&&Ze.alternate===null&&(Ze.flags|=67108866),Ze}function ue(Ze,Ve,Xe,mt){return Ve===null||Ve.tag!==6?(Ve=zu(Xe,Ze.mode,mt),Ve.return=Ze,Ve):(Ve=I(Ve,Xe),Ve.return=Ze,Ve)}function Le(Ze,Ve,Xe,mt){var en=Xe.type;return en===ae?ht(Ze,Ve,Xe.props.children,mt,Xe.key):Ve!==null&&(Ve.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===rt&&Xc(en)===Ve.type)?(Ve=I(Ve,Xe.props),Gu(Ve,Xe),Ve.return=Ze,Ve):(Ve=Hh(Xe.type,Xe.key,Xe.props,null,Ze.mode,mt),Gu(Ve,Xe),Ve.return=Ze,Ve)}function Ke(Ze,Ve,Xe,mt){return Ve===null||Ve.tag!==4||Ve.stateNode.containerInfo!==Xe.containerInfo||Ve.stateNode.implementation!==Xe.implementation?(Ve=Fu(Xe,Ze.mode,mt),Ve.return=Ze,Ve):(Ve=I(Ve,Xe.children||[]),Ve.return=Ze,Ve)}function ht(Ze,Ve,Xe,mt,en){return Ve===null||Ve.tag!==7?(Ve=$c(Xe,Ze.mode,mt,en),Ve.return=Ze,Ve):(Ve=I(Ve,Xe),Ve.return=Ze,Ve)}function _t(Ze,Ve,Xe){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return Ve=zu(""+Ve,Ze.mode,Xe),Ve.return=Ze,Ve;if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case H:return Xe=Hh(Ve.type,Ve.key,Ve.props,null,Ze.mode,Xe),Gu(Xe,Ve),Xe.return=Ze,Xe;case ne:return Ve=Fu(Ve,Ze.mode,Xe),Ve.return=Ze,Ve;case rt:return Ve=Xc(Ve),_t(Ze,Ve,Xe)}if(Gt(Ve)||Ct(Ve))return Ve=$c(Ve,Ze.mode,Xe,null),Ve.return=Ze,Ve;if(typeof Ve.then=="function")return _t(Ze,nd(Ve),Xe);if(Ve.$$typeof===Ee)return _t(Ze,gl(Ze,Ve),Xe);Zu(Ze,Ve)}return null}function tt(Ze,Ve,Xe,mt){var en=Ve!==null?Ve.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return en!==null?null:ue(Ze,Ve,""+Xe,mt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case H:return Xe.key===en?Le(Ze,Ve,Xe,mt):null;case ne:return Xe.key===en?Ke(Ze,Ve,Xe,mt):null;case rt:return Xe=Xc(Xe),tt(Ze,Ve,Xe,mt)}if(Gt(Xe)||Ct(Xe))return en!==null?null:ht(Ze,Ve,Xe,mt,null);if(typeof Xe.then=="function")return tt(Ze,Ve,nd(Xe),mt);if(Xe.$$typeof===Ee)return tt(Ze,Ve,gl(Ze,Xe),mt);Zu(Ze,Xe)}return null}function at(Ze,Ve,Xe,mt,en){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Ze=Ze.get(Xe)||null,ue(Ve,Ze,""+mt,en);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case H:return Ze=Ze.get(mt.key===null?Xe:mt.key)||null,Le(Ve,Ze,mt,en);case ne:return Ze=Ze.get(mt.key===null?Xe:mt.key)||null,Ke(Ve,Ze,mt,en);case rt:return mt=Xc(mt),at(Ze,Ve,Xe,mt,en)}if(Gt(mt)||Ct(mt))return Ze=Ze.get(Xe)||null,ht(Ve,Ze,mt,en,null);if(typeof mt.then=="function")return at(Ze,Ve,Xe,nd(mt),en);if(mt.$$typeof===Ee)return at(Ze,Ve,Xe,gl(Ve,mt),en);Zu(Ve,mt)}return null}function Zt(Ze,Ve,Xe,mt){for(var en=null,Qn=null,Ht=Ve,An=Ve=0,Bn=null;Ht!==null&&An<Xe.length;An++){Ht.index>An?(Bn=Ht,Ht=null):Bn=Ht.sibling;var ei=tt(Ze,Ht,Xe[An],mt);if(ei===null){Ht===null&&(Ht=Bn);break}o&&Ht&&ei.alternate===null&&u(Ze,Ht),Ve=N(ei,Ve,An),Qn===null?en=ei:Qn.sibling=ei,Qn=ei,Ht=Bn}if(An===Xe.length)return y(Ze,Ht),Fn&&Uo(Ze,An),en;if(Ht===null){for(;An<Xe.length;An++)Ht=_t(Ze,Xe[An],mt),Ht!==null&&(Ve=N(Ht,Ve,An),Qn===null?en=Ht:Qn.sibling=Ht,Qn=Ht);return Fn&&Uo(Ze,An),en}for(Ht=S(Ht);An<Xe.length;An++)Bn=at(Ht,Ze,An,Xe[An],mt),Bn!==null&&(o&&Bn.alternate!==null&&Ht.delete(Bn.key===null?An:Bn.key),Ve=N(Bn,Ve,An),Qn===null?en=Bn:Qn.sibling=Bn,Qn=Bn);return o&&Ht.forEach(function(hh){return u(Ze,hh)}),Fn&&Uo(Ze,An),en}function sn(Ze,Ve,Xe,mt){if(Xe==null)throw Error(d(151));for(var en=null,Qn=null,Ht=Ve,An=Ve=0,Bn=null,ei=Xe.next();Ht!==null&&!ei.done;An++,ei=Xe.next()){Ht.index>An?(Bn=Ht,Ht=null):Bn=Ht.sibling;var hh=tt(Ze,Ht,ei.value,mt);if(hh===null){Ht===null&&(Ht=Bn);break}o&&Ht&&hh.alternate===null&&u(Ze,Ht),Ve=N(hh,Ve,An),Qn===null?en=hh:Qn.sibling=hh,Qn=hh,Ht=Bn}if(ei.done)return y(Ze,Ht),Fn&&Uo(Ze,An),en;if(Ht===null){for(;!ei.done;An++,ei=Xe.next())ei=_t(Ze,ei.value,mt),ei!==null&&(Ve=N(ei,Ve,An),Qn===null?en=ei:Qn.sibling=ei,Qn=ei);return Fn&&Uo(Ze,An),en}for(Ht=S(Ht);!ei.done;An++,ei=Xe.next())ei=at(Ht,Ze,An,ei.value,mt),ei!==null&&(o&&ei.alternate!==null&&Ht.delete(ei.key===null?An:ei.key),Ve=N(ei,Ve,An),Qn===null?en=ei:Qn.sibling=ei,Qn=ei);return o&&Ht.forEach(function(s){return u(Ze,s)}),Fn&&Uo(Ze,An),en}function bi(Ze,Ve,Xe,mt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===ae&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case H:e:{for(var en=Xe.key;Ve!==null;){if(Ve.key===en){if(en=Xe.type,en===ae){if(Ve.tag===7){y(Ze,Ve.sibling),mt=I(Ve,Xe.props.children),mt.return=Ze,Ze=mt;break e}}else if(Ve.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===rt&&Xc(en)===Ve.type){y(Ze,Ve.sibling),mt=I(Ve,Xe.props),Gu(mt,Xe),mt.return=Ze,Ze=mt;break e}y(Ze,Ve);break}else u(Ze,Ve);Ve=Ve.sibling}Xe.type===ae?(mt=$c(Xe.props.children,Ze.mode,mt,Xe.key),mt.return=Ze,Ze=mt):(mt=Hh(Xe.type,Xe.key,Xe.props,null,Ze.mode,mt),Gu(mt,Xe),mt.return=Ze,Ze=mt)}return W(Ze);case ne:e:{for(en=Xe.key;Ve!==null;){if(Ve.key===en)if(Ve.tag===4&&Ve.stateNode.containerInfo===Xe.containerInfo&&Ve.stateNode.implementation===Xe.implementation){y(Ze,Ve.sibling),mt=I(Ve,Xe.children||[]),mt.return=Ze,Ze=mt;break e}else{y(Ze,Ve);break}else u(Ze,Ve);Ve=Ve.sibling}mt=Fu(Xe,Ze.mode,mt),mt.return=Ze,Ze=mt}return W(Ze);case rt:return Xe=Xc(Xe),bi(Ze,Ve,Xe,mt)}if(Gt(Xe))return Zt(Ze,Ve,Xe,mt);if(Ct(Xe)){if(en=Ct(Xe),typeof en!="function")throw Error(d(150));return Xe=en.call(Xe),sn(Ze,Ve,Xe,mt)}if(typeof Xe.then=="function")return bi(Ze,Ve,nd(Xe),mt);if(Xe.$$typeof===Ee)return bi(Ze,Ve,gl(Ze,Xe),mt);Zu(Ze,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint"?(Xe=""+Xe,Ve!==null&&Ve.tag===6?(y(Ze,Ve.sibling),mt=I(Ve,Xe),mt.return=Ze,Ze=mt):(y(Ze,Ve),mt=zu(Xe,Ze.mode,mt),mt.return=Ze,Ze=mt),W(Ze)):y(Ze,Ve)}return function(Ze,Ve,Xe,mt){try{Qc=0;var en=bi(Ze,Ve,Xe,mt);return yl=null,en}catch(Ht){if(Ht===$o||Ht===td)throw Ht;var Qn=Va(29,Ht,null,Ze.mode);return Qn.lanes=mt,Qn.return=Ze,Qn}finally{}}}var _l=Rf(!0),Ig=Rf(!1),vl=!1;function js(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ti(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ic(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function wo(o,u,y){var S=o.updateQueue;if(S===null)return null;if(S=S.shared,(Xn&2)!==0){var I=S.pending;return I===null?u.next=u:(u.next=I.next,I.next=u),S.pending=u,u=gn(o),Af(o,null,y),u}return ul(o,S,u,y),gn(o)}function bl(o,u,y){if(u=u.updateQueue,u!==null&&(u=u.shared,(y&4194048)!==0)){var S=u.lanes;S&=o.pendingLanes,y|=S,u.lanes=y,Yn(o,y)}}function id(o,u){var y=o.updateQueue,S=o.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var I=null,N=null;if(y=y.firstBaseUpdate,y!==null){do{var W={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};N===null?I=N=W:N=N.next=W,y=y.next}while(y!==null);N===null?I=N=u:N=N.next=u}else I=N=u;y={baseState:S.baseState,firstBaseUpdate:I,lastBaseUpdate:N,shared:S.shared,callbacks:S.callbacks},o.updateQueue=y;return}o=y.lastBaseUpdate,o===null?y.firstBaseUpdate=u:o.next=u,y.lastBaseUpdate=u}var kf=!1;function Kc(){if(kf){var o=bo;if(o!==null)throw o}}function Jc(o,u,y,S){kf=!1;var I=o.updateQueue;vl=!1;var N=I.firstBaseUpdate,W=I.lastBaseUpdate,ue=I.shared.pending;if(ue!==null){I.shared.pending=null;var Le=ue,Ke=Le.next;Le.next=null,W===null?N=Ke:W.next=Ke,W=Le;var ht=o.alternate;ht!==null&&(ht=ht.updateQueue,ue=ht.lastBaseUpdate,ue!==W&&(ue===null?ht.firstBaseUpdate=Ke:ue.next=Ke,ht.lastBaseUpdate=Le))}if(N!==null){var _t=I.baseState;W=0,ht=Ke=Le=null,ue=N;do{var tt=ue.lane&-536870913,at=tt!==ue.lane;if(at?(Hn&tt)===tt:(S&tt)===tt){tt!==0&&tt===Ps&&(kf=!0),ht!==null&&(ht=ht.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var Zt=o,sn=ue;tt=u;var bi=y;switch(sn.tag){case 1:if(Zt=sn.payload,typeof Zt=="function"){_t=Zt.call(bi,_t,tt);break e}_t=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=sn.payload,tt=typeof Zt=="function"?Zt.call(bi,_t,tt):Zt,tt==null)break e;_t=z({},_t,tt);break e;case 2:vl=!0}}tt=ue.callback,tt!==null&&(o.flags|=64,at&&(o.flags|=8192),at=I.callbacks,at===null?I.callbacks=[tt]:at.push(tt))}else at={lane:tt,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},ht===null?(Ke=ht=at,Le=_t):ht=ht.next=at,W|=tt;if(ue=ue.next,ue===null){if(ue=I.shared.pending,ue===null)break;at=ue,ue=at.next,at.next=null,I.lastBaseUpdate=at,I.shared.pending=null}}while(!0);ht===null&&(Le=_t),I.baseState=Le,I.firstBaseUpdate=Ke,I.lastBaseUpdate=ht,N===null&&(I.shared.lanes=0),nh|=W,o.lanes=W,o.memoizedState=_t}}function em(o,u){if(typeof o!="function")throw Error(d(191,o));o.call(u)}function To(o,u){var y=o.callbacks;if(y!==null)for(o.callbacks=null,o=0;o<y.length;o++)em(y[o],u)}var So=Oe(null),jt=Oe(0);function Qt(o,u){o=dc,bt(jt,o),bt(So,u),dc=o|u.baseLanes}function eu(){bt(jt,dc),bt(So,So.current)}function Of(){dc=jt.current,et(So),et(jt)}var ta=Oe(null),Ti=null;function Cr(o){var u=o.alternate;bt(Bi,Bi.current&1),bt(ta,o),Ti===null&&(u===null||So.current!==null||u.memoizedState!==null)&&(Ti=o)}function Lf(o){bt(Bi,Bi.current),bt(ta,o),Ti===null&&(Ti=o)}function Rg(o){o.tag===22?(bt(Bi,Bi.current),bt(ta,o),Ti===null&&(Ti=o)):rc()}function rc(){bt(Bi,Bi.current),bt(ta,ta.current)}function no(o){et(ta),Ti===o&&(Ti=null),et(Bi)}var Bi=Oe(0);function Kn(o){for(var u=o;u!==null;){if(u.tag===13){var y=u.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||ep(y)||K0(y)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ri=0,yn=null,Jn=null,Gi=null,$u=!1,ac=!1,Da=!1,xl=0,wl=0,Tl=null,rd=0;function Zi(){throw Error(d(321))}function oc(o,u){if(u===null)return!1;for(var y=0;y<u.length&&y<o.length;y++)if(!Kr(o[y],u[y]))return!1;return!0}function Sl(o,u,y,S,I,N){return ri=N,yn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Ge.H=o===null||o.memoizedState===null?nm:Al,Da=!1,N=y(S,I),Da=!1,ac&&(N=ad(u,y,S,I)),Nf(o),N}function Nf(o){Ge.H=Hu;var u=Jn!==null&&Jn.next!==null;if(ri=0,Gi=Jn=yn=null,$u=!1,wl=0,Tl=null,u)throw Error(d(300));o===null||Dr||(o=o.dependencies,o!==null&&Kh(o)&&(Dr=!0))}function ad(o,u,y,S){yn=o;var I=0;do{if(ac&&(Tl=null),wl=0,ac=!1,25<=I)throw Error(d(301));if(I+=1,Gi=Jn=null,o.updateQueue!=null){var N=o.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Ge.H=kg,N=u(y,S)}while(ac);return N}function tu(){var o=Ge.H,u=o.useState()[0];return u=typeof u.then=="function"?l(u):u,o=o.useState()[0],(Jn!==null?Jn.memoizedState:null)!==o&&(yn.flags|=1024),u}function Yu(){var o=xl!==0;return xl=0,o}function od(o,u,y){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~y}function qu(o){if($u){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}$u=!1}ri=0,Gi=Jn=yn=null,ac=!1,wl=xl=0,Tl=null}function Gr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gi===null?yn.memoizedState=Gi=o:Gi=Gi.next=o,Gi}function w(){if(Jn===null){var o=yn.alternate;o=o!==null?o.memoizedState:null}else o=Jn.next;var u=Gi===null?yn.memoizedState:Gi.next;if(u!==null)Gi=u,Jn=o;else{if(o===null)throw yn.alternate===null?Error(d(467)):Error(d(310));Jn=o,o={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},Gi===null?yn.memoizedState=Gi=o:Gi=Gi.next=o}return Gi}function n(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function l(o){var u=wl;return wl+=1,Tl===null&&(Tl=[]),o=If(Tl,o,u),u=yn,(Gi===null?u.memoizedState:Gi.next)===null&&(u=u.alternate,Ge.H=u===null||u.memoizedState===null?nm:Al),o}function m(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return l(o);if(o.$$typeof===Ee)return Ar(o)}throw Error(d(438,String(o)))}function b(o){var u=null,y=yn.updateQueue;if(y!==null&&(u=y.memoCache),u==null){var S=yn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(u={data:S.data.map(function(I){return I.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),y===null&&(y=n(),yn.updateQueue=y),y.memoCache=u,y=u.data[u.index],y===void 0)for(y=u.data[u.index]=Array(o),S=0;S<o;S++)y[S]=nt;return u.index++,y}function T(o,u){return typeof u=="function"?u(o):u}function M(o){var u=w();return R(u,Jn,o)}function R(o,u,y){var S=o.queue;if(S===null)throw Error(d(311));S.lastRenderedReducer=y;var I=o.baseQueue,N=S.pending;if(N!==null){if(I!==null){var W=I.next;I.next=N.next,N.next=W}u.baseQueue=I=N,S.pending=null}if(N=o.baseState,I===null)o.memoizedState=N;else{u=I.next;var ue=W=null,Le=null,Ke=u,ht=!1;do{var _t=Ke.lane&-536870913;if(_t!==Ke.lane?(Hn&_t)===_t:(ri&_t)===_t){var tt=Ke.revertLane;if(tt===0)Le!==null&&(Le=Le.next={lane:0,revertLane:0,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),_t===Ps&&(ht=!0);else if((ri&tt)===tt){Ke=Ke.next,tt===Ps&&(ht=!0);continue}else _t={lane:0,revertLane:Ke.revertLane,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Le===null?(ue=Le=_t,W=N):Le=Le.next=_t,yn.lanes|=tt,nh|=tt;_t=Ke.action,Da&&y(N,_t),N=Ke.hasEagerState?Ke.eagerState:y(N,_t)}else tt={lane:_t,revertLane:Ke.revertLane,gesture:Ke.gesture,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Le===null?(ue=Le=tt,W=N):Le=Le.next=tt,yn.lanes|=_t,nh|=_t;Ke=Ke.next}while(Ke!==null&&Ke!==u);if(Le===null?W=N:Le.next=ue,!Kr(N,o.memoizedState)&&(Dr=!0,ht&&(y=bo,y!==null)))throw y;o.memoizedState=N,o.baseState=W,o.baseQueue=Le,S.lastRenderedState=N}return I===null&&(S.lanes=0),[o.memoizedState,S.dispatch]}function L(o){var u=w(),y=u.queue;if(y===null)throw Error(d(311));y.lastRenderedReducer=o;var S=y.dispatch,I=y.pending,N=u.memoizedState;if(I!==null){y.pending=null;var W=I=I.next;do N=o(N,W.action),W=W.next;while(W!==I);Kr(N,u.memoizedState)||(Dr=!0),u.memoizedState=N,u.baseQueue===null&&(u.baseState=N),y.lastRenderedState=N}return[N,S]}function F(o,u,y){var S=yn,I=w(),N=Fn;if(N){if(y===void 0)throw Error(d(407));y=y()}else y=u();var W=!Kr((Jn||I).memoizedState,y);if(W&&(I.memoizedState=y,Dr=!0),I=I.queue,an($.bind(null,S,I,o),[o]),I.getSnapshot!==u||W||Gi!==null&&Gi.memoizedState.tag&1){if(S.flags|=2048,xt(9,{destroy:void 0},Y.bind(null,S,I,y,u),null),Ei===null)throw Error(d(349));N||(ri&127)!==0||B(S,u,y)}return y}function B(o,u,y){o.flags|=16384,o={getSnapshot:u,value:y},u=yn.updateQueue,u===null?(u=n(),yn.updateQueue=u,u.stores=[o]):(y=u.stores,y===null?u.stores=[o]:y.push(o))}function Y(o,u,y,S){u.value=y,u.getSnapshot=S,J(u)&&oe(o)}function $(o,u,y){return y(function(){J(u)&&oe(o)})}function J(o){var u=o.getSnapshot;o=o.value;try{var y=u();return!Kr(o,y)}catch{return!0}}function oe(o){var u=Xl(o,2);u!==null&&so(u,o,2)}function de(o){var u=Gr();if(typeof o=="function"){var y=o;if(o=y(),Da){Ie(!0);try{y()}finally{Ie(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T,lastRenderedState:o},u}function pe(o,u,y,S){return o.baseState=y,R(o,Jn,typeof S=="function"?S:T)}function ye(o,u,y,S,I){if(ni(o))throw Error(d(485));if(o=u.action,o!==null){var N={payload:I,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){N.listeners.push(W)}};Ge.T!==null?y(!0):N.isTransition=!1,S(N),y=u.pending,y===null?(N.next=u.pending=N,be(u,N)):(N.next=y.next,u.pending=y.next=N)}}function be(o,u){var y=u.action,S=u.payload,I=o.state;if(u.isTransition){var N=Ge.T,W={};Ge.T=W;try{var ue=y(I,S),Le=Ge.S;Le!==null&&Le(W,ue),Me(o,u,ue)}catch(Ke){Ce(o,u,Ke)}finally{N!==null&&W.types!==null&&(N.types=W.types),Ge.T=N}}else try{N=y(I,S),Me(o,u,N)}catch(Ke){Ce(o,u,Ke)}}function Me(o,u,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){_e(o,u,S)},function(S){return Ce(o,u,S)}):_e(o,u,y)}function _e(o,u,y){u.status="fulfilled",u.value=y,Re(u),o.state=y,u=o.pending,u!==null&&(y=u.next,y===u?o.pending=null:(y=y.next,u.next=y,be(o,y)))}function Ce(o,u,y){var S=o.pending;if(o.pending=null,S!==null){S=S.next;do u.status="rejected",u.reason=y,Re(u),u=u.next;while(u!==S)}o.action=null}function Re(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function we(o,u){return u}function Be(o,u){if(Fn){var y=Ei.formState;if(y!==null){e:{var S=yn;if(Fn){if(wi){t:{for(var I=wi,N=Un;I.nodeType!==8;){if(!N){I=null;break t}if(I=ma(I.nextSibling),I===null){I=null;break t}}N=I.data,I=N==="F!"||N==="F"?I:null}if(I){wi=ma(I.nextSibling),S=I.data==="F!";break e}}hr(S)}S=!1}S&&(u=y[0])}}return y=Gr(),y.memoizedState=y.baseState=u,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:we,lastRenderedState:u},y.queue=S,y=$i.bind(null,yn,S),S.dispatch=y,S=de(!1),N=ar.bind(null,yn,!1,S.queue),S=Gr(),I={state:u,dispatch:null,action:o,pending:null},S.queue=I,y=ye.bind(null,yn,I,N,y),I.dispatch=y,S.memoizedState=o,[u,y,!1]}function We(o){var u=w();return $e(u,Jn,o)}function $e(o,u,y){if(u=R(o,u,we)[0],o=M(T)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var S=l(u)}catch(W){throw W===$o?td:W}else S=u;u=w();var I=u.queue,N=I.dispatch;return y!==u.memoizedState&&(yn.flags|=2048,xt(9,{destroy:void 0},Ye.bind(null,I,y),null)),[S,N,o]}function Ye(o,u){o.action=u}function qe(o){var u=w(),y=Jn;if(y!==null)return $e(u,y,o);w(),u=u.memoizedState,y=w();var S=y.queue.dispatch;return y.memoizedState=o,[u,S,!1]}function xt(o,u,y,S){return o={tag:o,create:y,deps:S,inst:u,next:null},u=yn.updateQueue,u===null&&(u=n(),yn.updateQueue=u),y=u.lastEffect,y===null?u.lastEffect=o.next=o:(S=y.next,y.next=o,o.next=S,u.lastEffect=o),o}function wt(){return w().memoizedState}function ut(o,u,y,S){var I=Gr();yn.flags|=o,I.memoizedState=xt(1|u,{destroy:void 0},y,S===void 0?null:S)}function Pt(o,u,y,S){var I=w();S=S===void 0?null:S;var N=I.memoizedState.inst;Jn!==null&&S!==null&&oc(S,Jn.memoizedState.deps)?I.memoizedState=xt(u,N,y,S):(yn.flags|=o,I.memoizedState=xt(1|u,N,y,S))}function cn(o,u){ut(8390656,8,o,u)}function an(o,u){Pt(2048,8,o,u)}function Si(o){yn.flags|=4;var u=yn.updateQueue;if(u===null)u=n(),yn.updateQueue=u,u.events=[o];else{var y=u.events;y===null?u.events=[o]:y.push(o)}}function gi(o){var u=w().memoizedState;return Si({ref:u,nextImpl:o}),function(){if((Xn&2)!==0)throw Error(d(440));return u.impl.apply(void 0,arguments)}}function Vi(o,u){return Pt(4,2,o,u)}function ci(o,u){return Pt(4,4,o,u)}function fr(o,u){if(typeof u=="function"){o=o();var y=u(o);return function(){typeof y=="function"?y():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Oi(o,u,y){y=y!=null?y.concat([o]):null,Pt(4,4,fr.bind(null,u,o),y)}function Qi(){}function Ki(o,u){var y=w();u=u===void 0?null:u;var S=y.memoizedState;return u!==null&&oc(u,S[1])?S[0]:(y.memoizedState=[o,u],o)}function rr(o,u){var y=w();u=u===void 0?null:u;var S=y.memoizedState;if(u!==null&&oc(u,S[1]))return S[0];if(S=o(),Da){Ie(!0);try{o()}finally{Ie(!1)}}return y.memoizedState=[S,u],S}function ha(o,u,y){return y===void 0||(ri&1073741824)!==0&&(Hn&261930)===0?o.memoizedState=u:(o.memoizedState=y,o=k0(),yn.lanes|=o,nh|=o,y)}function Bs(o,u,y,S){return Kr(y,u)?y:So.current!==null?(o=ha(o,y,S),Kr(o,u)||(Dr=!0),o):(ri&42)===0||(ri&1073741824)!==0&&(Hn&261930)===0?(Dr=!0,o.memoizedState=y):(o=k0(),yn.lanes|=o,nh|=o,u)}function Yo(o,u,y,S,I){var N=ct.p;ct.p=N!==0&&8>N?N:8;var W=Ge.T,ue={};Ge.T=ue,ar(o,!1,u,y);try{var Le=I(),Ke=Ge.S;if(Ke!==null&&Ke(ue,Le),Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var ht=Jh(Le,S);yi(o,u,ht,Xo(o))}else yi(o,u,S,Xo(o))}catch(_t){yi(o,u,{then:function(){},status:"rejected",reason:_t},Xo())}finally{ct.p=N,W!==null&&ue.types!==null&&(W.types=ue.types),Ge.T=W}}function sc(){}function Vs(o,u,y,S){if(o.tag!==5)throw Error(d(476));var I=lc(o).queue;Yo(o,I,u,St,y===null?sc:function(){return io(o),y(S)})}function lc(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:St,baseState:St,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:T,lastRenderedState:St},next:null};var y={};return u.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:T,lastRenderedState:y},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function io(o){var u=lc(o);u.next===null&&(u=o.alternate.memoizedState),yi(o,u.next.queue,{},Xo())}function qo(){return Ar(Md)}function $a(){return w().memoizedState}function Us(){return w().memoizedState}function nu(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var y=Xo();o=ic(y);var S=wo(u,o,y);S!==null&&(so(S,u,y),bl(S,u,y)),u={cache:Ga()},o.payload=u;return}u=u.return}}function iu(o,u,y){var S=Xo();y={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},ni(o)?El(u,y):(y=Wl(o,u,y,S),y!==null&&(so(y,o,S),tm(y,u,S)))}function $i(o,u,y){var S=Xo();yi(o,u,y,S)}function yi(o,u,y,S){var I={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(ni(o))El(u,I);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=u.lastRenderedReducer,N!==null))try{var W=u.lastRenderedState,ue=N(W,y);if(I.hasEagerState=!0,I.eagerState=ue,Kr(ue,W))return ul(o,u,I,0),Ei===null&&qh(),!1}catch{}finally{}if(y=Wl(o,u,I,S),y!==null)return so(y,o,S),tm(y,u,S),!0}return!1}function ar(o,u,y,S){if(S={lane:2,revertLane:xm(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},ni(o)){if(u)throw Error(d(479))}else u=Wl(o,y,S,2),u!==null&&so(u,o,2)}function ni(o){var u=o.alternate;return o===yn||u!==null&&u===yn}function El(o,u){ac=$u=!0;var y=o.pending;y===null?u.next=u:(u.next=y.next,y.next=u),o.pending=u}function tm(o,u,y){if((y&4194048)!==0){var S=u.lanes;S&=o.pendingLanes,y|=S,u.lanes=y,Yn(o,y)}}var Hu={readContext:Ar,use:m,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useLayoutEffect:Zi,useInsertionEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useSyncExternalStore:Zi,useId:Zi,useHostTransitionStatus:Zi,useFormState:Zi,useActionState:Zi,useOptimistic:Zi,useMemoCache:Zi,useCacheRefresh:Zi};Hu.useEffectEvent=Zi;var nm={readContext:Ar,use:m,useCallback:function(o,u){return Gr().memoizedState=[o,u===void 0?null:u],o},useContext:Ar,useEffect:cn,useImperativeHandle:function(o,u,y){y=y!=null?y.concat([o]):null,ut(4194308,4,fr.bind(null,u,o),y)},useLayoutEffect:function(o,u){return ut(4194308,4,o,u)},useInsertionEffect:function(o,u){ut(4,2,o,u)},useMemo:function(o,u){var y=Gr();u=u===void 0?null:u;var S=o();if(Da){Ie(!0);try{o()}finally{Ie(!1)}}return y.memoizedState=[S,u],S},useReducer:function(o,u,y){var S=Gr();if(y!==void 0){var I=y(u);if(Da){Ie(!0);try{y(u)}finally{Ie(!1)}}}else I=u;return S.memoizedState=S.baseState=I,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:I},S.queue=o,o=o.dispatch=iu.bind(null,yn,o),[S.memoizedState,o]},useRef:function(o){var u=Gr();return o={current:o},u.memoizedState=o},useState:function(o){o=de(o);var u=o.queue,y=$i.bind(null,yn,u);return u.dispatch=y,[o.memoizedState,y]},useDebugValue:Qi,useDeferredValue:function(o,u){var y=Gr();return ha(y,o,u)},useTransition:function(){var o=de(!1);return o=Yo.bind(null,yn,o.queue,!0,!1),Gr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,y){var S=yn,I=Gr();if(Fn){if(y===void 0)throw Error(d(407));y=y()}else{if(y=u(),Ei===null)throw Error(d(349));(Hn&127)!==0||B(S,u,y)}I.memoizedState=y;var N={value:y,getSnapshot:u};return I.queue=N,cn($.bind(null,S,N,o),[o]),S.flags|=2048,xt(9,{destroy:void 0},Y.bind(null,S,N,y,u),null),y},useId:function(){var o=Gr(),u=Ei.identifierPrefix;if(Fn){var y=Rs,S=Ua;y=(S&~(1<<32-K(S)-1)).toString(32)+y,u="_"+u+"R_"+y,y=xl++,0<y&&(u+="H"+y.toString(32)),u+="_"}else y=rd++,u="_"+u+"r_"+y.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:qo,useFormState:Be,useActionState:Be,useOptimistic:function(o){var u=Gr();u.memoizedState=u.baseState=o;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=y,u=ar.bind(null,yn,!0,y),y.dispatch=u,[o,u]},useMemoCache:b,useCacheRefresh:function(){return Gr().memoizedState=nu.bind(null,yn)},useEffectEvent:function(o){var u=Gr(),y={impl:o};return u.memoizedState=y,function(){if((Xn&2)!==0)throw Error(d(440));return y.impl.apply(void 0,arguments)}}},Al={readContext:Ar,use:m,useCallback:Ki,useContext:Ar,useEffect:an,useImperativeHandle:Oi,useInsertionEffect:Vi,useLayoutEffect:ci,useMemo:rr,useReducer:M,useRef:wt,useState:function(){return M(T)},useDebugValue:Qi,useDeferredValue:function(o,u){var y=w();return Bs(y,Jn.memoizedState,o,u)},useTransition:function(){var o=M(T)[0],u=w().memoizedState;return[typeof o=="boolean"?o:l(o),u]},useSyncExternalStore:F,useId:$a,useHostTransitionStatus:qo,useFormState:We,useActionState:We,useOptimistic:function(o,u){var y=w();return pe(y,Jn,o,u)},useMemoCache:b,useCacheRefresh:Us};Al.useEffectEvent=gi;var kg={readContext:Ar,use:m,useCallback:Ki,useContext:Ar,useEffect:an,useImperativeHandle:Oi,useInsertionEffect:Vi,useLayoutEffect:ci,useMemo:rr,useReducer:L,useRef:wt,useState:function(){return L(T)},useDebugValue:Qi,useDeferredValue:function(o,u){var y=w();return Jn===null?ha(y,o,u):Bs(y,Jn.memoizedState,o,u)},useTransition:function(){var o=L(T)[0],u=w().memoizedState;return[typeof o=="boolean"?o:l(o),u]},useSyncExternalStore:F,useId:$a,useHostTransitionStatus:qo,useFormState:qe,useActionState:qe,useOptimistic:function(o,u){var y=w();return Jn!==null?pe(y,Jn,o,u):(y.baseState=o,[o,y.queue.dispatch])},useMemoCache:b,useCacheRefresh:Us};kg.useEffectEvent=gi;function Gs(o,u,y,S){u=o.memoizedState,y=y(S,u),y=y==null?u:z({},u,y),o.memoizedState=y,o.lanes===0&&(o.updateQueue.baseState=y)}var Wu={enqueueSetState:function(o,u,y){o=o._reactInternals;var S=Xo(),I=ic(S);I.payload=u,y!=null&&(I.callback=y),u=wo(o,I,S),u!==null&&(so(u,o,S),bl(u,o,S))},enqueueReplaceState:function(o,u,y){o=o._reactInternals;var S=Xo(),I=ic(S);I.tag=1,I.payload=u,y!=null&&(I.callback=y),u=wo(o,I,S),u!==null&&(so(u,o,S),bl(u,o,S))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var y=Xo(),S=ic(y);S.tag=2,u!=null&&(S.callback=u),u=wo(o,S,y),u!==null&&(so(u,o,y),bl(u,o,y))}};function Pf(o,u,y,S,I,N,W){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(S,N,W):u.prototype&&u.prototype.isPureReactComponent?!Ba(y,S)||!Ba(I,N):!0}function Ml(o,u,y,S){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(y,S),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(y,S),u.state!==o&&Wu.enqueueReplaceState(u,u.state,null)}function Ia(o,u){var y=u;if("ref"in u){y={};for(var S in u)S!=="ref"&&(y[S]=u[S])}if(o=o.defaultProps){y===u&&(y=z({},y));for(var I in o)y[I]===void 0&&(y[I]=o[I])}return y}function zf(o){Gc(o)}function Ff(o){console.error(o)}function Og(o){Gc(o)}function im(o,u){try{var y=o.onUncaughtError;y(u.value,{componentStack:u.stack})}catch(S){setTimeout(function(){throw S})}}function rm(o,u,y){try{var S=o.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function Lg(o,u,y){return y=ic(y),y.tag=3,y.payload={element:null},y.callback=function(){im(o,u)},y}function zv(o){return o=ic(o),o.tag=3,o}function Ng(o,u,y,S){var I=y.type.getDerivedStateFromError;if(typeof I=="function"){var N=S.value;o.payload=function(){return I(N)},o.callback=function(){rm(u,y,S)}}var W=y.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(o.callback=function(){rm(u,y,S),typeof I!="function"&&(lu===null?lu=new Set([this]):lu.add(this));var ue=S.stack;this.componentDidCatch(S.value,{componentStack:ue!==null?ue:""})})}function a1(o,u,y,S,I){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(u=y.alternate,u!==null&&tc(u,y,I,!0),y=ta.current,y!==null){switch(y.tag){case 31:case 13:return Ti===null?Wg():y.alternate===null&&br===0&&(br=3),y.flags&=-257,y.flags|=65536,y.lanes=I,S===nc?y.flags|=16384:(u=y.updateQueue,u===null?y.updateQueue=new Set([S]):u.add(S),F0(o,S,I)),!1;case 22:return y.flags|=65536,S===nc?y.flags|=16384:(u=y.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=u):(y=u.retryQueue,y===null?u.retryQueue=new Set([S]):y.add(S)),F0(o,S,I)),!1}throw Error(d(435,y.tag))}return F0(o,S,I),Wg(),!1}if(Fn)return u=ta.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=I,S!==Go&&(o=Error(d(422),{cause:S}),pl(Ma(o,y)))):(S!==Go&&(u=Error(d(423),{cause:S}),pl(Ma(u,y))),o=o.current.alternate,o.flags|=65536,I&=-I,o.lanes|=I,S=Ma(S,y),I=Lg(o.stateNode,S,I),id(o,I),br!==4&&(br=2)),!1;var N=Error(d(520),{cause:S});if(N=Ma(N,y),md===null?md=[N]:md.push(N),br!==4&&(br=2),u===null)return!0;S=Ma(S,y),y=u;do{switch(y.tag){case 3:return y.flags|=65536,o=I&-I,y.lanes|=o,o=Lg(y.stateNode,S,o),id(y,o),!1;case 1:if(u=y.type,N=y.stateNode,(y.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(lu===null||!lu.has(N))))return y.flags|=65536,I&=-I,y.lanes|=I,I=zv(I),Ng(I,o,y,S),id(y,I),!1}y=y.return}while(y!==null);return!1}var am=Error(d(461)),Dr=!1;function da(o,u,y,S){u.child=o===null?Ig(u,null,y,S):_l(u,o.child,y,S)}function sd(o,u,y,S,I){y=y.render;var N=u.ref;if("ref"in S){var W={};for(var ue in S)ue!=="ref"&&(W[ue]=S[ue])}else W=S;return ml(u),S=Sl(o,u,y,W,N,I),ue=Yu(),o!==null&&!Dr?(od(o,u,I),Cl(o,u,I)):(Fn&&ue&&Bu(u),u.flags|=1,da(o,u,S,I),u.child)}function Fv(o,u,y,S,I){if(o===null){var N=y.type;return typeof N=="function"&&!Zc(N)&&N.defaultProps===void 0&&y.compare===null?(u.tag=15,u.type=N,ld(o,u,N,S,I)):(o=Hh(y.type,null,S,u,u.mode,I),o.ref=u.ref,o.return=u,u.child=o)}if(N=o.child,!_0(o,I)){var W=N.memoizedProps;if(y=y.compare,y=y!==null?y:Ba,y(W,S)&&o.ref===u.ref)return Cl(o,u,I)}return u.flags|=1,o=Vo(N,S),o.ref=u.ref,o.return=u,u.child=o}function ld(o,u,y,S,I){if(o!==null){var N=o.memoizedProps;if(Ba(N,S)&&o.ref===u.ref)if(Dr=!1,u.pendingProps=S=N,_0(o,I))(o.flags&131072)!==0&&(Dr=!0);else return u.lanes=o.lanes,Cl(o,u,I)}return lm(o,u,y,S,I)}function om(o,u,y,S){var I=S.children,N=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((u.flags&128)!==0){if(N=N!==null?N.baseLanes|y:y,o!==null){for(S=u.child=o.child,I=0;S!==null;)I=I|S.lanes|S.childLanes,S=S.sibling;S=I&~N}else S=0,u.child=null;return jv(o,u,N,y,S)}if((y&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Za(u,N!==null?N.cachePool:null),N!==null?Qt(u,N):eu(),Rg(u);else return S=u.lanes=536870912,jv(o,u,N!==null?N.baseLanes|y:y,y,S)}else N!==null?(Za(u,N.cachePool),Qt(u,N),rc(),u.memoizedState=null):(o!==null&&Za(u,null),eu(),rc());return da(o,u,I,y),u.child}function Xu(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function jv(o,u,y,S,I){var N=Wc();return N=N===null?null:{parent:dr._currentValue,pool:N},u.memoizedState={baseLanes:y,cachePool:N},o!==null&&Za(u,null),eu(),Rg(u),o!==null&&tc(o,u,S,!0),u.childLanes=I,null}function Pg(o,u){return u=um({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function Bv(o,u,y){return _l(u,o.child,null,y),o=Pg(u,u.pendingProps),o.flags|=2,no(u),u.memoizedState=null,o}function o1(o,u,y){var S=u.pendingProps,I=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Fn){if(S.mode==="hidden")return o=Pg(u,S),u.lanes=536870912,Xu(null,o);if(Lf(u),(o=wi)?(o=xr(o,Un),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:fl!==null?{id:Ua,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},y=Wh(o),y.return=u,u.child=y,vr=u,wi=null)):o=null,o===null)throw hr(u);return u.lanes=536870912,null}return Pg(u,S)}var N=o.memoizedState;if(N!==null){var W=N.dehydrated;if(Lf(u),I)if(u.flags&256)u.flags&=-257,u=Bv(o,u,y);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(d(558));else if(Dr||tc(o,u,y,!1),I=(y&o.childLanes)!==0,Dr||I){if(S=Ei,S!==null&&(W=hi(S,y),W!==0&&W!==N.retryLane))throw N.retryLane=W,Xl(o,W),so(S,o,W),am;Wg(),u=Bv(o,u,y)}else o=N.treeContext,wi=ma(W.nextSibling),vr=u,Fn=!0,ks=null,Un=!1,o!==null&&Xp(u,o),u=Pg(u,S),u.flags|=4096;return u}return o=Vo(o.child,{mode:S.mode,children:S.children}),o.ref=u.ref,u.child=o,o.return=u,o}function sm(o,u){var y=u.ref;if(y===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(d(284));(o===null||o.ref!==y)&&(u.flags|=4194816)}}function lm(o,u,y,S,I){return ml(u),y=Sl(o,u,y,S,void 0,I),S=Yu(),o!==null&&!Dr?(od(o,u,I),Cl(o,u,I)):(Fn&&S&&Bu(u),u.flags|=1,da(o,u,y,I),u.child)}function p0(o,u,y,S,I,N){return ml(u),u.updateQueue=null,y=ad(u,S,y,I),Nf(o),S=Yu(),o!==null&&!Dr?(od(o,u,N),Cl(o,u,N)):(Fn&&S&&Bu(u),u.flags|=1,da(o,u,y,N),u.child)}function m0(o,u,y,S,I){if(ml(u),u.stateNode===null){var N=hl,W=y.contextType;typeof W=="object"&&W!==null&&(N=Ar(W)),N=new y(S,N),u.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Wu,u.stateNode=N,N._reactInternals=u,N=u.stateNode,N.props=S,N.state=u.memoizedState,N.refs={},js(u),W=y.contextType,N.context=typeof W=="object"&&W!==null?Ar(W):hl,N.state=u.memoizedState,W=y.getDerivedStateFromProps,typeof W=="function"&&(Gs(u,y,W,S),N.state=u.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(W=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),W!==N.state&&Wu.enqueueReplaceState(N,N.state,null),Jc(u,S,N,I),Kc(),N.state=u.memoizedState),typeof N.componentDidMount=="function"&&(u.flags|=4194308),S=!0}else if(o===null){N=u.stateNode;var ue=u.memoizedProps,Le=Ia(y,ue);N.props=Le;var Ke=N.context,ht=y.contextType;W=hl,typeof ht=="object"&&ht!==null&&(W=Ar(ht));var _t=y.getDerivedStateFromProps;ht=typeof _t=="function"||typeof N.getSnapshotBeforeUpdate=="function",ue=u.pendingProps!==ue,ht||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(ue||Ke!==W)&&Ml(u,N,S,W),vl=!1;var tt=u.memoizedState;N.state=tt,Jc(u,S,N,I),Kc(),Ke=u.memoizedState,ue||tt!==Ke||vl?(typeof _t=="function"&&(Gs(u,y,_t,S),Ke=u.memoizedState),(Le=vl||Pf(u,y,Le,S,tt,Ke,W))?(ht||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(u.flags|=4194308)):(typeof N.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=S,u.memoizedState=Ke),N.props=S,N.state=Ke,N.context=W,S=Le):(typeof N.componentDidMount=="function"&&(u.flags|=4194308),S=!1)}else{N=u.stateNode,ti(o,u),W=u.memoizedProps,ht=Ia(y,W),N.props=ht,_t=u.pendingProps,tt=N.context,Ke=y.contextType,Le=hl,typeof Ke=="object"&&Ke!==null&&(Le=Ar(Ke)),ue=y.getDerivedStateFromProps,(Ke=typeof ue=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(W!==_t||tt!==Le)&&Ml(u,N,S,Le),vl=!1,tt=u.memoizedState,N.state=tt,Jc(u,S,N,I),Kc();var at=u.memoizedState;W!==_t||tt!==at||vl||o!==null&&o.dependencies!==null&&Kh(o.dependencies)?(typeof ue=="function"&&(Gs(u,y,ue,S),at=u.memoizedState),(ht=vl||Pf(u,y,ht,S,tt,at,Le)||o!==null&&o.dependencies!==null&&Kh(o.dependencies))?(Ke||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(S,at,Le),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(S,at,Le)),typeof N.componentDidUpdate=="function"&&(u.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof N.componentDidUpdate!="function"||W===o.memoizedProps&&tt===o.memoizedState||(u.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===o.memoizedProps&&tt===o.memoizedState||(u.flags|=1024),u.memoizedProps=S,u.memoizedState=at),N.props=S,N.state=at,N.context=Le,S=ht):(typeof N.componentDidUpdate!="function"||W===o.memoizedProps&&tt===o.memoizedState||(u.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===o.memoizedProps&&tt===o.memoizedState||(u.flags|=1024),S=!1)}return N=S,sm(o,u),S=(u.flags&128)!==0,N||S?(N=u.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:N.render(),u.flags|=1,o!==null&&S?(u.child=_l(u,o.child,null,I),u.child=_l(u,null,y,I)):da(o,u,y,I),u.memoizedState=N.state,o=u.child):o=Cl(o,u,I),o}function Vv(o,u,y,S){return vo(),u.flags|=256,da(o,u,y,S),u.child}var g0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zg(o){return{baseLanes:o,cachePool:Ot()}}function Fg(o,u,y){return o=o!==null?o.childLanes&~y:0,u&&(o|=Wo),o}function Uv(o,u,y){var S=u.pendingProps,I=!1,N=(u.flags&128)!==0,W;if((W=N)||(W=o!==null&&o.memoizedState===null?!1:(Bi.current&2)!==0),W&&(I=!0,u.flags&=-129),W=(u.flags&32)!==0,u.flags&=-33,o===null){if(Fn){if(I?Cr(u):rc(),(o=wi)?(o=xr(o,Un),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:fl!==null?{id:Ua,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},y=Wh(o),y.return=u,u.child=y,vr=u,wi=null)):o=null,o===null)throw hr(u);return K0(o)?u.lanes=32:u.lanes=536870912,null}var ue=S.children;return S=S.fallback,I?(rc(),I=u.mode,ue=um({mode:"hidden",children:ue},I),S=$c(S,I,y,null),ue.return=u,S.return=u,ue.sibling=S,u.child=ue,S=u.child,S.memoizedState=zg(y),S.childLanes=Fg(o,W,y),u.memoizedState=g0,Xu(null,S)):(Cr(u),cm(u,ue))}var Le=o.memoizedState;if(Le!==null&&(ue=Le.dehydrated,ue!==null)){if(N)u.flags&256?(Cr(u),u.flags&=-257,u=hm(o,u,y)):u.memoizedState!==null?(rc(),u.child=o.child,u.flags|=128,u=null):(rc(),ue=S.fallback,I=u.mode,S=um({mode:"visible",children:S.children},I),ue=$c(ue,I,y,null),ue.flags|=2,S.return=u,ue.return=u,S.sibling=ue,u.child=S,_l(u,o.child,null,y),S=u.child,S.memoizedState=zg(y),S.childLanes=Fg(o,W,y),u.memoizedState=g0,u=Xu(null,S));else if(Cr(u),K0(ue)){if(W=ue.nextSibling&&ue.nextSibling.dataset,W)var Ke=W.dgst;W=Ke,S=Error(d(419)),S.stack="",S.digest=W,pl({value:S,source:null,stack:null}),u=hm(o,u,y)}else if(Dr||tc(o,u,y,!1),W=(y&o.childLanes)!==0,Dr||W){if(W=Ei,W!==null&&(S=hi(W,y),S!==0&&S!==Le.retryLane))throw Le.retryLane=S,Xl(o,S),so(W,o,S),am;ep(ue)||Wg(),u=hm(o,u,y)}else ep(ue)?(u.flags|=192,u.child=o.child,u=null):(o=Le.treeContext,wi=ma(ue.nextSibling),vr=u,Fn=!0,ks=null,Un=!1,o!==null&&Xp(u,o),u=cm(u,S.children),u.flags|=4096);return u}return I?(rc(),ue=S.fallback,I=u.mode,Le=o.child,Ke=Le.sibling,S=Vo(Le,{mode:"hidden",children:S.children}),S.subtreeFlags=Le.subtreeFlags&65011712,Ke!==null?ue=Vo(Ke,ue):(ue=$c(ue,I,y,null),ue.flags|=2),ue.return=u,S.return=u,S.sibling=ue,u.child=S,Xu(null,S),S=u.child,ue=o.child.memoizedState,ue===null?ue=zg(y):(I=ue.cachePool,I!==null?(Le=dr._currentValue,I=I.parent!==Le?{parent:Le,pool:Le}:I):I=Ot(),ue={baseLanes:ue.baseLanes|y,cachePool:I}),S.memoizedState=ue,S.childLanes=Fg(o,W,y),u.memoizedState=g0,Xu(o.child,S)):(Cr(u),y=o.child,o=y.sibling,y=Vo(y,{mode:"visible",children:S.children}),y.return=u,y.sibling=null,o!==null&&(W=u.deletions,W===null?(u.deletions=[o],u.flags|=16):W.push(o)),u.child=y,u.memoizedState=null,y)}function cm(o,u){return u=um({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function um(o,u){return o=Va(22,o,null,u),o.lanes=0,o}function hm(o,u,y){return _l(u,o.child,null,y),o=cm(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function jf(o,u,y){o.lanes|=u;var S=o.alternate;S!==null&&(S.lanes|=u),Cf(o.return,u,y)}function Ra(o,u,y,S,I,N){var W=o.memoizedState;W===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:I,treeForkCount:N}:(W.isBackwards=u,W.rendering=null,W.renderingStartTime=0,W.last=S,W.tail=y,W.tailMode=I,W.treeForkCount=N)}function y0(o,u,y){var S=u.pendingProps,I=S.revealOrder,N=S.tail;S=S.children;var W=Bi.current,ue=(W&2)!==0;if(ue?(W=W&1|2,u.flags|=128):W&=1,bt(Bi,W),da(o,u,S,y),S=Fn?Kl:0,!ue&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&jf(o,y,u);else if(o.tag===19)jf(o,y,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(I){case"forwards":for(y=u.child,I=null;y!==null;)o=y.alternate,o!==null&&Kn(o)===null&&(I=y),y=y.sibling;y=I,y===null?(I=u.child,u.child=null):(I=y.sibling,y.sibling=null),Ra(u,!1,I,y,N,S);break;case"backwards":case"unstable_legacy-backwards":for(y=null,I=u.child,u.child=null;I!==null;){if(o=I.alternate,o!==null&&Kn(o)===null){u.child=I;break}o=I.sibling,I.sibling=y,y=I,I=o}Ra(u,!0,y,null,N,S);break;case"together":Ra(u,!1,null,null,void 0,S);break;default:u.memoizedState=null}return u.child}function Cl(o,u,y){if(o!==null&&(u.dependencies=o.dependencies),nh|=u.lanes,(y&u.childLanes)===0)if(o!==null){if(tc(o,u,y,!1),(y&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(d(153));if(u.child!==null){for(o=u.child,y=Vo(o,o.pendingProps),u.child=y,y.return=u;o.sibling!==null;)o=o.sibling,y=y.sibling=Vo(o,o.pendingProps),y.return=u;y.sibling=null}return u.child}function _0(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Kh(o)))}function Gv(o,u,y){switch(u.tag){case 3:rn(u,u.stateNode.containerInfo),Os(u,dr,o.memoizedState.cache),vo();break;case 27:case 5:qi(u);break;case 4:rn(u,u.stateNode.containerInfo);break;case 10:Os(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Lf(u),null;break;case 13:var S=u.memoizedState;if(S!==null)return S.dehydrated!==null?(Cr(u),u.flags|=128,null):(y&u.child.childLanes)!==0?Uv(o,u,y):(Cr(u),o=Cl(o,u,y),o!==null?o.sibling:null);Cr(u);break;case 19:var I=(o.flags&128)!==0;if(S=(y&u.childLanes)!==0,S||(tc(o,u,y,!1),S=(y&u.childLanes)!==0),I){if(S)return y0(o,u,y);u.flags|=128}if(I=u.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),bt(Bi,Bi.current),S)break;return null;case 22:return u.lanes=0,om(o,u,y,u.pendingProps);case 24:Os(u,dr,o.memoizedState.cache)}return Cl(o,u,y)}function Zv(o,u,y){if(o!==null)if(o.memoizedProps!==u.pendingProps)Dr=!0;else{if(!_0(o,y)&&(u.flags&128)===0)return Dr=!1,Gv(o,u,y);Dr=(o.flags&131072)!==0}else Dr=!1,Fn&&(u.flags&1048576)!==0&&ju(u,Kl,u.index);switch(u.lanes=0,u.tag){case 16:e:{var S=u.pendingProps;if(o=Xc(u.elementType),u.type=o,typeof o=="function")Zc(o)?(S=Ia(o,S),u.tag=1,u=m0(null,u,o,S,y)):(u.tag=0,u=lm(null,u,o,S,y));else{if(o!=null){var I=o.$$typeof;if(I===Fe){u.tag=11,u=sd(null,u,o,S,y);break e}else if(I===ze){u.tag=14,u=Fv(null,u,o,S,y);break e}}throw u=Ut(o)||o,Error(d(306,u,""))}}return u;case 0:return lm(o,u,u.type,u.pendingProps,y);case 1:return S=u.type,I=Ia(S,u.pendingProps),m0(o,u,S,I,y);case 3:e:{if(rn(u,u.stateNode.containerInfo),o===null)throw Error(d(387));S=u.pendingProps;var N=u.memoizedState;I=N.element,ti(o,u),Jc(u,S,null,y);var W=u.memoizedState;if(S=W.cache,Os(u,dr,S),S!==N.cache&&Ls(u,[dr],y,!0),Kc(),S=W.element,N.isDehydrated)if(N={element:S,isDehydrated:!1,cache:W.cache},u.updateQueue.baseState=N,u.memoizedState=N,u.flags&256){u=Vv(o,u,S,y);break e}else if(S!==I){I=Ma(Error(d(424)),u),pl(I),u=Vv(o,u,S,y);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(wi=ma(o.firstChild),vr=u,Fn=!0,ks=null,Un=!0,y=Ig(u,null,S,y),u.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(vo(),S===I){u=Cl(o,u,y);break e}da(o,u,S,y)}u=u.child}return u;case 26:return sm(o,u),o===null?(y=n_(u.type,null,u.pendingProps,null))?u.memoizedState=y:Fn||(y=u.type,o=u.pendingProps,S=Jf(zt.current).createElement(y),S[dt]=u,S[kt]=o,pa(S,y,o),Wi(S),u.stateNode=S):u.memoizedState=n_(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return qi(u),o===null&&Fn&&(S=u.stateNode=e_(u.type,u.pendingProps,zt.current),vr=u,Un=!0,I=wi,kr(u.type)?(oh=I,wi=ma(S.firstChild)):wi=I),da(o,u,u.pendingProps.children,y),sm(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Fn&&((I=S=wi)&&(S=Jo(S,u.type,u.pendingProps,Un),S!==null?(u.stateNode=S,vr=u,wi=ma(S.firstChild),Un=!1,I=!0):I=!1),I||hr(u)),qi(u),I=u.type,N=u.pendingProps,W=o!==null?o.memoizedProps:null,S=N.children,Cm(I,N)?S=null:W!==null&&Cm(I,W)&&(u.flags|=32),u.memoizedState!==null&&(I=Sl(o,u,tu,null,null,y),Md._currentValue=I),sm(o,u),da(o,u,S,y),u.child;case 6:return o===null&&Fn&&((o=y=wi)&&(y=Q0(y,u.pendingProps,Un),y!==null?(u.stateNode=y,vr=u,wi=null,o=!0):o=!1),o||hr(u)),null;case 13:return Uv(o,u,y);case 4:return rn(u,u.stateNode.containerInfo),S=u.pendingProps,o===null?u.child=_l(u,null,S,y):da(o,u,S,y),u.child;case 11:return sd(o,u,u.type,u.pendingProps,y);case 7:return da(o,u,u.pendingProps,y),u.child;case 8:return da(o,u,u.pendingProps.children,y),u.child;case 12:return da(o,u,u.pendingProps.children,y),u.child;case 10:return S=u.pendingProps,Os(u,u.type,S.value),da(o,u,S.children,y),u.child;case 9:return I=u.type._context,S=u.pendingProps.children,ml(u),I=Ar(I),S=S(I),u.flags|=1,da(o,u,S,y),u.child;case 14:return Fv(o,u,u.type,u.pendingProps,y);case 15:return ld(o,u,u.type,u.pendingProps,y);case 19:return y0(o,u,y);case 31:return o1(o,u,y);case 22:return om(o,u,y,u.pendingProps);case 24:return ml(u),S=Ar(dr),o===null?(I=Wc(),I===null&&(I=Ei,N=Ga(),I.pooledCache=N,N.refCount++,N!==null&&(I.pooledCacheLanes|=y),I=N),u.memoizedState={parent:S,cache:I},js(u),Os(u,dr,I)):((o.lanes&y)!==0&&(ti(o,u),Jc(u,null,null,y),Kc()),I=o.memoizedState,N=u.memoizedState,I.parent!==S?(I={parent:S,cache:S},u.memoizedState=I,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=I),Os(u,dr,S)):(S=N.cache,Os(u,dr,S),S!==I.cache&&Ls(u,[dr],y,!0))),da(o,u,u.pendingProps.children,y),u.child;case 29:throw u.pendingProps}throw Error(d(156,u.tag))}function ru(o){o.flags|=4}function jg(o,u,y,S,I){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(I&335544128)===I)if(o.stateNode.complete)o.flags|=8192;else if(_d())o.flags|=8192;else throw xo=nc,ed}else o.flags&=-16777217}function $v(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!o_(u))if(_d())o.flags|=8192;else throw xo=nc,ed}function Bf(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?Lt():536870912,o.lanes|=u,pd|=u)}function Vf(o,u){if(!Fn)switch(o.tailMode){case"hidden":u=o.tail;for(var y=null;u!==null;)u.alternate!==null&&(y=u),u=u.sibling;y===null?o.tail=null:y.sibling=null;break;case"collapsed":y=o.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:S.sibling=null}}function Yi(o){var u=o.alternate!==null&&o.alternate.child===o.child,y=0,S=0;if(u)for(var I=o.child;I!==null;)y|=I.lanes|I.childLanes,S|=I.subtreeFlags&65011712,S|=I.flags&65011712,I.return=o,I=I.sibling;else for(I=o.child;I!==null;)y|=I.lanes|I.childLanes,S|=I.subtreeFlags,S|=I.flags,I.return=o,I=I.sibling;return o.subtreeFlags|=S,o.childLanes=y,u}function s1(o,u,y){var S=u.pendingProps;switch(Mf(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(u),null;case 1:return Yi(u),null;case 3:return y=u.stateNode,S=null,o!==null&&(S=o.memoizedState.cache),u.memoizedState.cache!==S&&(u.flags|=2048),to(dr),Tn(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(Hc(u)?ru(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Xh())),Yi(u),null;case 26:var I=u.type,N=u.memoizedState;return o===null?(ru(u),N!==null?(Yi(u),$v(u,N)):(Yi(u),jg(u,I,null,S,y))):N?N!==o.memoizedState?(ru(u),Yi(u),$v(u,N)):(Yi(u),u.flags&=-16777217):(o=o.memoizedProps,o!==S&&ru(u),Yi(u),jg(u,I,o,S,y)),null;case 27:if(tr(u),y=zt.current,I=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==S&&ru(u);else{if(!S){if(u.stateNode===null)throw Error(d(166));return Yi(u),null}o=Tt.current,Hc(u)?Vu(u):(o=e_(I,S,y),u.stateNode=o,ru(u))}return Yi(u),null;case 5:if(tr(u),I=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==S&&ru(u);else{if(!S){if(u.stateNode===null)throw Error(d(166));return Yi(u),null}if(N=Tt.current,Hc(u))Vu(u);else{var W=Jf(zt.current);switch(N){case 1:N=W.createElementNS("http://www.w3.org/2000/svg",I);break;case 2:N=W.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;default:switch(I){case"svg":N=W.createElementNS("http://www.w3.org/2000/svg",I);break;case"math":N=W.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;case"script":N=W.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof S.is=="string"?W.createElement("select",{is:S.is}):W.createElement("select"),S.multiple?N.multiple=!0:S.size&&(N.size=S.size);break;default:N=typeof S.is=="string"?W.createElement(I,{is:S.is}):W.createElement(I)}}N[dt]=u,N[kt]=S;e:for(W=u.child;W!==null;){if(W.tag===5||W.tag===6)N.appendChild(W.stateNode);else if(W.tag!==4&&W.tag!==27&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===u)break e;for(;W.sibling===null;){if(W.return===null||W.return===u)break e;W=W.return}W.sibling.return=W.return,W=W.sibling}u.stateNode=N;e:switch(pa(N,I,S),I){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&ru(u)}}return Yi(u),jg(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,y),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==S&&ru(u);else{if(typeof S!="string"&&u.stateNode===null)throw Error(d(166));if(o=zt.current,Hc(u)){if(o=u.stateNode,y=u.memoizedProps,S=null,I=vr,I!==null)switch(I.tag){case 27:case 5:S=I.memoizedProps}o[dt]=u,o=!!(o.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||wd(o.nodeValue,y)),o||hr(u,!0)}else o=Jf(o).createTextNode(S),o[dt]=u,u.stateNode=o}return Yi(u),null;case 31:if(y=u.memoizedState,o===null||o.memoizedState!==null){if(S=Hc(u),y!==null){if(o===null){if(!S)throw Error(d(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(d(557));o[dt]=u}else vo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Yi(u),o=!1}else y=Xh(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),o=!0;if(!o)return u.flags&256?(no(u),u):(no(u),null);if((u.flags&128)!==0)throw Error(d(558))}return Yi(u),null;case 13:if(S=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I=Hc(u),S!==null&&S.dehydrated!==null){if(o===null){if(!I)throw Error(d(318));if(I=u.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(d(317));I[dt]=u}else vo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Yi(u),I=!1}else I=Xh(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=I),I=!0;if(!I)return u.flags&256?(no(u),u):(no(u),null)}return no(u),(u.flags&128)!==0?(u.lanes=y,u):(y=S!==null,o=o!==null&&o.memoizedState!==null,y&&(S=u.child,I=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(I=S.alternate.memoizedState.cachePool.pool),N=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(N=S.memoizedState.cachePool.pool),N!==I&&(S.flags|=2048)),y!==o&&y&&(u.child.flags|=8192),Bf(u,u.updateQueue),Yi(u),null);case 4:return Tn(),o===null&&ny(u.stateNode.containerInfo),Yi(u),null;case 10:return to(u.type),Yi(u),null;case 19:if(et(Bi),S=u.memoizedState,S===null)return Yi(u),null;if(I=(u.flags&128)!==0,N=S.rendering,N===null)if(I)Vf(S,!1);else{if(br!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(N=Kn(o),N!==null){for(u.flags|=128,Vf(S,!1),o=N.updateQueue,u.updateQueue=o,Bf(u,o),u.subtreeFlags=0,o=y,y=u.child;y!==null;)Ag(y,o),y=y.sibling;return bt(Bi,Bi.current&1|2),Fn&&Uo(u,S.treeForkCount),u.child}o=o.sibling}S.tail!==null&&ki()>gd&&(u.flags|=128,I=!0,Vf(S,!1),u.lanes=4194304)}else{if(!I)if(o=Kn(N),o!==null){if(u.flags|=128,I=!0,o=o.updateQueue,u.updateQueue=o,Bf(u,o),Vf(S,!0),S.tail===null&&S.tailMode==="hidden"&&!N.alternate&&!Fn)return Yi(u),null}else 2*ki()-S.renderingStartTime>gd&&y!==536870912&&(u.flags|=128,I=!0,Vf(S,!1),u.lanes=4194304);S.isBackwards?(N.sibling=u.child,u.child=N):(o=S.last,o!==null?o.sibling=N:u.child=N,S.last=N)}return S.tail!==null?(o=S.tail,S.rendering=o,S.tail=o.sibling,S.renderingStartTime=ki(),o.sibling=null,y=Bi.current,bt(Bi,I?y&1|2:y&1),Fn&&Uo(u,S.treeForkCount),o):(Yi(u),null);case 22:case 23:return no(u),Of(),S=u.memoizedState!==null,o!==null?o.memoizedState!==null!==S&&(u.flags|=8192):S&&(u.flags|=8192),S?(y&536870912)!==0&&(u.flags&128)===0&&(Yi(u),u.subtreeFlags&6&&(u.flags|=8192)):Yi(u),y=u.updateQueue,y!==null&&Bf(u,y.retryQueue),y=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),S=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(S=u.memoizedState.cachePool.pool),S!==y&&(u.flags|=2048),o!==null&&et(zs),null;case 24:return y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),to(dr),Yi(u),null;case 25:return null;case 30:return null}throw Error(d(156,u.tag))}function l1(o,u){switch(Mf(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return to(dr),Tn(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return tr(u),null;case 31:if(u.memoizedState!==null){if(no(u),u.alternate===null)throw Error(d(340));vo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(no(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(d(340));vo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return et(Bi),null;case 4:return Tn(),null;case 10:return to(u.type),null;case 22:case 23:return no(u),Of(),o!==null&&et(zs),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return to(dr),null;case 25:return null;default:return null}}function Yv(o,u){switch(Mf(u),u.tag){case 3:to(dr),Tn();break;case 26:case 27:case 5:tr(u);break;case 4:Tn();break;case 31:u.memoizedState!==null&&no(u);break;case 13:no(u);break;case 19:et(Bi);break;case 10:to(u.type);break;case 22:case 23:no(u),Of(),o!==null&&et(zs);break;case 24:to(dr)}}function Qu(o,u){try{var y=u.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var I=S.next;y=I;do{if((y.tag&o)===o){S=void 0;var N=y.create,W=y.inst;S=N(),W.destroy=S}y=y.next}while(y!==I)}}catch(ue){vi(u,u.return,ue)}}function cc(o,u,y){try{var S=u.updateQueue,I=S!==null?S.lastEffect:null;if(I!==null){var N=I.next;S=N;do{if((S.tag&o)===o){var W=S.inst,ue=W.destroy;if(ue!==void 0){W.destroy=void 0,I=u;var Le=y,Ke=ue;try{Ke()}catch(ht){vi(I,Le,ht)}}}S=S.next}while(S!==N)}}catch(ht){vi(u,u.return,ht)}}function v0(o){var u=o.updateQueue;if(u!==null){var y=o.stateNode;try{To(u,y)}catch(S){vi(o,o.return,S)}}}function Ku(o,u,y){y.props=Ia(o.type,o.memoizedProps),y.state=o.memoizedState;try{y.componentWillUnmount()}catch(S){vi(o,u,S)}}function au(o,u){try{var y=o.ref;if(y!==null){switch(o.tag){case 26:case 27:case 5:var S=o.stateNode;break;case 30:S=o.stateNode;break;default:S=o.stateNode}typeof y=="function"?o.refCleanup=y(S):y.current=S}}catch(I){vi(o,u,I)}}function uc(o,u){var y=o.ref,S=o.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(I){vi(o,u,I)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(I){vi(o,u,I)}else y.current=null}function qv(o){var u=o.type,y=o.memoizedProps,S=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(I){vi(o,o.return,I)}}function b0(o,u,y){try{var S=o.stateNode;fb(S,o.type,y,u),S[kt]=u}catch(I){vi(o,o.return,I)}}function Hv(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&kr(o.type)||o.tag===4}function x0(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Hv(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&kr(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function w0(o,u,y){var S=o.tag;if(S===5||S===6)o=o.stateNode,u?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(o,u):(u=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,u.appendChild(o),y=y._reactRootContainer,y!=null||u.onclick!==null||(u.onclick=mn));else if(S!==4&&(S===27&&kr(o.type)&&(y=o.stateNode,u=null),o=o.child,o!==null))for(w0(o,u,y),o=o.sibling;o!==null;)w0(o,u,y),o=o.sibling}function Bg(o,u,y){var S=o.tag;if(S===5||S===6)o=o.stateNode,u?y.insertBefore(o,u):y.appendChild(o);else if(S!==4&&(S===27&&kr(o.type)&&(y=o.stateNode),o=o.child,o!==null))for(Bg(o,u,y),o=o.sibling;o!==null;)Bg(o,u,y),o=o.sibling}function Vg(o){var u=o.stateNode,y=o.memoizedProps;try{for(var S=o.type,I=u.attributes;I.length;)u.removeAttributeNode(I[0]);pa(u,S,y),u[dt]=o,u[kt]=y}catch(N){vi(o,o.return,N)}}var ou=!1,Ir=!1,cd=!1,Wv=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function Uf(o,u){if(o=o.containerInfo,Kf=cy,o=Tf(o),Uh(o)){if("selectionStart"in o)var y={start:o.selectionStart,end:o.selectionEnd};else e:{y=(y=o.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var I=S.anchorOffset,N=S.focusNode;S=S.focusOffset;try{y.nodeType,N.nodeType}catch{y=null;break e}var W=0,ue=-1,Le=-1,Ke=0,ht=0,_t=o,tt=null;t:for(;;){for(var at;_t!==y||I!==0&&_t.nodeType!==3||(ue=W+I),_t!==N||S!==0&&_t.nodeType!==3||(Le=W+S),_t.nodeType===3&&(W+=_t.nodeValue.length),(at=_t.firstChild)!==null;)tt=_t,_t=at;for(;;){if(_t===o)break t;if(tt===y&&++Ke===I&&(ue=W),tt===N&&++ht===S&&(Le=W),(at=_t.nextSibling)!==null)break;_t=tt,tt=_t.parentNode}_t=at}y=ue===-1||Le===-1?null:{start:ue,end:Le}}else y=null}y=y||{start:0,end:0}}else y=null;for(Mm={focusedElem:o,selectionRange:y},cy=!1,Nn=u;Nn!==null;)if(u=Nn,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Nn=o;else for(;Nn!==null;){switch(u=Nn,N=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(y=0;y<o.length;y++)I=o[y],I.ref.impl=I.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&N!==null){o=void 0,y=u,I=N.memoizedProps,N=N.memoizedState,S=y.stateNode;try{var Zt=Ia(y.type,I);o=S.getSnapshotBeforeUpdate(Zt,N),S.__reactInternalSnapshotBeforeUpdate=o}catch(sn){vi(y,y.return,sn)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,y=o.nodeType,y===9)ay(o);else if(y===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":ay(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(d(163))}if(o=u.sibling,o!==null){o.return=u.return,Nn=o;break}Nn=u.return}}function T0(o,u,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:su(o,y),S&4&&Qu(5,y);break;case 1:if(su(o,y),S&4)if(o=y.stateNode,u===null)try{o.componentDidMount()}catch(W){vi(y,y.return,W)}else{var I=Ia(y.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(I,u,o.__reactInternalSnapshotBeforeUpdate)}catch(W){vi(y,y.return,W)}}S&64&&v0(y),S&512&&au(y,y.return);break;case 3:if(su(o,y),S&64&&(o=y.updateQueue,o!==null)){if(u=null,y.child!==null)switch(y.child.tag){case 27:case 5:u=y.child.stateNode;break;case 1:u=y.child.stateNode}try{To(o,u)}catch(W){vi(y,y.return,W)}}break;case 27:u===null&&S&4&&Vg(y);case 26:case 5:su(o,y),u===null&&S&4&&qv(y),S&512&&au(y,y.return);break;case 12:su(o,y);break;case 31:su(o,y),S&4&&Gf(o,y);break;case 13:su(o,y),S&4&&Ug(o,y),S&64&&(o=y.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(y=p1.bind(null,y),pb(o,y))));break;case 22:if(S=y.memoizedState!==null||ou,!S){u=u!==null&&u.memoizedState!==null||Ir,I=ou;var N=Ir;ou=S,(Ir=u)&&!N?Ho(o,y,(y.subtreeFlags&8772)!==0):su(o,y),ou=I,Ir=N}break;case 30:break;default:su(o,y)}}function dm(o){var u=o.alternate;u!==null&&(o.alternate=null,dm(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Ul(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ui=null,fa=!1;function hc(o,u,y){for(y=y.child;y!==null;)S0(o,u,y),y=y.sibling}function S0(o,u,y){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(wa,y)}catch{}switch(y.tag){case 26:Ir||uc(y,u),hc(o,u,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:Ir||uc(y,u);var S=Ui,I=fa;kr(y.type)&&(Ui=y.stateNode,fa=!1),hc(o,u,y),tp(y.stateNode),Ui=S,fa=I;break;case 5:Ir||uc(y,u);case 6:if(S=Ui,I=fa,Ui=null,hc(o,u,y),Ui=S,fa=I,Ui!==null)if(fa)try{(Ui.nodeType===9?Ui.body:Ui.nodeName==="HTML"?Ui.ownerDocument.body:Ui).removeChild(y.stateNode)}catch(N){vi(y,u,N)}else try{Ui.removeChild(y.stateNode)}catch(N){vi(y,u,N)}break;case 18:Ui!==null&&(fa?(o=Ui,Or(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,y.stateNode),lp(o)):Or(Ui,y.stateNode));break;case 4:S=Ui,I=fa,Ui=y.stateNode.containerInfo,fa=!0,hc(o,u,y),Ui=S,fa=I;break;case 0:case 11:case 14:case 15:cc(2,y,u),Ir||cc(4,y,u),hc(o,u,y);break;case 1:Ir||(uc(y,u),S=y.stateNode,typeof S.componentWillUnmount=="function"&&Ku(y,u,S)),hc(o,u,y);break;case 21:hc(o,u,y);break;case 22:Ir=(S=Ir)||y.memoizedState!==null,hc(o,u,y),Ir=S;break;default:hc(o,u,y)}}function Gf(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{lp(o)}catch(y){vi(u,u.return,y)}}}function Ug(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{lp(o)}catch(y){vi(u,u.return,y)}}function Zf(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new Wv),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new Wv),u;default:throw Error(d(435,o.tag))}}function ud(o,u){var y=Zf(o);u.forEach(function(S){if(!y.has(S)){y.add(S);var I=m1.bind(null,o,S);S.then(I,I)}})}function na(o,u){var y=u.deletions;if(y!==null)for(var S=0;S<y.length;S++){var I=y[S],N=o,W=u,ue=W;e:for(;ue!==null;){switch(ue.tag){case 27:if(kr(ue.type)){Ui=ue.stateNode,fa=!1;break e}break;case 5:Ui=ue.stateNode,fa=!1;break e;case 3:case 4:Ui=ue.stateNode.containerInfo,fa=!0;break e}ue=ue.return}if(Ui===null)throw Error(d(160));S0(N,W,I),Ui=null,fa=!1,N=I.alternate,N!==null&&(N.return=null),I.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Xv(u,o),u=u.sibling}var ro=null;function Xv(o,u){var y=o.alternate,S=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:na(u,o),ao(o),S&4&&(cc(3,o,o.return),Qu(3,o),cc(5,o,o.return));break;case 1:na(u,o),ao(o),S&512&&(Ir||y===null||uc(y,y.return)),S&64&&ou&&(o=o.updateQueue,o!==null&&(S=o.callbacks,S!==null&&(y=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var I=ro;if(na(u,o),ao(o),S&512&&(Ir||y===null||uc(y,y.return)),S&4){var N=y!==null?y.memoizedState:null;if(S=o.memoizedState,y===null)if(S===null)if(o.stateNode===null){e:{S=o.type,y=o.memoizedProps,I=I.ownerDocument||I;t:switch(S){case"title":N=I.getElementsByTagName("title")[0],(!N||N[Ka]||N[dt]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=I.createElement(S),I.head.insertBefore(N,I.querySelector("head > title"))),pa(N,S,y),N[dt]=o,Wi(N),S=N;break e;case"link":var W=Rm("link","href",I).get(S+(y.href||""));if(W){for(var ue=0;ue<W.length;ue++)if(N=W[ue],N.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&N.getAttribute("rel")===(y.rel==null?null:y.rel)&&N.getAttribute("title")===(y.title==null?null:y.title)&&N.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){W.splice(ue,1);break t}}N=I.createElement(S),pa(N,S,y),I.head.appendChild(N);break;case"meta":if(W=Rm("meta","content",I).get(S+(y.content||""))){for(ue=0;ue<W.length;ue++)if(N=W[ue],N.getAttribute("content")===(y.content==null?null:""+y.content)&&N.getAttribute("name")===(y.name==null?null:y.name)&&N.getAttribute("property")===(y.property==null?null:y.property)&&N.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&N.getAttribute("charset")===(y.charSet==null?null:y.charSet)){W.splice(ue,1);break t}}N=I.createElement(S),pa(N,S,y),I.head.appendChild(N);break;default:throw Error(d(468,S))}N[dt]=o,Wi(N),S=N}o.stateNode=S}else _b(I,o.type,o.stateNode);else o.stateNode=r_(I,S,o.memoizedProps);else N!==S?(N===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):N.count--,S===null?_b(I,o.type,o.stateNode):r_(I,S,o.memoizedProps)):S===null&&o.stateNode!==null&&b0(o,o.memoizedProps,y.memoizedProps)}break;case 27:na(u,o),ao(o),S&512&&(Ir||y===null||uc(y,y.return)),y!==null&&S&4&&b0(o,o.memoizedProps,y.memoizedProps);break;case 5:if(na(u,o),ao(o),S&512&&(Ir||y===null||uc(y,y.return)),o.flags&32){I=o.stateNode;try{Oc(I,"")}catch(Zt){vi(o,o.return,Zt)}}S&4&&o.stateNode!=null&&(I=o.memoizedProps,b0(o,I,y!==null?y.memoizedProps:I)),S&1024&&(cd=!0);break;case 6:if(na(u,o),ao(o),S&4){if(o.stateNode===null)throw Error(d(162));S=o.memoizedProps,y=o.stateNode;try{y.nodeValue=S}catch(Zt){vi(o,o.return,Zt)}}break;case 3:if(Ad=null,I=ro,ro=Il(u.containerInfo),na(u,o),ro=I,ao(o),S&4&&y!==null&&y.memoizedState.isDehydrated)try{lp(u.containerInfo)}catch(Zt){vi(o,o.return,Zt)}cd&&(cd=!1,Ju(o));break;case 4:S=ro,ro=Il(o.stateNode.containerInfo),na(u,o),ao(o),ro=S;break;case 12:na(u,o),ao(o);break;case 31:na(u,o),ao(o),S&4&&(S=o.updateQueue,S!==null&&(o.updateQueue=null,ud(o,S)));break;case 13:na(u,o),ao(o),o.child.flags&8192&&o.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(ym=ki()),S&4&&(S=o.updateQueue,S!==null&&(o.updateQueue=null,ud(o,S)));break;case 22:I=o.memoizedState!==null;var Le=y!==null&&y.memoizedState!==null,Ke=ou,ht=Ir;if(ou=Ke||I,Ir=ht||Le,na(u,o),Ir=ht,ou=Ke,ao(o),S&8192)e:for(u=o.stateNode,u._visibility=I?u._visibility&-2:u._visibility|1,I&&(y===null||Le||ou||Ir||eh(o)),y=null,u=o;;){if(u.tag===5||u.tag===26){if(y===null){Le=y=u;try{if(N=Le.stateNode,I)W=N.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none";else{ue=Le.stateNode;var _t=Le.memoizedProps.style,tt=_t!=null&&_t.hasOwnProperty("display")?_t.display:null;ue.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Zt){vi(Le,Le.return,Zt)}}}else if(u.tag===6){if(y===null){Le=u;try{Le.stateNode.nodeValue=I?"":Le.memoizedProps}catch(Zt){vi(Le,Le.return,Zt)}}}else if(u.tag===18){if(y===null){Le=u;try{var at=Le.stateNode;I?Lr(at,!0):Lr(Le.stateNode,!1)}catch(Zt){vi(Le,Le.return,Zt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;y===u&&(y=null),u=u.return}y===u&&(y=null),u.sibling.return=u.return,u=u.sibling}S&4&&(S=o.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,ud(o,y))));break;case 19:na(u,o),ao(o),S&4&&(S=o.updateQueue,S!==null&&(o.updateQueue=null,ud(o,S)));break;case 30:break;case 21:break;default:na(u,o),ao(o)}}function ao(o){var u=o.flags;if(u&2){try{for(var y,S=o.return;S!==null;){if(Hv(S)){y=S;break}S=S.return}if(y==null)throw Error(d(160));switch(y.tag){case 27:var I=y.stateNode,N=x0(o);Bg(o,N,I);break;case 5:var W=y.stateNode;y.flags&32&&(Oc(W,""),y.flags&=-33);var ue=x0(o);Bg(o,ue,W);break;case 3:case 4:var Le=y.stateNode.containerInfo,Ke=x0(o);w0(o,Ke,Le);break;default:throw Error(d(161))}}catch(ht){vi(o,o.return,ht)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Ju(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;Ju(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function su(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)T0(o,u.alternate,u),u=u.sibling}function eh(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:cc(4,u,u.return),eh(u);break;case 1:uc(u,u.return);var y=u.stateNode;typeof y.componentWillUnmount=="function"&&Ku(u,u.return,y),eh(u);break;case 27:tp(u.stateNode);case 26:case 5:uc(u,u.return),eh(u);break;case 22:u.memoizedState===null&&eh(u);break;case 30:eh(u);break;default:eh(u)}o=o.sibling}}function Ho(o,u,y){for(y=y&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var S=u.alternate,I=o,N=u,W=N.flags;switch(N.tag){case 0:case 11:case 15:Ho(I,N,y),Qu(4,N);break;case 1:if(Ho(I,N,y),S=N,I=S.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(Ke){vi(S,S.return,Ke)}if(S=N,I=S.updateQueue,I!==null){var ue=S.stateNode;try{var Le=I.shared.hiddenCallbacks;if(Le!==null)for(I.shared.hiddenCallbacks=null,I=0;I<Le.length;I++)em(Le[I],ue)}catch(Ke){vi(S,S.return,Ke)}}y&&W&64&&v0(N),au(N,N.return);break;case 27:Vg(N);case 26:case 5:Ho(I,N,y),y&&S===null&&W&4&&qv(N),au(N,N.return);break;case 12:Ho(I,N,y);break;case 31:Ho(I,N,y),y&&W&4&&Gf(I,N);break;case 13:Ho(I,N,y),y&&W&4&&Ug(I,N);break;case 22:N.memoizedState===null&&Ho(I,N,y),au(N,N.return);break;case 30:break;default:Ho(I,N,y)}u=u.sibling}}function fm(o,u){var y=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==y&&(o!=null&&o.refCount++,y!=null&&Mr(y))}function Gg(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Mr(o))}function Zs(o,u,y,S){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Qv(o,u,y,S),u=u.sibling}function Qv(o,u,y,S){var I=u.flags;switch(u.tag){case 0:case 11:case 15:Zs(o,u,y,S),I&2048&&Qu(9,u);break;case 1:Zs(o,u,y,S);break;case 3:Zs(o,u,y,S),I&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Mr(o)));break;case 12:if(I&2048){Zs(o,u,y,S),o=u.stateNode;try{var N=u.memoizedProps,W=N.id,ue=N.onPostCommit;typeof ue=="function"&&ue(W,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Le){vi(u,u.return,Le)}}else Zs(o,u,y,S);break;case 31:Zs(o,u,y,S);break;case 13:Zs(o,u,y,S);break;case 23:break;case 22:N=u.stateNode,W=u.alternate,u.memoizedState!==null?N._visibility&2?Zs(o,u,y,S):pm(o,u):N._visibility&2?Zs(o,u,y,S):(N._visibility|=2,$f(o,u,y,S,(u.subtreeFlags&10256)!==0||!1)),I&2048&&fm(W,u);break;case 24:Zs(o,u,y,S),I&2048&&Gg(u.alternate,u);break;default:Zs(o,u,y,S)}}function $f(o,u,y,S,I){for(I=I&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var N=o,W=u,ue=y,Le=S,Ke=W.flags;switch(W.tag){case 0:case 11:case 15:$f(N,W,ue,Le,I),Qu(8,W);break;case 23:break;case 22:var ht=W.stateNode;W.memoizedState!==null?ht._visibility&2?$f(N,W,ue,Le,I):pm(N,W):(ht._visibility|=2,$f(N,W,ue,Le,I)),I&&Ke&2048&&fm(W.alternate,W);break;case 24:$f(N,W,ue,Le,I),I&&Ke&2048&&Gg(W.alternate,W);break;default:$f(N,W,ue,Le,I)}u=u.sibling}}function pm(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var y=o,S=u,I=S.flags;switch(S.tag){case 22:pm(y,S),I&2048&&fm(S.alternate,S);break;case 24:pm(y,S),I&2048&&Gg(S.alternate,S);break;default:pm(y,S)}u=u.sibling}}var mm=8192;function Yf(o,u,y){if(o.subtreeFlags&mm)for(o=o.child;o!==null;)hd(o,u,y),o=o.sibling}function hd(o,u,y){switch(o.tag){case 26:Yf(o,u,y),o.flags&mm&&o.memoizedState!==null&&w1(y,ro,o.memoizedState,o.memoizedProps);break;case 5:Yf(o,u,y);break;case 3:case 4:var S=ro;ro=Il(o.stateNode.containerInfo),Yf(o,u,y),ro=S;break;case 22:o.memoizedState===null&&(S=o.alternate,S!==null&&S.memoizedState!==null?(S=mm,mm=16777216,Yf(o,u,y),mm=S):Yf(o,u,y));break;default:Yf(o,u,y)}}function Kv(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function gm(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var y=0;y<u.length;y++){var S=u[y];Nn=S,A0(S,o)}Kv(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)E0(o),o=o.sibling}function E0(o){switch(o.tag){case 0:case 11:case 15:gm(o),o.flags&2048&&cc(9,o,o.return);break;case 3:gm(o);break;case 12:gm(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Zg(o)):gm(o);break;default:gm(o)}}function Zg(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var y=0;y<u.length;y++){var S=u[y];Nn=S,A0(S,o)}Kv(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:cc(8,u,u.return),Zg(u);break;case 22:y=u.stateNode,y._visibility&2&&(y._visibility&=-3,Zg(u));break;default:Zg(u)}o=o.sibling}}function A0(o,u){for(;Nn!==null;){var y=Nn;switch(y.tag){case 0:case 11:case 15:cc(8,y,u);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Mr(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,Nn=S;else e:for(y=o;Nn!==null;){S=Nn;var I=S.sibling,N=S.return;if(dm(S),S===y){Nn=null;break e}if(I!==null){I.return=N,Nn=I;break e}Nn=N}}}var c1={getCacheForType:function(o){var u=Ar(dr),y=u.data.get(o);return y===void 0&&(y=o(),u.data.set(o,y)),y},cacheSignal:function(){return Ar(dr).controller.signal}},M0=typeof WeakMap=="function"?WeakMap:Map,Xn=0,Ei=null,Gn=null,Hn=0,_i=0,Eo=null,th=!1,qf=!1,dd=!1,dc=0,br=0,nh=0,fd=0,C0=0,Wo=0,pd=0,md=null,oo=null,$g=!1,ym=0,Jv=0,gd=1/0,Yg=null,lu=null,ia=0,ih=null,Hf=null,fc=0,D0=0,I0=null,Rr=null,cu=0,R0=null;function Xo(){return(Xn&2)!==0&&Hn!==0?Hn&-Hn:Ge.T!==null?xm():fi()}function k0(){if(Wo===0)if((Hn&536870912)===0||Fn){var o=Ue;Ue<<=1,(Ue&3932160)===0&&(Ue=262144),Wo=o}else Wo=536870912;return o=ta.current,o!==null&&(o.flags|=32),Wo}function so(o,u,y){(o===Ei&&(_i===2||_i===9)||o.cancelPendingCommit!==null)&&(yd(o,0),Qo(o,Hn,Wo,!1)),on(o,y),((Xn&2)===0||o!==Ei)&&(o===Ei&&((Xn&2)===0&&(fd|=y),br===4&&Qo(o,Hn,Wo,!1)),Ko(o))}function eb(o,u,y){if((Xn&6)!==0)throw Error(d(327));var S=!y&&(u&127)===0&&(u&o.expiredLanes)===0||Je(o,u),I=S?h1(o,u):N0(o,u,!0),N=S;do{if(I===0){qf&&!S&&Qo(o,u,0,!1);break}else{if(y=o.current.alternate,N&&!tb(y)){I=N0(o,u,!1),N=!1;continue}if(I===2){if(N=u,o.errorRecoveryDisabledLanes&N)var W=0;else W=o.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){u=W;e:{var ue=o;I=md;var Le=ue.current.memoizedState.isDehydrated;if(Le&&(yd(ue,W).flags|=256),W=N0(ue,W,!1),W!==2){if(dd&&!Le){ue.errorRecoveryDisabledLanes|=N,fd|=N,I=4;break e}N=oo,oo=I,N!==null&&(oo===null?oo=N:oo.push.apply(oo,N))}I=W}if(N=!1,I!==2)continue}}if(I===1){yd(o,0),Qo(o,u,0,!0);break}e:{switch(S=o,N=I,N){case 0:case 1:throw Error(d(345));case 4:if((u&4194048)!==u)break;case 6:Qo(S,u,Wo,!th);break e;case 2:oo=null;break;case 3:case 5:break;default:throw Error(d(329))}if((u&62914560)===u&&(I=ym+300-ki(),10<I)){if(Qo(S,u,Wo,!th),Qe(S,0,!0)!==0)break e;fc=u,S.timeoutHandle=ra(O0.bind(null,S,y,oo,Yg,$g,u,Wo,fd,pd,th,N,"Throttled",-0,0),I);break e}O0(S,y,oo,Yg,$g,u,Wo,fd,pd,th,N,null,-0,0)}}break}while(!0);Ko(o)}function O0(o,u,y,S,I,N,W,ue,Le,Ke,ht,_t,tt,at){if(o.timeoutHandle=-1,_t=u.subtreeFlags,_t&8192||(_t&16785408)===16785408){_t={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mn},hd(u,N,_t);var Zt=(N&62914560)===N?ym-ki():(N&4194048)===N?Jv-ki():0;if(Zt=vb(_t,Zt),Zt!==null){fc=N,o.cancelPendingCommit=Zt(ob.bind(null,o,u,N,y,S,I,W,ue,Le,ht,_t,null,tt,at)),Qo(o,N,W,!Ke);return}}ob(o,u,N,y,S,I,W,ue,Le)}function tb(o){for(var u=o;;){var y=u.tag;if((y===0||y===11||y===15)&&u.flags&16384&&(y=u.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var I=y[S],N=I.getSnapshot;I=I.value;try{if(!Kr(N(),I))return!1}catch{return!1}}if(y=u.child,u.subtreeFlags&16384&&y!==null)y.return=u,u=y;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Qo(o,u,y,S){u&=~C0,u&=~fd,o.suspendedLanes|=u,o.pingedLanes&=~u,S&&(o.warmLanes|=u),S=o.expirationTimes;for(var I=u;0<I;){var N=31-K(I),W=1<<N;S[N]=-1,I&=~W}y!==0&&Sn(o,y,u)}function Wf(){return(Xn&6)===0?(bd(0),!1):!0}function qg(){if(Gn!==null){if(_i===0)var o=Gn.return;else o=Gn,Zo=ec=null,qu(o),yl=null,Qc=0,o=Gn;for(;o!==null;)Yv(o.alternate,o),o=o.return;Gn=null}}function yd(o,u){var y=o.timeoutHandle;y!==-1&&(o.timeoutHandle=-1,In(y)),y=o.cancelPendingCommit,y!==null&&(o.cancelPendingCommit=null,y()),fc=0,qg(),Ei=o,Gn=y=Vo(o.current,null),Hn=u,_i=0,Eo=null,th=!1,qf=Je(o,u),dd=!1,pd=Wo=C0=fd=nh=br=0,oo=md=null,$g=!1,(u&8)!==0&&(u|=u&32);var S=o.entangledLanes;if(S!==0)for(o=o.entanglements,S&=u;0<S;){var I=31-K(S),N=1<<I;u|=o[I],S&=~N}return dc=u,qh(),y}function Hg(o,u){yn=null,Ge.H=Hu,u===$o||u===td?(u=Jp(),_i=3):u===ed?(u=Jp(),_i=4):_i=u===am?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Eo=u,Gn===null&&(br=1,im(o,Ma(u,o.current)))}function _d(){var o=ta.current;return o===null?!0:(Hn&4194048)===Hn?Ti===null:(Hn&62914560)===Hn||(Hn&536870912)!==0?o===Ti:!1}function L0(){var o=Ge.H;return Ge.H=Hu,o===null?Hu:o}function nb(){var o=Ge.A;return Ge.A=c1,o}function Wg(){br=4,th||(Hn&4194048)!==Hn&&ta.current!==null||(qf=!0),(nh&134217727)===0&&(fd&134217727)===0||Ei===null||Qo(Ei,Hn,Wo,!1)}function N0(o,u,y){var S=Xn;Xn|=2;var I=L0(),N=nb();(Ei!==o||Hn!==u)&&(Yg=null,yd(o,u)),u=!1;var W=br;e:do try{if(_i!==0&&Gn!==null){var ue=Gn,Le=Eo;switch(_i){case 8:qg(),W=6;break e;case 3:case 2:case 9:case 6:ta.current===null&&(u=!0);var Ke=_i;if(_i=0,Eo=null,Xf(o,ue,Le,Ke),y&&qf){W=0;break e}break;default:Ke=_i,_i=0,Eo=null,Xf(o,ue,Le,Ke)}}u1(),W=br;break}catch(ht){Hg(o,ht)}while(!0);return u&&o.shellSuspendCounter++,Zo=ec=null,Xn=S,Ge.H=I,Ge.A=N,Gn===null&&(Ei=null,Hn=0,qh()),W}function u1(){for(;Gn!==null;)ib(Gn)}function h1(o,u){var y=Xn;Xn|=2;var S=L0(),I=nb();Ei!==o||Hn!==u?(Yg=null,gd=ki()+500,yd(o,u)):qf=Je(o,u);e:do try{if(_i!==0&&Gn!==null){u=Gn;var N=Eo;t:switch(_i){case 1:_i=0,Eo=null,Xf(o,u,N,1);break;case 2:case 9:if(Fs(N)){_i=0,Eo=null,rb(u);break}u=function(){_i!==2&&_i!==9||Ei!==o||(_i=7),Ko(o)},N.then(u,u);break e;case 3:_i=7;break e;case 4:_i=5;break e;case 7:Fs(N)?(_i=0,Eo=null,rb(u)):(_i=0,Eo=null,Xf(o,u,N,7));break;case 5:var W=null;switch(Gn.tag){case 26:W=Gn.memoizedState;case 5:case 27:var ue=Gn;if(W?o_(W):ue.stateNode.complete){_i=0,Eo=null;var Le=ue.sibling;if(Le!==null)Gn=Le;else{var Ke=ue.return;Ke!==null?(Gn=Ke,Xg(Ke)):Gn=null}break t}}_i=0,Eo=null,Xf(o,u,N,5);break;case 6:_i=0,Eo=null,Xf(o,u,N,6);break;case 8:qg(),br=6;break e;default:throw Error(d(462))}}d1();break}catch(ht){Hg(o,ht)}while(!0);return Zo=ec=null,Ge.H=S,Ge.A=I,Xn=y,Gn!==null?0:(Ei=null,Hn=0,qh(),br)}function d1(){for(;Gn!==null&&!xa();)ib(Gn)}function ib(o){var u=Zv(o.alternate,o,dc);o.memoizedProps=o.pendingProps,u===null?Xg(o):Gn=u}function rb(o){var u=o,y=u.alternate;switch(u.tag){case 15:case 0:u=p0(y,u,u.pendingProps,u.type,void 0,Hn);break;case 11:u=p0(y,u,u.pendingProps,u.type.render,u.ref,Hn);break;case 5:qu(u);default:Yv(y,u),u=Gn=Ag(u,dc),u=Zv(y,u,dc)}o.memoizedProps=o.pendingProps,u===null?Xg(o):Gn=u}function Xf(o,u,y,S){Zo=ec=null,qu(u),yl=null,Qc=0;var I=u.return;try{if(a1(o,I,u,y,Hn)){br=1,im(o,Ma(y,o.current)),Gn=null;return}}catch(N){if(I!==null)throw Gn=I,N;br=1,im(o,Ma(y,o.current)),Gn=null;return}u.flags&32768?(Fn||S===1?o=!0:qf||(Hn&536870912)!==0?o=!1:(th=o=!0,(S===2||S===9||S===3||S===6)&&(S=ta.current,S!==null&&S.tag===13&&(S.flags|=16384))),ab(u,o)):Xg(u)}function Xg(o){var u=o;do{if((u.flags&32768)!==0){ab(u,th);return}o=u.return;var y=s1(u.alternate,u,dc);if(y!==null){Gn=y;return}if(u=u.sibling,u!==null){Gn=u;return}Gn=u=o}while(u!==null);br===0&&(br=5)}function ab(o,u){do{var y=l1(o.alternate,o);if(y!==null){y.flags&=32767,Gn=y;return}if(y=o.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!u&&(o=o.sibling,o!==null)){Gn=o;return}Gn=o=y}while(o!==null);br=6,Gn=null}function ob(o,u,y,S,I,N,W,ue,Le){o.cancelPendingCommit=null;do vd();while(ia!==0);if((Xn&6)!==0)throw Error(d(327));if(u!==null){if(u===o.current)throw Error(d(177));if(N=u.lanes|u.childLanes,N|=Pu,Hi(o,y,N,W,ue,Le),o===Ei&&(Gn=Ei=null,Hn=0),Hf=u,ih=o,fc=y,D0=N,I0=I,Rr=S,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,cb(la,function(){return Kg(),null})):(o.callbackNode=null,o.callbackPriority=0),S=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||S){S=Ge.T,Ge.T=null,I=ct.p,ct.p=2,W=Xn,Xn|=4;try{Uf(o,u,y)}finally{Xn=W,ct.p=I,Ge.T=S}}ia=1,P0(),Qg(),z0()}}function P0(){if(ia===1){ia=0;var o=ih,u=Hf,y=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||y){y=Ge.T,Ge.T=null;var S=ct.p;ct.p=2;var I=Xn;Xn|=4;try{Xv(u,o);var N=Mm,W=Tf(o.containerInfo),ue=N.focusedElem,Le=N.selectionRange;if(W!==ue&&ue&&ue.ownerDocument&&wf(ue.ownerDocument.documentElement,ue)){if(Le!==null&&Uh(ue)){var Ke=Le.start,ht=Le.end;if(ht===void 0&&(ht=Ke),"selectionStart"in ue)ue.selectionStart=Ke,ue.selectionEnd=Math.min(ht,ue.value.length);else{var _t=ue.ownerDocument||document,tt=_t&&_t.defaultView||window;if(tt.getSelection){var at=tt.getSelection(),Zt=ue.textContent.length,sn=Math.min(Le.start,Zt),bi=Le.end===void 0?sn:Math.min(Le.end,Zt);!at.extend&&sn>bi&&(W=bi,bi=sn,sn=W);var Ze=xf(ue,sn),Ve=xf(ue,bi);if(Ze&&Ve&&(at.rangeCount!==1||at.anchorNode!==Ze.node||at.anchorOffset!==Ze.offset||at.focusNode!==Ve.node||at.focusOffset!==Ve.offset)){var Xe=_t.createRange();Xe.setStart(Ze.node,Ze.offset),at.removeAllRanges(),sn>bi?(at.addRange(Xe),at.extend(Ve.node,Ve.offset)):(Xe.setEnd(Ve.node,Ve.offset),at.addRange(Xe))}}}}for(_t=[],at=ue;at=at.parentNode;)at.nodeType===1&&_t.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof ue.focus=="function"&&ue.focus(),ue=0;ue<_t.length;ue++){var mt=_t[ue];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}cy=!!Kf,Mm=Kf=null}finally{Xn=I,ct.p=S,Ge.T=y}}o.current=u,ia=2}}function Qg(){if(ia===2){ia=0;var o=ih,u=Hf,y=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||y){y=Ge.T,Ge.T=null;var S=ct.p;ct.p=2;var I=Xn;Xn|=4;try{T0(o,u.alternate,u)}finally{Xn=I,ct.p=S,Ge.T=y}}ia=3}}function z0(){if(ia===4||ia===3){ia=0,Qa();var o=ih,u=Hf,y=fc,S=Rr;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?ia=5:(ia=0,Hf=ih=null,uu(o,o.pendingLanes));var I=o.pendingLanes;if(I===0&&(lu=null),di(y),u=u.stateNode,zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(wa,u,void 0,(u.current.flags&128)===128)}catch{}if(S!==null){u=Ge.T,I=ct.p,ct.p=2,Ge.T=null;try{for(var N=o.onRecoverableError,W=0;W<S.length;W++){var ue=S[W];N(ue.value,{componentStack:ue.stack})}}finally{Ge.T=u,ct.p=I}}(fc&3)!==0&&vd(),Ko(o),I=o.pendingLanes,(y&261930)!==0&&(I&42)!==0?o===R0?cu++:(cu=0,R0=o):cu=0,bd(0)}}function uu(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Mr(u)))}function vd(){return P0(),Qg(),z0(),Kg()}function Kg(){if(ia!==5)return!1;var o=ih,u=D0;D0=0;var y=di(fc),S=Ge.T,I=ct.p;try{ct.p=32>y?32:y,Ge.T=null,y=I0,I0=null;var N=ih,W=fc;if(ia=0,Hf=ih=null,fc=0,(Xn&6)!==0)throw Error(d(331));var ue=Xn;if(Xn|=4,E0(N.current),Qv(N,N.current,W,y),Xn=ue,bd(0,!1),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(wa,N)}catch{}return!0}finally{ct.p=I,Ge.T=S,uu(o,u)}}function sb(o,u,y){u=Ma(y,u),u=Lg(o.stateNode,u,2),o=wo(o,u,2),o!==null&&(on(o,2),Ko(o))}function vi(o,u,y){if(o.tag===3)sb(o,o,y);else for(;u!==null;){if(u.tag===3){sb(u,o,y);break}else if(u.tag===1){var S=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(lu===null||!lu.has(S))){o=Ma(y,o),y=zv(2),S=wo(u,y,2),S!==null&&(Ng(y,S,u,o),on(S,2),Ko(S));break}}u=u.return}}function F0(o,u,y){var S=o.pingCache;if(S===null){S=o.pingCache=new M0;var I=new Set;S.set(u,I)}else I=S.get(u),I===void 0&&(I=new Set,S.set(u,I));I.has(y)||(dd=!0,I.add(y),o=f1.bind(null,o,u,y),u.then(o,o))}function f1(o,u,y){var S=o.pingCache;S!==null&&S.delete(u),o.pingedLanes|=o.suspendedLanes&y,o.warmLanes&=~y,Ei===o&&(Hn&y)===y&&(br===4||br===3&&(Hn&62914560)===Hn&&300>ki()-ym?(Xn&2)===0&&yd(o,0):C0|=y,pd===Hn&&(pd=0)),Ko(o)}function lb(o,u){u===0&&(u=Lt()),o=Xl(o,u),o!==null&&(on(o,u),Ko(o))}function p1(o){var u=o.memoizedState,y=0;u!==null&&(y=u.retryLane),lb(o,y)}function m1(o,u){var y=0;switch(o.tag){case 31:case 13:var S=o.stateNode,I=o.memoizedState;I!==null&&(y=I.retryLane);break;case 19:S=o.stateNode;break;case 22:S=o.stateNode._retryCache;break;default:throw Error(d(314))}S!==null&&S.delete(u),lb(o,y)}function cb(o,u){return jr(o,u)}var _m=null,Ao=null,pc=!1,vm=!1,bm=!1,rh=0;function Ko(o){o!==Ao&&o.next===null&&(Ao===null?_m=Ao=o:Ao=Ao.next=o),vm=!0,pc||(pc=!0,ub())}function bd(o,u){if(!bm&&vm){bm=!0;do for(var y=!1,S=_m;S!==null;){if(o!==0){var I=S.pendingLanes;if(I===0)var N=0;else{var W=S.suspendedLanes,ue=S.pingedLanes;N=(1<<31-K(42|o)+1)-1,N&=I&~(W&~ue),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(y=!0,j0(S,N))}else N=Hn,N=Qe(S,S===Ei?N:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(N&3)===0||Je(S,N)||(y=!0,j0(S,N));S=S.next}while(y);bm=!1}}function g1(){Jg()}function Jg(){vm=pc=!1;var o=0;rh!==0&&v1()&&(o=rh);for(var u=ki(),y=null,S=_m;S!==null;){var I=S.next,N=ey(S,u);N===0?(S.next=null,y===null?_m=I:y.next=I,I===null&&(Ao=y)):(y=S,(o!==0||(N&3)!==0)&&(vm=!0)),S=I}ia!==0&&ia!==5||bd(o),rh!==0&&(rh=0)}function ey(o,u){for(var y=o.suspendedLanes,S=o.pingedLanes,I=o.expirationTimes,N=o.pendingLanes&-62914561;0<N;){var W=31-K(N),ue=1<<W,Le=I[W];Le===-1?((ue&y)===0||(ue&S)!==0)&&(I[W]=it(ue,u)):Le<=u&&(o.expiredLanes|=ue),N&=~ue}if(u=Ei,y=Hn,y=Qe(o,o===u?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),S=o.callbackNode,y===0||o===u&&(_i===2||_i===9)||o.cancelPendingCommit!==null)return S!==null&&S!==null&&Wr(S),o.callbackNode=null,o.callbackPriority=0;if((y&3)===0||Je(o,y)){if(u=y&-y,u===o.callbackPriority)return u;switch(S!==null&&Wr(S),di(y)){case 2:case 8:y=sa;break;case 32:y=la;break;case 268435456:y=il;break;default:y=la}return S=xd.bind(null,o),y=jr(y,S),o.callbackPriority=u,o.callbackNode=y,u}return S!==null&&S!==null&&Wr(S),o.callbackPriority=2,o.callbackNode=null,2}function xd(o,u){if(ia!==0&&ia!==5)return o.callbackNode=null,o.callbackPriority=0,null;var y=o.callbackNode;if(vd()&&o.callbackNode!==y)return null;var S=Hn;return S=Qe(o,o===Ei?S:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),S===0?null:(eb(o,S,u),ey(o,ki()),o.callbackNode!=null&&o.callbackNode===y?xd.bind(null,o):null)}function j0(o,u){if(vd())return null;eb(o,u,!0)}function ub(){Dl(function(){(Xn&6)!==0?jr(Cn,g1):Jg()})}function xm(){if(rh===0){var o=Ps;o===0&&(o=Te,Te<<=1,(Te&261888)===0&&(Te=256)),rh=o}return rh}function B0(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Sa(""+o)}function wm(o,u){var y=u.ownerDocument.createElement("input");return y.name=u.name,y.value=u.value,o.id&&y.setAttribute("form",o.id),u.parentNode.insertBefore(y,u),o=new FormData(o),y.parentNode.removeChild(y),o}function hb(o,u,y,S,I){if(u==="submit"&&y&&y.stateNode===I){var N=B0((I[kt]||null).action),W=S.submitter;W&&(u=(u=W[kt]||null)?B0(u.formAction):W.getAttribute("formAction"),u!==null&&(N=u,W=null));var ue=new hn("action","action",null,S,I);o.push({event:ue,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(rh!==0){var Le=W?wm(I,W):new FormData(I);Vs(y,{pending:!0,data:Le,method:I.method,action:N},null,Le)}}else typeof N=="function"&&(ue.preventDefault(),Le=W?wm(I,W):new FormData(I),Vs(y,{pending:!0,data:Le,method:I.method,action:N},N,Le))},currentTarget:I}]})}}for(var V0=0;V0<Yh.length;V0++){var U0=Yh[V0],y1=U0.toLowerCase(),_1=U0[0].toUpperCase()+U0.slice(1);Jr(y1,"on"+_1)}Jr(Zh,"onAnimationEnd"),Jr(Ef,"onAnimationIteration"),Jr(Hl,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr($h,"onTransitionRun"),Jr(Nu,"onTransitionStart"),Jr(_o,"onTransitionCancel"),Jr(Hp,"onTransitionEnd"),Ta("onMouseEnter",["mouseout","mouseover"]),Ta("onMouseLeave",["mouseout","mouseover"]),Ta("onPointerEnter",["pointerout","pointerover"]),Ta("onPointerLeave",["pointerout","pointerover"]),Rc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rc("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tm));function hu(o,u){u=(u&4)!==0;for(var y=0;y<o.length;y++){var S=o[y],I=S.event;S=S.listeners;e:{var N=void 0;if(u)for(var W=S.length-1;0<=W;W--){var ue=S[W],Le=ue.instance,Ke=ue.currentTarget;if(ue=ue.listener,Le!==N&&I.isPropagationStopped())break e;N=ue,I.currentTarget=Ke;try{N(I)}catch(ht){Gc(ht)}I.currentTarget=null,N=Le}else for(W=0;W<S.length;W++){if(ue=S[W],Le=ue.instance,Ke=ue.currentTarget,ue=ue.listener,Le!==N&&I.isPropagationStopped())break e;N=ue,I.currentTarget=Ke;try{N(I)}catch(ht){Gc(ht)}I.currentTarget=null,N=Le}}}}function jn(o,u){var y=u[ca];y===void 0&&(y=u[ca]=new Set);var S=o+"__bubble";y.has(S)||(Z0(u,o,2,!1),y.add(S))}function ty(o,u,y){var S=0;u&&(S|=4),Z0(y,o,S,u)}var Sm="_reactListening"+Math.random().toString(36).slice(2);function ny(o){if(!o[Sm]){o[Sm]=!0,Pa.forEach(function(y){y!=="selectionchange"&&(G0.has(y)||ty(y,!1,o),ty(y,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Sm]||(u[Sm]=!0,ty("selectionchange",!1,u))}}function Z0(o,u,y,S){switch(wb(u)){case 2:var I=bb;break;case 8:I=xb;break;default:I=d_}y=I.bind(null,u,y,o),I=void 0,!Vr||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(I=!0),S?I!==void 0?o.addEventListener(u,y,{capture:!0,passive:I}):o.addEventListener(u,y,!0):I!==void 0?o.addEventListener(u,y,{passive:I}):o.addEventListener(u,y,!1)}function iy(o,u,y,S,I){var N=S;if((u&1)===0&&(u&2)===0&&S!==null)e:for(;;){if(S===null)return;var W=S.tag;if(W===3||W===4){var ue=S.stateNode.containerInfo;if(ue===I)break;if(W===4)for(W=S.return;W!==null;){var Le=W.tag;if((Le===3||Le===4)&&W.stateNode.containerInfo===I)return;W=W.return}for(;ue!==null;){if(W=Po(ue),W===null)return;if(Le=W.tag,Le===5||Le===6||Le===26||Le===27){S=N=W;continue e}ue=ue.parentNode}}S=S.return}Ph(function(){var Ke=N,ht=nr(y),_t=[];e:{var tt=Wp.get(o);if(tt!==void 0){var at=hn,Zt=o;switch(o){case"keypress":if(Gl(y)===0)break e;case"keydown":case"keyup":at=pf;break;case"focusin":Zt="focus",at=$l;break;case"focusout":Zt="blur",at=$l;break;case"beforeblur":case"afterblur":at=$l;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=zh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=mf;break;case Zh:case Ef:case Hl:at=As;break;case Hp:at=ja;break;case"scroll":case"scrollend":at=Pn;break;case"wheel":at=Nc;break;case"copy":case"cut":case"paste":at=df;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=gg;break;case"toggle":case"beforetoggle":at=Bh}var sn=(u&4)!==0,bi=!sn&&(o==="scroll"||o==="scrollend"),Ze=sn?tt!==null?tt+"Capture":null:tt;sn=[];for(var Ve=Ke,Xe;Ve!==null;){var mt=Ve;if(Xe=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||Xe===null||Ze===null||(mt=Er(Ve,Ze),mt!=null&&sn.push(ah(Ve,mt,Xe))),bi)break;Ve=Ve.return}0<sn.length&&(tt=new at(tt,Zt,null,y,ht),_t.push({event:tt,listeners:sn}))}}if((u&7)===0){e:{if(tt=o==="mouseover"||o==="pointerover",at=o==="mouseout"||o==="pointerout",tt&&y!==Ts&&(Zt=y.relatedTarget||y.fromElement)&&(Po(Zt)||Zt[qt]))break e;if((at||tt)&&(tt=ht.window===ht?ht:(tt=ht.ownerDocument)?tt.defaultView||tt.parentWindow:window,at?(Zt=y.relatedTarget||y.toElement,at=Ke,Zt=Zt?Po(Zt):null,Zt!==null&&(bi=g(Zt),sn=Zt.tag,Zt!==bi||sn!==5&&sn!==27&&sn!==6)&&(Zt=null)):(at=null,Zt=Ke),at!==Zt)){if(sn=zh,mt="onMouseLeave",Ze="onMouseEnter",Ve="mouse",(o==="pointerout"||o==="pointerover")&&(sn=gg,mt="onPointerLeave",Ze="onPointerEnter",Ve="pointer"),bi=at==null?tt:zo(at),Xe=Zt==null?tt:zo(Zt),tt=new sn(mt,Ve+"leave",at,y,ht),tt.target=bi,tt.relatedTarget=Xe,mt=null,Po(ht)===Ke&&(sn=new sn(Ze,Ve+"enter",Zt,y,ht),sn.target=Xe,sn.relatedTarget=bi,mt=sn),bi=mt,at&&Zt)t:{for(sn=Am,Ze=at,Ve=Zt,Xe=0,mt=Ze;mt;mt=sn(mt))Xe++;mt=0;for(var en=Ve;en;en=sn(en))mt++;for(;0<Xe-mt;)Ze=sn(Ze),Xe--;for(;0<mt-Xe;)Ve=sn(Ve),mt--;for(;Xe--;){if(Ze===Ve||Ve!==null&&Ze===Ve.alternate){sn=Ze;break t}Ze=sn(Ze),Ve=sn(Ve)}sn=null}else sn=null;at!==null&&$0(_t,tt,at,sn,!1),Zt!==null&&bi!==null&&$0(_t,bi,Zt,sn,!0)}}e:{if(tt=Ke?zo(Ke):window,at=tt.nodeName&&tt.nodeName.toLowerCase(),at==="select"||at==="input"&&tt.type==="file")var Qn=Up;else if(_f(tt))if(Gp)Qn=$p;else{Qn=vf;var Ht=Tg}else at=tt.nodeName,!at||at.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Ke&&ws(Ke.elementType)&&(Qn=Up):Qn=Zp;if(Qn&&(Qn=Qn(o,Ke))){Bp(_t,Qn,y,ht);break e}Ht&&Ht(o,tt,Ke),o==="focusout"&&Ke&&tt.type==="number"&&Ke.memoizedProps.value!=null&&Lh(tt,"number",tt.value)}switch(Ht=Ke?zo(Ke):window,o){case"focusin":(_f(Ht)||Ht.contentEditable==="true")&&(Yl=Ht,Yp=Ke,zn=null);break;case"focusout":zn=Yp=Yl=null;break;case"mousedown":qp=!0;break;case"contextmenu":case"mouseup":case"dragend":qp=!1,Eg(_t,y,ht);break;case"selectionchange":if(Uc)break;case"keydown":case"keyup":Eg(_t,y,ht)}var An;if(Fp)e:{switch(o){case"compositionstart":var Bn="onCompositionStart";break e;case"compositionend":Bn="onCompositionEnd";break e;case"compositionupdate":Bn="onCompositionUpdate";break e}Bn=void 0}else Fc?jp(o,y)&&(Bn="onCompositionEnd"):o==="keydown"&&y.keyCode===229&&(Bn="onCompositionStart");Bn&&(cl&&y.locale!=="ko"&&(Fc||Bn!=="onCompositionStart"?Bn==="onCompositionEnd"&&Fc&&(An=sl()):(Ea=ht,mi="value"in Ea?Ea.value:Ea.textContent,Fc=!0)),Ht=Em(Ke,Bn),0<Ht.length&&(Bn=new Ur(Bn,o,null,y,ht),_t.push({event:Bn,listeners:Ht}),An?Bn.data=An:(An=zc(y),An!==null&&(Bn.data=An)))),(An=Vh?vg(o,y):h0(o,y))&&(Bn=Em(Ke,"onBeforeInput"),0<Bn.length&&(Ht=new Ur("onBeforeInput","beforeinput",null,y,ht),_t.push({event:Ht,listeners:Bn}),Ht.data=An)),hb(_t,o,Ke,y,ht)}hu(_t,u)})}function ah(o,u,y){return{instance:o,listener:u,currentTarget:y}}function Em(o,u){for(var y=u+"Capture",S=[];o!==null;){var I=o,N=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||N===null||(I=Er(o,y),I!=null&&S.unshift(ah(o,I,N)),I=Er(o,u),I!=null&&S.push(ah(o,I,N))),o.tag===3)return S;o=o.return}return[]}function Am(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function $0(o,u,y,S,I){for(var N=u._reactName,W=[];y!==null&&y!==S;){var ue=y,Le=ue.alternate,Ke=ue.stateNode;if(ue=ue.tag,Le!==null&&Le===S)break;ue!==5&&ue!==26&&ue!==27||Ke===null||(Le=Ke,I?(Ke=Er(y,N),Ke!=null&&W.unshift(ah(y,Ke,Le))):I||(Ke=Er(y,N),Ke!=null&&W.push(ah(y,Ke,Le)))),y=y.return}W.length!==0&&o.push({event:u,listeners:W})}var Y0=/\r\n?/g,db=/\u0000|\uFFFD/g;function Mo(o){return(typeof o=="string"?o:""+o).replace(Y0,`
`).replace(db,"")}function wd(o,u){return u=Mo(u),Mo(o)===u}function ai(o,u,y,S,I,N){switch(y){case"children":typeof S=="string"?u==="body"||u==="textarea"&&S===""||Oc(o,S):(typeof S=="number"||typeof S=="bigint")&&u!=="body"&&Oc(o,""+S);break;case"className":Cu(o,"class",S);break;case"tabIndex":Cu(o,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Cu(o,y,S);break;case"style":fg(o,S,N);break;case"data":if(u!=="object"){Cu(o,"data",S);break}case"src":case"href":if(S===""&&(u!=="a"||y!=="href")){o.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){o.removeAttribute(y);break}S=Sa(""+S),o.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){o.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(y==="formAction"?(u!=="input"&&ai(o,u,"name",I.name,I,null),ai(o,u,"formEncType",I.formEncType,I,null),ai(o,u,"formMethod",I.formMethod,I,null),ai(o,u,"formTarget",I.formTarget,I,null)):(ai(o,u,"encType",I.encType,I,null),ai(o,u,"method",I.method,I,null),ai(o,u,"target",I.target,I,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){o.removeAttribute(y);break}S=Sa(""+S),o.setAttribute(y,S);break;case"onClick":S!=null&&(o.onclick=mn);break;case"onScroll":S!=null&&jn("scroll",o);break;case"onScrollEnd":S!=null&&jn("scrollend",o);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(d(61));if(y=S.__html,y!=null){if(I.children!=null)throw Error(d(60));o.innerHTML=y}}break;case"multiple":o.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":o.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){o.removeAttribute("xlink:href");break}y=Sa(""+S),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?o.setAttribute(y,""+S):o.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?o.setAttribute(y,""):o.removeAttribute(y);break;case"capture":case"download":S===!0?o.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?o.setAttribute(y,S):o.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?o.setAttribute(y,S):o.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?o.removeAttribute(y):o.setAttribute(y,S);break;case"popover":jn("beforetoggle",o),jn("toggle",o),al(o,"popover",S);break;case"xlinkActuate":za(o,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":za(o,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":za(o,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":za(o,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":za(o,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":za(o,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":za(o,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":za(o,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":za(o,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":al(o,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Lc.get(y)||y,al(o,y,S))}}function q0(o,u,y,S,I,N){switch(y){case"style":fg(o,S,N);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(d(61));if(y=S.__html,y!=null){if(I.children!=null)throw Error(d(60));o.innerHTML=y}}break;case"children":typeof S=="string"?Oc(o,S):(typeof S=="number"||typeof S=="bigint")&&Oc(o,""+S);break;case"onScroll":S!=null&&jn("scroll",o);break;case"onScrollEnd":S!=null&&jn("scrollend",o);break;case"onClick":S!=null&&(o.onclick=mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pi.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(I=y.endsWith("Capture"),u=y.slice(2,I?y.length-7:void 0),N=o[kt]||null,N=N!=null?N[y]:null,typeof N=="function"&&o.removeEventListener(u,N,I),typeof S=="function")){typeof N!="function"&&N!==null&&(y in o?o[y]=null:o.hasAttribute(y)&&o.removeAttribute(y)),o.addEventListener(u,S,I);break e}y in o?o[y]=S:S===!0?o.setAttribute(y,""):al(o,y,S)}}}function pa(o,u,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jn("error",o),jn("load",o);var S=!1,I=!1,N;for(N in y)if(y.hasOwnProperty(N)){var W=y[N];if(W!=null)switch(N){case"src":S=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,u));default:ai(o,u,N,W,y,null)}}I&&ai(o,u,"srcSet",y.srcSet,y,null),S&&ai(o,u,"src",y.src,y,null);return;case"input":jn("invalid",o);var ue=N=W=I=null,Le=null,Ke=null;for(S in y)if(y.hasOwnProperty(S)){var ht=y[S];if(ht!=null)switch(S){case"name":I=ht;break;case"type":W=ht;break;case"checked":Le=ht;break;case"defaultChecked":Ke=ht;break;case"value":N=ht;break;case"defaultValue":ue=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(d(137,u));break;default:ai(o,u,S,ht,y,null)}}uf(o,N,ue,Le,Ke,W,I,!1);return;case"select":jn("invalid",o),S=W=N=null;for(I in y)if(y.hasOwnProperty(I)&&(ue=y[I],ue!=null))switch(I){case"value":N=ue;break;case"defaultValue":W=ue;break;case"multiple":S=ue;default:ai(o,u,I,ue,y,null)}u=N,y=W,o.multiple=!!S,u!=null?kc(o,!!S,u,!1):y!=null&&kc(o,!!S,y,!0);return;case"textarea":jn("invalid",o),N=I=S=null;for(W in y)if(y.hasOwnProperty(W)&&(ue=y[W],ue!=null))switch(W){case"value":S=ue;break;case"defaultValue":I=ue;break;case"children":N=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(d(91));break;default:ai(o,u,W,ue,y,null)}Nh(o,S,I,N);return;case"option":for(Le in y)if(y.hasOwnProperty(Le)&&(S=y[Le],S!=null))switch(Le){case"selected":o.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:ai(o,u,Le,S,y,null)}return;case"dialog":jn("beforetoggle",o),jn("toggle",o),jn("cancel",o),jn("close",o);break;case"iframe":case"object":jn("load",o);break;case"video":case"audio":for(S=0;S<Tm.length;S++)jn(Tm[S],o);break;case"image":jn("error",o),jn("load",o);break;case"details":jn("toggle",o);break;case"embed":case"source":case"link":jn("error",o),jn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ke in y)if(y.hasOwnProperty(Ke)&&(S=y[Ke],S!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,u));default:ai(o,u,Ke,S,y,null)}return;default:if(ws(u)){for(ht in y)y.hasOwnProperty(ht)&&(S=y[ht],S!==void 0&&q0(o,u,ht,S,y,void 0));return}}for(ue in y)y.hasOwnProperty(ue)&&(S=y[ue],S!=null&&ai(o,u,ue,S,y,null))}function fb(o,u,y,S){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,N=null,W=null,ue=null,Le=null,Ke=null,ht=null;for(at in y){var _t=y[at];if(y.hasOwnProperty(at)&&_t!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":Le=_t;default:S.hasOwnProperty(at)||ai(o,u,at,null,S,_t)}}for(var tt in S){var at=S[tt];if(_t=y[tt],S.hasOwnProperty(tt)&&(at!=null||_t!=null))switch(tt){case"type":N=at;break;case"name":I=at;break;case"checked":Ke=at;break;case"defaultChecked":ht=at;break;case"value":W=at;break;case"defaultValue":ue=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(d(137,u));break;default:at!==_t&&ai(o,u,tt,at,S,_t)}}cf(o,W,ue,Le,Ke,ht,N,I);return;case"select":at=W=ue=tt=null;for(N in y)if(Le=y[N],y.hasOwnProperty(N)&&Le!=null)switch(N){case"value":break;case"multiple":at=Le;default:S.hasOwnProperty(N)||ai(o,u,N,null,S,Le)}for(I in S)if(N=S[I],Le=y[I],S.hasOwnProperty(I)&&(N!=null||Le!=null))switch(I){case"value":tt=N;break;case"defaultValue":ue=N;break;case"multiple":W=N;default:N!==Le&&ai(o,u,I,N,S,Le)}u=ue,y=W,S=at,tt!=null?kc(o,!!y,tt,!1):!!S!=!!y&&(u!=null?kc(o,!!y,u,!0):kc(o,!!y,y?[]:"",!1));return;case"textarea":at=tt=null;for(ue in y)if(I=y[ue],y.hasOwnProperty(ue)&&I!=null&&!S.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:ai(o,u,ue,null,S,I)}for(W in S)if(I=S[W],N=y[W],S.hasOwnProperty(W)&&(I!=null||N!=null))switch(W){case"value":tt=I;break;case"defaultValue":at=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(d(91));break;default:I!==N&&ai(o,u,W,I,S,N)}bs(o,tt,at);return;case"option":for(var Zt in y)if(tt=y[Zt],y.hasOwnProperty(Zt)&&tt!=null&&!S.hasOwnProperty(Zt))switch(Zt){case"selected":o.selected=!1;break;default:ai(o,u,Zt,null,S,tt)}for(Le in S)if(tt=S[Le],at=y[Le],S.hasOwnProperty(Le)&&tt!==at&&(tt!=null||at!=null))switch(Le){case"selected":o.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:ai(o,u,Le,tt,S,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var sn in y)tt=y[sn],y.hasOwnProperty(sn)&&tt!=null&&!S.hasOwnProperty(sn)&&ai(o,u,sn,null,S,tt);for(Ke in S)if(tt=S[Ke],at=y[Ke],S.hasOwnProperty(Ke)&&tt!==at&&(tt!=null||at!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(d(137,u));break;default:ai(o,u,Ke,tt,S,at)}return;default:if(ws(u)){for(var bi in y)tt=y[bi],y.hasOwnProperty(bi)&&tt!==void 0&&!S.hasOwnProperty(bi)&&q0(o,u,bi,void 0,S,tt);for(ht in S)tt=S[ht],at=y[ht],!S.hasOwnProperty(ht)||tt===at||tt===void 0&&at===void 0||q0(o,u,ht,tt,S,at);return}}for(var Ze in y)tt=y[Ze],y.hasOwnProperty(Ze)&&tt!=null&&!S.hasOwnProperty(Ze)&&ai(o,u,Ze,null,S,tt);for(_t in S)tt=S[_t],at=y[_t],!S.hasOwnProperty(_t)||tt===at||tt==null&&at==null||ai(o,u,_t,tt,S,at)}function H0(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qf(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,y=performance.getEntriesByType("resource"),S=0;S<y.length;S++){var I=y[S],N=I.transferSize,W=I.initiatorType,ue=I.duration;if(N&&ue&&H0(W)){for(W=0,ue=I.responseEnd,S+=1;S<y.length;S++){var Le=y[S],Ke=Le.startTime;if(Ke>ue)break;var ht=Le.transferSize,_t=Le.initiatorType;ht&&H0(_t)&&(Le=Le.responseEnd,W+=ht*(Le<ue?1:(ue-Ke)/(Le-Ke)))}if(--S,u+=8*(N+W)/(I.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Kf=null,Mm=null;function Jf(o){return o.nodeType===9?o:o.ownerDocument}function W0(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ry(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function Cm(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var X0=null;function v1(){var o=window.event;return o&&o.type==="popstate"?o===X0?!1:(X0=o,!0):(X0=null,!1)}var ra=typeof setTimeout=="function"?setTimeout:void 0,In=typeof clearTimeout=="function"?clearTimeout:void 0,mc=typeof Promise=="function"?Promise:void 0,Dl=typeof queueMicrotask=="function"?queueMicrotask:typeof mc<"u"?function(o){return mc.resolve(null).then(o).catch(Td)}:ra;function Td(o){setTimeout(function(){throw o})}function kr(o){return o==="head"}function Or(o,u){var y=u,S=0;do{var I=y.nextSibling;if(o.removeChild(y),I&&I.nodeType===8)if(y=I.data,y==="/$"||y==="/&"){if(S===0){o.removeChild(I),lp(u);return}S--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")S++;else if(y==="html")tp(o.ownerDocument.documentElement);else if(y==="head"){y=o.ownerDocument.head,tp(y);for(var N=y.firstChild;N;){var W=N.nextSibling,ue=N.nodeName;N[Ka]||ue==="SCRIPT"||ue==="STYLE"||ue==="LINK"&&N.rel.toLowerCase()==="stylesheet"||y.removeChild(N),N=W}}else y==="body"&&tp(o.ownerDocument.body);y=I}while(y);lp(u)}function Lr(o,u){var y=o;o=0;do{var S=y.nextSibling;if(y.nodeType===1?u?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(u?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),S&&S.nodeType===8)if(y=S.data,y==="/$"){if(o===0)break;o--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||o++;y=S}while(y)}function ay(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var y=u;switch(u=u.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":ay(y),Ul(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}o.removeChild(y)}}function Jo(o,u,y,S){for(;o.nodeType===1;){var I=y;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!S&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(S){if(!o[Ka])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(N=o.getAttribute("rel"),N==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(N!==I.rel||o.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||o.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||o.getAttribute("title")!==(I.title==null?null:I.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(N=o.getAttribute("src"),(N!==(I.src==null?null:I.src)||o.getAttribute("type")!==(I.type==null?null:I.type)||o.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&N&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var N=I.name==null?null:""+I.name;if(I.type==="hidden"&&o.getAttribute("name")===N)return o}else return o;if(o=ma(o.nextSibling),o===null)break}return null}function Q0(o,u,y){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!y||(o=ma(o.nextSibling),o===null))return null;return o}function xr(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=ma(o.nextSibling),o===null))return null;return o}function ep(o){return o.data==="$?"||o.data==="$~"}function K0(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function pb(o,u){var y=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||y.readyState!=="loading")u();else{var S=function(){u(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),o._reactRetry=S}}function ma(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var oh=null;function mb(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var y=o.data;if(y==="/$"||y==="/&"){if(u===0)return ma(o.nextSibling);u--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||u++}o=o.nextSibling}return null}function J0(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var y=o.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(u===0)return o;u--}else y!=="/$"&&y!=="/&"||u++}o=o.previousSibling}return null}function e_(o,u,y){switch(u=Jf(y),o){case"html":if(o=u.documentElement,!o)throw Error(d(452));return o;case"head":if(o=u.head,!o)throw Error(d(453));return o;case"body":if(o=u.body,!o)throw Error(d(454));return o;default:throw Error(d(451))}}function tp(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Ul(o)}var Co=new Map,t_=new Set;function Il(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var lo=ct.d;ct.d={f:oy,r:Dm,D:dn,C:gb,L:yb,m:np,X:ip,S:b1,M:x1};function oy(){var o=lo.f(),u=Wf();return o||u}function Dm(o){var u=ua(o);u!==null&&u.tag===5&&u.type==="form"?io(u):lo.r(o)}var wr=typeof document>"u"?null:document;function $s(o,u,y){var S=wr;if(S&&typeof u=="string"&&u){var I=Fa(u);I='link[rel="'+o+'"][href="'+I+'"]',typeof y=="string"&&(I+='[crossorigin="'+y+'"]'),t_.has(I)||(t_.add(I),o={rel:o,crossOrigin:y,href:u},S.querySelector(I)===null&&(u=S.createElement("link"),pa(u,"link",o),Wi(u),S.head.appendChild(u)))}}function dn(o){lo.D(o),$s("dns-prefetch",o,null)}function gb(o,u){lo.C(o,u),$s("preconnect",o,u)}function yb(o,u,y){lo.L(o,u,y);var S=wr;if(S&&o&&u){var I='link[rel="preload"][as="'+Fa(u)+'"]';u==="image"&&y&&y.imageSrcSet?(I+='[imagesrcset="'+Fa(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(I+='[imagesizes="'+Fa(y.imageSizes)+'"]')):I+='[href="'+Fa(o)+'"]';var N=I;switch(u){case"style":N=du(o);break;case"script":N=lh(o)}Co.has(N)||(o=z({rel:"preload",href:u==="image"&&y&&y.imageSrcSet?void 0:o,as:u},y),Co.set(N,o),S.querySelector(I)!==null||u==="style"&&S.querySelector(sh(N))||u==="script"&&S.querySelector(Sd(N))||(u=S.createElement("link"),pa(u,"link",o),Wi(u),S.head.appendChild(u)))}}function np(o,u){lo.m(o,u);var y=wr;if(y&&o){var S=u&&typeof u.as=="string"?u.as:"script",I='link[rel="modulepreload"][as="'+Fa(S)+'"][href="'+Fa(o)+'"]',N=I;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=lh(o)}if(!Co.has(N)&&(o=z({rel:"modulepreload",href:o},u),Co.set(N,o),y.querySelector(I)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Sd(N)))return}S=y.createElement("link"),pa(S,"link",o),Wi(S),y.head.appendChild(S)}}}function b1(o,u,y){lo.S(o,u,y);var S=wr;if(S&&o){var I=Fo(S).hoistableStyles,N=du(o);u=u||"default";var W=I.get(N);if(!W){var ue={loading:0,preload:null};if(W=S.querySelector(sh(N)))ue.loading=5;else{o=z({rel:"stylesheet",href:o,"data-precedence":u},y),(y=Co.get(N))&&Ed(o,y);var Le=W=S.createElement("link");Wi(Le),pa(Le,"link",o),Le._p=new Promise(function(Ke,ht){Le.onload=Ke,Le.onerror=ht}),Le.addEventListener("load",function(){ue.loading|=1}),Le.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,ch(W,u,S)}W={type:"stylesheet",instance:W,count:1,state:ue},I.set(N,W)}}}function ip(o,u){lo.X(o,u);var y=wr;if(y&&o){var S=Fo(y).hoistableScripts,I=lh(o),N=S.get(I);N||(N=y.querySelector(Sd(I)),N||(o=z({src:o,async:!0},u),(u=Co.get(I))&&sy(o,u),N=y.createElement("script"),Wi(N),pa(N,"link",o),y.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},S.set(I,N))}}function x1(o,u){lo.M(o,u);var y=wr;if(y&&o){var S=Fo(y).hoistableScripts,I=lh(o),N=S.get(I);N||(N=y.querySelector(Sd(I)),N||(o=z({src:o,async:!0,type:"module"},u),(u=Co.get(I))&&sy(o,u),N=y.createElement("script"),Wi(N),pa(N,"link",o),y.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},S.set(I,N))}}function n_(o,u,y,S){var I=(I=zt.current)?Il(I):null;if(!I)throw Error(d(446));switch(o){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(u=du(y.href),y=Fo(I).hoistableStyles,S=y.get(u),S||(S={type:"style",instance:null,count:0,state:null},y.set(u,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){o=du(y.href);var N=Fo(I).hoistableStyles,W=N.get(o);if(W||(I=I.ownerDocument||I,W={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(o,W),(N=I.querySelector(sh(o)))&&!N._p&&(W.instance=N,W.state.loading=5),Co.has(o)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Co.set(o,y),N||i_(I,o,y,W.state))),u&&S===null)throw Error(d(528,""));return W}if(u&&S!==null)throw Error(d(529,""));return null;case"script":return u=y.async,y=y.src,typeof y=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=lh(y),y=Fo(I).hoistableScripts,S=y.get(u),S||(S={type:"script",instance:null,count:0,state:null},y.set(u,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,o))}}function du(o){return'href="'+Fa(o)+'"'}function sh(o){return'link[rel="stylesheet"]['+o+"]"}function Im(o){return z({},o,{"data-precedence":o.precedence,precedence:null})}function i_(o,u,y,S){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?S.loading=1:(u=o.createElement("link"),S.preload=u,u.addEventListener("load",function(){return S.loading|=1}),u.addEventListener("error",function(){return S.loading|=2}),pa(u,"link",y),Wi(u),o.head.appendChild(u))}function lh(o){return'[src="'+Fa(o)+'"]'}function Sd(o){return"script[async]"+o}function r_(o,u,y){if(u.count++,u.instance===null)switch(u.type){case"style":var S=o.querySelector('style[data-href~="'+Fa(y.href)+'"]');if(S)return u.instance=S,Wi(S),S;var I=z({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(o.ownerDocument||o).createElement("style"),Wi(S),pa(S,"style",I),ch(S,y.precedence,o),u.instance=S;case"stylesheet":I=du(y.href);var N=o.querySelector(sh(I));if(N)return u.state.loading|=4,u.instance=N,Wi(N),N;S=Im(y),(I=Co.get(I))&&Ed(S,I),N=(o.ownerDocument||o).createElement("link"),Wi(N);var W=N;return W._p=new Promise(function(ue,Le){W.onload=ue,W.onerror=Le}),pa(N,"link",S),u.state.loading|=4,ch(N,y.precedence,o),u.instance=N;case"script":return N=lh(y.src),(I=o.querySelector(Sd(N)))?(u.instance=I,Wi(I),I):(S=y,(I=Co.get(N))&&(S=z({},y),sy(S,I)),o=o.ownerDocument||o,I=o.createElement("script"),Wi(I),pa(I,"link",S),o.head.appendChild(I),u.instance=I);case"void":return null;default:throw Error(d(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(S=u.instance,u.state.loading|=4,ch(S,y.precedence,o));return u.instance}function ch(o,u,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=S.length?S[S.length-1]:null,N=I,W=0;W<S.length;W++){var ue=S[W];if(ue.dataset.precedence===u)N=ue;else if(N!==I)break}N?N.parentNode.insertBefore(o,N.nextSibling):(u=y.nodeType===9?y.head:y,u.insertBefore(o,u.firstChild))}function Ed(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function sy(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Ad=null;function Rm(o,u,y){if(Ad===null){var S=new Map,I=Ad=new Map;I.set(y,S)}else I=Ad,S=I.get(y),S||(S=new Map,I.set(y,S));if(S.has(o))return S;for(S.set(o,null),y=y.getElementsByTagName(o),I=0;I<y.length;I++){var N=y[I];if(!(N[Ka]||N[dt]||o==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var W=N.getAttribute(u)||"";W=o+W;var ue=S.get(W);ue?ue.push(N):S.set(W,[N])}}return S}function _b(o,u,y){o=o.ownerDocument||o,o.head.insertBefore(y,u==="title"?o.querySelector("head > title"):null)}function a_(o,u,y){if(y===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function o_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function w1(o,u,y,S){if(y.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var I=du(S.href),N=u.querySelector(sh(I));if(N){u=N._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=ly.bind(o),u.then(o,o)),y.state.loading|=4,y.instance=N,Wi(N);return}N=u.ownerDocument||u,S=Im(S),(I=Co.get(I))&&Ed(S,I),N=N.createElement("link"),Wi(N);var W=N;W._p=new Promise(function(ue,Le){W.onload=ue,W.onerror=Le}),pa(N,"link",S),y.instance=N}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(y,u),(u=y.state.preload)&&(y.state.loading&3)===0&&(o.count++,y=ly.bind(o),u.addEventListener("load",y),u.addEventListener("error",y))}}var s_=0;function vb(o,u){return o.stylesheets&&o.count===0&&km(o,o.stylesheets),0<o.count||0<o.imgCount?function(y){var S=setTimeout(function(){if(o.stylesheets&&km(o,o.stylesheets),o.unsuspend){var N=o.unsuspend;o.unsuspend=null,N()}},6e4+u);0<o.imgBytes&&s_===0&&(s_=62500*Qf());var I=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&km(o,o.stylesheets),o.unsuspend)){var N=o.unsuspend;o.unsuspend=null,N()}},(o.imgBytes>s_?50:800)+u);return o.unsuspend=y,function(){o.unsuspend=null,clearTimeout(S),clearTimeout(I)}}:null}function ly(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)km(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var uh=null;function km(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,uh=new Map,u.forEach(T1,o),uh=null,ly.call(o))}function T1(o,u){if(!(u.state.loading&4)){var y=uh.get(o);if(y)var S=y.get(null);else{y=new Map,uh.set(o,y);for(var I=o.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<I.length;N++){var W=I[N];(W.nodeName==="LINK"||W.getAttribute("media")!=="not all")&&(y.set(W.dataset.precedence,W),S=W)}S&&y.set(null,S)}I=u.instance,W=I.getAttribute("data-precedence"),N=y.get(W)||S,N===S&&y.set(null,I),y.set(W,I),this.count++,S=ly.bind(this),I.addEventListener("load",S),I.addEventListener("error",S),N?N.parentNode.insertBefore(I,N.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(I,o.firstChild)),u.state.loading|=4}}var Md={$$typeof:Ee,Provider:null,Consumer:null,_currentValue:St,_currentValue2:St,_threadCount:0};function l_(o,u,y,S,I,N,W,ue,Le){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yt(0),this.hiddenUpdates=Yt(null),this.identifierPrefix=S,this.onUncaughtError=I,this.onCaughtError=N,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Le,this.incompleteTransitions=new Map}function c_(o,u,y,S,I,N,W,ue,Le,Ke,ht,_t){return o=new l_(o,u,y,W,Le,Ke,ht,_t,ue),u=1,N===!0&&(u|=24),N=Va(3,null,null,u),o.current=N,N.stateNode=o,u=Ga(),u.refCount++,o.pooledCache=u,u.refCount++,N.memoizedState={element:S,isDehydrated:y,cache:u},js(N),o}function Cd(o){return o?(o=hl,o):hl}function u_(o,u,y,S,I,N){I=Cd(I),S.context===null?S.context=I:S.pendingContext=I,S=ic(u),S.payload={element:y},N=N===void 0?null:N,N!==null&&(S.callback=N),y=wo(o,S,u),y!==null&&(so(y,o,u),bl(y,o,u))}function rp(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var y=o.retryLane;o.retryLane=y!==0&&y<u?y:u}}function h_(o,u){rp(o,u),(o=o.alternate)&&rp(o,u)}function ap(o){if(o.tag===13||o.tag===31){var u=Xl(o,67108864);u!==null&&so(u,o,67108864),h_(o,67108864)}}function Om(o){if(o.tag===13||o.tag===31){var u=Xo();u=vt(u);var y=Xl(o,u);y!==null&&so(y,o,u),h_(o,u)}}var cy=!0;function bb(o,u,y,S){var I=Ge.T;Ge.T=null;var N=ct.p;try{ct.p=2,d_(o,u,y,S)}finally{ct.p=N,Ge.T=I}}function xb(o,u,y,S){var I=Ge.T;Ge.T=null;var N=ct.p;try{ct.p=8,d_(o,u,y,S)}finally{ct.p=N,Ge.T=I}}function d_(o,u,y,S){if(cy){var I=f_(S);if(I===null)iy(o,u,S,uy,y),Sb(o,S);else if(S1(I,o,u,y,S))S.stopPropagation();else if(Sb(o,S),u&4&&-1<Tb.indexOf(o)){for(;I!==null;){var N=ua(I);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var W=je(N.pendingLanes);if(W!==0){var ue=N;for(ue.pendingLanes|=2,ue.entangledLanes|=2;W;){var Le=1<<31-K(W);ue.entanglements[1]|=Le,W&=~Le}Ko(N),(Xn&6)===0&&(gd=ki()+500,bd(0))}}break;case 31:case 13:ue=Xl(N,2),ue!==null&&so(ue,N,2),Wf(),h_(N,2)}if(N=f_(S),N===null&&iy(o,u,S,uy,y),N===I)break;I=N}I!==null&&S.stopPropagation()}else iy(o,u,S,null,y)}}function f_(o){return o=nr(o),p_(o)}var uy=null;function p_(o){if(uy=null,o=Po(o),o!==null){var u=g(o);if(u===null)o=null;else{var y=u.tag;if(y===13){if(o=_(u),o!==null)return o;o=null}else if(y===31){if(o=c(u),o!==null)return o;o=null}else if(y===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return uy=o,null}function wb(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sr()){case Cn:return 2;case sa:return 8;case la:case Au:return 32;case il:return 268435456;default:return 32}default:return 32}}var hy=!1,Do=null,gc=null,fu=null,op=new Map,Lm=new Map,pu=[],Tb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sb(o,u){switch(o){case"focusin":case"focusout":Do=null;break;case"dragenter":case"dragleave":gc=null;break;case"mouseover":case"mouseout":fu=null;break;case"pointerover":case"pointerout":op.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lm.delete(u.pointerId)}}function sp(o,u,y,S,I,N){return o===null||o.nativeEvent!==N?(o={blockedOn:u,domEventName:y,eventSystemFlags:S,nativeEvent:N,targetContainers:[I]},u!==null&&(u=ua(u),u!==null&&ap(u)),o):(o.eventSystemFlags|=S,u=o.targetContainers,I!==null&&u.indexOf(I)===-1&&u.push(I),o)}function S1(o,u,y,S,I){switch(u){case"focusin":return Do=sp(Do,o,u,y,S,I),!0;case"dragenter":return gc=sp(gc,o,u,y,S,I),!0;case"mouseover":return fu=sp(fu,o,u,y,S,I),!0;case"pointerover":var N=I.pointerId;return op.set(N,sp(op.get(N)||null,o,u,y,S,I)),!0;case"gotpointercapture":return N=I.pointerId,Lm.set(N,sp(Lm.get(N)||null,o,u,y,S,I)),!0}return!1}function Eb(o){var u=Po(o.target);if(u!==null){var y=g(u);if(y!==null){if(u=y.tag,u===13){if(u=_(y),u!==null){o.blockedOn=u,lr(o.priority,function(){Om(y)});return}}else if(u===31){if(u=c(y),u!==null){o.blockedOn=u,lr(o.priority,function(){Om(y)});return}}else if(u===3&&y.stateNode.current.memoizedState.isDehydrated){o.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Rl(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var y=f_(o.nativeEvent);if(y===null){y=o.nativeEvent;var S=new y.constructor(y.type,y);Ts=S,y.target.dispatchEvent(S),Ts=null}else return u=ua(y),u!==null&&ap(u),o.blockedOn=y,!1;u.shift()}return!0}function m_(o,u,y){Rl(o)&&y.delete(u)}function Ab(){hy=!1,Do!==null&&Rl(Do)&&(Do=null),gc!==null&&Rl(gc)&&(gc=null),fu!==null&&Rl(fu)&&(fu=null),op.forEach(m_),Lm.forEach(m_)}function Nm(o,u){o.blockedOn===u&&(o.blockedOn=null,hy||(hy=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ab)))}var Pm=null;function Mb(o){Pm!==o&&(Pm=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Pm===o&&(Pm=null);for(var u=0;u<o.length;u+=3){var y=o[u],S=o[u+1],I=o[u+2];if(typeof S!="function"){if(p_(S||y)===null)continue;break}var N=ua(y);N!==null&&(o.splice(u,3),u-=3,Vs(N,{pending:!0,data:I,method:y.method,action:S},S,I))}}))}function lp(o){function u(Le){return Nm(Le,o)}Do!==null&&Nm(Do,o),gc!==null&&Nm(gc,o),fu!==null&&Nm(fu,o),op.forEach(u),Lm.forEach(u);for(var y=0;y<pu.length;y++){var S=pu[y];S.blockedOn===o&&(S.blockedOn=null)}for(;0<pu.length&&(y=pu[0],y.blockedOn===null);)Eb(y),y.blockedOn===null&&pu.shift();if(y=(o.ownerDocument||o).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var I=y[S],N=y[S+1],W=I[kt]||null;if(typeof N=="function")W||Mb(y);else if(W){var ue=null;if(N&&N.hasAttribute("formAction")){if(I=N,W=N[kt]||null)ue=W.formAction;else if(p_(I)!==null)continue}else ue=W.action;typeof ue=="function"?y[S+1]=ue:(y.splice(S,3),S-=3),Mb(y)}}}function g_(){function o(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(W){return I=W})},focusReset:"manual",scroll:"manual"})}function u(){I!==null&&(I(),I=null),S||setTimeout(y,20)}function y(){if(!S&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,I=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(y,100),function(){S=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),I!==null&&(I(),I=null)}}}function dy(o){this._internalRoot=o}Dd.prototype.render=dy.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(d(409));var y=u.current,S=Xo();u_(y,S,o,u,null,null)},Dd.prototype.unmount=dy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;u_(o.current,2,null,o,null,null),Wf(),u[qt]=null}};function Dd(o){this._internalRoot=o}Dd.prototype.unstable_scheduleHydration=function(o){if(o){var u=fi();o={blockedOn:null,target:o,priority:u};for(var y=0;y<pu.length&&u!==0&&u<pu[y].priority;y++);pu.splice(y,0,o),y===0&&Eb(o)}};var y_=t.version;if(y_!=="19.2.0")throw Error(d(527,y_,"19.2.0"));ct.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(d(188)):(o=Object.keys(o).join(","),Error(d(268,o)));return o=D(u),o=o!==null?O(o):null,o=o===null?null:o.stateNode,o};var fy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ge,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{wa=Id.inject(fy),zi=Id}catch{}}return b_.createRoot=function(o,u){if(!f(o))throw Error(d(299));var y=!1,S="",I=zf,N=Ff,W=Og;return u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(S=u.identifierPrefix),u.onUncaughtError!==void 0&&(I=u.onUncaughtError),u.onCaughtError!==void 0&&(N=u.onCaughtError),u.onRecoverableError!==void 0&&(W=u.onRecoverableError)),u=c_(o,1,!1,null,null,y,S,null,I,N,W,g_),o[qt]=u.current,ny(o),new dy(u)},b_.hydrateRoot=function(o,u,y){if(!f(o))throw Error(d(299));var S=!1,I="",N=zf,W=Ff,ue=Og,Le=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(I=y.identifierPrefix),y.onUncaughtError!==void 0&&(N=y.onUncaughtError),y.onCaughtError!==void 0&&(W=y.onCaughtError),y.onRecoverableError!==void 0&&(ue=y.onRecoverableError),y.formState!==void 0&&(Le=y.formState)),u=c_(o,1,!0,u,y??null,S,I,Le,N,W,ue,g_),u.context=Cd(null),y=u.current,S=Xo(),S=vt(S),I=ic(S),I.callback=null,wo(y,I,S),y=S,u.current.lanes=y,on(u,y),Ko(u),o[qt]=u.current,ny(o),new Dd(u)},b_.version="19.2.0",b_}var kT;function MI(){if(kT)return D1.exports;kT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),D1.exports=AI(),D1.exports}var CI=MI();const DI=og(CI),II="modulepreload",RI=function(i){return"https://www.opentripplanner.org/debug-client-assets/2025/12/2025-12-04T11:44/"+i},OT={},lA=function(t,a,d){let f=Promise.resolve();if(a&&a.length>0){let D=function(O){return Promise.all(O.map(z=>Promise.resolve(z).then(V=>({status:"fulfilled",value:V}),V=>({status:"rejected",reason:V}))))};var _=D;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),A=c?.nonce||c?.getAttribute("nonce");f=D(a.map(O=>{if(O=RI(O),O in OT)return;OT[O]=!0;const z=O.endsWith(".css"),V=z?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${O}"]${V}`))return;const H=document.createElement("link");if(H.rel=z?"stylesheet":II,z||(H.as="script"),H.crossOrigin="",H.href=O,A&&H.setAttribute("nonce",A),document.head.appendChild(H),z)return new Promise((ne,ae)=>{H.addEventListener("load",ne),H.addEventListener("error",()=>ae(new Error(`Unable to preload CSS for ${O}`)))})}))}function g(c){const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=c,window.dispatchEvent(A),!A.defaultPrevented)throw c}return f.then(c=>{for(const A of c||[])A.status==="rejected"&&g(A.reason);return t().catch(g)})},kI=ie.createContext(null);function OI(i,t){const a=Array.isArray(i)?i[0]:i?i.x:0,d=Array.isArray(i)?i[1]:i?i.y:0,f=Array.isArray(t)?t[0]:t?t.x:0,g=Array.isArray(t)?t[1]:t?t.y:0;return a===f&&d===g}function qs(i,t){if(i===t)return!0;if(!i||!t)return!1;if(Array.isArray(i)){if(!Array.isArray(t)||i.length!==t.length)return!1;for(let a=0;a<i.length;a++)if(!qs(i[a],t[a]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof i=="object"&&typeof t=="object"){const a=Object.keys(i),d=Object.keys(t);if(a.length!==d.length)return!1;for(const f of a)if(!t.hasOwnProperty(f)||!qs(i[f],t[f]))return!1;return!0}return!1}function LT(i){return{longitude:i.center.lng,latitude:i.center.lat,zoom:i.zoom,pitch:i.pitch,bearing:i.bearing,padding:i.padding}}function NT(i,t){const a=t.viewState||t,d={};if("longitude"in a&&"latitude"in a&&(a.longitude!==i.center.lng||a.latitude!==i.center.lat)){const f=i.center.constructor;d.center=new f(a.longitude,a.latitude)}return"zoom"in a&&a.zoom!==i.zoom&&(d.zoom=a.zoom),"bearing"in a&&a.bearing!==i.bearing&&(d.bearing=a.bearing),"pitch"in a&&a.pitch!==i.pitch&&(d.pitch=a.pitch),a.padding&&i.padding&&!qs(a.padding,i.padding)&&(d.padding=a.padding),d}const LI=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function PT(i){if(!i)return null;if(typeof i=="string"||("toJS"in i&&(i=i.toJS()),!i.layers))return i;const t={};for(const d of i.layers)t[d.id]=d;const a=i.layers.map(d=>{let f=null;"interactive"in d&&(f=Object.assign({},d),delete f.interactive);const g=t[d.ref];if(g){f=f||Object.assign({},d),delete f.ref;for(const _ of LI)_ in g&&(f[_]=g[_])}return f||d});return{...i,layers:a}}const zT={version:8,sources:{},layers:[]},FT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},jT={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},BT={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},NI=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],PI=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Oy{constructor(t,a,d){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=f=>{const g=this.props[BT[f.type]];g?g(f):f.type==="error"&&console.error(f.error)},this._onCameraEvent=f=>{if(this._internalUpdate)return;f.viewState=this._propsedCameraUpdate||LT(this._map.transform);const g=this.props[jT[f.type]];g&&g(f)},this._onCameraUpdate=f=>this._internalUpdate?f:(this._propsedCameraUpdate=LT(f),NT(f,this.props)),this._onPointerEvent=f=>{(f.type==="mousemove"||f.type==="mouseout")&&this._updateHover(f);const g=this.props[FT[f.type]];g&&(this.props.interactiveLayerIds&&f.type!=="mouseover"&&f.type!=="mouseout"&&(f.features=this._hoveredFeatures||this._queryRenderedFeatures(f.point)),g(f),delete f.features)},this._MapClass=t,this.props=a,this._initialize(d)}get map(){return this._map}setProps(t){const a=this.props;this.props=t;const d=this._updateSettings(t,a),f=this._updateSize(t),g=this._updateViewState(t);this._updateStyle(t,a),this._updateStyleComponents(t),this._updateHandlers(t,a),(d||f||g&&!this._map.isMoving())&&this.redraw()}static reuse(t,a){const d=Oy.savedMaps.pop();if(!d)return null;const f=d.map,g=f.getContainer();for(a.className=g.className;g.childNodes.length>0;)a.appendChild(g.childNodes[0]);f._container=a;const _=f._resizeObserver;_&&(_.disconnect(),_.observe(a)),d.setProps({...t,styleDiffing:!1}),f.resize();const{initialViewState:c}=t;return c&&(c.bounds?f.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):d._updateViewState(c)),f.isStyleLoaded()?f.fire("load"):f.once("style.load",()=>f.fire("load")),f._update(),d}_initialize(t){const{props:a}=this,{mapStyle:d=zT}=a,f={...a,...a.initialViewState,container:t,style:PT(d)},g=f.initialViewState||f.viewState||f;if(Object.assign(f,{center:[g.longitude||0,g.latitude||0],zoom:g.zoom||0,pitch:g.pitch||0,bearing:g.bearing||0}),a.gl){const c=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=c,a.gl)}const _=new this._MapClass(f);g.padding&&_.setPadding(g.padding),a.cursor&&(_.getCanvas().style.cursor=a.cursor),_.transformCameraUpdate=this._onCameraUpdate,_.on("style.load",()=>{this._styleComponents={light:_.getLight(),sky:_.getSky(),projection:_.getProjection?.(),terrain:_.getTerrain()},this._updateStyleComponents(this.props)}),_.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const c in FT)_.on(c,this._onPointerEvent);for(const c in jT)_.on(c,this._onCameraEvent);for(const c in BT)_.on(c,this._onEvent);this._map=_}recycle(){this.map.getContainer().querySelector("[mapboxgl-children]")?.remove(),Oy.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){const{viewState:a}=t;if(a){const d=this._map;if(a.width!==d.transform.width||a.height!==d.transform.height)return d.resize(),!0}return!1}_updateViewState(t){const a=this._map,d=a.transform;if(!a.isMoving()){const g=NT(d,t);if(Object.keys(g).length>0)return this._internalUpdate=!0,a.jumpTo(g),this._internalUpdate=!1,!0}return!1}_updateSettings(t,a){const d=this._map;let f=!1;for(const g of NI)g in t&&!qs(t[g],a[g])&&(f=!0,d[`set${g[0].toUpperCase()}${g.slice(1)}`]?.call(d,t[g]));return f}_updateStyle(t,a){if(t.cursor!==a.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==a.mapStyle){const{mapStyle:d=zT,styleDiffing:f=!0}=t,g={diff:f};"localIdeographFontFamily"in t&&(g.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(PT(d),g)}}_updateStyleComponents({light:t,projection:a,sky:d,terrain:f}){const g=this._map,_=this._styleComponents;g.style._loaded&&(t&&!qs(t,_.light)&&(_.light=t,g.setLight(t)),a&&!qs(a,_.projection)&&a!==_.projection?.type&&(_.projection=typeof a=="string"?{type:a}:a,g.setProjection?.(_.projection)),d&&!qs(d,_.sky)&&(_.sky=d,g.setSky(d)),f!==void 0&&!qs(f,_.terrain)&&(!f||g.getSource(f.source))&&(_.terrain=f,g.setTerrain(f)))}_updateHandlers(t,a){const d=this._map;for(const f of PI){const g=t[f]??!0,_=a[f]??!0;qs(g,_)||(g?d[f].enable(g):d[f].disable())}}_queryRenderedFeatures(t){const a=this._map,{interactiveLayerIds:d=[]}=this.props;try{return a.queryRenderedFeatures(t,{layers:d.filter(a.getLayer.bind(a))})}catch{return[]}}_updateHover(t){const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const f=t.type,g=this._hoveredFeatures?.length>0,_=this._queryRenderedFeatures(t.point),c=_.length>0;!c&&g&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=_,c&&!g&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}}Oy.savedMaps=[];const zI=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function FI(i){if(!i)return null;const t=i.map,a={getMap:()=>t};for(const d of jI(t))!(d in a)&&!zI.includes(d)&&(a[d]=t[d].bind(t));return a}function jI(i){const t=new Set;let a=i;for(;a;){for(const d of Object.getOwnPropertyNames(a))d[0]!=="_"&&typeof i[d]=="function"&&d!=="fire"&&d!=="setEventedParent"&&t.add(d);a=Object.getPrototypeOf(a)}return Array.from(t)}const BI=typeof document<"u"?ie.useLayoutEffect:ie.useEffect;function VI(i,t){const{RTLTextPlugin:a,maxParallelImageRequests:d,workerCount:f,workerUrl:g}=t;if(a&&i.getRTLTextPluginStatus&&i.getRTLTextPluginStatus()==="unavailable"){const{pluginUrl:_,lazy:c=!0}=typeof a=="string"?{pluginUrl:a}:a;i.setRTLTextPlugin(_,A=>{A&&console.error(A)},c)}d!==void 0&&i.setMaxParallelImageRequests(d),f!==void 0&&i.setWorkerCount(f),g!==void 0&&i.setWorkerUrl(g)}const Wy=ie.createContext(null);function UI(i,t){const a=ie.useContext(kI),[d,f]=ie.useState(null),g=ie.useRef(),{current:_}=ie.useRef({mapLib:null,map:null});ie.useEffect(()=>{const D=i.mapLib;let O=!0,z;return Promise.resolve(D||lA(()=>Promise.resolve().then(()=>fA),void 0)).then(V=>{if(!O)return;if(!V)throw new Error("Invalid mapLib");const H="Map"in V?V:V.default;if(!H.Map)throw new Error("Invalid mapLib");VI(H,i),i.reuseMaps&&(z=Oy.reuse(i,g.current)),z||(z=new Oy(H.Map,i,g.current)),_.map=FI(z),_.mapLib=H,f(z),a?.onMapMount(_.map,i.id)}).catch(V=>{const{onError:H}=i;H?H({type:"error",target:null,originalEvent:null,error:V}):console.error(V)}),()=>{O=!1,z&&(a?.onMapUnmount(i.id),i.reuseMaps?z.recycle():z.destroy())}},[]),BI(()=>{d&&d.setProps(i)}),ie.useImperativeHandle(t,()=>_.map,[d]);const c=ie.useMemo(()=>({position:"relative",width:"100%",height:"100%",...i.style}),[i.style]),A={height:"100%"};return ie.createElement("div",{id:i.id,ref:g,style:c},d&&ie.createElement(Wy.Provider,{value:_},ie.createElement("div",{"mapboxgl-children":"",style:A},i.children)))}const GI=ie.forwardRef(UI);var Mx=sA();const Um=og(Mx),ZI=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function nf(i,t){if(!i||!t)return;const a=i.style;for(const d in t){const f=t[d];Number.isFinite(f)&&!ZI.test(d)?a[d]=`${f}px`:a[d]=f}}function cA(i,t){if(i===t)return null;const a=VT(i),d=VT(t),f=[];for(const g of d)a.has(g)||f.push(g);for(const g of a)d.has(g)||f.push(g);return f.length===0?null:f}function VT(i){return new Set(i?i.trim().split(/\s+/):[])}const UT=ie.memo(ie.forwardRef((i,t)=>{const{map:a,mapLib:d}=ie.useContext(Wy),f=ie.useRef({props:i}),g=ie.useMemo(()=>{let he=!1;ie.Children.forEach(i.children,Fe=>{Fe&&(he=!0)});const Ae={...i,element:he?document.createElement("div"):void 0},Ee=new d.Marker(Ae);return Ee.setLngLat([i.longitude,i.latitude]),Ee.getElement().addEventListener("click",Fe=>{f.current.props.onClick?.({type:"click",target:Ee,originalEvent:Fe})}),Ee.on("dragstart",Fe=>{const De=Fe;De.lngLat=g.getLngLat(),f.current.props.onDragStart?.(De)}),Ee.on("drag",Fe=>{const De=Fe;De.lngLat=g.getLngLat(),f.current.props.onDrag?.(De)}),Ee.on("dragend",Fe=>{const De=Fe;De.lngLat=g.getLngLat(),f.current.props.onDragEnd?.(De)}),Ee},[]);ie.useEffect(()=>(g.addTo(a.getMap()),()=>{g.remove()}),[]);const{longitude:_,latitude:c,offset:A,style:D,draggable:O=!1,popup:z=null,rotation:V=0,rotationAlignment:H="auto",pitchAlignment:ne="auto"}=i;ie.useEffect(()=>{nf(g.getElement(),D)},[D]),ie.useImperativeHandle(t,()=>g,[]);const ae=f.current.props;(g.getLngLat().lng!==_||g.getLngLat().lat!==c)&&g.setLngLat([_,c]),A&&!OI(g.getOffset(),A)&&g.setOffset(A),g.isDraggable()!==O&&g.setDraggable(O),g.getRotation()!==V&&g.setRotation(V),g.getRotationAlignment()!==H&&g.setRotationAlignment(H),g.getPitchAlignment()!==ne&&g.setPitchAlignment(ne),g.getPopup()!==z&&g.setPopup(z);const q=cA(ae.className,i.className);if(q)for(const he of q)g.toggleClassName(he);return f.current.props=i,Mx.createPortal(i.children,g.getElement())})),r2=ie.memo(ie.forwardRef((i,t)=>{const{map:a,mapLib:d}=ie.useContext(Wy),f=ie.useMemo(()=>document.createElement("div"),[]),g=ie.useRef({props:i}),_=ie.useMemo(()=>{const c={...i},A=new d.Popup(c);return A.setLngLat([i.longitude,i.latitude]),A.once("open",D=>{g.current.props.onOpen?.(D)}),A},[]);if(ie.useEffect(()=>{const c=A=>{g.current.props.onClose?.(A)};return _.on("close",c),_.setDOMContent(f).addTo(a.getMap()),()=>{_.off("close",c),_.isOpen()&&_.remove()}},[]),ie.useEffect(()=>{nf(_.getElement(),i.style)},[i.style]),ie.useImperativeHandle(t,()=>_,[]),_.isOpen()){const c=g.current.props;(_.getLngLat().lng!==i.longitude||_.getLngLat().lat!==i.latitude)&&_.setLngLat([i.longitude,i.latitude]),i.offset&&!qs(c.offset,i.offset)&&_.setOffset(i.offset),(c.anchor!==i.anchor||c.maxWidth!==i.maxWidth)&&(_.options.anchor=i.anchor,_.setMaxWidth(i.maxWidth));const A=cA(c.className,i.className);if(A)for(const D of A)_.toggleClassName(D);g.current.props=i}return Mx.createPortal(i.children,f)}));function sg(i,t,a,d){const f=ie.useContext(Wy),g=ie.useMemo(()=>i(f),[]);return ie.useEffect(()=>{const _=t,c=null,A=typeof t=="function"?t:null,{map:D}=f;return D.hasControl(g)||(D.addControl(g,_?.position),c&&c(f)),()=>{A&&A(f),D.hasControl(g)&&D.removeControl(g)}},[]),g}function $I(i){const t=sg(({mapLib:a})=>new a.AttributionControl(i),{position:i.position});return ie.useEffect(()=>{nf(t._container,i.style)},[i.style]),null}ie.memo($I);function YI(i){const t=sg(({mapLib:a})=>new a.FullscreenControl({container:i.containerId&&document.getElementById(i.containerId)}),{position:i.position});return ie.useEffect(()=>{nf(t._controlContainer,i.style)},[i.style]),null}ie.memo(YI);function qI(i,t){const a=ie.useRef({props:i}),d=sg(({mapLib:f})=>{const g=new f.GeolocateControl(i),_=g._setupUI;return g._setupUI=()=>{g._container.hasChildNodes()||_()},g.on("geolocate",c=>{a.current.props.onGeolocate?.(c)}),g.on("error",c=>{a.current.props.onError?.(c)}),g.on("outofmaxbounds",c=>{a.current.props.onOutOfMaxBounds?.(c)}),g.on("trackuserlocationstart",c=>{a.current.props.onTrackUserLocationStart?.(c)}),g.on("trackuserlocationend",c=>{a.current.props.onTrackUserLocationEnd?.(c)}),g},{position:i.position});return a.current.props=i,ie.useImperativeHandle(t,()=>d,[]),ie.useEffect(()=>{nf(d._container,i.style)},[i.style]),null}ie.memo(ie.forwardRef(qI));function HI(i){const t=sg(({mapLib:a})=>new a.NavigationControl(i),{position:i.position});return ie.useEffect(()=>{nf(t._container,i.style)},[i.style]),null}const WI=ie.memo(HI);function XI(i){const t=sg(({mapLib:g})=>new g.ScaleControl(i),{position:i.position}),a=ie.useRef(i),d=a.current;a.current=i;const{style:f}=i;return i.maxWidth!==void 0&&i.maxWidth!==d.maxWidth&&(t.options.maxWidth=i.maxWidth),i.unit!==void 0&&i.unit!==d.unit&&t.setUnit(i.unit),ie.useEffect(()=>{nf(t._container,f)},[f]),null}ie.memo(XI);function QI(i){const t=sg(({mapLib:a})=>new a.TerrainControl(i),{position:i.position});return ie.useEffect(()=>{nf(t._container,i.style)},[i.style]),null}ie.memo(QI);function KI(i){const t=sg(({mapLib:a})=>new a.LogoControl(i),{position:i.position});return ie.useEffect(()=>{nf(t._container,i.style)},[i.style]),null}ie.memo(KI);function tx(i,t){if(!i)throw new Error(t)}let JI=0;function eR(i,t,a){if(i.style&&i.style._loaded){const d={...a};return delete d.id,delete d.children,i.addSource(t,d),i.getSource(t)}return null}function tR(i,t,a){tx(t.id===a.id,"source id changed"),tx(t.type===a.type,"source type changed");let d="",f=0;for(const _ in t)_!=="children"&&_!=="id"&&!qs(a[_],t[_])&&(d=_,f++);if(!f)return;const g=t.type;if(g==="geojson")i.setData(t.data);else if(g==="image")i.updateImage({url:t.url,coordinates:t.coordinates});else switch(d){case"coordinates":i.setCoordinates?.(t.coordinates);break;case"url":i.setUrl?.(t.url);break;case"tiles":i.setTiles?.(t.tiles);break;default:console.warn(`Unable to update <Source> prop: ${d}`)}}function nR(i){const t=ie.useContext(Wy).map.getMap(),a=ie.useRef(i),[,d]=ie.useState(0),f=ie.useMemo(()=>i.id||`jsx-source-${JI++}`,[]);ie.useEffect(()=>{if(t){const _=()=>setTimeout(()=>d(c=>c+1),0);return t.on("styledata",_),_(),()=>{if(t.off("styledata",_),t.style&&t.style._loaded&&t.getSource(f)){const c=t.getStyle()?.layers;if(c)for(const A of c)A.source===f&&t.removeLayer(A.id);t.removeSource(f)}}}},[t]);let g=t&&t.style&&t.getSource(f);return g?tR(g,i,a.current):g=eR(t,f,i),a.current=i,g&&ie.Children.map(i.children,_=>_&&ie.cloneElement(_,{source:f}))||null}function iR(i,t,a,d){if(tx(a.id===d.id,"layer id changed"),tx(a.type===d.type,"layer type changed"),a.type==="custom"||d.type==="custom")return;const{layout:f={},paint:g={},filter:_,minzoom:c,maxzoom:A,beforeId:D}=a;if(D!==d.beforeId&&i.moveLayer(t,D),f!==d.layout){const O=d.layout||{};for(const z in f)qs(f[z],O[z])||i.setLayoutProperty(t,z,f[z]);for(const z in O)f.hasOwnProperty(z)||i.setLayoutProperty(t,z,void 0)}if(g!==d.paint){const O=d.paint||{};for(const z in g)qs(g[z],O[z])||i.setPaintProperty(t,z,g[z]);for(const z in O)g.hasOwnProperty(z)||i.setPaintProperty(t,z,void 0)}qs(_,d.filter)||i.setFilter(t,_),(c!==d.minzoom||A!==d.maxzoom)&&i.setLayerZoomRange(t,c,A)}function rR(i,t,a){if(i.style&&i.style._loaded&&(!("source"in a)||i.getSource(a.source))){const d={...a,id:t};delete d.beforeId,i.addLayer(d,a.beforeId)}}let aR=0;function GT(i){const t=ie.useContext(Wy).map.getMap(),a=ie.useRef(i),[,d]=ie.useState(0),f=ie.useMemo(()=>i.id||`jsx-layer-${aR++}`,[]);if(ie.useEffect(()=>{if(t){const _=()=>d(c=>c+1);return t.on("styledata",_),_(),()=>{t.off("styledata",_),t.style&&t.style._loaded&&t.getLayer(f)&&t.removeLayer(f)}}},[t]),t&&t.style&&t.getLayer(f))try{iR(t,f,i,a.current)}catch(_){console.warn(_)}else rR(t,f,i);return a.current=i,null}var Zb={exports:{}};var oR=Zb.exports,ZT;function sR(){return ZT||(ZT=1,function(i,t){(function(a,d){i.exports=d()})(oR,function(){var a={},d={};function f(_,c,A){if(d[_]=A,_==="index"){var D="var sharedModule = {}; ("+d.shared+")(sharedModule); ("+d.worker+")(sharedModule);",O={};return d.shared(O),d.index(a,O),typeof window<"u"&&a.setWorkerUrl(window.URL.createObjectURL(new Blob([D],{type:"text/javascript"}))),a}}f("shared",["exports"],function(_){function c(s,e,r,h){return new(r||(r=Promise))(function(p,v){function x(k){try{C(h.next(k))}catch(P){v(P)}}function E(k){try{C(h.throw(k))}catch(P){v(P)}}function C(k){var P;k.done?p(k.value):(P=k.value,P instanceof r?P:new r(function(j){j(P)})).then(x,E)}C((h=h.apply(s,e||[])).next())})}function A(s,e){this.x=s,this.y=e}function D(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var O,z;typeof SuppressedError=="function"&&SuppressedError,A.prototype={clone(){return new A(this.x,this.y)},add(s){return this.clone()._add(s)},sub(s){return this.clone()._sub(s)},multByPoint(s){return this.clone()._multByPoint(s)},divByPoint(s){return this.clone()._divByPoint(s)},mult(s){return this.clone()._mult(s)},div(s){return this.clone()._div(s)},rotate(s){return this.clone()._rotate(s)},rotateAround(s,e){return this.clone()._rotateAround(s,e)},matMult(s){return this.clone()._matMult(s)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(s){return this.x===s.x&&this.y===s.y},dist(s){return Math.sqrt(this.distSqr(s))},distSqr(s){const e=s.x-this.x,r=s.y-this.y;return e*e+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith(s){return this.angleWithSep(s.x,s.y)},angleWithSep(s,e){return Math.atan2(this.x*e-this.y*s,this.x*s+this.y*e)},_matMult(s){const e=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=e,this},_add(s){return this.x+=s.x,this.y+=s.y,this},_sub(s){return this.x-=s.x,this.y-=s.y,this},_mult(s){return this.x*=s,this.y*=s,this},_div(s){return this.x/=s,this.y/=s,this},_multByPoint(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint(s){return this.x/=s.x,this.y/=s.y,this},_unit(){return this._div(this.mag()),this},_perp(){const s=this.y;return this.y=this.x,this.x=-s,this},_rotate(s){const e=Math.cos(s),r=Math.sin(s),h=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=h,this},_rotateAround(s,e){const r=Math.cos(s),h=Math.sin(s),p=e.y+h*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-h*(this.y-e.y),this.y=p,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:A},A.convert=function(s){if(s instanceof A)return s;if(Array.isArray(s))return new A(+s[0],+s[1]);if(s.x!==void 0&&s.y!==void 0)return new A(+s.x,+s.y);throw new Error("Expected [x, y] or {x, y} point format")};var V=function(){if(z)return O;function s(e,r,h,p){this.cx=3*e,this.bx=3*(h-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(p-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=h,this.p2y=p}return z=1,O=s,s.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,r){if(r===void 0&&(r=1e-6),e<0)return 0;if(e>1)return 1;for(var h=e,p=0;p<8;p++){var v=this.sampleCurveX(h)-e;if(Math.abs(v)<r)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=v/x}var E=0,C=1;for(h=e,p=0;p<20&&(v=this.sampleCurveX(h),!(Math.abs(v-e)<r));p++)e>v?E=h:C=h,h=.5*(C-E)+E;return h},solve:function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))}},O}(),H=D(V);let ne,ae;function q(){return ne==null&&(ne=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ne}function he(){if(ae==null&&(ae=!1,q())){const e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let h=0;h<5*5;h++){const p=4*h;e.fillStyle=`rgb(${p},${p+1},${p+2})`,e.fillRect(h%5,Math.floor(h/5),1,1)}const r=e.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&r[h]!==h){ae=!0;break}}}return ae||!1}var Ae=1e-6,Ee=typeof Float32Array<"u"?Float32Array:Array;function Fe(){var s=new Ee(9);return Ee!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function De(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function ke(){var s=new Ee(3);return Ee!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function ze(s){var e=s[0],r=s[1],h=s[2];return Math.sqrt(e*e+r*r+h*h)}function rt(s,e,r){var h=new Ee(3);return h[0]=s,h[1]=e,h[2]=r,h}function Se(s,e,r){return s[0]=e[0]+r[0],s[1]=e[1]+r[1],s[2]=e[2]+r[2],s}function nt(s,e,r){return s[0]=e[0]*r,s[1]=e[1]*r,s[2]=e[2]*r,s}function Mt(s,e,r){var h=e[0],p=e[1],v=e[2],x=r[0],E=r[1],C=r[2];return s[0]=p*C-v*E,s[1]=v*x-h*C,s[2]=h*E-p*x,s}var Ct,Ft=ze;function Ut(s,e,r){var h=e[0],p=e[1],v=e[2],x=e[3];return s[0]=r[0]*h+r[4]*p+r[8]*v+r[12]*x,s[1]=r[1]*h+r[5]*p+r[9]*v+r[13]*x,s[2]=r[2]*h+r[6]*p+r[10]*v+r[14]*x,s[3]=r[3]*h+r[7]*p+r[11]*v+r[15]*x,s}function Gt(){var s=new Ee(4);return Ee!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function Ge(s,e,r,h){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",v=Math.PI/360;e*=v,h*=v,r*=v;var x=Math.sin(e),E=Math.cos(e),C=Math.sin(r),k=Math.cos(r),P=Math.sin(h),j=Math.cos(h);switch(p){case"xyz":s[0]=x*k*j+E*C*P,s[1]=E*C*j-x*k*P,s[2]=E*k*P+x*C*j,s[3]=E*k*j-x*C*P;break;case"xzy":s[0]=x*k*j-E*C*P,s[1]=E*C*j-x*k*P,s[2]=E*k*P+x*C*j,s[3]=E*k*j+x*C*P;break;case"yxz":s[0]=x*k*j+E*C*P,s[1]=E*C*j-x*k*P,s[2]=E*k*P-x*C*j,s[3]=E*k*j+x*C*P;break;case"yzx":s[0]=x*k*j+E*C*P,s[1]=E*C*j+x*k*P,s[2]=E*k*P-x*C*j,s[3]=E*k*j-x*C*P;break;case"zxy":s[0]=x*k*j-E*C*P,s[1]=E*C*j+x*k*P,s[2]=E*k*P+x*C*j,s[3]=E*k*j-x*C*P;break;case"zyx":s[0]=x*k*j-E*C*P,s[1]=E*C*j+x*k*P,s[2]=E*k*P-x*C*j,s[3]=E*k*j+x*C*P;break;default:throw new Error("Unknown angle order "+p)}return s}function ct(){var s=new Ee(2);return Ee!=Float32Array&&(s[0]=0,s[1]=0),s}function St(s,e){var r=new Ee(2);return r[0]=s,r[1]=e,r}ke(),Ct=new Ee(4),Ee!=Float32Array&&(Ct[0]=0,Ct[1]=0,Ct[2]=0,Ct[3]=0),ke(),rt(1,0,0),rt(0,1,0),Gt(),Gt(),Fe(),ct();const pt=8192;function Vt(s,e,r){return e*(pt/(s.tileSize*Math.pow(2,r-s.tileID.overscaledZ)))}function Oe(s,e){return(s%e+e)%e}function et(s,e,r){return s*(1-r)+e*r}function bt(s){if(s<=0)return 0;if(s>=1)return 1;const e=s*s,r=e*s;return 4*(s<.5?r:3*(s-e)+r-.75)}function Tt(s,e,r,h){const p=new H(s,e,r,h);return v=>p.solve(v)}const Nt=Tt(.25,.1,.25,1);function zt(s,e,r){return Math.min(r,Math.max(e,s))}function Kt(s,e,r){const h=r-e,p=((s-e)%h+h)%h+e;return p===e?r:p}function rn(s,...e){for(const r of e)for(const h in r)s[h]=r[h];return s}let Tn=1;function qi(s,e,r){const h={};for(const p in s)h[p]=e.call(this,s[p],p,s);return h}function tr(s,e,r){const h={};for(const p in s)e.call(this,s[p],p,s)&&(h[p]=s[p]);return h}function Ri(s){return Array.isArray(s)?s.map(Ri):typeof s=="object"&&s?qi(s,Ri):s}const Hr={};function bn(s){Hr[s]||(typeof console<"u"&&console.warn(s),Hr[s]=!0)}function xn(s,e,r){return(r.y-s.y)*(e.x-s.x)>(e.y-s.y)*(r.x-s.x)}function gr(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Wn=null;function ba(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const oa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function jr(s,e,r,h,p){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(s,{timestamp:0});try{const x=v?.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const E=x.startsWith("BGR"),C=new Uint8ClampedArray(h*p*4);if(yield v.copyTo(C,function(k,P,j,U,G){const Z=4*Math.max(-P,0),X=(Math.max(0,j)-j)*U*4+Z,ee=4*U,ce=Math.max(0,P),ve=Math.max(0,j);return{rect:{x:ce,y:ve,width:Math.min(k.width,P+U)-ce,height:Math.min(k.height,j+G)-ve},layout:[{offset:X,stride:ee}]}}(s,e,r,h,p)),E)for(let k=0;k<C.length;k+=4){const P=C[k];C[k]=C[k+2],C[k+2]=P}return C}finally{v.close()}})}let Wr,xa;function Qa(s,e,r,h){return s.addEventListener(e,r,h),{unsubscribe:()=>{s.removeEventListener(e,r,h)}}}function ki(s){return s*Math.PI/180}function Sr(s){return s/Math.PI*180}const Cn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},sa={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},la="AbortError";function Au(){return new Error(la)}const il={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Mu(s){return il.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const Dc="global-dispatcher";class wa extends Error{constructor(e,r,h,p){super(`AJAXError: ${r} (${e}): ${h}`),this.status=e,this.statusText=r,this.url=h,this.body=p}}const zi=()=>gr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ie=function(s,e){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const h=Mu(s.url);if(h)return h(s,e);if(gr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:Dc},e)}if(!(/^file:/.test(r=s.url)||/^file:/.test(zi())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,p){return c(this,void 0,void 0,function*(){const v=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:zi(),signal:p.signal});let x,E;h.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");try{x=yield fetch(v)}catch(k){throw new wa(0,k.message,h.url,new Blob)}if(!x.ok){const k=yield x.blob();throw new wa(x.status,x.statusText,h.url,k)}E=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const C=yield E;if(p.signal.aborted)throw Au();return{data:C,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(s,e);if(gr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:Dc},e)}var r;return function(h,p){return new Promise((v,x)=>{var E;const C=new XMLHttpRequest;C.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(C.responseType="arraybuffer");for(const k in h.headers)C.setRequestHeader(k,h.headers[k]);h.type==="json"&&(C.responseType="text",!((E=h.headers)===null||E===void 0)&&E.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=h.credentials==="include",C.onerror=()=>{x(new Error(C.statusText))},C.onload=()=>{if(!p.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let k=C.response;if(h.type==="json")try{k=JSON.parse(C.response)}catch(P){return void x(P)}v({data:k,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const k=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});x(new wa(C.status,C.statusText,h.url,k))}},p.signal.addEventListener("abort",()=>{C.abort(),x(Au())}),C.send(h.body)})}(s,e)};function K(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const e=new URL(s),r=window.location;return e.protocol===r.protocol&&e.host===r.host}function te(s,e,r){r[s]&&r[s].indexOf(e)!==-1||(r[s]=r[s]||[],r[s].push(e))}function le(s,e,r){if(r&&r[s]){const h=r[s].indexOf(e);h!==-1&&r[s].splice(h,1)}}class xe{constructor(e,r={}){rn(this,r),this.type=e}}class Te extends xe{constructor(e,r={}){super("error",rn({error:e},r))}}class Ue{on(e,r){return this._listeners=this._listeners||{},te(e,r,this._listeners),{unsubscribe:()=>{this.off(e,r)}}}off(e,r){return le(e,r,this._listeners),le(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},te(e,r,this._oneTimeListeners),this):new Promise(h=>this.once(e,h))}fire(e,r){typeof e=="string"&&(e=new xe(e,r||{}));const h=e.type;if(this.listens(h)){e.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const E of p)E.call(this,e);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const E of v)le(h,E,this._oneTimeListeners),E.call(this,e);const x=this._eventedParent;x&&(rn(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(e))}else e instanceof Te&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const je=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Qe(s,e){const r={};for(const h in s)h!=="ref"&&(r[h]=s[h]);return je.forEach(h=>{h in e&&(r[h]=e[h])}),r}function Je(s,e){if(Array.isArray(s)){if(!Array.isArray(e)||s.length!==e.length)return!1;for(let r=0;r<s.length;r++)if(!Je(s[r],e[r]))return!1;return!0}if(typeof s=="object"&&s!==null&&e!==null){if(typeof e!="object"||Object.keys(s).length!==Object.keys(e).length)return!1;for(const r in s)if(!Je(s[r],e[r]))return!1;return!0}return s===e}function it(s,e){s.push(e)}function Lt(s,e,r){it(r,{command:"addSource",args:[s,e[s]]})}function Yt(s,e,r){it(e,{command:"removeSource",args:[s]}),r[s]=!0}function on(s,e,r,h){Yt(s,r,h),Lt(s,e,r)}function Hi(s,e,r){let h;for(h in s[r])if(Object.prototype.hasOwnProperty.call(s[r],h)&&h!=="data"&&!Je(s[r][h],e[r][h]))return!1;for(h in e[r])if(Object.prototype.hasOwnProperty.call(e[r],h)&&h!=="data"&&!Je(s[r][h],e[r][h]))return!1;return!0}function Sn(s,e,r,h,p,v){s=s||{},e=e||{};for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&(Je(s[x],e[x])||r.push({command:v,args:[h,x,e[x],p]}));for(const x in e)Object.prototype.hasOwnProperty.call(e,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(Je(s[x],e[x])||r.push({command:v,args:[h,x,e[x],p]}))}function Yn(s){return s.id}function hi(s,e){return s[e.id]=e,s}class vt{constructor(e,r,h,p){this.message=(e?`${e}: `:"")+h,p&&(this.identifier=p),r!=null&&r.__line__&&(this.line=r.__line__)}}function di(s,...e){for(const r of e)for(const h in r)s[h]=r[h];return s}class fi extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}class lr{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[h,p]of r)this.bindings[h]=p}concat(e){return new lr(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const qn={kind:"null"},dt={kind:"number"},kt={kind:"string"},qt={kind:"boolean"},ca={kind:"color"},Ic={kind:"projectionDefinition"},Br={kind:"object"},tn={kind:"value"},Ka={kind:"collator"},Ul={kind:"formatted"},Po={kind:"padding"},ua={kind:"colorArray"},zo={kind:"numberArray"},Fo={kind:"resolvedImage"},Wi={kind:"variableAnchorOffsetCollection"};function Pa(s,e){return{kind:"array",itemType:s,N:e}}function pi(s){if(s.kind==="array"){const e=pi(s.itemType);return typeof s.N=="number"?`array<${e}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${e}>`}return s.kind}const Rc=[qn,dt,kt,qt,ca,Ic,Ul,Br,Pa(tn),Po,zo,ua,Fo,Wi];function Ta(s,e){if(e.kind==="error")return null;if(s.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Ta(s.itemType,e.itemType))&&(typeof s.N!="number"||s.N===e.N))return null}else{if(s.kind===e.kind)return null;if(s.kind==="value"){for(const r of Rc)if(!Ta(r,e))return null}}return`Expected ${pi(s)} but found ${pi(e)} instead.`}function kh(s,e){return e.some(r=>r.kind===s.kind)}function Fi(s,e){return e.some(r=>r==="null"?s===null:r==="array"?Array.isArray(s):r==="object"?s&&!Array.isArray(s)&&typeof s=="object":r===typeof s)}function rl(s,e){return s.kind==="array"&&e.kind==="array"?s.itemType.kind===e.itemType.kind&&typeof s.N=="number":s.kind===e.kind}const Ip=.96422,al=.82521,Cu=4/29,za=6/29,Ja=3*za*za,Rp=za*za*za,u0=Math.PI/180,lf=180/Math.PI;function kp(s){return(s%=360)<0&&(s+=360),s}function Oh([s,e,r,h]){let p,v;const x=Fa((.2225045*(s=Op(s))+.7168786*(e=Op(e))+.0606169*(r=Op(r)))/1);s===e&&e===r?p=v=x:(p=Fa((.4360747*s+.3850649*e+.1430804*r)/Ip),v=Fa((.0139322*s+.0971045*e+.7141733*r)/al));const E=116*x-16;return[E<0?0:E,500*(p-x),200*(x-v),h]}function Op(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Fa(s){return s>Rp?Math.pow(s,1/3):s/Ja+Cu}function cf([s,e,r,h]){let p=(s+16)/116,v=isNaN(e)?p:p+e/500,x=isNaN(r)?p:p-r/200;return p=1*Lh(p),v=Ip*Lh(v),x=al*Lh(x),[uf(3.1338561*v-1.6168667*p-.4906146*x),uf(-.9787684*v+1.9161415*p+.033454*x),uf(.0719453*v-.2289914*p+1.4052427*x),h]}function uf(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Lh(s){return s>za?s*s*s:Ja*(s-Cu)}const kc=Object.hasOwn||function(s,e){return Object.prototype.hasOwnProperty.call(s,e)};function bs(s,e){return kc(s,e)?s[e]:void 0}function Nh(s){return parseInt(s.padEnd(2,s),16)/255}function Oc(s,e){return xs(e?s/100:s,0,1)}function xs(s,e,r){return Math.min(Math.max(e,s),r)}function Lp(s){return!s.some(Number.isNaN)}const fg={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ws(s,e,r){return s+r*(e-s)}function Lc(s,e,r){return s.map((h,p)=>ws(h,e[p],r))}class Dn{constructor(e,r,h,p=1,v=!0){this.r=e,this.g=r,this.b=h,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[e,r,h,p]))}static parse(e){if(e instanceof Dn)return e;if(typeof e!="string")return;const r=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=bs(fg,h);if(p){const[x,E,C]=p;return[x/255,E/255,C/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let E=1;return[Nh(h.slice(E,E+=x)),Nh(h.slice(E,E+=x)),Nh(h.slice(E,E+=x)),Nh(h.slice(E,E+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[E,C,k,P,j,U,G,Z,X,ee,ce,ve]=x,fe=[P||" ",G||" ",ee].join("");if(fe==="  "||fe==="  /"||fe===",,"||fe===",,,"){const ge=[k,U,X].join(""),Ne=ge==="%%%"?100:ge===""?255:0;if(Ne){const Pe=[xs(+C/Ne,0,1),xs(+j/Ne,0,1),xs(+Z/Ne,0,1),ce?Oc(+ce,ve):1];if(Lp(Pe))return Pe}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,E,C,k,P,j,U,G,Z]=v,X=[C||" ",P||" ",U].join("");if(X==="  "||X==="  /"||X===",,"||X===",,,"){const ee=[+E,xs(+k,0,100),xs(+j,0,100),G?Oc(+G,Z):1];if(Lp(ee))return function([ce,ve,fe,ge]){function Ne(Pe){const He=(Pe+ce/30)%12,ft=ve*Math.min(fe,1-fe);return fe-ft*Math.max(-1,Math.min(He-3,9-He,1))}return ce=kp(ce),ve/=100,fe/=100,[Ne(0),Ne(8),Ne(4),ge]}(ee)}}}(e);return r?new Dn(...r,!1):void 0}get rgb(){const{r:e,g:r,b:h,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[e/v,r/v,h/v,p])}get hcl(){return this.overwriteGetter("hcl",function(e){const[r,h,p,v]=Oh(e),x=Math.sqrt(h*h+p*p);return[Math.round(1e4*x)?kp(Math.atan2(p,h)*lf):NaN,x,r,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Oh(this.rgb))}overwriteGetter(e,r){return Object.defineProperty(this,e,{value:r}),r}toString(){const[e,r,h,p]=this.rgb;return`rgba(${[e,r,h].map(v=>Math.round(255*v)).join(",")},${p})`}static interpolate(e,r,h,p="rgb"){switch(p){case"rgb":{const[v,x,E,C]=Lc(e.rgb,r.rgb,h);return new Dn(v,x,E,C,!1)}case"hcl":{const[v,x,E,C]=e.hcl,[k,P,j,U]=r.hcl;let G,Z;if(isNaN(v)||isNaN(k))isNaN(v)?isNaN(k)?G=NaN:(G=k,E!==1&&E!==0||(Z=P)):(G=v,j!==1&&j!==0||(Z=x));else{let fe=k-v;k>v&&fe>180?fe-=360:k<v&&v-k>180&&(fe+=360),G=v+h*fe}const[X,ee,ce,ve]=function([fe,ge,Ne,Pe]){return fe=isNaN(fe)?0:fe*u0,cf([Ne,Math.cos(fe)*ge,Math.sin(fe)*ge,Pe])}([G,Z??ws(x,P,h),ws(E,j,h),ws(C,U,h)]);return new Dn(X,ee,ce,ve,!1)}case"lab":{const[v,x,E,C]=cf(Lc(e.lab,r.lab,h));return new Dn(v,x,E,C,!1)}}}}Dn.black=new Dn(0,0,0,1),Dn.white=new Dn(1,1,1,1),Dn.transparent=new Dn(0,0,0,0),Dn.red=new Dn(1,0,0,1);class Sa{constructor(e,r,h){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const mn=["bottom","center","top"];class Ts{constructor(e,r,h,p,v,x){this.text=e,this.image=r,this.scale=h,this.fontStack=p,this.textColor=v,this.verticalAlign=x}}class nr{constructor(e){this.sections=e}static fromString(e){return new nr([new Ts(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof nr?e:nr.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class cr{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof cr)return e;if(typeof e=="number")return new cr([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const r of e)if(typeof r!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new cr(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,h){return new cr(Lc(e.values,r.values,h))}}class ur{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ur)return e;if(typeof e=="number")return new ur([e]);if(Array.isArray(e)){for(const r of e)if(typeof r!="number")return;return new ur(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,h){return new ur(Lc(e.values,r.values,h))}}class yr{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof yr)return e;if(typeof e=="string"){const h=Dn.parse(e);return h?new yr([h]):void 0}if(!Array.isArray(e))return;const r=[];for(const h of e){if(typeof h!="string")return;const p=Dn.parse(h);if(!p)return;r.push(p)}return new yr(r)}toString(){return JSON.stringify(this.values)}static interpolate(e,r,h,p="rgb"){const v=[];if(e.values.length!=r.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${r.values.length}), cannot interpolate.`);for(let x=0;x<e.values.length;x++)v.push(Dn.interpolate(e.values[x],r.values[x],h,p));return new yr(v)}}class li extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Ph=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Er{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Er)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let r=0;r<e.length;r+=2){const h=e[r],p=e[r+1];if(typeof h!="string"||!Ph.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Er(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,h){const p=e.values,v=r.values;if(p.length!==v.length)throw new li(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${r.toString()}`);const x=[];for(let E=0;E<p.length;E+=2){if(p[E]!==v[E])throw new li(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${p[E]}, to[${E}]: ${v[E]}`);x.push(p[E]);const[C,k]=p[E+1],[P,j]=v[E+1];x.push([ws(C,P,h),ws(k,j,h)])}return new Er(x)}}class ir{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ir({name:e,available:!1}):null}}class Vr{constructor(e,r,h){this.from=e,this.to=r,this.transition=h}static interpolate(e,r,h){return new Vr(e,r,h)}static parse(e){return e instanceof Vr?e:Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"?new Vr(e[0],e[1],e[2]):typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number"?new Vr(e.from,e.to,e.transition):typeof e=="string"?new Vr(e,e,1):void 0}}function Du(s,e,r,h){return typeof s=="number"&&s>=0&&s<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[s,e,r,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[s,e,r,h]:[s,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ea(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Vr||s instanceof Dn||s instanceof Sa||s instanceof nr||s instanceof cr||s instanceof ur||s instanceof yr||s instanceof Er||s instanceof ir)return!0;if(Array.isArray(s)){for(const e of s)if(!Ea(e))return!1;return!0}if(typeof s=="object"){for(const e in s)if(!Ea(s[e]))return!1;return!0}return!1}function mi(s){if(s===null)return qn;if(typeof s=="string")return kt;if(typeof s=="boolean")return qt;if(typeof s=="number")return dt;if(s instanceof Dn)return ca;if(s instanceof Vr)return Ic;if(s instanceof Sa)return Ka;if(s instanceof nr)return Ul;if(s instanceof cr)return Po;if(s instanceof ur)return zo;if(s instanceof yr)return ua;if(s instanceof Er)return Wi;if(s instanceof ir)return Fo;if(Array.isArray(s)){const e=s.length;let r;for(const h of s){const p=mi(h);if(r){if(r===p)continue;r=tn;break}r=p}return Pa(r||tn,e)}return Br}function ol(s){const e=typeof s;return s===null?"":e==="string"||e==="number"||e==="boolean"?String(s):s instanceof Dn||s instanceof Vr||s instanceof nr||s instanceof cr||s instanceof ur||s instanceof yr||s instanceof Er||s instanceof ir?s.toString():JSON.stringify(s)}class sl{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Ea(e[1]))return r.error("invalid value");const h=e[1];let p=mi(h);const v=r.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new sl(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Gl={string:kt,number:dt,boolean:qt,object:Br};class Xr{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let h,p=1;const v=e[0];if(v==="array"){let E,C;if(e.length>2){const k=e[1];if(typeof k!="string"||!(k in Gl)||k==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);E=Gl[k],p++}else E=tn;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);C=e[2],p++}h=Pa(E,C)}else{if(!Gl[v])throw new Error(`Types doesn't contain name = ${v}`);h=Gl[v]}const x=[];for(;p<e.length;p++){const E=r.parse(e[p],p,tn);if(!E)return null;x.push(E)}return new Xr(h,x)}evaluate(e){for(let r=0;r<this.args.length;r++){const h=this.args[r].evaluate(e);if(!Ta(this.type,mi(h)))return h;if(r===this.args.length-1)throw new li(`Expected value to be of type ${pi(this.type)}, but found ${pi(mi(h))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const xi={"to-boolean":qt,"to-color":ca,"to-number":dt,"to-string":kt};class Xi{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const h=e[0];if(!xi[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&e.length!==2)return r.error("Expected one argument.");const p=xi[h],v=[];for(let x=1;x<e.length;x++){const E=r.parse(e[x],x,tn);if(!E)return null;v.push(E)}return new Xi(p,v)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let r,h;for(const p of this.args){if(r=p.evaluate(e),h=null,r instanceof Dn)return r;if(typeof r=="string"){const v=e.parseColor(r);if(v)return v}else if(Array.isArray(r)&&(h=r.length<3||r.length>4?`Invalid rgba value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:Du(r[0],r[1],r[2],r[3]),!h))return new Dn(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new li(h||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const h of this.args){r=h.evaluate(e);const p=cr.parse(r);if(p)return p}throw new li(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"numberArray":{let r;for(const h of this.args){r=h.evaluate(e);const p=ur.parse(r);if(p)return p}throw new li(`Could not parse numberArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"colorArray":{let r;for(const h of this.args){r=h.evaluate(e);const p=yr.parse(r);if(p)return p}throw new li(`Could not parse colorArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const h of this.args){r=h.evaluate(e);const p=Er.parse(r);if(p)return p}throw new li(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const h of this.args){if(r=h.evaluate(e),r===null)return 0;const p=Number(r);if(!isNaN(p))return p}throw new li(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return nr.fromString(ol(this.args[0].evaluate(e)));case"resolvedImage":return ir.fromString(ol(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return ol(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const En=["Unknown","Point","LineString","Polygon"];class hn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?En[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let r=this._parseColorCache.get(e);return r||(r=Dn.parse(e),this._parseColorCache.set(e,r)),r}}class Ss{constructor(e,r,h=[],p,v=new lr,x=[]){this.registry=e,this.path=h,this.key=h.map(E=>`[${E}]`).join(""),this.scope=v,this.errors=x,this.expectedType=p,this._isConstant=r}parse(e,r,h,p,v={}){return r?this.concat(r,h,p)._parse(e,v):this._parse(e,v)}_parse(e,r){function h(p,v,x){return x==="assert"?new Xr(v,[p]):x==="coerce"?new Xi(v,[p]):p}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=e[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(e,this);if(!x)return null;if(this.expectedType){const E=this.expectedType,C=x.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||C.kind!=="value"){if(E.kind==="projectionDefinition"&&["string","array"].includes(C.kind)||["color","formatted","resolvedImage"].includes(E.kind)&&["value","string"].includes(C.kind)||["padding","numberArray"].includes(E.kind)&&["value","number","array"].includes(C.kind)||E.kind==="colorArray"&&["value","string","array"].includes(C.kind)||E.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(C.kind))x=h(x,E,r.typeAnnotation||"coerce");else if(this.checkSubtype(E,C))return null}else x=h(x,E,r.typeAnnotation||"assert")}if(!(x instanceof sl)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const E=new hn;try{x=new sl(x.type,x.evaluate(E))}catch(C){return this.error(C.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,h){const p=typeof e=="number"?this.path.concat(e):this.path,v=h?this.scope.concat(h):this.scope;return new Ss(this.registry,this._isConstant,p,r||null,v,this.errors)}error(e,...r){const h=`${this.key}${r.map(p=>`[${p}]`).join("")}`;this.errors.push(new fi(h,e))}checkSubtype(e,r){const h=Ta(e,r);return h&&this.error(h),h}}class Pn{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const h=[];for(let v=1;v<e.length-1;v+=2){const x=e[v];if(typeof x!="string")return r.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return r.error("Variable names must contain only alphanumeric characters or '_'.",v);const E=r.parse(e[v+1],v+1);if(!E)return null;h.push([x,E])}const p=r.parse(e[e.length-1],e.length-1,r.expectedType,h);return p?new Pn(h,p):null}outputDefined(){return this.result.outputDefined()}}class Zl{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const h=e[1];return r.scope.has(h)?new Zl(h,r.scope.get(h)):r.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class eo{constructor(e,r,h){this.type=e,this.index=r,this.input=h}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const h=r.parse(e[1],1,dt),p=r.parse(e[2],2,Pa(r.expectedType||tn));return h&&p?new eo(p.type.itemType,h,p):null}evaluate(e){const r=this.index.evaluate(e),h=this.input.evaluate(e);if(r<0)throw new li(`Array index out of bounds: ${r} < 0.`);if(r>=h.length)throw new li(`Array index out of bounds: ${r} > ${h.length-1}.`);if(r!==Math.floor(r))throw new li(`Array index must be an integer, but found ${r} instead.`);return h[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class ll{constructor(e,r){this.type=qt,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const h=r.parse(e[1],1,tn),p=r.parse(e[2],2,tn);return h&&p?kh(h.type,[qt,kt,dt,qn,tn])?new ll(h,p):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${pi(h.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!h)return!1;if(!Fi(r,["boolean","string","number","null"]))throw new li(`Expected first argument to be of type boolean, string, number or null, but found ${pi(mi(r))} instead.`);if(!Fi(h,["string","array"]))throw new li(`Expected second argument to be of type array or string, but found ${pi(mi(h))} instead.`);return h.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Es{constructor(e,r,h){this.type=dt,this.needle=e,this.haystack=r,this.fromIndex=h}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const h=r.parse(e[1],1,tn),p=r.parse(e[2],2,tn);if(!h||!p)return null;if(!kh(h.type,[qt,kt,dt,qn,tn]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${pi(h.type)} instead`);if(e.length===4){const v=r.parse(e[3],3,dt);return v?new Es(h,p,v):null}return new Es(h,p)}evaluate(e){const r=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!Fi(r,["boolean","string","number","null"]))throw new li(`Expected first argument to be of type boolean, string, number or null, but found ${pi(mi(r))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(e)),Fi(h,["string"])){const v=h.indexOf(r,p);return v===-1?-1:[...h.slice(0,v)].length}if(Fi(h,["array"]))return h.indexOf(r,p);throw new li(`Expected second argument to be of type array or string, but found ${pi(mi(h))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class zh{constructor(e,r,h,p,v,x){this.inputType=e,this.type=r,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let h,p;r.expectedType&&r.expectedType.kind!=="value"&&(p=r.expectedType);const v={},x=[];for(let k=2;k<e.length-1;k+=2){let P=e[k];const j=e[k+1];Array.isArray(P)||(P=[P]);const U=r.concat(k);if(P.length===0)return U.error("Expected at least one branch label.");for(const Z of P){if(typeof Z!="number"&&typeof Z!="string")return U.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return U.error("Numeric branch labels must be integer values.");if(h){if(U.checkSubtype(h,mi(Z)))return null}else h=mi(Z);if(v[String(Z)]!==void 0)return U.error("Branch labels must be unique.");v[String(Z)]=x.length}const G=r.parse(j,k,p);if(!G)return null;p=p||G.type,x.push(G)}const E=r.parse(e[1],1,tn);if(!E)return null;const C=r.parse(e[e.length-1],e.length-1,p);return C?E.type.kind!=="value"&&r.concat(1).checkSubtype(h,E.type)?null:new zh(h,p,E,v,x,C):null}evaluate(e){const r=this.input.evaluate(e);return(mi(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class Fh{constructor(e,r,h){this.type=e,this.branches=r,this.otherwise=h}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let h;r.expectedType&&r.expectedType.kind!=="value"&&(h=r.expectedType);const p=[];for(let x=1;x<e.length-1;x+=2){const E=r.parse(e[x],x,qt);if(!E)return null;const C=r.parse(e[x+1],x+1,h);if(!C)return null;p.push([E,C]),h=h||C.type}const v=r.parse(e[e.length-1],e.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new Fh(h,p,v)}evaluate(e){for(const[r,h]of this.branches)if(r.evaluate(e))return h.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,h]of this.branches)e(r),e(h);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}}class jh{constructor(e,r,h,p){this.type=e,this.input=r,this.beginIndex=h,this.endIndex=p}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const h=r.parse(e[1],1,tn),p=r.parse(e[2],2,dt);if(!h||!p)return null;if(!kh(h.type,[Pa(tn),kt,tn]))return r.error(`Expected first argument to be of type array or string, but found ${pi(h.type)} instead`);if(e.length===4){const v=r.parse(e[3],3,dt);return v?new jh(h.type,h,p,v):null}return new jh(h.type,h,p)}evaluate(e){const r=this.input.evaluate(e),h=this.beginIndex.evaluate(e);let p;if(this.endIndex&&(p=this.endIndex.evaluate(e)),Fi(r,["string"]))return[...r].slice(h,p).join("");if(Fi(r,["array"]))return r.slice(h,p);throw new li(`Expected first argument to be of type array or string, but found ${pi(mi(r))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function hf(s,e){const r=s.length-1;let h,p,v=0,x=r,E=0;for(;v<=x;)if(E=Math.floor((v+x)/2),h=s[E],p=s[E+1],h<=e){if(E===r||e<p)return E;v=E+1}else{if(!(h>e))throw new li("Input is not a number.");x=E-1}return 0}class $l{constructor(e,r,h){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const h=r.parse(e[1],1,dt);if(!h)return null;const p=[];let v=null;r.expectedType&&r.expectedType.kind!=="value"&&(v=r.expectedType);for(let x=1;x<e.length;x+=2){const E=x===1?-1/0:e[x],C=e[x+1],k=x,P=x+1;if(typeof E!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(p.length&&p[p.length-1][0]>=E)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const j=r.parse(C,P,v);if(!j)return null;v=v||j.type,p.push([E,j])}return new $l(v,h,p)}evaluate(e){const r=this.labels,h=this.outputs;if(r.length===1)return h[0].evaluate(e);const p=this.input.evaluate(e);if(p<=r[0])return h[0].evaluate(e);const v=r.length;return p>=r[v-1]?h[v-1].evaluate(e):h[hf(r,p)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function pg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var As,Qr,df=function(){if(Qr)return As;function s(e,r,h,p){this.cx=3*e,this.bx=3*(h-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(p-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=h,this.p2y=p}return Qr=1,As=s,s.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,r){if(r===void 0&&(r=1e-6),e<0)return 0;if(e>1)return 1;for(var h=e,p=0;p<8;p++){var v=this.sampleCurveX(h)-e;if(Math.abs(v)<r)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=v/x}var E=0,C=1;for(h=e,p=0;p<20&&(v=this.sampleCurveX(h),!(Math.abs(v-e)<r));p++)e>v?E=h:C=h,h=.5*(C-E)+E;return h},solve:function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))}},As}(),mg=pg(df);class Ur{constructor(e,r,h,p,v){this.type=e,this.operator=r,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,E]of v)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(e,r,h,p){let v=0;if(e.name==="exponential")v=_r(r,e.base,h,p);else if(e.name==="linear")v=_r(r,1,h,p);else if(e.name==="cubic-bezier"){const x=e.controlPoints;v=new mg(x[0],x[1],x[2],x[3]).solve(_r(r,1,h,p))}return v}static parse(e,r){let[h,p,v,...x]=e;if(!Array.isArray(p)||p.length===0)return r.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const k=p[1];if(typeof k!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:k}}else{if(p[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const k=p.slice(1);if(k.length!==4||k.some(P=>typeof P!="number"||P<0||P>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:k}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(v=r.parse(v,2,dt),!v)return null;const E=[];let C=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||r.expectedType==ua?r.expectedType&&r.expectedType.kind!=="value"&&(C=r.expectedType):C=ca;for(let k=0;k<x.length;k+=2){const P=x[k],j=x[k+1],U=k+3,G=k+4;if(typeof P!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(E.length&&E[E.length-1][0]>=P)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const Z=r.parse(j,G,C);if(!Z)return null;C=C||Z.type,E.push([P,Z])}return rl(C,dt)||rl(C,Ic)||rl(C,ca)||rl(C,Po)||rl(C,zo)||rl(C,ua)||rl(C,Wi)||rl(C,Pa(dt))?new Ur(C,h,p,v,E):r.error(`Type ${pi(C)} is not interpolatable.`)}evaluate(e){const r=this.labels,h=this.outputs;if(r.length===1)return h[0].evaluate(e);const p=this.input.evaluate(e);if(p<=r[0])return h[0].evaluate(e);const v=r.length;if(p>=r[v-1])return h[v-1].evaluate(e);const x=hf(r,p),E=Ur.interpolationFactor(this.interpolation,p,r[x],r[x+1]),C=h[x].evaluate(e),k=h[x+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ws(C,k,E);case"color":return Dn.interpolate(C,k,E);case"padding":return cr.interpolate(C,k,E);case"colorArray":return yr.interpolate(C,k,E);case"numberArray":return ur.interpolate(C,k,E);case"variableAnchorOffsetCollection":return Er.interpolate(C,k,E);case"array":return Lc(C,k,E);case"projectionDefinition":return Vr.interpolate(C,k,E)}case"interpolate-hcl":switch(this.type.kind){case"color":return Dn.interpolate(C,k,E,"hcl");case"colorArray":return yr.interpolate(C,k,E,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Dn.interpolate(C,k,E,"lab");case"colorArray":return yr.interpolate(C,k,E,"lab")}}}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function _r(s,e,r,h){const p=h-r,v=s-r;return p===0?0:e===1?v/p:(Math.pow(e,v)-1)/(Math.pow(e,p)-1)}const jo={color:Dn.interpolate,number:ws,padding:cr.interpolate,numberArray:ur.interpolate,colorArray:yr.interpolate,variableAnchorOffsetCollection:Er.interpolate,array:Lc};class Iu{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let h=null;const p=r.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const E of e.slice(1)){const C=r.parse(E,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!C)return null;h=h||C.type,v.push(C)}if(!h)throw new Error("No output type");const x=p&&v.some(E=>Ta(p,E.type));return new Iu(x?tn:h,v)}evaluate(e){let r,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(e),h&&h instanceof ir&&!h.available&&(r||(r=h.name),h=null,p===this.args.length&&(h=r)),h!==null)break;return h}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function Np(s,e){return s==="=="||s==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function ff(s,e,r,h){return h.compare(e,r)===0}function Bo(s,e,r){const h=s!=="=="&&s!=="!=";return class uA{constructor(v,x,E){this.type=qt,this.lhs=v,this.rhs=x,this.collator=E,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const E=v[0];let C=x.parse(v[1],1,tn);if(!C)return null;if(!Np(E,C.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${pi(C.type)}'.`);let k=x.parse(v[2],2,tn);if(!k)return null;if(!Np(E,k.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${pi(k.type)}'.`);if(C.type.kind!==k.type.kind&&C.type.kind!=="value"&&k.type.kind!=="value")return x.error(`Cannot compare types '${pi(C.type)}' and '${pi(k.type)}'.`);h&&(C.type.kind==="value"&&k.type.kind!=="value"?C=new Xr(k.type,[C]):C.type.kind!=="value"&&k.type.kind==="value"&&(k=new Xr(C.type,[k])));let P=null;if(v.length===4){if(C.type.kind!=="string"&&k.type.kind!=="string"&&C.type.kind!=="value"&&k.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(P=x.parse(v[3],3,Ka),!P)return null}return new uA(C,k,P)}evaluate(v){const x=this.lhs.evaluate(v),E=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const C=mi(x),k=mi(E);if(C.kind!==k.kind||C.kind!=="string"&&C.kind!=="number")throw new li(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${C.kind}, ${k.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const C=mi(x),k=mi(E);if(C.kind!=="string"||k.kind!=="string")return e(v,x,E)}return this.collator?r(v,x,E,this.collator.evaluate(v)):e(v,x,E)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const pf=Bo("==",function(s,e,r){return e===r},ff),Pp=Bo("!=",function(s,e,r){return e!==r},function(s,e,r,h){return!ff(0,e,r,h)}),gg=Bo("<",function(s,e,r){return e<r},function(s,e,r,h){return h.compare(e,r)<0}),yg=Bo(">",function(s,e,r){return e>r},function(s,e,r,h){return h.compare(e,r)>0}),mf=Bo("<=",function(s,e,r){return e<=r},function(s,e,r,h){return h.compare(e,r)<=0}),gf=Bo(">=",function(s,e,r){return e>=r},function(s,e,r,h){return h.compare(e,r)>=0});class ja{constructor(e,r,h){this.type=Ka,this.locale=h,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const h=e[1];if(typeof h!="object"||Array.isArray(h))return r.error("Collator options argument must be an object.");const p=r.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,qt);if(!p)return null;const v=r.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,qt);if(!v)return null;let x=null;return h.locale&&(x=r.parse(h.locale,1,kt),!x)?null:new ja(p,v,x)}evaluate(e){return new Sa(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class yf{constructor(e,r,h,p,v){this.type=kt,this.number=e,this.locale=r,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const h=r.parse(e[1],1,dt);if(!h)return null;const p=e[2];if(typeof p!="object"||Array.isArray(p))return r.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=r.parse(p.locale,1,kt),!v))return null;let x=null;if(p.currency&&(x=r.parse(p.currency,1,kt),!x))return null;let E=null;if(p["min-fraction-digits"]&&(E=r.parse(p["min-fraction-digits"],1,dt),!E))return null;let C=null;return p["max-fraction-digits"]&&(C=r.parse(p["max-fraction-digits"],1,dt),!C)?null:new yf(h,v,x,E,C)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Nc{constructor(e){this.type=Ul,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const h=e[1];if(!Array.isArray(h)&&typeof h=="object")return r.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=e.length-1;++x){const E=e[x];if(v&&typeof E=="object"&&!Array.isArray(E)){v=!1;let C=null;if(E["font-scale"]&&(C=r.parse(E["font-scale"],1,dt),!C))return null;let k=null;if(E["text-font"]&&(k=r.parse(E["text-font"],1,Pa(kt)),!k))return null;let P=null;if(E["text-color"]&&(P=r.parse(E["text-color"],1,ca),!P))return null;let j=null;if(E["vertical-align"]){if(typeof E["vertical-align"]=="string"&&!mn.includes(E["vertical-align"]))return r.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${E["vertical-align"]}' instead.`);if(j=r.parse(E["vertical-align"],1,kt),!j)return null}const U=p[p.length-1];U.scale=C,U.font=k,U.textColor=P,U.verticalAlign=j}else{const C=r.parse(e[x],1,tn);if(!C)return null;const k=C.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:C,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Nc(p)}evaluate(e){return new nr(this.sections.map(r=>{const h=r.content.evaluate(e);return mi(h)===Fo?new Ts("",h,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new Ts(ol(h),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)}))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor),r.verticalAlign&&e(r.verticalAlign)}outputDefined(){return!1}}class zp{constructor(e){this.type=Fo,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const h=r.parse(e[1],1,kt);return h?new zp(h):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),h=ir.fromString(r);return h&&e.availableImages&&(h.available=e.availableImages.indexOf(r)>-1),h}eachChild(e){e(this.input)}outputDefined(){return!1}}class Bh{constructor(e){this.type=dt,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const h=r.parse(e[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${pi(h.type)} instead.`):new Bh(h):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new li(`Expected value to be of type string or array, but found ${pi(mi(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Ms=8192;function Fp(s,e){const r=(180+s[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,p=Math.pow(2,e.z);return[Math.round(r*p*Ms),Math.round(h*p*Ms)]}function Pc(s,e){const r=Math.pow(2,e.z);return[(p=(s[0]/Ms+e.x)/r,360*p-180),(h=(s[1]/Ms+e.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,p}function Vh(s,e){s[0]=Math.min(s[0],e[0]),s[1]=Math.min(s[1],e[1]),s[2]=Math.max(s[2],e[0]),s[3]=Math.max(s[3],e[1])}function cl(s,e){return!(s[0]<=e[0]||s[2]>=e[2]||s[1]<=e[1]||s[3]>=e[3])}function _g(s,e,r){const h=s[0]-e[0],p=s[1]-e[1],v=s[0]-r[0],x=s[1]-r[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function Ru(s,e,r,h){return(p=[h[0]-r[0],h[1]-r[1]])[0]*(v=[e[0]-s[0],e[1]-s[1]])[1]-p[1]*v[0]!=0&&!(!bg(s,e,r,h)||!bg(r,h,s,e));var p,v}function jp(s,e,r){for(const h of r)for(let p=0;p<h.length-1;++p)if(Ru(s,e,h[p],h[p+1]))return!0;return!1}function zc(s,e,r=!1){let h=!1;for(const E of e)for(let C=0;C<E.length-1;C++){if(_g(s,E[C],E[C+1]))return r;(v=E[C])[1]>(p=s)[1]!=(x=E[C+1])[1]>p[1]&&p[0]<(x[0]-v[0])*(p[1]-v[1])/(x[1]-v[1])+v[0]&&(h=!h)}var p,v,x;return h}function Fc(s,e){for(const r of e)if(zc(s,r))return!0;return!1}function vg(s,e){for(const r of s)if(!zc(r,e))return!1;for(let r=0;r<s.length-1;++r)if(jp(s[r],s[r+1],e))return!1;return!0}function h0(s,e){for(const r of e)if(vg(s,r))return!0;return!1}function bg(s,e,r,h){const p=h[0]-r[0],v=h[1]-r[1],x=(s[0]-r[0])*v-p*(s[1]-r[1]),E=(e[0]-r[0])*v-p*(e[1]-r[1]);return x>0&&E<0||x<0&&E>0}function _f(s,e,r){const h=[];for(let p=0;p<s.length;p++){const v=[];for(let x=0;x<s[p].length;x++){const E=Fp(s[p][x],r);Vh(e,E),v.push(E)}h.push(v)}return h}function Bp(s,e,r){const h=[];for(let p=0;p<s.length;p++){const v=_f(s[p],e,r);h.push(v)}return h}function jc(s,e,r,h){if(s[0]<r[0]||s[0]>r[2]){const p=.5*h;let v=s[0]-r[0]>p?-h:r[0]-s[0]>p?h:0;v===0&&(v=s[0]-r[2]>p?-h:r[2]-s[0]>p?h:0),s[0]+=v}Vh(e,s)}function Bc(s,e,r,h){const p=Math.pow(2,h.z)*Ms,v=[h.x*Ms,h.y*Ms],x=[];for(const E of s)for(const C of E){const k=[C.x+v[0],C.y+v[1]];jc(k,e,r,p),x.push(k)}return x}function Vp(s,e,r,h){const p=Math.pow(2,h.z)*Ms,v=[h.x*Ms,h.y*Ms],x=[];for(const C of s){const k=[];for(const P of C){const j=[P.x+v[0],P.y+v[1]];Vh(e,j),k.push(j)}x.push(k)}if(e[2]-e[0]<=p/2){(E=e)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const C of x)for(const k of C)jc(k,e,r,p)}var E;return x}class Cs{constructor(e,r){this.type=qt,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ea(e[1])){const h=e[1];if(h.type==="FeatureCollection"){const p=[];for(const v of h.features){const{type:x,coordinates:E}=v.geometry;x==="Polygon"&&p.push(E),x==="MultiPolygon"&&p.push(...E)}if(p.length)return new Cs(h,{type:"MultiPolygon",coordinates:p})}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Cs(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Cs(h,h)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(h.type==="Polygon"){const E=_f(h.coordinates,v,x),C=Bc(r.geometry(),p,v,x);if(!cl(p,v))return!1;for(const k of C)if(!zc(k,E))return!1}if(h.type==="MultiPolygon"){const E=Bp(h.coordinates,v,x),C=Bc(r.geometry(),p,v,x);if(!cl(p,v))return!1;for(const k of C)if(!Fc(k,E))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(h.type==="Polygon"){const E=_f(h.coordinates,v,x),C=Vp(r.geometry(),p,v,x);if(!cl(p,v))return!1;for(const k of C)if(!vg(k,E))return!1}if(h.type==="MultiPolygon"){const E=Bp(h.coordinates,v,x),C=Vp(r.geometry(),p,v,x);if(!cl(p,v))return!1;for(const k of C)if(!h0(k,E))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Up=class{constructor(s=[],e=(r,h)=>r<h?-1:r>h?1:0){if(this.data=s,this.length=this.data.length,this.compare=e,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:e,compare:r}=this,h=e[s];for(;s>0;){const p=s-1>>1,v=e[p];if(r(h,v)>=0)break;e[s]=v,s=p}e[s]=h}_down(s){const{data:e,compare:r}=this,h=this.length>>1,p=e[s];for(;s<h;){let v=1+(s<<1);const x=v+1;if(x<this.length&&r(e[x],e[v])<0&&(v=x),r(e[v],p)>=0)break;e[s]=e[v],s=v}e[s]=p}};function Gp(s,e,r=0,h=s.length-1,p=ku){for(;h>r;){if(h-r>600){const C=h-r+1,k=e-r+1,P=Math.log(C),j=.5*Math.exp(2*P/3),U=.5*Math.sqrt(P*j*(C-j)/C)*(k-C/2<0?-1:1);Gp(s,e,Math.max(r,Math.floor(e-k*j/C+U)),Math.min(h,Math.floor(e+(C-k)*j/C+U)),p)}const v=s[e];let x=r,E=h;for(Vc(s,r,e),p(s[h],v)>0&&Vc(s,r,h);x<E;){for(Vc(s,x,E),x++,E--;p(s[x],v)<0;)x++;for(;p(s[E],v)>0;)E--}p(s[r],v)===0?Vc(s,r,E):(E++,Vc(s,E,h)),E<=e&&(r=E+1),e<=E&&(h=E-1)}}function Vc(s,e,r){const h=s[e];s[e]=s[r],s[r]=h}function ku(s,e){return s<e?-1:s>e?1:0}function Ou(s,e){if(s.length<=1)return[s];const r=[];let h,p;for(const v of s){const x=wg(v);x!==0&&(v.area=Math.abs(x),p===void 0&&(p=x<0),p===x<0?(h&&r.push(h),h=[v]):h.push(v))}if(h&&r.push(h),e>1)for(let v=0;v<r.length;v++)r[v].length<=e||(Gp(r[v],e,1,r[v].length-1,xg),r[v]=r[v].slice(0,e));return r}function xg(s,e){return e.area-s.area}function wg(s){let e=0;for(let r,h,p=0,v=s.length,x=v-1;p<v;x=p++)r=s[p],h=s[x],e+=(h.x-r.x)*(r.y+h.y);return e}const Tg=1/298.257223563,vf=Tg*(2-Tg),Zp=Math.PI/180;class $p{constructor(e){const r=6378.137*Zp*1e3,h=Math.cos(e*Zp),p=1/(1-vf*(1-h*h)),v=Math.sqrt(p);this.kx=r*v*h,this.ky=r*v*p*(1-vf)}distance(e,r){const h=this.wrap(e[0]-r[0])*this.kx,p=(e[1]-r[1])*this.ky;return Math.sqrt(h*h+p*p)}pointOnLine(e,r){let h,p,v,x,E=1/0;for(let C=0;C<e.length-1;C++){let k=e[C][0],P=e[C][1],j=this.wrap(e[C+1][0]-k)*this.kx,U=(e[C+1][1]-P)*this.ky,G=0;j===0&&U===0||(G=(this.wrap(r[0]-k)*this.kx*j+(r[1]-P)*this.ky*U)/(j*j+U*U),G>1?(k=e[C+1][0],P=e[C+1][1]):G>0&&(k+=j/this.kx*G,P+=U/this.ky*G)),j=this.wrap(r[0]-k)*this.kx,U=(r[1]-P)*this.ky;const Z=j*j+U*U;Z<E&&(E=Z,h=k,p=P,v=C,x=G)}return{point:[h,p],index:v,t:Math.max(0,Math.min(1,x))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function Sg(s,e){return e[0]-s[0]}function Kr(s){return s[1]-s[0]+1}function Ba(s,e){return s[1]>=s[0]&&s[1]<e}function bf(s,e){if(s[0]>s[1])return[null,null];const r=Kr(s);if(e){if(r===2)return[s,null];const p=Math.floor(r/2);return[[s[0],s[0]+p],[s[0]+p,s[1]]]}if(r===1)return[s,null];const h=Math.floor(r/2)-1;return[[s[0],s[0]+h],[s[0]+h+1,s[1]]]}function xf(s,e){if(!Ba(e,s.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let h=e[0];h<=e[1];++h)Vh(r,s[h]);return r}function wf(s){const e=[1/0,1/0,-1/0,-1/0];for(const r of s)for(const h of r)Vh(e,h);return e}function Tf(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Uh(s,e,r){if(!Tf(s)||!Tf(e))return NaN;let h=0,p=0;return s[2]<e[0]&&(h=e[0]-s[2]),s[0]>e[2]&&(h=s[0]-e[2]),s[1]>e[3]&&(p=s[1]-e[3]),s[3]<e[1]&&(p=e[1]-s[3]),r.distance([0,0],[h,p])}function Uc(s,e,r){const h=r.pointOnLine(e,s);return r.distance(s,h.point)}function Yl(s,e,r,h,p){const v=Math.min(Uc(s,[r,h],p),Uc(e,[r,h],p)),x=Math.min(Uc(r,[s,e],p),Uc(h,[s,e],p));return Math.min(v,x)}function Yp(s,e,r,h,p){if(!Ba(e,s.length)||!Ba(h,r.length))return 1/0;let v=1/0;for(let x=e[0];x<e[1];++x){const E=s[x],C=s[x+1];for(let k=h[0];k<h[1];++k){const P=r[k],j=r[k+1];if(Ru(E,C,P,j))return 0;v=Math.min(v,Yl(E,C,P,j,p))}}return v}function zn(s,e,r,h,p){if(!Ba(e,s.length)||!Ba(h,r.length))return NaN;let v=1/0;for(let x=e[0];x<=e[1];++x)for(let E=h[0];E<=h[1];++E)if(v=Math.min(v,p.distance(s[x],r[E])),v===0)return v;return v}function qp(s,e,r){if(zc(s,e,!0))return 0;let h=1/0;for(const p of e){const v=p[0],x=p[p.length-1];if(v!==x&&(h=Math.min(h,Uc(s,[x,v],r)),h===0))return h;const E=r.pointOnLine(p,s);if(h=Math.min(h,r.distance(s,E.point)),h===0)return h}return h}function Eg(s,e,r,h){if(!Ba(e,s.length))return NaN;for(let v=e[0];v<=e[1];++v)if(zc(s[v],r,!0))return 0;let p=1/0;for(let v=e[0];v<e[1];++v){const x=s[v],E=s[v+1];for(const C of r)for(let k=0,P=C.length,j=P-1;k<P;j=k++){const U=C[j],G=C[k];if(Ru(x,E,U,G))return 0;p=Math.min(p,Yl(x,E,U,G,h))}}return p}function ql(s,e){for(const r of s)for(const h of r)if(zc(h,e,!0))return!0;return!1}function Lu(s,e,r,h=1/0){const p=wf(s),v=wf(e);if(h!==1/0&&Uh(p,v,r)>=h)return h;if(cl(p,v)){if(ql(s,e))return 0}else if(ql(e,s))return 0;let x=1/0;for(const E of s)for(let C=0,k=E.length,P=k-1;C<k;P=C++){const j=E[P],U=E[C];for(const G of e)for(let Z=0,X=G.length,ee=X-1;Z<X;ee=Z++){const ce=G[ee],ve=G[Z];if(Ru(j,U,ce,ve))return 0;x=Math.min(x,Yl(j,U,ce,ve,r))}}return x}function Sf(s,e,r,h,p,v){if(!v)return;const x=Uh(xf(h,v),p,r);x<e&&s.push([x,v,[0,0]])}function Gh(s,e,r,h,p,v,x){if(!v||!x)return;const E=Uh(xf(h,v),xf(p,x),r);E<e&&s.push([E,v,x])}function Ds(s,e,r,h,p=1/0){let v=Math.min(h.distance(s[0],r[0][0]),p);if(v===0)return v;const x=new Up([[0,[0,s.length-1],[0,0]]],Sg),E=wf(r);for(;x.length>0;){const C=x.pop();if(C[0]>=v)continue;const k=C[1],P=e?50:100;if(Kr(k)<=P){if(!Ba(k,s.length))return NaN;if(e){const j=Eg(s,k,r,h);if(isNaN(j)||j===0)return j;v=Math.min(v,j)}else for(let j=k[0];j<=k[1];++j){const U=qp(s[j],r,h);if(v=Math.min(v,U),v===0)return 0}}else{const j=bf(k,e);Sf(x,v,h,s,E,j[0]),Sf(x,v,h,s,E,j[1])}}return v}function Zh(s,e,r,h,p,v=1/0){let x=Math.min(v,p.distance(s[0],r[0]));if(x===0)return x;const E=new Up([[0,[0,s.length-1],[0,r.length-1]]],Sg);for(;E.length>0;){const C=E.pop();if(C[0]>=x)continue;const k=C[1],P=C[2],j=e?50:100,U=h?50:100;if(Kr(k)<=j&&Kr(P)<=U){if(!Ba(k,s.length)&&Ba(P,r.length))return NaN;let G;if(e&&h)G=Yp(s,k,r,P,p),x=Math.min(x,G);else if(e&&!h){const Z=s.slice(k[0],k[1]+1);for(let X=P[0];X<=P[1];++X)if(G=Uc(r[X],Z,p),x=Math.min(x,G),x===0)return x}else if(!e&&h){const Z=r.slice(P[0],P[1]+1);for(let X=k[0];X<=k[1];++X)if(G=Uc(s[X],Z,p),x=Math.min(x,G),x===0)return x}else G=zn(s,k,r,P,p),x=Math.min(x,G)}else{const G=bf(k,e),Z=bf(P,h);Gh(E,x,p,s,r,G[0],Z[0]),Gh(E,x,p,s,r,G[0],Z[1]),Gh(E,x,p,s,r,G[1],Z[0]),Gh(E,x,p,s,r,G[1],Z[1])}}return x}function Ef(s){return s.type==="MultiPolygon"?s.coordinates.map(e=>({type:"Polygon",coordinates:e})):s.type==="MultiLineString"?s.coordinates.map(e=>({type:"LineString",coordinates:e})):s.type==="MultiPoint"?s.coordinates.map(e=>({type:"Point",coordinates:e})):[s]}class Hl{constructor(e,r){this.type=dt,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ea(e[1])){const h=e[1];if(h.type==="FeatureCollection")return new Hl(h,h.features.map(p=>Ef(p.geometry)).flat());if(h.type==="Feature")return new Hl(h,Ef(h.geometry));if("type"in h&&"coordinates"in h)return new Hl(h,Ef(h))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,h){const p=r.geometry(),v=p.flat().map(C=>Pc([C.x,C.y],r.canonical));if(p.length===0)return NaN;const x=new $p(v[0][1]);let E=1/0;for(const C of h){switch(C.type){case"Point":E=Math.min(E,Zh(v,!1,[C.coordinates],!1,x,E));break;case"LineString":E=Math.min(E,Zh(v,!1,C.coordinates,!0,x,E));break;case"Polygon":E=Math.min(E,Ds(v,!1,C.coordinates,x,E))}if(E===0)return E}return E}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,h){const p=r.geometry(),v=p.flat().map(C=>Pc([C.x,C.y],r.canonical));if(p.length===0)return NaN;const x=new $p(v[0][1]);let E=1/0;for(const C of h){switch(C.type){case"Point":E=Math.min(E,Zh(v,!0,[C.coordinates],!1,x,E));break;case"LineString":E=Math.min(E,Zh(v,!0,C.coordinates,!0,x,E));break;case"Polygon":E=Math.min(E,Ds(v,!0,C.coordinates,x,E))}if(E===0)return E}return E}(e,this.geometries);if(e.geometryType()==="Polygon")return function(r,h){const p=r.geometry();if(p.length===0||p[0].length===0)return NaN;const v=Ou(p,0).map(C=>C.map(k=>k.map(P=>Pc([P.x,P.y],r.canonical)))),x=new $p(v[0][0][0][1]);let E=1/0;for(const C of h)for(const k of v){switch(C.type){case"Point":E=Math.min(E,Ds([C.coordinates],!1,k,x,E));break;case"LineString":E=Math.min(E,Ds(C.coordinates,!0,k,x,E));break;case"Polygon":E=Math.min(E,Lu(k,C.coordinates,x,E))}if(E===0)return E}return E}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class $h{constructor(e){this.type=tn,this.key=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const h=e[1];return h==null?r.error("Global state property must be defined."):typeof h!="string"?r.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new $h(h)}evaluate(e){var r;const h=(r=e.globals)===null||r===void 0?void 0:r.globalState;return h&&Object.keys(h).length!==0?bs(h,this.key):null}eachChild(){}outputDefined(){return!1}}const Nu={"==":pf,"!=":Pp,">":yg,"<":gg,">=":gf,"<=":mf,array:Xr,at:eo,boolean:Xr,case:Fh,coalesce:Iu,collator:ja,format:Nc,image:zp,in:ll,"index-of":Es,interpolate:Ur,"interpolate-hcl":Ur,"interpolate-lab":Ur,length:Bh,let:Pn,literal:sl,match:zh,number:Xr,"number-format":yf,object:Xr,slice:jh,step:$l,string:Xr,"to-boolean":Xi,"to-color":Xi,"to-number":Xi,"to-string":Xi,var:Zl,within:Cs,distance:Hl,"global-state":$h};class _o{constructor(e,r,h,p){this.name=e,this.type=r,this._evaluate=h,this.args=p}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,r){const h=e[0],p=_o.definitions[h];if(!p)return r.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,E=x.filter(([k])=>!Array.isArray(k)||k.length===e.length-1);let C=null;for(const[k,P]of E){C=new Ss(r.registry,Gc,r.path,null,r.scope);const j=[];let U=!1;for(let G=1;G<e.length;G++){const Z=e[G],X=Array.isArray(k)?k[G-1]:k.type,ee=C.parse(Z,1+j.length,X);if(!ee){U=!0;break}j.push(ee)}if(!U)if(Array.isArray(k)&&k.length!==j.length)C.error(`Expected ${k.length} arguments, but found ${j.length} instead.`);else{for(let G=0;G<j.length;G++){const Z=Array.isArray(k)?k[G]:k.type,X=j[G];C.concat(G+1).checkSubtype(Z,X.type)}if(C.errors.length===0)return new _o(h,v,P,j)}}if(E.length===1)r.errors.push(...C.errors);else{const k=(E.length?E:x).map(([j])=>{return U=j,Array.isArray(U)?`(${U.map(pi).join(", ")})`:`(${pi(U.type)}...)`;var U}).join(" | "),P=[];for(let j=1;j<e.length;j++){const U=r.parse(e[j],1+P.length);if(!U)return null;P.push(pi(U.type))}r.error(`Expected arguments of type ${k}, but found (${P.join(", ")}) instead.`)}return null}static register(e,r){_o.definitions=r;for(const h in r)e[h]=_o}}function Hp(s,[e,r,h,p]){e=e.evaluate(s),r=r.evaluate(s),h=h.evaluate(s);const v=p?p.evaluate(s):1,x=Du(e,r,h,v);if(x)throw new li(x);return new Dn(e/255,r/255,h/255,v,!1)}function Wp(s,e){return s in e}function Yh(s,e){const r=e[s];return r===void 0?null:r}function Jr(s){return{type:s}}function Gc(s){if(s instanceof Zl)return Gc(s.boundExpression);if(s instanceof _o&&s.name==="error"||s instanceof ja||s instanceof Cs||s instanceof Hl||s instanceof $h)return!1;const e=s instanceof Xi||s instanceof Xr;let r=!0;return s.eachChild(h=>{r=e?r&&Gc(h):r&&h instanceof sl}),!!r&&Aa(s)&&Pu(s,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Aa(s){if(s instanceof _o&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Cs||s instanceof Hl)return!1;let e=!0;return s.eachChild(r=>{e&&!Aa(r)&&(e=!1)}),e}function Is(s){if(s instanceof _o&&s.name==="feature-state")return!1;let e=!0;return s.eachChild(r=>{e&&!Is(r)&&(e=!1)}),e}function Pu(s,e){if(s instanceof _o&&e.indexOf(s.name)>=0)return!1;let r=!0;return s.eachChild(h=>{r&&!Pu(h,e)&&(r=!1)}),r}function qh(s){return{result:"success",value:s}}function ul(s){return{result:"error",value:s}}function Wl(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Xl(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Af(s){return!!s.expression&&s.expression.interpolated}function gn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function hl(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&mi(s)===Br}function d0(s){return s}function Va(s,e){const r=s.stops&&typeof s.stops[0][0]=="object",h=r||!(r||s.property!==void 0),p=s.type||(Af(e)?"exponential":"interval"),v=function(P){switch(P.type){case"color":return Dn.parse;case"padding":return cr.parse;case"numberArray":return ur.parse;case"colorArray":return yr.parse;default:return null}}(e);if(v&&((s=di({},s)).stops&&(s.stops=s.stops.map(P=>[P[0],v(P[1])])),s.default=v(s.default?s.default:e.default)),s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;const E=function(P){switch(P){case"exponential":return Hh;case"interval":return Ag;case"categorical":return Vo;case"identity":return $c;default:throw new Error(`Unknown function type "${P}"`)}}(p);let C,k;if(p==="categorical"){C=Object.create(null);for(const P of s.stops)C[P[0]]=P[1];k=typeof s.stops[0][0]}if(r){const P={},j=[];for(let Z=0;Z<s.stops.length;Z++){const X=s.stops[Z],ee=X[0].zoom;P[ee]===void 0&&(P[ee]={zoom:ee,type:s.type,property:s.property,default:s.default,stops:[]},j.push(ee)),P[ee].stops.push([X[0].value,X[1]])}const U=[];for(const Z of j)U.push([P[Z].zoom,Va(P[Z],e)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:Ur.interpolationFactor.bind(void 0,G),zoomStops:U.map(Z=>Z[0]),evaluate:({zoom:Z},X)=>Hh({stops:U,base:s.base},e,Z).evaluate(Z,X)}}if(h){const P=p==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Ur.interpolationFactor.bind(void 0,P),zoomStops:s.stops.map(j=>j[0]),evaluate:({zoom:j})=>E(s,e,j,C,k)}}return{kind:"source",evaluate(P,j){const U=j&&j.properties?j.properties[s.property]:void 0;return U===void 0?Zc(s.default,e.default):E(s,e,U,C,k)}}}function Zc(s,e,r){return s!==void 0?s:e!==void 0?e:r!==void 0?r:void 0}function Vo(s,e,r,h,p){return Zc(typeof r===p?h[r]:void 0,s.default,e.default)}function Ag(s,e,r){if(gn(r)!=="number")return Zc(s.default,e.default);const h=s.stops.length;if(h===1||r<=s.stops[0][0])return s.stops[0][1];if(r>=s.stops[h-1][0])return s.stops[h-1][1];const p=hf(s.stops.map(v=>v[0]),r);return s.stops[p][1]}function Hh(s,e,r){const h=s.base!==void 0?s.base:1;if(gn(r)!=="number")return Zc(s.default,e.default);const p=s.stops.length;if(p===1||r<=s.stops[0][0])return s.stops[0][1];if(r>=s.stops[p-1][0])return s.stops[p-1][1];const v=hf(s.stops.map(P=>P[0]),r),x=function(P,j,U,G){const Z=G-U,X=P-U;return Z===0?0:j===1?X/Z:(Math.pow(j,X)-1)/(Math.pow(j,Z)-1)}(r,h,s.stops[v][0],s.stops[v+1][0]),E=s.stops[v][1],C=s.stops[v+1][1],k=jo[e.type]||d0;return typeof E.evaluate=="function"?{evaluate(...P){const j=E.evaluate.apply(void 0,P),U=C.evaluate.apply(void 0,P);if(j!==void 0&&U!==void 0)return k(j,U,x,s.colorSpace)}}:k(E,C,x,s.colorSpace)}function $c(s,e,r){switch(e.type){case"color":r=Dn.parse(r);break;case"formatted":r=nr.fromString(r.toString());break;case"resolvedImage":r=ir.fromString(r.toString());break;case"padding":r=cr.parse(r);break;case"colorArray":r=yr.parse(r);break;case"numberArray":r=ur.parse(r);break;default:gn(r)===e.type||e.type==="enum"&&e.values[r]||(r=void 0)}return Zc(r,s.default,e.default)}_o.register(Nu,{error:[{kind:"error"},[kt],(s,[e])=>{throw new li(e.evaluate(s))}],typeof:[kt,[tn],(s,[e])=>pi(mi(e.evaluate(s)))],"to-rgba":[Pa(dt,4),[ca],(s,[e])=>{const[r,h,p,v]=e.evaluate(s).rgb;return[255*r,255*h,255*p,v]}],rgb:[ca,[dt,dt,dt],Hp],rgba:[ca,[dt,dt,dt,dt],Hp],has:{type:qt,overloads:[[[kt],(s,[e])=>Wp(e.evaluate(s),s.properties())],[[kt,Br],(s,[e,r])=>Wp(e.evaluate(s),r.evaluate(s))]]},get:{type:tn,overloads:[[[kt],(s,[e])=>Yh(e.evaluate(s),s.properties())],[[kt,Br],(s,[e,r])=>Yh(e.evaluate(s),r.evaluate(s))]]},"feature-state":[tn,[kt],(s,[e])=>Yh(e.evaluate(s),s.featureState||{})],properties:[Br,[],s=>s.properties()],"geometry-type":[kt,[],s=>s.geometryType()],id:[tn,[],s=>s.id()],zoom:[dt,[],s=>s.globals.zoom],"heatmap-density":[dt,[],s=>s.globals.heatmapDensity||0],elevation:[dt,[],s=>s.globals.elevation||0],"line-progress":[dt,[],s=>s.globals.lineProgress||0],accumulated:[tn,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[dt,Jr(dt),(s,e)=>{let r=0;for(const h of e)r+=h.evaluate(s);return r}],"*":[dt,Jr(dt),(s,e)=>{let r=1;for(const h of e)r*=h.evaluate(s);return r}],"-":{type:dt,overloads:[[[dt,dt],(s,[e,r])=>e.evaluate(s)-r.evaluate(s)],[[dt],(s,[e])=>-e.evaluate(s)]]},"/":[dt,[dt,dt],(s,[e,r])=>e.evaluate(s)/r.evaluate(s)],"%":[dt,[dt,dt],(s,[e,r])=>e.evaluate(s)%r.evaluate(s)],ln2:[dt,[],()=>Math.LN2],pi:[dt,[],()=>Math.PI],e:[dt,[],()=>Math.E],"^":[dt,[dt,dt],(s,[e,r])=>Math.pow(e.evaluate(s),r.evaluate(s))],sqrt:[dt,[dt],(s,[e])=>Math.sqrt(e.evaluate(s))],log10:[dt,[dt],(s,[e])=>Math.log(e.evaluate(s))/Math.LN10],ln:[dt,[dt],(s,[e])=>Math.log(e.evaluate(s))],log2:[dt,[dt],(s,[e])=>Math.log(e.evaluate(s))/Math.LN2],sin:[dt,[dt],(s,[e])=>Math.sin(e.evaluate(s))],cos:[dt,[dt],(s,[e])=>Math.cos(e.evaluate(s))],tan:[dt,[dt],(s,[e])=>Math.tan(e.evaluate(s))],asin:[dt,[dt],(s,[e])=>Math.asin(e.evaluate(s))],acos:[dt,[dt],(s,[e])=>Math.acos(e.evaluate(s))],atan:[dt,[dt],(s,[e])=>Math.atan(e.evaluate(s))],min:[dt,Jr(dt),(s,e)=>Math.min(...e.map(r=>r.evaluate(s)))],max:[dt,Jr(dt),(s,e)=>Math.max(...e.map(r=>r.evaluate(s)))],abs:[dt,[dt],(s,[e])=>Math.abs(e.evaluate(s))],round:[dt,[dt],(s,[e])=>{const r=e.evaluate(s);return r<0?-Math.round(-r):Math.round(r)}],floor:[dt,[dt],(s,[e])=>Math.floor(e.evaluate(s))],ceil:[dt,[dt],(s,[e])=>Math.ceil(e.evaluate(s))],"filter-==":[qt,[kt,tn],(s,[e,r])=>s.properties()[e.value]===r.value],"filter-id-==":[qt,[tn],(s,[e])=>s.id()===e.value],"filter-type-==":[qt,[kt],(s,[e])=>s.geometryType()===e.value],"filter-<":[qt,[kt,tn],(s,[e,r])=>{const h=s.properties()[e.value],p=r.value;return typeof h==typeof p&&h<p}],"filter-id-<":[qt,[tn],(s,[e])=>{const r=s.id(),h=e.value;return typeof r==typeof h&&r<h}],"filter->":[qt,[kt,tn],(s,[e,r])=>{const h=s.properties()[e.value],p=r.value;return typeof h==typeof p&&h>p}],"filter-id->":[qt,[tn],(s,[e])=>{const r=s.id(),h=e.value;return typeof r==typeof h&&r>h}],"filter-<=":[qt,[kt,tn],(s,[e,r])=>{const h=s.properties()[e.value],p=r.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[qt,[tn],(s,[e])=>{const r=s.id(),h=e.value;return typeof r==typeof h&&r<=h}],"filter->=":[qt,[kt,tn],(s,[e,r])=>{const h=s.properties()[e.value],p=r.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[qt,[tn],(s,[e])=>{const r=s.id(),h=e.value;return typeof r==typeof h&&r>=h}],"filter-has":[qt,[tn],(s,[e])=>e.value in s.properties()],"filter-has-id":[qt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[qt,[Pa(kt)],(s,[e])=>e.value.indexOf(s.geometryType())>=0],"filter-id-in":[qt,[Pa(tn)],(s,[e])=>e.value.indexOf(s.id())>=0],"filter-in-small":[qt,[kt,Pa(tn)],(s,[e,r])=>r.value.indexOf(s.properties()[e.value])>=0],"filter-in-large":[qt,[kt,Pa(tn)],(s,[e,r])=>function(h,p,v,x){for(;v<=x;){const E=v+x>>1;if(p[E]===h)return!0;p[E]>h?x=E-1:v=E+1}return!1}(s.properties()[e.value],r.value,0,r.value.length-1)],all:{type:qt,overloads:[[[qt,qt],(s,[e,r])=>e.evaluate(s)&&r.evaluate(s)],[Jr(qt),(s,e)=>{for(const r of e)if(!r.evaluate(s))return!1;return!0}]]},any:{type:qt,overloads:[[[qt,qt],(s,[e,r])=>e.evaluate(s)||r.evaluate(s)],[Jr(qt),(s,e)=>{for(const r of e)if(r.evaluate(s))return!0;return!1}]]},"!":[qt,[qt],(s,[e])=>!e.evaluate(s)],"is-supported-script":[qt,[kt],(s,[e])=>{const r=s.globals&&s.globals.isSupportedScript;return!r||r(e.evaluate(s))}],upcase:[kt,[kt],(s,[e])=>e.evaluate(s).toUpperCase()],downcase:[kt,[kt],(s,[e])=>e.evaluate(s).toLowerCase()],concat:[kt,Jr(tn),(s,e)=>e.map(r=>ol(r.evaluate(s))).join("")],"resolved-locale":[kt,[Ka],(s,[e])=>e.evaluate(s).resolvedLocale()]});class zu{constructor(e,r,h){this.expression=e,this._warningHistory={},this._evaluator=new hn,this._defaultValue=r?function(p){if(p.type==="color"&&hl(p.default))return new Dn(0,0,0,0);switch(p.type){case"color":return Dn.parse(p.default)||null;case"padding":return cr.parse(p.default)||null;case"numberArray":return ur.parse(p.default)||null;case"colorArray":return yr.parse(p.default)||null;case"variableAnchorOffsetCollection":return Er.parse(p.default)||null;case"projectionDefinition":return Vr.parse(p.default)||null;default:return p.default===void 0?null:p.default}}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null,this._globalState=h}evaluateWithoutErrorHandling(e,r,h,p,v,x){return this._globalState&&(e=ea(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(e,r,h,p,v,x){this._globalState&&(e=ea(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new li(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function Wh(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Nu}function Fu(s,e,r){const h=new Ss(Nu,Gc,[],e?function(v){const x={color:ca,string:kt,number:dt,enum:kt,boolean:qt,formatted:Ul,padding:Po,numberArray:zo,colorArray:ua,projectionDefinition:Ic,resolvedImage:Fo,variableAnchorOffsetCollection:Wi};return v.type==="array"?Pa(x[v.value]||tn,v.length):x[v.type]}(e):void 0),p=h.parse(s,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?qh(new zu(p,e,r)):ul(h.errors)}class Ql{constructor(e,r,h){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Is(r.expression),this.globalStateRefs=Kl(r.expression),this._globalState=h}evaluateWithoutErrorHandling(e,r,h,p,v,x){return this._globalState&&(e=ea(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,r,h,p,v,x)}evaluate(e,r,h,p,v,x){return this._globalState&&(e=ea(e,this._globalState)),this._styleExpression.evaluate(e,r,h,p,v,x)}}class Ma{constructor(e,r,h,p,v){this.kind=e,this.zoomStops=h,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Is(r.expression),this.globalStateRefs=Kl(r.expression),this.interpolationType=p,this._globalState=v}evaluateWithoutErrorHandling(e,r,h,p,v,x){return this._globalState&&(e=ea(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,r,h,p,v,x)}evaluate(e,r,h,p,v,x){return this._globalState&&(e=ea(e,this._globalState)),this._styleExpression.evaluate(e,r,h,p,v,x)}interpolationFactor(e,r,h){return this.interpolationType?Ur.interpolationFactor(this.interpolationType,e,r,h):0}}function Yc(s,e,r){const h=Fu(s,e,r);if(h.result==="error")return h;const p=h.value.expression,v=Aa(p);if(!v&&!Wl(e))return ul([new fi("","data expressions not supported")]);const x=Pu(p,["zoom"]);if(!x&&!Xl(e))return ul([new fi("","zoom expressions not supported")]);const E=qc(p);return E||x?E instanceof fi?ul([E]):E instanceof Ur&&!Af(e)?ul([new fi("",'"interpolate" expressions cannot be used with this property')]):qh(E?new Ma(v?"camera":"composite",h.value,E.labels,E instanceof Ur?E.interpolation:void 0,r):new Ql(v?"constant":"source",h.value,r)):ul([new fi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class dl{constructor(e,r){this._parameters=e,this._specification=r,di(this,Va(this._parameters,this._specification))}static deserialize(e){return new dl(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function qc(s){let e=null;if(s instanceof Pn)e=qc(s.result);else if(s instanceof Iu){for(const r of s.args)if(e=qc(r),e)break}else(s instanceof $l||s instanceof Ur)&&s.input instanceof _o&&s.input.name==="zoom"&&(e=s);return e instanceof fi||s.eachChild(r=>{const h=qc(r);h instanceof fi?e=h:!e&&h?e=new fi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&h&&e!==h&&(e=new fi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Kl(s,e=new Set){return s instanceof $h&&e.add(s.key),s.eachChild(r=>{Kl(r,e)}),e}function ea(s,e){const{zoom:r,heatmapDensity:h,elevation:p,lineProgress:v,isSupportedScript:x,accumulated:E}=s??{};return{zoom:r,heatmapDensity:h,elevation:p,lineProgress:v,isSupportedScript:x,accumulated:E,globalState:e}}function Ca(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const e of s.slice(1))if(!Ca(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const fl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ua(s,e){if(s==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Ca(s)||(s=ju(s));const r=Fu(s,fl,e);if(r.result==="error")throw new Error(r.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,p,v)=>r.value.evaluate(h,p,{},v),needGeometry:Uo(s),getGlobalStateRefs:()=>Kl(r.value.expression)}}function Rs(s,e){return s<e?-1:s>e?1:0}function Uo(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let e=1;e<s.length;e++)if(Uo(s[e]))return!0;return!1}function ju(s){if(!s)return!0;const e=s[0];return s.length<=1?e!=="any":e==="=="?Bu(s[1],s[2],"=="):e==="!="?vr(Bu(s[1],s[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Bu(s[1],s[2],e):e==="any"?(r=s.slice(1),["any"].concat(r.map(ju))):e==="all"?["all"].concat(s.slice(1).map(ju)):e==="none"?["all"].concat(s.slice(1).map(ju).map(vr)):e==="in"?Mf(s[1],s.slice(2)):e==="!in"?vr(Mf(s[1],s.slice(2))):e==="has"?Xp(s[1]):e!=="!has"||vr(Xp(s[1]));var r}function Bu(s,e,r){switch(s){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,s,e]}}function Mf(s,e){if(e.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",s,["literal",e.sort(Rs)]]:["filter-in-small",s,["literal",e]]}}function Xp(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function vr(s){return["!",s]}function wi(s){const e=typeof s;if(e==="number"||e==="boolean"||e==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let p="[";for(const v of s)p+=`${wi(v)},`;return`${p}]`}const r=Object.keys(s).sort();let h="{";for(let p=0;p<r.length;p++)h+=`${JSON.stringify(r[p])}:${wi(s[r[p]])},`;return`${h}}`}function Fn(s){let e="";for(const r of je)e+=`/${wi(s[r])}`;return e}function ks(s){const e=s.value;return e?[new vt(s.key,e,"constants have been deprecated as of v8")]:[]}function Un(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Go(s){if(Array.isArray(s))return s.map(Go);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const e={};for(const r in s)e[r]=Go(s[r]);return e}return Un(s)}function hr(s){const e=s.key,r=s.value,h=s.valueSpec||{},p=s.objectElementValidators||{},v=s.style,x=s.styleSpec,E=s.validateSpec;let C=[];const k=gn(r);if(k!=="object")return[new vt(e,r,`object expected, ${k} found`)];for(const P in r){const j=P.split(".")[0],U=bs(h,j)||h["*"];let G;if(bs(p,j))G=p[j];else if(bs(h,j))G=E;else if(p["*"])G=p["*"];else{if(!h["*"]){C.push(new vt(e,r[P],`unknown property "${P}"`));continue}G=E}C=C.concat(G({key:(e&&`${e}.`)+P,value:r[P],valueSpec:U,style:v,styleSpec:x,object:r,objectKey:P,validateSpec:E},r))}for(const P in h)p[P]||h[P].required&&h[P].default===void 0&&r[P]===void 0&&C.push(new vt(e,r,`missing required property "${P}"`));return C}function Vu(s){const e=s.value,r=s.valueSpec,h=s.style,p=s.styleSpec,v=s.key,x=s.arrayElementValidator||s.validateSpec;if(gn(e)!=="array")return[new vt(v,e,`array expected, ${gn(e)} found`)];if(r.length&&e.length!==r.length)return[new vt(v,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new vt(v,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let E={type:r.value,values:r.values};p.$version<7&&(E.function=r.function),gn(r.value)==="object"&&(E=r.value);let C=[];for(let k=0;k<e.length;k++)C=C.concat(x({array:e,arrayIndex:k,value:e[k],valueSpec:E,validateSpec:s.validateSpec,style:h,styleSpec:p,key:`${v}[${k}]`}));return C}function Jl(s){const e=s.key,r=s.value,h=s.valueSpec;let p=gn(r);return p==="number"&&r!=r&&(p="NaN"),p!=="number"?[new vt(e,r,`number expected, ${p} found`)]:"minimum"in h&&r<h.minimum?[new vt(e,r,`${r} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&r>h.maximum?[new vt(e,r,`${r} is greater than the maximum value ${h.maximum}`)]:[]}function Hc(s){const e=s.valueSpec,r=Un(s.value.type);let h,p,v,x={};const E=r!=="categorical"&&s.value.property===void 0,C=!E,k=gn(s.value.stops)==="array"&&gn(s.value.stops[0])==="array"&&gn(s.value.stops[0][0])==="object",P=hr({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(G){if(r==="identity")return[new vt(G.key,G.value,'identity function may not have a "stops" property')];let Z=[];const X=G.value;return Z=Z.concat(Vu({key:G.key,value:X,valueSpec:G.valueSpec,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:j})),gn(X)==="array"&&X.length===0&&Z.push(new vt(G.key,X,"array must have at least one stop")),Z},default:function(G){return G.validateSpec({key:G.key,value:G.value,valueSpec:e,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec})}}});return r==="identity"&&E&&P.push(new vt(s.key,s.value,'missing required property "property"')),r==="identity"||s.value.stops||P.push(new vt(s.key,s.value,'missing required property "stops"')),r==="exponential"&&s.valueSpec.expression&&!Af(s.valueSpec)&&P.push(new vt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(C&&!Wl(s.valueSpec)?P.push(new vt(s.key,s.value,"property functions not supported")):E&&!Xl(s.valueSpec)&&P.push(new vt(s.key,s.value,"zoom functions not supported"))),r!=="categorical"&&!k||s.value.property!==void 0||P.push(new vt(s.key,s.value,'"property" property is required')),P;function j(G){let Z=[];const X=G.value,ee=G.key;if(gn(X)!=="array")return[new vt(ee,X,`array expected, ${gn(X)} found`)];if(X.length!==2)return[new vt(ee,X,`array length 2 expected, length ${X.length} found`)];if(k){if(gn(X[0])!=="object")return[new vt(ee,X,`object expected, ${gn(X[0])} found`)];if(X[0].zoom===void 0)return[new vt(ee,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new vt(ee,X,"object stop key must have value")];if(v&&v>Un(X[0].zoom))return[new vt(ee,X[0].zoom,"stop zoom values must appear in ascending order")];Un(X[0].zoom)!==v&&(v=Un(X[0].zoom),p=void 0,x={}),Z=Z.concat(hr({key:`${ee}[0]`,value:X[0],valueSpec:{zoom:{}},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:Jl,value:U}}))}else Z=Z.concat(U({key:`${ee}[0]`,value:X[0],validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec},X));return Wh(Go(X[1]))?Z.concat([new vt(`${ee}[1]`,X[1],"expressions are not allowed in function stops.")]):Z.concat(G.validateSpec({key:`${ee}[1]`,value:X[1],valueSpec:e,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec}))}function U(G,Z){const X=gn(G.value),ee=Un(G.value),ce=G.value!==null?G.value:Z;if(h){if(X!==h)return[new vt(G.key,ce,`${X} stop domain type must match previous stop domain type ${h}`)]}else h=X;if(X!=="number"&&X!=="string"&&X!=="boolean")return[new vt(G.key,ce,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&r!=="categorical"){let ve=`number expected, ${X} found`;return Wl(e)&&r===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(G.key,ce,ve)]}return r!=="categorical"||X!=="number"||isFinite(ee)&&Math.floor(ee)===ee?r!=="categorical"&&X==="number"&&p!==void 0&&ee<p?[new vt(G.key,ce,"stop domain values must appear in ascending order")]:(p=ee,r==="categorical"&&ee in x?[new vt(G.key,ce,"stop domain values must be unique")]:(x[ee]=!0,[])):[new vt(G.key,ce,`integer expected, found ${ee}`)]}}function vo(s){const e=(s.expressionContext==="property"?Yc:Fu)(Go(s.value),s.valueSpec);if(e.result==="error")return e.value.map(h=>new vt(`${s.key}${h.key}`,s.value,h.message));const r=e.value.expression||e.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!r.outputDefined())return[new vt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Is(r))return[new vt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!Is(r))return[new vt(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Pu(r,["zoom","feature-state"]))return[new vt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Aa(r))return[new vt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xh(s){const e=s.key,r=s.value,h=gn(r);return h!=="string"?[new vt(e,r,`color expected, ${h} found`)]:Dn.parse(String(r))?[]:[new vt(e,r,`color expected, "${r}" found`)]}function pl(s){const e=s.key,r=s.value,h=s.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Un(r))===-1&&p.push(new vt(e,r,`expected one of [${h.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(h.values).indexOf(Un(r))===-1&&p.push(new vt(e,r,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(r)} found`)),p}function Qh(s){return Ca(Go(s.value))?vo(di({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ec(s)}function ec(s){const e=s.value,r=s.key;if(gn(e)!=="array")return[new vt(r,e,`array expected, ${gn(e)} found`)];const h=s.styleSpec;let p,v=[];if(e.length<1)return[new vt(r,e,"filter array must have at least 1 element")];switch(v=v.concat(pl({key:`${r}[0]`,value:e[0],valueSpec:h.filter_operator,style:s.style,styleSpec:s.styleSpec})),Un(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Un(e[1])==="$type"&&v.push(new vt(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&v.push(new vt(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(p=gn(e[1]),p!=="string"&&v.push(new vt(`${r}[1]`,e[1],`string expected, ${p} found`)));for(let x=2;x<e.length;x++)p=gn(e[x]),Un(e[1])==="$type"?v=v.concat(pl({key:`${r}[${x}]`,value:e[x],valueSpec:h.geometry_type,style:s.style,styleSpec:s.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new vt(`${r}[${x}]`,e[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<e.length;x++)v=v.concat(ec({key:`${r}[${x}]`,value:e[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":p=gn(e[1]),e.length!==2?v.push(new vt(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new vt(`${r}[1]`,e[1],`string expected, ${p} found`))}return v}function Zo(s,e){const r=s.key,h=s.validateSpec,p=s.style,v=s.styleSpec,x=s.value,E=s.objectKey,C=v[`${e}_${s.layerType}`];if(!C)return[];const k=E.match(/^(.*)-transition$/);if(e==="paint"&&k&&C[k[1]]&&C[k[1]].transition)return h({key:r,value:x,valueSpec:v.transition,style:p,styleSpec:v});const P=s.valueSpec||C[E];if(!P)return[new vt(r,x,`unknown property "${E}"`)];let j;if(gn(x)==="string"&&Wl(P)&&!P.tokens&&(j=/^{([^}]+)}$/.exec(x)))return[new vt(r,x,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const U=[];return s.layerType==="symbol"&&E==="text-font"&&hl(Go(x))&&Un(x.type)==="identity"&&U.push(new vt(r,x,'"text-font" does not support identity functions')),U.concat(h({key:s.key,value:x,valueSpec:P,style:p,styleSpec:v,expressionContext:"property",propertyType:e,propertyKey:E}))}function Os(s){return Zo(s,"paint")}function to(s){return Zo(s,"layout")}function Cf(s){let e=[];const r=s.value,h=s.key,p=s.style,v=s.styleSpec;if(gn(r)!=="object")return[new vt(h,r,`object expected, ${gn(r)} found`)];r.type||r.ref||e.push(new vt(h,r,'either "type" or "ref" is required'));let x=Un(r.type);const E=Un(r.ref);if(r.id){const C=Un(r.id);for(let k=0;k<s.arrayIndex;k++){const P=p.layers[k];Un(P.id)===C&&e.push(new vt(h,r.id,`duplicate layer id "${r.id}", previously used at line ${P.id.__line__}`))}}if("ref"in r){let C;["type","source","source-layer","filter","layout"].forEach(k=>{k in r&&e.push(new vt(h,r[k],`"${k}" is prohibited for ref layers`))}),p.layers.forEach(k=>{Un(k.id)===E&&(C=k)}),C?C.ref?e.push(new vt(h,r.ref,"ref cannot reference another ref layer")):x=Un(C.type):e.push(new vt(h,r.ref,`ref layer "${E}" not found`))}else if(x!=="background")if(r.source){const C=p.sources&&p.sources[r.source],k=C&&Un(C.type);C?k==="vector"&&x==="raster"?e.push(new vt(h,r.source,`layer "${r.id}" requires a raster source`)):k!=="raster-dem"&&x==="hillshade"||k!=="raster-dem"&&x==="color-relief"?e.push(new vt(h,r.source,`layer "${r.id}" requires a raster-dem source`)):k==="raster"&&x!=="raster"?e.push(new vt(h,r.source,`layer "${r.id}" requires a vector source`)):k!=="vector"||r["source-layer"]?k==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?e.push(new vt(h,r.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!r.paint||!r.paint["line-gradient"]||k==="geojson"&&C.lineMetrics||e.push(new vt(h,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new vt(h,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new vt(h,r.source,`source "${r.source}" not found`))}else e.push(new vt(h,r,'missing required property "source"'));return e=e.concat(hr({key:h,value:r,valueSpec:v.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${h}.type`,value:r.type,valueSpec:v.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:r,objectKey:"type"}),filter:Qh,layout:C=>hr({layer:r,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":k=>to(di({layerType:x},k))}}),paint:C=>hr({layer:r,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":k=>Os(di({layerType:x},k))}})}})),e}function Ls(s){const e=s.value,r=s.key,h=gn(e);return h!=="string"?[new vt(r,e,`string expected, ${h} found`)]:[]}const tc={promoteId:function({key:s,value:e}){if(gn(e)==="string")return Ls({key:s,value:e});{const r=[];for(const h in e)r.push(...Ls({key:`${s}.${h}`,value:e[h]}));return r}}};function Kh(s){const e=s.value,r=s.key,h=s.styleSpec,p=s.style,v=s.validateSpec;if(!e.type)return[new vt(r,e,'"type" is required')];const x=Un(e.type);let E;switch(x){case"vector":case"raster":return E=hr({key:r,value:e,valueSpec:h[`source_${x.replace("-","_")}`],style:s.style,styleSpec:h,objectElementValidators:tc,validateSpec:v}),E;case"raster-dem":return E=function(C){var k;const P=(k=C.sourceName)!==null&&k!==void 0?k:"",j=C.value,U=C.styleSpec,G=U.source_raster_dem,Z=C.style;let X=[];const ee=gn(j);if(j===void 0)return X;if(ee!=="object")return X.push(new vt("source_raster_dem",j,`object expected, ${ee} found`)),X;const ce=Un(j.encoding)==="custom",ve=["redFactor","greenFactor","blueFactor","baseShift"],fe=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const ge in j)!ce&&ve.includes(ge)?X.push(new vt(ge,j[ge],`In "${P}": "${ge}" is only valid when "encoding" is set to "custom". ${fe} encoding found`)):G[ge]?X=X.concat(C.validateSpec({key:ge,value:j[ge],valueSpec:G[ge],validateSpec:C.validateSpec,style:Z,styleSpec:U})):X.push(new vt(ge,j[ge],`unknown property "${ge}"`));return X}({sourceName:r,value:e,style:s.style,styleSpec:h,validateSpec:v}),E;case"geojson":if(E=hr({key:r,value:e,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:v,objectElementValidators:tc}),e.cluster)for(const C in e.clusterProperties){const[k,P]=e.clusterProperties[C],j=typeof k=="string"?[k,["accumulated"],["get",C]]:k;E.push(...vo({key:`${r}.${C}.map`,value:P,expressionContext:"cluster-map"})),E.push(...vo({key:`${r}.${C}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return E;case"video":return hr({key:r,value:e,valueSpec:h.source_video,style:p,validateSpec:v,styleSpec:h});case"image":return hr({key:r,value:e,valueSpec:h.source_image,style:p,validateSpec:v,styleSpec:h});case"canvas":return[new vt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return pl({key:`${r}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ml(s){const e=s.value,r=s.styleSpec,h=r.light,p=s.style;let v=[];const x=gn(e);if(e===void 0)return v;if(x!=="object")return v=v.concat([new vt("light",e,`object expected, ${x} found`)]),v;for(const E in e){const C=E.match(/^(.*)-transition$/);v=v.concat(C&&h[C[1]]&&h[C[1]].transition?s.validateSpec({key:E,value:e[E],valueSpec:r.transition,validateSpec:s.validateSpec,style:p,styleSpec:r}):h[E]?s.validateSpec({key:E,value:e[E],valueSpec:h[E],validateSpec:s.validateSpec,style:p,styleSpec:r}):[new vt(E,e[E],`unknown property "${E}"`)])}return v}function Ar(s){const e=s.value,r=s.styleSpec,h=r.sky,p=s.style,v=gn(e);if(e===void 0)return[];if(v!=="object")return[new vt("sky",e,`object expected, ${v} found`)];let x=[];for(const E in e)x=x.concat(h[E]?s.validateSpec({key:E,value:e[E],valueSpec:h[E],style:p,styleSpec:r}):[new vt(E,e[E],`unknown property "${E}"`)]);return x}function gl(s){const e=s.value,r=s.styleSpec,h=r.terrain,p=s.style;let v=[];const x=gn(e);if(e===void 0)return v;if(x!=="object")return v=v.concat([new vt("terrain",e,`object expected, ${x} found`)]),v;for(const E in e)v=v.concat(h[E]?s.validateSpec({key:E,value:e[E],valueSpec:h[E],validateSpec:s.validateSpec,style:p,styleSpec:r}):[new vt(E,e[E],`unknown property "${E}"`)]);return v}function Qp(s){let e=[];const r=s.value,h=s.key;if(Array.isArray(r)){const p=[],v=[];for(const x in r)r[x].id&&p.includes(r[x].id)&&e.push(new vt(h,r,`all the sprites' ids must be unique, but ${r[x].id} is duplicated`)),p.push(r[x].id),r[x].url&&v.includes(r[x].url)&&e.push(new vt(h,r,`all the sprites' URLs must be unique, but ${r[x].url} is duplicated`)),v.push(r[x].url),e=e.concat(hr({key:`${h}[${x}]`,value:r[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return e}return Ls({key:h,value:r})}function Mg(s){return e=s.value,e&&e.constructor===Object?[]:[new vt(s.key,s.value,`object expected, ${gn(s.value)} found`)];var e}const Cg={"*":()=>[],array:Vu,boolean:function(s){const e=s.value,r=s.key,h=gn(e);return h!=="boolean"?[new vt(r,e,`boolean expected, ${h} found`)]:[]},number:Jl,color:Xh,constants:ks,enum:pl,filter:Qh,function:Hc,layer:Cf,object:hr,source:Kh,light:ml,sky:Ar,terrain:gl,projection:function(s){const e=s.value,r=s.styleSpec,h=r.projection,p=s.style,v=gn(e);if(e===void 0)return[];if(v!=="object")return[new vt("projection",e,`object expected, ${v} found`)];let x=[];for(const E in e)x=x.concat(h[E]?s.validateSpec({key:E,value:e[E],valueSpec:h[E],style:p,styleSpec:r}):[new vt(E,e[E],`unknown property "${E}"`)]);return x},projectionDefinition:function(s){const e=s.key;let r=s.value;r=r instanceof String?r.valueOf():r;const h=gn(r);return h!=="array"||function(p){return Array.isArray(p)&&p.length===3&&typeof p[0]=="string"&&typeof p[1]=="string"&&typeof p[2]=="number"}(r)||function(p){return!!["interpolate","step","literal"].includes(p[0])}(r)?["array","string"].includes(h)?[]:[new vt(e,r,`projection expected, invalid type "${h}" found`)]:[new vt(e,r,`projection expected, invalid array ${JSON.stringify(r)} found`)]},string:Ls,formatted:function(s){return Ls(s).length===0?[]:vo(s)},resolvedImage:function(s){return Ls(s).length===0?[]:vo(s)},padding:function(s){const e=s.key,r=s.value;if(gn(r)==="array"){if(r.length<1||r.length>4)return[new vt(e,r,`padding requires 1 to 4 values; ${r.length} values found`)];const h={type:"number"};let p=[];for(let v=0;v<r.length;v++)p=p.concat(s.validateSpec({key:`${e}[${v}]`,value:r[v],validateSpec:s.validateSpec,valueSpec:h}));return p}return Jl({key:e,value:r,valueSpec:{}})},numberArray:function(s){const e=s.key,r=s.value;if(gn(r)==="array"){const h={type:"number"};if(r.length<1)return[new vt(e,r,"array length at least 1 expected, length 0 found")];let p=[];for(let v=0;v<r.length;v++)p=p.concat(s.validateSpec({key:`${e}[${v}]`,value:r[v],validateSpec:s.validateSpec,valueSpec:h}));return p}return Jl({key:e,value:r,valueSpec:{}})},colorArray:function(s){const e=s.key,r=s.value;if(gn(r)==="array"){if(r.length<1)return[new vt(e,r,"array length at least 1 expected, length 0 found")];let h=[];for(let p=0;p<r.length;p++)h=h.concat(Xh({key:`${e}[${p}]`,value:r[p]}));return h}return Xh({key:e,value:r})},variableAnchorOffsetCollection:function(s){const e=s.key,r=s.value,h=gn(r),p=s.styleSpec;if(h!=="array"||r.length<1||r.length%2!=0)return[new vt(e,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<r.length;x+=2)v=v.concat(pl({key:`${e}[${x}]`,value:r[x],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(Vu({key:`${e}[${x+1}]`,value:r[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:p}));return v},sprite:Qp,state:Mg};function Df(s){const e=s.value,r=s.valueSpec,h=s.styleSpec;return s.validateSpec=Df,r.expression&&hl(Un(e))?Hc(s):r.expression&&Wh(Go(e))?vo(s):r.type&&Cg[r.type]?Cg[r.type](s):hr(di({},s,{valueSpec:r.type?h[r.type]:r}))}function dr(s){const e=s.value,r=s.key,h=Ls(s);return h.length||(e.indexOf("{fontstack}")===-1&&h.push(new vt(r,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&h.push(new vt(r,e,'"glyphs" url must include a "{range}" token'))),h}function Ga(s,e=me){let r=[];return r=r.concat(Df({key:"",value:s,valueSpec:e.$root,styleSpec:e,style:s,validateSpec:Df,objectElementValidators:{glyphs:dr,"*":()=>[]}})),s.constants&&(r=r.concat(ks({key:"constants",value:s.constants}))),Ns(r)}function Mr(s){return function(e){return s(Object.assign({},e,{validateSpec:Df}))}}function Ns(s){return[].concat(s).sort((e,r)=>e.line-r.line)}function ji(s){return function(...e){return Ns(s.apply(this,e))}}Ga.source=ji(Mr(Kh)),Ga.sprite=ji(Mr(Qp)),Ga.glyphs=ji(Mr(dr)),Ga.light=ji(Mr(ml)),Ga.sky=ji(Mr(Ar)),Ga.terrain=ji(Mr(gl)),Ga.state=ji(Mr(Mg)),Ga.layer=ji(Mr(Cf)),Ga.filter=ji(Mr(Qh)),Ga.paintProperty=ji(Mr(Os)),Ga.layoutProperty=ji(Mr(to));const Ps=me,bo=Ga,f0=bo.light,Dg=bo.sky,Jh=bo.paintProperty,Kp=bo.layoutProperty;function zs(s,e){let r=!1;if(e&&e.length)for(const h of e)s.fire(new Te(new Error(h.message))),r=!0;return r}class Wc{constructor(e,r,h){const p=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const x=new Int32Array(this.arrayBuffer);e=x[0],this.d=(r=x[1])+2*(h=x[2]);for(let C=0;C<this.d*this.d;C++){const k=x[3+C],P=x[3+C+1];p.push(k===P?null:x.subarray(k,P))}const E=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],E),this.bboxes=x.subarray(E),this.insert=this._insertReadonly}else{this.d=r+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=e,this.padding=h,this.scale=r/e,this.uid=0;const v=h/r*e;this.min=-v,this.max=e+v}insert(e,r,h,p,v){this._forEachCell(r,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(r),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,r,h,p,v,x){this.cells[v].push(x)}query(e,r,h,p,v){const x=this.min,E=this.max;if(e<=x&&r<=x&&E<=h&&E<=p&&!v)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(e,r,h,p,this._queryCell,C,{},v),C}}_queryCell(e,r,h,p,v,x,E,C){const k=this.cells[v];if(k!==null){const P=this.keys,j=this.bboxes;for(let U=0;U<k.length;U++){const G=k[U];if(E[G]===void 0){const Z=4*G;(C?C(j[Z+0],j[Z+1],j[Z+2],j[Z+3]):e<=j[Z+2]&&r<=j[Z+3]&&h>=j[Z+0]&&p>=j[Z+1])?(E[G]=!0,x.push(P[G])):E[G]=!1}}}}_forEachCell(e,r,h,p,v,x,E,C){const k=this._convertToCellCoord(e),P=this._convertToCellCoord(r),j=this._convertToCellCoord(h),U=this._convertToCellCoord(p);for(let G=k;G<=j;G++)for(let Z=P;Z<=U;Z++){const X=this.d*Z+G;if((!C||C(this._convertFromCellCoord(G),this._convertFromCellCoord(Z),this._convertFromCellCoord(G+1),this._convertFromCellCoord(Z+1)))&&v.call(this,e,r,h,p,X,x,E,C))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,r=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(r+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=r;for(let x=0;x<e.length;x++){const E=e[x];p[3+x]=v,p.set(E,v),v+=E.length}return p[3+e.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+e.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(e,r){const h=e.toArrayBuffer();return r&&r.push(h),{buffer:h}}static deserialize(e){return new Wc(e.buffer)}}const Za={};function Ot(s,e,r={}){if(Za[s])throw new Error(`${s} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:s,writeable:!1}),Za[s]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}Ot("Object",Object),Ot("Set",Set),Ot("TransferableGridIndex",Wc),Ot("Color",Dn),Ot("Error",Error),Ot("AJAXError",wa),Ot("ResolvedImage",ir),Ot("StylePropertyFunction",dl),Ot("StyleExpression",zu,{omit:["_evaluator"]}),Ot("ZoomDependentExpression",Ma),Ot("ZoomConstantExpression",Ql),Ot("CompoundExpression",_o,{omit:["_evaluate"]});for(const s in Nu)Nu[s]._classRegistryKey||Ot(`Expression_${s}`,Nu[s]);function $o(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function ed(s){return s.$name||s.constructor._classRegistryKey}function td(s){return!function(e){if(e===null||typeof e!="object")return!1;const r=ed(e);return!(!r||r==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||$o(s)||ba(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function nc(s,e){if(td(s))return($o(s)||ba(s))&&e&&e.push(s),ArrayBuffer.isView(s)&&e&&e.push(s.buffer),s instanceof ImageData&&e&&e.push(s.data.buffer),s;if(Array.isArray(s)){const v=[];for(const x of s)v.push(nc(x,e));return v}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const r=ed(s);if(!r)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!Za[r])throw new Error(`${r} is not registered.`);const{klass:h}=Za[r],p=h.serialize?h.serialize(s,e):{};if(h.serialize){if(e&&p===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in s){if(!s.hasOwnProperty(v)||Za[r].omit.indexOf(v)>=0)continue;const x=s[v];p[v]=Za[r].shallow.indexOf(v)>=0?x:nc(x,e)}s instanceof Error&&(p.message=s.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(p.$name=r),p}function Fs(s){if(td(s))return s;if(Array.isArray(s))return s.map(Fs);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const e=ed(s)||"Object";if(!Za[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:r}=Za[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(s);const h=Object.create(r.prototype);for(const p of Object.keys(s)){if(p==="$name")continue;const v=s[p];h[p]=Za[e].shallow.indexOf(p)>=0?v:Fs(v)}return h}class If{constructor(){this.first=!0}update(e,r){const h=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=r),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=h,!0))}}function Xc(s){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function xo(s){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function Jp(s){return/\s/u.test(String.fromCodePoint(s))}function Uu(s){for(const e of s)if(xo(e.codePointAt(0)))return!0;return!1}function yl(s){for(const e of s)if(!Gu(e.codePointAt(0)))return!1;return!0}function Qc(s){const e=s.map(r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}}).filter(r=>r);return new RegExp(e.join("|"),"u")}const nd=Qc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Gu(s){return!nd.test(String.fromCodePoint(s))}function Zu(s){return!(xo(s)||(e=s,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(e))));var e}const Rf=Qc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function _l(s){return Rf.test(String.fromCodePoint(s))}function Ig(s,e){return!(!e&&_l(s)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(s)))}function vl(s){for(const e of s)if(_l(e.codePointAt(0)))return!0;return!1}const js=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(js.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,e){return c(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;const r=s.pluginURL,h=new Promise(v=>{this.loadScriptResolve=v});e(r);const p=new Promise(v=>setTimeout(()=>v(),this.TIMEOUT));if(yield Promise.race([h,p]),this.isParsed()){const v={pluginStatus:"loaded",pluginURL:r};return this.setState(v),v}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${r}`)})}};class ti{constructor(e,r){this.isSupportedScript=ic,this.zoom=e,r?(this.now=r.now||0,this.fadeDuration=r.fadeDuration||0,this.zoomHistory=r.zoomHistory||new If,this.transition=r.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new If,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,r=e-Math.floor(e),h=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*r}}}function ic(s){return function(e,r){for(const h of e)if(!Ig(h.codePointAt(0),r))return!1;return!0}(s,js.getRTLTextPluginStatus()==="loaded")}const wo="-transition";class bl{constructor(e,r,h){this.property=e,this.value=r,this.expression=function(p,v,x){if(hl(p))return new dl(p,v);if(Wh(p)){const E=Yc(p,v,x);if(E.result==="error")throw new Error(E.value.map(C=>`${C.key}: ${C.message}`).join(", "));return E.value}{let E=p;return v.type==="color"&&typeof p=="string"?E=Dn.parse(p):v.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?v.type!=="numberArray"||typeof p!="number"&&!Array.isArray(p)?v.type!=="colorArray"||typeof p!="string"&&!Array.isArray(p)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(p)?E=Er.parse(p):v.type==="projectionDefinition"&&typeof p=="string"&&(E=Vr.parse(p)):E=yr.parse(p):E=ur.parse(p):E=cr.parse(p),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>E}}}(r===void 0?e.specification.default:r,e.specification,h)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,r,h){return this.property.possiblyEvaluate(this,e,r,h)}}class id{constructor(e,r){this.property=e,this.value=new bl(e,void 0,r)}transitioned(e,r){return new Kc(this.property,this.value,r,rn({},e.transition,this.transition),e.now)}untransitioned(){return new Kc(this.property,this.value,null,{},0)}}class kf{constructor(e,r){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._globalState=r}getValue(e){return Ri(this._values[e].value.value)}setValue(e,r){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new id(this._values[e].property,this._globalState)),this._values[e].value=new bl(this._values[e].property,r===null?void 0:Ri(r),this._globalState)}getTransition(e){return Ri(this._values[e].transition)}setTransition(e,r){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new id(this._values[e].property,this._globalState)),this._values[e].transition=Ri(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const h=this.getValue(r);h!==void 0&&(e[r]=h);const p=this.getTransition(r);p!==void 0&&(e[`${r}${wo}`]=p)}return e}transitioned(e,r){const h=new Jc(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(e,r._values[p]);return h}untransitioned(){const e=new Jc(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class Kc{constructor(e,r,h,p,v){this.property=e,this.value=r,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,e.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(e,r,h){const p=e.now||0,v=this.value.possiblyEvaluate(e,r,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(e,r,h);{const E=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(e,r,h),v,bt(E))}}return v}}class Jc{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,h){const p=new So(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(e,r,h);return p}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class em{constructor(e,r){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._globalState=r}hasValue(e){return this._values[e].value!==void 0}getValue(e){return Ri(this._values[e].value)}setValue(e,r){this._values[e]=new bl(this._values[e].property,r===null?void 0:Ri(r),this._globalState)}serialize(){const e={};for(const r of Object.keys(this._values)){const h=this.getValue(r);h!==void 0&&(e[r]=h)}return e}possiblyEvaluate(e,r,h){const p=new So(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(e,r,h);return p}}class To{constructor(e,r,h){this.property=e,this.value=r,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,h,p){return this.property.evaluate(this.value,this.parameters,e,r,h,p)}}class So{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class jt{constructor(e){this.specification=e}possiblyEvaluate(e,r){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(r)}interpolate(e,r,h){const p=jo[this.specification.type];return p?p(e,r,h):e}}class Qt{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,h,p){return new To(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},h,p)}:e.expression,r)}interpolate(e,r,h){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new To(this,{kind:"constant",value:void 0},e.parameters);const p=jo[this.specification.type];if(p){const v=p(e.value.value,r.value.value,h);return new To(this,{kind:"constant",value:v},e.parameters)}return e}evaluate(e,r,h,p,v,x){return e.kind==="constant"?e.value:e.evaluate(r,h,p,v,x)}}class eu extends Qt{possiblyEvaluate(e,r,h,p){if(e.value===void 0)return new To(this,{kind:"constant",value:void 0},r);if(e.expression.kind==="constant"){const v=e.expression.evaluate(r,null,{},h,p),x=e.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,E=this._calculate(x,x,x,r);return new To(this,{kind:"constant",value:E},r)}if(e.expression.kind==="camera"){const v=this._calculate(e.expression.evaluate({zoom:r.zoom-1}),e.expression.evaluate({zoom:r.zoom}),e.expression.evaluate({zoom:r.zoom+1}),r);return new To(this,{kind:"constant",value:v},r)}return new To(this,e.expression,r)}evaluate(e,r,h,p,v,x){if(e.kind==="source"){const E=e.evaluate(r,h,p,v,x);return this._calculate(E,E,E,r)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(r.zoom)-1},h,p),e.evaluate({zoom:Math.floor(r.zoom)},h,p),e.evaluate({zoom:Math.floor(r.zoom)+1},h,p),r):e.value}_calculate(e,r,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:h,to:r}}interpolate(e){return e}}class Of{constructor(e){this.specification=e}possiblyEvaluate(e,r,h,p){if(e.value!==void 0){if(e.expression.kind==="constant"){const v=e.expression.evaluate(r,null,{},h,p);return this._calculate(v,v,v,r)}return this._calculate(e.expression.evaluate(new ti(Math.floor(r.zoom-1),r)),e.expression.evaluate(new ti(Math.floor(r.zoom),r)),e.expression.evaluate(new ti(Math.floor(r.zoom+1),r)),r)}}_calculate(e,r,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:h,to:r}}interpolate(e){return e}}class ta{constructor(e){this.specification=e}possiblyEvaluate(e,r,h,p){return!!e.expression.evaluate(r,null,{},h,p)}interpolate(){return!1}}class Ti{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in e){const h=e[r];h.specification.overridable&&this.overridableProperties.push(r);const p=this.defaultPropertyValues[r]=new bl(h,void 0,void 0),v=this.defaultTransitionablePropertyValues[r]=new id(h,void 0);this.defaultTransitioningPropertyValues[r]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=p.possiblyEvaluate({})}}}Ot("DataDrivenProperty",Qt),Ot("DataConstantProperty",jt),Ot("CrossFadedDataDrivenProperty",eu),Ot("CrossFadedProperty",Of),Ot("ColorRampProperty",ta);class Cr extends Ue{constructor(e,r,h){if(super(),this.id=e.id,this.type=e.type,this._globalState=h,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=Ua(e.filter,h)),r.layout&&(this._unevaluatedLayout=new em(r.layout,h)),r.paint)){this._transitionablePaint=new kf(r.paint,h);for(const p in e.paint)this.setPaintProperty(p,e.paint[p],{validate:!1});for(const p in e.layout)this.setLayoutProperty(p,e.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new So(r.paint)}}setFilter(e){this.filter=e,this._featureFilter=Ua(e,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){const e=new Set;if(this._unevaluatedLayout)for(const r in this._unevaluatedLayout._values){const h=this._unevaluatedLayout._values[r];for(const p of h.getGlobalStateRefs())e.add(p)}for(const r of this._featureFilter.getGlobalStateRefs())e.add(r);return e}getPaintAffectingGlobalStateRefs(){var e;const r=new globalThis.Map;if(this._transitionablePaint)for(const h in this._transitionablePaint._values){const p=this._transitionablePaint._values[h].value;for(const v of p.getGlobalStateRefs()){const x=(e=r.get(v))!==null&&e!==void 0?e:[];x.push({name:h,value:p.value}),r.set(v,x)}}return r}setLayoutProperty(e,r,h={}){r!=null&&this._validate(Kp,`layers.${this.id}.layout.${e}`,e,r,h)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,r):this.visibility=r)}getPaintProperty(e){return e.endsWith(wo)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,h={}){if(r!=null&&this._validate(Jh,`layers.${this.id}.paint.${e}`,e,r,h))return!1;if(e.endsWith(wo))return this._transitionablePaint.setTransition(e.slice(0,-11),r||void 0),!1;{const p=this._transitionablePaint._values[e],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),E=p.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);const C=this._transitionablePaint._values[e].value;return C.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(e,E,C)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,r,h){return!1}isHidden(e,r=!1){return!!(this.minzoom&&e<(r?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),tr(e,(r,h)=>!(r===void 0||h==="layout"&&!Object.keys(r).length||h==="paint"&&!Object.keys(r).length))}_validate(e,r,h,p,v={}){return(!v||v.validate!==!1)&&zs(this,e.call(bo,{key:r,layerType:this.type,objectKey:h,value:p,styleSpec:me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof To&&Wl(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}}let Lf;var Rg={get paint(){return Lf=Lf||new Ti({"raster-opacity":new jt(me.paint_raster["raster-opacity"]),"raster-hue-rotate":new jt(me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jt(me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jt(me.paint_raster["raster-brightness-max"]),"raster-saturation":new jt(me.paint_raster["raster-saturation"]),"raster-contrast":new jt(me.paint_raster["raster-contrast"]),"raster-resampling":new jt(me.paint_raster["raster-resampling"]),"raster-fade-duration":new jt(me.paint_raster["raster-fade-duration"])})}};class rc extends Cr{constructor(e,r){super(e,Rg,r)}}const no={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Bi{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Kn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ri(s,e=1){let r=0,h=0;return{members:s.map(p=>{const v=no[p.type].BYTES_PER_ELEMENT,x=r=yn(r,Math.max(e,v)),E=p.components||1;return h=Math.max(h,v),r+=v*E,{name:p.name,type:p.type,components:E,offset:x}}),size:yn(r,Math.max(h,e)),alignment:e}}function yn(s,e){return Math.ceil(s/e)*e}class Jn extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const h=this.length;return this.resize(h+1),this.emplace(h,e,r)}emplace(e,r,h){const p=2*e;return this.int16[p+0]=r,this.int16[p+1]=h,e}}Jn.prototype.bytesPerElement=4,Ot("StructArrayLayout2i4",Jn);class Gi extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,h)}emplace(e,r,h,p){const v=3*e;return this.int16[v+0]=r,this.int16[v+1]=h,this.int16[v+2]=p,e}}Gi.prototype.bytesPerElement=6,Ot("StructArrayLayout3i6",Gi);class $u extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,e,r,h,p)}emplace(e,r,h,p,v){const x=4*e;return this.int16[x+0]=r,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,e}}$u.prototype.bytesPerElement=8,Ot("StructArrayLayout4i8",$u);class ac extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,e,r,h,p,v,x)}emplace(e,r,h,p,v,x,E){const C=6*e;return this.int16[C+0]=r,this.int16[C+1]=h,this.int16[C+2]=p,this.int16[C+3]=v,this.int16[C+4]=x,this.int16[C+5]=E,e}}ac.prototype.bytesPerElement=12,Ot("StructArrayLayout2i4i12",ac);class Da extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,e,r,h,p,v,x)}emplace(e,r,h,p,v,x,E){const C=4*e,k=8*e;return this.int16[C+0]=r,this.int16[C+1]=h,this.uint8[k+4]=p,this.uint8[k+5]=v,this.uint8[k+6]=x,this.uint8[k+7]=E,e}}Da.prototype.bytesPerElement=8,Ot("StructArrayLayout2i4ub8",Da);class xl extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const h=this.length;return this.resize(h+1),this.emplace(h,e,r)}emplace(e,r,h){const p=2*e;return this.float32[p+0]=r,this.float32[p+1]=h,e}}xl.prototype.bytesPerElement=8,Ot("StructArrayLayout2f8",xl);class wl extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v,x,E,C,k,P){const j=this.length;return this.resize(j+1),this.emplace(j,e,r,h,p,v,x,E,C,k,P)}emplace(e,r,h,p,v,x,E,C,k,P,j){const U=10*e;return this.uint16[U+0]=r,this.uint16[U+1]=h,this.uint16[U+2]=p,this.uint16[U+3]=v,this.uint16[U+4]=x,this.uint16[U+5]=E,this.uint16[U+6]=C,this.uint16[U+7]=k,this.uint16[U+8]=P,this.uint16[U+9]=j,e}}wl.prototype.bytesPerElement=20,Ot("StructArrayLayout10ui20",wl);class Tl extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v,x,E,C){const k=this.length;return this.resize(k+1),this.emplace(k,e,r,h,p,v,x,E,C)}emplace(e,r,h,p,v,x,E,C,k){const P=8*e;return this.uint16[P+0]=r,this.uint16[P+1]=h,this.uint16[P+2]=p,this.uint16[P+3]=v,this.uint16[P+4]=x,this.uint16[P+5]=E,this.uint16[P+6]=C,this.uint16[P+7]=k,e}}Tl.prototype.bytesPerElement=16,Ot("StructArrayLayout8ui16",Tl);class rd extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v,x,E,C,k,P,j,U){const G=this.length;return this.resize(G+1),this.emplace(G,e,r,h,p,v,x,E,C,k,P,j,U)}emplace(e,r,h,p,v,x,E,C,k,P,j,U,G){const Z=12*e;return this.int16[Z+0]=r,this.int16[Z+1]=h,this.int16[Z+2]=p,this.int16[Z+3]=v,this.uint16[Z+4]=x,this.uint16[Z+5]=E,this.uint16[Z+6]=C,this.uint16[Z+7]=k,this.int16[Z+8]=P,this.int16[Z+9]=j,this.int16[Z+10]=U,this.int16[Z+11]=G,e}}rd.prototype.bytesPerElement=24,Ot("StructArrayLayout4i4ui4i24",rd);class Zi extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,h)}emplace(e,r,h,p){const v=3*e;return this.float32[v+0]=r,this.float32[v+1]=h,this.float32[v+2]=p,e}}Zi.prototype.bytesPerElement=12,Ot("StructArrayLayout3f12",Zi);class oc extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}oc.prototype.bytesPerElement=4,Ot("StructArrayLayout1ul4",oc);class Sl extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v,x,E,C,k){const P=this.length;return this.resize(P+1),this.emplace(P,e,r,h,p,v,x,E,C,k)}emplace(e,r,h,p,v,x,E,C,k,P){const j=10*e,U=5*e;return this.int16[j+0]=r,this.int16[j+1]=h,this.int16[j+2]=p,this.int16[j+3]=v,this.int16[j+4]=x,this.int16[j+5]=E,this.uint32[U+3]=C,this.uint16[j+8]=k,this.uint16[j+9]=P,e}}Sl.prototype.bytesPerElement=20,Ot("StructArrayLayout6i1ul2ui20",Sl);class Nf extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,e,r,h,p,v,x)}emplace(e,r,h,p,v,x,E){const C=6*e;return this.int16[C+0]=r,this.int16[C+1]=h,this.int16[C+2]=p,this.int16[C+3]=v,this.int16[C+4]=x,this.int16[C+5]=E,e}}Nf.prototype.bytesPerElement=12,Ot("StructArrayLayout2i2i2i12",Nf);class ad extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,e,r,h,p,v)}emplace(e,r,h,p,v,x){const E=4*e,C=8*e;return this.float32[E+0]=r,this.float32[E+1]=h,this.float32[E+2]=p,this.int16[C+6]=v,this.int16[C+7]=x,e}}ad.prototype.bytesPerElement=16,Ot("StructArrayLayout2f1f2i16",ad);class tu extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,e,r,h,p,v,x)}emplace(e,r,h,p,v,x,E){const C=16*e,k=4*e,P=8*e;return this.uint8[C+0]=r,this.uint8[C+1]=h,this.float32[k+1]=p,this.float32[k+2]=v,this.int16[P+6]=x,this.int16[P+7]=E,e}}tu.prototype.bytesPerElement=16,Ot("StructArrayLayout2ub2f2i16",tu);class Yu extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,h)}emplace(e,r,h,p){const v=3*e;return this.uint16[v+0]=r,this.uint16[v+1]=h,this.uint16[v+2]=p,e}}Yu.prototype.bytesPerElement=6,Ot("StructArrayLayout3ui6",Yu);class od extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v,x,E,C,k,P,j,U,G,Z,X,ee,ce){const ve=this.length;return this.resize(ve+1),this.emplace(ve,e,r,h,p,v,x,E,C,k,P,j,U,G,Z,X,ee,ce)}emplace(e,r,h,p,v,x,E,C,k,P,j,U,G,Z,X,ee,ce,ve){const fe=24*e,ge=12*e,Ne=48*e;return this.int16[fe+0]=r,this.int16[fe+1]=h,this.uint16[fe+2]=p,this.uint16[fe+3]=v,this.uint32[ge+2]=x,this.uint32[ge+3]=E,this.uint32[ge+4]=C,this.uint16[fe+10]=k,this.uint16[fe+11]=P,this.uint16[fe+12]=j,this.float32[ge+7]=U,this.float32[ge+8]=G,this.uint8[Ne+36]=Z,this.uint8[Ne+37]=X,this.uint8[Ne+38]=ee,this.uint32[ge+10]=ce,this.int16[fe+22]=ve,e}}od.prototype.bytesPerElement=48,Ot("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",od);class qu extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,h,p,v,x,E,C,k,P,j,U,G,Z,X,ee,ce,ve,fe,ge,Ne,Pe,He,ft,st,yt,It,Et){const At=this.length;return this.resize(At+1),this.emplace(At,e,r,h,p,v,x,E,C,k,P,j,U,G,Z,X,ee,ce,ve,fe,ge,Ne,Pe,He,ft,st,yt,It,Et)}emplace(e,r,h,p,v,x,E,C,k,P,j,U,G,Z,X,ee,ce,ve,fe,ge,Ne,Pe,He,ft,st,yt,It,Et,At){const lt=32*e,Wt=16*e;return this.int16[lt+0]=r,this.int16[lt+1]=h,this.int16[lt+2]=p,this.int16[lt+3]=v,this.int16[lt+4]=x,this.int16[lt+5]=E,this.int16[lt+6]=C,this.int16[lt+7]=k,this.uint16[lt+8]=P,this.uint16[lt+9]=j,this.uint16[lt+10]=U,this.uint16[lt+11]=G,this.uint16[lt+12]=Z,this.uint16[lt+13]=X,this.uint16[lt+14]=ee,this.uint16[lt+15]=ce,this.uint16[lt+16]=ve,this.uint16[lt+17]=fe,this.uint16[lt+18]=ge,this.uint16[lt+19]=Ne,this.uint16[lt+20]=Pe,this.uint16[lt+21]=He,this.uint16[lt+22]=ft,this.uint32[Wt+12]=st,this.float32[Wt+13]=yt,this.float32[Wt+14]=It,this.uint16[lt+30]=Et,this.uint16[lt+31]=At,e}}qu.prototype.bytesPerElement=64,Ot("StructArrayLayout8i15ui1ul2f2ui64",qu);class Gr extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}Gr.prototype.bytesPerElement=4,Ot("StructArrayLayout1f4",Gr);class w extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,h)}emplace(e,r,h,p){const v=3*e;return this.uint16[6*e+0]=r,this.float32[v+1]=h,this.float32[v+2]=p,e}}w.prototype.bytesPerElement=12,Ot("StructArrayLayout1ui2f12",w);class n extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,h)}emplace(e,r,h,p){const v=4*e;return this.uint32[2*e+0]=r,this.uint16[v+2]=h,this.uint16[v+3]=p,e}}n.prototype.bytesPerElement=8,Ot("StructArrayLayout1ul2ui8",n);class l extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const h=this.length;return this.resize(h+1),this.emplace(h,e,r)}emplace(e,r,h){const p=2*e;return this.uint16[p+0]=r,this.uint16[p+1]=h,e}}l.prototype.bytesPerElement=4,Ot("StructArrayLayout2ui4",l);class m extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}m.prototype.bytesPerElement=2,Ot("StructArrayLayout1ui2",m);class b extends Kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,e,r,h,p)}emplace(e,r,h,p,v){const x=4*e;return this.float32[x+0]=r,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,e}}b.prototype.bytesPerElement=16,Ot("StructArrayLayout4f16",b);class T extends Bi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}T.prototype.size=20;class M extends Sl{get(e){return new T(this,e)}}Ot("CollisionBoxArray",M);class R extends Bi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}R.prototype.size=48;class L extends od{get(e){return new R(this,e)}}Ot("PlacedSymbolArray",L);class F extends Bi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}F.prototype.size=64;class B extends qu{get(e){return new F(this,e)}}Ot("SymbolInstanceArray",B);class Y extends Gr{getoffsetX(e){return this.float32[1*e+0]}}Ot("GlyphOffsetArray",Y);class $ extends Gi{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Ot("SymbolLineVertexArray",$);class J extends Bi{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}J.prototype.size=12;class oe extends w{get(e){return new J(this,e)}}Ot("TextAnchorOffsetArray",oe);class de extends Bi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}de.prototype.size=8;class pe extends n{get(e){return new de(this,e)}}Ot("FeatureIndexArray",pe);class ye extends Jn{}class be extends Jn{}class Me extends Jn{}class _e extends ac{}class Ce extends Da{}class Re extends xl{}class we extends wl{}class Be extends Tl{}class We extends rd{}class $e extends Zi{}class Ye extends oc{}class qe extends Nf{}class xt extends tu{}class wt extends Yu{}class ut extends l{}const Pt=ri([{name:"a_pos",components:2,type:"Int16"}],4),{members:cn}=Pt;class an{constructor(e=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,r,h,p){const v=this.segments[this.segments.length-1];return e>an.MAX_VERTEX_ARRAY_LENGTH&&bn(`Max vertices per segment is ${an.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${an.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!v||v.vertexLength+e>an.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p?this.createNewSegment(r,h,p):v}createNewSegment(e,r,h){const p={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(p.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(p),p}getOrCreateLatestSegment(e,r,h){return this.prepareSegment(0,e,r,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,h,p){return new an([{vertexOffset:e,primitiveOffset:r,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function Si(s,e){return 256*(s=zt(Math.floor(s),0,255))+zt(Math.floor(e),0,255)}an.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ot("SegmentVector",an);const gi=ri([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Vi=ri([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var ci,fr,Oi,Qi={exports:{}},Ki={exports:{}},rr={exports:{}},ha=function(){if(Oi)return Qi.exports;Oi=1;var s=(ci||(ci=1,Ki.exports=function(r,h){var p,v,x,E,C,k,P,j;for(v=r.length-(p=3&r.length),x=h,C=3432918353,k=461845907,j=0;j<v;)P=255&r.charCodeAt(j)|(255&r.charCodeAt(++j))<<8|(255&r.charCodeAt(++j))<<16|(255&r.charCodeAt(++j))<<24,++j,x=27492+(65535&(E=5*(65535&(x=(x^=P=(65535&(P=(P=(65535&P)*C+(((P>>>16)*C&65535)<<16)&4294967295)<<15|P>>>17))*k+(((P>>>16)*k&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(P=0,p){case 3:P^=(255&r.charCodeAt(j+2))<<16;case 2:P^=(255&r.charCodeAt(j+1))<<8;case 1:x^=P=(65535&(P=(P=(65535&(P^=255&r.charCodeAt(j)))*C+(((P>>>16)*C&65535)<<16)&4294967295)<<15|P>>>17))*k+(((P>>>16)*k&65535)<<16)&4294967295}return x^=r.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),Ki.exports),e=(fr||(fr=1,rr.exports=function(r,h){for(var p,v=r.length,x=h^v,E=0;v>=4;)p=1540483477*(65535&(p=255&r.charCodeAt(E)|(255&r.charCodeAt(++E))<<8|(255&r.charCodeAt(++E))<<16|(255&r.charCodeAt(++E))<<24))+((1540483477*(p>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),v-=4,++E;switch(v){case 3:x^=(255&r.charCodeAt(E+2))<<16;case 2:x^=(255&r.charCodeAt(E+1))<<8;case 1:x=1540483477*(65535&(x^=255&r.charCodeAt(E)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),rr.exports);return Qi.exports=s,Qi.exports.murmur3=s,Qi.exports.murmur2=e,Qi.exports}(),Bs=D(ha);class Yo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,h,p){this.ids.push(sc(e)),this.positions.push(r,h,p)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const r=sc(e);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=r?p=x:h=x+1}const v=[];for(;this.ids[h]===r;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(e,r){const h=new Float64Array(e.ids),p=new Uint32Array(e.positions);return Vs(h,p,0,h.length-1),r&&r.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(e){const r=new Yo;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}}function sc(s){const e=+s;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Bs(String(s))}function Vs(s,e,r,h){for(;r<h;){const p=s[r+h>>1];let v=r-1,x=h+1;for(;;){do v++;while(s[v]<p);do x--;while(s[x]>p);if(v>=x)break;lc(s,v,x),lc(e,3*v,3*x),lc(e,3*v+1,3*x+1),lc(e,3*v+2,3*x+2)}x-r<h-x?(Vs(s,e,r,x),r=x+1):(Vs(s,e,x+1,h),h=x)}}function lc(s,e,r){const h=s[e];s[e]=s[r],s[r]=h}Ot("FeaturePositionMap",Yo);class io{constructor(e,r){this.gl=e.gl,this.location=r}}class qo extends io{constructor(e,r){super(e,r),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class $a extends io{constructor(e,r){super(e,r),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Us extends io{constructor(e,r){super(e,r),this.current=Dn.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const nu=new Float32Array(16);function iu(s){return[Si(255*s.r,255*s.g),Si(255*s.b,255*s.a)]}class $i{constructor(e,r,h){this.value=e,this.uniformNames=r.map(p=>`u_${p}`),this.type=h}setUniform(e,r,h){e.set(h.constantOr(this.value))}getBinding(e,r,h){return this.type==="color"?new Us(e,r):new qo(e,r)}}class yi{constructor(e,r){this.uniformNames=r.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=e.tlbr}setConstantDashPositions(e,r){this.dashTo=[0,e.y,e.height,e.width],this.dashFrom=[0,r.y,r.height,r.width]}setUniform(e,r,h,p){let v=null;p==="u_pattern_to"?v=this.patternTo:p==="u_pattern_from"?v=this.patternFrom:p==="u_dasharray_to"?v=this.dashTo:p==="u_dasharray_from"?v=this.dashFrom:p==="u_pixel_ratio_to"?v=this.pixelRatioTo:p==="u_pixel_ratio_from"&&(v=this.pixelRatioFrom),v!==null&&e.set(v)}getBinding(e,r,h){return h.substr(0,9)==="u_pattern"||h.substr(0,12)==="u_dasharray_"?new $a(e,r):new qo(e,r)}}class ar{constructor(e,r,h,p){this.expression=e,this.type=h,this.maxValue=0,this.paintVertexAttributes=r.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(e,r,h){const p=this.paintVertexArray.length,v=this.expression.evaluate(new ti(0,h),r,{},h.canonical,[],h.formattedSection);this.paintVertexArray.resize(e),this._setPaintValue(p,e,v)}updatePaintArray(e,r,h,p,v){const x=this.expression.evaluate(new ti(0,v),h,p);this._setPaintValue(e,r,x)}_setPaintValue(e,r,h){if(this.type==="color"){const p=iu(h);for(let v=e;v<r;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=e;p<r;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ni{constructor(e,r,h,p,v,x){this.expression=e,this.uniformNames=r.map(E=>`u_${E}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=r.map(E=>({name:`a_${E}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(e,r,h){const p=this.expression.evaluate(new ti(this.zoom,h),r,{},h.canonical,[],h.formattedSection),v=this.expression.evaluate(new ti(this.zoom+1,h),r,{},h.canonical,[],h.formattedSection),x=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(x,e,p,v)}updatePaintArray(e,r,h,p,v){const x=this.expression.evaluate(new ti(this.zoom,v),h,p),E=this.expression.evaluate(new ti(this.zoom+1,v),h,p);this._setPaintValue(e,r,x,E)}_setPaintValue(e,r,h,p){if(this.type==="color"){const v=iu(h),x=iu(p);for(let E=e;E<r;E++)this.paintVertexArray.emplace(E,v[0],v[1],x[0],x[1])}else{for(let v=e;v<r;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r){const h=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,p=zt(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);e.set(p)}getBinding(e,r,h){return new qo(e,r)}}class El{constructor(e,r,h,p,v,x){this.expression=e,this.type=r,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(e,r,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(p,e,this.getPositionIds(r),h)}updatePaintArray(e,r,h,p,v){this._setPaintValues(e,r,this.getPositionIds(h),v)}_setPaintValues(e,r,h,p){const v=this.getPositions(p);if(!v||!h)return;const x=v[h.min],E=v[h.mid],C=v[h.max];if(x&&E&&C)for(let k=e;k<r;k++)this.emplace(this.zoomInPaintVertexArray,k,E,x),this.emplace(this.zoomOutPaintVertexArray,k,E,C)}upload(e){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const r=this.getVertexAttributes();this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,r,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,r,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class tm extends El{getPositions(e){return e.imagePositions}getPositionIds(e){return e.patterns&&e.patterns[this.layerId]}getVertexAttributes(){return gi.members}emplace(e,r,h,p){e.emplace(r,h.tlbr[0],h.tlbr[1],h.tlbr[2],h.tlbr[3],p.tlbr[0],p.tlbr[1],p.tlbr[2],p.tlbr[3],h.pixelRatio,p.pixelRatio)}}class Hu extends El{getPositions(e){return e.dashPositions}getPositionIds(e){return e.dashes&&e.dashes[this.layerId]}getVertexAttributes(){return Vi.members}emplace(e,r,h,p){e.emplace(r,0,h.y,h.height,h.width,0,p.y,p.height,p.width)}}class nm{constructor(e,r,h){this.binders={},this._buffers=[];const p=[];for(const v in e.paint._values){if(!h(v))continue;const x=e.paint.get(v);if(!(x instanceof To&&Wl(x.property.specification)))continue;const E=kg(v,e.type),C=x.value,k=x.property.specification.type,P=x.property.useIntegerZoom,j=x.property.specification["property-type"],U=j==="cross-faded"||j==="cross-faded-data-driven";if(C.kind==="constant")this.binders[v]=U?new yi(C.value,E):new $i(C.value,E,k),p.push(`/u_${v}`);else if(C.kind==="source"||U){const G=Gs(v,k,"source");this.binders[v]=U?v==="line-dasharray"?new Hu(C,k,P,r,G,e.id):new tm(C,k,P,r,G,e.id):new ar(C,E,k,G),p.push(`/a_${v}`)}else{const G=Gs(v,k,"composite");this.binders[v]=new ni(C,E,k,P,r,G),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof ar||r instanceof ni?r.maxValue:0}populatePaintArrays(e,r,h){for(const p in this.binders){const v=this.binders[p];(v instanceof ar||v instanceof ni||v instanceof El)&&v.populatePaintArray(e,r,h)}}setConstantPatternPositions(e,r){for(const h in this.binders){const p=this.binders[h];p instanceof yi&&p.setConstantPatternPositions(e,r)}}setConstantDashPositions(e,r){for(const h in this.binders){const p=this.binders[h];p instanceof yi&&p.setConstantDashPositions(e,r)}}updatePaintArrays(e,r,h,p,v){let x=!1;for(const E in e){const C=r.getPositions(E);for(const k of C){const P=h.feature(k.index);for(const j in this.binders){const U=this.binders[j];if((U instanceof ar||U instanceof ni||U instanceof El)&&U.expression.isStateDependent===!0){const G=p.paint.get(j);U.expression=G.value,U.updatePaintArray(k.start,k.end,P,e[E],v),x=!0}}}}return x}defines(){const e=[];for(const r in this.binders){const h=this.binders[r];(h instanceof $i||h instanceof yi)&&e.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const h=this.binders[r];if(h instanceof ar||h instanceof ni)for(let p=0;p<h.paintVertexAttributes.length;p++)e.push(h.paintVertexAttributes[p].name);else if(h instanceof El){const p=h.getVertexAttributes();for(const v of p)e.push(v.name)}}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const h=this.binders[r];if(h instanceof $i||h instanceof yi||h instanceof ni)for(const p of h.uniformNames)e.push(p)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,r){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof $i||v instanceof yi||v instanceof ni){for(const x of v.uniformNames)if(r[x]){const E=v.getBinding(e,r[x],x);h.push({name:x,property:p,binding:E})}}}return h}setUniforms(e,r,h,p){for(const{name:v,property:x,binding:E}of r)this.binders[x].setUniform(E,p,h.get(x),v)}updatePaintBuffers(e){this._buffers=[];for(const r in this.binders){const h=this.binders[r];if(e&&h instanceof El){const p=e.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof ar||h instanceof ni)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(e){for(const r in this.binders){const h=this.binders[r];(h instanceof ar||h instanceof ni||h instanceof El)&&h.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof ar||r instanceof ni||r instanceof El)&&r.destroy()}}}class Al{constructor(e,r,h=()=>!0){this.programConfigurations={};for(const p of e)this.programConfigurations[p.id]=new nm(p,r,h);this.needsUpload=!1,this._featureMap=new Yo,this._bufferOffset=0}populatePaintArrays(e,r,h,p){for(const v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,r,p);r.id!==void 0&&this._featureMap.add(r.id,h,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,r,v,p)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function kg(s,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${e}-`,"").replace(/-/g,"_")]}function Gs(s,e,r){const h={color:{source:xl,composite:b},number:{source:Gr,composite:xl}},p=function(v){return{"line-pattern":{source:we,composite:we},"fill-pattern":{source:we,composite:we},"fill-extrusion-pattern":{source:we,composite:we},"line-dasharray":{source:Be,composite:Be}}[v]}(s);return p&&p[r]||h[e][r]}Ot("ConstantBinder",$i),Ot("CrossFadedConstantBinder",yi),Ot("SourceExpressionBinder",ar),Ot("CrossFadedPatternBinder",tm),Ot("CrossFadedDasharrayBinder",Hu),Ot("CompositeExpressionBinder",ni),Ot("ProgramConfiguration",nm,{omit:["_buffers"]}),Ot("ProgramConfigurationSet",Al);const Wu=Math.pow(2,14)-1,Pf=-Wu-1;function Ml(s){const e=pt/s.extent,r=s.loadGeometry();for(let h=0;h<r.length;h++){const p=r[h];for(let v=0;v<p.length;v++){const x=p[v],E=Math.round(x.x*e),C=Math.round(x.y*e);x.x=zt(E,Pf,Wu),x.y=zt(C,Pf,Wu),(E<x.x||E>x.x+1||C<x.y||C>x.y+1)&&bn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function Ia(s,e){return{type:s.type,id:s.id,properties:s.properties,geometry:e?Ml(s):[]}}const zf=-32768;function Ff(s,e,r,h,p){s.emplaceBack(zf+8*e+h,zf+8*r+p)}class Og{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new be,this.indexArray=new wt,this.segments=new an,this.programConfigurations=new Al(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,h){const p=this.layers[0],v=[];let x=null,E=!1,C=p.type==="heatmap";if(p.type==="circle"){const P=p;x=P.layout.get("circle-sort-key"),E=!x.isConstant(),C=C||P.paint.get("circle-pitch-alignment")==="map"}const k=C?r.subdivisionGranularity.circle:1;for(const{feature:P,id:j,index:U,sourceLayerIndex:G}of e){const Z=this.layers[0]._featureFilter.needGeometry,X=Ia(P,Z);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),X,h))continue;const ee=E?x.evaluate(X,{},h):void 0,ce={id:j,properties:P.properties,type:P.type,sourceLayerIndex:G,index:U,geometry:Z?X.geometry:Ml(P),patterns:{},sortKey:ee};v.push(ce)}E&&v.sort((P,j)=>P.sortKey-j.sortKey);for(const P of v){const{geometry:j,index:U,sourceLayerIndex:G}=P,Z=e[U].feature;this.addFeature(P,j,U,h,k),r.featureIndex.insert(Z,j,U,G,this.index)}}update(e,r,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:h})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,cn),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,h,p,v=1){let x;switch(v){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${v}; valid values are 1, 3, 5, 7.`)}const E=x.length;for(const C of r)for(const k of C){const P=k.x,j=k.y;if(P<0||P>=pt||j<0||j>=pt)continue;const U=this.segments.prepareSegment(E*E,this.layoutVertexArray,this.indexArray,e.sortKey),G=U.vertexLength;for(let Z=0;Z<E;Z++)for(let X=0;X<E;X++)Ff(this.layoutVertexArray,P,j,x[X],x[Z]);for(let Z=0;Z<E-1;Z++)for(let X=0;X<E-1;X++){const ee=G+Z*E+X,ce=G+(Z+1)*E+X;this.indexArray.emplaceBack(ee,ce+1,ee+1),this.indexArray.emplaceBack(ee,ce,ce+1)}U.vertexLength+=E*E,U.primitiveLength+=(E-1)*(E-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:{},canonical:p})}}function im(s,e){for(let r=0;r<s.length;r++)if(sd(e,s[r]))return!0;for(let r=0;r<e.length;r++)if(sd(s,e[r]))return!0;return!!Ng(s,e)}function rm(s,e,r){return!!sd(s,e)||!!am(e,s,r)}function Lg(s,e){if(s.length===1)return da(e,s[0]);for(let r=0;r<e.length;r++){const h=e[r];for(let p=0;p<h.length;p++)if(sd(s,h[p]))return!0}for(let r=0;r<s.length;r++)if(da(e,s[r]))return!0;for(let r=0;r<e.length;r++)if(Ng(s,e[r]))return!0;return!1}function zv(s,e,r){if(s.length>1){if(Ng(s,e))return!0;for(let h=0;h<e.length;h++)if(am(e[h],s,r))return!0}for(let h=0;h<s.length;h++)if(am(s[h],e,r))return!0;return!1}function Ng(s,e){if(s.length===0||e.length===0)return!1;for(let r=0;r<s.length-1;r++){const h=s[r],p=s[r+1];for(let v=0;v<e.length-1;v++)if(a1(h,p,e[v],e[v+1]))return!0}return!1}function a1(s,e,r,h){return xn(s,r,h)!==xn(e,r,h)&&xn(s,e,r)!==xn(s,e,h)}function am(s,e,r){const h=r*r;if(e.length===1)return s.distSqr(e[0])<h;for(let p=1;p<e.length;p++)if(Dr(s,e[p-1],e[p])<h)return!0;return!1}function Dr(s,e,r){const h=e.distSqr(r);if(h===0)return s.distSqr(e);const p=((s.x-e.x)*(r.x-e.x)+(s.y-e.y)*(r.y-e.y))/h;return s.distSqr(p<0?e:p>1?r:r.sub(e)._mult(p)._add(e))}function da(s,e){let r,h,p,v=!1;for(let x=0;x<s.length;x++){r=s[x];for(let E=0,C=r.length-1;E<r.length;C=E++)h=r[E],p=r[C],h.y>e.y!=p.y>e.y&&e.x<(p.x-h.x)*(e.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function sd(s,e){let r=!1;for(let h=0,p=s.length-1;h<s.length;p=h++){const v=s[h],x=s[p];v.y>e.y!=x.y>e.y&&e.x<(x.x-v.x)*(e.y-v.y)/(x.y-v.y)+v.x&&(r=!r)}return r}function Fv(s,e,r){const h=r[0],p=r[2];if(s.x<h.x&&e.x<h.x||s.x>p.x&&e.x>p.x||s.y<h.y&&e.y<h.y||s.y>p.y&&e.y>p.y)return!1;const v=xn(s,e,r[0]);return v!==xn(s,e,r[1])||v!==xn(s,e,r[2])||v!==xn(s,e,r[3])}function ld(s,e,r){const h=e.paint.get(s).value;return h.kind==="constant"?h.value:r.programConfigurations.get(e.id).getMaxValue(s)}function om(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Xu(s,e,r,h,p){if(!e[0]&&!e[1])return s;const v=A.convert(e)._mult(p);r==="viewport"&&v._rotate(-h);const x=[];for(let E=0;E<s.length;E++)x.push(s[E].sub(v));return x}function jv({queryGeometry:s,size:e},r){return rm(s,r,e)}function Pg({queryGeometry:s,size:e,transform:r,unwrappedTileID:h,getElevation:p},v){return rm(s,v,e*(r.projectTileCoordinates(v.x,v.y,h,p).signedDistanceFromCamera/r.cameraToCenterDistance))}function Bv({queryGeometry:s,size:e,transform:r,unwrappedTileID:h,getElevation:p},v){const x=r.projectTileCoordinates(v.x,v.y,h,p).signedDistanceFromCamera,E=e*(r.cameraToCenterDistance/x);return rm(s,lm(v,r,h,p),E)}function o1({queryGeometry:s,size:e,transform:r,unwrappedTileID:h,getElevation:p},v){return rm(s,lm(v,r,h,p),e)}function sm({queryGeometry:s,size:e,transform:r,unwrappedTileID:h,getElevation:p,pitchAlignment:v="map",pitchScale:x="map"},E){const C=v==="map"?x==="map"?jv:Pg:x==="map"?Bv:o1,k={queryGeometry:s,size:e,transform:r,unwrappedTileID:h,getElevation:p};for(const P of E)for(const j of P)if(C(k,j))return!0;return!1}function lm(s,e,r,h){const p=e.projectTileCoordinates(s.x,s.y,r,h).point;return new A((.5*p.x+.5)*e.width,(.5*-p.y+.5)*e.height)}let p0,m0;Ot("CircleBucket",Og,{omit:["layers"]});var Vv={get paint(){return m0=m0||new Ti({"circle-radius":new Qt(me.paint_circle["circle-radius"]),"circle-color":new Qt(me.paint_circle["circle-color"]),"circle-blur":new Qt(me.paint_circle["circle-blur"]),"circle-opacity":new Qt(me.paint_circle["circle-opacity"]),"circle-translate":new jt(me.paint_circle["circle-translate"]),"circle-translate-anchor":new jt(me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jt(me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jt(me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qt(me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qt(me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qt(me.paint_circle["circle-stroke-opacity"])})},get layout(){return p0=p0||new Ti({"circle-sort-key":new Qt(me.layout_circle["circle-sort-key"])})}};class g0 extends Cr{constructor(e,r){super(e,Vv,r)}createBucket(e){return new Og(e)}queryRadius(e){const r=e;return ld("circle-radius",this,r)+ld("circle-stroke-width",this,r)+om(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:h,geometry:p,transform:v,pixelsToTileUnits:x,unwrappedTileID:E,getElevation:C}){const k=Xu(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-v.bearingInRadians,x),P=this.paint.get("circle-radius").evaluate(r,h)+this.paint.get("circle-stroke-width").evaluate(r,h),j=this.paint.get("circle-pitch-scale"),U=this.paint.get("circle-pitch-alignment");let G,Z;return U==="map"?(G=k,Z=P*x):(G=function(X,ee,ce,ve){return X.map(fe=>lm(fe,ee,ce,ve))}(k,v,E,C),Z=P),sm({queryGeometry:G,size:Z,transform:v,unwrappedTileID:E,getElevation:C,pitchAlignment:U,pitchScale:j},p)}}class zg extends Og{}let Fg;Ot("HeatmapBucket",zg,{omit:["layers"]});var Uv={get paint(){return Fg=Fg||new Ti({"heatmap-radius":new Qt(me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qt(me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jt(me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ta(me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jt(me.paint_heatmap["heatmap-opacity"])})}};function cm(s,{width:e,height:r},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==e*r*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${e*r*h}`)}else p=new Uint8Array(e*r*h);return s.width=e,s.height=r,s.data=p,s}function um(s,{width:e,height:r},h){if(e===s.width&&r===s.height)return;const p=cm({},{width:e,height:r},h);hm(s,p,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,e),height:Math.min(s.height,r)},h),s.width=e,s.height=r,s.data=p.data}function hm(s,e,r,h,p,v){if(p.width===0||p.height===0)return e;if(p.width>s.width||p.height>s.height||r.x>s.width-p.width||r.y>s.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>e.width||p.height>e.height||h.x>e.width-p.width||h.y>e.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,E=e.data;if(x===E)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<p.height;C++){const k=((r.y+C)*s.width+r.x)*v,P=((h.y+C)*e.width+h.x)*v;for(let j=0;j<p.width*v;j++)E[P+j]=x[k+j]}return e}class jf{constructor(e,r){cm(this,e,1,r)}resize(e){um(this,e,1)}clone(){return new jf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,h,p,v){hm(e,r,h,p,v,1)}}class Ra{constructor(e,r){cm(this,e,4,r)}resize(e){um(this,e,4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ra({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,h,p,v){hm(e,r,h,p,v,4)}setPixel(e,r,h){const p=4*(e*this.width+r);this.data[p+0]=Math.round(255*h.r/h.a),this.data[p+1]=Math.round(255*h.g/h.a),this.data[p+2]=Math.round(255*h.b/h.a),this.data[p+3]=Math.round(255*h.a)}}function y0(s){const e={},r=s.resolution||256,h=s.clips?s.clips.length:1,p=s.image||new Ra({width:r,height:h});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const v=(x,E,C)=>{e[s.evaluationKey]=C;const k=s.expression.evaluate(e);p.setPixel(x/4/r,E/4,k)};if(s.clips)for(let x=0,E=0;x<h;++x,E+=4*r)for(let C=0,k=0;C<r;C++,k+=4){const P=C/(r-1),{start:j,end:U}=s.clips[x];v(E,k,j*(1-P)+U*P)}else for(let x=0,E=0;x<r;x++,E+=4)v(0,E,x/(r-1));return p}Ot("AlphaImage",jf),Ot("RGBAImage",Ra);const Cl="big-fb";class _0 extends Cr{createBucket(e){return new zg(e)}constructor(e,r){super(e,Uv,r),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=y0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Cl)&&this.heatmapFbos.delete(Cl)}queryRadius(e){return ld("heatmap-radius",this,e)}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:h,geometry:p,transform:v,pixelsToTileUnits:x,unwrappedTileID:E,getElevation:C}){return sm({queryGeometry:e,size:this.paint.get("heatmap-radius").evaluate(r,h)*x,transform:v,unwrappedTileID:E,getElevation:C},p)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Gv;var Zv={get paint(){return Gv=Gv||new Ti({"hillshade-illumination-direction":new jt(me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new jt(me.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new jt(me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jt(me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jt(me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jt(me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jt(me.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new jt(me.paint_hillshade["hillshade-method"])})}};class ru extends Cr{constructor(e,r){super(e,Zv,r),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,r=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,p=this.paint.get("hillshade-shadow-color").values;const v=Math.max(e.length,r.length,h.length,p.length);e=e.concat(Array(v-e.length).fill(e.at(-1))),r=r.concat(Array(v-r.length).fill(r.at(-1))),h=h.concat(Array(v-h.length).fill(h.at(-1))),p=p.concat(Array(v-p.length).fill(p.at(-1)));const x=r.map(ki);return{directionRadians:e.map(ki),altitudeRadians:x,shadowColor:p,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let jg;var $v={get paint(){return jg=jg||new Ti({"color-relief-opacity":new jt(me["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new ta(me["paint_color-relief"]["color-relief-color"])})}};class Bf{constructor(e,r,h,p){this.context=e,this.format=h,this.texture=e.gl.createTexture(),this.update(r,p)}update(e,r,h){const{width:p,height:v}=e,x=!(this.size&&this.size[0]===p&&this.size[1]===v||h),{context:E}=this,{gl:C}=E;if(this.useMipmap=!!(r&&r.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!r||r.premultiply!==!1)),x)this.size=[p,v],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ba(e)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,e):C.texImage2D(C.TEXTURE_2D,0,this.format,p,v,0,this.format,C.UNSIGNED_BYTE,e.data);else{const{x:k,y:P}=h||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ba(e)?C.texSubImage2D(C.TEXTURE_2D,0,k,P,C.RGBA,C.UNSIGNED_BYTE,e):C.texSubImage2D(C.TEXTURE_2D,0,k,P,p,v,C.RGBA,C.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,r,h){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),h!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=v.LINEAR),e!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,e),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,h||e),this.filter=e),r!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,r),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Vf{constructor(e,r,h,p=1,v=1,x=1,E=0){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void bn(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=r.height;const C=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=x,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<C;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(C,k)]=this.data[this._idx(C-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,C)]=this.data[this._idx(k,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<C;k++)for(let P=0;P<C;P++){const j=this.get(k,P);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(e,r){const h=new Uint8Array(this.data.buffer),p=4*this._idx(e,r);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}unpack(e,r,h){return e*this.redFactor+r*this.greenFactor+h*this.blueFactor-this.baseShift}pack(e){return Yi(e,this.getUnpackVector())}getPixels(){return new Ra({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,r,h){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let p=r*this.dim,v=r*this.dim+this.dim,x=h*this.dim,E=h*this.dim+this.dim;switch(r){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=E-1;break;case 1:E=x+1}const C=-r*this.dim,k=-h*this.dim;for(let P=x;P<E;P++)for(let j=p;j<v;j++)this.data[this._idx(j,P)]=e.data[this._idx(j+C,P+k)]}}function Yi(s,e){const r=e[0],h=e[1],p=e[2],v=e[3],x=Math.min(r,h,p),E=Math.round((s+v)/x);return{r:Math.floor(E*x/r)%256,g:Math.floor(E*x/h)%256,b:Math.floor(E*x/p)%256}}Ot("DEMData",Vf);class s1 extends Cr{constructor(e,r){super(e,$v,r)}_createColorRamp(e){const r={elevationStops:[],colorStops:[]},h=this._transitionablePaint._values["color-relief-color"].value.expression;if(h instanceof Ql&&h._styleExpression.expression instanceof Ur){this.colorRampExpression=h;const x=h._styleExpression.expression;r.elevationStops=x.labels,r.colorStops=[];for(const E of r.elevationStops)r.colorStops.push(x.evaluate({globals:{elevation:E}}))}if(r.elevationStops.length<1&&(r.elevationStops=[0],r.colorStops=[Dn.transparent]),r.elevationStops.length<2&&(r.elevationStops.push(r.elevationStops[0]+1),r.colorStops.push(r.colorStops[0])),r.elevationStops.length<=e)return r;const p={elevationStops:[],colorStops:[]},v=(r.elevationStops.length-1)/(e-1);for(let x=0;x<r.elevationStops.length-.5;x+=v)p.elevationStops.push(r.elevationStops[Math.round(x)]),p.colorStops.push(r.colorStops[Math.round(x)]);return bn(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${e}, provided: ${r.elevationStops.length}`),p}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,r,h){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const p=this._createColorRamp(r),v=new Ra({width:p.colorStops.length,height:1}),x=new Ra({width:p.colorStops.length,height:1});for(let E=0;E<p.elevationStops.length;E++){const C=Yi(p.elevationStops[E],h);x.setPixel(0,E,new Dn(C.r/255,C.g/255,C.b/255,1)),v.setPixel(0,E,p.colorStops[E])}return this.colorRampTextures={elevationTexture:new Bf(e,x,e.gl.RGBA),colorTexture:new Bf(e,v,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const l1=ri([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yv}=l1;function Qu(s,e,r){const h=r.patternDependencies;let p=!1;for(const v of e){const x=v.paint.get(`${s}-pattern`);x.isConstant()||(p=!0);const E=x.constantOr(null);E&&(p=!0,h[E.to]=!0,h[E.from]=!0)}return p}function cc(s,e,r,h,p){const{zoom:v}=h,x=p.patternDependencies;for(const E of e){const C=E.paint.get(`${s}-pattern`).value;if(C.kind!=="constant"){let k=C.evaluate({zoom:v-1},r,{},p.availableImages),P=C.evaluate({zoom:v},r,{},p.availableImages),j=C.evaluate({zoom:v+1},r,{},p.availableImages);k=k&&k.name?k.name:k,P=P&&P.name?P.name:P,j=j&&j.name?j.name:j,x[k]=!0,x[P]=!0,x[j]=!0,r.patterns[E.id]={min:k,mid:P,max:j}}}return r}function v0(s,e,r,h,p){let v;if(p===function(x,E,C,k){let P=0;for(let j=E,U=C-k;j<C;j+=k)P+=(x[U]-x[j])*(x[j+1]+x[U+1]),U=j;return P}(s,e,r,h)>0)for(let x=e;x<r;x+=h)v=S0(x/h|0,s[x],s[x+1],v);else for(let x=r-h;x>=e;x-=h)v=S0(x/h|0,s[x],s[x+1],v);return v&&Uf(v,v.next)&&(Gf(v),v=v.next),v}function Ku(s,e){if(!s)return s;e||(e=s);let r,h=s;do if(r=!1,h.steiner||!Uf(h,h.next)&&Nn(h.prev,h,h.next)!==0)h=h.next;else{if(Gf(h),h=e=h.prev,h===h.next)break;r=!0}while(r||h!==e);return e}function au(s,e,r,h,p,v,x){if(!s)return;!x&&v&&function(C,k,P,j){let U=C;do U.z===0&&(U.z=Vg(U.x,U.y,k,P,j)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==C);U.prevZ.nextZ=null,U.prevZ=null,function(G){let Z,X=1;do{let ee,ce=G;G=null;let ve=null;for(Z=0;ce;){Z++;let fe=ce,ge=0;for(let Pe=0;Pe<X&&(ge++,fe=fe.nextZ,fe);Pe++);let Ne=X;for(;ge>0||Ne>0&&fe;)ge!==0&&(Ne===0||!fe||ce.z<=fe.z)?(ee=ce,ce=ce.nextZ,ge--):(ee=fe,fe=fe.nextZ,Ne--),ve?ve.nextZ=ee:G=ee,ee.prevZ=ve,ve=ee;ce=fe}ve.nextZ=null,X*=2}while(Z>1)}(U)}(s,h,p,v);let E=s;for(;s.prev!==s.next;){const C=s.prev,k=s.next;if(v?qv(s,h,p,v):uc(s))e.push(C.i,s.i,k.i),Gf(s),s=k.next,E=k.next;else if((s=k)===E){x?x===1?au(s=b0(Ku(s),e),e,r,h,p,v,2):x===2&&Hv(s,e,r,h,p,v):au(Ku(s),e,r,h,p,v,1);break}}}function uc(s){const e=s.prev,r=s,h=s.next;if(Nn(e,r,h)>=0)return!1;const p=e.x,v=r.x,x=h.x,E=e.y,C=r.y,k=h.y,P=Math.min(p,v,x),j=Math.min(E,C,k),U=Math.max(p,v,x),G=Math.max(E,C,k);let Z=h.next;for(;Z!==e;){if(Z.x>=P&&Z.x<=U&&Z.y>=j&&Z.y<=G&&cd(p,E,v,C,x,k,Z.x,Z.y)&&Nn(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function qv(s,e,r,h){const p=s.prev,v=s,x=s.next;if(Nn(p,v,x)>=0)return!1;const E=p.x,C=v.x,k=x.x,P=p.y,j=v.y,U=x.y,G=Math.min(E,C,k),Z=Math.min(P,j,U),X=Math.max(E,C,k),ee=Math.max(P,j,U),ce=Vg(G,Z,e,r,h),ve=Vg(X,ee,e,r,h);let fe=s.prevZ,ge=s.nextZ;for(;fe&&fe.z>=ce&&ge&&ge.z<=ve;){if(fe.x>=G&&fe.x<=X&&fe.y>=Z&&fe.y<=ee&&fe!==p&&fe!==x&&cd(E,P,C,j,k,U,fe.x,fe.y)&&Nn(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,ge.x>=G&&ge.x<=X&&ge.y>=Z&&ge.y<=ee&&ge!==p&&ge!==x&&cd(E,P,C,j,k,U,ge.x,ge.y)&&Nn(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;fe&&fe.z>=ce;){if(fe.x>=G&&fe.x<=X&&fe.y>=Z&&fe.y<=ee&&fe!==p&&fe!==x&&cd(E,P,C,j,k,U,fe.x,fe.y)&&Nn(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;ge&&ge.z<=ve;){if(ge.x>=G&&ge.x<=X&&ge.y>=Z&&ge.y<=ee&&ge!==p&&ge!==x&&cd(E,P,C,j,k,U,ge.x,ge.y)&&Nn(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function b0(s,e){let r=s;do{const h=r.prev,p=r.next.next;!Uf(h,p)&&T0(h,r,r.next,p)&&fa(h,p)&&fa(p,h)&&(e.push(h.i,r.i,p.i),Gf(r),Gf(r.next),r=s=p),r=r.next}while(r!==s);return Ku(r)}function Hv(s,e,r,h,p,v){let x=s;do{let E=x.next.next;for(;E!==x.prev;){if(x.i!==E.i&&Wv(x,E)){let C=hc(x,E);return x=Ku(x,x.next),C=Ku(C,C.next),au(x,e,r,h,p,v,0),void au(C,e,r,h,p,v,0)}E=E.next}x=x.next}while(x!==s)}function x0(s,e){let r=s.x-e.x;return r===0&&(r=s.y-e.y,r===0)&&(r=(s.next.y-s.y)/(s.next.x-s.x)-(e.next.y-e.y)/(e.next.x-e.x)),r}function w0(s,e){const r=function(p,v){let x=v;const E=p.x,C=p.y;let k,P=-1/0;if(Uf(p,x))return x;do{if(Uf(p,x.next))return x.next;if(C<=x.y&&C>=x.next.y&&x.next.y!==x.y){const X=x.x+(C-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(X<=E&&X>P&&(P=X,k=x.x<x.next.x?x:x.next,X===E))return k}x=x.next}while(x!==v);if(!k)return null;const j=k,U=k.x,G=k.y;let Z=1/0;x=k;do{if(E>=x.x&&x.x>=U&&E!==x.x&&Ir(C<G?E:P,C,U,G,C<G?P:E,C,x.x,x.y)){const X=Math.abs(C-x.y)/(E-x.x);fa(x,p)&&(X<Z||X===Z&&(x.x>k.x||x.x===k.x&&Bg(k,x)))&&(k=x,Z=X)}x=x.next}while(x!==j);return k}(s,e);if(!r)return e;const h=hc(r,s);return Ku(h,h.next),Ku(r,r.next)}function Bg(s,e){return Nn(s.prev,s,e.prev)<0&&Nn(e.next,s,s.next)<0}function Vg(s,e,r,h,p){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-r)*p|0)|s<<8))|s<<4))|s<<2))|s<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-h)*p|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ou(s){let e=s,r=s;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==s);return r}function Ir(s,e,r,h,p,v,x,E){return(p-x)*(e-E)>=(s-x)*(v-E)&&(s-x)*(h-E)>=(r-x)*(e-E)&&(r-x)*(v-E)>=(p-x)*(h-E)}function cd(s,e,r,h,p,v,x,E){return!(s===x&&e===E)&&Ir(s,e,r,h,p,v,x,E)}function Wv(s,e){return s.next.i!==e.i&&s.prev.i!==e.i&&!function(r,h){let p=r;do{if(p.i!==r.i&&p.next.i!==r.i&&p.i!==h.i&&p.next.i!==h.i&&T0(p,p.next,r,h))return!0;p=p.next}while(p!==r);return!1}(s,e)&&(fa(s,e)&&fa(e,s)&&function(r,h){let p=r,v=!1;const x=(r.x+h.x)/2,E=(r.y+h.y)/2;do p.y>E!=p.next.y>E&&p.next.y!==p.y&&x<(p.next.x-p.x)*(E-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==r);return v}(s,e)&&(Nn(s.prev,s,e.prev)||Nn(s,e.prev,e))||Uf(s,e)&&Nn(s.prev,s,s.next)>0&&Nn(e.prev,e,e.next)>0)}function Nn(s,e,r){return(e.y-s.y)*(r.x-e.x)-(e.x-s.x)*(r.y-e.y)}function Uf(s,e){return s.x===e.x&&s.y===e.y}function T0(s,e,r,h){const p=Ui(Nn(s,e,r)),v=Ui(Nn(s,e,h)),x=Ui(Nn(r,h,s)),E=Ui(Nn(r,h,e));return p!==v&&x!==E||!(p!==0||!dm(s,r,e))||!(v!==0||!dm(s,h,e))||!(x!==0||!dm(r,s,h))||!(E!==0||!dm(r,e,h))}function dm(s,e,r){return e.x<=Math.max(s.x,r.x)&&e.x>=Math.min(s.x,r.x)&&e.y<=Math.max(s.y,r.y)&&e.y>=Math.min(s.y,r.y)}function Ui(s){return s>0?1:s<0?-1:0}function fa(s,e){return Nn(s.prev,s,s.next)<0?Nn(s,e,s.next)>=0&&Nn(s,s.prev,e)>=0:Nn(s,e,s.prev)<0||Nn(s,s.next,e)<0}function hc(s,e){const r=Ug(s.i,s.x,s.y),h=Ug(e.i,e.x,e.y),p=s.next,v=e.prev;return s.next=e,e.prev=s,r.next=p,p.prev=r,h.next=r,r.prev=h,v.next=h,h.prev=v,h}function S0(s,e,r,h){const p=Ug(s,e,r);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function Gf(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Ug(s,e,r){return{i:s,x:e,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Zf{constructor(e,r){if(r>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=r}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class ud{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}ud.noSubdivision=new ud({fill:new Zf(0,0),line:new Zf(0,0),tile:new Zf(0,0),stencil:new Zf(0,0),circle:1}),Ot("SubdivisionGranularityExpression",Zf),Ot("SubdivisionGranularitySetting",ud);const na=-32768,ro=32767;class Xv{constructor(e,r){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=pt/e,this._canonical=r}_getKey(e,r){return(e+=32768)<<16|r+32768}_vertexToIndex(e,r){if(e<-32768||r<-32768||e>32767||r>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const h=0|Math.round(e),p=0|Math.round(r),v=this._getKey(h,p);if(this._vertexDictionary.has(v))return this._vertexDictionary.get(v);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(v,x),this._vertexBuffer.push(h,p),x}_subdivideTrianglesScanline(e){if(this._granularity<2)return function(p,v){const x=[];for(let E=0;E<v.length;E+=3){const C=v[E],k=v[E+1],P=v[E+2],j=p[2*C],U=p[2*C+1];(p[2*k]-j)*(p[2*P+1]-U)-(p[2*k+1]-U)*(p[2*P]-j)>0?(x.push(C),x.push(P),x.push(k)):(x.push(C),x.push(k),x.push(P))}return x}(this._vertexBuffer,e);const r=[],h=e.length;for(let p=0;p<h;p+=3){const v=[e[p+0],e[p+1],e[p+2]],x=[this._vertexBuffer[2*e[p+0]+0],this._vertexBuffer[2*e[p+0]+1],this._vertexBuffer[2*e[p+1]+0],this._vertexBuffer[2*e[p+1]+1],this._vertexBuffer[2*e[p+2]+0],this._vertexBuffer[2*e[p+2]+1]];let E=1/0,C=1/0,k=-1/0,P=-1/0;for(let X=0;X<3;X++){const ee=x[2*X],ce=x[2*X+1];E=Math.min(E,ee),k=Math.max(k,ee),C=Math.min(C,ce),P=Math.max(P,ce)}if(E===k||C===P)continue;const j=Math.floor(E/this._granularityCellSize),U=Math.ceil(k/this._granularityCellSize),G=Math.floor(C/this._granularityCellSize),Z=Math.ceil(P/this._granularityCellSize);if(j!==U||G!==Z)for(let X=G;X<Z;X++){const ee=this._scanlineGenerateVertexRingForCellRow(X,x,v);su(this._vertexBuffer,ee,r)}else r.push(...v)}return r}_scanlineGenerateVertexRingForCellRow(e,r,h){const p=e*this._granularityCellSize,v=p+this._granularityCellSize,x=[];for(let E=0;E<3;E++){const C=r[2*E],k=r[2*E+1],P=r[2*(E+1)%6],j=r[(2*(E+1)+1)%6],U=r[2*(E+2)%6],G=r[(2*(E+2)+1)%6],Z=P-C,X=j-k,ee=Z===0,ce=X===0,ve=(p-k)/X,fe=(v-k)/X,ge=Math.min(ve,fe),Ne=Math.max(ve,fe);if(!ce&&(ge>=1||Ne<=0)||ce&&(k<p||k>v)){j>=p&&j<=v&&x.push(h[(E+1)%3]);continue}!ce&&ge>0&&x.push(this._vertexToIndex(C+Z*ge,k+X*ge));const Pe=C+Z*Math.max(ge,0),He=C+Z*Math.min(Ne,1);ee||this._generateIntraEdgeVertices(x,C,k,P,j,Pe,He),!ce&&Ne<1&&x.push(this._vertexToIndex(C+Z*Ne,k+X*Ne)),(ce||j>=p&&j<=v)&&x.push(h[(E+1)%3]),!ce&&(j<=p||j>=v)&&this._generateInterEdgeVertices(x,C,k,P,j,U,G,He,p,v)}return x}_generateIntraEdgeVertices(e,r,h,p,v,x,E){const C=p-r,k=v-h,P=k===0,j=P?Math.min(r,p):Math.min(x,E),U=P?Math.max(r,p):Math.max(x,E),G=Math.floor(j/this._granularityCellSize)+1,Z=Math.ceil(U/this._granularityCellSize)-1;if(P?r<p:x<E)for(let X=G;X<=Z;X++){const ee=X*this._granularityCellSize;e.push(this._vertexToIndex(ee,h+k*(ee-r)/C))}else for(let X=Z;X>=G;X--){const ee=X*this._granularityCellSize;e.push(this._vertexToIndex(ee,h+k*(ee-r)/C))}}_generateInterEdgeVertices(e,r,h,p,v,x,E,C,k,P){const j=v-h,U=x-p,G=E-v,Z=(k-v)/G,X=(P-v)/G,ee=Math.min(Z,X),ce=Math.max(Z,X),ve=p+U*ee;let fe=Math.floor(Math.min(ve,C)/this._granularityCellSize)+1,ge=Math.ceil(Math.max(ve,C)/this._granularityCellSize)-1,Ne=C<ve;const Pe=G===0;if(Pe&&(E===k||E===P))return;if(Pe||ee>=1||ce<=0){const ft=h-E,st=x+(r-x)*Math.min((k-E)/ft,(P-E)/ft);fe=Math.floor(Math.min(st,C)/this._granularityCellSize)+1,ge=Math.ceil(Math.max(st,C)/this._granularityCellSize)-1,Ne=C<st}const He=j>0?P:k;if(Ne)for(let ft=fe;ft<=ge;ft++)e.push(this._vertexToIndex(ft*this._granularityCellSize,He));else for(let ft=ge;ft>=fe;ft--)e.push(this._vertexToIndex(ft*this._granularityCellSize,He))}_generateOutline(e){const r=[];for(const h of e){const p=Ju(h,this._granularity,!0),v=this._pointArrayToIndices(p),x=[];for(let E=1;E<v.length;E++)x.push(v[E-1]),x.push(v[E]);r.push(x)}return r}_handlePoles(e){let r=!1,h=!1;this._canonical&&(this._canonical.y===0&&(r=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(r||h)&&this._fillPoles(e,r,h)}_ensureNoPoleVertices(){const e=this._vertexBuffer;for(let r=0;r<e.length;r+=2){const h=e[r+1];h===na&&(e[r+1]=-32767),h===ro&&(e[r+1]=32766)}}_generatePoleQuad(e,r,h,p,v,x){p>v!=(x===na)?(e.push(r),e.push(h),e.push(this._vertexToIndex(p,x)),e.push(h),e.push(this._vertexToIndex(v,x)),e.push(this._vertexToIndex(p,x))):(e.push(h),e.push(r),e.push(this._vertexToIndex(p,x)),e.push(this._vertexToIndex(v,x)),e.push(h),e.push(this._vertexToIndex(p,x)))}_fillPoles(e,r,h){const p=this._vertexBuffer,v=pt,x=e.length;for(let E=2;E<x;E+=3){const C=e[E-2],k=e[E-1],P=e[E],j=p[2*C],U=p[2*C+1],G=p[2*k],Z=p[2*k+1],X=p[2*P],ee=p[2*P+1];r&&(U===0&&Z===0&&this._generatePoleQuad(e,C,k,j,G,na),Z===0&&ee===0&&this._generatePoleQuad(e,k,P,G,X,na),ee===0&&U===0&&this._generatePoleQuad(e,P,C,X,j,na)),h&&(U===v&&Z===v&&this._generatePoleQuad(e,C,k,j,G,ro),Z===v&&ee===v&&this._generatePoleQuad(e,k,P,G,X,ro),ee===v&&U===v&&this._generatePoleQuad(e,P,C,X,j,ro))}}_initializeVertices(e){for(let r=0;r<e.length;r+=2)this._vertexToIndex(e[r],e[r+1])}subdividePolygonInternal(e,r){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:h,holeIndices:p}=function(E){const C=[],k=[];for(const P of E)if(P.length!==0){P!==E[0]&&C.push(k.length/2);for(let j=0;j<P.length;j++)k.push(P[j].x),k.push(P[j].y)}return{flattened:k,holeIndices:C}}(e);let v;this._initializeVertices(h);try{const E=function(k,P,j=2){const U=P&&P.length,G=U?P[0]*j:k.length;let Z=v0(k,0,G,j,!0);const X=[];if(!Z||Z.next===Z.prev)return X;let ee,ce,ve;if(U&&(Z=function(fe,ge,Ne,Pe){const He=[];for(let ft=0,st=ge.length;ft<st;ft++){const yt=v0(fe,ge[ft]*Pe,ft<st-1?ge[ft+1]*Pe:fe.length,Pe,!1);yt===yt.next&&(yt.steiner=!0),He.push(ou(yt))}He.sort(x0);for(let ft=0;ft<He.length;ft++)Ne=w0(He[ft],Ne);return Ne}(k,P,Z,j)),k.length>80*j){ee=k[0],ce=k[1];let fe=ee,ge=ce;for(let Ne=j;Ne<G;Ne+=j){const Pe=k[Ne],He=k[Ne+1];Pe<ee&&(ee=Pe),He<ce&&(ce=He),Pe>fe&&(fe=Pe),He>ge&&(ge=He)}ve=Math.max(fe-ee,ge-ce),ve=ve!==0?32767/ve:0}return au(Z,X,j,ee,ce,ve,0),X}(h,p),C=this._convertIndices(h,E);v=this._subdivideTrianglesScanline(C)}catch(E){console.error(E)}let x=[];return r&&(x=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(v),{verticesFlattened:this._vertexBuffer,indicesTriangles:v,indicesLineList:x}}_convertIndices(e,r){const h=[];for(let p=0;p<r.length;p++)h.push(this._vertexToIndex(e[2*r[p]],e[2*r[p]+1]));return h}_pointArrayToIndices(e){const r=[];for(let h=0;h<e.length;h++){const p=e[h];r.push(this._vertexToIndex(p.x,p.y))}return r}}function ao(s,e,r,h=!0){return new Xv(r,e).subdividePolygonInternal(s,h)}function Ju(s,e,r=!1){if(!s||s.length<1)return[];if(s.length<2)return[];const h=s[0],p=s[s.length-1],v=r&&(h.x!==p.x||h.y!==p.y);if(e<2)return v?[...s,s[0]]:[...s];const x=Math.floor(pt/e),E=[];E.push(new A(s[0].x,s[0].y));const C=s.length,k=v?C:C-1;for(let P=0;P<k;P++){const j=s[P],U=P<C-1?s[P+1]:s[0],G=j.x,Z=j.y,X=U.x,ee=U.y,ce=G!==X,ve=Z!==ee;if(!ce&&!ve)continue;const fe=X-G,ge=ee-Z,Ne=Math.abs(fe),Pe=Math.abs(ge);let He=G,ft=Z;for(;;){const yt=fe>0?(Math.floor(He/x)+1)*x:(Math.ceil(He/x)-1)*x,It=ge>0?(Math.floor(ft/x)+1)*x:(Math.ceil(ft/x)-1)*x,Et=Math.abs(He-yt),At=Math.abs(ft-It),lt=Math.abs(He-X),Wt=Math.abs(ft-ee),Xt=ce?Et/Ne:Number.POSITIVE_INFINITY,Jt=ve?At/Pe:Number.POSITIVE_INFINITY;if((lt<=Et||!ce)&&(Wt<=At||!ve))break;if(Xt<Jt&&ce||!ve){He=yt,ft+=ge*Xt;const Bt=new A(He,Math.round(ft));E[E.length-1].x===Bt.x&&E[E.length-1].y===Bt.y||E.push(Bt)}else{He+=fe*Jt,ft=It;const Bt=new A(Math.round(He),ft);E[E.length-1].x===Bt.x&&E[E.length-1].y===Bt.y||E.push(Bt)}}const st=new A(X,ee);E[E.length-1].x===st.x&&E[E.length-1].y===st.y||E.push(st)}return E}function su(s,e,r){if(e.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,p=s[2*e[0]];for(let C=1;C<e.length;C++){const k=s[2*e[C]];k<p&&(p=k,h=C)}const v=e.length;let x=h,E=(x+1)%v;for(;;){const C=x-1>=0?x-1:v-1,k=(E+1)%v,P=s[2*e[C]],j=s[2*e[k]],U=s[2*e[x]],G=s[2*e[x]+1],Z=s[2*e[E]+1];let X=!1;if(P<j)X=!0;else if(P>j)X=!1;else{const ee=Z-G,ce=-(s[2*e[E]]-U),ve=G<Z?1:-1;((P-U)*ee+(s[2*e[C]+1]-G)*ce)*ve>((j-U)*ee+(s[2*e[k]+1]-G)*ce)*ve&&(X=!0)}if(X){const ee=e[C],ce=e[x],ve=e[E];ee!==ce&&ee!==ve&&ce!==ve&&r.push(ve,ce,ee),x--,x<0&&(x=v-1)}else{const ee=e[k],ce=e[x],ve=e[E];ee!==ce&&ee!==ve&&ce!==ve&&r.push(ve,ce,ee),E++,E>=v&&(E=0)}if(C===k)break}}function eh(s,e,r,h,p,v,x,E,C){const k=p.length/2,P=x&&E&&C;if(k<an.MAX_VERTEX_ARRAY_LENGTH){const j=e.prepareSegment(k,r,h),U=j.vertexLength;for(let X=0;X<v.length;X+=3)h.emplaceBack(U+v[X],U+v[X+1],U+v[X+2]);let G,Z;j.vertexLength+=k,j.primitiveLength+=v.length/3,P&&(Z=x.prepareSegment(k,r,E),G=Z.vertexLength,Z.vertexLength+=k);for(let X=0;X<p.length;X+=2)s(p[X],p[X+1]);if(P)for(let X=0;X<C.length;X++){const ee=C[X];for(let ce=1;ce<ee.length;ce+=2)E.emplaceBack(G+ee[ce-1],G+ee[ce]);Z.primitiveLength+=ee.length/2}}else(function(j,U,G,Z,X,ee){const ce=[];for(let Pe=0;Pe<Z.length/2;Pe++)ce.push(-1);const ve={count:0};let fe=0,ge=j.getOrCreateLatestSegment(U,G),Ne=ge.vertexLength;for(let Pe=2;Pe<X.length;Pe+=3){const He=X[Pe-2],ft=X[Pe-1],st=X[Pe];let yt=ce[He]<fe,It=ce[ft]<fe,Et=ce[st]<fe;ge.vertexLength+((yt?1:0)+(It?1:0)+(Et?1:0))>an.MAX_VERTEX_ARRAY_LENGTH&&(ge=j.createNewSegment(U,G),fe=ve.count,yt=!0,It=!0,Et=!0,Ne=0);const At=Ho(ce,Z,ee,ve,He,yt,ge),lt=Ho(ce,Z,ee,ve,ft,It,ge),Wt=Ho(ce,Z,ee,ve,st,Et,ge);G.emplaceBack(Ne+At-fe,Ne+lt-fe,Ne+Wt-fe),ge.primitiveLength++}})(e,r,h,p,v,s),P&&function(j,U,G,Z,X,ee){const ce=[];for(let Pe=0;Pe<Z.length/2;Pe++)ce.push(-1);const ve={count:0};let fe=0,ge=j.getOrCreateLatestSegment(U,G),Ne=ge.vertexLength;for(let Pe=0;Pe<X.length;Pe++){const He=X[Pe];for(let ft=1;ft<X[Pe].length;ft+=2){const st=He[ft-1],yt=He[ft];let It=ce[st]<fe,Et=ce[yt]<fe;ge.vertexLength+((It?1:0)+(Et?1:0))>an.MAX_VERTEX_ARRAY_LENGTH&&(ge=j.createNewSegment(U,G),fe=ve.count,It=!0,Et=!0,Ne=0);const At=Ho(ce,Z,ee,ve,st,It,ge),lt=Ho(ce,Z,ee,ve,yt,Et,ge);G.emplaceBack(Ne+At-fe,Ne+lt-fe),ge.primitiveLength++}}}(x,r,E,p,C,s),e.forceNewSegmentOnNextPrepare(),x?.forceNewSegmentOnNextPrepare()}function Ho(s,e,r,h,p,v,x){if(v){const E=h.count;return r(e[2*p],e[2*p+1]),s[p]=h.count,h.count++,x.vertexLength++,E}return s[p]}class fm{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Me,this.indexArray=new wt,this.indexArray2=new ut,this.programConfigurations=new Al(e.layers,e.zoom),this.segments=new an,this.segments2=new an,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,h){this.hasDependencies=Qu("fill",this.layers,r);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:E,id:C,index:k,sourceLayerIndex:P}of e){const j=this.layers[0]._featureFilter.needGeometry,U=Ia(E,j);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),U,h))continue;const G=v?p.evaluate(U,{},h,r.availableImages):void 0,Z={id:C,properties:E.properties,type:E.type,sourceLayerIndex:P,index:k,geometry:j?U.geometry:Ml(E),patterns:{},sortKey:G};x.push(Z)}v&&x.sort((E,C)=>E.sortKey-C.sortKey);for(const E of x){const{geometry:C,index:k,sourceLayerIndex:P}=E;if(this.hasDependencies){const j=cc("fill",this.layers,E,{zoom:this.zoom},r);this.patternFeatures.push(j)}else this.addFeature(E,C,k,h,{},r.subdivisionGranularity);r.featureIndex.insert(e[k].feature,C,k,P,this.index)}}update(e,r,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:h})}addFeatures(e,r,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,r,h,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yv),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,h,p,v,x){for(const E of Ou(r,500)){const C=ao(E,p,x.fill.getGranularityForZoomLevel(p.z)),k=this.layoutVertexArray;eh((P,j)=>{k.emplaceBack(P,j)},this.segments,this.layoutVertexArray,this.indexArray,C.verticesFlattened,C.indicesTriangles,this.segments2,this.indexArray2,C.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:v,canonical:p})}}let Gg,Zs;Ot("FillBucket",fm,{omit:["layers","patternFeatures"]});var Qv={get paint(){return Zs=Zs||new Ti({"fill-antialias":new jt(me.paint_fill["fill-antialias"]),"fill-opacity":new Qt(me.paint_fill["fill-opacity"]),"fill-color":new Qt(me.paint_fill["fill-color"]),"fill-outline-color":new Qt(me.paint_fill["fill-outline-color"]),"fill-translate":new jt(me.paint_fill["fill-translate"]),"fill-translate-anchor":new jt(me.paint_fill["fill-translate-anchor"]),"fill-pattern":new eu(me.paint_fill["fill-pattern"])})},get layout(){return Gg=Gg||new Ti({"fill-sort-key":new Qt(me.layout_fill["fill-sort-key"])})}};class $f extends Cr{constructor(e,r){super(e,Qv,r)}recalculate(e,r){super.recalculate(e,r);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new fm(e)}queryRadius(){return om(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:e,geometry:r,transform:h,pixelsToTileUnits:p}){return Lg(Xu(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,p),r)}isTileClipped(){return!0}}const pm=ri([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),mm=ri([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Yf}=pm;class hd{constructor(e,r,h,p,v){this.properties={},this.extent=h,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=p,this._values=v,e.readFields(Kv,this,r)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const r=e.readVarint()+e.pos,h=[];let p,v=1,x=0,E=0,C=0;for(;e.pos<r;){if(x<=0){const k=e.readVarint();v=7&k,x=k>>3}if(x--,v===1||v===2)E+=e.readSVarint(),C+=e.readSVarint(),v===1&&(p&&h.push(p),p=[]),p&&p.push(new A(E,C));else{if(v!==7)throw new Error(`unknown command ${v}`);p&&p.push(p[0].clone())}}return p&&h.push(p),h}bbox(){const e=this._pbf;e.pos=this._geometry;const r=e.readVarint()+e.pos;let h=1,p=0,v=0,x=0,E=1/0,C=-1/0,k=1/0,P=-1/0;for(;e.pos<r;){if(p<=0){const j=e.readVarint();h=7&j,p=j>>3}if(p--,h===1||h===2)v+=e.readSVarint(),x+=e.readSVarint(),v<E&&(E=v),v>C&&(C=v),x<k&&(k=x),x>P&&(P=x);else if(h!==7)throw new Error(`unknown command ${h}`)}return[E,k,C,P]}toGeoJSON(e,r,h){const p=this.extent*Math.pow(2,h),v=this.extent*e,x=this.extent*r,E=this.loadGeometry();function C(U){return[360*(U.x+v)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(U.y+x)/p)*Math.PI))-90]}function k(U){return U.map(C)}let P;if(this.type===1){const U=[];for(const Z of E)U.push(Z[0]);const G=k(U);P=U.length===1?{type:"Point",coordinates:G[0]}:{type:"MultiPoint",coordinates:G}}else if(this.type===2){const U=E.map(k);P=U.length===1?{type:"LineString",coordinates:U[0]}:{type:"MultiLineString",coordinates:U}}else{if(this.type!==3)throw new Error("unknown feature type");{const U=function(Z){const X=Z.length;if(X<=1)return[Z];const ee=[];let ce,ve;for(let fe=0;fe<X;fe++){const ge=gm(Z[fe]);ge!==0&&(ve===void 0&&(ve=ge<0),ve===ge<0?(ce&&ee.push(ce),ce=[Z[fe]]):ce&&ce.push(Z[fe]))}return ce&&ee.push(ce),ee}(E),G=[];for(const Z of U)G.push(Z.map(k));P=G.length===1?{type:"Polygon",coordinates:G[0]}:{type:"MultiPolygon",coordinates:G}}}const j={type:"Feature",geometry:P,properties:this.properties};return this.id!=null&&(j.id=this.id),j}}function Kv(s,e,r){s===1?e.id=r.readVarint():s===2?function(h,p){const v=h.readVarint()+h.pos;for(;h.pos<v;){const x=p._keys[h.readVarint()],E=p._values[h.readVarint()];p.properties[x]=E}}(r,e):s===3?e.type=r.readVarint():s===4&&(e._geometry=r.pos)}function gm(s){let e=0;for(let r,h,p=0,v=s.length,x=v-1;p<v;x=p++)r=s[p],h=s[x],e+=(h.x-r.x)*(r.y+h.y);return e}hd.types=["Unknown","Point","LineString","Polygon"];class E0{constructor(e,r){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Zg,this,r),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const r=this._pbf.readVarint()+this._pbf.pos;return new hd(this._pbf,r,this.extent,this._keys,this._values)}}function Zg(s,e,r){s===15?e.version=r.readVarint():s===1?e.name=r.readString():s===5?e.extent=r.readVarint():s===2?e._features.push(r.pos):s===3?e._keys.push(r.readString()):s===4&&e._values.push(function(h){let p=null;const v=h.readVarint()+h.pos;for(;h.pos<v;){const x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}if(p==null)throw new Error("unknown feature value");return p}(r))}class A0{constructor(e,r){this.layers=e.readFields(c1,{},r)}}function c1(s,e,r){if(s===3){const h=new E0(r,r.readVarint()+r.pos);h.length&&(e[h.name]=h)}}const M0=Math.pow(2,13);function Xn(s,e,r,h,p,v,x,E){s.emplaceBack(e,r,2*Math.floor(h*M0)+x,p*M0*2,v*M0*2,Math.round(E))}class Ei{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new _e,this.centroidVertexArray=new ye,this.indexArray=new wt,this.programConfigurations=new Al(e.layers,e.zoom),this.segments=new an,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,h){this.features=[],this.hasDependencies=Qu("fill-extrusion",this.layers,r);for(const{feature:p,id:v,index:x,sourceLayerIndex:E}of e){const C=this.layers[0]._featureFilter.needGeometry,k=Ia(p,C);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),k,h))continue;const P={id:v,sourceLayerIndex:E,index:x,geometry:C?k.geometry:Ml(p),properties:p.properties,type:p.type,patterns:{}};this.hasDependencies?this.features.push(cc("fill-extrusion",this.layers,P,{zoom:this.zoom},r)):this.addFeature(P,P.geometry,x,h,{},r.subdivisionGranularity),r.featureIndex.insert(p,P.geometry,x,E,this.index,!0)}}addFeatures(e,r,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,r,h,e.subdivisionGranularity)}}update(e,r,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:h})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yf),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,mm.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,r,h,p,v,x){for(const E of Ou(r,500)){const C={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(C,p,e,E,x);const P=this.layoutVertexArray.length-k,j=Math.floor(C.x/C.sampleCount),U=Math.floor(C.y/C.sampleCount);for(let G=0;G<P;G++)this.centroidVertexArray.emplaceBack(j,U)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:v,canonical:p})}processPolygon(e,r,h,p,v){if(p.length<1||_i(p[0]))return;for(const j of p)j.length!==0&&Gn(e,j);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},E=v.fill.getGranularityForZoomLevel(r.z),C=hd.types[h.type]==="Polygon";for(const j of p){if(j.length===0||_i(j))continue;const U=Ju(j,E,C);this._generateSideFaces(U,x)}if(!C)return;const k=ao(p,r,E,!1),P=this.layoutVertexArray;eh((j,U)=>{Xn(P,j,U,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(e,r){let h=0;for(let p=1;p<e.length;p++){const v=e[p],x=e[p-1];if(Hn(v,x))continue;r.segment.vertexLength+4>an.MAX_VERTEX_ARRAY_LENGTH&&(r.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const E=v.sub(x)._perp()._unit(),C=x.dist(v);h+C>32768&&(h=0),Xn(this.layoutVertexArray,v.x,v.y,E.x,E.y,0,0,h),Xn(this.layoutVertexArray,v.x,v.y,E.x,E.y,0,1,h),h+=C,Xn(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,h),Xn(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,h);const k=r.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),r.segment.vertexLength+=4,r.segment.primitiveLength+=2}}}function Gn(s,e){for(let r=0;r<e.length;r++){const h=e[r];r===e.length-1&&e[0].x===h.x&&e[0].y===h.y||(s.x+=h.x,s.y+=h.y,s.sampleCount++)}}function Hn(s,e){return s.x===e.x&&(s.x<0||s.x>pt)||s.y===e.y&&(s.y<0||s.y>pt)}function _i(s){return s.every(e=>e.x<0)||s.every(e=>e.x>pt)||s.every(e=>e.y<0)||s.every(e=>e.y>pt)}let Eo;Ot("FillExtrusionBucket",Ei,{omit:["layers","features"]});var th={get paint(){return Eo=Eo||new Ti({"fill-extrusion-opacity":new jt(me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qt(me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jt(me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jt(me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new eu(me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qt(me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qt(me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jt(me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class qf extends Cr{constructor(e,r){super(e,th,r)}createBucket(e){return new Ei(e)}queryRadius(){return om(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:h,geometry:p,transform:v,pixelsToTileUnits:x,pixelPosMatrix:E}){const C=Xu(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-v.bearingInRadians,x),k=this.paint.get("fill-extrusion-height").evaluate(r,h),P=this.paint.get("fill-extrusion-base").evaluate(r,h),j=function(G,Z){const X=[];for(const ee of G){const ce=[ee.x,ee.y,0,1];Ut(ce,ce,Z),X.push(new A(ce[0]/ce[3],ce[1]/ce[3]))}return X}(C,E),U=function(G,Z,X,ee){const ce=[],ve=[],fe=ee[8]*Z,ge=ee[9]*Z,Ne=ee[10]*Z,Pe=ee[11]*Z,He=ee[8]*X,ft=ee[9]*X,st=ee[10]*X,yt=ee[11]*X;for(const It of G){const Et=[],At=[];for(const lt of It){const Wt=lt.x,Xt=lt.y,Jt=ee[0]*Wt+ee[4]*Xt+ee[12],Bt=ee[1]*Wt+ee[5]*Xt+ee[13],Rn=ee[2]*Wt+ee[6]*Xt+ee[14],Ji=ee[3]*Wt+ee[7]*Xt+ee[15],Zr=Rn+Ne,Ya=Ji+Pe,yc=Jt+He,Io=Bt+ft,ka=Rn+st,qa=Ji+yt,Tr=new A((Jt+fe)/Ya,(Bt+ge)/Ya);Tr.z=Zr/Ya,Et.push(Tr);const Oa=new A(yc/qa,Io/qa);Oa.z=ka/qa,At.push(Oa)}ce.push(Et),ve.push(At)}return[ce,ve]}(p,P,k,E);return function(G,Z,X){let ee=1/0;Lg(X,Z)&&(ee=dc(X,Z[0]));for(let ce=0;ce<Z.length;ce++){const ve=Z[ce],fe=G[ce];for(let ge=0;ge<ve.length-1;ge++){const Ne=ve[ge],Pe=[Ne,ve[ge+1],fe[ge+1],fe[ge],Ne];im(X,Pe)&&(ee=Math.min(ee,dc(X,Pe)))}}return ee!==1/0&&ee}(U[0],U[1],j)}}function dd(s,e){return s.x*e.x+s.y*e.y}function dc(s,e){if(s.length===1){let r=0;const h=e[r++];let p;for(;!p||h.equals(p);)if(p=e[r++],!p)return 1/0;for(;r<e.length;r++){const v=e[r],x=s[0],E=p.sub(h),C=v.sub(h),k=x.sub(h),P=dd(E,E),j=dd(E,C),U=dd(C,C),G=dd(k,E),Z=dd(k,C),X=P*U-j*j,ee=(U*G-j*Z)/X,ce=(P*Z-j*G)/X,ve=h.z*(1-ee-ce)+p.z*ee+v.z*ce;if(isFinite(ve))return ve}return 1/0}{let r=1/0;for(const h of e)r=Math.min(r,h.z);return r}}const br=ri([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:nh}=br,fd=ri([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:C0}=fd,Wo=Math.cos(Math.PI/180*37.5),pd=Math.pow(2,14)/.5;class md{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new Ce,this.layoutVertexArray2=new Re,this.indexArray=new wt,this.programConfigurations=new Al(e.layers,e.zoom),this.segments=new an,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,h){this.hasDependencies=Qu("line",this.layers,r)||this.hasLineDasharray(this.layers);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:E,id:C,index:k,sourceLayerIndex:P}of e){const j=this.layers[0]._featureFilter.needGeometry,U=Ia(E,j);if(!this.layers[0]._featureFilter.filter(new ti(this.zoom),U,h))continue;const G=v?p.evaluate(U,{},h):void 0,Z={id:C,properties:E.properties,type:E.type,sourceLayerIndex:P,index:k,geometry:j?U.geometry:Ml(E),patterns:{},dashes:{},sortKey:G};x.push(Z)}v&&x.sort((E,C)=>E.sortKey-C.sortKey);for(const E of x){const{geometry:C,index:k,sourceLayerIndex:P}=E;this.hasDependencies?(Qu("line",this.layers,r)?cc("line",this.layers,E,{zoom:this.zoom},r):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,E,this.zoom,r),this.patternFeatures.push(E)):this.addFeature(E,C,k,h,{},{},r.subdivisionGranularity),r.featureIndex.insert(e[k].feature,C,k,P,this.index)}}update(e,r,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:h,dashPositions:p})}addFeatures(e,r,h,p){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,r,h,p,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,C0)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,nh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,h,p,v,x,E){const C=this.layers[0].layout,k=C.get("line-join").evaluate(e,{}),P=C.get("line-cap"),j=C.get("line-miter-limit"),U=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const G of r)this.addLine(G,e,k,P,j,U,p,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:v,dashPositions:x,canonical:p})}addLine(e,r,h,p,v,x,E,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=Ju(e,E?C.line.getGranularityForZoomLevel(E.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<e.length-1;fe++)this.totalDistance+=e[fe].dist(e[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=hd.types[r.type]==="Polygon";let P=e.length;for(;P>=2&&e[P-1].equals(e[P-2]);)P--;let j=0;for(;j<P-1&&e[j].equals(e[j+1]);)j++;if(P<(k?3:2))return;h==="bevel"&&(v=1.05);const U=this.overscaling<=16?122880/(512*this.overscaling):0,G=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let Z,X,ee,ce,ve;this.e1=this.e2=-1,k&&(Z=e[P-2],ve=e[j].sub(Z)._unit()._perp());for(let fe=j;fe<P;fe++){if(ee=fe===P-1?k?e[j+1]:void 0:e[fe+1],ee&&e[fe].equals(ee))continue;ve&&(ce=ve),Z&&(X=Z),Z=e[fe],ve=ee?ee.sub(Z)._unit()._perp():ce,ce=ce||ve;let ge=ce.add(ve);ge.x===0&&ge.y===0||ge._unit();const Ne=ce.x*ve.x+ce.y*ve.y,Pe=ge.x*ve.x+ge.y*ve.y,He=Pe!==0?1/Pe:1/0,ft=2*Math.sqrt(2-2*Pe),st=Pe<Wo&&X&&ee,yt=ce.x*ve.y-ce.y*ve.x>0;if(st&&fe>j){const At=Z.dist(X);if(At>2*U){const lt=Z.sub(Z.sub(X)._mult(U/At)._round());this.updateDistance(X,lt),this.addCurrentVertex(lt,ce,0,0,G),X=lt}}const It=X&&ee;let Et=It?h:k?"butt":p;if(It&&Et==="round"&&(He<x?Et="miter":He<=2&&(Et="fakeround")),Et==="miter"&&He>v&&(Et="bevel"),Et==="bevel"&&(He>2&&(Et="flipbevel"),He<v&&(Et="miter")),X&&this.updateDistance(X,Z),Et==="miter")ge._mult(He),this.addCurrentVertex(Z,ge,0,0,G);else if(Et==="flipbevel"){if(He>100)ge=ve.mult(-1);else{const At=He*ce.add(ve).mag()/ce.sub(ve).mag();ge._perp()._mult(At*(yt?-1:1))}this.addCurrentVertex(Z,ge,0,0,G),this.addCurrentVertex(Z,ge.mult(-1),0,0,G)}else if(Et==="bevel"||Et==="fakeround"){const At=-Math.sqrt(He*He-1),lt=yt?At:0,Wt=yt?0:At;if(X&&this.addCurrentVertex(Z,ce,lt,Wt,G),Et==="fakeround"){const Xt=Math.round(180*ft/Math.PI/20);for(let Jt=1;Jt<Xt;Jt++){let Bt=Jt/Xt;if(Bt!==.5){const Ji=Bt-.5;Bt+=Bt*Ji*(Bt-1)*((1.0904+Ne*(Ne*(3.55645-1.43519*Ne)-3.2452))*Ji*Ji+(.848013+Ne*(.215638*Ne-1.06021)))}const Rn=ve.sub(ce)._mult(Bt)._add(ce)._unit()._mult(yt?-1:1);this.addHalfVertex(Z,Rn.x,Rn.y,!1,yt,0,G)}}ee&&this.addCurrentVertex(Z,ve,-lt,-Wt,G)}else if(Et==="butt")this.addCurrentVertex(Z,ge,0,0,G);else if(Et==="square"){const At=X?1:-1;this.addCurrentVertex(Z,ge,At,At,G)}else Et==="round"&&(X&&(this.addCurrentVertex(Z,ce,0,0,G),this.addCurrentVertex(Z,ce,1,1,G,!0)),ee&&(this.addCurrentVertex(Z,ve,-1,-1,G,!0),this.addCurrentVertex(Z,ve,0,0,G)));if(st&&fe<P-1){const At=Z.dist(ee);if(At>2*U){const lt=Z.add(ee.sub(Z)._mult(U/At)._round());this.updateDistance(Z,lt),this.addCurrentVertex(lt,ve,0,0,G),Z=lt}}}}addCurrentVertex(e,r,h,p,v,x=!1){const E=r.y*p-r.x,C=-r.y-r.x*p;this.addHalfVertex(e,r.x+r.y*h,r.y-r.x*h,x,!1,h,v),this.addHalfVertex(e,E,C,x,!0,-p,v),this.distance>pd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,r,h,p,v,x))}addHalfVertex({x:e,y:r},h,p,v,x,E,C){const k=.5*(this.lineClips?this.scaledDistance*(pd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(v?1:0),(r<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(E===0?0:E<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const P=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,P,this.e2),C.primitiveLength++),x?this.e2=P:this.e1=P}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}hasLineDasharray(e){for(const r of e){const h=r.paint.get("line-dasharray");if(h&&!h.isConstant())return!0}return!1}addLineDashDependencies(e,r,h,p){for(const v of e){const x=v.paint.get("line-dasharray");if(!x||x.value.kind==="constant")continue;const E=v.layout.get("line-cap")==="round",C={dasharray:x.value.evaluate({zoom:h-1},r,{}),round:E},k={dasharray:x.value.evaluate({zoom:h},r,{}),round:E},P={dasharray:x.value.evaluate({zoom:h+1},r,{}),round:E},j=`${C.dasharray.join(",")},${C.round}`,U=`${k.dasharray.join(",")},${k.round}`,G=`${P.dasharray.join(",")},${P.round}`;p.dashDependencies[j]=C,p.dashDependencies[U]=k,p.dashDependencies[G]=P,r.dashes[v.id]={min:j,mid:U,max:G}}}}let oo,$g;Ot("LineBucket",md,{omit:["layers","patternFeatures"]});var ym={get paint(){return $g=$g||new Ti({"line-opacity":new Qt(me.paint_line["line-opacity"]),"line-color":new Qt(me.paint_line["line-color"]),"line-translate":new jt(me.paint_line["line-translate"]),"line-translate-anchor":new jt(me.paint_line["line-translate-anchor"]),"line-width":new Qt(me.paint_line["line-width"]),"line-gap-width":new Qt(me.paint_line["line-gap-width"]),"line-offset":new Qt(me.paint_line["line-offset"]),"line-blur":new Qt(me.paint_line["line-blur"]),"line-dasharray":new eu(me.paint_line["line-dasharray"]),"line-pattern":new eu(me.paint_line["line-pattern"]),"line-gradient":new ta(me.paint_line["line-gradient"])})},get layout(){return oo=oo||new Ti({"line-cap":new jt(me.layout_line["line-cap"]),"line-join":new Qt(me.layout_line["line-join"]),"line-miter-limit":new jt(me.layout_line["line-miter-limit"]),"line-round-limit":new jt(me.layout_line["line-round-limit"]),"line-sort-key":new Qt(me.layout_line["line-sort-key"])})}};class Jv extends Qt{possiblyEvaluate(e,r){return r=new ti(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(e,r)}evaluate(e,r,h,p){return r=rn({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(e,r,h,p)}}let gd;class Yg extends Cr{constructor(e,r){super(e,ym,r),this.gradientVersion=0,gd||(gd=new Jv(ym.paint.properties["line-width"].specification),gd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){const r=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(r)&&r._styleExpression.expression instanceof $l,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,r){super.recalculate(e,r),this.paint._values["line-floorwidth"]=gd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new md(e)}queryRadius(e){const r=e,h=lu(ld("line-width",this,r),ld("line-gap-width",this,r)),p=ld("line-offset",this,r);return h/2+Math.abs(p)+om(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:h,geometry:p,transform:v,pixelsToTileUnits:x}){const E=Xu(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-v.bearingInRadians,x),C=x/2*lu(this.paint.get("line-width").evaluate(r,h),this.paint.get("line-gap-width").evaluate(r,h)),k=this.paint.get("line-offset").evaluate(r,h);return k&&(p=function(P,j){const U=[];for(let G=0;G<P.length;G++){const Z=P[G],X=[];for(let ee=0;ee<Z.length;ee++){const ce=Z[ee-1],ve=Z[ee],fe=Z[ee+1],ge=ee===0?new A(0,0):ve.sub(ce)._unit()._perp(),Ne=ee===Z.length-1?new A(0,0):fe.sub(ve)._unit()._perp(),Pe=ge._add(Ne)._unit(),He=Pe.x*Ne.x+Pe.y*Ne.y;He!==0&&Pe._mult(1/He),X.push(Pe._mult(j)._add(ve))}U.push(X)}return U}(p,k*x)),function(P,j,U){for(let G=0;G<j.length;G++){const Z=j[G];if(P.length>=3){for(let X=0;X<Z.length;X++)if(sd(P,Z[X]))return!0}if(zv(P,Z,U))return!0}return!1}(E,p,C)}isTileClipped(){return!0}}function lu(s,e){return e>0?e+2*s:s}const ia=ri([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ih=ri([{name:"a_projected_pos",components:3,type:"Float32"}],4);ri([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hf=ri([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ri([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const fc=ri([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),D0=ri([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function I0(s,e,r){return s.sections.forEach(h=>{h.text=function(p,v,x){const E=v.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?p=p.toLocaleUpperCase():E==="lowercase"&&(p=p.toLocaleLowerCase()),js.applyArabicShaping&&(p=js.applyArabicShaping(p)),p}(h.text,e,r)}),s}ri([{name:"triangle",components:3,type:"Uint16"}]),ri([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ri([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ri([{type:"Float32",name:"offsetX"}]),ri([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ri([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Rr=24;const cu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},R0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Xo={40:!0};function k0(s,e,r,h,p,v){if("fontStack"in e){const x=r[e.fontStack],E=x&&x[s];return E?E.metrics.advance*e.scale+p:0}{const x=h[e.imageName];return x?x.displaySize[0]*e.scale*Rr/v+p:0}}function so(s,e,r,h){const p=Math.pow(s-e,2);return h?s<e?p/2:2*p:p+Math.abs(r)*r}function eb(s,e,r){let h=0;return s===10&&(h-=1e4),r&&(h+=150),s!==40&&s!==65288||(h+=50),e!==41&&e!==65289||(h+=50),h}function O0(s,e,r,h,p,v){let x=null,E=so(e,r,p,v);for(const C of h){const k=so(e-C.x,r,p,v)+C.badness;k<=E&&(x=C,E=k)}return{index:s,x:e,priorBreak:x,badness:E}}function tb(s){return s?tb(s.priorBreak).concat(s.index):[]}class Qo{constructor(e="",r=[],h=[]){this.text=e,this.sections=r,this.sectionIndex=h,this.imageSectionID=null}static fromFeature(e,r){const h=new Qo;for(let p=0;p<e.sections.length;p++){const v=e.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,r)}return h}length(){return[...this.text].length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}verticalizePunctuation(){this.text=function(e){let r="",h={premature:!0,value:void 0};const p=e[Symbol.iterator]();let v=p.next();const x=e[Symbol.iterator]();x.next();let E=x.next();for(;!v.done;)r+=!E.done&&Zu(E.value.codePointAt(0))&&!cu[E.value]||!h.premature&&Zu(h.value.codePointAt(0))&&!cu[h.value]||!cu[v.value]?v.value:cu[v.value],h={value:v.value,premature:!1},v=p.next(),E=x.next();return r}(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const e=this.text.match(/^\s*/),r=e?e[0].length:0,h=this.text.match(/\S\s*$/),p=h?h[0].length-1:0;this.text=this.text.substring(r,this.text.length-p),this.sectionIndex=this.sectionIndex.slice(r,this.sectionIndex.length-p)}substring(e,r){const h=[...this.text].slice(e,r).join(""),p=this.sectionIndex.slice(e,r);return new Qo(h,this.sections,p)}toCodeUnitIndex(e){return[...this.text].slice(0,e).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}getMaxImageSize(e){let r=0,h=0;for(let p=0;p<this.length();p++){const v=this.getSection(p);if("imageName"in v){const x=e[v.imageName];if(!x)continue;const E=x.displaySize;r=Math.max(r,E[0]),h=Math.max(h,E[1])}}return{maxImageWidth:r,maxImageHeight:h}}addTextSection(e,r){this.text+=e.text,this.sections.push({scale:e.scale||1,verticalAlign:e.verticalAlign||"bottom",fontStack:e.fontStack||r});const h=this.sections.length-1;this.sectionIndex.push(...[...e.text].map(()=>h))}addImageSection(e){const r=e.image?e.image.name:"";if(r.length===0)return void bn("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push({scale:1,verticalAlign:e.verticalAlign||"bottom",imageName:r}),this.sectionIndex.push(this.sections.length-1)):bn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(e,r,h,p,v){const x=[],E=this.determineAverageLineWidth(e,r,h,p,v),C=this.hasZeroWidthSpaces();let k=0,P=0;const j=this.text[Symbol.iterator]();let U=j.next();const G=this.text[Symbol.iterator]();G.next();let Z=G.next();const X=this.text[Symbol.iterator]();X.next(),X.next();let ee=X.next();for(;!U.done;){const ce=this.getSection(P),ve=U.value.codePointAt(0);if(Jp(ve)||(k+=k0(ve,ce,h,p,e,v)),!Z.done){const fe=Xc(ve),ge=Z.value.codePointAt(0);(R0[ve]||fe||"imageName"in ce||!ee.done&&Xo[ge])&&x.push(O0(P+1,k,E,x,eb(ve,ge,fe&&C),!1))}P++,U=j.next(),Z=G.next(),ee=X.next()}return tb(O0(this.length(),k,E,x,0,!0))}determineAverageLineWidth(e,r,h,p,v){let x=0,E=0;for(const C of this.text){const k=this.getSection(E);x+=k0(C.codePointAt(0),k,h,p,e,v),E++}return x/Math.max(1,Math.ceil(x/r))}}const Wf=4294967296,qg=1/Wf,yd=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Hg{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,r,h=this.length){for(;this.pos<h;){const p=this.readVarint(),v=p>>3,x=this.pos;this.type=7&p,e(v,r,this),this.pos===x&&this.skip(p)}return r}readMessage(e,r){return this.readFields(e,r,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Wf;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Wf;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const r=this.buf;let h,p;return p=r[this.pos++],h=127&p,p<128?h:(p=r[this.pos++],h|=(127&p)<<7,p<128?h:(p=r[this.pos++],h|=(127&p)<<14,p<128?h:(p=r[this.pos++],h|=(127&p)<<21,p<128?h:(p=r[this.pos],h|=(15&p)<<28,function(v,x,E){const C=E.buf;let k,P;if(P=C[E.pos++],k=(112&P)>>4,P<128||(P=C[E.pos++],k|=(127&P)<<3,P<128)||(P=C[E.pos++],k|=(127&P)<<10,P<128)||(P=C[E.pos++],k|=(127&P)<<17,P<128)||(P=C[E.pos++],k|=(127&P)<<24,P<128)||(P=C[E.pos++],k|=(1&P)<<31,P<128))return _d(v,k,x);throw new Error("Expected varint not more than 10 bytes")}(h,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=12&&yd?yd.decode(this.buf.subarray(r,e)):function(h,p,v){let x="",E=p;for(;E<v;){const C=h[E];let k,P,j,U=null,G=C>239?4:C>223?3:C>191?2:1;if(E+G>v)break;G===1?C<128&&(U=C):G===2?(k=h[E+1],(192&k)==128&&(U=(31&C)<<6|63&k,U<=127&&(U=null))):G===3?(k=h[E+1],P=h[E+2],(192&k)==128&&(192&P)==128&&(U=(15&C)<<12|(63&k)<<6|63&P,(U<=2047||U>=55296&&U<=57343)&&(U=null))):G===4&&(k=h[E+1],P=h[E+2],j=h[E+3],(192&k)==128&&(192&P)==128&&(192&j)==128&&(U=(15&C)<<18|(63&k)<<12|(63&P)<<6|63&j,(U<=65535||U>=1114112)&&(U=null))),U===null?(U=65533,G=1):U>65535&&(U-=65536,x+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),x+=String.fromCharCode(U),E+=G}return x}(this.buf,r,e)}readBytes(){const e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r}readPackedVarint(e=[],r){const h=this.readPackedEnd();for(;this.pos<h;)e.push(this.readVarint(r));return e}readPackedSVarint(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){const r=7&e;if(r===0)for(;this.buf[this.pos++]>127;);else if(r===2)this.pos=this.readVarint()+this.pos;else if(r===5)this.pos+=4;else{if(r!==1)throw new Error(`Unimplemented type: ${r}`);this.pos+=8}}writeTag(e,r){this.writeVarint(e<<3|r)}realloc(e){let r=this.length||16;for(;r<this.pos+e;)r*=2;if(r!==this.length){const h=new Uint8Array(r);h.set(this.buf),this.buf=h,this.dataView=new DataView(h.buffer),this.length=r}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*qg),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*qg),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?function(r,h){let p,v;if(r>=0?(p=r%4294967296|0,v=r/4294967296|0):(p=~(-r%4294967296),v=~(-r/4294967296),4294967295^p?p=p+1|0:(p=0,v=v+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(x,E,C){C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,C.buf[C.pos]=127&(x>>>=7)}(p,0,h),function(x,E){const C=(7&x)<<4;E.buf[E.pos++]|=C|((x>>>=3)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x)))))}(v,h)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const r=this.pos;this.pos=function(p,v,x){for(let E,C,k=0;k<v.length;k++){if(E=v.charCodeAt(k),E>55295&&E<57344){if(!C){E>56319||k+1===v.length?(p[x++]=239,p[x++]=191,p[x++]=189):C=E;continue}if(E<56320){p[x++]=239,p[x++]=191,p[x++]=189,C=E;continue}E=C-55296<<10|E-56320|65536,C=null}else C&&(p[x++]=239,p[x++]=191,p[x++]=189,C=null);E<128?p[x++]=E:(E<2048?p[x++]=E>>6|192:(E<65536?p[x++]=E>>12|224:(p[x++]=E>>18|240,p[x++]=E>>12&63|128),p[x++]=E>>6&63|128),p[x++]=63&E|128)}return x}(this.buf,e,this.pos);const h=this.pos-r;h>=128&&L0(r,h,this),this.pos=r-1,this.writeVarint(h),this.pos+=h}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const r=e.length;this.writeVarint(r),this.realloc(r);for(let h=0;h<r;h++)this.buf[this.pos++]=e[h]}writeRawMessage(e,r){this.pos++;const h=this.pos;e(r,this);const p=this.pos-h;p>=128&&L0(h,p,this),this.pos=h-1,this.writeVarint(p),this.pos+=p}writeMessage(e,r,h){this.writeTag(e,2),this.writeRawMessage(r,h)}writePackedVarint(e,r){r.length&&this.writeMessage(e,nb,r)}writePackedSVarint(e,r){r.length&&this.writeMessage(e,Wg,r)}writePackedBoolean(e,r){r.length&&this.writeMessage(e,h1,r)}writePackedFloat(e,r){r.length&&this.writeMessage(e,N0,r)}writePackedDouble(e,r){r.length&&this.writeMessage(e,u1,r)}writePackedFixed32(e,r){r.length&&this.writeMessage(e,d1,r)}writePackedSFixed32(e,r){r.length&&this.writeMessage(e,ib,r)}writePackedFixed64(e,r){r.length&&this.writeMessage(e,rb,r)}writePackedSFixed64(e,r){r.length&&this.writeMessage(e,Xf,r)}writeBytesField(e,r){this.writeTag(e,2),this.writeBytes(r)}writeFixed32Field(e,r){this.writeTag(e,5),this.writeFixed32(r)}writeSFixed32Field(e,r){this.writeTag(e,5),this.writeSFixed32(r)}writeFixed64Field(e,r){this.writeTag(e,1),this.writeFixed64(r)}writeSFixed64Field(e,r){this.writeTag(e,1),this.writeSFixed64(r)}writeVarintField(e,r){this.writeTag(e,0),this.writeVarint(r)}writeSVarintField(e,r){this.writeTag(e,0),this.writeSVarint(r)}writeStringField(e,r){this.writeTag(e,2),this.writeString(r)}writeFloatField(e,r){this.writeTag(e,5),this.writeFloat(r)}writeDoubleField(e,r){this.writeTag(e,1),this.writeDouble(r)}writeBooleanField(e,r){this.writeVarintField(e,+r)}}function _d(s,e,r){return r?4294967296*e+(s>>>0):4294967296*(e>>>0)+(s>>>0)}function L0(s,e,r){const h=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(h);for(let p=r.pos-1;p>=s;p--)r.buf[p+h]=r.buf[p]}function nb(s,e){for(let r=0;r<s.length;r++)e.writeVarint(s[r])}function Wg(s,e){for(let r=0;r<s.length;r++)e.writeSVarint(s[r])}function N0(s,e){for(let r=0;r<s.length;r++)e.writeFloat(s[r])}function u1(s,e){for(let r=0;r<s.length;r++)e.writeDouble(s[r])}function h1(s,e){for(let r=0;r<s.length;r++)e.writeBoolean(s[r])}function d1(s,e){for(let r=0;r<s.length;r++)e.writeFixed32(s[r])}function ib(s,e){for(let r=0;r<s.length;r++)e.writeSFixed32(s[r])}function rb(s,e){for(let r=0;r<s.length;r++)e.writeFixed64(s[r])}function Xf(s,e){for(let r=0;r<s.length;r++)e.writeSFixed64(s[r])}function Xg(s,e,r){s===1&&r.readMessage(ab,e)}function ab(s,e,r){if(s===3){const{id:h,bitmap:p,width:v,height:x,left:E,top:C,advance:k}=r.readMessage(ob,{});e.push({id:h,bitmap:new jf({width:v+6,height:x+6},p),metrics:{width:v,height:x,left:E,top:C,advance:k}})}}function ob(s,e,r){s===1?e.id=r.readVarint():s===2?e.bitmap=r.readBytes():s===3?e.width=r.readVarint():s===4?e.height=r.readVarint():s===5?e.left=r.readSVarint():s===6?e.top=r.readSVarint():s===7&&(e.advance=r.readVarint())}function P0(s){let e=0,r=0;for(const x of s)e+=x.w*x.h,r=Math.max(r,x.w);s.sort((x,E)=>E.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let p=0,v=0;for(const x of s)for(let E=h.length-1;E>=0;E--){const C=h[E];if(!(x.w>C.w||x.h>C.h)){if(x.x=C.x,x.y=C.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===C.w&&x.h===C.h){const k=h.pop();k&&E<h.length&&(h[E]=k)}else x.h===C.h?(C.x+=x.w,C.w-=x.w):x.w===C.w?(C.y+=x.h,C.h-=x.h):(h.push({x:C.x+x.w,y:C.y,w:C.w-x.w,h:x.h}),C.y+=x.h,C.h-=x.h);break}}return{w:p,h:v,fill:e/(p*v)||0}}class Qg{constructor(e,{pixelRatio:r,version:h,stretchX:p,stretchY:v,content:x,textFitWidth:E,textFitHeight:C}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h,this.textFitWidth=E,this.textFitHeight=C}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class z0{constructor(e,r){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(e,h,v),this.addImages(r,p,v);const{w:x,h:E}=P0(v),C=new Ra({width:x||1,height:E||1});for(const k in e){const P=e[k],j=h[k].paddedRect;Ra.copy(P.data,C,{x:0,y:0},{x:j.x+1,y:j.y+1},P.data)}for(const k in r){const P=r[k],j=p[k].paddedRect,U=j.x+1,G=j.y+1,Z=P.data.width,X=P.data.height;Ra.copy(P.data,C,{x:0,y:0},{x:U,y:G},P.data),Ra.copy(P.data,C,{x:0,y:X-1},{x:U,y:G-1},{width:Z,height:1}),Ra.copy(P.data,C,{x:0,y:0},{x:U,y:G+X},{width:Z,height:1}),Ra.copy(P.data,C,{x:Z-1,y:0},{x:U-1,y:G},{width:1,height:X}),Ra.copy(P.data,C,{x:0,y:0},{x:U+Z,y:G},{width:1,height:X})}this.image=C,this.iconPositions=h,this.patternPositions=p}addImages(e,r,h){for(const p in e){const v=e[p],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};h.push(x),r[p]=new Qg(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(e,r){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in e.updatedImages)this.patchUpdatedImage(this.iconPositions[h],e.getImage(h),r),this.patchUpdatedImage(this.patternPositions[h],e.getImage(h),r)}patchUpdatedImage(e,r,h){if(!e||!r||e.version===r.version)return;e.version=r.version;const[p,v]=e.tl;h.update(r.data,void 0,{x:p,y:v})}}var uu;function vd(s,e,r,h,p,v,x,E,C,k,P,j,U,G,Z){const X=Qo.fromFeature(s,p);let ee;j===_.ay.vertical&&X.verticalizePunctuation();let ce=X.determineLineBreaks(k,v,e,h,G);const{processBidirectionalText:ve,processStyledBidirectionalText:fe}=js;if(ve&&X.sections.length===1){ee=[],ce=ce.map(He=>X.toCodeUnitIndex(He));const Pe=ve(X.toString(),ce);for(const He of Pe){const ft=[...He].map(()=>0);ee.push(new Qo(He,X.sections,ft))}}else if(fe){ee=[],ce=ce.map(st=>X.toCodeUnitIndex(st));let Pe=0;const He=[];for(const st of X.text)He.push(...Array(st.length).fill(X.sectionIndex[Pe])),Pe++;const ft=fe(X.text,He,ce);for(const st of ft){const yt=[];let It="";for(const Et of st[0])yt.push(st[1][It.length]),It+=Et;ee.push(new Qo(st[0],X.sections,yt))}}else ee=function(Pe,He){const ft=[];let st=0;for(const yt of He)ft.push(Pe.substring(st,yt)),st=yt;return st<Pe.length()&&ft.push(Pe.substring(st,Pe.length())),ft}(X,ce);const ge=[],Ne={positionedLines:ge,text:X.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(Pe,He,ft,st,yt,It,Et,At,lt,Wt,Xt,Jt){let Bt=0,Rn=0,Ji=0,Zr=0;const Ya=At==="right"?1:At==="left"?0:.5,yc=Rr/Jt;let Io=0;for(const Tr of yt){Tr.trim();const Oa=Tr.getMaxScale(),co={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[Io]=co;const uo=co.positionedGlyphs;let es=0;if(!Tr.length()){Rn+=It,++Io;continue}const Ha=sb(st,Tr,yc);let ts=0;for(const ga of Tr.text){const or=Tr.getSection(ts),$r=ga.codePointAt(0),pr=F0(lt,Xt,$r),ya={glyph:$r,imageName:null,x:Bt,y:Rn+-17,vertical:pr,scale:1,fontStack:"",sectionIndex:Tr.getSectionIndex(ts),metrics:null,rect:null};let Rd;if("fontStack"in or){if(Rd=f1(or,$r,pr,Ha,He,ft),!Rd)continue;ya.fontStack=or.fontStack}else{if(Pe.iconsInText=!0,or.scale*=yc,Rd=lb(or,pr,Oa,Ha,st),!Rd)continue;es=Math.max(es,Rd.imageOffset),ya.imageName=or.imageName}const{rect:mu,metrics:__,baselineOffset:cp}=Rd;ya.y+=cp,ya.scale=or.scale,ya.metrics=__,ya.rect=mu,uo.push(ya),pr?(Pe.verticalizable=!0,Bt+=("imageName"in or?__.advance:Rr)*or.scale+Wt):Bt+=__.advance*or.scale+Wt,ts++}uo.length!==0&&(Ji=Math.max(Bt-Wt,Ji),p1(uo,0,uo.length-1,Ya)),Bt=0,co.lineOffset=Math.max(es,(Oa-1)*Rr);const _c=It*Oa+es;Rn+=_c,Zr=Math.max(_c,Zr),++Io}const{horizontalAlign:ka,verticalAlign:qa}=Kg(Et);(function(Tr,Oa,co,uo,es,Ha,ts,_c,ga){const or=(Oa-co)*es;let $r=0;$r=Ha!==ts?-_c*uo- -17:-uo*ga*ts+.5*ts;for(const pr of Tr)for(const ya of pr.positionedGlyphs)ya.x+=or,ya.y+=$r})(Pe.positionedLines,Ya,ka,qa,Ji,Zr,It,Rn,yt.length),Pe.top+=-qa*Rn,Pe.bottom=Pe.top+Rn,Pe.left+=-ka*Ji,Pe.right=Pe.left+Ji}(Ne,e,r,h,ee,x,E,C,j,k,U,Z),!function(Pe){for(const He of Pe)if(He.positionedGlyphs.length!==0)return!1;return!0}(ge)&&Ne}function Kg(s){let e=.5,r=.5;switch(s){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function sb(s,e,r){const h=e.getMaxScale()*Rr,{maxImageWidth:p,maxImageHeight:v}=e.getMaxImageSize(s),x=Math.max(h,v*r);return{verticalLineContentWidth:Math.max(h,p*r),horizontalLineContentHeight:x}}function vi(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function F0(s,e,r){return!(s===_.ay.horizontal||!e&&!xo(r)||e&&(Jp(r)||(h=r,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function f1(s,e,r,h,p,v){const x=v[s.fontStack],E=function(k,P,j,U){if(k&&k.rect)return k;const G=P[j.fontStack],Z=G&&G[U];return Z?{rect:null,metrics:Z.metrics}:null}(x&&x[e],p,s,e);if(E===null)return null;let C;if(r)C=h.verticalLineContentWidth-s.scale*Rr;else{const k=vi(s.verticalAlign);C=(h.horizontalLineContentHeight-s.scale*Rr)*k}return{rect:E.rect,metrics:E.metrics,baselineOffset:C}}function lb(s,e,r,h,p){const v=p[s.imageName];if(!v)return null;const x=v.paddedRect,E=v.displaySize,C={width:E[0],height:E[1],left:1,top:-3,advance:e?E[1]:E[0]};let k;if(e)k=h.verticalLineContentWidth-E[1]*s.scale;else{const P=vi(s.verticalAlign);k=(h.horizontalLineContentHeight-E[1]*s.scale)*P}return{rect:x,metrics:C,baselineOffset:k,imageOffset:(e?E[0]:E[1])*s.scale-Rr*r}}function p1(s,e,r,h){if(h===0)return;const p=s[r],v=(s[r].x+p.metrics.advance*p.scale)*h;for(let x=e;x<=r;x++)s[x].x-=v}function m1(s,e,r){const{horizontalAlign:h,verticalAlign:p}=Kg(r),v=e[0]-s.displaySize[0]*h,x=e[1]-s.displaySize[1]*p;return{image:s,top:x,bottom:x+s.displaySize[1],left:v,right:v+s.displaySize[0]}}function cb(s){var e,r;let h=s.left,p=s.top,v=s.right-h,x=s.bottom-p;const E=(e=s.image.textFitWidth)!==null&&e!==void 0?e:"stretchOrShrink",C=(r=s.image.textFitHeight)!==null&&r!==void 0?r:"stretchOrShrink",k=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(C==="proportional"){if(E==="stretchOnly"&&v/x<k||E==="proportional"){const P=Math.ceil(x*k);h*=P/v,v=P}}else if(E==="proportional"&&C==="stretchOnly"&&k!==0&&v/x>k){const P=Math.ceil(v/k);p*=P/x,x=P}return{x1:h,y1:p,x2:h+v,y2:p+x}}function _m(s,e,r,h,p,v){const x=s.image;let E;if(x.content){const ee=x.content,ce=x.pixelRatio||1;E=[ee[0]/ce,ee[1]/ce,x.displaySize[0]-ee[2]/ce,x.displaySize[1]-ee[3]/ce]}const C=e.left*v,k=e.right*v;let P,j,U,G;r==="width"||r==="both"?(G=p[0]+C-h[3],j=p[0]+k+h[1]):(G=p[0]+(C+k-x.displaySize[0])/2,j=G+x.displaySize[0]);const Z=e.top*v,X=e.bottom*v;return r==="height"||r==="both"?(P=p[1]+Z-h[0],U=p[1]+X+h[2]):(P=p[1]+(Z+X-x.displaySize[1])/2,U=P+x.displaySize[1]),{image:x,top:P,right:j,bottom:U,left:G,collisionPadding:E}}Ot("ImagePosition",Qg),Ot("ImageAtlas",z0),_.ay=void 0,(uu=_.ay||(_.ay={}))[uu.none=0]="none",uu[uu.horizontal=1]="horizontal",uu[uu.vertical=2]="vertical",uu[uu.horizontalOnly=3]="horizontalOnly";const Ao=128,pc=32640;function vm(s,e){const{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new ti(s+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=r;let v=0;for(;v<h.length&&h[v]<=s;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<s+1;)x++;x=Math.min(h.length-1,x);const E=h[v],C=h[x];return r.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:C,interpolationType:p}:{kind:"camera",minZoom:E,maxZoom:C,minSize:r.evaluate(new ti(E)),maxSize:r.evaluate(new ti(C)),interpolationType:p}}}function bm(s,e,r){let h="never";const p=s.get(e);return p?h=p:s.get(r)&&(h="always"),h}const rh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ko(s,e,r,h,p,v,x,E,C,k,P,j,U){const G=E?Math.min(pc,Math.round(E[0])):0,Z=E?Math.min(pc,Math.round(E[1])):0;s.emplaceBack(e,r,Math.round(32*h),Math.round(32*p),v,x,(G<<1)+(C?1:0),Z,16*k,16*P,256*j,256*U)}function bd(s,e,r){s.emplaceBack(e.x,e.y,r),s.emplaceBack(e.x,e.y,r),s.emplaceBack(e.x,e.y,r),s.emplaceBack(e.x,e.y,r)}function g1(s){for(const e of s.sections)if(vl(e.text))return!0;return!1}class Jg{constructor(e){this.layoutVertexArray=new We,this.indexArray=new wt,this.programConfigurations=e,this.segments=new an,this.dynamicLayoutVertexArray=new $e,this.opacityVertexArray=new Ye,this.hasVisibleVertices=!1,this.placedSymbolArray=new L}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,r,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ia.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,ih.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,rh,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ot("SymbolBuffers",Jg);class ey{constructor(e,r,h){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new h,this.segments=new an,this.collisionVertexArray=new xt}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Hf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ot("CollisionBuffers",ey);class xd{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(x=>x.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vm(this.zoom,r["text-size"]),this.iconSizeData=vm(this.zoom,r["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=bm(h,"text-overlap","text-allow-overlap")!=="never"||bm(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>_.ay[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=e.sourceID}createArrays(){this.text=new Jg(new Al(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Jg(new Al(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Y,this.lineVertexArray=new $,this.symbolInstances=new B,this.textAnchorOffsets=new oe}calculateGlyphDependencies(e,r,h,p,v){for(const x of e)if(r[x.codePointAt(0)]=!0,(h||p)&&v){const E=cu[x];E&&(r[E.codePointAt(0)]=!0)}}populate(e,r,h){const p=this.layers[0],v=p.layout,x=v.get("text-font"),E=v.get("text-field"),C=v.get("icon-image"),k=(E.value.kind!=="constant"||E.value.value instanceof nr&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),P=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,j=v.get("symbol-sort-key");if(this.features=[],!k&&!P)return;const U=r.iconDependencies,G=r.glyphDependencies,Z=r.availableImages,X=new ti(this.zoom);for(const{feature:ee,id:ce,index:ve,sourceLayerIndex:fe}of e){const ge=p._featureFilter.needGeometry,Ne=Ia(ee,ge);if(!p._featureFilter.filter(X,Ne,h))continue;let Pe,He;if(ge||(Ne.geometry=Ml(ee)),k){const st=p.getValueAndResolveTokens("text-field",Ne,h,Z),yt=nr.factory(st),It=this.hasRTLText=this.hasRTLText||g1(yt);(!It||js.getRTLTextPluginStatus()==="unavailable"||It&&js.isParsed())&&(Pe=I0(yt,p,Ne))}if(P){const st=p.getValueAndResolveTokens("icon-image",Ne,h,Z);He=st instanceof ir?st:ir.fromString(st)}if(!Pe&&!He)continue;const ft=this.sortFeaturesByKey?j.evaluate(Ne,{},h):void 0;if(this.features.push({id:ce,text:Pe,icon:He,index:ve,sourceLayerIndex:fe,geometry:Ne.geometry,properties:ee.properties,type:hd.types[ee.type],sortKey:ft}),He&&(U[He.name]=!0),Pe){const st=x.evaluate(Ne,{},h).join(","),yt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_.ay.vertical)>=0;for(const It of Pe.sections)if(It.image)U[It.image.name]=!0;else{const Et=Uu(Pe.toString()),At=It.fontStack||st,lt=G[At]=G[At]||{};this.calculateGlyphDependencies(It.text,lt,yt,this.allowVerticalPlacement,Et)}}}v.get("symbol-placement")==="line"&&(this.features=function(ee){const ce={},ve={},fe=[];let ge=0;function Ne(st){fe.push(ee[st]),ge++}function Pe(st,yt,It){const Et=ve[st];return delete ve[st],ve[yt]=Et,fe[Et].geometry[0].pop(),fe[Et].geometry[0]=fe[Et].geometry[0].concat(It[0]),Et}function He(st,yt,It){const Et=ce[yt];return delete ce[yt],ce[st]=Et,fe[Et].geometry[0].shift(),fe[Et].geometry[0]=It[0].concat(fe[Et].geometry[0]),Et}function ft(st,yt,It){const Et=It?yt[0][yt[0].length-1]:yt[0][0];return`${st}:${Et.x}:${Et.y}`}for(let st=0;st<ee.length;st++){const yt=ee[st],It=yt.geometry,Et=yt.text?yt.text.toString():null;if(!Et){Ne(st);continue}const At=ft(Et,It),lt=ft(Et,It,!0);if(At in ve&&lt in ce&&ve[At]!==ce[lt]){const Wt=He(At,lt,It),Xt=Pe(At,lt,fe[Wt].geometry);delete ce[At],delete ve[lt],ve[ft(Et,fe[Xt].geometry,!0)]=Xt,fe[Wt].geometry=null}else At in ve?Pe(At,lt,It):lt in ce?He(At,lt,It):(Ne(st),ce[At]=ge-1,ve[lt]=ge-1)}return fe.filter(st=>st.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ee,ce)=>ee.sortKey-ce.sortKey)}update(e,r,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,{imagePositions:h}),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,{imagePositions:h}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const h=this.lineVertexArray.length;if(e.segment!==void 0){let p=e.dist(r[e.segment+1]),v=e.dist(r[e.segment]);const x={};for(let E=e.segment+1;E<r.length;E++)x[E]={x:r[E].x,y:r[E].y,tileUnitDistanceFromAnchor:p},E<r.length-1&&(p+=r[E+1].dist(r[E]));for(let E=e.segment||0;E>=0;E--)x[E]={x:r[E].x,y:r[E].y,tileUnitDistanceFromAnchor:v},E>0&&(v+=r[E-1].dist(r[E]));for(let E=0;E<r.length;E++){const C=x[E];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(e,r,h,p,v,x,E,C,k,P,j,U){const G=e.indexArray,Z=e.layoutVertexArray,X=e.segments.prepareSegment(4*r.length,Z,G,this.canOverlap?x.sortKey:void 0),ee=this.glyphOffsetArray.length,ce=X.vertexLength,ve=this.allowVerticalPlacement&&E===_.ay.vertical?Math.PI/2:0,fe=x.text&&x.text.sections;for(let ge=0;ge<r.length;ge++){const{tl:Ne,tr:Pe,bl:He,br:ft,tex:st,pixelOffsetTL:yt,pixelOffsetBR:It,minFontScaleX:Et,minFontScaleY:At,glyphOffset:lt,isSDF:Wt,sectionIndex:Xt}=r[ge],Jt=X.vertexLength,Bt=lt[1];Ko(Z,C.x,C.y,Ne.x,Bt+Ne.y,st.x,st.y,h,Wt,yt.x,yt.y,Et,At),Ko(Z,C.x,C.y,Pe.x,Bt+Pe.y,st.x+st.w,st.y,h,Wt,It.x,yt.y,Et,At),Ko(Z,C.x,C.y,He.x,Bt+He.y,st.x,st.y+st.h,h,Wt,yt.x,It.y,Et,At),Ko(Z,C.x,C.y,ft.x,Bt+ft.y,st.x+st.w,st.y+st.h,h,Wt,It.x,It.y,Et,At),bd(e.dynamicLayoutVertexArray,C,ve),G.emplaceBack(Jt,Jt+2,Jt+1),G.emplaceBack(Jt+1,Jt+2,Jt+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(lt[0]),ge!==r.length-1&&Xt===r[ge+1].sectionIndex||e.programConfigurations.populatePaintArrays(Z.length,x,x.index,{imagePositions:{},canonical:U,formattedSection:fe&&fe[Xt]})}e.placedSymbolArray.emplaceBack(C.x,C.y,ee,this.glyphOffsetArray.length-ee,ce,k,P,C.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],E,0,!1,0,j)}_addCollisionDebugVertex(e,r,h,p,v,x){return r.emplaceBack(0,0),e.emplaceBack(h.x,h.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(e,r,h,p,v,x,E){const C=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),k=C.vertexLength,P=v.layoutVertexArray,j=v.collisionVertexArray,U=E.anchorX,G=E.anchorY;this._addCollisionDebugVertex(P,j,x,U,G,new A(e,r)),this._addCollisionDebugVertex(P,j,x,U,G,new A(h,r)),this._addCollisionDebugVertex(P,j,x,U,G,new A(h,p)),this._addCollisionDebugVertex(P,j,x,U,G,new A(e,p)),C.vertexLength+=4;const Z=v.indexArray;Z.emplaceBack(k,k+1),Z.emplaceBack(k+1,k+2),Z.emplaceBack(k+2,k+3),Z.emplaceBack(k+3,k),C.primitiveLength+=4}addDebugCollisionBoxes(e,r,h,p){for(let v=e;v<r;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ey(qe,fc.members,ut),this.iconCollisionBox=new ey(qe,fc.members,ut);for(let e=0;e<this.symbolInstances.length;e++){const r=this.symbolInstances.get(e);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(e,r,h,p,v,x,E,C,k){const P={};for(let j=r;j<h;j++){const U=e.get(j);P.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},P.textFeatureIndex=U.featureIndex;break}for(let j=p;j<v;j++){const U=e.get(j);P.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},P.verticalTextFeatureIndex=U.featureIndex;break}for(let j=x;j<E;j++){const U=e.get(j);P.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},P.iconFeatureIndex=U.featureIndex;break}for(let j=C;j<k;j++){const U=e.get(j);P.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},P.verticalIconFeatureIndex=U.featureIndex;break}return P}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const h=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){const h=e.placedSymbolArray.get(r),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)e.indexArray.emplaceBack(v,v+2,v+1),e.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(e),h=Math.cos(e),p=[],v=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const C=this.symbolInstances.get(E);p.push(0|Math.round(r*C.anchorX+h*C.anchorY)),v.push(C.featureIndex)}return x.sort((E,C)=>p[E]-p[C]||v[C]-v[E]),x}addToSortKeyRanges(e,r){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===r?h.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const h=this.symbolInstances.get(r);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let j0,ub;Ot("SymbolBucket",xd,{omit:["layers","collisionBoxArray","features","compareText"]}),xd.MAX_GLYPHS=65535,xd.addDynamicAttributes=bd;var xm={get paint(){return ub=ub||new Ti({"icon-opacity":new Qt(me.paint_symbol["icon-opacity"]),"icon-color":new Qt(me.paint_symbol["icon-color"]),"icon-halo-color":new Qt(me.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qt(me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qt(me.paint_symbol["icon-halo-blur"]),"icon-translate":new jt(me.paint_symbol["icon-translate"]),"icon-translate-anchor":new jt(me.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qt(me.paint_symbol["text-opacity"]),"text-color":new Qt(me.paint_symbol["text-color"],{runtimeType:ca,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Qt(me.paint_symbol["text-halo-color"]),"text-halo-width":new Qt(me.paint_symbol["text-halo-width"]),"text-halo-blur":new Qt(me.paint_symbol["text-halo-blur"]),"text-translate":new jt(me.paint_symbol["text-translate"]),"text-translate-anchor":new jt(me.paint_symbol["text-translate-anchor"])})},get layout(){return j0=j0||new Ti({"symbol-placement":new jt(me.layout_symbol["symbol-placement"]),"symbol-spacing":new jt(me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jt(me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qt(me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jt(me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jt(me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new jt(me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new jt(me.layout_symbol["icon-ignore-placement"]),"icon-optional":new jt(me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jt(me.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qt(me.layout_symbol["icon-size"]),"icon-text-fit":new jt(me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jt(me.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qt(me.layout_symbol["icon-image"]),"icon-rotate":new Qt(me.layout_symbol["icon-rotate"]),"icon-padding":new Qt(me.layout_symbol["icon-padding"]),"icon-keep-upright":new jt(me.layout_symbol["icon-keep-upright"]),"icon-offset":new Qt(me.layout_symbol["icon-offset"]),"icon-anchor":new Qt(me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jt(me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jt(me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jt(me.layout_symbol["text-rotation-alignment"]),"text-field":new Qt(me.layout_symbol["text-field"]),"text-font":new Qt(me.layout_symbol["text-font"]),"text-size":new Qt(me.layout_symbol["text-size"]),"text-max-width":new Qt(me.layout_symbol["text-max-width"]),"text-line-height":new jt(me.layout_symbol["text-line-height"]),"text-letter-spacing":new Qt(me.layout_symbol["text-letter-spacing"]),"text-justify":new Qt(me.layout_symbol["text-justify"]),"text-radial-offset":new Qt(me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jt(me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Qt(me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Qt(me.layout_symbol["text-anchor"]),"text-max-angle":new jt(me.layout_symbol["text-max-angle"]),"text-writing-mode":new jt(me.layout_symbol["text-writing-mode"]),"text-rotate":new Qt(me.layout_symbol["text-rotate"]),"text-padding":new jt(me.layout_symbol["text-padding"]),"text-keep-upright":new jt(me.layout_symbol["text-keep-upright"]),"text-transform":new Qt(me.layout_symbol["text-transform"]),"text-offset":new Qt(me.layout_symbol["text-offset"]),"text-allow-overlap":new jt(me.layout_symbol["text-allow-overlap"]),"text-overlap":new jt(me.layout_symbol["text-overlap"]),"text-ignore-placement":new jt(me.layout_symbol["text-ignore-placement"]),"text-optional":new jt(me.layout_symbol["text-optional"])})}};class B0{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:qn,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ot("FormatSectionOverride",B0,{omit:["defaultValue"]});class wm extends Cr{constructor(e,r){super(e,xm,r)}recalculate(e,r){if(super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,r,h,p){const v=this.layout.get(e).evaluate(r,{},h,p),x=this._unevaluatedLayout._values[e];return x.isDataDriven()||Wh(x.value)||!v?v:function(E,C){return C.replace(/{([^{}]+)}/g,(k,P)=>E&&P in E?String(E[P]):"")}(r.properties,v)}createBucket(e){return new xd(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of xm.paint.overridableProperties){if(!wm.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),h=new B0(r),p=new zu(h,r.property.specification);let v=null;v=r.value.kind==="constant"||r.value.kind==="source"?new Ql("source",p):new Ma("composite",p,r.value.zoomStops),this.paint._values[e]=new To(r.property,v,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,h){return!(!this.layout||r.isDataDriven()||h.isDataDriven())&&wm.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const h=e.get("text-field"),p=xm.paint.properties[r];let v=!1;const x=E=>{for(const C of E)if(p.overrides&&p.overrides.hasOverride(C))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof nr)x(h.value.value.sections);else if(h.value.kind==="source"||h.value.kind==="composite"){const E=k=>{v||(k instanceof sl&&mi(k.value)===Ul?x(k.value.sections):k instanceof Nc?x(k.sections):k.eachChild(E))},C=h.value;C._styleExpression&&E(C._styleExpression.expression)}return v}}let hb;var V0={get paint(){return hb=hb||new Ti({"background-color":new jt(me.paint_background["background-color"]),"background-pattern":new Of(me.paint_background["background-pattern"]),"background-opacity":new jt(me.paint_background["background-opacity"])})}};class U0 extends Cr{constructor(e,r){super(e,V0,r)}}class y1 extends Cr{constructor(e,r){super(e,{},r),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class _1{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Tm={once:!0},G0=63710088e-1;class hu{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new hu(Kt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,h=this.lat*r,p=e.lat*r,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((e.lng-this.lng)*r);return G0*Math.acos(Math.min(v,1))}static convert(e){if(e instanceof hu)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new hu(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new hu(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const jn=2*Math.PI*G0;function ty(s){return jn*Math.cos(s*Math.PI/180)}function Sm(s){return(180+s)/360}function ny(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Z0(s,e){return s/ty(e)}function iy(s){return 360*s-180}function ah(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function Em(s,e){return s*ty(ah(e))}class Am{constructor(e,r,h=0){this.x=+e,this.y=+r,this.z=+h}static fromLngLat(e,r=0){const h=hu.convert(e);return new Am(Sm(h.lng),ny(h.lat),Z0(r,h.lat))}toLngLat(){return new hu(iy(this.x),ah(this.y))}toAltitude(){return Em(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/jn*(e=ah(this.y),1/Math.cos(e*Math.PI/180));var e}}function $0(s,e,r){var h=2*Math.PI*6378137/256/Math.pow(2,r);return[s*h-2*Math.PI*6378137/2,e*h-2*Math.PI*6378137/2]}class Y0{constructor(e,r,h){if(!function(p,v,x){return!(p<0||p>25||x<0||x>=Math.pow(2,p)||v<0||v>=Math.pow(2,p))}(e,r,h))throw new Error(`x=${r}, y=${h}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=r,this.y=h,this.key=wd(0,e,e,r,h)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r,h){const p=(x=this.y,E=this.z,C=$0(256*(v=this.x),256*(x=Math.pow(2,E)-x-1),E),k=$0(256*(v+1),256*(x+1),E),C[0]+","+C[1]+","+k[0]+","+k[1]);var v,x,E,C,k;const P=function(j,U,G){let Z,X="";for(let ee=j;ee>0;ee--)Z=1<<ee-1,X+=(U&Z?1:0)+(G&Z?2:0);return X}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,P).replace(/{bbox-epsg-3857}/g,p)}isChildOf(e){const r=this.z-e.z;return r>0&&e.x===this.x>>r&&e.y===this.y>>r}getTilePoint(e){const r=Math.pow(2,this.z);return new A((e.x*r-this.x)*pt,(e.y*r-this.y)*pt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class db{constructor(e,r){this.wrap=e,this.canonical=r,this.key=wd(e,r.z,r.z,r.x,r.y)}}class Mo{constructor(e,r,h,p,v){if(this.terrainRttPosMatrix32f=null,e<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${h}`);this.overscaledZ=e,this.wrap=r,this.canonical=new Y0(h,+p,+v),this.key=wd(r,e,h,p,v)}clone(){return new Mo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-e;return e>this.canonical.z?new Mo(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mo(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(e,r){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-e;return e>this.canonical.z?wd(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y):wd(this.wrap*+r,e,e,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(e){if(e.wrap!==this.wrap||this.overscaledZ-e.overscaledZ<=0)return!1;if(e.overscaledZ===0)return this.overscaledZ>0;const r=this.canonical.z-e.canonical.z;return!(r<0)&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new Mo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Mo(r,this.wrap,r,h,p),new Mo(r,this.wrap,r,h+1,p),new Mo(r,this.wrap,r,h,p+1),new Mo(r,this.wrap,r,h+1,p+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Mo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Mo(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new db(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Am(e.x-this.wrap,e.y))}}function wd(s,e,r,h,p){(s*=2)<0&&(s=-1*s-1);const v=1<<r;return(v*v*s+v*p+h).toString(36)+r.toString(36)+e.toString(36)}function ai(s,e){return e?s.properties[e]:s.id}function q0(s,e){const r={id:s.id};if(e.removeAllProperties&&(delete s.removeProperties,delete s.addOrUpdateProperties,delete e.removeProperties),e.removeProperties)for(const h of e.removeProperties){const p=s.addOrUpdateProperties.findIndex(v=>v.key===h);p>-1&&s.addOrUpdateProperties.splice(p,1)}return(s.removeAllProperties||e.removeAllProperties)&&(r.removeAllProperties=!0),(s.removeProperties||e.removeProperties)&&(r.removeProperties=[...s.removeProperties||[],...e.removeProperties||[]]),(s.addOrUpdateProperties||e.addOrUpdateProperties)&&(r.addOrUpdateProperties=[...s.addOrUpdateProperties||[],...e.addOrUpdateProperties||[]]),(s.newGeometry||e.newGeometry)&&(r.newGeometry=e.newGeometry||s.newGeometry),r}function pa(s){var e,r;if(!s)return{};const h={};return h.removeAll=s.removeAll,h.remove=new Set(s.remove||[]),h.add=new Map((e=s.add)===null||e===void 0?void 0:e.map(p=>[p.id,p])),h.update=new Map((r=s.update)===null||r===void 0?void 0:r.map(p=>[p.id,p])),h}Ot("CanonicalTileID",Y0),Ot("OverscaledTileID",Mo,{omit:["terrainRttPosMatrix32f"]});class fb{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const h=e[r];this._stringToNumber[h]=r,this._numberToString[r]=h}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class H0{constructor(e,r,h,p,v){this.type="Feature",this._vectorTileFeature=e,e._z=r,e._x=h,e._y=p,this.properties=e.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(e[r]=this[r]);return e}}class Qf{_name;dataBuffer;nullabilityBuffer;_size;constructor(e,r,h){this._name=e,this.dataBuffer=r,typeof h=="number"?this._size=h:(this.nullabilityBuffer=h,this._size=h.size())}getValue(e){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(e)?null:this.getValueFromBuffer(e)}has(e){return this.nullabilityBuffer&&this.nullabilityBuffer.get(e)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Kf extends Qf{}class Mm extends Kf{getValueFromBuffer(e){return this.dataBuffer[e]}}class Jf extends Kf{getValueFromBuffer(e){return this.dataBuffer[e]}}class W0 extends Qf{delta;constructor(e,r,h,p){super(e,r,p),this.delta=h}}class ry extends W0{constructor(e,r,h,p){super(e,Int32Array.of(r),h,p)}getValueFromBuffer(e){return this.dataBuffer[0]+e*this.delta}}class Cm extends Qf{constructor(e,r,h){super(e,Int32Array.of(r),h)}getValueFromBuffer(e){return this.dataBuffer[0]}}class X0{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(e,r,h,p,v=4096){this._name=e,this._geometryVector=r,this._idVector=h,this._propertyVectors=p,this._extent=v}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(e){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map(r=>[r.name,r]))),this.propertyVectorsMap.get(e)}*[Symbol.iterator](){const e=this.geometryVector[Symbol.iterator]();let r=0;for(;r<this.numFeatures;){let h;this.idVector&&(h=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(r)):this.idVector.getValue(r));const p=e?.next().value,v={};for(const x of this.propertyVectors){if(!x)continue;const E=x.name,C=x.getValue(r);C!==null&&(v[E]=C)}r++,yield{id:h,geometry:p,properties:v}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const e=[],r=this.geometryVector.getGeometries();for(let h=0;h<this.numFeatures;h++){let p;this.idVector&&(p=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(h)):this.idVector.getValue(h));const v={coordinates:r[h],type:this.geometryVector.geometryType(h)},x={};for(const E of this.propertyVectors){if(!E)continue;const C=E.name,k=E.getValue(h);k!==null&&(x[C]=k)}e.push({id:p,geometry:v,properties:x})}return e}containsMaxSaveIntegerValues(e){return e instanceof Mm||e instanceof Cm&&e instanceof ry||e instanceof Jf}}class v1{value;constructor(e){this.value=e}get(){return this.value}set(e){this.value=e}increment(){return this.value++}add(e){this.value+=e}}var ra,In,mc,Dl,Td,kr,Or,Lr,ay,Jo;(function(s){s.PRESENT="PRESENT",s.DATA="DATA",s.OFFSET="OFFSET",s.LENGTH="LENGTH"})(ra||(ra={}));class Q0{_dictionaryType;_offsetType;_lengthType;constructor(e,r,h){this._dictionaryType=e,this._offsetType=r,this._lengthType=h}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function xr(s,e,r){const h=new Int32Array(r);let p=0,v=e.get();for(let x=0;x<h.length;x++){let E=s[v++],C=127&E;E<128||(E=s[v++],C|=(127&E)<<7,E<128||(E=s[v++],C|=(127&E)<<14,E<128||(E=s[v++],C|=(127&E)<<21,E<128||(E=s[v++],C|=(15&E)<<28)))),h[p++]=C}return e.set(v),h}function ep(s,e,r){const h=new BigInt64Array(r);for(let p=0;p<h.length;p++)h[p]=mb(s,e);return h}function K0(s,e){let r,h;return h=s[e.get()],e.increment(),r=127&h,h<128?r:(h=s[e.get()],e.increment(),r|=(127&h)<<7,h<128?r:(h=s[e.get()],e.increment(),r|=(127&h)<<14,h<128?r:(h=s[e.get()],e.increment(),r|=(127&h)<<21,h<128?r:(h=s[e.get()],r|=(15&h)<<28,function(p,v,x){let E,C;if(C=v[x.get()],x.increment(),E=(112&C)>>4,C<128||(C=v[x.get()],x.increment(),E|=(127&C)<<3,C<128)||(C=v[x.get()],x.increment(),E|=(127&C)<<10,C<128)||(C=v[x.get()],x.increment(),E|=(127&C)<<17,C<128)||(C=v[x.get()],x.increment(),E|=(127&C)<<24,C<128)||(C=v[x.get()],x.increment(),E|=(1&C)<<31,C<128))return 4294967296*E+(p>>>0);throw new Error("Expected varint not more than 10 bytes")}(r,s,e)))))}function pb(s,e,r,h){throw new Error("FastPFor is not implemented yet.")}function ma(s){return s>>>1^-(1&s)}function oh(s){return s>>1n^-(1n&s)}function mb(s,e){let r=0n,h=0,p=e.get();for(;p<s.length;){const v=s[p++];if(r|=BigInt(127&v)<<BigInt(h),!(128&v))break;if(h+=7,h>=64)throw new Error("Varint too long")}return e.set(p),r}function J0(s,e,r){const h=new Int32Array(r);let p=0;for(let v=0;v<e;v++){const x=s[v];h.fill(s[v+e],p,p+x),p+=x}return h}function e_(s,e,r){const h=new BigInt64Array(r);let p=0;for(let v=0;v<e;v++){const x=Number(s[v]);h.fill(s[v+e],p,p+x),p+=x}return h}function tp(s,e,r){const h=new Float64Array(r);let p=0;for(let v=0;v<e;v++){const x=s[v];h.fill(s[v+e],p,p+x),p+=x}return h}function Co(s){const e=s.length/4*4;let r=1;if(e>=4)for(let h=s[0];r<e-4;r+=4)h=s[r]+=h,h=s[r+1]+=h,h=s[r+2]+=h,h=s[r+3]+=h;for(;r!=s.length;)s[r]+=s[r-1],++r}function t_(s){s[0]=s[0]>>>1^-(1&s[0]),s[1]=s[1]>>>1^-(1&s[1]);const e=s.length/4*4;let r=2;if(e>=4)for(;r<e-4;r+=4){const h=s[r],p=s[r+1],v=s[r+2],x=s[r+3];s[r]=(h>>>1^-(1&h))+s[r-2],s[r+1]=(p>>>1^-(1&p))+s[r-1],s[r+2]=(v>>>1^-(1&v))+s[r],s[r+3]=(x>>>1^-(1&x))+s[r+1]}for(;r!=s.length;r+=2)s[r]=(s[r]>>>1^-(1&s[r]))+s[r-2],s[r+1]=(s[r+1]>>>1^-(1&s[r+1]))+s[r-1]}function Il(s,e,r){return Math.min(r,Math.max(e,s))}(function(s){s.NONE="NONE",s.DELTA="DELTA",s.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",s.RLE="RLE",s.MORTON="MORTON",s.PDE="PDE"})(In||(In={})),function(s){s.NONE="NONE",s.FAST_PFOR="FAST_PFOR",s.VARINT="VARINT",s.ALP="ALP"}(mc||(mc={})),function(s){s.NONE="NONE",s.SINGLE="SINGLE",s.SHARED="SHARED",s.VERTEX="VERTEX",s.MORTON="MORTON",s.FSST="FSST"}(Dl||(Dl={})),function(s){s.VERTEX="VERTEX",s.INDEX="INDEX",s.STRING="STRING",s.KEY="KEY"}(Td||(Td={})),function(s){s.VAR_BINARY="VAR_BINARY",s.GEOMETRIES="GEOMETRIES",s.PARTS="PARTS",s.RINGS="RINGS",s.TRIANGLES="TRIANGLES",s.SYMBOL="SYMBOL",s.DICTIONARY="DICTIONARY"}(kr||(kr={}));class lo{_physicalStreamType;_logicalStreamType;_logicalLevelTechnique1;_logicalLevelTechnique2;_physicalLevelTechnique;_numValues;_byteLength;constructor(e,r,h,p,v,x,E){this._physicalStreamType=e,this._logicalStreamType=r,this._logicalLevelTechnique1=h,this._logicalLevelTechnique2=p,this._physicalLevelTechnique=v,this._numValues=x,this._byteLength=E}static decode(e,r){const h=e[r.get()],p=Object.values(ra)[h>>4];let v=null;switch(p){case ra.DATA:v=new Q0(Object.values(Dl)[15&h]);break;case ra.OFFSET:v=new Q0(null,Object.values(Td)[15&h]);break;case ra.LENGTH:v=new Q0(null,null,Object.values(kr)[15&h])}r.increment();const x=e[r.get()],E=Object.values(In)[x>>5],C=Object.values(In)[x>>2&7],k=Object.values(mc)[3&x];r.increment();const P=xr(e,r,2);return new lo(p,v,E,C,k,P[0],P[1])}get physicalStreamType(){return this._physicalStreamType}get logicalStreamType(){return this._logicalStreamType}get logicalLevelTechnique1(){return this._logicalLevelTechnique1}get logicalLevelTechnique2(){return this._logicalLevelTechnique2}get physicalLevelTechnique(){return this._physicalLevelTechnique}get numValues(){return this._numValues}get byteLength(){return this._byteLength}getDecompressedCount(){return this._numValues}}class oy extends lo{num_bits;coordinate_shift;constructor(e,r,h,p,v,x,E,C,k){super(e,r,h,p,v,x,E),this.num_bits=C,this.coordinate_shift=k}static decode(e,r){const h=lo.decode(e,r),p=xr(e,r,2);return new oy(h.physicalStreamType,h.logicalStreamType,h.logicalLevelTechnique1,h.logicalLevelTechnique2,h.physicalLevelTechnique,h.numValues,h.byteLength,p[0],p[1])}static decodePartial(e,r,h){const p=xr(r,h,2);return new oy(e.physicalStreamType,e.logicalStreamType,e.logicalLevelTechnique1,e.logicalLevelTechnique2,e.physicalLevelTechnique,e.numValues,e.byteLength,p[0],p[1])}numBits(){return this.num_bits}coordinateShift(){return this.coordinate_shift}}class Dm extends lo{_runs;_numRleValues;constructor(e,r,h,p,v,x,E,C,k){super(e,r,h,p,v,x,E),this._runs=C,this._numRleValues=k}static decode(e,r){const h=lo.decode(e,r),p=xr(e,r,2);return new Dm(h.physicalStreamType,h.logicalStreamType,h.logicalLevelTechnique1,h.logicalLevelTechnique2,h.physicalLevelTechnique,h.numValues,h.byteLength,p[0],p[1])}static decodePartial(e,r,h){const p=xr(r,h,2);return new Dm(e.physicalStreamType,e.logicalStreamType,e.logicalLevelTechnique1,e.logicalLevelTechnique2,e.physicalLevelTechnique,e.numValues,e.byteLength,p[0],p[1])}get runs(){return this._runs}get numRleValues(){return this._numRleValues}getDecompressedCount(){return this._numRleValues}}class wr{static decode(e,r){const h=lo.decode(e,r);return h.logicalLevelTechnique1===In.MORTON?oy.decodePartial(h,e,r):In.RLE!==h.logicalLevelTechnique1&&In.RLE!==h.logicalLevelTechnique2||mc.NONE===h.physicalLevelTechnique?h:Dm.decodePartial(h,e,r)}}(function(s){s[s.FLAT=0]="FLAT",s[s.CONST=1]="CONST",s[s.SEQUENCE=2]="SEQUENCE",s[s.DICTIONARY=3]="DICTIONARY",s[s.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Or||(Or={}));class $s{values;_size;constructor(e,r){this.values=e,this._size=r}get(e){const r=Math.floor(e/8);return(this.values[r]>>e%8&1)==1}set(e,r){const h=Math.floor(e/8);this.values[h]=this.values[h]|(r?1:0)<<e%8}getInt(e){const r=Math.floor(e/8);return this.values[r]>>e%8&1}size(){return this._size}getBuffer(){return this.values}}class dn{constructor(){}static decodeIntStream(e,r,h,p,v){const x=dn.decodePhysicalLevelTechnique(e,r,h);return this.decodeIntBuffer(x,h,p,v)}static decodeLengthStreamToOffsetBuffer(e,r,h){const p=dn.decodePhysicalLevelTechnique(e,r,h);return this.decodeLengthToOffsetBuffer(p,h)}static decodePhysicalLevelTechnique(e,r,h){const p=h.physicalLevelTechnique;if(p===mc.FAST_PFOR)return pb();if(p===mc.VARINT)return xr(e,r,h.numValues);if(p===mc.NONE){const v=r.get();r.add(h.byteLength);const x=e.subarray(v,r.get());return new Int32Array(x)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}static decodeConstIntStream(e,r,h,p){const v=dn.decodePhysicalLevelTechnique(e,r,h);if(v.length===1){const x=v[0];return p?ma(x):x}return p?function(x){return ma(x[1])}(v):function(x){return x[1]}(v)}static decodeSequenceIntStream(e,r,h){return function(p){if(p.length==2){const v=ma(p[1]);return[v,v]}return[ma(p[2]),ma(p[3])]}(dn.decodePhysicalLevelTechnique(e,r,h))}static decodeSequenceLongStream(e,r,h){return function(p){if(p.length==2){const v=oh(p[1]);return[v,v]}return[oh(p[2]),oh(p[3])]}(ep(e,r,h.numValues))}static decodeLongStream(e,r,h,p){const v=ep(e,r,h.numValues);return this.decodeLongBuffer(v,h,p)}static decodeLongFloat64Stream(e,r,h,p){const v=function(x,E,C){const k=new Float64Array(E);for(let P=0;P<E;P++)k[P]=K0(x,C);return k}(e,h.numValues,r);return this.decodeFloat64Buffer(v,h,p)}static decodeConstLongStream(e,r,h,p){const v=ep(e,r,h.numValues);if(v.length===1){const x=v[0];return p?oh(x):x}return p?function(x){return oh(x[1])}(v):function(x){return x[1]}(v)}static decodeIntBuffer(e,r,h,p){switch(r.logicalLevelTechnique1){case In.DELTA:return r.logicalLevelTechnique2===In.RLE?function(v,x,E){const C=new Int32Array(E);let k=0,P=0;for(let j=0;j<x;j++){const U=v[j],G=ma(v[j+x]);for(let Z=0;Z<U;Z++)P+=G,C[k++]=P}return C}(e,r.runs,r.numRleValues):(function(v){v[0]=v[0]>>>1^-(1&v[0]);const x=v.length/4*4;let E=1;if(x>=4)for(;E<x-4;E+=4){const C=v[E],k=v[E+1],P=v[E+2],j=v[E+3];v[E]=(C>>>1^-(1&C))+v[E-1],v[E+1]=(k>>>1^-(1&k))+v[E],v[E+2]=(P>>>1^-(1&P))+v[E+1],v[E+3]=(j>>>1^-(1&j))+v[E+2]}for(;E!=v.length;++E)v[E]=(v[E]>>>1^-(1&v[E]))+v[E-1]}(e),e);case In.RLE:return function(v,x,E){return E?function(C,k,P){const j=new Int32Array(P);let U=0;for(let G=0;G<k;G++){const Z=C[G];let X=C[G+k];X=X>>>1^-(1&X),j.fill(X,U,U+Z),U+=Z}return j}(v,x.runs,x.numRleValues):J0(v,x.runs,x.numRleValues)}(e,r,h);case In.MORTON:return Co(e),e;case In.COMPONENTWISE_DELTA:return p?(function(v,x,E,C){let k=v[0]>>>1^-(1&v[0]),P=v[1]>>>1^-(1&v[1]);v[0]=Il(Math.round(k*x),E,C),v[1]=Il(Math.round(P*x),E,C);const j=v.length/16;let U=2;if(j>=4)for(;U<j-4;U+=4){const G=v[U],Z=v[U+1],X=(G>>>1^-(1&G))+k,ee=(Z>>>1^-(1&Z))+P;v[U]=Il(Math.round(X*x),E,C),v[U+1]=Il(Math.round(ee*x),E,C);const ce=v[U+2],ve=v[U+3];k=(ce>>>1^-(1&ce))+X,P=(ve>>>1^-(1&ve))+ee,v[U+2]=Il(Math.round(k*x),E,C),v[U+3]=Il(Math.round(P*x),E,C)}for(;U!=v.length;U+=2)k+=v[U]>>>1^-(1&v[U]),P+=v[U+1]>>>1^-(1&v[U+1]),v[U]=Il(Math.round(k*x),E,C),v[U+1]=Il(Math.round(P*x),E,C)}(e,p.scale,p.min,p.max),e):(t_(e),e);case In.NONE:return h&&function(v){for(let x=0;x<v.length;x++){const E=v[x];v[x]=E>>>1^-(1&E)}}(e),e;default:throw new Error(`The specified Logical level technique is not supported: ${r.logicalLevelTechnique1}`)}}static decodeLongBuffer(e,r,h){switch(r.logicalLevelTechnique1){case In.DELTA:return r.logicalLevelTechnique2===In.RLE?function(p,v,x){const E=new BigInt64Array(x);let C=0,k=0n;for(let P=0;P<v;P++){const j=Number(p[P]),U=oh(p[P+v]);for(let G=0;G<j;G++)k+=U,E[C++]=k}return E}(e,r.runs,r.numRleValues):(function(p){p[0]=p[0]>>1n^-(1n&p[0]);const v=p.length/4*4;let x=1;if(v>=4)for(;x<v-4;x+=4){const E=p[x],C=p[x+1],k=p[x+2],P=p[x+3];p[x]=(E>>1n^-(1n&E))+p[x-1],p[x+1]=(C>>1n^-(1n&C))+p[x],p[x+2]=(k>>1n^-(1n&k))+p[x+1],p[x+3]=(P>>1n^-(1n&P))+p[x+2]}for(;x!=p.length;++x)p[x]=(p[x]>>1n^-(1n&p[x]))+p[x-1]}(e),e);case In.RLE:return function(p,v,x){return x?function(E,C,k){const P=new BigInt64Array(k);let j=0;for(let U=0;U<C;U++){const G=Number(E[U]);let Z=E[U+C];Z=Z>>1n^-(1n&Z),P.fill(Z,j,j+G),j+=G}return P}(p,v.runs,v.numRleValues):e_(p,v.runs,v.numRleValues)}(e,r,h);case In.NONE:return h&&function(p){for(let v=0;v<p.length;v++){const x=p[v];p[v]=x>>1n^-(1n&x)}}(e),e;default:throw new Error(`The specified Logical level technique is not supported: ${r.logicalLevelTechnique1}`)}}static decodeFloat64Buffer(e,r,h){switch(r.logicalLevelTechnique1){case In.DELTA:return r.logicalLevelTechnique2===In.RLE&&(e=tp(e,r.runs,r.numRleValues)),function(p){p[0]=p[0]%2==1?(p[0]+1)/-2:p[0]/2;const v=p.length/4*4;let x=1;if(v>=4)for(;x<v-4;x+=4){const E=p[x],C=p[x+1],k=p[x+2],P=p[x+3];p[x]=(E%2==1?(E+1)/-2:E/2)+p[x-1],p[x+1]=(C%2==1?(C+1)/-2:C/2)+p[x],p[x+2]=(k%2==1?(k+1)/-2:k/2)+p[x+1],p[x+3]=(P%2==1?(P+1)/-2:P/2)+p[x+2]}for(;x!=p.length;++x)p[x]=(p[x]%2==1?(p[x]+1)/-2:p[x]/2)+p[x-1]}(e),e;case In.RLE:return function(p,v,x){return x?function(E,C,k){const P=new Float64Array(k);let j=0;for(let U=0;U<C;U++){const G=E[U];let Z=E[U+C];Z=Z%2==1?(Z+1)/-2:Z/2,P.fill(Z,j,j+G),j+=G}return P}(p,v.runs,v.numRleValues):tp(p,v.runs,v.numRleValues)}(e,r,h);case In.NONE:return h&&function(p){for(let v=0;v<p.length;v++){const x=p[v];p[v]=x%2==1?(x+1)/-2:x/2}}(e),e;default:throw new Error(`The specified Logical level technique is not supported: ${r.logicalLevelTechnique1}`)}}static decodeLengthToOffsetBuffer(e,r){if(r.logicalLevelTechnique1===In.DELTA&&r.logicalLevelTechnique2===In.NONE)return function(h){const p=new Int32Array(h.length+1);p[0]=0,p[1]=ma(h[0]);let v=p[1],x=2;for(;x!=p.length;++x){const E=h[x-1];v+=E>>>1^-(1&E),p[x]=p[x-1]+v}return p}(e);if(r.logicalLevelTechnique1===In.RLE&&r.logicalLevelTechnique2===In.NONE)return function(h,p,v){const x=new Int32Array(v+1);x[0]=0;let E=1,C=x[0];for(let k=0;k<p;k++){const P=h[k],j=h[k+p];for(let U=E;U<E+P;U++)x[U]=j+C,C=x[U];E+=P}return x}(e,r.runs,r.numRleValues);if(r.logicalLevelTechnique1===In.NONE&&r.logicalLevelTechnique2===In.NONE){(function(p){let v=0;for(let x=0;x<p.length;x++)p[x]+=v,v=p[x]})(e);const h=new Int32Array(r.numValues+1);return h[0]=0,h.set(e,1),h}if(r.logicalLevelTechnique1===In.DELTA&&r.logicalLevelTechnique2===In.RLE){const h=function(p,v,x){const E=new Int32Array(x+1);E[0]=0;let C=1,k=E[0];for(let P=0;P<v;P++){const j=p[P];let U=p[P+v];U=U>>>1^-(1&U);for(let G=C;G<C+j;G++)E[G]=U+k,k=E[G];C+=j}return E}(e,r.runs,r.numRleValues);return Co(h),h}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")}static decodeNullableIntStream(e,r,h,p,v){const x=h.physicalLevelTechnique===mc.FAST_PFOR?pb():xr(e,r,h.numValues);return this.decodeNullableIntBuffer(x,h,p,v)}static decodeNullableLongStream(e,r,h,p,v){const x=ep(e,r,h.numValues);return this.decodeNullableLongBuffer(x,h,p,v)}static decodeNullableIntBuffer(e,r,h,p){switch(r.logicalLevelTechnique1){case In.DELTA:return r.logicalLevelTechnique2===In.RLE&&(e=J0(e,r.runs,r.numRleValues)),function(v,x){const E=new Int32Array(v.size());let C=0;v.get(0)?(E[0]=v.get(0)?x[0]>>>1^-(1&x[0]):0,C=1):E[0]=0;let k=1;for(;k!=E.length;++k)E[k]=v.get(k)?E[k-1]+(x[C]>>>1^-(1&x[C++])):E[k-1];return E}(p,e);case In.RLE:return function(v,x,E,C){const k=x;return E?function(P,j,U){const G=new Int32Array(P.size());let Z=0;for(let X=0;X<U;X++){const ee=j[X];let ce=j[X+U];ce=ce>>>1^-(1&ce);for(let ve=Z;ve<Z+ee;ve++)P.get(ve)?G[ve]=ce:(G[ve]=0,Z++);Z+=ee}return G}(C,v,k.runs):function(P,j,U){const G=new Int32Array(P.size());let Z=0;for(let X=0;X<U;X++){const ee=j[X],ce=j[X+U];for(let ve=Z;ve<Z+ee;ve++)P.get(ve)?G[ve]=ce:(G[ve]=0,Z++);Z+=ee}return G}(C,v,k.runs)}(e,r,h,p);case In.MORTON:return Co(e),e;case In.COMPONENTWISE_DELTA:return t_(e),e;case In.NONE:return e=h?function(v,x){const E=new Int32Array(v.size());let C=0,k=0;for(;k!=E.length;++k)if(v.get(k)){const P=x[C++];E[k]=P>>>1^-(1&P)}else E[k]=0;return E}(p,e):function(v,x){const E=new Int32Array(v.size());let C=0,k=0;for(;k!=E.length;++k)E[k]=v.get(k)?x[C++]:0;return E}(p,e),e;default:throw new Error("The specified Logical level technique is not supported")}}static decodeNullableLongBuffer(e,r,h,p){switch(r.logicalLevelTechnique1){case In.DELTA:return r.logicalLevelTechnique2===In.RLE&&(e=e_(e,r.runs,r.numRleValues)),function(v,x){const E=new BigInt64Array(v.size());let C=0;v.get(0)?(E[0]=v.get(0)?x[0]>>1n^-(1n&x[0]):0n,C=1):E[0]=0n;let k=1;for(;k!=E.length;++k)E[k]=v.get(k)?E[k-1]+(x[C]>>1n^-(1n&x[C++])):E[k-1];return E}(p,e);case In.RLE:return function(v,x,E,C){const k=x;return E?function(P,j,U){const G=new BigInt64Array(P.size());let Z=0;for(let X=0;X<U;X++){const ee=Number(j[X]);let ce=j[X+U];ce=ce>>1n^-(1n&ce);for(let ve=Z;ve<Z+ee;ve++)P.get(ve)?G[ve]=ce:(G[ve]=0n,Z++);Z+=ee}return G}(C,v,k.runs):function(P,j,U){const G=new BigInt64Array(P.size());let Z=0;for(let X=0;X<U;X++){const ee=Number(j[X]),ce=j[X+U];for(let ve=Z;ve<Z+ee;ve++)P.get(ve)?G[ve]=ce:(G[ve]=0n,Z++);Z+=ee}return G}(C,v,k.runs)}(e,r,h,p);case In.NONE:return e=h?function(v,x){const E=new BigInt64Array(v.size());let C=0,k=0;for(;k!=E.length;++k)if(v.get(k)){const P=x[C++];E[k]=P>>1n^-(1n&P)}else E[k]=0n;return E}(p,e):function(v,x){const E=new BigInt64Array(v.size());let C=0,k=0;for(;k!=E.length;++k)E[k]=v.get(k)?x[C++]:0n;return E}(p,e),e;default:throw new Error("The specified Logical level technique is not supported")}}static getVectorType(e,r,h,p){const v=e.logicalLevelTechnique1;if(v===In.RLE)return e.runs===1?Or.CONST:Or.FLAT;const x=r instanceof $s?r.size():r;if(v===In.DELTA&&e.logicalLevelTechnique2===In.RLE){const E=e.runs,C=2;if(e.numRleValues!==x)return Or.FLAT;if(E===1)return Or.SEQUENCE;if(E===2){const k=p.get();let P;if(e.physicalLevelTechnique===mc.VARINT)P=xr(h,p,4);else{const j=p.get();P=new Int32Array(h.buffer,h.byteOffset+j,4)}if(p.set(k),P[2]===C&&P[3]===C)return Or.SEQUENCE}}return e.numValues===1?Or.CONST:Or.FLAT}}class gb extends Kf{getValueFromBuffer(e){return this.dataBuffer[e]}}class yb extends W0{constructor(e,r,h,p){super(e,BigInt64Array.of(r),h,p)}getValueFromBuffer(e){return this.dataBuffer[0]+BigInt(e)*this.delta}}class np{_geometryOffsets;_partOffsets;_ringOffsets;constructor(e,r,h){this._geometryOffsets=e,this._partOffsets=r,this._ringOffsets=h}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}class b1{tileExtent;_numBits;_coordinateShift;minBound;maxBound;constructor(e,r){this._coordinateShift=e<0?Math.abs(e):0,this.tileExtent=r+this._coordinateShift,this._numBits=Math.ceil(Math.log2(this.tileExtent)),this.minBound=e,this.maxBound=r}validateCoordinates(e){if(e.x<this.minBound||e.y<this.minBound||e.x>this.maxBound||e.y>this.maxBound)throw new Error("The specified tile buffer size is currently not supported.")}numBits(){return this._numBits}coordinateShift(){return this._coordinateShift}}class ip extends b1{encode(e){this.validateCoordinates(e);const r=e.x+this._coordinateShift,h=e.y+this._coordinateShift;let p=0;for(let v=0;v<this._numBits;v++)p|=(r&1<<v)<<v|(h&1<<v)<<v+1;return p}decode(e){return{x:this.decodeMorton(e)-this._coordinateShift,y:this.decodeMorton(e>>1)-this._coordinateShift}}decodeMorton(e){let r=0;for(let h=0;h<this._numBits;h++)r|=(e&1<<2*h)>>h;return r}static decode(e,r,h){return{x:ip.decodeMorton(e,r)-h,y:ip.decodeMorton(e>>1,r)-h}}static decodeMorton(e,r){let h=0;for(let p=0;p<r;p++)h|=(e&1<<2*p)>>p;return h}}(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON",s[s.MULTIPOINT=3]="MULTIPOINT",s[s.MULTILINESTRING=4]="MULTILINESTRING",s[s.MULTIPOLYGON=5]="MULTIPOLYGON"})(Lr||(Lr={})),function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON"}(ay||(ay={})),function(s){s[s.MORTON=0]="MORTON",s[s.VEC_2=1]="VEC_2",s[s.VEC_3=2]="VEC_3"}(Jo||(Jo={}));class x1{createPoint(e){return[[e]]}createMultiPoint(e){return e.map(r=>[r])}createLineString(e){return[e]}createMultiLineString(e){return e}createPolygon(e,r){return[e,...r]}createMultiPolygon(e){return e.flat()}}function n_(s){const e=new Array(s.numGeometries);let r=1,h=1,p=1,v=0;const x=new x1;let E=0,C=0;const k=s.mortonSettings,P=s.topologyVector,j=P.geometryOffsets,U=P.partOffsets,G=P.ringOffsets,Z=s.vertexOffsets,X=s.containsPolygonGeometry(),ee=s.vertexBuffer;for(let ce=0;ce<s.numGeometries;ce++){const ve=s.geometryType(ce);if(ve===Lr.POINT){if(Z&&Z.length!==0)if(s.vertexBufferType===Jo.VEC_2){const fe=2*Z[C++],ge=new A(ee[fe],ee[fe+1]);e[v++]=x.createPoint(ge)}else{const fe=Z[C++],ge=ip.decode(ee[fe],k.numBits,k.coordinateShift),Ne=new A(ge.x,ge.y);e[v++]=x.createPoint(Ne)}else{const fe=new A(ee[E++],ee[E++]);e[v++]=x.createPoint(fe)}j&&p++,U&&r++,G&&h++}else if(ve===Lr.MULTIPOINT){const fe=j[p]-j[p-1];p++;const ge=new Array(fe);if(Z&&Z.length!==0){for(let Ne=0;Ne<fe;Ne++){const Pe=2*Z[C++];ge[Ne]=new A(ee[Pe],ee[Pe+1])}e[v++]=x.createMultiPoint(ge)}else{for(let Ne=0;Ne<fe;Ne++){const Pe=ee[E++],He=ee[E++];ge[Ne]=new A(Pe,He)}e[v++]=x.createMultiPoint(ge)}}else if(ve===Lr.LINESTRING){let fe,ge=0;X?(ge=G[h]-G[h-1],h++):ge=U[r]-U[r-1],r++,Z&&Z.length!==0?(fe=s.vertexBufferType===Jo.VEC_2?lh(ee,Z,C,ge,!1):Sd(ee,Z,C,ge,!1,k),C+=ge):(fe=i_(ee,E,ge,!1),E+=2*ge),e[v++]=x.createLineString(fe),j&&p++}else if(ve===Lr.POLYGON){const fe=U[r]-U[r-1];r++;const ge=new Array(fe-1);let Ne=G[h]-G[h-1];if(h++,Z&&Z.length!==0){const Pe=s.vertexBufferType===Jo.VEC_2?sh(ee,Z,C,Ne):Im(ee,Z,C,Ne,0,k);C+=Ne;for(let He=0;He<ge.length;He++)Ne=G[h]-G[h-1],h++,ge[He]=s.vertexBufferType===Jo.VEC_2?sh(ee,Z,C,Ne):Im(ee,Z,C,Ne,0,k),C+=Ne;e[v++]=x.createPolygon(Pe,ge)}else{const Pe=du(ee,E,Ne);E+=2*Ne;for(let He=0;He<ge.length;He++)Ne=G[h]-G[h-1],h++,ge[He]=du(ee,E,Ne),E+=2*Ne;e[v++]=x.createPolygon(Pe,ge)}j&&p++}else if(ve===Lr.MULTILINESTRING){const fe=j[p]-j[p-1];p++;const ge=new Array(fe);if(Z&&Z.length!==0){for(let Ne=0;Ne<fe;Ne++){let Pe=0;X?(Pe=G[h]-G[h-1],h++):Pe=U[r]-U[r-1],r++;const He=s.vertexBufferType===Jo.VEC_2?lh(ee,Z,C,Pe,!1):Sd(ee,Z,C,Pe,!1,k);ge[Ne]=He,C+=Pe}e[v++]=x.createMultiLineString(ge)}else{for(let Ne=0;Ne<fe;Ne++){let Pe=0;X?(Pe=G[h]-G[h-1],h++):Pe=U[r]-U[r-1],r++,ge[Ne]=i_(ee,E,Pe,!1),E+=2*Pe}e[v++]=x.createMultiLineString(ge)}}else{if(ve!==Lr.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const fe=j[p]-j[p-1];p++;const ge=new Array(fe);let Ne=0;if(Z&&Z.length!==0){for(let Pe=0;Pe<fe;Pe++){const He=U[r]-U[r-1];r++;const ft=new Array(He-1);Ne=G[h]-G[h-1],h++;const st=s.vertexBufferType===Jo.VEC_2?sh(ee,Z,C,Ne):Im(ee,Z,C,Ne,0,k);C+=Ne;for(let yt=0;yt<ft.length;yt++)Ne=G[h]-G[h-1],h++,ft[yt]=s.vertexBufferType===Jo.VEC_2?sh(ee,Z,C,Ne):Im(ee,Z,C,Ne,0,k),C+=Ne;ge[Pe]=x.createPolygon(st,ft)}e[v++]=x.createMultiPolygon(ge)}else{for(let Pe=0;Pe<fe;Pe++){const He=U[r]-U[r-1];r++;const ft=new Array(He-1);Ne=G[h]-G[h-1],h++;const st=du(ee,E,Ne);E+=2*Ne;for(let yt=0;yt<ft.length;yt++){const It=G[h]-G[h-1];h++,ft[yt]=du(ee,E,It),E+=2*It}ge[Pe]=x.createPolygon(st,ft)}e[v++]=x.createMultiPolygon(ge)}}}}return e}function du(s,e,r){return i_(s,e,r,!0)}function sh(s,e,r,h){return lh(s,e,r,h,!0)}function Im(s,e,r,h,p,v){return Sd(s,e,r,h,!0,v)}function i_(s,e,r,h){const p=new Array(h?r+1:r);for(let v=0;v<2*r;v+=2)p[v/2]=new A(s[e+v],s[e+v+1]);return h&&(p[p.length-1]=p[0]),p}function lh(s,e,r,h,p){const v=new Array(p?h+1:h);for(let x=0;x<2*h;x+=2){const E=2*e[r+x/2];v[x/2]=new A(s[E],s[E+1])}return p&&(v[v.length-1]=v[0]),v}function Sd(s,e,r,h,p,v){const x=new Array(p?h+1:h);for(let E=0;E<h;E++){const C=ip.decode(s[e[r+E]],v.numBits,v.coordinateShift);x[E]=new A(C.x,C.y)}return p&&(x[x.length-1]=x[0]),x}class r_{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(e,r,h,p,v){this._vertexBufferType=e,this._topologyVector=r,this._vertexOffsets=h,this._vertexBuffer=p,this._mortonSettings=v}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const e=n_(this);let r=0;for(;r<this.numGeometries;)yield{coordinates:e[r],type:this.geometryType(r)},r++}getSimpleEncodedVertex(e){const r=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[r],this.vertexBuffer[r+1]]}getVertex(e){if(this.vertexOffsets&&this.mortonSettings){const h=ip.decode(this.vertexBuffer[this.vertexOffsets[e]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[h.x,h.y]}const r=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[r],this.vertexBuffer[r+1]]}getGeometries(){return n_(this)}get mortonSettings(){return this._mortonSettings}}class ch extends r_{_numGeometries;_geometryType;constructor(e,r,h,p,v,x,E){super(h,p,v,x,E),this._numGeometries=e,this._geometryType=r}static createMortonEncoded(e,r,h,p,v,x){return new ch(e,r,Jo.MORTON,h,p,v,x)}static create(e,r,h,p,v){return new ch(e,r,Jo.VEC_2,h,p,v)}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Lr.POLYGON||this._geometryType===Lr.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Ed extends r_{_geometryTypes;constructor(e,r,h,p,v,x){super(e,h,p,v,x),this._geometryTypes=r}static createMortonEncoded(e,r,h,p,v){return new Ed(Jo.MORTON,e,r,h,p,v)}static create(e,r,h,p){return new Ed(Jo.VEC_2,e,r,h,p)}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let e=0;e<this.numGeometries;e++)if(this.geometryType(e)===Lr.POLYGON||this.geometryType(e)===Lr.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class sy{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(e,r,h,p){this._triangleOffsets=e,this._indexBuffer=r,this._vertexBuffer=h,this._topologyVector=p}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const e=new Array(this.numGeometries),r=this._topologyVector,h=r.partOffsets,p=r.ringOffsets,v=r.geometryOffsets;let x=0,E=1,C=1,k=1;for(let P=0;P<this.numGeometries;P++)switch(this.geometryType(P)){case Lr.POLYGON:{const j=h[E]-h[E-1];E++;const U=[];for(let G=0;G<j;G++){const Z=p[C]-p[C-1];C++;const X=[];for(let ee=0;ee<Z;ee++){const ce=this._vertexBuffer[x++],ve=this._vertexBuffer[x++];X.push(new A(ce,ve))}X.length>0&&X.push(X[0]),U.push(X)}e[P]=U,v&&k++}break;case Lr.MULTIPOLYGON:{const j=v[k]-v[k-1];k++;const U=[];for(let G=0;G<j;G++){const Z=h[E]-h[E-1];E++;for(let X=0;X<Z;X++){const ee=p[C]-p[C-1];C++;const ce=[];for(let ve=0;ve<ee;ve++){const fe=this._vertexBuffer[x++],ge=this._vertexBuffer[x++];ce.push(new A(fe,ge))}ce.length>0&&ce.push(ce[0]),U.push(ce)}}e[P]=U}}return e}[Symbol.iterator](){return null}}class Ad extends sy{_numGeometries;_geometryType;constructor(e,r,h,p,v,x){super(h,p,v,x),this._numGeometries=e,this._geometryType=r}static create(e,r,h,p,v,x){return new Ad(e,r,h,p,v,x)}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}class Rm extends sy{_geometryTypes;constructor(e,r,h,p,v){super(r,h,p,v),this._geometryTypes=e}static create(e,r,h,p,v){return new Rm(e,r,h,p,v)}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function _b(s,e,r,h,p){const v=wr.decode(s,r);let x=null,E=null,C=null,k=null,P=null,j=null,U=null,G=null;if(dn.getVectorType(v,h,s,r)===Or.CONST){const X=dn.decodeConstIntStream(s,r,v,!1);for(let ee=0;ee<e-1;ee++){const ce=wr.decode(s,r);switch(ce.physicalStreamType){case ra.LENGTH:switch(ce.logicalStreamType.lengthType){case kr.GEOMETRIES:x=dn.decodeLengthStreamToOffsetBuffer(s,r,ce);break;case kr.PARTS:E=dn.decodeLengthStreamToOffsetBuffer(s,r,ce);break;case kr.RINGS:C=dn.decodeLengthStreamToOffsetBuffer(s,r,ce);break;case kr.TRIANGLES:U=dn.decodeLengthStreamToOffsetBuffer(s,r,ce)}break;case ra.OFFSET:switch(ce.logicalStreamType.offsetType){case Td.VERTEX:k=dn.decodeIntStream(s,r,ce,!1);break;case Td.INDEX:G=dn.decodeIntStream(s,r,ce,!1)}break;case ra.DATA:if(Dl.VERTEX===ce.logicalStreamType.dictionaryType)P=dn.decodeIntStream(s,r,ce,!0,p);else{const ve=ce;j={numBits:ve.numBits(),coordinateShift:ve.coordinateShift()},P=dn.decodeIntStream(s,r,ce,!1,p)}}}if(G!==null){if(x!=null||E!=null){const ee=new np(x,E,C);return Ad.create(h,X,U,G,P,ee)}return Ad.create(h,X,U,G,P)}return j===null?ch.create(h,X,new np(x,E,C),k,P):ch.createMortonEncoded(h,X,new np(x,E,C),k,P,j)}const Z=dn.decodeIntStream(s,r,v,!1);for(let X=0;X<e-1;X++){const ee=wr.decode(s,r);switch(ee.physicalStreamType){case ra.LENGTH:switch(ee.logicalStreamType.lengthType){case kr.GEOMETRIES:x=dn.decodeIntStream(s,r,ee,!1);break;case kr.PARTS:E=dn.decodeIntStream(s,r,ee,!1);break;case kr.RINGS:C=dn.decodeIntStream(s,r,ee,!1);break;case kr.TRIANGLES:U=dn.decodeLengthStreamToOffsetBuffer(s,r,ee)}break;case ra.OFFSET:switch(ee.logicalStreamType.offsetType){case Td.VERTEX:k=dn.decodeIntStream(s,r,ee,!1);break;case Td.INDEX:G=dn.decodeIntStream(s,r,ee,!1)}break;case ra.DATA:if(Dl.VERTEX===ee.logicalStreamType.dictionaryType)P=dn.decodeIntStream(s,r,ee,!0,p);else{const ce=ee;j={numBits:ce.numBits(),coordinateShift:ce.coordinateShift()},P=dn.decodeIntStream(s,r,ee,!1,p)}}}return G!==null&&E===null?Rm.create(Z,U,G,P):(x!==null?(x=a_(Z,x,2),E!==null&&C!==null?(E=o_(Z,x,E,!1),C=function(X,ee,ce,ve){const fe=new Int32Array(ce[ce.length-1]+1);let ge=0;fe[0]=ge;let Ne=1,Pe=1,He=0;for(let ft=0;ft<X.length;ft++){const st=X[ft],yt=ee[ft+1]-ee[ft];if(st!==0&&st!==3)for(let It=0;It<yt;It++){const Et=ce[Ne]-ce[Ne-1];Ne++;for(let At=0;At<Et;At++)ge=fe[Pe++]=ge+ve[He++]}else for(let It=0;It<yt;It++)fe[Pe++]=++ge,Ne++}return fe}(Z,x,E,C)):E!==null&&(E=function(X,ee,ce){const ve=new Int32Array(ee[ee.length-1]+1);let fe=0;ve[0]=fe;let ge=1,Ne=0;for(let Pe=0;Pe<X.length;Pe++){const He=X[Pe],ft=ee[Pe+1]-ee[Pe];if(He===4||He===1)for(let st=0;st<ft;st++)fe=ve[ge++]=fe+ce[Ne++];else for(let st=0;st<ft;st++)ve[ge++]=++fe}return ve}(Z,x,E))):E!==null&&C!==null?(E=a_(Z,E,1),C=o_(Z,E,C,!0)):E!==null&&(E=a_(Z,E,0)),G!==null?Rm.create(Z,U,G,P,new np(x,E,C)):j===null?Ed.create(Z,new np(x,E,C),k,P):Ed.createMortonEncoded(Z,new np(x,E,C),k,P,j))}function a_(s,e,r){const h=new Int32Array(s.length+1);let p=0;h[0]=p;let v=0;for(let x=0;x<s.length;x++)p=h[x+1]=p+(s[x]>r?e[v++]:1);return h}function o_(s,e,r,h){const p=new Int32Array(e[e.length-1]+1);let v=0;p[0]=v;let x=1,E=0;for(let C=0;C<s.length;C++){const k=s[C],P=e[C+1]-e[C];if(k===5||k===2||h&&(k===4||k===1))for(let j=0;j<P;j++)v=p[x++]=v+r[E++];else for(let j=0;j<P;j++)p[x++]=++v}return p}class w1 extends Qf{dataVector;constructor(e,r,h){super(e,r.getBuffer(),h),this.dataVector=r}getValueFromBuffer(e){return this.dataVector.get(e)}}class s_ extends Kf{getValueFromBuffer(e){return this.dataBuffer[e]}}class vb extends Qf{constructor(e,r,h){super(e,BigInt64Array.of(r),h)}getValueFromBuffer(e){return this.dataBuffer[0]}}function ly(s,e,r){for(let h=0;h<s;h++){const p=wr.decode(e,r);r.add(p.byteLength)}}function uh(s,e,r){return km(s,Math.ceil(e/8),r)}function km(s,e,r){const h=new Uint8Array(e);let p=0;for(;p<e;){const v=s[r.increment()];if(v<=127){const x=v+3,E=s[r.increment()],C=p+x;h.fill(E,p,C),p=C}else{const x=256-v;for(let E=0;E<x;E++)h[p++]=s[r.increment()]}}return h}const T1=new TextDecoder;function Md(s,e,r){return r-e>=12?T1.decode(s.subarray(e,r)):function(h,p,v){let x="",E=p;for(;E<v;){const C=h[E];let k,P,j,U=null,G=C>239?4:C>223?3:C>191?2:1;if(E+G>v)break;G===1?C<128&&(U=C):G===2?(k=h[E+1],(192&k)==128&&(U=(31&C)<<6|63&k,U<=127&&(U=null))):G===3?(k=h[E+1],P=h[E+2],(192&k)==128&&(192&P)==128&&(U=(15&C)<<12|(63&k)<<6|63&P,(U<=2047||U>=55296&&U<=57343)&&(U=null))):G===4&&(k=h[E+1],P=h[E+2],j=h[E+3],(192&k)==128&&(192&P)==128&&(192&j)==128&&(U=(15&C)<<18|(63&k)<<12|(63&P)<<6|63&j,(U<=65535||U>=1114112)&&(U=null))),U===null?(U=65533,G=1):U>65535&&(U-=65536,x+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),x+=String.fromCharCode(U),E+=G}return x}(s,e,r)}class l_ extends Qf{offsetBuffer;constructor(e,r,h,p){super(e,h,p),this.offsetBuffer=r}}class c_ extends l_{textEncoder;constructor(e,r,h,p){super(e,r,h,p??r.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(e){return Md(this.dataBuffer,this.offsetBuffer[e],this.offsetBuffer[e+1])}}class Cd extends l_{indexBuffer;textEncoder;constructor(e,r,h,p,v){super(e,h,p,v??r.length),this.indexBuffer=r,this.indexBuffer=r,this.textEncoder=new TextEncoder}getValueFromBuffer(e){const r=this.indexBuffer[e];return Md(this.dataBuffer,this.offsetBuffer[r],this.offsetBuffer[r+1])}}class u_ extends l_{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(e,r,h,p,v,x,E){super(e,h,p,E),this.indexBuffer=r,this.symbolOffsetBuffer=v,this.symbolTableBuffer=x,this.textEncoder=new TextEncoder}getValueFromBuffer(e){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=function(h,p,v){const x=[],E=new Array(p.length).fill(0);for(let C=1;C<p.length;C++)E[C]=E[C-1]+p[C-1];for(let C=0;C<v.length;C++)if(v[C]===255)x.push(v[++C]);else{const k=p[v[C]],P=E[v[C]];for(let j=0;j<k;j++)x.push(h[P+j])}return new Uint8Array(x)}(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const r=this.indexBuffer[e];return Md(this.decodedDictionary,this.offsetBuffer[r],this.offsetBuffer[r+1])}offsetToLengthBuffer(e){const r=new Uint32Array(e.length-1);let h=e[0];for(let p=1;p<e.length;p++){const v=e[p];r[p-1]=v-h,h=v}return r}}class rp{static ROOT_COLUMN_NAME="default";static NESTED_COLUMN_SEPARATOR=":";constructor(){}static decode(e,r,h,p,v){let x=null,E=null,C=null,k=null,P=null,j=null,U=null,G=null;for(let Z=0;Z<p;Z++){const X=wr.decode(r,h);if(X.byteLength!==0)switch(X.physicalStreamType){case ra.PRESENT:{const ee=uh(r,X.numValues,h);j=new $s(ee,X.numValues);break}case ra.OFFSET:E=v!=null||j!=null?dn.decodeNullableIntStream(r,h,X,!1,v??j):dn.decodeIntStream(r,h,X,!1);break;case ra.LENGTH:{const ee=dn.decodeLengthStreamToOffsetBuffer(r,h,X);kr.DICTIONARY===X.logicalStreamType.lengthType?x=ee:kr.SYMBOL===X.logicalStreamType.lengthType?k=ee:U=ee;break}case ra.DATA:{const ee=r.subarray(h.get(),h.get()+X.byteLength);h.add(X.byteLength);const ce=X.logicalStreamType.dictionaryType;Dl.FSST===ce?P=ee:Dl.SINGLE===ce||Dl.SHARED===ce?C=ee:Dl.NONE===ce&&(G=ee);break}}}return this.decodeFsstDictionaryVector(e,P,E,x,C,k,v??j)??this.decodeDictionaryVector(e,C,E,x,v??j)??this.decodePlainStringVector(e,U,G,E,v??j)}static decodeFsstDictionaryVector(e,r,h,p,v,x,E){return r?new u_(e,h,p,v,x,r,E):null}static decodeDictionaryVector(e,r,h,p,v){return r?v?new Cd(e,h,p,r,v):new Cd(e,h,p,r):null}static decodePlainStringVector(e,r,h,p,v){if(!r||!h)return null;if(p)return v?new Cd(e,p,r,h,v):new Cd(e,p,r,h);if(v&&v.size()!==r.length-1){const x=new Int32Array(v.size());let E=0;for(let C=0;C<v.size();C++)x[C]=v.get(C)?E++:0;return new Cd(e,x,r,h,v)}return v?new c_(e,r,h,v):new c_(e,r,h)}static decodeSharedDictionary(e,r,h,p,v){let x=null,E=null,C=null,k=null,P=!1;for(;!P;){const Z=wr.decode(e,r);switch(Z.physicalStreamType){case ra.LENGTH:kr.DICTIONARY===Z.logicalStreamType.lengthType?x=dn.decodeLengthStreamToOffsetBuffer(e,r,Z):C=dn.decodeLengthStreamToOffsetBuffer(e,r,Z);break;case ra.DATA:Dl.SINGLE===Z.logicalStreamType.dictionaryType||Dl.SHARED===Z.logicalStreamType.dictionaryType?(E=e.subarray(r.get(),r.get()+Z.byteLength),P=!0):k=e.subarray(r.get(),r.get()+Z.byteLength),r.add(Z.byteLength)}}const j=h.complexType.children,U=[];let G=0;for(const Z of j){const X=xr(e,r,1)[0];if(X==0)continue;const ee=`${h.name}${Z.name===rp.ROOT_COLUMN_NAME?"":rp.NESTED_COLUMN_SEPARATOR+Z.name}`;if(v&&!v.has(ee)){ly(X,e,r);continue}if(X!==2||Z.type!=="scalarField"||Z.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const ce=wr.decode(e,r),ve=uh(e,ce.numValues,r),fe=wr.decode(e,r),ge=(fe instanceof Dm?fe.numRleValues:fe.numValues)!==p?dn.decodeNullableIntStream(e,r,fe,!1,new $s(ve,ce.numValues)):dn.decodeIntStream(e,r,fe,!1);U[G++]=k?new u_(ee,ge,x,E,C,k,new $s(ve,ce.numValues)):new Cd(ee,ge,x,E,new $s(ve,ce.numValues))}return U}}function h_(s,e,r,h,p,v){return r.type==="scalarType"?function(x,E,C,k,P,j){let U=null,G=0;if(x===0)return null;if(j.nullable){const X=wr.decode(E,C);G=X.numValues;const ee=C.get(),ce=uh(E,G,C);C.set(ee+X.byteLength),U=new $s(ce,X.numValues)}const Z=U??k;switch(P.physicalType){case 4:case 3:return function(X,ee,ce,ve,fe){const ge=wr.decode(X,ee),Ne=dn.getVectorType(ge,fe,X,ee),Pe=ve.physicalType===3;if(Ne===Or.FLAT){const He=ap(fe)?dn.decodeNullableIntStream(X,ee,ge,Pe,fe):dn.decodeIntStream(X,ee,ge,Pe);return new Mm(ce.name,He,fe)}if(Ne===Or.SEQUENCE){const He=dn.decodeSequenceIntStream(X,ee,ge);return new ry(ce.name,He[0],He[1],ge.numRleValues)}{const He=dn.decodeConstIntStream(X,ee,ge,Pe);return new Cm(ce.name,He,fe)}}(E,C,j,P,Z);case 9:return rp.decode(j.name,E,C,j.nullable?x-1:x,U);case 0:return function(X,ee,ce,ve,fe){const ge=wr.decode(X,ee),Ne=ge.numValues,Pe=ee.get(),He=ap(fe)?function(st,yt,It,Et){const At=km(st,Math.ceil(yt/8),It),lt=new $s(At,yt),Wt=Et.size(),Xt=new $s(new Uint8Array(Wt),Wt);let Jt=0;for(let Bt=0;Bt<Et.size();Bt++){const Rn=!!Et.get(Bt)&&lt.get(Jt++);Xt.set(Bt,Rn)}return Xt.getBuffer()}(X,Ne,ee,fe):uh(X,Ne,ee);ee.set(Pe+ge.byteLength);const ft=new $s(He,Ne);return new w1(ce.name,ft,fe)}(E,C,j,0,Z);case 6:case 5:return function(X,ee,ce,ve,fe){const ge=wr.decode(X,ee),Ne=dn.getVectorType(ge,ve,X,ee),Pe=fe.physicalType===5;if(Ne===Or.FLAT){const He=ap(ve)?dn.decodeNullableLongStream(X,ee,ge,Pe,ve):dn.decodeLongStream(X,ee,ge,Pe);return new gb(ce.name,He,ve)}if(Ne===Or.SEQUENCE){const He=dn.decodeSequenceLongStream(X,ee,ge);return new yb(ce.name,He[0],He[1],ge.numRleValues)}{const He=dn.decodeConstLongStream(X,ee,ge,Pe);return new vb(ce.name,He,ve)}}(E,C,j,Z,P);case 7:return function(X,ee,ce,ve){const fe=wr.decode(X,ee),ge=ap(ve)?function(Ne,Pe,He,ft){const st=Pe.get(),yt=st+ft*Float32Array.BYTES_PER_ELEMENT,It=new Uint8Array(Ne.subarray(st,yt)).buffer,Et=new Float32Array(It);Pe.set(yt);const At=He.size(),lt=new Float32Array(At);let Wt=0;for(let Xt=0;Xt<At;Xt++)lt[Xt]=He.get(Xt)?Et[Wt++]:0;return lt}(X,ee,ve,fe.numValues):function(Ne,Pe,He){const ft=Pe.get(),st=ft+He*Float32Array.BYTES_PER_ELEMENT,yt=new Uint8Array(Ne.subarray(ft,st)).buffer,It=new Float32Array(yt);return Pe.set(st),It}(X,ee,fe.numValues);return new s_(ce.name,ge,ve)}(E,C,j,Z);case 8:return function(X,ee,ce,ve){const fe=wr.decode(X,ee),ge=ap(ve)?function(Ne,Pe,He,ft){const st=Pe.get(),yt=st+ft*Float64Array.BYTES_PER_ELEMENT,It=new Uint8Array(Ne.subarray(st,yt)).buffer,Et=new Float64Array(It);Pe.set(yt);const At=He.size(),lt=new Float64Array(At);let Wt=0;for(let Xt=0;Xt<At;Xt++)lt[Xt]=He.get(Xt)?Et[Wt++]:0;return lt}(X,ee,ve,fe.numValues):function(Ne,Pe,He){const ft=Pe.get(),st=ft+He*Float64Array.BYTES_PER_ELEMENT,yt=new Uint8Array(Ne.subarray(ft,st)).buffer,It=new Float64Array(yt);return Pe.set(st),It}(X,ee,fe.numValues);return new Jf(ce.name,ge,ve)}(E,C,j,Z);default:throw new Error(`The specified data type for the field is currently not supported: ${P}`)}}(h,s,e,p,r.scalarType,r):h!=1?null:rp.decodeSharedDictionary(s,e,r,p,v)}function ap(s){return s instanceof $s}class Om{static decodeColumnType(e){switch(e){case 0:case 1:case 2:case 3:{const r={};r.nullable=!!(1&e),r.columnScope=0;const h={};return h.physicalType=e>1?6:4,h.type="physicalType",r.scalarType=h,r.type="scalarType",r}case 4:{const r={nullable:!1,columnScope:0},h={type:"physicalType",physicalType:0};return r.type="complexType",r.complexType=h,r}case 30:{const r={nullable:!1,columnScope:0},h={type:"physicalType",physicalType:1};return r.type="complexType",r.complexType=h,r}default:return this.mapScalarType(e)}}static columnTypeHasName(e){return e>=10}static columnTypeHasChildren(e){return e===30}static hasStreamCount(e){if(e.name==="id")return!1;if(e.type==="scalarType"){const r=e.scalarType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(r.type==="logicalType")return!1}else if(e.type==="complexType"){const r=e.complexType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",e),!1}static mapScalarType(e){let r=null;switch(e){case 10:case 11:r=0;break;case 12:case 13:r=1;break;case 14:case 15:r=2;break;case 16:case 17:r=3;break;case 18:case 19:r=4;break;case 20:case 21:r=5;break;case 22:case 23:r=6;break;case 24:case 25:r=7;break;case 26:case 27:r=8;break;case 28:case 29:r=9;break;default:return null}const h={};h.nullable=!!(1&e),h.columnScope=0;const p={type:"physicalType"};return p.physicalType=r,h.type="scalarType",h.scalarType=p,h}}const cy=new TextDecoder;function bb(s,e){const r=xr(s,e,1)[0];if(r===0)return"";const h=e.get(),p=s.subarray(h,h+r);return e.add(r),cy.decode(p)}function xb(s,e){const r=xr(s,e,1)[0]>>>0,h=!!(4&r),p=!!(2&r),v=xr(s,e,1)[0]>>>0,x={};if(1&r&&(x.nullable=!0),p){const E={};if(h?(E.type="logicalType",E.logicalType=v):(E.type="physicalType",E.physicalType=v),8&r){const C=xr(s,e,1)[0]>>>0;E.children=new Array(C);for(let k=0;k<C;k++)E.children[k]=xb(s,e)}x.type="complexField",x.complexField=E}else{const E={};h?(E.type="logicalType",E.logicalType=v):(E.type="physicalType",E.physicalType=v),x.type="scalarField",x.scalarField=E}return x}function d_(s,e){const r=xr(s,e,1)[0]>>>0,h=Om.decodeColumnType(r);if(!h)throw new Error(`Unsupported column type code: ${r}`);if(Om.columnTypeHasName(r)?h.name=bb(s,e):r>=0&&r<=3?h.name="id":r===4&&(h.name="geometry"),Om.columnTypeHasChildren(r)){const p=xr(s,e,1)[0]>>>0,v=h.complexType;v.children=new Array(p);for(let x=0;x<p;x++)v.children[x]=xb(s,e)}return h}function f_(s,e){const r={featureTables:[]},h={};h.name=bb(s,e);const p=xr(s,e,1)[0]>>>0,v=xr(s,e,1)[0]>>>0;h.columns=new Array(v);for(let x=0;x<v;x++)h.columns[x]=d_(s,e);return r.featureTables.push(h),[r,p]}function uy(s,e,r,h,p,v,x=!1){const E=e.scalarType.physicalType,C=dn.getVectorType(p,v,s,r);if(E===4)switch(C){case Or.FLAT:{const k=dn.decodeIntStream(s,r,p,!1);return new Mm(h,k,v)}case Or.SEQUENCE:{const k=dn.decodeSequenceIntStream(s,r,p);return new ry(h,k[0],k[1],p.numRleValues)}case Or.CONST:{const k=dn.decodeConstIntStream(s,r,p,!1);return new Cm(h,k,v)}}else switch(C){case Or.FLAT:{if(x){const P=dn.decodeLongFloat64Stream(s,r,p,!1);return new Jf(h,P,v)}const k=dn.decodeLongStream(s,r,p,!1);return new gb(h,k,v)}case Or.SEQUENCE:{const k=dn.decodeSequenceLongStream(s,r,p);return new yb(h,k[0],k[1],p.numRleValues)}case Or.CONST:{const k=dn.decodeConstLongStream(s,r,p,!1);return new vb(h,k,v)}}throw new Error("Vector type not supported for id column.")}class p_{constructor(e,r){var h;switch(this._featureData=e,this.properties=this._featureData.properties||{},(h=this._featureData.geometry)===null||h===void 0?void 0:h.type){case Lr.POINT:case Lr.MULTIPOINT:this.type=1;break;case Lr.LINESTRING:case Lr.MULTILINESTRING:this.type=2;break;case Lr.POLYGON:case Lr.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=r,this.id=Number(this._featureData.id)}projectPoint(e,r,h,p){return[360*(e.x+r)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+h)/p)*Math.PI))-90]}projectLine(e,r,h,p){return e.map(v=>this.projectPoint(v,r,h,p))}toGeoJSON(e,r,h){const p=this.extent*Math.pow(2,h),v=this.extent*e,x=this.extent*r,E=this.loadGeometry();let C;switch(this.type){case 1:{const P=[];for(const U of E)P.push(U[0]);const j=this.projectLine(P,v,x,p);C=P.length===1?{type:"Point",coordinates:j[0]}:{type:"MultiPoint",coordinates:j};break}case 2:{const P=E.map(j=>this.projectLine(j,v,x,p));C=P.length===1?{type:"LineString",coordinates:P[0]}:{type:"MultiLineString",coordinates:P};break}case 3:{const P=Ou(E),j=[];for(const U of P)j.push(U.map(G=>this.projectLine(G,v,x,p)));C=j.length===1?{type:"Polygon",coordinates:j[0]}:{type:"MultiPolygon",coordinates:j};break}default:throw new Error(`unknown feature type: ${this.type}`)}const k={type:"Feature",geometry:C,properties:this.properties};return this.id!=null&&(k.id=this.id),k}loadGeometry(){const e=[];for(const r of this._featureData.geometry.coordinates){const h=[];for(const p of r)h.push(new A(p.x,p.y));e.push(h)}return e}bbox(){return[0,0,0,0]}}class wb{constructor(e){this.features=[],this.featureTable=e,this.name=e.name,this.extent=e.extent,this.version=2,this.features=e.getFeatures(),this.length=this.features.length}feature(e){return new p_(this.features[e],this.extent)}}class hy{constructor(e){this.layers={};const r=function(h,p,v=!0){const x=new v1(0),E=[];for(;x.get()<h.length;){const C=xr(h,x,1)[0]>>>0,k=x.get()+C;if(k>h.length)throw new Error(`Block overruns tile: ${k} > ${h.length}`);if(xr(h,x,1)[0]>>>0!=1){x.set(k);continue}const P=f_(h,x),j=P[1],U=P[0].featureTables[0];let G=null,Z=null;const X=[];let ee=0;for(const ve of U.columns){const fe=ve.name;if(fe==="id"){let ge=null;if(ve.nullable){const Pe=wr.decode(h,x),He=x.get(),ft=uh(h,Pe.numValues,x);x.set(He+Pe.byteLength),ge=new $s(ft,Pe.numValues)}const Ne=wr.decode(h,x);ee=Ne.getDecompressedCount(),G=uy(h,ve,x,fe,Ne,ge??ee,v)}else if(fe==="geometry"){const ge=xr(h,x,1)[0];if(ee===0){const Ne=x.get();ee=wr.decode(h,x).getDecompressedCount(),x.set(Ne)}Z=_b(h,ge,x,ee,p)}else{const ge=Om.hasStreamCount(ve)?xr(h,x,1)[0]:1;if(ge===0&&ve.type==="scalarType")continue;const Ne=h_(h,x,ve,ge,ee,void 0);Ne&&(Array.isArray(Ne)?X.push(...Ne):X.push(Ne))}}const ce=new X0(U.name,Z,G,X,j);E.push(ce),x.set(k)}return E}(new Uint8Array(e));this.layers=r.reduce((h,p)=>Object.assign(Object.assign({},h),{[p.name]:new wb(p)}),{})}}class Do{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){const r=new Do;return r.extend(e(new A(this.minX,this.minY))),r.extend(e(new A(this.maxX,this.minY))),r.extend(e(new A(this.minX,this.maxY))),r.extend(e(new A(this.maxX,this.maxY))),r}static fromPoints(e){const r=new Do;for(const h of e)r.extend(h);return r}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}const gc="_geojsonTileLayer";class fu{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Wc(pt,16,0),this.grid3D=new Wc(pt,16,0),this.featureIndexArray=new pe,this.promoteId=r}insert(e,r,h,p,v,x){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const C=x?this.grid3D:this.grid;for(let k=0;k<r.length;k++){const P=r[k],j=[1/0,1/0,-1/0,-1/0];for(let U=0;U<P.length;U++){const G=P[U];j[0]=Math.min(j[0],G.x),j[1]=Math.min(j[1],G.y),j[2]=Math.max(j[2],G.x),j[3]=Math.max(j[3],G.y)}j[0]<pt&&j[1]<pt&&j[2]>=0&&j[3]>=0&&C.insert(E,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new A0(new Hg(this.rawTileData)).layers:new hy(this.rawTileData).layers,this.sourceLayerCoder=new fb(this.vtLayers?Object.keys(this.vtLayers).sort():[gc])),this.vtLayers}query(e,r,h,p){this.loadVTLayers();const v=e.params,x=pt/e.tileSize/e.scale,E=Ua(v.filter,v.globalState),C=e.queryGeometry,k=e.queryPadding*x,P=Do.fromPoints(C),j=this.grid.query(P.minX-k,P.minY-k,P.maxX+k,P.maxY+k),U=Do.fromPoints(e.cameraQueryGeometry).expandBy(k),G=this.grid3D.query(U.minX,U.minY,U.maxX,U.maxY,(ee,ce,ve,fe)=>function(ge,Ne,Pe,He,ft){for(const yt of ge)if(Ne<=yt.x&&Pe<=yt.y&&He>=yt.x&&ft>=yt.y)return!0;const st=[new A(Ne,Pe),new A(Ne,ft),new A(He,ft),new A(He,Pe)];if(ge.length>2){for(const yt of st)if(sd(ge,yt))return!0}for(let yt=0;yt<ge.length-1;yt++)if(Fv(ge[yt],ge[yt+1],st))return!0;return!1}(e.cameraQueryGeometry,ee-k,ce-k,ve+k,fe+k));for(const ee of G)j.push(ee);j.sort(Lm);const Z={};let X;for(let ee=0;ee<j.length;ee++){const ce=j[ee];if(ce===X)continue;X=ce;const ve=this.featureIndexArray.get(ce);let fe=null;this.loadMatchingFeature(Z,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,E,v.layers,v.availableImages,r,h,p,(ge,Ne,Pe)=>(fe||(fe=Ml(ge)),Ne.queryIntersectsFeature({queryGeometry:C,feature:ge,featureState:Pe,geometry:fe,zoom:this.z,transform:e.transform,pixelsToTileUnits:x,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation})))}return Z}loadMatchingFeature(e,r,h,p,v,x,E,C,k,P,j){const U=this.bucketLayerIDs[r];if(x&&!U.some(ee=>x.has(ee)))return;const G=this.sourceLayerCoder.decode(h),Z=this.vtLayers[G].feature(p);if(v.needGeometry){const ee=Ia(Z,!0);if(!v.filter(new ti(this.tileID.overscaledZ),ee,this.tileID.canonical))return}else if(!v.filter(new ti(this.tileID.overscaledZ),Z))return;const X=this.getId(Z,G);for(let ee=0;ee<U.length;ee++){const ce=U[ee];if(x&&!x.has(ce))continue;const ve=C[ce];if(!ve)continue;let fe={};X&&P&&(fe=P.getState(ve.sourceLayer||gc,X));const ge=rn({},k[ce]);ge.paint=op(ge.paint,ve.paint,Z,fe,E),ge.layout=op(ge.layout,ve.layout,Z,fe,E);const Ne=!j||j(Z,ve,fe);if(!Ne)continue;const Pe=new H0(Z,this.z,this.x,this.y,X);Pe.layer=ge;let He=e[ce];He===void 0&&(He=e[ce]=[]),He.push({featureIndex:p,feature:Pe,intersectionZ:Ne})}}lookupSymbolFeatures(e,r,h,p,v,x,E,C){const k={};this.loadVTLayers();const P=Ua(v.filterSpec,v.globalState);for(const j of e)this.loadMatchingFeature(k,h,p,j,P,x,E,C,r);return k}hasLayer(e){for(const r of this.bucketLayerIDs)for(const h of r)if(e===h)return!0;return!1}getId(e,r){var h;let p=e.id;return this.promoteId&&(p=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof p=="boolean"&&(p=Number(p)),p===void 0&&(!((h=e.properties)===null||h===void 0)&&h.cluster)&&this.promoteId&&(p=Number(e.properties.cluster_id))),p}}function op(s,e,r,h,p){return qi(s,(v,x)=>{const E=e instanceof So?e.get(x):null;return E&&E.evaluate?E.evaluate(r,h,p):E})}function Lm(s,e){return e-s}function pu(s,e,r,h,p){const v=[];for(let x=0;x<s.length;x++){const E=s[x];let C;for(let k=0;k<E.length-1;k++){let P=E[k],j=E[k+1];P.x<e&&j.x<e||(P.x<e?P=new A(e,P.y+(e-P.x)/(j.x-P.x)*(j.y-P.y))._round():j.x<e&&(j=new A(e,P.y+(e-P.x)/(j.x-P.x)*(j.y-P.y))._round()),P.y<r&&j.y<r||(P.y<r?P=new A(P.x+(r-P.y)/(j.y-P.y)*(j.x-P.x),r)._round():j.y<r&&(j=new A(P.x+(r-P.y)/(j.y-P.y)*(j.x-P.x),r)._round()),P.x>=h&&j.x>=h||(P.x>=h?P=new A(h,P.y+(h-P.x)/(j.x-P.x)*(j.y-P.y))._round():j.x>=h&&(j=new A(h,P.y+(h-P.x)/(j.x-P.x)*(j.y-P.y))._round()),P.y>=p&&j.y>=p||(P.y>=p?P=new A(P.x+(p-P.y)/(j.y-P.y)*(j.x-P.x),p)._round():j.y>=p&&(j=new A(P.x+(p-P.y)/(j.y-P.y)*(j.x-P.x),p)._round()),C&&P.equals(C[C.length-1])||(C=[P],v.push(C)),C.push(j)))))}}return v}function Tb(s,e,r,h,p){switch(e){case 1:return function(v,x,E,C){const k=[];for(const P of v)for(const j of P){const U=C===0?j.x:j.y;U>=x&&U<=E&&k.push([j])}return k}(s,r,h,p);case 2:return sp(s,r,h,p,!1);case 3:return sp(s,r,h,p,!0)}return[]}function Sb(s,e,r,h,p){const v=h===0?S1:Eb;let x=[];const E=[];for(let P=0;P<s.length-1;P++){const j=s[P],U=s[P+1],G=h===0?j.x:j.y,Z=h===0?U.x:U.y;let X=!1;G<e?Z>e&&x.push(v(j,U,e)):G>r?Z<r&&x.push(v(j,U,r)):x.push(j),Z<e&&G>=e&&(x.push(v(j,U,e)),X=!0),Z>r&&G<=r&&(x.push(v(j,U,r)),X=!0),!p&&X&&(E.push(x),x=[])}const C=s.length-1,k=h===0?s[C].x:s[C].y;return k>=e&&k<=r&&x.push(s[C]),p&&x.length>0&&!x[0].equals(x[x.length-1])&&x.push(new A(x[0].x,x[0].y)),x.length>0&&E.push(x),E}function sp(s,e,r,h,p){const v=[];for(const x of s){const E=Sb(x,e,r,h,p);E.length>0&&v.push(...E)}return v}function S1(s,e,r){return new A(r,s.y+(r-s.x)/(e.x-s.x)*(e.y-s.y))}function Eb(s,e,r){return new A(s.x+(r-s.y)/(e.y-s.y)*(e.x-s.x),r)}Ot("FeatureIndex",fu,{omit:["rawTileData","sourceLayerCoder"]});class Rl extends A{constructor(e,r,h,p){super(e,r),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new Rl(this.x,this.y,this.angle,this.segment)}}function m_(s,e,r,h,p){if(e.segment===void 0||r===0)return!0;let v=e,x=e.segment+1,E=0;for(;E>-r/2;){if(x--,x<0)return!1;E-=s[x].dist(v),v=s[x]}E+=s[x].dist(s[x+1]),x++;const C=[];let k=0;for(;E<r/2;){const P=s[x],j=s[x+1];if(!j)return!1;let U=s[x-1].angleTo(P)-P.angleTo(j);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:E,angleDelta:U}),k+=U;E-C[0].distance>h;)k-=C.shift().angleDelta;if(k>p)return!1;x++,E+=P.dist(j)}return!0}function Ab(s){let e=0;for(let r=0;r<s.length-1;r++)e+=s[r].dist(s[r+1]);return e}function Nm(s,e,r){return s?.6*e*r:0}function Pm(s,e){return Math.max(s?s.right-s.left:0,e?e.right-e.left:0)}function Mb(s,e,r,h,p,v){const x=Nm(r,p,v),E=Pm(r,h)*v;let C=0;const k=Ab(s)/2;for(let P=0;P<s.length-1;P++){const j=s[P],U=s[P+1],G=j.dist(U);if(C+G>k){const Z=(k-C)/G,X=jo.number(j.x,U.x,Z),ee=jo.number(j.y,U.y,Z),ce=new Rl(X,ee,U.angleTo(j),P);return ce._round(),!x||m_(s,ce,E,x,e)?ce:void 0}C+=G}}function lp(s,e,r,h,p,v,x,E,C){const k=Nm(h,v,x),P=Pm(h,p),j=P*x,U=s[0].x===0||s[0].x===C||s[0].y===0||s[0].y===C;return e-j<e/4&&(e=j+e/4),g_(s,U?e/2*E%e:(P/2+2*v)*x*E%e,e,k,r,j,U,!1,C)}function g_(s,e,r,h,p,v,x,E,C){const k=v/2,P=Ab(s);let j=0,U=e-r,G=[];for(let Z=0;Z<s.length-1;Z++){const X=s[Z],ee=s[Z+1],ce=X.dist(ee),ve=ee.angleTo(X);for(;U+r<j+ce;){U+=r;const fe=(U-j)/ce,ge=jo.number(X.x,ee.x,fe),Ne=jo.number(X.y,ee.y,fe);if(ge>=0&&ge<C&&Ne>=0&&Ne<C&&U-k>=0&&U+k<=P){const Pe=new Rl(ge,Ne,ve,Z);Pe._round(),h&&!m_(s,Pe,v,h,p)||G.push(Pe)}}j+=ce}return E||G.length||x||(G=g_(s,j/2,r,h,p,v,x,!0,C)),G}function dy(s,e,r,h){const p=[],v=s.image,x=v.pixelRatio,E=v.paddedRect.w-2,C=v.paddedRect.h-2;let k={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const P=v.stretchX||[[0,E]],j=v.stretchY||[[0,C]],U=(lt,Wt)=>lt+Wt[1]-Wt[0],G=P.reduce(U,0),Z=j.reduce(U,0),X=E-G,ee=C-Z;let ce=0,ve=G,fe=0,ge=Z,Ne=0,Pe=X,He=0,ft=ee;if(v.content&&h){const lt=v.content,Wt=lt[2]-lt[0],Xt=lt[3]-lt[1];(v.textFitWidth||v.textFitHeight)&&(k=cb(s)),ce=Dd(P,0,lt[0]),fe=Dd(j,0,lt[1]),ve=Dd(P,lt[0],lt[2]),ge=Dd(j,lt[1],lt[3]),Ne=lt[0]-ce,He=lt[1]-fe,Pe=Wt-ve,ft=Xt-ge}const st=k.x1,yt=k.y1,It=k.x2-st,Et=k.y2-yt,At=(lt,Wt,Xt,Jt)=>{const Bt=fy(lt.stretch-ce,ve,It,st),Rn=Id(lt.fixed-Ne,Pe,lt.stretch,G),Ji=fy(Wt.stretch-fe,ge,Et,yt),Zr=Id(Wt.fixed-He,ft,Wt.stretch,Z),Ya=fy(Xt.stretch-ce,ve,It,st),yc=Id(Xt.fixed-Ne,Pe,Xt.stretch,G),Io=fy(Jt.stretch-fe,ge,Et,yt),ka=Id(Jt.fixed-He,ft,Jt.stretch,Z),qa=new A(Bt,Ji),Tr=new A(Ya,Ji),Oa=new A(Ya,Io),co=new A(Bt,Io),uo=new A(Rn/x,Zr/x),es=new A(yc/x,ka/x),Ha=e*Math.PI/180;if(Ha){const ga=Math.sin(Ha),or=Math.cos(Ha),$r=[or,-ga,ga,or];qa._matMult($r),Tr._matMult($r),co._matMult($r),Oa._matMult($r)}const ts=lt.stretch+lt.fixed,_c=Wt.stretch+Wt.fixed;return{tl:qa,tr:Tr,bl:co,br:Oa,tex:{x:v.paddedRect.x+1+ts,y:v.paddedRect.y+1+_c,w:Xt.stretch+Xt.fixed-ts,h:Jt.stretch+Jt.fixed-_c},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:uo,pixelOffsetBR:es,minFontScaleX:Pe/x/It,minFontScaleY:ft/x/Et,isSDF:r}};if(h&&(v.stretchX||v.stretchY)){const lt=y_(P,X,G),Wt=y_(j,ee,Z);for(let Xt=0;Xt<lt.length-1;Xt++){const Jt=lt[Xt],Bt=lt[Xt+1];for(let Rn=0;Rn<Wt.length-1;Rn++)p.push(At(Jt,Wt[Rn],Bt,Wt[Rn+1]))}}else p.push(At({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:C+1}));return p}function Dd(s,e,r){let h=0;for(const p of s)h+=Math.max(e,Math.min(r,p[1]))-Math.max(e,Math.min(r,p[0]));return h}function y_(s,e,r){const h=[{fixed:-1,stretch:0}];for(const[p,v]of s){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:e+1,stretch:r}),h}function fy(s,e,r,h){return s/e*r+h}function Id(s,e,r,h){return s-e*r/h}Ot("Anchor",Rl);class o{constructor(e,r,h,p,v,x,E,C,k,P){var j;if(this.boxStartIndex=e.length,k){let U=x.top,G=x.bottom;const Z=x.collisionPadding;Z&&(U-=Z[1],G+=Z[3]);let X=G-U;X>0&&(X=Math.max(10,X),this.circleDiameter=X)}else{const U=!((j=x.image)===null||j===void 0)&&j.content&&(x.image.textFitWidth||x.image.textFitHeight)?cb(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};U.y1=U.y1*E-C[0],U.y2=U.y2*E+C[2],U.x1=U.x1*E-C[3],U.x2=U.x2*E+C[1];const G=x.collisionPadding;if(G&&(U.x1-=G[0]*E,U.y1-=G[1]*E,U.x2+=G[2]*E,U.y2+=G[3]*E),P){const Z=new A(U.x1,U.y1),X=new A(U.x2,U.y1),ee=new A(U.x1,U.y2),ce=new A(U.x2,U.y2),ve=P*Math.PI/180;Z._rotate(ve),X._rotate(ve),ee._rotate(ve),ce._rotate(ve),U.x1=Math.min(Z.x,X.x,ee.x,ce.x),U.x2=Math.max(Z.x,X.x,ee.x,ce.x),U.y1=Math.min(Z.y,X.y,ee.y,ce.y),U.y2=Math.max(Z.y,X.y,ee.y,ce.y)}e.emplaceBack(r.x,r.y,U.x1,U.y1,U.x2,U.y2,h,p,v)}this.boxEndIndex=e.length}}class u{constructor(e=[],r=(h,p)=>h<p?-1:h>p?1:0){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:h}=this,p=r[e];for(;e>0;){const v=e-1>>1,x=r[v];if(h(p,x)>=0)break;r[e]=x,e=v}r[e]=p}_down(e){const{data:r,compare:h}=this,p=this.length>>1,v=r[e];for(;e<p;){let x=1+(e<<1);const E=x+1;if(E<this.length&&h(r[E],r[x])<0&&(x=E),h(r[x],v)>=0)break;r[e]=r[x],e=x}r[e]=v}}function y(s,e=1,r=!1){const h=Do.fromPoints(s[0]),p=Math.min(h.width(),h.height());let v=p/2;const x=new u([],S),{minX:E,minY:C,maxX:k,maxY:P}=h;if(p===0)return new A(E,C);for(let G=E;G<k;G+=p)for(let Z=C;Z<P;Z+=p)x.push(new I(G+v,Z+v,v,s));let j=function(G){let Z=0,X=0,ee=0;const ce=G[0];for(let ve=0,fe=ce.length,ge=fe-1;ve<fe;ge=ve++){const Ne=ce[ve],Pe=ce[ge],He=Ne.x*Pe.y-Pe.x*Ne.y;X+=(Ne.x+Pe.x)*He,ee+=(Ne.y+Pe.y)*He,Z+=3*He}return new I(X/Z,ee/Z,0,G)}(s),U=x.length;for(;x.length;){const G=x.pop();(G.d>j.d||!j.d)&&(j=G,r&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,U)),G.max-j.d<=e||(v=G.h/2,x.push(new I(G.p.x-v,G.p.y-v,v,s)),x.push(new I(G.p.x+v,G.p.y-v,v,s)),x.push(new I(G.p.x-v,G.p.y+v,v,s)),x.push(new I(G.p.x+v,G.p.y+v,v,s)),U+=4)}return r&&(console.log(`num probes: ${U}`),console.log(`best distance: ${j.d}`)),j.p}function S(s,e){return e.max-s.max}function I(s,e,r,h){this.p=new A(s,e),this.h=r,this.d=function(p,v){let x=!1,E=1/0;for(let C=0;C<v.length;C++){const k=v[C];for(let P=0,j=k.length,U=j-1;P<j;U=P++){const G=k[P],Z=k[U];G.y>p.y!=Z.y>p.y&&p.x<(Z.x-G.x)*(p.y-G.y)/(Z.y-G.y)+G.x&&(x=!x),E=Math.min(E,Dr(p,G,Z))}}return(x?1:-1)*Math.sqrt(E)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var N;_.aO=void 0,(N=_.aO||(_.aO={}))[N.center=1]="center",N[N.left=2]="left",N[N.right=3]="right",N[N.top=4]="top",N[N.bottom=5]="bottom",N[N["top-left"]=6]="top-left",N[N["top-right"]=7]="top-right",N[N["bottom-left"]=8]="bottom-left",N[N["bottom-right"]=9]="bottom-right";const W=Number.POSITIVE_INFINITY;function ue(s,e){return e[1]!==W?function(r,h,p){let v=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),r){case"top-right":case"top-left":case"top":x=p-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-p}switch(r){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(s,e[0],e[1]):function(r,h){let p=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(r){case"top-right":case"top-left":v=x-7;break;case"bottom-right":case"bottom-left":v=7-x;break;case"bottom":v=7-h;break;case"top":v=h-7}switch(r){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(s,e[0])}function Le(s,e,r){var h;const p=s.layout,v=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(e,{},r);if(v){const E=v.values,C=[];for(let k=0;k<E.length;k+=2){const P=C[k]=E[k],j=E[k+1].map(U=>U*Rr);P.startsWith("top")?j[1]-=7:P.startsWith("bottom")&&(j[1]+=7),C[k+1]=j}return new Er(C)}const x=p.get("text-variable-anchor");if(x){let E;E=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(e,{},r)*Rr,W]:p.get("text-offset").evaluate(e,{},r).map(k=>k*Rr);const C=[];for(const k of x)C.push(k,ue(k,E));return new Er(C)}return null}function Ke(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ht(s,e,r,h,p,v,x,E,C,k,P,j){let U=v.textMaxSize.evaluate(e,{});U===void 0&&(U=x);const G=s.layers[0].layout,Z=G.get("icon-offset").evaluate(e,{},P),X=tt(r.horizontal),ee=x/24,ce=s.tilePixelRatio*ee,ve=s.tilePixelRatio*U/24,fe=s.tilePixelRatio*E,ge=s.tilePixelRatio*G.get("symbol-spacing"),Ne=G.get("text-padding")*s.tilePixelRatio,Pe=function(Xt,Jt,Bt,Rn=1){const Ji=Xt.get("icon-padding").evaluate(Jt,{},Bt),Zr=Ji&&Ji.values;return[Zr[0]*Rn,Zr[1]*Rn,Zr[2]*Rn,Zr[3]*Rn]}(G,e,P,s.tilePixelRatio),He=G.get("text-max-angle")/180*Math.PI,ft=G.get("text-rotation-alignment")!=="viewport"&&G.get("symbol-placement")!=="point",st=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",yt=G.get("symbol-placement"),It=ge/2,Et=G.get("icon-text-fit");let At;h&&Et!=="none"&&(s.allowVerticalPlacement&&r.vertical&&(At=_m(h,r.vertical,Et,G.get("icon-text-fit-padding"),Z,ee)),X&&(h=_m(h,X,Et,G.get("icon-text-fit-padding"),Z,ee)));const lt=P?j.line.getGranularityForZoomLevel(P.z):1,Wt=(Xt,Jt)=>{Jt.x<0||Jt.x>=pt||Jt.y<0||Jt.y>=pt||function(Bt,Rn,Ji,Zr,Ya,yc,Io,ka,qa,Tr,Oa,co,uo,es,Ha,ts,_c,ga,or,$r,pr,ya,Rd,mu,__){const cp=Bt.addToLineVertexArray(Rn,Ji);let zm,py,my,gy,mT=0,gT=0,yT=0,_T=0,E1=-1,A1=-1;const kd={};let vT=Bs("");if(Bt.allowVerticalPlacement&&Zr.vertical){const ho=ka.layout.get("text-rotate").evaluate(pr,{},mu)+90;my=new o(qa,Rn,Tr,Oa,co,Zr.vertical,uo,es,Ha,ho),Io&&(gy=new o(qa,Rn,Tr,Oa,co,Io,_c,ga,Ha,ho))}if(Ya){const ho=ka.layout.get("icon-rotate").evaluate(pr,{}),kl=ka.layout.get("icon-text-fit")!=="none",Fm=dy(Ya,ho,Rd,kl),yu=Io?dy(Io,ho,Rd,kl):void 0;py=new o(qa,Rn,Tr,Oa,co,Ya,_c,ga,!1,ho),mT=4*Fm.length;const jm=Bt.iconSizeData;let dh=null;jm.kind==="source"?(dh=[Ao*ka.layout.get("icon-size").evaluate(pr,{})],dh[0]>pc&&bn(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):jm.kind==="composite"&&(dh=[Ao*ya.compositeIconSizes[0].evaluate(pr,{},mu),Ao*ya.compositeIconSizes[1].evaluate(pr,{},mu)],(dh[0]>pc||dh[1]>pc)&&bn(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,Fm,dh,$r,or,pr,_.ay.none,Rn,cp.lineStartIndex,cp.lineLength,-1,mu),E1=Bt.icon.placedSymbolArray.length-1,yu&&(gT=4*yu.length,Bt.addSymbols(Bt.icon,yu,dh,$r,or,pr,_.ay.vertical,Rn,cp.lineStartIndex,cp.lineLength,-1,mu),A1=Bt.icon.placedSymbolArray.length-1)}const bT=Object.keys(Zr.horizontal);for(const ho of bT){const kl=Zr.horizontal[ho];if(!zm){vT=Bs(kl.text);const yu=ka.layout.get("text-rotate").evaluate(pr,{},mu);zm=new o(qa,Rn,Tr,Oa,co,kl,uo,es,Ha,yu)}const Fm=kl.positionedLines.length===1;if(yT+=_t(Bt,Rn,kl,yc,ka,Ha,pr,ts,cp,Zr.vertical?_.ay.horizontal:_.ay.horizontalOnly,Fm?bT:[ho],kd,E1,ya,mu),Fm)break}Zr.vertical&&(_T+=_t(Bt,Rn,Zr.vertical,yc,ka,Ha,pr,ts,cp,_.ay.vertical,["vertical"],kd,A1,ya,mu));const cI=zm?zm.boxStartIndex:Bt.collisionBoxArray.length,uI=zm?zm.boxEndIndex:Bt.collisionBoxArray.length,hI=my?my.boxStartIndex:Bt.collisionBoxArray.length,dI=my?my.boxEndIndex:Bt.collisionBoxArray.length,fI=py?py.boxStartIndex:Bt.collisionBoxArray.length,pI=py?py.boxEndIndex:Bt.collisionBoxArray.length,mI=gy?gy.boxStartIndex:Bt.collisionBoxArray.length,gI=gy?gy.boxEndIndex:Bt.collisionBoxArray.length;let gu=-1;const Cb=(ho,kl)=>ho&&ho.circleDiameter?Math.max(ho.circleDiameter,kl):kl;gu=Cb(zm,gu),gu=Cb(my,gu),gu=Cb(py,gu),gu=Cb(gy,gu);const xT=gu>-1?1:0;xT&&(gu*=__/Rr),Bt.glyphOffsetArray.length>=xd.MAX_GLYPHS&&bn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),pr.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,pr.sortKey);const yI=Le(ka,pr,mu),[_I,vI]=function(ho,kl){const Fm=ho.length,yu=kl?.values;if(yu?.length>0)for(let jm=0;jm<yu.length;jm+=2){const dh=yu[jm+1];ho.emplaceBack(_.aO[yu[jm]],dh[0],dh[1])}return[Fm,ho.length]}(Bt.textAnchorOffsets,yI);Bt.symbolInstances.emplaceBack(Rn.x,Rn.y,kd.right>=0?kd.right:-1,kd.center>=0?kd.center:-1,kd.left>=0?kd.left:-1,kd.vertical||-1,E1,A1,vT,cI,uI,hI,dI,fI,pI,mI,gI,Tr,yT,_T,mT,gT,xT,0,uo,gu,_I,vI)}(s,Jt,Xt,r,h,p,At,s.layers[0],s.collisionBoxArray,e.index,e.sourceLayerIndex,s.index,ce,[Ne,Ne,Ne,Ne],ft,C,fe,Pe,st,Z,e,v,k,P,x)};if(yt==="line")for(const Xt of pu(e.geometry,0,0,pt,pt)){const Jt=Ju(Xt,lt),Bt=lp(Jt,ge,He,r.vertical||X,h,24,ve,s.overscaling,pt);for(const Rn of Bt)X&&at(s,X.text,It,Rn)||Wt(Jt,Rn)}else if(yt==="line-center"){for(const Xt of e.geometry)if(Xt.length>1){const Jt=Ju(Xt,lt),Bt=Mb(Jt,He,r.vertical||X,h,24,ve);Bt&&Wt(Jt,Bt)}}else if(e.type==="Polygon")for(const Xt of Ou(e.geometry,0)){const Jt=y(Xt,16);Wt(Ju(Xt[0],lt,!0),new Rl(Jt.x,Jt.y,0))}else if(e.type==="LineString")for(const Xt of e.geometry){const Jt=Ju(Xt,lt);Wt(Jt,new Rl(Jt[0].x,Jt[0].y,0))}else if(e.type==="Point")for(const Xt of e.geometry)for(const Jt of Xt)Wt([Jt],new Rl(Jt.x,Jt.y,0))}function _t(s,e,r,h,p,v,x,E,C,k,P,j,U,G,Z){const X=function(ve,fe,ge,Ne,Pe,He,ft,st){const yt=Ne.layout.get("text-rotate").evaluate(He,{})*Math.PI/180,It=[];for(const Et of fe.positionedLines)for(const At of Et.positionedGlyphs){if(!At.rect)continue;const lt=At.rect||{};let Wt=4,Xt=!0,Jt=1,Bt=0;const Rn=(Pe||st)&&At.vertical,Ji=At.metrics.advance*At.scale/2;if(st&&fe.verticalizable&&(Bt=Et.lineOffset/2-(At.imageName?-(Rr-At.metrics.width*At.scale)/2:(At.scale-1)*Rr)),At.imageName){const ga=ft[At.imageName];Xt=ga.sdf,Jt=ga.pixelRatio,Wt=1/Jt}const Zr=Pe?[At.x+Ji,At.y]:[0,0];let Ya=Pe?[0,0]:[At.x+Ji+ge[0],At.y+ge[1]-Bt],yc=[0,0];Rn&&(yc=Ya,Ya=[0,0]);const Io=At.metrics.isDoubleResolution?2:1,ka=(At.metrics.left-Wt)*At.scale-Ji+Ya[0],qa=(-At.metrics.top-Wt)*At.scale+Ya[1],Tr=ka+lt.w/Io*At.scale/Jt,Oa=qa+lt.h/Io*At.scale/Jt,co=new A(ka,qa),uo=new A(Tr,qa),es=new A(ka,Oa),Ha=new A(Tr,Oa);if(Rn){const ga=new A(-Ji,Ji- -17),or=-Math.PI/2,$r=12-Ji,pr=new A(22-$r,-(At.imageName?$r:0)),ya=new A(...yc);co._rotateAround(or,ga)._add(pr)._add(ya),uo._rotateAround(or,ga)._add(pr)._add(ya),es._rotateAround(or,ga)._add(pr)._add(ya),Ha._rotateAround(or,ga)._add(pr)._add(ya)}if(yt){const ga=Math.sin(yt),or=Math.cos(yt),$r=[or,-ga,ga,or];co._matMult($r),uo._matMult($r),es._matMult($r),Ha._matMult($r)}const ts=new A(0,0),_c=new A(0,0);It.push({tl:co,tr:uo,bl:es,br:Ha,tex:lt,writingMode:fe.writingMode,glyphOffset:Zr,sectionIndex:At.sectionIndex,isSDF:Xt,pixelOffsetTL:ts,pixelOffsetBR:_c,minFontScaleX:0,minFontScaleY:0})}return It}(0,r,E,p,v,x,h,s.allowVerticalPlacement),ee=s.textSizeData;let ce=null;ee.kind==="source"?(ce=[Ao*p.layout.get("text-size").evaluate(x,{})],ce[0]>pc&&bn(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ee.kind==="composite"&&(ce=[Ao*G.compositeTextSizes[0].evaluate(x,{},Z),Ao*G.compositeTextSizes[1].evaluate(x,{},Z)],(ce[0]>pc||ce[1]>pc)&&bn(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,X,ce,E,v,x,k,e,C.lineStartIndex,C.lineLength,U,Z);for(const ve of P)j[ve]=s.text.placedSymbolArray.length-1;return 4*X.length}function tt(s){for(const e in s)return s[e];return null}function at(s,e,r,h){const p=s.compareText;if(e in p){const v=p[e];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<r)return!0}else p[e]=[];return p[e].push(h),!1}const Zt=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class sn{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,h]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=Zt[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(e,2,1),[E]=new Uint32Array(e,4,1);return new sn(E,x,v,e)}constructor(e,r=64,h=Float64Array,p){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=h,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const v=Zt.indexOf(this.ArrayType),x=2*e*this.ArrayType.BYTES_PER_ELEMENT,E=e*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-E%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+E+C,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+x+E+C),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+E+C,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=e,this.coords[this._pos++]=r,h}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return bi(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:E}=this,C=[0,v.length-1,0],k=[];for(;C.length;){const P=C.pop()||0,j=C.pop()||0,U=C.pop()||0;if(j-U<=E){for(let ee=U;ee<=j;ee++){const ce=x[2*ee],ve=x[2*ee+1];ce>=e&&ce<=h&&ve>=r&&ve<=p&&k.push(v[ee])}continue}const G=U+j>>1,Z=x[2*G],X=x[2*G+1];Z>=e&&Z<=h&&X>=r&&X<=p&&k.push(v[G]),(P===0?e<=Z:r<=X)&&(C.push(U),C.push(G-1),C.push(1-P)),(P===0?h>=Z:p>=X)&&(C.push(G+1),C.push(j),C.push(1-P))}return k}within(e,r,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:x}=this,E=[0,p.length-1,0],C=[],k=h*h;for(;E.length;){const P=E.pop()||0,j=E.pop()||0,U=E.pop()||0;if(j-U<=x){for(let ee=U;ee<=j;ee++)mt(v[2*ee],v[2*ee+1],e,r)<=k&&C.push(p[ee]);continue}const G=U+j>>1,Z=v[2*G],X=v[2*G+1];mt(Z,X,e,r)<=k&&C.push(p[G]),(P===0?e-h<=Z:r-h<=X)&&(E.push(U),E.push(G-1),E.push(1-P)),(P===0?e+h>=Z:r+h>=X)&&(E.push(G+1),E.push(j),E.push(1-P))}return C}}function bi(s,e,r,h,p,v){if(p-h<=r)return;const x=h+p>>1;Ze(s,e,x,h,p,v),bi(s,e,r,h,x-1,1-v),bi(s,e,r,x+1,p,1-v)}function Ze(s,e,r,h,p,v){for(;p>h;){if(p-h>600){const k=p-h+1,P=r-h+1,j=Math.log(k),U=.5*Math.exp(2*j/3),G=.5*Math.sqrt(j*U*(k-U)/k)*(P-k/2<0?-1:1);Ze(s,e,r,Math.max(h,Math.floor(r-P*U/k+G)),Math.min(p,Math.floor(r+(k-P)*U/k+G)),v)}const x=e[2*r+v];let E=h,C=p;for(Ve(s,e,h,r),e[2*p+v]>x&&Ve(s,e,h,p);E<C;){for(Ve(s,e,E,C),E++,C--;e[2*E+v]<x;)E++;for(;e[2*C+v]>x;)C--}e[2*h+v]===x?Ve(s,e,h,C):(C++,Ve(s,e,C,p)),C<=r&&(h=C+1),r<=C&&(p=C-1)}}function Ve(s,e,r,h){Xe(s,r,h),Xe(e,2*r,2*h),Xe(e,2*r+1,2*h+1)}function Xe(s,e,r){const h=s[e];s[e]=s[r],s[r]=h}function mt(s,e,r,h){const p=s-r,v=e-h;return p*p+v*v}var en;_.cG=void 0,(en=_.cG||(_.cG={})).create="create",en.load="load",en.fullLoad="fullLoad";let Qn=null,Ht=[];const An=1e3/60,Bn="loadTime",ei="fullLoadTime",hh={mark(s){performance.mark(s)},frame(s){const e=s;Qn!=null&&Ht.push(e-Qn),Qn=e},clearMetrics(){Qn=null,Ht=[],performance.clearMeasures(Bn),performance.clearMeasures(ei);for(const s in _.cG)performance.clearMarks(_.cG[s])},getPerformanceMetrics(){performance.measure(Bn,_.cG.create,_.cG.load),performance.measure(ei,_.cG.create,_.cG.fullLoad);const s=performance.getEntriesByName(Bn)[0].duration,e=performance.getEntriesByName(ei)[0].duration,r=Ht.length,h=1/(Ht.reduce((v,x)=>v+x,0)/r/1e3),p=Ht.filter(v=>v>An).reduce((v,x)=>v+(x-An)/An,0);return{loadTime:s,fullLoadTime:e,fps:h,percentDroppedFrames:p/(r+p)*100,totalFrames:r}}};_.$=he,_.A=Ee,_.B=zs,_.C=bo,_.D=jt,_.E=Ue,_.F=function([s,e,r]){return e+=90,e*=Math.PI/180,r*=Math.PI/180,{x:s*Math.cos(e)*Math.sin(r),y:s*Math.sin(e)*Math.sin(r),z:s*Math.cos(r)}},_.G=jo,_.H=ti,_.I=Qg,_.J=Dg,_.K=function(s){if(Wn==null){const e=s.navigator?s.navigator.userAgent:null;Wn=!!s.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Wn},_.L=class{constructor(s,e){this.target=s,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new _1(()=>this.process()),this.subscription=Qa(this.target,"message",r=>this.receive(r),!1),this.globalScope=gr(self)?s:window}registerMessageHandler(s,e){this.messageHandlers[s]=e}unregisterMessageHandler(s){delete this.messageHandlers[s]}sendAsync(s,e){return new Promise((r,h)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10),v=e?Qa(e.signal,"abort",()=>{v?.unsubscribe(),delete this.resolveRejects[p];const C={id:p,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)},Tm):null;this.resolveRejects[p]={resolve:C=>{v?.unsubscribe(),r(C)},reject:C=>{v?.unsubscribe(),h(C)}};const x=[],E=Object.assign(Object.assign({},s),{id:p,sourceMapId:this.mapId,origin:location.origin,data:nc(s.data,x)});this.target.postMessage(E,{transfer:x})})}receive(s){const e=s.data,r=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!=="resource://android"&&location.origin!=="resource://android"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[r];const h=this.abortControllers[r];return delete this.abortControllers[r],void(h&&h.abort())}if(gr(self)||e.mustQueue)return this.tasks[r]=e,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,e)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),e=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(s,e)}processTask(s,e){return c(this,void 0,void 0,function*(){if(e.type==="<response>"){const p=this.resolveRejects[s];return delete this.resolveRejects[s],p?void(e.error?p.reject(Fs(e.error)):p.resolve(Fs(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const r=Fs(e.data),h=new AbortController;this.abortControllers[s]=h;try{const p=yield this.messageHandlers[e.type](e.sourceMapId,r,h);this.completeTask(s,null,p)}catch(p){this.completeTask(s,p)}})}completeTask(s,e,r){const h=[];delete this.abortControllers[s];const p={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?nc(e):null,data:nc(r,h)};this.target.postMessage(p,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},_.M=Dc,_.N=function(){var s=new Ee(16);return Ee!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},_.O=function(s,e,r){var h,p,v,x,E,C,k,P,j,U,G,Z,X=r[0],ee=r[1],ce=r[2];return e===s?(s[12]=e[0]*X+e[4]*ee+e[8]*ce+e[12],s[13]=e[1]*X+e[5]*ee+e[9]*ce+e[13],s[14]=e[2]*X+e[6]*ee+e[10]*ce+e[14],s[15]=e[3]*X+e[7]*ee+e[11]*ce+e[15]):(p=e[1],v=e[2],x=e[3],E=e[4],C=e[5],k=e[6],P=e[7],j=e[8],U=e[9],G=e[10],Z=e[11],s[0]=h=e[0],s[1]=p,s[2]=v,s[3]=x,s[4]=E,s[5]=C,s[6]=k,s[7]=P,s[8]=j,s[9]=U,s[10]=G,s[11]=Z,s[12]=h*X+E*ee+j*ce+e[12],s[13]=p*X+C*ee+U*ce+e[13],s[14]=v*X+k*ee+G*ce+e[14],s[15]=x*X+P*ee+Z*ce+e[15]),s},_.P=A,_.Q=function(s,e,r){var h=r[0],p=r[1],v=r[2];return s[0]=e[0]*h,s[1]=e[1]*h,s[2]=e[2]*h,s[3]=e[3]*h,s[4]=e[4]*p,s[5]=e[5]*p,s[6]=e[6]*p,s[7]=e[7]*p,s[8]=e[8]*v,s[9]=e[9]*v,s[10]=e[10]*v,s[11]=e[11]*v,s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s},_.R=Ra,_.S=function(s,e,r){var h=e[0],p=e[1],v=e[2],x=e[3],E=e[4],C=e[5],k=e[6],P=e[7],j=e[8],U=e[9],G=e[10],Z=e[11],X=e[12],ee=e[13],ce=e[14],ve=e[15],fe=r[0],ge=r[1],Ne=r[2],Pe=r[3];return s[0]=fe*h+ge*E+Ne*j+Pe*X,s[1]=fe*p+ge*C+Ne*U+Pe*ee,s[2]=fe*v+ge*k+Ne*G+Pe*ce,s[3]=fe*x+ge*P+Ne*Z+Pe*ve,s[4]=(fe=r[4])*h+(ge=r[5])*E+(Ne=r[6])*j+(Pe=r[7])*X,s[5]=fe*p+ge*C+Ne*U+Pe*ee,s[6]=fe*v+ge*k+Ne*G+Pe*ce,s[7]=fe*x+ge*P+Ne*Z+Pe*ve,s[8]=(fe=r[8])*h+(ge=r[9])*E+(Ne=r[10])*j+(Pe=r[11])*X,s[9]=fe*p+ge*C+Ne*U+Pe*ee,s[10]=fe*v+ge*k+Ne*G+Pe*ce,s[11]=fe*x+ge*P+Ne*Z+Pe*ve,s[12]=(fe=r[12])*h+(ge=r[13])*E+(Ne=r[14])*j+(Pe=r[15])*X,s[13]=fe*p+ge*C+Ne*U+Pe*ee,s[14]=fe*v+ge*k+Ne*G+Pe*ce,s[15]=fe*x+ge*P+Ne*Z+Pe*ve,s},_.T=Bf,_.U=function(s,e){const r={};for(let h=0;h<e.length;h++){const p=e[h];p in s&&(r[p]=s[p])}return r},_.V=hu,_.W=Kt,_.X=ny,_.Y=Sm,_.Z=q,_._=c,_.a=il,_.a$=Se,_.a0=jr,_.a1=Mo,_.a2=iy,_.a3=ah,_.a4=pt,_.a5=function(s,e,r){if(!s)return e||{};if(!e)return s||{};const h=pa(s),p=pa(e);(function(x,E){E.removeAll&&(x.add.clear(),x.update.clear(),x.remove.clear(),E.remove.clear());for(const C of E.remove)x.add.delete(C),x.update.delete(C);for(const[C,k]of E.update){const P=x.update.get(C);P&&(E.update.set(C,q0(P,k)),x.update.delete(C))}})(h,p);const v={};if((h.removeAll||p.removeAll)&&(v.removeAll=!0),v.remove=new Set([...h.remove,...p.remove]),v.add=new Map([...h.add,...p.add]),v.update=new Map([...h.update,...p.update]),v.remove.size&&v.add.size)for(const x of v.add.keys())v.remove.delete(x);return function(x){const E={};return x.removeAll&&(E.removeAll=x.removeAll),x.remove&&(E.remove=Array.from(x.remove)),x.add&&(E.add=Array.from(x.add.values())),x.update&&(E.update=Array.from(x.update.values())),E}(v)},_.a6=function(s,e){if(s==null)return!0;if(s.type==="Feature")return ai(s,e)!=null;if(s.type==="FeatureCollection"){const r=new Set;for(const h of s.features){const p=ai(h,e);if(p==null||r.has(p))return!1;r.add(p)}return!0}return!1},_.a7=function(s,e){const r=new Map;if(s!=null)if(s.type==="Feature")r.set(ai(s,e),s);else for(const h of s.features)r.set(ai(h,e),h);return r},_.a8=function(s,e,r){var h,p;if(e.removeAll)s.clear();else if(e.remove)for(const v of e.remove)s.delete(v);if(e.add)for(const v of e.add){const x=ai(v,r);x!=null&&s.set(x,v)}if(e.update)for(const v of e.update){let x=s.get(v.id);if(!x)continue;const E=!!v.newGeometry,C=v.removeAllProperties||((h=v.removeProperties)===null||h===void 0?void 0:h.length)>0||((p=v.addOrUpdateProperties)===null||p===void 0?void 0:p.length)>0;if((E||C)&&(x=Object.assign({},x),s.set(v.id,x),E&&(x.geometry=v.newGeometry),C)){if(x.properties=v.removeAllProperties?{}:Object.assign({},x.properties||{}),v.removeProperties)for(const k of v.removeProperties)delete x.properties[k];if(v.addOrUpdateProperties)for(const{key:k,value:P}of v.addOrUpdateProperties)x.properties[k]=P}}},_.a9=gc,_.aA=function(s,e){var r=e[0],h=e[1],p=e[2],v=e[3],x=e[4],E=e[5],C=e[6],k=e[7],P=e[8],j=e[9],U=e[10],G=e[11],Z=e[12],X=e[13],ee=e[14],ce=e[15],ve=r*E-h*x,fe=r*C-p*x,ge=r*k-v*x,Ne=h*C-p*E,Pe=h*k-v*E,He=p*k-v*C,ft=P*X-j*Z,st=P*ee-U*Z,yt=P*ce-G*Z,It=j*ee-U*X,Et=j*ce-G*X,At=U*ce-G*ee,lt=ve*At-fe*Et+ge*It+Ne*yt-Pe*st+He*ft;return lt?(s[0]=(E*At-C*Et+k*It)*(lt=1/lt),s[1]=(p*Et-h*At-v*It)*lt,s[2]=(X*He-ee*Pe+ce*Ne)*lt,s[3]=(U*Pe-j*He-G*Ne)*lt,s[4]=(C*yt-x*At-k*st)*lt,s[5]=(r*At-p*yt+v*st)*lt,s[6]=(ee*ge-Z*He-ce*fe)*lt,s[7]=(P*He-U*ge+G*fe)*lt,s[8]=(x*Et-E*yt+k*ft)*lt,s[9]=(h*yt-r*Et-v*ft)*lt,s[10]=(Z*Pe-X*ge+ce*ve)*lt,s[11]=(j*ge-P*Pe-G*ve)*lt,s[12]=(E*st-x*It-C*ft)*lt,s[13]=(r*It-h*st+p*ft)*lt,s[14]=(X*fe-Z*Ne-ee*ve)*lt,s[15]=(P*Ne-j*fe+U*ve)*lt,s):null},_.aB=ct,_.aC=function(s){var e=s[0],r=s[1];return Math.sqrt(e*e+r*r)},_.aD=function(s){return s[0]=0,s[1]=0,s},_.aE=function(s,e,r){return s[0]=e[0]*r,s[1]=e[1]*r,s},_.aF=bd,_.aG=Ut,_.aH=function(s,e,r,h){const p=e.y-s.y,v=e.x-s.x,x=h.y-r.y,E=h.x-r.x,C=x*v-E*p;if(C===0)return null;const k=(E*(s.y-r.y)-x*(s.x-r.x))/C;return new A(s.x+k*v,s.y+k*p)},_.aI=pu,_.aJ=im,_.aK=function(s){let e=1/0,r=1/0,h=-1/0,p=-1/0;for(const v of s)e=Math.min(e,v.x),r=Math.min(r,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return[e,r,h,p]},_.aL=Rr,_.aM=Vt,_.aN=function(s,e,r,h,p=!1){if(!r[0]&&!r[1])return[0,0];const v=p?h==="map"?-s.bearingInRadians:0:h==="viewport"?s.bearingInRadians:0;if(v){const x=Math.sin(v),E=Math.cos(v);r=[r[0]*E-r[1]*x,r[0]*x+r[1]*E]}return[p?r[0]:Vt(e,r[0],s.zoom),p?r[1]:Vt(e,r[1],s.zoom)]},_.aP=bm,_.aQ=Ke,_.aR=Kg,_.aS=sn,_.aT=ri,_.aU=ud,_.aV=ye,_.aW=an,_.aX=wt,_.aY=Sr,_.aZ=Em,_.a_=nt,_.aa=Am,_.ab=Do,_.ac=25,_.ad=Y0,_.ae=s=>{const e=window.document.createElement("video");return e.muted=!0,new Promise(r=>{e.onloadstart=()=>{r(e)};for(const h of s){const p=window.document.createElement("source");K(h)||(e.crossOrigin="Anonymous"),p.src=h,e.appendChild(p)}})},_.af=vt,_.ag=function(){return Tn++},_.ah=M,_.ai=xd,_.aj=Ua,_.ak=Ia,_.al=H0,_.am=function(s){const e={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,h,p,v)=>{const x=p||v;return e[h]=!x||x.toLowerCase(),""}),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e},_.an=zt,_.ao=85.051129,_.ap=ki,_.aq=function(s){return Math.pow(2,s)},_.ar=De,_.as=Z0,_.at=function(s){return Math.log(s)/Math.LN2},_.au=function(s){var e=s[0],r=s[1];return e*e+r*r},_.av=class{constructor(s,e){this.max=s,this.onRemove=e,this.reset()}reset(){for(const s in this.data)for(const e of this.data[s])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(s,e,r){const h=s.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const p={value:e,timeout:void 0};if(r!==void 0&&(p.timeout=setTimeout(()=>{this.remove(s,p)},r)),this.data[h].push(p),this.order.push(h),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const e=this.data[s].shift();return e.timeout&&clearTimeout(e.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),e.value}getByKey(s){const e=this.data[s];return e?e[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,e){if(!this.has(s))return this;const r=s.wrapped().key,h=e===void 0?0:this.data[r].indexOf(e),p=this.data[r][h];return this.data[r].splice(h,1),p.timeout&&clearTimeout(p.timeout),this.data[r].length===0&&delete this.data[r],this.onRemove(p.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(s){const e=[];for(const r in this.data)for(const h of this.data[r])s(h.value)||e.push(h);for(const r of e)this.remove(r.value.tileID,r)}},_.aw=function(s){if(!s.length)return new Set;const e=Math.max(...s.map(C=>C.canonical.z));let r=1/0,h=-1/0,p=1/0,v=-1/0;const x=[];for(const C of s){const{x:k,y:P,z:j}=C.canonical,U=Math.pow(2,e-j),G=k*U,Z=P*U;x.push({id:C,x:G,y:Z}),G<r&&(r=G),G>h&&(h=G),Z<p&&(p=Z),Z>v&&(v=Z)}const E=new Set;for(const C of x)C.x!==r&&C.x!==h&&C.y!==p&&C.y!==v||E.add(C.id);return E},_.ax=function(s,e){let r=0,h=0;if(s.kind==="constant")h=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=s,E=p?zt(Ur.interpolationFactor(p,e,v,x),0,1):0;s.kind==="camera"?h=jo.number(s.minSize,s.maxSize,E):r=E}return{uSizeT:r,uSize:h}},_.az=function(s,{uSize:e,uSizeT:r},{lowerSize:h,upperSize:p}){return s.kind==="source"?h/Ao:s.kind==="composite"?jo.number(h/Ao,p/Ao,r):e},_.b=ba,_.b$=class extends io{constructor(s,e){super(s,e),this.current=nu}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let e=1;e<16;e++)if(s[e]!==this.current[e]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},_.b0=function(s){var e=new Ee(3);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e},_.b1=function(s,e,r){return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],s},_.b2=function(s,e){var r=e[0],h=e[1],p=e[2],v=r*r+h*h+p*p;return v>0&&(v=1/Math.sqrt(v)),s[0]=e[0]*v,s[1]=e[1]*v,s[2]=e[2]*v,s},_.b3=Mt,_.b4=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]},_.b5=function(s,e,r){return s[0]=e[0]*r[0],s[1]=e[1]*r[1],s[2]=e[2]*r[2],s[3]=e[3]*r[3],s},_.b6=ze,_.b7=function(s,e,r){const h=e[0]*r[0]+e[1]*r[1]+e[2]*r[2];return h===0?null:(-(s[0]*r[0]+s[1]*r[1]+s[2]*r[2])-r[3])/h},_.b8=Ft,_.b9=function(s,e,r){return s[0]=e[0]*r,s[1]=e[1]*r,s[2]=e[2]*r,s[3]=e[3]*r,s},_.bA=Ge,_.bB=function(s,e,r){var h=r[0],p=r[1],v=r[2],x=r[3],E=e[0],C=e[1],k=e[2],P=p*k-v*C,j=v*E-h*k,U=h*C-p*E;return s[0]=E+x*(P+=P)+p*(U+=U)-v*(j+=j),s[1]=C+x*j+v*P-h*U,s[2]=k+x*U+h*j-p*P,s},_.bC=function(s,e,r){const h=(p=[s[0],s[1],s[2],e[0],e[1],e[2],r[0],r[1],r[2]])[0]*((P=p[8])*(x=p[4])-(E=p[5])*(k=p[7]))+p[1]*(-P*(v=p[3])+E*(C=p[6]))+p[2]*(k*v-x*C);var p,v,x,E,C,k,P;if(h===0)return null;const j=Mt([],[e[0],e[1],e[2]],[r[0],r[1],r[2]]),U=Mt([],[r[0],r[1],r[2]],[s[0],s[1],s[2]]),G=Mt([],[s[0],s[1],s[2]],[e[0],e[1],e[2]]),Z=nt([],j,-s[3]);return Se(Z,Z,nt([],U,-e[3])),Se(Z,Z,nt([],G,-r[3])),nt(Z,Z,1/h),Z},_.bD=G0,_.bE=function(){return new Float64Array(4)},_.bF=function(s,e,r,h){var p=[],v=[];return p[0]=e[0]-r[0],p[1]=e[1]-r[1],p[2]=e[2]-r[2],v[0]=p[0]*Math.cos(h)-p[1]*Math.sin(h),v[1]=p[0]*Math.sin(h)+p[1]*Math.cos(h),v[2]=p[2],s[0]=v[0]+r[0],s[1]=v[1]+r[1],s[2]=v[2]+r[2],s},_.bG=function(s,e,r,h){var p=[],v=[];return p[0]=e[0]-r[0],p[1]=e[1]-r[1],p[2]=e[2]-r[2],v[0]=p[0],v[1]=p[1]*Math.cos(h)-p[2]*Math.sin(h),v[2]=p[1]*Math.sin(h)+p[2]*Math.cos(h),s[0]=v[0]+r[0],s[1]=v[1]+r[1],s[2]=v[2]+r[2],s},_.bH=function(s,e,r,h){var p=[],v=[];return p[0]=e[0]-r[0],p[1]=e[1]-r[1],p[2]=e[2]-r[2],v[0]=p[2]*Math.sin(h)+p[0]*Math.cos(h),v[1]=p[1],v[2]=p[2]*Math.cos(h)-p[0]*Math.sin(h),s[0]=v[0]+r[0],s[1]=v[1]+r[1],s[2]=v[2]+r[2],s},_.bI=function(s,e,r){var h=Math.sin(r),p=Math.cos(r),v=e[0],x=e[1],E=e[2],C=e[3],k=e[8],P=e[9],j=e[10],U=e[11];return e!==s&&(s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=v*p-k*h,s[1]=x*p-P*h,s[2]=E*p-j*h,s[3]=C*p-U*h,s[8]=v*h+k*p,s[9]=x*h+P*p,s[10]=E*h+j*p,s[11]=C*h+U*p,s},_.bJ=function(s,e){const r=Oe(s,360),h=Oe(e,360),p=h-r,v=h>r?p-360:p+360;return Math.abs(p)<Math.abs(v)?p:v},_.bK=function(s){return s[0]=0,s[1]=0,s[2]=0,s},_.bL=function(s,e,r,h){const p=Math.sqrt(s*s+e*e),v=Math.sqrt(r*r+h*h);s/=p,e/=p,r/=v,h/=v;const x=Math.acos(s*r+e*h);return-e*r+s*h>0?x:-x},_.bM=function(s,e){const r=Oe(s,2*Math.PI),h=Oe(e,2*Math.PI);return Math.min(Math.abs(r-h),Math.abs(r-h+2*Math.PI),Math.abs(r-h-2*Math.PI))},_.bN=function(){const s={},e=me.$version;for(const r in me.$root){const h=me.$root[r];if(h.required){let p=null;p=r==="version"?e:h.type==="array"?[]:{},p!=null&&(s[r]=p)}}return s},_.bO=zi,_.bP=If,_.bQ=function s(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(let h=0;h<e.length;h++)if(!s(e[h],r[h]))return!1;return!0}if(typeof e=="object"&&e!==null&&r!==null){if(typeof r!="object"||Object.keys(e).length!==Object.keys(r).length)return!1;for(const h in e)if(!s(e[h],r[h]))return!1;return!0}return e===r},_.bR=function(s){s=s.slice();const e=Object.create(null);for(let r=0;r<s.length;r++)e[s[r].id]=s[r];for(let r=0;r<s.length;r++)"ref"in s[r]&&(s[r]=Qe(s[r],e[s[r].ref]));return s},_.bS=function(s,e){if(s.type==="custom")return new y1(s,e);switch(s.type){case"background":return new U0(s,e);case"circle":return new g0(s,e);case"color-relief":return new s1(s,e);case"fill":return new $f(s,e);case"fill-extrusion":return new qf(s,e);case"heatmap":return new _0(s,e);case"hillshade":return new ru(s,e);case"line":return new Yg(s,e);case"raster":return new rc(s,e);case"symbol":return new wm(s,e)}},_.bT=s=>s.type==="raster",_.bU=Ri,_.bV=function(s,e){if(!s)return[{command:"setStyle",args:[e]}];let r=[];try{if(!Je(s.version,e.version))return[{command:"setStyle",args:[e]}];Je(s.center,e.center)||r.push({command:"setCenter",args:[e.center]}),Je(s.state,e.state)||r.push({command:"setGlobalState",args:[e.state]}),Je(s.centerAltitude,e.centerAltitude)||r.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Je(s.zoom,e.zoom)||r.push({command:"setZoom",args:[e.zoom]}),Je(s.bearing,e.bearing)||r.push({command:"setBearing",args:[e.bearing]}),Je(s.pitch,e.pitch)||r.push({command:"setPitch",args:[e.pitch]}),Je(s.roll,e.roll)||r.push({command:"setRoll",args:[e.roll]}),Je(s.sprite,e.sprite)||r.push({command:"setSprite",args:[e.sprite]}),Je(s.glyphs,e.glyphs)||r.push({command:"setGlyphs",args:[e.glyphs]}),Je(s.transition,e.transition)||r.push({command:"setTransition",args:[e.transition]}),Je(s.light,e.light)||r.push({command:"setLight",args:[e.light]}),Je(s.terrain,e.terrain)||r.push({command:"setTerrain",args:[e.terrain]}),Je(s.sky,e.sky)||r.push({command:"setSky",args:[e.sky]}),Je(s.projection,e.projection)||r.push({command:"setProjection",args:[e.projection]});const h={},p=[];(function(x,E,C,k){let P;for(P in E=E||{},x=x||{})Object.prototype.hasOwnProperty.call(x,P)&&(Object.prototype.hasOwnProperty.call(E,P)||Yt(P,C,k));for(P in E)Object.prototype.hasOwnProperty.call(E,P)&&(Object.prototype.hasOwnProperty.call(x,P)?Je(x[P],E[P])||(x[P].type==="geojson"&&E[P].type==="geojson"&&Hi(x,E,P)?it(C,{command:"setGeoJSONSourceData",args:[P,E[P].data]}):on(P,E,C,k)):Lt(P,E,C))})(s.sources,e.sources,p,h);const v=[];s.layers&&s.layers.forEach(x=>{"source"in x&&h[x.source]?r.push({command:"removeLayer",args:[x.id]}):v.push(x)}),r=r.concat(p),function(x,E,C){E=E||[];const k=(x=x||[]).map(Yn),P=E.map(Yn),j=x.reduce(hi,{}),U=E.reduce(hi,{}),G=k.slice(),Z=Object.create(null);let X,ee,ce,ve,fe;for(let ge=0,Ne=0;ge<k.length;ge++)X=k[ge],Object.prototype.hasOwnProperty.call(U,X)?Ne++:(it(C,{command:"removeLayer",args:[X]}),G.splice(G.indexOf(X,Ne),1));for(let ge=0,Ne=0;ge<P.length;ge++)X=P[P.length-1-ge],G[G.length-1-ge]!==X&&(Object.prototype.hasOwnProperty.call(j,X)?(it(C,{command:"removeLayer",args:[X]}),G.splice(G.lastIndexOf(X,G.length-Ne),1)):Ne++,ve=G[G.length-ge],it(C,{command:"addLayer",args:[U[X],ve]}),G.splice(G.length-ge,0,X),Z[X]=!0);for(let ge=0;ge<P.length;ge++)if(X=P[ge],ee=j[X],ce=U[X],!Z[X]&&!Je(ee,ce))if(Je(ee.source,ce.source)&&Je(ee["source-layer"],ce["source-layer"])&&Je(ee.type,ce.type)){for(fe in Sn(ee.layout,ce.layout,C,X,null,"setLayoutProperty"),Sn(ee.paint,ce.paint,C,X,null,"setPaintProperty"),Je(ee.filter,ce.filter)||it(C,{command:"setFilter",args:[X,ce.filter]}),Je(ee.minzoom,ce.minzoom)&&Je(ee.maxzoom,ce.maxzoom)||it(C,{command:"setLayerZoomRange",args:[X,ce.minzoom,ce.maxzoom]}),ee)Object.prototype.hasOwnProperty.call(ee,fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&(fe.indexOf("paint.")===0?Sn(ee[fe],ce[fe],C,X,fe.slice(6),"setPaintProperty"):Je(ee[fe],ce[fe])||it(C,{command:"setLayerProperty",args:[X,fe,ce[fe]]}));for(fe in ce)Object.prototype.hasOwnProperty.call(ce,fe)&&!Object.prototype.hasOwnProperty.call(ee,fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&(fe.indexOf("paint.")===0?Sn(ee[fe],ce[fe],C,X,fe.slice(6),"setPaintProperty"):Je(ee[fe],ce[fe])||it(C,{command:"setLayerProperty",args:[X,fe,ce[fe]]}))}else it(C,{command:"removeLayer",args:[X]}),ve=G[G.lastIndexOf(X)+1],it(C,{command:"addLayer",args:[ce,ve]})}(v,e.layers,r)}catch(h){console.warn("Unable to compute style diff:",h),r=[{command:"setStyle",args:[e]}]}return r},_.bW=function(s){const e=[],r=s.id;return r===void 0&&e.push({message:`layers.${r}: missing required property "id"`}),s.render===void 0&&e.push({message:`layers.${r}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},_.bX=qi,_.bY=tr,_.bZ=class extends io{constructor(s,e){super(s,e),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},_.b_=Us,_.ba=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]+s[3]},_.bb=db,_.bc=wd,_.bd=function(s,e,r,h,p){var v=1/Math.tan(e/2);if(s[0]=v/r,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=v,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,p!=null&&p!==1/0){var x=1/(h-p);s[10]=(p+h)*x,s[14]=2*p*h*x}else s[10]=-1,s[14]=-2*h;return s},_.be=function(s){var e=new Ee(16);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],e},_.bf=function(s,e,r){var h=Math.sin(r),p=Math.cos(r),v=e[0],x=e[1],E=e[2],C=e[3],k=e[4],P=e[5],j=e[6],U=e[7];return e!==s&&(s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=v*p+k*h,s[1]=x*p+P*h,s[2]=E*p+j*h,s[3]=C*p+U*h,s[4]=k*p-v*h,s[5]=P*p-x*h,s[6]=j*p-E*h,s[7]=U*p-C*h,s},_.bg=function(s,e,r){var h=Math.sin(r),p=Math.cos(r),v=e[4],x=e[5],E=e[6],C=e[7],k=e[8],P=e[9],j=e[10],U=e[11];return e!==s&&(s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[4]=v*p+k*h,s[5]=x*p+P*h,s[6]=E*p+j*h,s[7]=C*p+U*h,s[8]=k*p-v*h,s[9]=P*p-x*h,s[10]=j*p-E*h,s[11]=U*p-C*h,s},_.bh=function(){const s=new Float32Array(16);return De(s),s},_.bi=function(){const s=new Float64Array(16);return De(s),s},_.bj=function(){return new Float64Array(16)},_.bk=function(s,e,r){const h=new Float64Array(4);return Ge(h,s,e-90,r),h},_.bl=function(s,e,r,h){var p,v,x,E,C,k=e[0],P=e[1],j=e[2],U=e[3],G=r[0],Z=r[1],X=r[2],ee=r[3];return(v=k*G+P*Z+j*X+U*ee)<0&&(v=-v,G=-G,Z=-Z,X=-X,ee=-ee),1-v>Ae?(p=Math.acos(v),x=Math.sin(p),E=Math.sin((1-h)*p)/x,C=Math.sin(h*p)/x):(E=1-h,C=h),s[0]=E*k+C*G,s[1]=E*P+C*Z,s[2]=E*j+C*X,s[3]=E*U+C*ee,s},_.bm=function(s){const e=new Float64Array(9);var r,h,p,v,x,E,C,k,P,j,U,G,Z,X,ee,ce,ve,fe;j=(p=(h=s)[0])*(C=p+p),U=(v=h[1])*C,Z=(x=h[2])*C,X=x*(k=v+v),ce=(E=h[3])*C,ve=E*k,fe=E*(P=x+x),(r=e)[0]=1-(G=v*k)-(ee=x*P),r[3]=U-fe,r[6]=Z+ve,r[1]=U+fe,r[4]=1-j-ee,r[7]=X-ce,r[2]=Z-ve,r[5]=X+ce,r[8]=1-j-G;const ge=Sr(-Math.asin(zt(e[2],-1,1)));let Ne,Pe;return Math.hypot(e[5],e[8])<.001?(Ne=0,Pe=-Sr(Math.atan2(e[3],e[4]))):(Ne=Sr(e[5]===0&&e[8]===0?0:Math.atan2(e[5],e[8])),Pe=Sr(e[1]===0&&e[0]===0?0:Math.atan2(e[1],e[0]))),{roll:Ne,pitch:ge+90,bearing:Pe}},_.bn=function(s,e){return s.roll==e.roll&&s.pitch==e.pitch&&s.bearing==e.bearing},_.bo=Dn,_.bp=qo,_.bq=na,_.br=ro,_.bs=Zf,_.bt=et,_.bu=bt,_.bv=Vr,_.bw=function(s,e,r,h,p){return et(h,p,zt((s-e)/(r-e),0,1))},_.bx=Oe,_.by=function(){return new Float64Array(3)},_.bz=function(s,e,r,h){return s[0]=e[0]+r[0]*h,s[1]=e[1]+r[1]*h,s[2]=e[2]+r[2]*h,s},_.c=Au,_.c$=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},_.c0=$a,_.c1=class extends io{constructor(s,e){super(s,e),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},_.c2=class extends io{constructor(s,e){super(s,e),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},_.c3=Fe,_.c4=function(s,e){var r=Math.sin(e),h=Math.cos(e);return s[0]=h,s[1]=r,s[2]=0,s[3]=-r,s[4]=h,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},_.c5=function(s,e,r){var h=e[0],p=e[1],v=e[2];return s[0]=h*r[0]+p*r[3]+v*r[6],s[1]=h*r[1]+p*r[4]+v*r[7],s[2]=h*r[2]+p*r[5]+v*r[8],s},_.c6=function(s,e,r,h,p,v,x){var E=1/(e-r),C=1/(h-p),k=1/(v-x);return s[0]=-2*E,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*C,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*k,s[11]=0,s[12]=(e+r)*E,s[13]=(p+h)*C,s[14]=(x+v)*k,s[15]=1,s},_.c7=class extends io{constructor(s,e){super(s,e),this.current=new Array}set(s){if(s!=this.current){this.current=s;const e=new Float32Array(4*s.length);for(let r=0;r<s.length;r++)e[4*r]=s[r].r,e[4*r+1]=s[r].g,e[4*r+2]=s[r].b,e[4*r+3]=s[r].a;this.gl.uniform4fv(this.location,e)}}},_.c8=class extends io{constructor(s,e){super(s,e),this.current=new Array}set(s){if(s!=this.current){this.current=s;const e=new Float32Array(s);this.gl.uniform1fv(this.location,e)}}},_.c9=class extends ad{},_.cA=function(s){return Cn[s]||sa[s]},_.cB=function(s,e,r){var h=e[0],p=e[1];return s[0]=r[0]*h+r[4]*p+r[12],s[1]=r[1]*h+r[5]*p+r[13],s},_.cC=function(s,e){const{x:r,y:h}=Am.fromLngLat(e);return!(s<0||s>25||h<0||h>=1||r<0||r>=1)},_.cD=function(s,e){return s[0]=e[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=e[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=e[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},_.cE=class extends Gi{},_.cF=hh,_.cH=function(s){return s.message===la},_.cI=wa,_.cJ=function(s,e){il.REGISTERED_PROTOCOLS[s]=e},_.cK=function(s){delete il.REGISTERED_PROTOCOLS[s]},_.cL=function(s,e){const r={};for(let p=0;p<s.length;p++){const v=e&&e[s[p].id]||Fn(s[p]);e&&(e[s[p].id]=v);let x=r[v];x||(x=r[v]=[]),x.push(s[p])}const h=[];for(const p in r)h.push(r[p]);return h},_.cM=Ot,_.cN=fb,_.cO=fu,_.cP=z0,_.cQ=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=pt/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const e=s.bucket.layers[0],r=e.layout,h=e._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new ti(s.bucket.zoom+1),s.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new ti(s.bucket.zoom+1),s.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new ti(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:P}=s.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new ti(k),s.canonical),h["text-size"].possiblyEvaluate(new ti(P),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:P}=s.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new ti(k),s.canonical),h["icon-size"].possiblyEvaluate(new ti(P),s.canonical)]}const v=r.get("text-line-height")*Rr,x=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",E=r.get("text-keep-upright"),C=r.get("text-size");for(const k of s.bucket.features){const P=r.get("text-font").evaluate(k,{},s.canonical).join(","),j=C.evaluate(k,{},s.canonical),U=p.layoutTextSize.evaluate(k,{},s.canonical),G=p.layoutIconSize.evaluate(k,{},s.canonical),Z={horizontal:{},vertical:void 0},X=k.text;let ee,ce=[0,0];if(X){const ge=X.toString(),Ne=r.get("text-letter-spacing").evaluate(k,{},s.canonical)*Rr,Pe=yl(ge)?Ne:0,He=r.get("text-anchor").evaluate(k,{},s.canonical),ft=Le(e,k,s.canonical);if(!ft){const Et=r.get("text-radial-offset").evaluate(k,{},s.canonical);ce=Et?ue(He,[Et*Rr,W]):r.get("text-offset").evaluate(k,{},s.canonical).map(At=>At*Rr)}let st=x?"center":r.get("text-justify").evaluate(k,{},s.canonical);const yt=r.get("symbol-placement")==="point"?r.get("text-max-width").evaluate(k,{},s.canonical)*Rr:1/0,It=()=>{s.bucket.allowVerticalPlacement&&Uu(ge)&&(Z.vertical=vd(X,s.glyphMap,s.glyphPositions,s.imagePositions,P,yt,v,He,"left",Pe,ce,_.ay.vertical,!0,U,j))};if(!x&&ft){const Et=new Set;if(st==="auto")for(let lt=0;lt<ft.values.length;lt+=2)Et.add(Ke(ft.values[lt]));else Et.add(st);let At=!1;for(const lt of Et)if(!Z.horizontal[lt])if(At)Z.horizontal[lt]=Z.horizontal[0];else{const Wt=vd(X,s.glyphMap,s.glyphPositions,s.imagePositions,P,yt,v,"center",lt,Pe,ce,_.ay.horizontal,!1,U,j);Wt&&(Z.horizontal[lt]=Wt,At=Wt.positionedLines.length===1)}It()}else{st==="auto"&&(st=Ke(He));const Et=vd(X,s.glyphMap,s.glyphPositions,s.imagePositions,P,yt,v,He,st,Pe,ce,_.ay.horizontal,!1,U,j);Et&&(Z.horizontal[st]=Et),It(),Uu(ge)&&x&&E&&(Z.vertical=vd(X,s.glyphMap,s.glyphPositions,s.imagePositions,P,yt,v,He,st,Pe,ce,_.ay.vertical,!1,U,j))}}let ve=!1;if(k.icon&&k.icon.name){const ge=s.imageMap[k.icon.name];ge&&(ee=m1(s.imagePositions[k.icon.name],r.get("icon-offset").evaluate(k,{},s.canonical),r.get("icon-anchor").evaluate(k,{},s.canonical)),ve=!!ge.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=ve:s.bucket.sdfIcons!==ve&&bn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ge.pixelRatio!==s.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const fe=tt(Z.horizontal)||Z.vertical;s.bucket.iconsInText=!!fe&&fe.iconsInText,(fe||ee)&&ht(s.bucket,k,Z,ee,s.imageMap,p,U,G,ce,ve,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},_.cR=fm,_.cS=Ei,_.cT=md,_.cU=E0,_.cV=Hg,_.cW=hd,_.cX=function(s,e,r,h,p,v){let x=Tb(s,e,r,p,0);return x=Tb(x,e,h,v,1),x},_.cY=class{constructor(s){this.maxEntries=s,this.map=new Map}get(s){const e=this.map.get(s);return e!==void 0&&(this.map.delete(s),this.map.set(s,e)),e}set(s,e){if(this.map.has(s))this.map.delete(s);else if(this.map.size>=this.maxEntries){const r=this.map.keys().next().value;this.map.delete(r)}this.map.set(s,e)}clear(){this.map.clear()}},_.cZ=A0,_.c_=hy,_.ca=D0,_.cb=class extends Yu{},_.cc=Cl,_.cd=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},_.ce=y0,_.cf=function(s,e,r){var h=e[0],p=e[1],v=e[2],x=r[3]*h+r[7]*p+r[11]*v+r[15];return s[0]=(r[0]*h+r[4]*p+r[8]*v+r[12])/(x=x||1),s[1]=(r[1]*h+r[5]*p+r[9]*v+r[13])/x,s[2]=(r[2]*h+r[6]*p+r[10]*v+r[14])/x,s},_.cg=class extends $u{},_.ch=class extends m{},_.ci=function(s,e){return s[0]===e[0]&&s[1]===e[1]&&s[2]===e[2]&&s[3]===e[3]&&s[4]===e[4]&&s[5]===e[5]&&s[6]===e[6]&&s[7]===e[7]&&s[8]===e[8]&&s[9]===e[9]&&s[10]===e[10]&&s[11]===e[11]&&s[12]===e[12]&&s[13]===e[13]&&s[14]===e[14]&&s[15]===e[15]},_.cj=function(s,e){var r=s[0],h=s[1],p=s[2],v=s[3],x=s[4],E=s[5],C=s[6],k=s[7],P=s[8],j=s[9],U=s[10],G=s[11],Z=s[12],X=s[13],ee=s[14],ce=s[15],ve=e[0],fe=e[1],ge=e[2],Ne=e[3],Pe=e[4],He=e[5],ft=e[6],st=e[7],yt=e[8],It=e[9],Et=e[10],At=e[11],lt=e[12],Wt=e[13],Xt=e[14],Jt=e[15];return Math.abs(r-ve)<=Ae*Math.max(1,Math.abs(r),Math.abs(ve))&&Math.abs(h-fe)<=Ae*Math.max(1,Math.abs(h),Math.abs(fe))&&Math.abs(p-ge)<=Ae*Math.max(1,Math.abs(p),Math.abs(ge))&&Math.abs(v-Ne)<=Ae*Math.max(1,Math.abs(v),Math.abs(Ne))&&Math.abs(x-Pe)<=Ae*Math.max(1,Math.abs(x),Math.abs(Pe))&&Math.abs(E-He)<=Ae*Math.max(1,Math.abs(E),Math.abs(He))&&Math.abs(C-ft)<=Ae*Math.max(1,Math.abs(C),Math.abs(ft))&&Math.abs(k-st)<=Ae*Math.max(1,Math.abs(k),Math.abs(st))&&Math.abs(P-yt)<=Ae*Math.max(1,Math.abs(P),Math.abs(yt))&&Math.abs(j-It)<=Ae*Math.max(1,Math.abs(j),Math.abs(It))&&Math.abs(U-Et)<=Ae*Math.max(1,Math.abs(U),Math.abs(Et))&&Math.abs(G-At)<=Ae*Math.max(1,Math.abs(G),Math.abs(At))&&Math.abs(Z-lt)<=Ae*Math.max(1,Math.abs(Z),Math.abs(lt))&&Math.abs(X-Wt)<=Ae*Math.max(1,Math.abs(X),Math.abs(Wt))&&Math.abs(ee-Xt)<=Ae*Math.max(1,Math.abs(ee),Math.abs(Xt))&&Math.abs(ce-Jt)<=Ae*Math.max(1,Math.abs(ce),Math.abs(Jt))},_.ck=function(s,e){return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s},_.cl=s=>s.type==="symbol",_.cm=s=>s.type==="circle",_.cn=s=>s.type==="heatmap",_.co=s=>s.type==="line",_.cp=s=>s.type==="fill",_.cq=s=>s.type==="fill-extrusion",_.cr=s=>s.type==="hillshade",_.cs=s=>s.type==="color-relief",_.ct=s=>s.type==="background",_.cu=s=>s.type==="custom",_.cv=Tt,_.cw=function(s,e,r){const h=St(e.x-r.x,e.y-r.y),p=St(s.x-r.x,s.y-r.y);var v,x;return Sr(Math.atan2(h[0]*p[1]-h[1]*p[0],(v=h)[0]*(x=p)[0]+v[1]*x[1]))},_.cx=Nt,_.cy=function(s,e){return sa[e]&&(s instanceof MouseEvent||s instanceof WheelEvent)},_.cz=function(s,e){return Cn[e]&&"touches"in s},_.d=K,_.d0=function(s,e,r,h,p){return c(this,void 0,void 0,function*(){if(he())try{return yield jr(s,e,r,h,p)}catch{}return function(v,x,E,C,k){const P=v.width,j=v.height;Wr&&xa||(Wr=new OffscreenCanvas(P,j),xa=Wr.getContext("2d",{willReadFrequently:!0})),Wr.width=P,Wr.height=j,xa.drawImage(v,0,0,P,j);const U=xa.getImageData(x,E,C,k);return xa.clearRect(0,0,P,j),U.data}(s,e,r,h,p)})},_.d1=Vf,_.d2=D,_.d3=Fu,_.d4=js,_.e=rn,_.f=s=>c(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(e)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),_.g=Mu,_.h=s=>new Promise((e,r)=>{const h=new Image;h.onload=()=>{e(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=oa})},h.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(s)],{type:"image/png"});h.src=s.byteLength?URL.createObjectURL(p):oa}),_.i=gr,_.j=(s,e)=>Ie(rn(s,{type:"json"}),e),_.k=Te,_.l=xe,_.m=Ie,_.n=(s,e)=>Ie(rn(s,{type:"arrayBuffer"}),e),_.o=function(s){return new Hg(s).readFields(Xg,[])},_.p=P0,_.q=function(s){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))},_.r=jf,_.s=Qa,_.t=Ti,_.u=me,_.v=Ps,_.w=bn,_.x=kf,_.y=f0,_.z=wo}),f("worker",["./shared"],function(_){class c{constructor(K,te){this.keyCache={},K&&this.replace(K,te)}replace(K,te){this._layerConfigs={},this._layers={},this.update(K,[],te)}update(K,te,le){for(const Te of K){this._layerConfigs[Te.id]=Te;const Ue=this._layers[Te.id]=_.bS(Te,le);Ue._featureFilter=_.aj(Ue.filter,le),this.keyCache[Te.id]&&delete this.keyCache[Te.id]}for(const Te of te)delete this.keyCache[Te],delete this._layerConfigs[Te],delete this._layers[Te];this.familiesBySource={};const xe=_.cL(Object.values(this._layerConfigs),this.keyCache);for(const Te of xe){const Ue=Te.map(Lt=>this._layers[Lt.id]),me=Ue[0];if(me.visibility==="none")continue;const je=me.source||"";let Qe=this.familiesBySource[je];Qe||(Qe=this.familiesBySource[je]={});const Je=me.sourceLayer||_.a9;let it=Qe[Je];it||(it=Qe[Je]=[]),it.push(Ue)}}}class A{constructor(K){const te={},le=[];for(const me in K){const je=K[me],Qe=te[me]={};for(const Je in je){const it=je[+Je];if(!it||it.bitmap.width===0||it.bitmap.height===0)continue;const Lt={x:0,y:0,w:it.bitmap.width+2,h:it.bitmap.height+2};le.push(Lt),Qe[Je]={rect:Lt,metrics:it.metrics}}}const{w:xe,h:Te}=_.p(le),Ue=new _.r({width:xe||1,height:Te||1});for(const me in K){const je=K[me];for(const Qe in je){const Je=je[+Qe];if(!Je||Je.bitmap.width===0||Je.bitmap.height===0)continue;const it=te[me][Qe].rect;_.r.copy(Je.bitmap,Ue,{x:0,y:0},{x:it.x+1,y:it.y+1},Je.bitmap)}}this.image=Ue,this.positions=te}}_.cM("GlyphAtlas",A);class D{constructor(K){this.tileID=new _.a1(K.tileID.overscaledZ,K.tileID.wrap,K.tileID.canonical.z,K.tileID.canonical.x,K.tileID.canonical.y),this.uid=K.uid,this.zoom=K.zoom,this.pixelRatio=K.pixelRatio,this.tileSize=K.tileSize,this.source=K.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=K.showCollisionBoxes,this.collectResourceTiming=!!K.collectResourceTiming,this.returnDependencies=!!K.returnDependencies,this.promoteId=K.promoteId,this.inFlightDependencies=[]}parse(K,te,le,xe,Te){return _._(this,void 0,void 0,function*(){this.status="parsing",this.data=K,this.collisionBoxArray=new _.ah;const Ue=new _.cN(Object.keys(K.layers).sort()),me=new _.cO(this.tileID,this.promoteId);me.bucketLayerIDs=[];const je={},Qe={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:le,subdivisionGranularity:Te},Je=te.familiesBySource[this.source];for(const kt in Je){const qt=K.layers[kt];if(!qt)continue;qt.version===1&&_.w(`Vector tile source "${this.source}" layer "${kt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ca=Ue.encode(kt),Ic=[];for(let Br=0;Br<qt.length;Br++){const tn=qt.feature(Br),Ka=me.getId(tn,kt);Ic.push({feature:tn,id:Ka,index:Br,sourceLayerIndex:ca})}for(const Br of Je[kt]){const tn=Br[0];tn.source!==this.source&&_.w(`layer.source = ${tn.source} does not equal this.source = ${this.source}`),tn.isHidden(this.zoom,!0)||(O(Br,this.zoom,le),(je[tn.id]=tn.createBucket({index:me.bucketLayerIDs.length,layers:Br,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ca,sourceID:this.source})).populate(Ic,Qe,this.tileID.canonical),me.bucketLayerIDs.push(Br.map(Ka=>Ka.id)))}}const it=_.bX(Qe.glyphDependencies,kt=>Object.keys(kt).map(Number));this.inFlightDependencies.forEach(kt=>kt?.abort()),this.inFlightDependencies=[];let Lt=Promise.resolve({});if(Object.keys(it).length){const kt=new AbortController;this.inFlightDependencies.push(kt),Lt=xe.sendAsync({type:"GG",data:{stacks:it,source:this.source,tileID:this.tileID,type:"glyphs"}},kt)}const Yt=Object.keys(Qe.iconDependencies);let on=Promise.resolve({});if(Yt.length){const kt=new AbortController;this.inFlightDependencies.push(kt),on=xe.sendAsync({type:"GI",data:{icons:Yt,source:this.source,tileID:this.tileID,type:"icons"}},kt)}const Hi=Object.keys(Qe.patternDependencies);let Sn=Promise.resolve({});if(Hi.length){const kt=new AbortController;this.inFlightDependencies.push(kt),Sn=xe.sendAsync({type:"GI",data:{icons:Hi,source:this.source,tileID:this.tileID,type:"patterns"}},kt)}const Yn=Qe.dashDependencies;let hi=Promise.resolve({});if(Object.keys(Yn).length){const kt=new AbortController;this.inFlightDependencies.push(kt),hi=xe.sendAsync({type:"GDA",data:{dashes:Yn}},kt)}const[vt,di,fi,lr]=yield Promise.all([Lt,on,Sn,hi]),qn=new A(vt),dt=new _.cP(di,fi);for(const kt in je){const qt=je[kt];qt instanceof _.ai?(O(qt.layers,this.zoom,le),_.cQ({bucket:qt,glyphMap:vt,glyphPositions:qn.positions,imageMap:di,imagePositions:dt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Qe.subdivisionGranularity})):qt.hasDependencies&&(qt instanceof _.cR||qt instanceof _.cS||qt instanceof _.cT)&&(O(qt.layers,this.zoom,le),qt.addFeatures(Qe,this.tileID.canonical,dt.patternPositions,lr))}return this.status="done",{buckets:Object.values(je).filter(kt=>!kt.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qn.image,imageAtlas:dt,dashPositions:lr,glyphMap:this.returnDependencies?vt:null,iconMap:this.returnDependencies?di:null,glyphPositions:this.returnDependencies?qn.positions:null}})}}function O(Ie,K,te){const le=new _.H(K);for(const xe of Ie)xe.recalculate(le,te)}class z extends _.cW{constructor(K,te){super(new _.cV,0,te,[],[]),this.feature=K,this.type=K.type,this.properties=K.tags?K.tags:{},"id"in K&&(typeof K.id=="string"?this.id=parseInt(K.id,10):typeof K.id!="number"||isNaN(K.id)||(this.id=K.id))}loadGeometry(){const K=[],te=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const le of te){const xe=[];for(const Te of le)xe.push(new _.P(Te[0],Te[1]));K.push(xe)}return K}}class V extends _.cU{constructor(K,te){super(new _.cV),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=te?te.version:1,this.extent=te?te.extent:4096,this.length=K.length,this.features=K}feature(K){return new z(this.features[K],this.extent)}}function H(Ie,K){K.writeVarintField(15,Ie.version||1),K.writeStringField(1,Ie.name||""),K.writeVarintField(5,Ie.extent||4096);const te={keys:[],values:[],keycache:{},valuecache:{}};for(let Te=0;Te<Ie.length;Te++)te.feature=Ie.feature(Te),K.writeMessage(2,ne,te);const le=te.keys;for(const Te of le)K.writeStringField(3,Te);const xe=te.values;for(const Te of xe)K.writeMessage(4,Ee,Te)}function ne(Ie,K){if(!Ie.feature)return;const te=Ie.feature;te.id!==void 0&&K.writeVarintField(1,te.id),K.writeMessage(2,ae,Ie),K.writeVarintField(3,te.type),K.writeMessage(4,Ae,te)}function ae(Ie,K){for(const te in Ie.feature?.properties){let le=Ie.feature.properties[te],xe=Ie.keycache[te];if(le===null)continue;xe===void 0&&(Ie.keys.push(te),xe=Ie.keys.length-1,Ie.keycache[te]=xe),K.writeVarint(xe),typeof le!="string"&&typeof le!="boolean"&&typeof le!="number"&&(le=JSON.stringify(le));const Te=typeof le+":"+le;let Ue=Ie.valuecache[Te];Ue===void 0&&(Ie.values.push(le),Ue=Ie.values.length-1,Ie.valuecache[Te]=Ue),K.writeVarint(Ue)}}function q(Ie,K){return(K<<3)+(7&Ie)}function he(Ie){return Ie<<1^Ie>>31}function Ae(Ie,K){const te=Ie.loadGeometry(),le=Ie.type;let xe=0,Te=0;for(const Ue of te){let me=1;le===1&&(me=Ue.length),K.writeVarint(q(1,me));const je=le===3?Ue.length-1:Ue.length;for(let Qe=0;Qe<je;Qe++){Qe===1&&le!==1&&K.writeVarint(q(2,je-1));const Je=Ue[Qe].x-xe,it=Ue[Qe].y-Te;K.writeVarint(he(Je)),K.writeVarint(he(it)),xe+=Je,Te+=it}Ie.type===3&&K.writeVarint(q(7,1))}}function Ee(Ie,K){const te=typeof Ie;te==="string"?K.writeStringField(1,Ie):te==="boolean"?K.writeBooleanField(7,Ie):te==="number"&&(Ie%1!=0?K.writeDoubleField(3,Ie):Ie<0?K.writeSVarintField(6,Ie):K.writeVarintField(5,Ie))}class Fe extends _.cW{constructor(K,te,le,xe,Te){super(new _.cV,0,Te,[],[]),this.type=K,this.properties=le||{},this.extent=Te,this.pointsArray=te,this.id=xe}loadGeometry(){return this.pointsArray.map(K=>K.map(te=>new _.P(te.x,te.y)))}}class De extends _.cU{constructor(K,te,le){super(new _.cV),this.version=2,this._myFeatures=K,this.name=te,this.length=K.length,this.extent=le}feature(K){return this._myFeatures[K]}}class ke{constructor(){this.layers={}}addLayer(K){this.layers[K.name]=K}}function ze(Ie){let K=function(te){const le=new _.cV;return function(xe,Te){for(const Ue in xe.layers)Te.writeMessage(3,H,xe.layers[Ue])}(te,le),le.finish()}(Ie);return K.byteOffset===0&&K.byteLength===K.buffer.byteLength||(K=new Uint8Array(K)),{vectorTile:Ie,rawData:K.buffer}}function rt(Ie,K,te){const{extent:le}=Ie,xe=Math.pow(2,te.z-K.z),Te=(te.x-K.x*xe)*le,Ue=(te.y-K.y*xe)*le,me=[];for(let je=0;je<Ie.length;je++){const Qe=Ie.feature(je);let Je=Qe.loadGeometry();for(const Lt of Je)for(const Yt of Lt)Yt.x=Yt.x*xe-Te,Yt.y=Yt.y*xe-Ue;const it=128;Je=_.cX(Je,Qe.type,-it,-it,le+it,le+it),Je.length!==0&&me.push(new Fe(Qe.type,Je,Qe.properties,Qe.id,le))}return new De(me,Ie.name,le)}class Se{constructor(K,te,le){this.actor=K,this.layerIndex=te,this.availableImages=le,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new _.cY(1e3)}loadVectorTile(K,te){return _._(this,void 0,void 0,function*(){const le=yield _.n(K.request,te);try{return{vectorTile:K.encoding!=="mlt"?new _.cZ(new _.cV(le.data)):new _.c_(le.data),rawData:le.data,cacheControl:le.cacheControl,expires:le.expires}}catch(xe){const Te=new Uint8Array(le.data);let Ue=`Unable to parse the tile at ${K.request.url}, `;throw Ue+=Te[0]===31&&Te[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${xe.message}`,new Error(Ue)}})}loadTile(K){return _._(this,void 0,void 0,function*(){const{uid:te,overzoomParameters:le}=K;le&&(K.request=le.overzoomRequest);const xe=!!(K&&K.request&&K.request.collectResourceTiming)&&new _.c$(K.request),Te=new D(K);this.loading[te]=Te;const Ue=new AbortController;Te.abort=Ue;try{const me=yield this.loadVectorTile(K,Ue);if(delete this.loading[te],!me)return null;if(le){const Lt=this._getOverzoomTile(K,me.vectorTile);me.rawData=Lt.rawData,me.vectorTile=Lt.vectorTile}const je=me.rawData,Qe={};me.expires&&(Qe.expires=me.expires),me.cacheControl&&(Qe.cacheControl=me.cacheControl);const Je={};if(xe){const Lt=xe.finish();Lt&&(Je.resourceTiming=JSON.parse(JSON.stringify(Lt)))}Te.vectorTile=me.vectorTile;const it=Te.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity);this.loaded[te]=Te,this.fetching[te]={rawTileData:je,cacheControl:Qe,resourceTiming:Je};try{const Lt=yield it;return _.e({rawTileData:je.slice(0),encoding:K.encoding},Lt,Qe,Je)}finally{delete this.fetching[te]}}catch(me){throw delete this.loading[te],Te.status="done",this.loaded[te]=Te,me}})}_getOverzoomTile(K,te){const{tileID:le,source:xe,overzoomParameters:Te}=K,{maxZoomTileID:Ue}=Te,me=`${Ue.key}_${le.key}`,je=this.overzoomedTileResultCache.get(me);if(je)return je;const Qe=new ke,Je=this.layerIndex.familiesBySource[xe];for(const Lt in Je){const Yt=te.layers[Lt];if(!Yt)continue;const on=rt(Yt,Ue,le.canonical);on.length>0&&Qe.addLayer(on)}const it=ze(Qe);return this.overzoomedTileResultCache.set(me,it),it}reloadTile(K){return _._(this,void 0,void 0,function*(){const te=K.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const le=this.loaded[te];if(le.showCollisionBoxes=K.showCollisionBoxes,le.status==="parsing"){const xe=yield le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity);let Te;if(this.fetching[te]){const{rawTileData:Ue,cacheControl:me,resourceTiming:je}=this.fetching[te];delete this.fetching[te],Te=_.e({rawTileData:Ue.slice(0),encoding:K.encoding},xe,me,je)}else Te=xe;return Te}if(le.status==="done"&&le.vectorTile)return le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,K.subdivisionGranularity)})}abortTile(K){return _._(this,void 0,void 0,function*(){const te=this.loading,le=K.uid;te&&te[le]&&te[le].abort&&(te[le].abort.abort(),delete te[le])})}removeTile(K){return _._(this,void 0,void 0,function*(){this.loaded&&this.loaded[K.uid]&&delete this.loaded[K.uid]})}}class nt{constructor(){this.loaded={}}loadTile(K){return _._(this,void 0,void 0,function*(){const{uid:te,encoding:le,rawImageData:xe,redFactor:Te,greenFactor:Ue,blueFactor:me,baseShift:je}=K,Qe=xe.width+2,Je=xe.height+2,it=_.b(xe)?new _.R({width:Qe,height:Je},yield _.d0(xe,-1,-1,Qe,Je)):xe,Lt=new _.d1(te,it,le,Te,Ue,me,je);return this.loaded=this.loaded||{},this.loaded[te]=Lt,Lt})}removeTile(K){const te=this.loaded,le=K.uid;te&&te[le]&&delete te[le]}}var Mt,Ct,Ft=function(){if(Ct)return Mt;function Ie(te,le){if(te.length!==0){K(te[0],le);for(var xe=1;xe<te.length;xe++)K(te[xe],!le)}}function K(te,le){for(var xe=0,Te=0,Ue=0,me=te.length,je=me-1;Ue<me;je=Ue++){var Qe=(te[Ue][0]-te[je][0])*(te[je][1]+te[Ue][1]),Je=xe+Qe;Te+=Math.abs(xe)>=Math.abs(Qe)?xe-Je+Qe:Qe-Je+xe,xe=Je}xe+Te>=0!=!!le&&te.reverse()}return Ct=1,Mt=function te(le,xe){var Te,Ue=le&&le.type;if(Ue==="FeatureCollection")for(Te=0;Te<le.features.length;Te++)te(le.features[Te],xe);else if(Ue==="GeometryCollection")for(Te=0;Te<le.geometries.length;Te++)te(le.geometries[Te],xe);else if(Ue==="Feature")te(le.geometry,xe);else if(Ue==="Polygon")Ie(le.coordinates,xe);else if(Ue==="MultiPolygon")for(Te=0;Te<le.coordinates.length;Te++)Ie(le.coordinates[Te],xe);return le}}(),Ut=_.d2(Ft);const Gt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ie=>Ie},Ge=Math.fround||(ct=new Float32Array(1),Ie=>(ct[0]=+Ie,ct[0]));var ct;class St{constructor(K){this.options=Object.assign(Object.create(Gt),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){const{log:te,minZoom:le,maxZoom:xe}=this.options;te&&console.time("total time");const Te=`prepare ${K.length} points`;te&&console.time(Te),this.points=K;const Ue=[];for(let je=0;je<K.length;je++){const Qe=K[je];if(!Qe.geometry)continue;const[Je,it]=Qe.geometry.coordinates,Lt=Ge(Oe(Je)),Yt=Ge(et(it));Ue.push(Lt,Yt,1/0,je,-1,1),this.options.reduce&&Ue.push(0)}let me=this.trees[xe+1]=this._createTree(Ue);te&&console.timeEnd(Te);for(let je=xe;je>=le;je--){const Qe=+Date.now();me=this.trees[je]=this._createTree(this._cluster(me,je)),te&&console.log("z%d: %d clusters in %dms",je,me.numItems,+Date.now()-Qe)}return te&&console.timeEnd("total time"),this}getClusters(K,te){let le=((K[0]+180)%360+360)%360-180;const xe=Math.max(-90,Math.min(90,K[1]));let Te=K[2]===180?180:((K[2]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)le=-180,Te=180;else if(le>Te){const it=this.getClusters([le,xe,180,Ue],te),Lt=this.getClusters([-180,xe,Te,Ue],te);return it.concat(Lt)}const me=this.trees[this._limitZoom(te)],je=me.range(Oe(le),et(Ue),Oe(Te),et(xe)),Qe=me.data,Je=[];for(const it of je){const Lt=this.stride*it;Je.push(Qe[Lt+5]>1?pt(Qe,Lt,this.clusterProps):this.points[Qe[Lt+3]])}return Je}getChildren(K){const te=this._getOriginId(K),le=this._getOriginZoom(K),xe="No cluster with the specified id.",Te=this.trees[le];if(!Te)throw new Error(xe);const Ue=Te.data;if(te*this.stride>=Ue.length)throw new Error(xe);const me=this.options.radius/(this.options.extent*Math.pow(2,le-1)),je=Te.within(Ue[te*this.stride],Ue[te*this.stride+1],me),Qe=[];for(const Je of je){const it=Je*this.stride;Ue[it+4]===K&&Qe.push(Ue[it+5]>1?pt(Ue,it,this.clusterProps):this.points[Ue[it+3]])}if(Qe.length===0)throw new Error(xe);return Qe}getLeaves(K,te,le){const xe=[];return this._appendLeaves(xe,K,te=te||10,le=le||0,0),xe}getTile(K,te,le){const xe=this.trees[this._limitZoom(K)],Te=Math.pow(2,K),{extent:Ue,radius:me}=this.options,je=me/Ue,Qe=(le-je)/Te,Je=(le+1+je)/Te,it={features:[]};return this._addTileFeatures(xe.range((te-je)/Te,Qe,(te+1+je)/Te,Je),xe.data,te,le,Te,it),te===0&&this._addTileFeatures(xe.range(1-je/Te,Qe,1,Je),xe.data,Te,le,Te,it),te===Te-1&&this._addTileFeatures(xe.range(0,Qe,je/Te,Je),xe.data,-1,le,Te,it),it.features.length?it:null}getClusterExpansionZoom(K){let te=this._getOriginZoom(K)-1;for(;te<=this.options.maxZoom;){const le=this.getChildren(K);if(te++,le.length!==1)break;K=le[0].properties.cluster_id}return te}_appendLeaves(K,te,le,xe,Te){const Ue=this.getChildren(te);for(const me of Ue){const je=me.properties;if(je&&je.cluster?Te+je.point_count<=xe?Te+=je.point_count:Te=this._appendLeaves(K,je.cluster_id,le,xe,Te):Te<xe?Te++:K.push(me),K.length===le)break}return Te}_createTree(K){const te=new _.aS(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let le=0;le<K.length;le+=this.stride)te.add(K[le],K[le+1]);return te.finish(),te.data=K,te}_addTileFeatures(K,te,le,xe,Te,Ue){for(const me of K){const je=me*this.stride,Qe=te[je+5]>1;let Je,it,Lt;if(Qe)Je=Vt(te,je,this.clusterProps),it=te[je],Lt=te[je+1];else{const Hi=this.points[te[je+3]];Je=Hi.properties;const[Sn,Yn]=Hi.geometry.coordinates;it=Oe(Sn),Lt=et(Yn)}const Yt={type:1,geometry:[[Math.round(this.options.extent*(it*Te-le)),Math.round(this.options.extent*(Lt*Te-xe))]],tags:Je};let on;on=Qe||this.options.generateId?te[je+3]:this.points[te[je+3]].id,on!==void 0&&(Yt.id=on),Ue.features.push(Yt)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,te){const{radius:le,extent:xe,reduce:Te,minPoints:Ue}=this.options,me=le/(xe*Math.pow(2,te)),je=K.data,Qe=[],Je=this.stride;for(let it=0;it<je.length;it+=Je){if(je[it+2]<=te)continue;je[it+2]=te;const Lt=je[it],Yt=je[it+1],on=K.within(je[it],je[it+1],me),Hi=je[it+5];let Sn=Hi;for(const Yn of on){const hi=Yn*Je;je[hi+2]>te&&(Sn+=je[hi+5])}if(Sn>Hi&&Sn>=Ue){let Yn,hi=Lt*Hi,vt=Yt*Hi,di=-1;const fi=(it/Je<<5)+(te+1)+this.points.length;for(const lr of on){const qn=lr*Je;if(je[qn+2]<=te)continue;je[qn+2]=te;const dt=je[qn+5];hi+=je[qn]*dt,vt+=je[qn+1]*dt,je[qn+4]=fi,Te&&(Yn||(Yn=this._map(je,it,!0),di=this.clusterProps.length,this.clusterProps.push(Yn)),Te(Yn,this._map(je,qn)))}je[it+4]=fi,Qe.push(hi/Sn,vt/Sn,1/0,fi,-1,Sn),Te&&Qe.push(di)}else{for(let Yn=0;Yn<Je;Yn++)Qe.push(je[it+Yn]);if(Sn>1)for(const Yn of on){const hi=Yn*Je;if(!(je[hi+2]<=te)){je[hi+2]=te;for(let vt=0;vt<Je;vt++)Qe.push(je[hi+vt])}}}}return Qe}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,te,le){if(K[te+5]>1){const Ue=this.clusterProps[K[te+6]];return le?Object.assign({},Ue):Ue}const xe=this.points[K[te+3]].properties,Te=this.options.map(xe);return le&&Te===xe?Object.assign({},Te):Te}}function pt(Ie,K,te){return{type:"Feature",id:Ie[K+3],properties:Vt(Ie,K,te),geometry:{type:"Point",coordinates:[(le=Ie[K],360*(le-.5)),bt(Ie[K+1])]}};var le}function Vt(Ie,K,te){const le=Ie[K+5],xe=le>=1e4?`${Math.round(le/1e3)}k`:le>=1e3?Math.round(le/100)/10+"k":le,Te=Ie[K+6],Ue=Te===-1?{}:Object.assign({},te[Te]);return Object.assign(Ue,{cluster:!0,cluster_id:Ie[K+3],point_count:le,point_count_abbreviated:xe})}function Oe(Ie){return Ie/360+.5}function et(Ie){const K=Math.sin(Ie*Math.PI/180),te=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return te<0?0:te>1?1:te}function bt(Ie){const K=(180-360*Ie)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function Tt(Ie,K,te,le){let xe=le;const Te=K+(te-K>>1);let Ue,me=te-K;const je=Ie[K],Qe=Ie[K+1],Je=Ie[te],it=Ie[te+1];for(let Lt=K+3;Lt<te;Lt+=3){const Yt=Nt(Ie[Lt],Ie[Lt+1],je,Qe,Je,it);if(Yt>xe)Ue=Lt,xe=Yt;else if(Yt===xe){const on=Math.abs(Lt-Te);on<me&&(Ue=Lt,me=on)}}xe>le&&(Ue-K>3&&Tt(Ie,K,Ue,le),Ie[Ue+2]=xe,te-Ue>3&&Tt(Ie,Ue,te,le))}function Nt(Ie,K,te,le,xe,Te){let Ue=xe-te,me=Te-le;if(Ue!==0||me!==0){const je=((Ie-te)*Ue+(K-le)*me)/(Ue*Ue+me*me);je>1?(te=xe,le=Te):je>0&&(te+=Ue*je,le+=me*je)}return Ue=Ie-te,me=K-le,Ue*Ue+me*me}function zt(Ie,K,te,le){const xe={id:Ie??null,type:K,geometry:te,tags:le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(K==="Point"||K==="MultiPoint"||K==="LineString")Kt(xe,te);else if(K==="Polygon")Kt(xe,te[0]);else if(K==="MultiLineString")for(const Te of te)Kt(xe,Te);else if(K==="MultiPolygon")for(const Te of te)Kt(xe,Te[0]);return xe}function Kt(Ie,K){for(let te=0;te<K.length;te+=3)Ie.minX=Math.min(Ie.minX,K[te]),Ie.minY=Math.min(Ie.minY,K[te+1]),Ie.maxX=Math.max(Ie.maxX,K[te]),Ie.maxY=Math.max(Ie.maxY,K[te+1])}function rn(Ie,K,te,le){if(!K.geometry)return;const xe=K.geometry.coordinates;if(xe&&xe.length===0)return;const Te=K.geometry.type,Ue=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2);let me=[],je=K.id;if(te.promoteId?je=K.properties[te.promoteId]:te.generateId&&(je=le||0),Te==="Point")Tn(xe,me);else if(Te==="MultiPoint")for(const Qe of xe)Tn(Qe,me);else if(Te==="LineString")qi(xe,me,Ue,!1);else if(Te==="MultiLineString"){if(te.lineMetrics){for(const Qe of xe)me=[],qi(Qe,me,Ue,!1),Ie.push(zt(je,"LineString",me,K.properties));return}tr(xe,me,Ue,!1)}else if(Te==="Polygon")tr(xe,me,Ue,!0);else{if(Te!=="MultiPolygon"){if(Te==="GeometryCollection"){for(const Qe of K.geometry.geometries)rn(Ie,{id:je,geometry:Qe,properties:K.properties},te,le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Qe of xe){const Je=[];tr(Qe,Je,Ue,!0),me.push(Je)}}Ie.push(zt(je,Te,me,K.properties))}function Tn(Ie,K){K.push(Ri(Ie[0]),Hr(Ie[1]),0)}function qi(Ie,K,te,le){let xe,Te,Ue=0;for(let je=0;je<Ie.length;je++){const Qe=Ri(Ie[je][0]),Je=Hr(Ie[je][1]);K.push(Qe,Je,0),je>0&&(Ue+=le?(xe*Je-Qe*Te)/2:Math.sqrt(Math.pow(Qe-xe,2)+Math.pow(Je-Te,2))),xe=Qe,Te=Je}const me=K.length-3;K[2]=1,Tt(K,0,me,te),K[me+2]=1,K.size=Math.abs(Ue),K.start=0,K.end=K.size}function tr(Ie,K,te,le){for(let xe=0;xe<Ie.length;xe++){const Te=[];qi(Ie[xe],Te,te,le),K.push(Te)}}function Ri(Ie){return Ie/360+.5}function Hr(Ie){const K=Math.sin(Ie*Math.PI/180),te=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return te<0?0:te>1?1:te}function bn(Ie,K,te,le,xe,Te,Ue,me){if(le/=K,Te>=(te/=K)&&Ue<le)return Ie;if(Ue<te||Te>=le)return null;const je=[];for(const Qe of Ie){const Je=Qe.geometry;let it=Qe.type;const Lt=xe===0?Qe.minX:Qe.minY,Yt=xe===0?Qe.maxX:Qe.maxY;if(Lt>=te&&Yt<le){je.push(Qe);continue}if(Yt<te||Lt>=le)continue;let on=[];if(it==="Point"||it==="MultiPoint")xn(Je,on,te,le,xe);else if(it==="LineString")gr(Je,on,te,le,xe,!1,me.lineMetrics);else if(it==="MultiLineString")ba(Je,on,te,le,xe,!1);else if(it==="Polygon")ba(Je,on,te,le,xe,!0);else if(it==="MultiPolygon")for(const Hi of Je){const Sn=[];ba(Hi,Sn,te,le,xe,!0),Sn.length&&on.push(Sn)}if(on.length){if(me.lineMetrics&&it==="LineString"){for(const Hi of on)je.push(zt(Qe.id,it,Hi,Qe.tags));continue}it!=="LineString"&&it!=="MultiLineString"||(on.length===1?(it="LineString",on=on[0]):it="MultiLineString"),it!=="Point"&&it!=="MultiPoint"||(it=on.length===3?"Point":"MultiPoint"),je.push(zt(Qe.id,it,on,Qe.tags))}}return je.length?je:null}function xn(Ie,K,te,le,xe){for(let Te=0;Te<Ie.length;Te+=3){const Ue=Ie[Te+xe];Ue>=te&&Ue<=le&&oa(K,Ie[Te],Ie[Te+1],Ie[Te+2])}}function gr(Ie,K,te,le,xe,Te,Ue){let me=Wn(Ie);const je=xe===0?jr:Wr;let Qe,Je,it=Ie.start;for(let Sn=0;Sn<Ie.length-3;Sn+=3){const Yn=Ie[Sn],hi=Ie[Sn+1],vt=Ie[Sn+2],di=Ie[Sn+3],fi=Ie[Sn+4],lr=xe===0?Yn:hi,qn=xe===0?di:fi;let dt=!1;Ue&&(Qe=Math.sqrt(Math.pow(Yn-di,2)+Math.pow(hi-fi,2))),lr<te?qn>te&&(Je=je(me,Yn,hi,di,fi,te),Ue&&(me.start=it+Qe*Je)):lr>le?qn<le&&(Je=je(me,Yn,hi,di,fi,le),Ue&&(me.start=it+Qe*Je)):oa(me,Yn,hi,vt),qn<te&&lr>=te&&(Je=je(me,Yn,hi,di,fi,te),dt=!0),qn>le&&lr<=le&&(Je=je(me,Yn,hi,di,fi,le),dt=!0),!Te&&dt&&(Ue&&(me.end=it+Qe*Je),K.push(me),me=Wn(Ie)),Ue&&(it+=Qe)}let Lt=Ie.length-3;const Yt=Ie[Lt],on=Ie[Lt+1],Hi=xe===0?Yt:on;Hi>=te&&Hi<=le&&oa(me,Yt,on,Ie[Lt+2]),Lt=me.length-3,Te&&Lt>=3&&(me[Lt]!==me[0]||me[Lt+1]!==me[1])&&oa(me,me[0],me[1],me[2]),me.length&&K.push(me)}function Wn(Ie){const K=[];return K.size=Ie.size,K.start=Ie.start,K.end=Ie.end,K}function ba(Ie,K,te,le,xe,Te){for(const Ue of Ie)gr(Ue,K,te,le,xe,Te,!1)}function oa(Ie,K,te,le){Ie.push(K,te,le)}function jr(Ie,K,te,le,xe,Te){const Ue=(Te-K)/(le-K);return oa(Ie,Te,te+(xe-te)*Ue,1),Ue}function Wr(Ie,K,te,le,xe,Te){const Ue=(Te-te)/(xe-te);return oa(Ie,K+(le-K)*Ue,Te,1),Ue}function xa(Ie,K){const te=[];for(let le=0;le<Ie.length;le++){const xe=Ie[le],Te=xe.type;let Ue;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")Ue=Qa(xe.geometry,K);else if(Te==="MultiLineString"||Te==="Polygon"){Ue=[];for(const me of xe.geometry)Ue.push(Qa(me,K))}else if(Te==="MultiPolygon"){Ue=[];for(const me of xe.geometry){const je=[];for(const Qe of me)je.push(Qa(Qe,K));Ue.push(je)}}te.push(zt(xe.id,Te,Ue,xe.tags))}return te}function Qa(Ie,K){const te=[];te.size=Ie.size,Ie.start!==void 0&&(te.start=Ie.start,te.end=Ie.end);for(let le=0;le<Ie.length;le+=3)te.push(Ie[le]+K,Ie[le+1],Ie[le+2]);return te}function ki(Ie,K){if(Ie.transformed)return Ie;const te=1<<Ie.z,le=Ie.x,xe=Ie.y;for(const Te of Ie.features){const Ue=Te.geometry,me=Te.type;if(Te.geometry=[],me===1)for(let je=0;je<Ue.length;je+=2)Te.geometry.push(Sr(Ue[je],Ue[je+1],K,te,le,xe));else for(let je=0;je<Ue.length;je++){const Qe=[];for(let Je=0;Je<Ue[je].length;Je+=2)Qe.push(Sr(Ue[je][Je],Ue[je][Je+1],K,te,le,xe));Te.geometry.push(Qe)}}return Ie.transformed=!0,Ie}function Sr(Ie,K,te,le,xe,Te){return[Math.round(te*(Ie*le-xe)),Math.round(te*(K*le-Te))]}function Cn(Ie,K,te,le,xe){const Te=K===xe.maxZoom?0:xe.tolerance/((1<<K)*xe.extent),Ue={features:[],numPoints:0,numSimplified:0,numFeatures:Ie.length,source:null,x:te,y:le,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const me of Ie)sa(Ue,me,Te,xe);return Ue}function sa(Ie,K,te,le){const xe=K.geometry,Te=K.type,Ue=[];if(Ie.minX=Math.min(Ie.minX,K.minX),Ie.minY=Math.min(Ie.minY,K.minY),Ie.maxX=Math.max(Ie.maxX,K.maxX),Ie.maxY=Math.max(Ie.maxY,K.maxY),Te==="Point"||Te==="MultiPoint")for(let me=0;me<xe.length;me+=3)Ue.push(xe[me],xe[me+1]),Ie.numPoints++,Ie.numSimplified++;else if(Te==="LineString")la(Ue,xe,Ie,te,!1,!1);else if(Te==="MultiLineString"||Te==="Polygon")for(let me=0;me<xe.length;me++)la(Ue,xe[me],Ie,te,Te==="Polygon",me===0);else if(Te==="MultiPolygon")for(let me=0;me<xe.length;me++){const je=xe[me];for(let Qe=0;Qe<je.length;Qe++)la(Ue,je[Qe],Ie,te,!0,Qe===0)}if(Ue.length){let me=K.tags||null;if(Te==="LineString"&&le.lineMetrics){me={};for(const Qe in K.tags)me[Qe]=K.tags[Qe];me.mapbox_clip_start=xe.start/xe.size,me.mapbox_clip_end=xe.end/xe.size}const je={geometry:Ue,type:Te==="Polygon"||Te==="MultiPolygon"?3:Te==="LineString"||Te==="MultiLineString"?2:1,tags:me};K.id!==null&&(je.id=K.id),Ie.features.push(je)}}function la(Ie,K,te,le,xe,Te){const Ue=le*le;if(le>0&&K.size<(xe?Ue:le))return void(te.numPoints+=K.length/3);const me=[];for(let je=0;je<K.length;je+=3)(le===0||K[je+2]>Ue)&&(te.numSimplified++,me.push(K[je],K[je+1])),te.numPoints++;xe&&function(je,Qe){let Je=0;for(let it=0,Lt=je.length,Yt=Lt-2;it<Lt;Yt=it,it+=2)Je+=(je[it]-je[Yt])*(je[it+1]+je[Yt+1]);if(Je>0===Qe)for(let it=0,Lt=je.length;it<Lt/2;it+=2){const Yt=je[it],on=je[it+1];je[it]=je[Lt-2-it],je[it+1]=je[Lt-1-it],je[Lt-2-it]=Yt,je[Lt-1-it]=on}}(me,Te),Ie.push(me)}const Au={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class il{constructor(K,te){const le=(te=this.options=function(Te,Ue){for(const me in Ue)Te[me]=Ue[me];return Te}(Object.create(Au),te)).debug;if(le&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");let xe=function(Te,Ue){const me=[];if(Te.type==="FeatureCollection")for(let je=0;je<Te.features.length;je++)rn(me,Te.features[je],Ue,je);else rn(me,Te.type==="Feature"?Te:{geometry:Te},Ue);return me}(K,te);this.tiles={},this.tileCoords=[],le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),xe=function(Te,Ue){const me=Ue.buffer/Ue.extent;let je=Te;const Qe=bn(Te,1,-1-me,me,0,-1,2,Ue),Je=bn(Te,1,1-me,2+me,0,-1,2,Ue);return(Qe||Je)&&(je=bn(Te,1,-me,1+me,0,-1,2,Ue)||[],Qe&&(je=xa(Qe,1).concat(je)),Je&&(je=je.concat(xa(Je,-1)))),je}(xe,te),xe.length&&this.splitTile(xe,0,0,0),le&&(xe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(K,te,le,xe,Te,Ue,me){const je=[K,te,le,xe],Qe=this.options,Je=Qe.debug;for(;je.length;){xe=je.pop(),le=je.pop(),te=je.pop(),K=je.pop();const it=1<<te,Lt=Mu(te,le,xe);let Yt=this.tiles[Lt];if(!Yt&&(Je>1&&console.time("creation"),Yt=this.tiles[Lt]=Cn(K,te,le,xe,Qe),this.tileCoords.push({z:te,x:le,y:xe}),Je)){Je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,le,xe,Yt.numFeatures,Yt.numPoints,Yt.numSimplified),console.timeEnd("creation"));const dt=`z${te}`;this.stats[dt]=(this.stats[dt]||0)+1,this.total++}if(Yt.source=K,Te==null){if(te===Qe.indexMaxZoom||Yt.numPoints<=Qe.indexMaxPoints)continue}else{if(te===Qe.maxZoom||te===Te)continue;if(Te!=null){const dt=Te-te;if(le!==Ue>>dt||xe!==me>>dt)continue}}if(Yt.source=null,K.length===0)continue;Je>1&&console.time("clipping");const on=.5*Qe.buffer/Qe.extent,Hi=.5-on,Sn=.5+on,Yn=1+on;let hi=null,vt=null,di=null,fi=null,lr=bn(K,it,le-on,le+Sn,0,Yt.minX,Yt.maxX,Qe),qn=bn(K,it,le+Hi,le+Yn,0,Yt.minX,Yt.maxX,Qe);K=null,lr&&(hi=bn(lr,it,xe-on,xe+Sn,1,Yt.minY,Yt.maxY,Qe),vt=bn(lr,it,xe+Hi,xe+Yn,1,Yt.minY,Yt.maxY,Qe),lr=null),qn&&(di=bn(qn,it,xe-on,xe+Sn,1,Yt.minY,Yt.maxY,Qe),fi=bn(qn,it,xe+Hi,xe+Yn,1,Yt.minY,Yt.maxY,Qe),qn=null),Je>1&&console.timeEnd("clipping"),je.push(hi||[],te+1,2*le,2*xe),je.push(vt||[],te+1,2*le,2*xe+1),je.push(di||[],te+1,2*le+1,2*xe),je.push(fi||[],te+1,2*le+1,2*xe+1)}}getTile(K,te,le){K=+K,te=+te,le=+le;const xe=this.options,{extent:Te,debug:Ue}=xe;if(K<0||K>24)return null;const me=1<<K,je=Mu(K,te=te+me&me-1,le);if(this.tiles[je])return ki(this.tiles[je],Te);Ue>1&&console.log("drilling down to z%d-%d-%d",K,te,le);let Qe,Je=K,it=te,Lt=le;for(;!Qe&&Je>0;)Je--,it>>=1,Lt>>=1,Qe=this.tiles[Mu(Je,it,Lt)];return Qe&&Qe.source?(Ue>1&&(console.log("found parent tile z%d-%d-%d",Je,it,Lt),console.time("drilling down")),this.splitTile(Qe.source,Je,it,Lt,K,te,le),Ue>1&&console.timeEnd("drilling down"),this.tiles[je]?ki(this.tiles[je],Te):null):null}}function Mu(Ie,K,te){return 32*((1<<Ie)*te+K)+Ie}class Dc extends Se{constructor(K,te,le,xe=wa){super(K,te,le),this._dataUpdateable=new Map,this._createGeoJSONIndex=xe}loadVectorTile(K,te){return _._(this,void 0,void 0,function*(){const le=K.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const xe=this._geoJSONIndex.getTile(le.z,le.x,le.y);return xe?ze(new V(xe.features,{version:2,extent:_.a4})):null})}loadData(K){return _._(this,void 0,void 0,function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();const le=this._startPerformance(K);this._pendingRequest=new AbortController;try{(!this._pendingData||K.request||K.data||K.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(K,this._pendingRequest));const xe=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(xe,K),this.loaded={};const Te=K.dataDiff&&_.a6(xe)?{applyDiff:!0}:{data:xe};return this._finishPerformance(le,K,Te),Te}catch(xe){if(delete this._pendingRequest,_.cH(xe))return{abandoned:!0};throw xe}})}_startPerformance(K){var te;if(!((te=K?.request)===null||te===void 0)&&te.collectResourceTiming)return new _.c$(K.request)}_finishPerformance(K,te,le){if(!K)return;const xe=K.finish();xe&&(le.resourceTiming={},le.resourceTiming[te.source]=JSON.parse(JSON.stringify(xe)))}getData(){return _._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(K){const te=this.loaded;return te&&te[K.uid]?super.reloadTile(K):this.loadTile(K)}loadAndProcessGeoJSON(K,te){return _._(this,void 0,void 0,function*(){let le;if(K.request?le=yield this.loadGeoJSONFromUrl(K.request,K.promoteId,te):K.data?le=this._loadGeoJSONFromObject(K.data,K.promoteId):K.dataDiff&&(le=this._loadGeoJSONFromDiff(K.dataDiff,K.promoteId,K.source)),delete this._pendingRequest,typeof le!="object")throw new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`);return Ut(le,!0),K.filter&&(le=this._filterGeoJSON(le,K.filter)),le})}loadGeoJSONFromUrl(K,te,le){return _._(this,void 0,void 0,function*(){const xe=yield _.j(K,le);return this._dataUpdateable=_.a6(xe.data,te)?_.a7(xe.data,te):void 0,xe.data})}_loadGeoJSONFromObject(K,te){return this._dataUpdateable=_.a6(K,te)?_.a7(K,te):void 0,K}_loadGeoJSONFromDiff(K,te,le){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${le}`);_.a8(this._dataUpdateable,K,te);const xe=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(xe)}_filterGeoJSON(K,te){const le=_.d3(te,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(le.result==="error")throw new Error(le.value.map(Te=>`${Te.key}: ${Te.message}`).join(", "));const xe=K.features.filter(Te=>le.value.evaluate({zoom:0},Te));return this._toFeatureCollection(xe)}_toFeatureCollection(K){return{type:"FeatureCollection",features:K}}removeSource(K){return _._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(K){return this._geoJSONIndex.getClusterExpansionZoom(K.clusterId)}getClusterChildren(K){return this._geoJSONIndex.getChildren(K.clusterId)}getClusterLeaves(K){return this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset)}}function wa(Ie,K){return K.cluster?new St(function({superclusterOptions:te,clusterProperties:le}){if(!le||!te)return te;const xe={},Te={},Ue={accumulated:null,zoom:0},me={properties:null},je=Object.keys(le);for(const Qe of je){const[Je,it]=le[Qe],Lt=_.d3(it),Yt=_.d3(typeof Je=="string"?[Je,["accumulated"],["get",Qe]]:Je);xe[Qe]=Lt.value,Te[Qe]=Yt.value}return te.map=Qe=>{me.properties=Qe;const Je={};for(const it of je)Je[it]=xe[it].evaluate(Ue,me);return Je},te.reduce=(Qe,Je)=>{me.properties=Je;for(const it of je)Ue.accumulated=Qe[it],Qe[it]=Te[it].evaluate(Ue,me)},te}(K)).load(Ie.features):function(te,le){return new il(te,le)}(Ie,K.geojsonVtOptions)}class zi{constructor(K){this.self=K,this.actor=new _.L(K),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(te,le)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=le},this.self.addProtocol=_.cJ,this.self.removeProtocol=_.cK,this.self.registerRTLTextPlugin=te=>{_.d4.setMethods(te)},this.actor.registerMessageHandler("LDT",(te,le)=>this._getDEMWorkerSource(te,le.source).loadTile(le)),this.actor.registerMessageHandler("RDT",(te,le)=>_._(this,void 0,void 0,function*(){this._getDEMWorkerSource(te,le.source).removeTile(le)})),this.actor.registerMessageHandler("GCEZ",(te,le)=>_._(this,void 0,void 0,function*(){return this._getWorkerSource(te,le.type,le.source).getClusterExpansionZoom(le)})),this.actor.registerMessageHandler("GCC",(te,le)=>_._(this,void 0,void 0,function*(){return this._getWorkerSource(te,le.type,le.source).getClusterChildren(le)})),this.actor.registerMessageHandler("GCL",(te,le)=>_._(this,void 0,void 0,function*(){return this._getWorkerSource(te,le.type,le.source).getClusterLeaves(le)})),this.actor.registerMessageHandler("LD",(te,le)=>this._getWorkerSource(te,le.type,le.source).loadData(le)),this.actor.registerMessageHandler("GD",(te,le)=>this._getWorkerSource(te,le.type,le.source).getData()),this.actor.registerMessageHandler("LT",(te,le)=>this._getWorkerSource(te,le.type,le.source).loadTile(le)),this.actor.registerMessageHandler("RT",(te,le)=>this._getWorkerSource(te,le.type,le.source).reloadTile(le)),this.actor.registerMessageHandler("AT",(te,le)=>this._getWorkerSource(te,le.type,le.source).abortTile(le)),this.actor.registerMessageHandler("RMT",(te,le)=>this._getWorkerSource(te,le.type,le.source).removeTile(le)),this.actor.registerMessageHandler("RS",(te,le)=>_._(this,void 0,void 0,function*(){if(!this.workerSources[te]||!this.workerSources[te][le.type]||!this.workerSources[te][le.type][le.source])return;const xe=this.workerSources[te][le.type][le.source];delete this.workerSources[te][le.type][le.source],xe.removeSource!==void 0&&xe.removeSource(le)})),this.actor.registerMessageHandler("RM",te=>_._(this,void 0,void 0,function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te],this.globalStates.delete(te)})),this.actor.registerMessageHandler("SR",(te,le)=>_._(this,void 0,void 0,function*(){this.referrer=le})),this.actor.registerMessageHandler("SRPS",(te,le)=>this._syncRTLPluginState(te,le)),this.actor.registerMessageHandler("IS",(te,le)=>_._(this,void 0,void 0,function*(){this.self.importScripts(le)})),this.actor.registerMessageHandler("SI",(te,le)=>this._setImages(te,le)),this.actor.registerMessageHandler("UL",(te,le)=>_._(this,void 0,void 0,function*(){this._getLayerIndex(te).update(le.layers,le.removedIds,this._getGlobalState(te))})),this.actor.registerMessageHandler("UGS",(te,le)=>_._(this,void 0,void 0,function*(){const xe=this._getGlobalState(te);for(const Te in le)xe[Te]=le[Te]})),this.actor.registerMessageHandler("SL",(te,le)=>_._(this,void 0,void 0,function*(){this._getLayerIndex(te).replace(le,this._getGlobalState(te))}))}_getGlobalState(K){let te=this.globalStates.get(K);return te||(te={},this.globalStates.set(K,te)),te}_setImages(K,te){return _._(this,void 0,void 0,function*(){this.availableImages[K]=te;for(const le in this.workerSources[K]){const xe=this.workerSources[K][le];for(const Te in xe)xe[Te].availableImages=te}})}_syncRTLPluginState(K,te){return _._(this,void 0,void 0,function*(){return yield _.d4.syncState(te,this.self.importScripts)})}_getAvailableImages(K){let te=this.availableImages[K];return te||(te=[]),te}_getLayerIndex(K){let te=this.layerIndexes[K];return te||(te=this.layerIndexes[K]=new c),te}_getWorkerSource(K,te,le){if(this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][te]||(this.workerSources[K][te]={}),!this.workerSources[K][te][le]){const xe={sendAsync:(Te,Ue)=>(Te.targetMapId=K,this.actor.sendAsync(Te,Ue))};switch(te){case"vector":this.workerSources[K][te][le]=new Se(xe,this._getLayerIndex(K),this._getAvailableImages(K));break;case"geojson":this.workerSources[K][te][le]=new Dc(xe,this._getLayerIndex(K),this._getAvailableImages(K));break;default:this.workerSources[K][te][le]=new this.externalWorkerSourceTypes[te](xe,this._getLayerIndex(K),this._getAvailableImages(K))}}return this.workerSources[K][te][le]}_getDEMWorkerSource(K,te){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][te]||(this.demWorkerSources[K][te]=new nt),this.demWorkerSources[K][te]}}return _.i(self)&&(self.worker=new zi(self)),zi}),f("index",["exports","./shared"],function(_,c){var A="5.13.0";function D(){var w=new c.A(4);return c.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let O,z,V;const H={frame(w,n,l){const m=requestAnimationFrame(T=>{b(),n(T)}),{unsubscribe:b}=c.s(w.signal,"abort",()=>{b(),cancelAnimationFrame(m),l(c.c())},!1)},frameAsync(w){return new Promise((n,l)=>{this.frame(w,n,l)})},getImageData(w,n=0){return this.getImageCanvasContext(w).getImageData(-n,-n,w.width+2*n,w.height+2*n)},getImageCanvasContext(w){const n=window.document.createElement("canvas"),l=n.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return n.width=w.width,n.height=w.height,l.drawImage(w,0,0,w.width,w.height),l},resolveURL:w=>(O||(O=document.createElement("a")),O.href=w,O.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return V!==void 0?V:!!matchMedia&&(z==null&&(z=matchMedia("(prefers-reduced-motion: reduce)")),z.matches)},set prefersReducedMotion(w){V=w}},ne=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function ae(){return ne.getCurrentTime()}class q{static testProp(n){if(!q.docStyle)return n[0];for(let l=0;l<n.length;l++)if(n[l]in q.docStyle)return n[l];return n[0]}static create(n,l,m){const b=window.document.createElement(n);return l!==void 0&&(b.className=l),m&&m.appendChild(b),b}static createNS(n,l){return window.document.createElementNS(n,l)}static disableDrag(){q.docStyle&&q.selectProp&&(q.userSelect=q.docStyle[q.selectProp],q.docStyle[q.selectProp]="none")}static enableDrag(){q.docStyle&&q.selectProp&&(q.docStyle[q.selectProp]=q.userSelect)}static setTransform(n,l){n.style[q.transformProp]=l}static addEventListener(n,l,m,b={}){n.addEventListener(l,m,"passive"in b?b:b.capture)}static removeEventListener(n,l,m,b={}){n.removeEventListener(l,m,"passive"in b?b:b.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",q.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",q.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",q.suppressClickInternal,!0)},0)}static getScale(n){const l=n.getBoundingClientRect();return{x:l.width/n.offsetWidth||1,y:l.height/n.offsetHeight||1,boundingClientRect:l}}static getPoint(n,l,m){const b=l.boundingClientRect;return new c.P((m.clientX-b.left)/l.x-n.clientLeft,(m.clientY-b.top)/l.y-n.clientTop)}static mousePos(n,l){const m=q.getScale(n);return q.getPoint(n,m,l)}static touchPos(n,l){const m=[],b=q.getScale(n);for(let T=0;T<l.length;T++)m.push(q.getPoint(n,b,l[T]));return m}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const l=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),m=l.querySelectorAll("script");for(const b of m)b.remove();return q.clean(l),l.innerHTML}static isPossiblyDangerous(n,l){const m=l.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!m.includes("javascript:")&&!m.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const l=n.children;for(const m of l)q.removeAttributes(m),q.clean(m)}static removeAttributes(n){for(const{name:l,value:m}of n.attributes)q.isPossiblyDangerous(l,m)&&n.removeAttribute(l)}}q.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,q.selectProp=q.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),q.transformProp=q.testProp(["transform","WebkitTransform"]);const he={supported:!1,testSupport:function(w){!Fe&&Ee&&(De?ke(w):Ae=w)}};let Ae,Ee,Fe=!1,De=!1;function ke(w){const n=w.createTexture();w.bindTexture(w.TEXTURE_2D,n);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,Ee),w.isContextLost())return;he.supported=!0}catch{}w.deleteTexture(n),Fe=!0}var ze;typeof document<"u"&&(Ee=document.createElement("img"),Ee.onload=()=>{Ae&&ke(Ae),Ae=null,De=!0},Ee.onerror=()=>{Fe=!0,Ae=null},Ee.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let n,l,m,b;w.resetRequestQueue=()=>{n=[],l=0,m=0,b={}},w.addThrottleControl=L=>{const F=m++;return b[F]=L,F},w.removeThrottleControl=L=>{delete b[L],M()},w.getImage=(L,F,B=!0)=>new Promise((Y,$)=>{he.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),c.e(L,{type:"image"}),n.push({abortController:F,requestParameters:L,supportImageRefresh:B,state:"queued",onError:J=>{$(J)},onSuccess:J=>{Y(J)}}),M()});const T=L=>c._(this,void 0,void 0,function*(){L.state="running";const{requestParameters:F,supportImageRefresh:B,onError:Y,onSuccess:$,abortController:J}=L,oe=B===!1&&!c.i(self)&&!c.g(F.url)&&(!F.headers||Object.keys(F.headers).reduce((ye,be)=>ye&&be==="accept",!0));l++;const de=oe?R(F,J):c.m(F,J);try{const ye=yield de;delete L.abortController,L.state="completed",ye.data instanceof HTMLImageElement||c.b(ye.data)?$(ye):ye.data&&$({data:yield(pe=ye.data,typeof createImageBitmap=="function"?c.f(pe):c.h(pe)),cacheControl:ye.cacheControl,expires:ye.expires})}catch(ye){delete L.abortController,Y(ye)}finally{l--,M()}var pe}),M=()=>{const L=(()=>{for(const F of Object.keys(b))if(b[F]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let F=l;F<L&&n.length>0;F++){const B=n.shift();B.abortController.signal.aborted?F--:T(B)}},R=(L,F)=>new Promise((B,Y)=>{const $=new Image,J=L.url,oe=L.credentials;oe&&oe==="include"?$.crossOrigin="use-credentials":(oe&&oe==="same-origin"||!c.d(J))&&($.crossOrigin="anonymous"),F.signal.addEventListener("abort",()=>{$.src="",Y(c.c())}),$.fetchPriority="high",$.onload=()=>{$.onerror=$.onload=null,B({data:$})},$.onerror=()=>{$.onerror=$.onload=null,F.signal.aborted||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},$.src=J})}(ze||(ze={})),ze.resetRequestQueue();class rt{constructor(n){this._transformRequestFn=n??null}transformRequest(n,l){return this._transformRequestFn&&this._transformRequestFn(n,l)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function Se(w){const n=[];if(typeof w=="string")n.push({id:"default",url:w});else if(w&&w.length>0){const l=[];for(const{id:m,url:b}of w){const T=`${m}${b}`;l.indexOf(T)===-1&&(l.push(T),n.push({id:m,url:b}))}}return n}function nt(w,n,l){try{const m=new URL(w);return m.pathname+=`${n}${l}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Mt(w){const{userImage:n}=w;return!!(n&&n.render&&n.render())&&(w.data.replace(new Uint8Array(n.data.buffer)),!0)}class Ct extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const n of Object.keys(this.images))this.removeImage(n);this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:l,promiseResolve:m}of this.requestors)m(this._getImagesForIds(l));this.requestors=[]}}getImage(n){const l=this.images[n];if(l&&!l.data&&l.spriteData){const m=l.spriteData;l.data=new c.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),l.spriteData=null}return l}addImage(n,l){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,l)&&(this.images[n]=l)}_validate(n,l){let m=!0;const b=l.data||l.spriteData;return this._validateStretch(l.stretchX,b&&b.width)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "stretchX" value`))),m=!1),this._validateStretch(l.stretchY,b&&b.height)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "stretchY" value`))),m=!1),this._validateContent(l.content,l)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "content" value`))),m=!1),m}_validateStretch(n,l){if(!n)return!0;let m=0;for(const b of n){if(b[0]<m||b[1]<b[0]||l<b[1])return!1;m=b[1]}return!0}_validateContent(n,l){if(!n)return!0;if(n.length!==4)return!1;const m=l.spriteData,b=m&&m.width||l.data.width,T=m&&m.height||l.data.height;return!(n[0]<0||b<n[0]||n[1]<0||T<n[1]||n[2]<0||b<n[2]||n[3]<0||T<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,l,m=!0){const b=this.getImage(n);if(m&&(b.data.width!==l.data.width||b.data.height!==l.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=b.version+1,this.images[n]=l,this.updatedImages[n]=!0}removeImage(n){const l=this.images[n];delete this.images[n],delete this.patterns[n],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((l,m)=>{let b=!0;if(!this.isLoaded())for(const T of n)this.images[T]||(b=!1);this.isLoaded()||b?l(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:l})})}_getImagesForIds(n){const l={};for(const m of n){let b=this.getImage(m);b||(this.fire(new c.l("styleimagemissing",{id:m})),b=this.getImage(m)),b?l[m]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,textFitWidth:b.textFitWidth,textFitHeight:b.textFitHeight,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:c.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:n,height:l}=this.atlasImage;return{width:n,height:l}}getPattern(n){const l=this.patterns[n],m=this.getImage(n);if(!m)return null;if(l&&l.position.version===m.version)return l.position;if(l)l.position.version=m.version;else{const b={w:m.data.width+2,h:m.data.height+2,x:0,y:0},T=new c.I(b,m);this.patterns[n]={bin:b,position:T}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const l=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(n,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const T in this.patterns)n.push(this.patterns[T].bin);const{w:l,h:m}=c.p(n),b=this.atlasImage;b.resize({width:l||1,height:m||1});for(const T in this.patterns){const{bin:M}=this.patterns[T],R=M.x+1,L=M.y+1,F=this.getImage(T).data,B=F.width,Y=F.height;c.R.copy(F,b,{x:0,y:0},{x:R,y:L},{width:B,height:Y}),c.R.copy(F,b,{x:0,y:Y-1},{x:R,y:L-1},{width:B,height:1}),c.R.copy(F,b,{x:0,y:0},{x:R,y:L+Y},{width:B,height:1}),c.R.copy(F,b,{x:B-1,y:0},{x:R-1,y:L},{width:1,height:Y}),c.R.copy(F,b,{x:0,y:0},{x:R+B,y:L},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const l of n){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const m=this.getImage(l);m||c.w(`Image with ID: "${l}" was not found`),Mt(m)&&this.updateImage(l,m)}}cloneImages(){const n={};for(const l in this.images){const m=this.images[l];n[l]=Object.assign(Object.assign({},m),{data:m.data?m.data.clone():null})}return n}}const Ft=1e20;function Ut(w,n,l,m,b,T,M,R,L){for(let F=n;F<n+m;F++)Gt(w,l*T+F,T,b,M,R,L);for(let F=l;F<l+b;F++)Gt(w,F*T+n,1,m,M,R,L)}function Gt(w,n,l,m,b,T,M){T[0]=0,M[0]=-Ft,M[1]=Ft,b[0]=w[n];for(let R=1,L=0,F=0;R<m;R++){b[R]=w[n+R*l];const B=R*R;do{const Y=T[L];F=(b[R]-b[Y]+B-Y*Y)/(R-Y)/2}while(F<=M[L]&&--L>-1);L++,T[L]=R,M[L]=F,M[L+1]=Ft}for(let R=0,L=0;R<m;R++){for(;M[L+1]<R;)L++;const F=T[L],B=R-F;w[n+R*l]=b[F]+B*B}}const Ge=c.v.layout_symbol["text-font"].default.join(",");class ct{constructor(n,l,m){this.requestManager=n,this.localIdeographFontFamily=l,this.entries={},this.lang=m}setURL(n){this.url=n}getGlyphs(n){return c._(this,void 0,void 0,function*(){const l=[];for(const T in n)for(const M of n[T])l.push(this._getAndCacheGlyphsPromise(T,M));const m=yield Promise.all(l),b={};for(const{stack:T,id:M,glyph:R}of m)b[T]||(b[T]={}),b[T][M]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};return b})}_getAndCacheGlyphsPromise(n,l){return c._(this,void 0,void 0,function*(){let m=this.entries[n];m||(m=this.entries[n]={glyphs:{},requests:{},ranges:{}});let b=m.glyphs[l];return b!==void 0?{stack:n,id:l,glyph:b}:!this.url||this._charUsesLocalIdeographFontFamily(l)?(b=m.glyphs[l]=this._drawGlyph(m,n,l),{stack:n,id:l,glyph:b}):yield this._downloadAndCacheRangePromise(n,l)})}_downloadAndCacheRangePromise(n,l){return c._(this,void 0,void 0,function*(){const m=this.entries[n],b=Math.floor(l/256);if(m.ranges[b])return{stack:n,id:l,glyph:null};if(!m.requests[b]){const T=ct.loadGlyphRange(n,b,this.url,this.requestManager);m.requests[b]=T}try{const T=yield m.requests[b];for(const M in T)m.glyphs[+M]=T[+M];return m.ranges[b]=!0,{stack:n,id:l,glyph:T[l]||null}}catch(T){const M=m.glyphs[l]=this._drawGlyph(m,n,l);return this._warnOnMissingGlyphRange(M,b,l,T),{stack:n,id:l,glyph:M}}})}_warnOnMissingGlyphRange(n,l,m,b){const T=256*l,M=T+255,R=m.toString(16).padStart(4,"0").toUpperCase();c.w(`Unable to load glyph range ${l}, ${T}-${M}. Rendering codepoint U+${R} locally instead. ${b}`)}_charUsesLocalIdeographFontFamily(n){return!!this.localIdeographFontFamily&&c.q(n)}_drawGlyph(n,l,m){const b=l===Ge&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(m),T=b?"ideographTinySDF":"tinySDF";n[T]||(n[T]=this._createTinySDF(b?this.localIdeographFontFamily:l));const M=n[T].draw(String.fromCodePoint(m));return{id:m,bitmap:new c.r({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(n){const l=n?n.split(","):[];l.push("sans-serif");const m=l.map(b=>/[-\w]+/.test(b)?b:`'${CSS.escape(b)}'`).join(",");return new ct.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:this._fontWeight(l[0]),fontStyle:this._fontStyle(l[0]),lang:this.lang})}_fontStyle(n){return/italic/i.test(n)?"italic":/oblique/i.test(n)?"oblique":"normal"}_fontWeight(n){const l={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let m;for(const[b,T]of Object.entries(l))new RegExp(`\\b${b}\\b`,"i").test(n)&&(m=`${T}`);return m}destroy(){for(const n in this.entries){const l=this.entries[n];l.tinySDF&&(l.tinySDF=null),l.ideographTinySDF&&(l.ideographTinySDF=null),l.glyphs={},l.requests={},l.ranges={}}this.entries={}}}ct.loadGlyphRange=function(w,n,l,m){return c._(this,void 0,void 0,function*(){const b=256*n,T=b+255,M=m.transformRequest(l.replace("{fontstack}",w).replace("{range}",`${b}-${T}`),"Glyphs"),R=yield c.n(M,new AbortController);if(!R||!R.data)throw new Error(`Could not load glyph range. range: ${n}, ${b}-${T}`);const L={};for(const F of c.o(R.data))L[F.id]=F;return L})},ct.TinySDF=class{constructor({fontSize:w=24,buffer:n=3,radius:l=8,cutoff:m=.25,fontFamily:b="sans-serif",fontWeight:T="normal",fontStyle:M="normal",lang:R=null}={}){this.buffer=n,this.cutoff=m,this.radius=l,this.lang=R;const L=this.size=w+4*n,F=this._createCanvas(L),B=this.ctx=F.getContext("2d",{willReadFrequently:!0});B.font=`${M} ${T} ${w}px ${b}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(w){const n=document.createElement("canvas");return n.width=n.height=w,n}draw(w){const{width:n,actualBoundingBoxAscent:l,actualBoundingBoxDescent:m,actualBoundingBoxLeft:b,actualBoundingBoxRight:T}=this.ctx.measureText(w),M=Math.ceil(l),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-b))),L=Math.min(this.size-this.buffer,M+Math.ceil(m)),F=R+2*this.buffer,B=L+2*this.buffer,Y=Math.max(F*B,0),$=new Uint8ClampedArray(Y),J={data:$,width:F,height:B,glyphWidth:R,glyphHeight:L,glyphTop:M,glyphLeft:0,glyphAdvance:n};if(R===0||L===0)return J;const{ctx:oe,buffer:de,gridInner:pe,gridOuter:ye}=this;this.lang&&(oe.lang=this.lang),oe.clearRect(de,de,R,L),oe.fillText(w,de,de+M);const be=oe.getImageData(de,de,R,L);ye.fill(Ft,0,Y),pe.fill(0,0,Y);for(let Me=0;Me<L;Me++)for(let _e=0;_e<R;_e++){const Ce=be.data[4*(Me*R+_e)+3]/255;if(Ce===0)continue;const Re=(Me+de)*F+_e+de;if(Ce===1)ye[Re]=0,pe[Re]=Ft;else{const we=.5-Ce;ye[Re]=we>0?we*we:0,pe[Re]=we<0?we*we:0}}Ut(ye,0,0,F,B,F,this.f,this.v,this.z),Ut(pe,de,de,R,L,F,this.f,this.v,this.z);for(let Me=0;Me<Y;Me++){const _e=Math.sqrt(ye[Me])-Math.sqrt(pe[Me]);$[Me]=Math.round(255-255*(_e/this.radius+this.cutoff))}return J}};class St{constructor(){this.specification=c.u.light.position}possiblyEvaluate(n,l){return c.F(n.expression.evaluate(l))}interpolate(n,l,m){return{x:c.G.number(n.x,l.x,m),y:c.G.number(n.y,l.y,m),z:c.G.number(n.z,l.z,m)}}}let pt;class Vt extends c.E{constructor(n){super(),pt=pt||new c.t({anchor:new c.D(c.u.light.anchor),position:new St,color:new c.D(c.u.light.color),intensity:new c.D(c.u.light.intensity)}),this._transitionable=new c.x(pt,void 0),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,l={}){if(!this._validate(c.y,n,l))for(const m in n){const b=n[m];m.endsWith(c.z)?this._transitionable.setTransition(m.slice(0,-c.z.length),b):this._transitionable.setValue(m,b)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,m){return(!m||m.validate!==!1)&&c.B(this,n.call(c.C,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:c.u}))}}const Oe=new c.t({"sky-color":new c.D(c.u.sky["sky-color"]),"horizon-color":new c.D(c.u.sky["horizon-color"]),"fog-color":new c.D(c.u.sky["fog-color"]),"fog-ground-blend":new c.D(c.u.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.u.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.u.sky["atmosphere-blend"])});class et extends c.E{constructor(n){super(),this._transitionable=new c.x(Oe,void 0),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0))}setSky(n,l={}){if(!this._validate(c.J,n,l)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in n){const b=n[m];m.endsWith(c.z)?this._transitionable.setTransition(m.slice(0,-c.z.length),b):this._transitionable.setValue(m,b)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,m={}){return m?.validate!==!1&&c.B(this,n.call(c.C,c.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:c.u})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class bt{constructor(n,l){this.width=n,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,l){const m=n.join(",")+String(l);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(n,l)),this.dashEntry[m]}getDashRanges(n,l,m){const b=[];let T=n.length%2==1?-n[n.length-1]*m:0,M=n[0]*m,R=!0;b.push({left:T,right:M,isDash:R,zeroLength:n[0]===0});let L=n[0];for(let F=1;F<n.length;F++){R=!R;const B=n[F];T=L*m,L+=B,M=L*m,b.push({left:T,right:M,isDash:R,zeroLength:B===0})}return b}addRoundDash(n,l,m){const b=l/2;for(let T=-m;T<=m;T++){const M=this.width*(this.nextRow+m+T);let R=0,L=n[R];for(let F=0;F<this.width;F++){F/L.right>1&&(L=n[++R]);const B=Math.abs(F-L.left),Y=Math.abs(F-L.right),$=Math.min(B,Y);let J;const oe=T/m*(b+1);if(L.isDash){const de=b-Math.abs(oe);J=Math.sqrt($*$+de*de)}else J=b-Math.sqrt($*$+oe*oe);this.data[M+F]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(n){for(let R=n.length-1;R>=0;--R){const L=n[R],F=n[R+1];L.zeroLength?n.splice(R,1):F&&F.isDash===L.isDash&&(F.left=L.left,n.splice(R,1))}const l=n[0],m=n[n.length-1];l.isDash===m.isDash&&(l.left=m.left-this.width,m.right=l.right+this.width);const b=this.width*this.nextRow;let T=0,M=n[T];for(let R=0;R<this.width;R++){R/M.right>1&&(M=n[++T]);const L=Math.abs(R-M.left),F=Math.abs(R-M.right),B=Math.min(L,F);this.data[b+R]=Math.max(0,Math.min(255,(M.isDash?B:-B)+128))}}addDash(n,l){const m=l?7:0,b=2*m+1;if(this.nextRow+b>this.height)return c.w("LineAtlas out of space"),null;let T=0;for(let R=0;R<n.length;R++)T+=n[R];if(T!==0){const R=this.width/T,L=this.getDashRanges(n,this.width,R);l?this.addRoundDash(L,R,m):this.addRegularDash(L)}const M={y:this.nextRow+m,height:2*m,width:T};return this.nextRow+=b,this.dirty=!0,M}bind(n){const l=n.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const Tt="maplibre_preloaded_worker_pool";class Nt{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Nt.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Tt]}numActive(){return Object.keys(this.active).length}}const zt=Math.floor(H.hardwareConcurrency/2);let Kt,rn;function Tn(){return Kt||(Kt=new Nt),Kt}Nt.workerCount=c.K(globalThis)?Math.max(Math.min(zt,3),1):1;class qi{constructor(n,l){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=l;const m=this.workerPool.acquire(l);for(let b=0;b<m.length;b++){const T=new c.L(m[b],l);T.name=`Worker ${b}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,l){const m=[];for(const b of this.actors)m.push(b.sendAsync({type:n,data:l}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,l){for(const m of this.actors)m.registerMessageHandler(n,l)}unregisterMessageHandler(n){for(const l of this.actors)l.unregisterMessageHandler(n)}}function tr(){return rn||(rn=new qi(Tn(),c.M),rn.registerMessageHandler("GR",(w,n,l)=>c.m(n,l))),rn}function Ri(w,n){const l=c.N();return c.O(l,l,[1,1,0]),c.Q(l,l,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?c.S(l,l,w.calculatePosMatrix(n.toUnwrapped())):l}function Hr(w,n,l,m,b,T,M){var R;const L=function($,J,oe){if($)for(const de of $){const pe=J[de];if(pe&&pe.source===oe&&pe.type==="fill-extrusion")return!0}else for(const de in J){const pe=J[de];if(pe.source===oe&&pe.type==="fill-extrusion")return!0}return!1}((R=b?.layers)!==null&&R!==void 0?R:null,n,w.id),F=T.maxPitchScaleFactor(),B=w.tilesIn(m,F,L);B.sort(bn);const Y=[];for(const $ of B)Y.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(n,l,w.getState(),$.queryGeometry,$.cameraQueryGeometry,$.scale,b,T,F,Ri(T,$.tileID),M?(J,oe)=>M($.tileID,J,oe):void 0)});return function($,J){for(const oe in $)for(const de of $[oe])xn(de,J);return $}(function($){const J={},oe={};for(const de of $){const pe=de.queryResults,ye=de.wrappedTileID,be=oe[ye]=oe[ye]||{};for(const Me in pe){const _e=pe[Me],Ce=be[Me]=be[Me]||{},Re=J[Me]=J[Me]||[];for(const we of _e)Ce[we.featureIndex]||(Ce[we.featureIndex]=!0,Re.push(we))}}return J}(Y),w)}function bn(w,n){const l=w.tileID,m=n.tileID;return l.overscaledZ-m.overscaledZ||l.canonical.y-m.canonical.y||l.wrap-m.wrap||l.canonical.x-m.canonical.x}function xn(w,n){const l=w.feature,m=n.getFeatureState(l.layer["source-layer"],l.id);l.source=l.layer.source,l.layer["source-layer"]&&(l.sourceLayer=l.layer["source-layer"]),l.state=m}function gr(w,n,l){return c._(this,void 0,void 0,function*(){let m=w;if(w.url?m=(yield c.j(n.transformRequest(w.url,"Source"),l)).data:yield H.frameAsync(l),!m)return null;const b=c.U(c.e(m,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(b.vectorLayerIds=m.vector_layers.map(T=>T.id)),b})}class Wn{constructor(n,l){n&&(l?this.setSouthWest(n).setNorthEast(l):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof c.V?new c.V(n.lng,n.lat):c.V.convert(n),this}setSouthWest(n){return this._sw=n instanceof c.V?new c.V(n.lng,n.lat):c.V.convert(n),this}extend(n){const l=this._sw,m=this._ne;let b,T;if(n instanceof c.V)b=n,T=n;else{if(!(n instanceof Wn))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Wn.convert(n)):this.extend(c.V.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(c.V.convert(n)):this;if(b=n._sw,T=n._ne,!b||!T)return this}return l||m?(l.lng=Math.min(b.lng,l.lng),l.lat=Math.min(b.lat,l.lat),m.lng=Math.max(T.lng,m.lng),m.lat=Math.max(T.lat,m.lat)):(this._sw=new c.V(b.lng,b.lat),this._ne=new c.V(T.lng,T.lat)),this}getCenter(){return new c.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.V(this.getWest(),this.getNorth())}getSouthEast(){return new c.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:l,lat:m}=c.V.convert(n);let b=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&b}intersects(n){if((n=Wn.convert(n)).getNorth()<this.getSouth()||n.getSouth()>this.getNorth())return!1;const l=c.W(this.getWest(),-180,180),m=c.W(this.getEast(),-180,180),b=c.W(n.getWest(),-180,180),T=c.W(n.getEast(),-180,180),M=l>m,R=b>T;return!(!M||!R)||(M?T>=l||b<=m:R?m>=b||l<=T:!(b>m||T<l))}static convert(n){return n instanceof Wn?n:n&&new Wn(n)}static fromLngLat(n,l=0){const m=360*l/40075017,b=m/Math.cos(Math.PI/180*n.lat);return new Wn(new c.V(n.lng-b,n.lat-m),new c.V(n.lng+b,n.lat+m))}adjustAntiMeridian(){const n=new c.V(this._sw.lng,this._sw.lat),l=new c.V(this._ne.lng,this._ne.lat);return new Wn(n,n.lng>l.lng?new c.V(l.lng+360,l.lat):l)}}class ba{constructor(n,l,m){this.bounds=Wn.convert(this.validateBounds(n)),this.minzoom=l||0,this.maxzoom=m||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const l=Math.pow(2,n.z),m=Math.floor(c.Y(this.bounds.getWest())*l),b=Math.floor(c.X(this.bounds.getNorth())*l),T=Math.ceil(c.Y(this.bounds.getEast())*l),M=Math.ceil(c.X(this.bounds.getSouth())*l);return n.x>=m&&n.x<T&&n.y>=b&&n.y<M}}class oa extends c.E{constructor(n,l,m,b){if(super(),this.id=n,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.U(l,["url","scheme","tileSize","promoteId","encoding"])),this._options=c.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield gr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),n&&(c.e(this,n),n.bounds&&(this.tileBounds=new ba(n.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,this.fire(new c.k(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(n){return c._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(l,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(n)};m.request.collectResourceTiming=this._collectResourceTiming;let b="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((T,M)=>{n.reloadPromise={resolve:T,reject:M}})}else n.actor=this.dispatcher.getActor(),b="LT";n.abortController=new AbortController;try{const T=yield n.actor.sendAsync({type:b,data:m},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,T)}catch(T){if(delete n.abortController,n.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(n,null)}})}_getOverzoomParameters(n){if(n.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const l=n.tileID.scaledTo(this.maxzoom).canonical,m=l.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:l,overzoomRequest:this.map._requestManager.transformRequest(m,"Tile")}}_afterTileLoadWorkerResponse(n,l){if(l&&l.resourceTiming&&(n.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&n.setExpiryData(l),n.loadVectorData(l,this.map.painter),n.reloadPromise){const m=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(m.resolve).catch(m.reject)}}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class jr extends c.E{constructor(n,l,m,b){super(),this.id=n,this.dispatcher=m,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},l),c.e(this,c.U(l,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,function*(n=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield gr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(c.e(this,l),l.bounds&&(this.tileBounds=new ba(l.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(l){this._tileJSONRequest=null,this._loaded=!0,this.fire(new c.k(l))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return c.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return c._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const m=yield ze.getImage(this.map._requestManager.transformRequest(l,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&n.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const b=this.map.painter.context,T=b.gl,M=m.data;n.texture=this.map.painter.getTileTexture(M.width),n.texture?n.texture.update(M,{useMipmap:!0}):(n.texture=new c.T(b,M,T.RGBA,{useMipmap:!0}),n.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(m){if(delete n.abortController,n.aborted)n.state="unloaded";else if(m)throw n.state="errored",m}})}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class Wr extends jr{constructor(n,l,m,b){super(n,l,m,b),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(n){return c._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(l,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const b=yield ze.getImage(m,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(b&&b.data){const T=b.data;this.map._refreshExpiredTiles&&(b.cacheControl||b.expires)&&n.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const M=c.b(T)&&c.Z()?T:yield this.readImageNow(T),R={type:this.type,uid:n.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const L=yield n.actor.sendAsync({type:"LDT",data:R});n.dem=L,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(b){if(delete n.abortController,n.aborted)n.state="unloaded";else if(b)throw n.state="errored",b}})}readImageNow(n){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.$()){const l=n.width+2,m=n.height+2;try{return new c.R({width:l,height:m},yield c.a0(n,-1,-1,l,m))}catch{}}return H.getImageData(n,1)})}_getNeighboringTiles(n){const l=n.canonical,m=Math.pow(2,l.z),b=(l.x-1+m)%m,T=l.x===0?n.wrap-1:n.wrap,M=(l.x+1+m)%m,R=l.x+1===m?n.wrap+1:n.wrap,L={};return L[new c.a1(n.overscaledZ,T,l.z,b,l.y).key]={backfilled:!1},L[new c.a1(n.overscaledZ,R,l.z,M,l.y).key]={backfilled:!1},l.y>0&&(L[new c.a1(n.overscaledZ,T,l.z,b,l.y-1).key]={backfilled:!1},L[new c.a1(n.overscaledZ,n.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},L[new c.a1(n.overscaledZ,R,l.z,M,l.y-1).key]={backfilled:!1}),l.y+1<m&&(L[new c.a1(n.overscaledZ,T,l.z,b,l.y+1).key]={backfilled:!1},L[new c.a1(n.overscaledZ,n.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},L[new c.a1(n.overscaledZ,R,l.z,M,l.y+1).key]={backfilled:!1}),L}unloadTile(n){return c._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}function xa(w){return w.type==="GeometryCollection"?w.geometries.map(n=>n.coordinates).flat(1/0):w.coordinates.flat(1/0)}function Qa(w){const n=new Wn;let l;switch(w.type){case"FeatureCollection":l=w.features.map(m=>xa(m.geometry)).flat(1/0);break;case"Feature":l=xa(w.geometry);break;default:l=xa(w)}if(l.length==0)return n;for(let m=0;m<l.length-1;m+=2)n.extend([l[m],l[m+1]]);return n}class ki extends c.E{constructor(n,l,m,b){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:l.data},this.actor=m.getActor(),this.setEventedParent(b),this._data=typeof l.data=="string"?{url:l.data}:{geojson:l.data},this._options=c.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId,l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(l.buffer!==void 0?l.buffer:128),tolerance:this._pixelsToTileUnits(l.tolerance!==void 0?l.tolerance:.375),extent:c.a4,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(l.clusterMaxZoom),minPoints:Math.max(2,l.clusterMinPoints||2),extent:c.a4,radius:this._pixelsToTileUnits(l.clusterRadius||50),log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(n){return n*(c.a4/this.tileSize)}_getClusterMaxZoom(n){const l=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${l}"`),l}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n,l){this._data=typeof n=="string"?{url:n}:{geojson:n},this._pendingWorkerUpdate={data:n};const m=this._updateWorkerData();return l?m:this}updateData(n,l){this._pendingWorkerUpdate.diff=c.a5(this._pendingWorkerUpdate.diff,n);const m=this._updateWorkerData();return l?m:this}getData(){return c._(this,void 0,void 0,function*(){const n=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}getBounds(){return c._(this,void 0,void 0,function*(){return Qa(yield this.getData())})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,l,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:l,offset:m}})}_updateWorkerData(){return c._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void c.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:n,diff:l}=this._pendingWorkerUpdate,m=c.e({type:this.type},this.workerOptions);n?(typeof n=="string"?(m.request=this.map._requestManager.transformRequest(H.resolveURL(n),"Source"),m.request.collectResourceTiming=this._collectResourceTiming):m.data=n,this._pendingWorkerUpdate.data=void 0):l&&(m.dataDiff=l,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const b=yield this.actor.sendAsync({type:"LD",data:m});if(this._isUpdatingWorker=!1,this._removed||b.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));b.applyDiff?this._applyDiff(l):this._data={geojson:b.data};let T=null;b.resourceTiming&&b.resourceTiming[this.id]&&(T=b.resourceTiming[this.id].slice(0));const M={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&c.e(M,{resourceTiming:T}),this.fire(new c.l("data",Object.assign(Object.assign({},M),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},M),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(l)})))}catch(b){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(b))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}})}_applyDiff(n){const l=typeof this.promoteId=="string"?this.promoteId:void 0;this._data.url||this._data.updateable||!c.a6(this._data.geojson,l)||(this._data={updateable:c.a7(this._data.geojson,l)}),n&&this._data.updateable?c.a8(this._data.updateable,n,l):c.w("Cannot apply GeoJSONSource#updateData due to internal error")}_getShouldReloadTileOptions(n){if(this._options.cluster||!n||n.removeAll)return;const{add:l=[],update:m=[],remove:b=[]}=n||{},T=new Set([...m.map(M=>M.id),...b]);for(const M of T.values())if(typeof M!="number"&&this.promoteId==null)return void c.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs (e.g. "${M}"). Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...m.map(M=>M.newGeometry),...l.map(M=>M.geometry)].filter(Boolean).map(M=>Qa(M)),prevIds:T}}shouldReloadTile(n,{nextBounds:l,prevIds:m}){if(!n.latestFeatureIndex)return n.state!=="unloaded";const b=n.latestFeatureIndex.loadVTLayers();for(let L=0;L<n.latestFeatureIndex.featureIndexArray.length;L++){const F=n.latestFeatureIndex.featureIndexArray.get(L),B=b[c.a9].feature(F.featureIndex),Y=n.latestFeatureIndex.getId(B,c.a9);if(m.has(Y))return!0}const{buffer:T,extent:M}=this.workerOptions.geojsonVtOptions,R=function({x:L,y:F,z:B},Y=0){const $=c.a2((L-Y)/Math.pow(2,B)),J=c.a3((F+1+Y)/Math.pow(2,B)),oe=c.a2((L+1+Y)/Math.pow(2,B)),de=c.a3((F-Y)/Math.pow(2,B));return new Wn([$,J],[oe,de])}(n.tileID.canonical,T/M);for(const L of l)if(R.intersects(L))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(n){return c._(this,void 0,void 0,function*(){const l=n.actor?"RT":"LT";n.actor=this.actor;const m={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};n.abortController=new AbortController;const b=yield this.actor.sendAsync({type:l,data:m},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(b,this.map.painter,l==="RT")})}abortTile(n){return c._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return c._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Sr extends c.E{constructor(n,l,m,b){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=m,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=l}load(n){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield ze.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,n&&(this.coordinates=n),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new c.k(l))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const l=n.map(c.aa.fromLngLat);var m;return this.tileID=function(b){const T=c.ab.fromPoints(b),M=T.width(),R=T.height(),L=Math.max(M,R),F=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),B=Math.pow(2,F);return new c.ad(F,Math.floor((T.minX+T.maxX)/2*B),Math.floor((T.minY+T.maxY)/2*B))}(l),this.terrainTileRanges=this._getOverlappingTileRanges(l),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=l.map(b=>this.tileID.getTilePoint(b)._round()),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,l=n.gl;this.texture||(this.texture=new c.T(n,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let m=!1;for(const b in this.tiles){const T=this.tiles[b];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,m=!0)}m&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:l,minY:m,maxX:b,maxY:T}=c.ab.fromPoints(n),M={};for(let R=0;R<=c.ac;R++){const L=Math.pow(2,R),F=Math.floor(l*L),B=Math.floor(m*L),Y=Math.floor(b*L),$=Math.floor(T*L);M[R]={minTileX:F,minTileY:B,maxTileX:Y,maxTileY:$}}return M}}class Cn extends Sr{constructor(n,l,m,b){super(n,l,m,b),this.roundZoom=!0,this.type="video",this.options=l}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const l of n.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield c.ae(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new c.k(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const l=this.video.seekable;n<l.start(0)||n>l.end(0)?this.fire(new c.k(new c.af(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,l=n.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(n,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let m=!1;for(const b in this.tiles){const T=this.tiles[b];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,m=!0)}m&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class sa extends Sr{constructor(n,l,m,b){super(n,l,m,b),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(M=>typeof M!="number"))||this.fire(new c.k(new c.af(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.af(`sources.${n}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new c.k(new c.af(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.af(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.af(`sources.${n}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,m=l.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.T(l,this.canvas,m.RGBA,{premultiply:!0});let b=!1;for(const T in this.tiles){const M=this.tiles[T];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,b=!0)}b&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const la={},Au=w=>{switch(w){case"geojson":return ki;case"image":return Sr;case"raster":return jr;case"raster-dem":return Wr;case"vector":return oa;case"video":return Cn;case"canvas":return sa}return la[w]},il="RTLPluginLoaded";class Mu extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=tr()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return c._(this,arguments,void 0,function*(l,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=H.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return c._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(il))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Dc=null;function wa(){return Dc||(Dc=new Mu),Dc}var zi,Ie;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(zi||(zi={})),function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"}(Ie||(Ie={}));class K{constructor(n,l){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=n,this.uid=c.ag(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(n){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(n||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:n,fadingDirection:l,fadingParentID:m,fadeEndTime:b}){this.resetFadeLogic(),this.fadingRole=n,this.fadingDirection=l,this.fadingParentID=m,this.fadeEndTime=b}setSelfFadeLogic(n){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=n}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=ae(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,l,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData,this.latestFeatureIndex.encoding=n.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(b,T){const M={};if(!T)return M;for(const R of b){const L=R.layerIds.map(F=>T.getLayer(F)).filter(Boolean);if(L.length!==0){R.layers=L,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(F=>L.filter(B=>B.id===F)[0]));for(const F of L)M[F.id]=R}}return M}(n.buckets,l?.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const T=this.buckets[b];if(T instanceof c.ai){if(this.hasSymbolBuckets=!0,!m)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const T=this.buckets[b];if(T instanceof c.ai&&T.hasRTLText){this.hasRTLText=!0,wa().lazyLoad();break}}this.queryPadding=0;for(const b in this.buckets){const T=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(b).queryRadius(T))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),this.dashPositions=n.dashPositions}else this.collisionBoxArray=new c.ah}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const m in this.buckets){const b=this.buckets[m];b.uploadPending()&&b.upload(n)}const l=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(n,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(n,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,l,m,b,T,M,R,L,F,B,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:T,scale:M,tileSize:this.tileSize,pixelPosMatrix:B,transform:L,params:R,queryPadding:this.queryPadding*F,getElevation:Y},n,l,m):{}}querySourceFeatures(n,l){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const b=m.loadVTLayers(),T=l&&l.sourceLayer?l.sourceLayer:"",M=b[c.a9]||b[T];if(!M)return;const R=c.aj(l?.filter,l?.globalState),{z:L,x:F,y:B}=this.tileID.canonical,Y={z:L,x:F,y:B};for(let $=0;$<M.length;$++){const J=M.feature($);if(R.needGeometry){const pe=c.ak(J,!0);if(!R.filter(new c.H(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!R.filter(new c.H(this.tileID.overscaledZ),J))continue;const oe=m.getId(J,T),de=new c.al(J,L,F,B,oe);de.tile=Y,n.push(de)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const l=this.expirationTime;if(n.cacheControl){const m=c.am(n.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const m=Date.now();let b=!1;if(this.expirationTime>m)b=!1;else if(l)if(this.expirationTime<l)b=!0;else{const T=this.expirationTime-l;T?this.expirationTime=m+Math.max(T,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!l.style.hasLayer(b))continue;const T=this.buckets[b],M=T.layers[0].sourceLayer||c.a9,R=m[M],L=n[M];if(!R||!L||Object.keys(L).length===0)continue;T.update(L,R,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const F=l&&l.style&&l.style.getLayer(b);F&&(this.queryPadding=Math.max(this.queryPadding,F.queryRadius(T)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ae()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(n){this.symbolFadeHoldUntil=ae()+n}setDependencies(n,l){const m={};for(const b of l)m[b]=!0;this.dependencies[n]=m}hasDependency(n,l){for(const m of n){const b=this.dependencies[m];if(b){for(const T of l)if(b[T])return!0}}return!1}}class te{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,l,m){const b=String(l);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][b]=this.stateChanges[n][b]||{},c.e(this.stateChanges[n][b],m),this.deletedStates[n]===null){this.deletedStates[n]={};for(const T in this.state[n])T!==b&&(this.deletedStates[n][T]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][b]===null){this.deletedStates[n][b]={};for(const T in this.state[n][b])m[T]||(this.deletedStates[n][b][T]=null)}else for(const T in m)this.deletedStates[n]&&this.deletedStates[n][b]&&this.deletedStates[n][b][T]===null&&delete this.deletedStates[n][b][T]}removeFeatureState(n,l,m){if(this.deletedStates[n]===null)return;const b=String(l);if(this.deletedStates[n]=this.deletedStates[n]||{},m&&l!==void 0)this.deletedStates[n][b]!==null&&(this.deletedStates[n][b]=this.deletedStates[n][b]||{},this.deletedStates[n][b][m]=null);else if(l!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][b])for(m in this.deletedStates[n][b]={},this.stateChanges[n][b])this.deletedStates[n][b][m]=null;else this.deletedStates[n][b]=null;else this.deletedStates[n]=null}getState(n,l){const m=String(l),b=c.e({},(this.state[n]||{})[m],(this.stateChanges[n]||{})[m]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const T=this.deletedStates[n][l];if(T===null)return{};for(const M in T)delete b[M]}return b}initializeTileState(n,l){n.setFeatureState(this.state,l)}coalesceChanges(n,l){const m={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const T={};for(const M in this.stateChanges[b])this.state[b][M]||(this.state[b][M]={}),c.e(this.state[b][M],this.stateChanges[b][M]),T[M]=this.state[b][M];m[b]=T}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const T={};if(this.deletedStates[b]===null)for(const M in this.state[b])T[M]={},this.state[b][M]={};else for(const M in this.deletedStates[b]){if(this.deletedStates[b][M]===null)this.state[b][M]={};else for(const R of Object.keys(this.deletedStates[b][M]))delete this.state[b][M][R];T[M]=this.state[b][M]}m[b]=m[b]||{},c.e(m[b],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const b in n)n[b].setFeatureState(m,l)}}const le=89.25;function xe(w,n){const l=c.an(n.lat,-c.ao,c.ao);return new c.P(c.Y(n.lng)*w,c.X(l)*w)}function Te(w,n){return new c.aa(n.x/w,n.y/w).toLngLat()}function Ue(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(c.ap(90-w.pitch)),Math.tan(c.ap(le-w.pitch)))}function me(w,n){const l=w.canonical,m=n/c.aq(l.z),b=l.x+Math.pow(2,l.z)*w.wrap,T=c.ar(new Float64Array(16));return c.O(T,T,[b*m,l.y*m,0]),c.Q(T,T,[m/c.a4,m/c.a4,1]),T}function je(w,n,l,m,b){const T=c.aa.fromLngLat(w,n),M=b*c.as(1,w.lat),R=M*Math.cos(c.ap(l)),L=Math.sqrt(M*M-R*R),F=L*Math.sin(c.ap(-m)),B=L*Math.cos(c.ap(-m));return new c.aa(T.x+F,T.y+B,T.z+R)}function Qe(w,n,l){const m=n.intersectsFrustum(w);if(!l||m===0)return m;const b=n.intersectsPlane(l);return b===0?0:m===2&&b===2?2:1}function Je(w,n,l){let m=0;const b=(l-n)/10;for(let T=0;T<10;T++)m+=b*Math.pow(Math.cos(n+(T+.5)/10*(l-n)),w);return m}function it(w,n){return function(l,m,b,T,M){const R=2*((w-1)/c.at(Math.cos(c.ap(le-M))/Math.cos(c.ap(le)))-1),L=Math.acos(b/T),F=2*Je(R-1,0,c.ap(M/2)),B=Math.min(c.ap(le),L+c.ap(M/2)),Y=Je(R-1,Math.min(B,L-c.ap(M/2)),B),$=Math.atan(m/b),J=Math.hypot(m,b);let oe=l;return oe+=c.at(T/J/Math.max(.5,Math.cos(c.ap(M/2)))),oe+=R*c.at(Math.cos($))/2,oe-=c.at(Math.max(1,Y/F/n))/2,oe}}const Lt=it(9.314,3);function Yt(w,n){const l=(n.roundZoom?Math.round:Math.floor)(w.zoom+c.at(w.tileSize/n.tileSize));return Math.max(0,l)}function on(w,n){const l=w.getCameraFrustum(),m=w.getClippingPlane(),b=w.screenPointToMercatorCoordinate(w.getCameraPoint()),T=c.aa.fromLngLat(w.center,w.elevation);b.z=T.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const M=w.getCoveringTilesDetailsProvider(),R=M.allowVariableZoom(w,n),L=Yt(w,n),F=n.minzoom||0,B=n.maxzoom!==void 0?n.maxzoom:w.maxZoom,Y=Math.min(Math.max(0,L),B),$=Math.pow(2,Y),J=[$*b.x,$*b.y,0],oe=[$*T.x,$*T.y,0],de=Math.hypot(T.x-b.x,T.y-b.y),pe=Math.abs(T.z-b.z),ye=Math.hypot(de,pe),be=Ce=>({zoom:0,x:0,y:0,wrap:Ce,fullyVisible:!1}),Me=[],_e=[];if(w.renderWorldCopies&&M.allowWorldCopies())for(let Ce=1;Ce<=3;Ce++)Me.push(be(-Ce)),Me.push(be(Ce));for(Me.push(be(0));Me.length>0;){const Ce=Me.pop(),Re=Ce.x,we=Ce.y;let Be=Ce.fullyVisible;const We={x:Re,y:we,z:Ce.zoom},$e=M.getTileBoundingVolume(We,Ce.wrap,w.elevation,n);if(!Be){const wt=Qe(l,$e,m);if(wt===0)continue;Be=wt===2}const Ye=M.distanceToTile2d(b.x,b.y,We,$e);let qe=L;R&&(qe=(n.calculateTileZoom||Lt)(w.zoom+c.at(w.tileSize/n.tileSize),Ye,pe,ye,w.fov)),qe=(n.roundZoom?Math.round:Math.floor)(qe),qe=Math.max(0,qe);const xt=Math.min(qe,B);if(Ce.wrap=M.getWrap(T,We,Ce.wrap),Ce.zoom>=xt){if(Ce.zoom<F)continue;const wt=Y-Ce.zoom,ut=J[0]-.5-(Re<<wt),Pt=J[1]-.5-(we<<wt),cn=n.reparseOverscaled?Math.max(Ce.zoom,qe):Ce.zoom;_e.push({tileID:new c.a1(Ce.zoom===B?cn:Ce.zoom,Ce.wrap,Ce.zoom,Re,we),distanceSq:c.au([oe[0]-.5-Re,oe[1]-.5-we]),tileDistanceToCamera:Math.sqrt(ut*ut+Pt*Pt)})}else for(let wt=0;wt<4;wt++)Me.push({zoom:Ce.zoom+1,x:(Re<<1)+wt%2,y:(we<<1)+(wt>>1),wrap:Ce.wrap,fullyVisible:Be})}return _e.sort((Ce,Re)=>Ce.distanceSq-Re.distanceSq).map(Ce=>Ce.tileID)}const Hi=c.ab.fromPoints([new c.P(0,0),new c.P(c.a4,c.a4)]);class Sn extends c.E{constructor(n,l,m){super(),this.id=n,this.dispatcher=m,this.on("data",b=>this._dataHandler(b)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((b,T,M,R)=>{const L=new(Au(T.type))(b,T,M,R);if(L.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${L.id}`);return L})(n,l,m,this),this._tiles={},this._cache=new c.av(0,b=>this._unloadTile(b)),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new te,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const l=this._tiles[n];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,l,m){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,l,m)}catch(b){n.state="errored",b.status!==404?this._source.fire(new c.k(b,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new c.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const m=this._tiles[l];m.upload(n),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Yn).map(n=>n.key)}getRenderableIds(n){const l=[];for(const m in this._tiles)this._isIdRenderable(m,n)&&l.push(this._tiles[m]);return n?l.sort((m,b)=>{const T=m.tileID,M=b.tileID,R=new c.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),L=new c.P(M.canonical.x,M.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-M.overscaledZ||L.y-R.y||L.x-R.x}).map(m=>m.tileID.key):l.map(m=>m.tileID).sort(Yn).map(m=>m.key)}hasRenderableParent(n){const l=n.overscaledZ-1;if(l>=this._source.minzoom){const m=this.getLoadedTile(n.scaledTo(l));if(m)return this._isIdRenderable(m.tileID.key)}return!1}_isIdRenderable(n,l=!1){var m;return(m=this._tiles[n])===null||m===void 0?void 0:m.isRenderable(l)}reload(n,l=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const m in this._tiles)l&&this._source.shouldReloadTile&&!this._source.shouldReloadTile(this._tiles[m],l)||(n?this._reloadTile(m,"expired"):this._tiles[m].state!=="errored"&&this._reloadTile(m,"reloading"))}}_reloadTile(n,l){return c._(this,void 0,void 0,function*(){const m=this._tiles[n];m&&(m.state!=="loading"&&(m.state=l),yield this._loadTile(m,n,l))})}_tileLoaded(n,l,m){n.timeAdded=ae(),n.selfFading&&(n.fadeEndTime=n.timeAdded+this._rasterFadeDuration),m==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(l,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const l=this.getRenderableIds();for(let b=0;b<l.length;b++){const T=l[b];if(n.neighboringTiles&&n.neighboringTiles[T]){const M=this.getTileByID(T);m(n,M),m(M,n)}}function m(b,T){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let M=T.tileID.canonical.x-b.tileID.canonical.x;const R=T.tileID.canonical.y-b.tileID.canonical.y,L=Math.pow(2,b.tileID.canonical.z),F=T.tileID.key;M===0&&R===0||Math.abs(R)>1||(Math.abs(M)>1&&(Math.abs(M+L)===1?M+=L:Math.abs(M-L)===1&&(M-=L)),T.dem&&b.dem&&(b.dem.backfillBorder(T.dem,M,R),b.neighboringTiles&&b.neighboringTiles[F]&&(b.neighboringTiles[F].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,l){const m=this._getLoadedDescendents(l),b=new Set;for(const T of l){const M=m[T.key];if(!M?.length){b.add(T);continue}const R=T.overscaledZ+Sn.maxOverzooming,L=M.filter(Y=>Y.tileID.overscaledZ<=R);if(!L.length){b.add(T);continue}const F=Math.min(...L.map(Y=>Y.tileID.overscaledZ)),B=L.filter(Y=>Y.tileID.overscaledZ===F).map(Y=>Y.tileID);for(const Y of B)n[Y.key]=Y;this._areDescendentsComplete(B,F,T.overscaledZ)||b.add(T)}return b}_getLoadedDescendents(n){var l;const m={};for(const b in this._tiles){const T=this._tiles[b];if(T.hasData())for(const M of n)T.tileID.isChildOf(M)&&(m[l=M.key]||(m[l]=[])).push(T)}return m}_areDescendentsComplete(n,l,m){return n.length===1&&n[0].isOverscaled()?n[0].overscaledZ===l:Math.pow(4,l-m)===n.length}getLoadedTile(n){const l=this._tiles[n.key];return l?.hasData()?l:null}updateCacheSize(n){const l=Math.ceil(n.width/this._source.tileSize)+1,m=Math.ceil(n.height/this._source.tileSize)+1,b=Math.floor(l*m*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(T)}handleWrapJump(n){const l=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,l){const m={};for(const b in this._tiles){const T=this._tiles[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+l),m[T.tileID.key]=T}this._tiles=m,this._resetTileReloadTimers()}}update(n,l){if(!this._sourceLoaded||this._paused)return;let m;this.transform=n,this.terrain=l,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?m=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new c.a1(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y)):(m=on(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?n.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter(L=>this._source.hasTile(L)))):m=[],this.usedForTerrain&&(m=this._addTerrainIdealTiles(m));const b=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,b&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=Yt(n,this._source),M=this._updateRetainedTiles(m,T),R=hi(this._source.type);R&&this._rasterFadeDuration>0&&!l&&this._updateFadingTiles(m,M),R?this._cleanUpRasterTiles(M):this._cleanUpVectorTiles(M)}_cleanUpRasterTiles(n){for(const l in this._tiles)n[l]||this._removeTile(l)}_cleanUpVectorTiles(n){for(const l in this._tiles){const m=this._tiles[l];n[l]?m.clearSymbolFadeHold():m.hasSymbolBuckets?m.holdingForSymbolFade()?m.symbolFadeFinished()&&this._removeTile(l):m.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(l)}}_addTerrainIdealTiles(n){const l=[];for(const m of n)if(m.canonical.z>this._source.minzoom){const b=m.scaledTo(m.canonical.z-1);l.push(b);const T=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));l.push(T)}return n.concat(l)}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForSymbolFade()&&this._removeTile(n)}_updateRetainedTiles(n,l){var m;const b=new Set;for(const F of n)this._addTile(F).hasData()||b.add(F);const T=n.reduce((F,B)=>(F[B.key]=B,F),{}),M=this._retainLoadedChildren(T,b),R={},L=Math.max(l-Sn.maxUnderzooming,this._source.minzoom);for(const F of M){let B=this._tiles[F.key],Y=B?.wasRequested();for(let $=F.overscaledZ-1;$>=L;--$){const J=F.scaledTo($);if(R[J.key])break;if(R[J.key]=!0,B=this.getTile(J),!B&&Y&&(B=this._addTile(J)),B){const oe=B.hasData();if((oe||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||Y)&&(T[J.key]=J),Y=B.wasRequested(),oe)break}}}return T}_updateFadingTiles(n,l){const m=ae(),b=c.aw(n);for(const T of n){const M=this._tiles[T.key];M.fadingDirection!==Ie.Departing&&M.fadeOpacity!==0||M.resetFadeLogic(),this._updateFadingAncestor(M,l,m)||this._updateFadingDescendents(M,l,m)||this._updateFadingEdge(M,b,m)||M.resetFadeLogic()}}_updateFadingAncestor(n,l,m){if(!n.hasData())return!1;const{tileID:b,fadingRole:T,fadingDirection:M,fadingParentID:R}=n;if(T===zi.Base&&M===Ie.Incoming&&R)return l[R.key]=R,!0;const L=Math.max(b.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let F=b.overscaledZ-1;F>=L;F--){const B=b.scaledTo(F),Y=this.getLoadedTile(B);if(Y)return n.setCrossFadeLogic({fadingRole:zi.Base,fadingDirection:Ie.Incoming,fadingParentID:Y.tileID,fadeEndTime:m+this._rasterFadeDuration}),Y.setCrossFadeLogic({fadingRole:zi.Parent,fadingDirection:Ie.Departing,fadeEndTime:m+this._rasterFadeDuration}),l[B.key]=B,!0}return!1}_updateFadingDescendents(n,l,m){if(!n.hasData())return!1;const b=n.tileID.children(this._source.maxzoom);let T=this._updateFadingChildren(n,b,l,m);if(T)return!0;for(const M of b){const R=M.children(this._source.maxzoom);this._updateFadingChildren(n,R,l,m)&&(T=!0)}return T}_updateFadingChildren(n,l,m,b){if(l[0].overscaledZ>=this._source.maxzoom)return!1;let T=!1;for(const M of l){const R=this.getLoadedTile(M);if(!R)continue;const{fadingRole:L,fadingDirection:F,fadingParentID:B}=R;L===zi.Base&&F===Ie.Departing&&B||(R.setCrossFadeLogic({fadingRole:zi.Base,fadingDirection:Ie.Departing,fadingParentID:n.tileID,fadeEndTime:b+this._rasterFadeDuration}),n.setCrossFadeLogic({fadingRole:zi.Parent,fadingDirection:Ie.Incoming,fadeEndTime:b+this._rasterFadeDuration})),m[M.key]=M,T=!0}return T}_updateFadingEdge(n,l,m){const b=n.tileID;return!!n.selfFading||!n.hasData()&&!!l.has(b)&&(n.setSelfFadeLogic(m+this._rasterFadeDuration),!0)}_addTile(n){let l=this._tiles[n.key];if(l)return l;l=this._cache.getAndRemove(n),l&&(l.resetFadeLogic(),this._setTileReloadTimer(n.key,l),l.tileID=n,this._state.initializeTileState(l,this.map?this.map.painter:null));const m=l;return l||(l=new K(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(l,n.key,l.state)),l.uses++,this._tiles[n.key]=l,m||this._source.fire(new c.l("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(n,l){this._clearTileReloadTimer(n);const m=l.getExpiryTimeout();m&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},m))}_clearTileReloadTimer(n){const l=this._timers[n];l&&(clearTimeout(l),delete this._timers[n])}_resetTileReloadTimers(){for(const n in this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(const n in this._tiles)this._setTileReloadTimer(n,this._tiles[n])}refreshTiles(n){for(const l in this._tiles)(this._isIdRenderable(l)||this._tiles[l].state=="errored")&&n.some(m=>m.equals(this._tiles[l].tileID.canonical))&&this._reloadTile(l,"expired")}_removeTile(n){const l=this._tiles[n];l&&(l.uses--,delete this._tiles[n],this._clearTileReloadTimer(n),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(n){n.dataType==="source"&&(n.sourceDataType!=="metadata"?n.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(n.sourceDataChanged,n.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,l,m){const b=[],T=this.transform;if(!T)return b;const M=T.getCoveringTilesDetailsProvider().allowWorldCopies(),R=m?T.getCameraQueryGeometry(n):n,L=J=>T.screenPointToMercatorCoordinate(J,this.terrain),F=this.transformBbox(n,L,!M),B=this.transformBbox(R,L,!M),Y=this.getIds(),$=c.ab.fromPoints(B);for(let J=0;J<Y.length;J++){const oe=this._tiles[Y[J]];if(oe.holdingForSymbolFade())continue;const de=M?[oe.tileID]:[oe.tileID.unwrapTo(-1),oe.tileID.unwrapTo(0)],pe=Math.pow(2,T.zoom-oe.tileID.overscaledZ),ye=l*oe.queryPadding*c.a4/oe.tileSize/pe;for(const be of de){const Me=$.map(_e=>be.getTilePoint(new c.aa(_e.x,_e.y)));if(Me.expandBy(ye),Me.intersects(Hi)){const _e=F.map(Re=>be.getTilePoint(Re)),Ce=B.map(Re=>be.getTilePoint(Re));b.push({tile:oe,tileID:M?be:be.unwrapTo(0),queryGeometry:_e,cameraQueryGeometry:Ce,scale:pe})}}}return b}transformBbox(n,l,m){let b=n.map(l);if(m){const T=c.ab.fromPoints(n);T.shrinkBy(.001*Math.min(T.width(),T.height()));const M=T.map(l);c.ab.fromPoints(b).covers(M)||(b=b.map(R=>R.x>.5?new c.aa(R.x-1,R.y,R.z):R))}return b}getVisibleCoordinates(n){const l=this.getRenderableIds(n).map(m=>this._tiles[m].tileID);return this.transform&&this.transform.populateCache(l),l}hasTransition(){if(this._source.hasTransition())return!0;if(hi(this._source.type)&&this._rasterFadeDuration>0){const n=ae();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=n)return!0}return!1}setRasterFadeDuration(n){this._rasterFadeDuration=n}setFeatureState(n,l,m){this._state.updateState(n=n||c.a9,l,m)}removeFeatureState(n,l,m){this._state.removeFeatureState(n=n||c.a9,l,m)}getFeatureState(n,l){return this._state.getState(n=n||c.a9,l)}setDependencies(n,l,m){const b=this._tiles[n];b&&b.setDependencies(l,m)}reloadTilesForDependencies(n,l){for(const m in this._tiles)this._tiles[m].hasDependency(n,l)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(n,l))}}function Yn(w,n){const l=Math.abs(2*w.wrap)-+(w.wrap<0),m=Math.abs(2*n.wrap)-+(n.wrap<0);return w.overscaledZ-n.overscaledZ||m-l||n.canonical.y-w.canonical.y||n.canonical.x-w.canonical.x}function hi(w){return w==="raster"||w==="image"||w==="video"}Sn.maxUnderzooming=10,Sn.maxOverzooming=3;class vt{constructor(n,l){this.reset(n,l)}reset(n,l){this.points=n||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.an(n,0,1);let l=1,m=this._distances[l];const b=n*this.paddedLength+this.padding;for(;m<b&&l<this._distances.length;)m=this._distances[++l];const T=l-1,M=this._distances[T],R=m-M,L=R>0?(b-M)/R:0;return this.points[T].mult(1-L).add(this.points[l].mult(L))}}function di(w,n){let l=!0;return w==="always"||w!=="never"&&n!=="never"||(l=!1),l}class fi{constructor(n,l,m){const b=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(n/m),this.yCellCount=Math.ceil(l/m);for(let M=0;M<this.xCellCount*this.yCellCount;M++)b.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=l,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,l,m,b,T){this._forEachCell(l,m,b,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(l),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(T)}insertCircle(n,l,m,b){this._forEachCell(l-b,m-b,l+b,m+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(l),this.circles.push(m),this.circles.push(b)}_insertBoxCell(n,l,m,b,T,M){this.boxCells[T].push(M)}_insertCircleCell(n,l,m,b,T,M){this.circleCells[T].push(M)}_query(n,l,m,b,T,M,R){if(m<0||n>this.width||b<0||l>this.height)return[];const L=[];if(n<=0&&l<=0&&this.width<=m&&this.height<=b){if(T)return[{key:null,x1:n,y1:l,x2:m,y2:b}];for(let F=0;F<this.boxKeys.length;F++)L.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){const B=this.circles[3*F],Y=this.circles[3*F+1],$=this.circles[3*F+2];L.push({key:this.circleKeys[F],x1:B-$,y1:Y-$,x2:B+$,y2:Y+$})}}else this._forEachCell(n,l,m,b,this._queryCell,L,{hitTest:T,overlapMode:M,seenUids:{box:{},circle:{}}},R);return L}query(n,l,m,b){return this._query(n,l,m,b,!1,null)}hitTest(n,l,m,b,T,M){return this._query(n,l,m,b,!0,T,M).length>0}hitTestCircle(n,l,m,b,T){const M=n-m,R=n+m,L=l-m,F=l+m;if(R<0||M>this.width||F<0||L>this.height)return!1;const B=[];return this._forEachCell(M,L,R,F,this._queryCellCircle,B,{hitTest:!0,overlapMode:b,circle:{x:n,y:l,radius:m},seenUids:{box:{},circle:{}}},T),B.length>0}_queryCell(n,l,m,b,T,M,R,L){const{seenUids:F,hitTest:B,overlapMode:Y}=R,$=this.boxCells[T];if($!==null){const oe=this.bboxes;for(const de of $)if(!F.box[de]){F.box[de]=!0;const pe=4*de,ye=this.boxKeys[de];if(n<=oe[pe+2]&&l<=oe[pe+3]&&m>=oe[pe+0]&&b>=oe[pe+1]&&(!L||L(ye))&&(!B||!di(Y,ye.overlapMode))&&(M.push({key:ye,x1:oe[pe],y1:oe[pe+1],x2:oe[pe+2],y2:oe[pe+3]}),B))return!0}}const J=this.circleCells[T];if(J!==null){const oe=this.circles;for(const de of J)if(!F.circle[de]){F.circle[de]=!0;const pe=3*de,ye=this.circleKeys[de];if(this._circleAndRectCollide(oe[pe],oe[pe+1],oe[pe+2],n,l,m,b)&&(!L||L(ye))&&(!B||!di(Y,ye.overlapMode))){const be=oe[pe],Me=oe[pe+1],_e=oe[pe+2];if(M.push({key:ye,x1:be-_e,y1:Me-_e,x2:be+_e,y2:Me+_e}),B)return!0}}}return!1}_queryCellCircle(n,l,m,b,T,M,R,L){const{circle:F,seenUids:B,overlapMode:Y}=R,$=this.boxCells[T];if($!==null){const oe=this.bboxes;for(const de of $)if(!B.box[de]){B.box[de]=!0;const pe=4*de,ye=this.boxKeys[de];if(this._circleAndRectCollide(F.x,F.y,F.radius,oe[pe+0],oe[pe+1],oe[pe+2],oe[pe+3])&&(!L||L(ye))&&!di(Y,ye.overlapMode))return M.push(!0),!0}}const J=this.circleCells[T];if(J!==null){const oe=this.circles;for(const de of J)if(!B.circle[de]){B.circle[de]=!0;const pe=3*de,ye=this.circleKeys[de];if(this._circlesCollide(oe[pe],oe[pe+1],oe[pe+2],F.x,F.y,F.radius)&&(!L||L(ye))&&!di(Y,ye.overlapMode))return M.push(!0),!0}}}_forEachCell(n,l,m,b,T,M,R,L){const F=this._convertToXCellCoord(n),B=this._convertToYCellCoord(l),Y=this._convertToXCellCoord(m),$=this._convertToYCellCoord(b);for(let J=F;J<=Y;J++)for(let oe=B;oe<=$;oe++)if(T.call(this,n,l,m,b,this.xCellCount*oe+J,M,R,L))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,l,m,b,T,M){const R=b-n,L=T-l,F=m+M;return F*F>R*R+L*L}_circleAndRectCollide(n,l,m,b,T,M,R){const L=(M-b)/2,F=Math.abs(n-(b+L));if(F>L+m)return!1;const B=(R-T)/2,Y=Math.abs(l-(T+B));if(Y>B+m)return!1;if(F<=L||Y<=B)return!0;const $=F-L,J=Y-B;return $*$+J*J<=m*m}}function lr(w,n,l){const m=c.N();if(!w){const{vecSouth:Y,vecEast:$}=dt(n),J=D();J[0]=$[0],J[1]=$[1],J[2]=Y[0],J[3]=Y[1],b=J,(B=(M=(T=J)[0])*(F=T[3])-(L=T[2])*(R=T[1]))&&(b[0]=F*(B=1/B),b[1]=-R*B,b[2]=-L*B,b[3]=M*B),m[0]=J[0],m[1]=J[1],m[4]=J[2],m[5]=J[3]}var b,T,M,R,L,F,B;return c.Q(m,m,[1/l,1/l,1]),m}function qn(w,n,l,m){if(w){const b=c.N();if(!n){const{vecSouth:T,vecEast:M}=dt(l);b[0]=M[0],b[1]=M[1],b[4]=T[0],b[5]=T[1]}return c.Q(b,b,[m,m,1]),b}return l.pixelsToClipSpaceMatrix}function dt(w){const n=Math.cos(w.rollInRadians),l=Math.sin(w.rollInRadians),m=Math.cos(w.pitchInRadians),b=Math.cos(w.bearingInRadians),T=Math.sin(w.bearingInRadians),M=c.aB();M[0]=-b*m*l-T*n,M[1]=-T*m*l+b*n;const R=c.aC(M);R<1e-9?c.aD(M):c.aE(M,M,1/R);const L=c.aB();L[0]=b*m*n-T*l,L[1]=T*m*n+b*l;const F=c.aC(L);return F<1e-9?c.aD(L):c.aE(L,L,1/F),{vecEast:L,vecSouth:M}}function kt(w,n,l,m){let b;m?(b=[w,n,m(w,n),1],c.aG(b,b,l)):(b=[w,n,0,1],kh(b,b,l));const T=b[3];return{point:new c.P(b[0]/T,b[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function qt(w,n){return .5+w/n*.5}function ca(w,n){return w.x>=-n[0]&&w.x<=n[0]&&w.y>=-n[1]&&w.y<=n[1]}function Ic(w,n,l,m,b,T,M,R,L,F,B,Y,$){const J=l?w.textSizeData:w.iconSizeData,oe=c.ax(J,n.transform.zoom),de=[256/n.width*2+1,256/n.height*2+1],pe=l?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;pe.clear();const ye=w.lineVertexArray,be=l?w.text.placedSymbolArray:w.icon.placedSymbolArray,Me=n.transform.width/n.transform.height;let _e=!1;for(let Ce=0;Ce<be.length;Ce++){const Re=be.get(Ce);if(Re.hidden||Re.writingMode===c.ay.vertical&&!_e){Ta(Re.numGlyphs,pe);continue}_e=!1;const we=new c.P(Re.anchorX,Re.anchorY),Be={getElevation:$,pitchedLabelPlaneMatrix:m,lineVertexArray:ye,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:we,unwrappedTileID:L,width:F,height:B,translation:Y},We=Fo(Re.anchorX,Re.anchorY,Be);if(!ca(We.point,de)){Ta(Re.numGlyphs,pe);continue}const $e=qt(n.transform.cameraToCenterDistance,We.signedDistanceFromCamera),Ye=c.az(J,oe,Re),qe=T?Ye*n.transform.getPitchedTextCorrection(Re.anchorX,Re.anchorY,L)/$e:Ye*$e,xt=Ka({projectionContext:Be,pitchedLabelPlaneMatrixInverse:b,symbol:Re,fontSize:qe,flip:!1,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Me,rotateToLine:R});_e=xt.useVertical,(xt.notEnoughRoom||_e||xt.needsFlipping&&Ka({projectionContext:Be,pitchedLabelPlaneMatrixInverse:b,symbol:Re,fontSize:qe,flip:!0,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Me,rotateToLine:R}).notEnoughRoom)&&Ta(Re.numGlyphs,pe)}l?w.text.dynamicLayoutVertexBuffer.updateData(pe):w.icon.dynamicLayoutVertexBuffer.updateData(pe)}function Br(w,n,l,m,b,T,M,R){const L=T.glyphStartIndex+T.numGlyphs,F=T.lineStartIndex,B=T.lineStartIndex+T.lineLength,Y=n.getoffsetX(T.glyphStartIndex),$=n.getoffsetX(L-1),J=pi(w*Y,l,m,b,T.segment,F,B,R,M);if(!J)return null;const oe=pi(w*$,l,m,b,T.segment,F,B,R,M);return oe?R.projectionCache.anyProjectionOccluded?null:{first:J,last:oe}:null}function tn(w,n,l,m){return w===c.ay.horizontal&&Math.abs(l.y-n.y)>Math.abs(l.x-n.x)*m?{useVertical:!0}:(w===c.ay.vertical?n.y<l.y:n.x>l.x)?{needsFlipping:!0}:null}function Ka(w){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:l,symbol:m,fontSize:b,flip:T,keepUpright:M,glyphOffsetArray:R,dynamicLayoutVertexArray:L,aspectRatio:F,rotateToLine:B}=w,Y=b/24,$=m.lineOffsetX*Y,J=m.lineOffsetY*Y;let oe;if(m.numGlyphs>1){const de=m.glyphStartIndex+m.numGlyphs,pe=m.lineStartIndex,ye=m.lineStartIndex+m.lineLength,be=Br(Y,R,$,J,T,m,B,n);if(!be)return{notEnoughRoom:!0};const Me=zo(be.first.point.x,be.first.point.y,n,l),_e=zo(be.last.point.x,be.last.point.y,n,l);if(M&&!T){const Ce=tn(m.writingMode,Me,_e,F);if(Ce)return Ce}oe=[be.first];for(let Ce=m.glyphStartIndex+1;Ce<de-1;Ce++){const Re=pi(Y*R.getoffsetX(Ce),$,J,T,m.segment,pe,ye,n,B);if(!Re)return{notEnoughRoom:!0};oe.push(Re)}oe.push(be.last)}else{if(M&&!T){const pe=ua(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,ye=m.lineStartIndex+m.segment+1,be=new c.P(n.lineVertexArray.getx(ye),n.lineVertexArray.gety(ye)),Me=ua(be.x,be.y,n),_e=Me.signedDistanceFromCamera>0?Me.point:Ul(n.tileAnchorPoint,be,pe,1,n),Ce=zo(pe.x,pe.y,n,l),Re=zo(_e.x,_e.y,n,l),we=tn(m.writingMode,Ce,Re,F);if(we)return we}const de=pi(Y*R.getoffsetX(m.glyphStartIndex),$,J,T,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,n,B);if(!de||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};oe=[de]}for(const de of oe)c.aF(L,de.point,de.angle);return{}}function Ul(w,n,l,m,b){const T=w.add(w.sub(n)._unit()),M=ua(T.x,T.y,b).point,R=l.sub(M);return l.add(R._mult(m/R.mag()))}function Po(w,n,l){const m=n.projectionCache;if(m.projections[w])return m.projections[w];const b=new c.P(n.lineVertexArray.getx(w),n.lineVertexArray.gety(w)),T=ua(b.x,b.y,n);if(T.signedDistanceFromCamera>0)return m.projections[w]=T.point,m.anyProjectionOccluded=m.anyProjectionOccluded||T.isOccluded,T.point;const M=w-l.direction;return Ul(l.distanceFromAnchor===0?n.tileAnchorPoint:new c.P(n.lineVertexArray.getx(M),n.lineVertexArray.gety(M)),b,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,n)}function ua(w,n,l){const m=w+l.translation[0],b=n+l.translation[1];let T;return l.pitchWithMap?(T=kt(m,b,l.pitchedLabelPlaneMatrix,l.getElevation),T.isOccluded=!1):(T=l.transform.projectTileCoordinates(m,b,l.unwrappedTileID,l.getElevation),T.point.x=(.5*T.point.x+.5)*l.width,T.point.y=(.5*-T.point.y+.5)*l.height),T}function zo(w,n,l,m){if(l.pitchWithMap){const b=[w,n,0,1];return c.aG(b,b,m),l.transform.projectTileCoordinates(b[0]/b[3],b[1]/b[3],l.unwrappedTileID,l.getElevation).point}return{x:w/l.width*2-1,y:1-n/l.height*2}}function Fo(w,n,l){return l.transform.projectTileCoordinates(w,n,l.unwrappedTileID,l.getElevation)}function Wi(w,n,l){return w._unit()._perp()._mult(n*l)}function Pa(w,n,l,m,b,T,M,R,L){if(R.projectionCache.offsets[w])return R.projectionCache.offsets[w];const F=l.add(n);if(w+L.direction<m||w+L.direction>=b)return R.projectionCache.offsets[w]=F,F;const B=Po(w+L.direction,R,L),Y=Wi(B.sub(l),M,L.direction),$=l.add(Y),J=B.add(Y);return R.projectionCache.offsets[w]=c.aH(T,F,$,J)||F,R.projectionCache.offsets[w]}function pi(w,n,l,m,b,T,M,R,L){const F=m?w-n:w+n;let B=F>0?1:-1,Y=0;m&&(B*=-1,Y=Math.PI),B<0&&(Y+=Math.PI);let $,J=B>0?T+b:T+b+1;R.projectionCache.cachedAnchorPoint?$=R.projectionCache.cachedAnchorPoint:($=ua(R.tileAnchorPoint.x,R.tileAnchorPoint.y,R).point,R.projectionCache.cachedAnchorPoint=$);let oe,de,pe=$,ye=$,be=0,Me=0;const _e=Math.abs(F),Ce=[];let Re;for(;be+Me<=_e;){if(J+=B,J<T||J>=M)return null;be+=Me,ye=pe,de=oe;const We={absOffsetX:_e,direction:B,distanceFromAnchor:be,previousVertex:ye};if(pe=Po(J,R,We),l===0)Ce.push(ye),Re=pe.sub(ye);else{let $e;const Ye=pe.sub(ye);$e=Ye.mag()===0?Wi(Po(J+B,R,We).sub(pe),l,B):Wi(Ye,l,B),de||(de=ye.add($e)),oe=Pa(J,$e,pe,T,M,de,l,R,We),Ce.push(de),Re=oe.sub(de)}Me=Re.mag()}const we=Re._mult((_e-be)/Me)._add(de||ye),Be=Y+Math.atan2(pe.y-ye.y,pe.x-ye.x);return Ce.push(we),{point:we,angle:L?Be:0,path:Ce}}const Rc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ta(w,n){for(let l=0;l<w;l++){const m=n.length;n.resize(m+4),n.float32.set(Rc,3*m)}}function kh(w,n,l){const m=n[0],b=n[1];return w[0]=l[0]*m+l[4]*b+l[12],w[1]=l[1]*m+l[5]*b+l[13],w[3]=l[3]*m+l[7]*b+l[15],w}const Fi=100;class rl{constructor(n,l=new fi(n.width+200,n.height+200,25),m=new fi(n.width+200,n.height+200,25)){this.transform=n,this.grid=l,this.ignoredGrid=m,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Fi,this.screenBottomBoundary=n.height+Fi,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,l,m,b,T,M,R,L,F,B,Y,$){const J=this.projectAndGetPerspectiveRatio(n.anchorPointX+L[0],n.anchorPointY+L[1],T,B,$),oe=m*J.perspectiveRatio;let de;if(M||R)de=this._projectCollisionBox(n,oe,b,T,M,R,L,J,B,Y,$);else{const Re=J.x+(Y?Y.x*oe:0),we=J.y+(Y?Y.y*oe:0);de={allPointsOccluded:!1,box:[Re+n.x1*oe,we+n.y1*oe,Re+n.x2*oe,we+n.y2*oe]}}const[pe,ye,be,Me]=de.box,_e=M?de.allPointsOccluded:J.isOccluded;let Ce=_e;return Ce||(Ce=J.perspectiveRatio<this.perspectiveRatioCutoff),Ce||(Ce=!this.isInsideGrid(pe,ye,be,Me)),Ce||l!=="always"&&this.grid.hitTest(pe,ye,be,Me,l,F)?{box:[pe,ye,be,Me],placeable:!1,offscreen:!1,occluded:_e}:{box:[pe,ye,be,Me],placeable:!0,offscreen:this.isOffscreen(pe,ye,be,Me),occluded:_e}}placeCollisionCircles(n,l,m,b,T,M,R,L,F,B,Y,$,J,oe){const de=[],pe=new c.P(l.anchorX,l.anchorY),ye=this.getPerspectiveRatio(pe.x,pe.y,M,oe),be=(F?T*this.transform.getPitchedTextCorrection(l.anchorX,l.anchorY,M)/ye:T*ye)/c.aL,Me={getElevation:oe,pitchedLabelPlaneMatrix:R,lineVertexArray:m,pitchWithMap:F,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:pe,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:J},_e=Br(be,b,l.lineOffsetX*be,l.lineOffsetY*be,!1,l,!1,Me);let Ce=!1,Re=!1,we=!0;if(_e){const Be=.5*Y*ye+$,We=new c.P(-100,-100),$e=new c.P(this.screenRightBoundary,this.screenBottomBoundary),Ye=new vt,qe=_e.first,xt=_e.last;let wt=[];for(let cn=qe.path.length-1;cn>=1;cn--)wt.push(qe.path[cn]);for(let cn=1;cn<xt.path.length;cn++)wt.push(xt.path[cn]);const ut=2.5*Be;if(F){const cn=this.projectPathToScreenSpace(wt,Me);wt=cn.some(an=>an.signedDistanceFromCamera<=0)?[]:cn.map(an=>an.point)}let Pt=[];if(wt.length>0){const cn=wt[0].clone(),an=wt[0].clone();for(let Si=1;Si<wt.length;Si++)cn.x=Math.min(cn.x,wt[Si].x),cn.y=Math.min(cn.y,wt[Si].y),an.x=Math.max(an.x,wt[Si].x),an.y=Math.max(an.y,wt[Si].y);Pt=cn.x>=We.x&&an.x<=$e.x&&cn.y>=We.y&&an.y<=$e.y?[wt]:an.x<We.x||cn.x>$e.x||an.y<We.y||cn.y>$e.y?[]:c.aI([wt],We.x,We.y,$e.x,$e.y)}for(const cn of Pt){Ye.reset(cn,.25*Be);let an=0;an=Ye.length<=.5*Be?1:Math.ceil(Ye.paddedLength/ut)+1;for(let Si=0;Si<an;Si++){const gi=Si/Math.max(an-1,1),Vi=Ye.lerp(gi),ci=Vi.x+Fi,fr=Vi.y+Fi;de.push(ci,fr,Be,0);const Oi=ci-Be,Qi=fr-Be,Ki=ci+Be,rr=fr+Be;if(we=we&&this.isOffscreen(Oi,Qi,Ki,rr),Re=Re||this.isInsideGrid(Oi,Qi,Ki,rr),n!=="always"&&this.grid.hitTestCircle(ci,fr,Be,n,B)&&(Ce=!0,!L))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!L&&Ce||!Re||ye<this.perspectiveRatioCutoff?[]:de,offscreen:we,collisionDetected:Ce}}projectPathToScreenSpace(n,l){const m=function(b,T){const M=c.N();return c.aA(M,T.pitchedLabelPlaneMatrix),b.map(R=>{const L=kt(R.x,R.y,M,T.getElevation),F=T.transform.projectTileCoordinates(L.point.x,L.point.y,T.unwrappedTileID,T.getElevation);return F.point.x=(.5*F.point.x+.5)*T.width,F.point.y=(.5*-F.point.y+.5)*T.height,F})}(n,l);return function(b){let T=0,M=0,R=0,L=0;for(let F=0;F<b.length;F++)b[F].isOccluded?(R=F+1,L=0):(L++,L>M&&(M=L,T=R));return b.slice(T,T+M)}(m)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[],m=new c.ab;for(const Y of n){const $=new c.P(Y.x+Fi,Y.y+Fi);m.extend($),l.push($)}const{minX:b,minY:T,maxX:M,maxY:R}=m,L=this.grid.query(b,T,M,R).concat(this.ignoredGrid.query(b,T,M,R)),F={},B={};for(const Y of L){const $=Y.key;if(F[$.bucketInstanceId]===void 0&&(F[$.bucketInstanceId]={}),F[$.bucketInstanceId][$.featureIndex])continue;const J=[new c.P(Y.x1,Y.y1),new c.P(Y.x2,Y.y1),new c.P(Y.x2,Y.y2),new c.P(Y.x1,Y.y2)];c.aJ(l,J)&&(F[$.bucketInstanceId][$.featureIndex]=!0,B[$.bucketInstanceId]===void 0&&(B[$.bucketInstanceId]=[]),B[$.bucketInstanceId].push($.featureIndex))}return B}insertCollisionBox(n,l,m,b,T,M){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:T,collisionGroupID:M,overlapMode:l},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,l,m,b,T,M){const R=m?this.ignoredGrid:this.grid,L={bucketInstanceId:b,featureIndex:T,collisionGroupID:M,overlapMode:l};for(let F=0;F<n.length;F+=4)R.insertCircle(L,n[F],n[F+1],n[F+2])}projectAndGetPerspectiveRatio(n,l,m,b,T){if(T){let M;b?(M=[n,l,b(n,l),1],c.aG(M,M,T)):(M=[n,l,0,1],kh(M,M,T));const R=M[3];return{x:(M[0]/R+1)/2*this.transform.width+Fi,y:(-M[1]/R+1)/2*this.transform.height+Fi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/R*.5,isOccluded:!1,signedDistanceFromCamera:R}}{const M=this.transform.projectTileCoordinates(n,l,m,b);return{x:(M.point.x+1)/2*this.transform.width+Fi,y:(1-M.point.y)/2*this.transform.height+Fi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(n,l,m,b){const T=this.transform.projectTileCoordinates(n,l,m,b);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(n,l,m,b){return m<Fi||n>=this.screenRightBoundary||b<Fi||l>this.screenBottomBoundary}isInsideGrid(n,l,m,b){return m>=0&&n<this.gridRightBoundary&&b>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const n=c.ar([]);return c.O(n,n,[-100,-100,0]),n}_projectCollisionBox(n,l,m,b,T,M,R,L,F,B,Y){let $=1,J=0,oe=0,de=1;const pe=n.anchorPointX+R[0],ye=n.anchorPointY+R[1];if(M&&!T){const wt=this.projectAndGetPerspectiveRatio(pe+1,ye,b,F,Y),ut=wt.x-L.x,Pt=Math.atan((wt.y-L.y)/ut)+(ut<0?Math.PI:0),cn=Math.sin(Pt),an=Math.cos(Pt);$=an,J=cn,oe=-cn,de=an}else if(!M&&T){const wt=dt(this.transform);$=wt.vecEast[0],J=wt.vecEast[1],oe=wt.vecSouth[0],de=wt.vecSouth[1]}let be=L.x,Me=L.y,_e=l;T&&(be=pe,Me=ye,_e=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),_e*=this.transform.getPitchedTextCorrection(pe,ye,b),B||(_e*=c.an(.5+L.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),B&&(be+=$*B.x*_e+oe*B.y*_e,Me+=J*B.x*_e+de*B.y*_e);const Ce=n.x1*_e,Re=n.x2*_e,we=(Ce+Re)/2,Be=n.y1*_e,We=n.y2*_e,$e=(Be+We)/2,Ye=[{offsetX:Ce,offsetY:Be},{offsetX:we,offsetY:Be},{offsetX:Re,offsetY:Be},{offsetX:Re,offsetY:$e},{offsetX:Re,offsetY:We},{offsetX:we,offsetY:We},{offsetX:Ce,offsetY:We},{offsetX:Ce,offsetY:$e}];let qe=[];for(const{offsetX:wt,offsetY:ut}of Ye)qe.push(new c.P(be+$*wt+oe*ut,Me+J*wt+de*ut));let xt=!1;if(T){const wt=qe.map(ut=>this.projectAndGetPerspectiveRatio(ut.x,ut.y,b,F,Y));xt=wt.some(ut=>!ut.isOccluded),qe=wt.map(ut=>new c.P(ut.x,ut.y))}else xt=!0;return{box:c.aK(qe),allPointsOccluded:!xt}}}class Ip{constructor(n,l,m,b){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?l:-l))):b&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class al{constructor(n,l,m,b,T){this.text=new Ip(n?n.text:null,l,m,T),this.icon=new Ip(n?n.icon:null,l,b,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Cu{constructor(n,l,m){this.text=n,this.icon=l,this.skipFade=m}}class za{constructor(n,l,m,b,T){this.bucketInstanceId=n,this.featureIndex=l,this.sourceLayerIndex=m,this.bucketIndex=b,this.tileID=T}}class Ja{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const l=++this.maxGroupID;this.collisionGroups[n]={ID:l,predicate:m=>m.collisionGroupID===l}}return this.collisionGroups[n]}}function Rp(w,n,l,m,b){const{horizontalAlign:T,verticalAlign:M}=c.aR(w);return new c.P(-(T-.5)*n+m[0]*b,-(M-.5)*l+m[1]*b)}class u0{constructor(n,l,m,b,T){this.transform=n.clone(),this.terrain=l,this.collisionIndex=new rl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Ja(b),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const l=this.terrain;return l?(m,b)=>l.getElevation(n,m,b):null}getBucketParts(n,l,m,b){const T=m.getBucket(l),M=m.latestFeatureIndex;if(!T||!M||l.id!==T.layerIds[0])return;const R=m.collisionBoxArray,L=T.layers[0].layout,F=T.layers[0].paint,B=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),Y=m.tileSize/c.a4,$=m.tileID.toUnwrapped(),J=L.get("text-rotation-alignment")==="map",oe=c.aM(m,1,this.transform.zoom),de=c.aN(this.collisionIndex.transform,m,F.get("text-translate"),F.get("text-translate-anchor")),pe=c.aN(this.collisionIndex.transform,m,F.get("icon-translate"),F.get("icon-translate-anchor")),ye=lr(J,this.transform,oe);this.retainedQueryData[T.bucketInstanceId]=new za(T.bucketInstanceId,M,T.sourceLayerIndex,T.index,m.tileID);const be={bucket:T,layout:L,translationText:de,translationIcon:pe,unwrappedTileID:$,pitchedLabelPlaneMatrix:ye,scale:B,textPixelRatio:Y,holdingForFade:m.holdingForSymbolFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:c.ax(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(b)for(const Me of T.sortKeyRanges){const{sortKey:_e,symbolInstanceStart:Ce,symbolInstanceEnd:Re}=Me;n.push({sortKey:_e,symbolInstanceStart:Ce,symbolInstanceEnd:Re,parameters:be})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:be})}attemptAnchorPlacement(n,l,m,b,T,M,R,L,F,B,Y,$,J,oe,de,pe,ye,be,Me,_e){const Ce=c.aO[n.textAnchor],Re=[n.textOffset0,n.textOffset1],we=Rp(Ce,m,b,Re,T),Be=this.collisionIndex.placeCollisionBox(l,$,L,F,B,R,M,pe,Y.predicate,Me,we,_e);if((!be||this.collisionIndex.placeCollisionBox(be,$,L,F,B,R,M,ye,Y.predicate,Me,we,_e).placeable)&&Be.placeable){let We;if(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(We=this.prevPlacement.variableOffsets[J.crossTileID].anchor),J.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[J.crossTileID]={textOffset:Re,width:m,height:b,anchor:Ce,textBoxScale:T,prevAnchor:We},this.markUsedJustification(oe,Ce,J,de),oe.allowVerticalPlacement&&(this.markUsedOrientation(oe,de,J),this.placedOrientations[J.crossTileID]=de),{shift:we,placedGlyphBoxes:Be}}}placeLayerBucketPart(n,l,m){const{bucket:b,layout:T,translationText:M,translationIcon:R,unwrappedTileID:L,pitchedLabelPlaneMatrix:F,textPixelRatio:B,holdingForFade:Y,collisionBoxArray:$,partiallyEvaluatedTextSize:J,collisionGroup:oe}=n.parameters,de=T.get("text-optional"),pe=T.get("icon-optional"),ye=c.aP(T,"text-overlap","text-allow-overlap"),be=ye==="always",Me=c.aP(T,"icon-overlap","icon-allow-overlap"),_e=Me==="always",Ce=T.get("text-rotation-alignment")==="map",Re=T.get("text-pitch-alignment")==="map",we=T.get("icon-text-fit")!=="none",Be=T.get("symbol-z-order")==="viewport-y",We=be&&(_e||!b.hasIconData()||pe),$e=_e&&(be||!b.hasTextData()||de);!b.collisionArrays&&$&&b.deserializeCollisionBoxes($);const Ye=this.retainedQueryData[b.bucketInstanceId].tileID,qe=this._getTerrainElevationFunc(Ye),xt=this.transform.getFastPathSimpleProjectionMatrix(Ye),wt=(ut,Pt,cn)=>{var an,Si;if(l[ut.crossTileID])return;if(Y)return void(this.placements[ut.crossTileID]=new Cu(!1,!1,!1));let gi=!1,Vi=!1,ci=!0,fr=null,Oi={box:null,placeable:!1,offscreen:null,occluded:!1},Qi={placeable:!1},Ki=null,rr=null,ha=null,Bs=0,Yo=0,sc=0;Pt.textFeatureIndex?Bs=Pt.textFeatureIndex:ut.useRuntimeCollisionCircles&&(Bs=ut.featureIndex),Pt.verticalTextFeatureIndex&&(Yo=Pt.verticalTextFeatureIndex);const Vs=Pt.textBox;if(Vs){const $a=$i=>{let yi=c.ay.horizontal;if(b.allowVerticalPlacement&&!$i&&this.prevPlacement){const ar=this.prevPlacement.placedOrientations[ut.crossTileID];ar&&(this.placedOrientations[ut.crossTileID]=ar,yi=ar,this.markUsedOrientation(b,yi,ut))}return yi},Us=($i,yi)=>{if(b.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&Pt.verticalTextBox){for(const ar of b.writingModes)if(ar===c.ay.vertical?(Oi=yi(),Qi=Oi):Oi=$i(),Oi&&Oi.placeable)break}else Oi=$i()},nu=ut.textAnchorOffsetStartIndex,iu=ut.textAnchorOffsetEndIndex;if(iu===nu){const $i=(yi,ar)=>{const ni=this.collisionIndex.placeCollisionBox(yi,ye,B,Ye,L,Re,Ce,M,oe.predicate,qe,void 0,xt);return ni&&ni.placeable&&(this.markUsedOrientation(b,ar,ut),this.placedOrientations[ut.crossTileID]=ar),ni};Us(()=>$i(Vs,c.ay.horizontal),()=>{const yi=Pt.verticalTextBox;return b.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&yi?$i(yi,c.ay.vertical):{box:null,offscreen:null}}),$a(Oi&&Oi.placeable)}else{let $i=c.aO[(Si=(an=this.prevPlacement)===null||an===void 0?void 0:an.variableOffsets[ut.crossTileID])===null||Si===void 0?void 0:Si.anchor];const yi=(ni,El,tm)=>{const Hu=ni.x2-ni.x1,nm=ni.y2-ni.y1,Al=ut.textBoxScale,kg=we&&Me==="never"?El:null;let Gs=null,Wu=ye==="never"?1:2,Pf="never";$i&&Wu++;for(let Ml=0;Ml<Wu;Ml++){for(let Ia=nu;Ia<iu;Ia++){const zf=b.textAnchorOffsets.get(Ia);if($i&&zf.textAnchor!==$i)continue;const Ff=this.attemptAnchorPlacement(zf,ni,Hu,nm,Al,Ce,Re,B,Ye,L,oe,Pf,ut,b,tm,M,R,kg,qe);if(Ff&&(Gs=Ff.placedGlyphBoxes,Gs&&Gs.placeable))return gi=!0,fr=Ff.shift,Gs}$i?$i=null:Pf=ye}return m&&!Gs&&(Gs={box:this.collisionIndex.placeCollisionBox(Vs,"always",B,Ye,L,Re,Ce,M,oe.predicate,qe,void 0,xt).box,offscreen:!1,placeable:!1,occluded:!1}),Gs};Us(()=>yi(Vs,Pt.iconBox,c.ay.horizontal),()=>{const ni=Pt.verticalTextBox;return b.allowVerticalPlacement&&(!Oi||!Oi.placeable)&&ut.numVerticalGlyphVertices>0&&ni?yi(ni,Pt.verticalIconBox,c.ay.vertical):{box:null,occluded:!0,offscreen:null}}),Oi&&(gi=Oi.placeable,ci=Oi.offscreen);const ar=$a(Oi&&Oi.placeable);if(!gi&&this.prevPlacement){const ni=this.prevPlacement.variableOffsets[ut.crossTileID];ni&&(this.variableOffsets[ut.crossTileID]=ni,this.markUsedJustification(b,ni.anchor,ut,ar))}}}if(Ki=Oi,gi=Ki&&Ki.placeable,ci=Ki&&Ki.offscreen,ut.useRuntimeCollisionCircles&&ut.centerJustifiedTextSymbolIndex>=0){const $a=b.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex),Us=c.az(b.textSizeData,J,$a),nu=T.get("text-padding");rr=this.collisionIndex.placeCollisionCircles(ye,$a,b.lineVertexArray,b.glyphOffsetArray,Us,L,F,m,Re,oe.predicate,ut.collisionCircleDiameter,nu,M,qe),rr.circles.length&&rr.collisionDetected&&!m&&c.w("Collisions detected, but collision boxes are not shown"),gi=be||rr.circles.length>0&&!rr.collisionDetected,ci=ci&&rr.offscreen}if(Pt.iconFeatureIndex&&(sc=Pt.iconFeatureIndex),Pt.iconBox){const $a=Us=>this.collisionIndex.placeCollisionBox(Us,Me,B,Ye,L,Re,Ce,R,oe.predicate,qe,we&&fr?fr:void 0,xt);Qi&&Qi.placeable&&Pt.verticalIconBox?(ha=$a(Pt.verticalIconBox),Vi=ha.placeable):(ha=$a(Pt.iconBox),Vi=ha.placeable),ci=ci&&ha.offscreen}const lc=de||ut.numHorizontalGlyphVertices===0&&ut.numVerticalGlyphVertices===0,io=pe||ut.numIconVertices===0;lc||io?io?lc||(Vi=Vi&&gi):gi=Vi&&gi:Vi=gi=Vi&&gi;const qo=Vi&&ha.placeable;if(gi&&Ki.placeable&&this.collisionIndex.insertCollisionBox(Ki.box,ye,T.get("text-ignore-placement"),b.bucketInstanceId,Qi&&Qi.placeable&&Yo?Yo:Bs,oe.ID),qo&&this.collisionIndex.insertCollisionBox(ha.box,Me,T.get("icon-ignore-placement"),b.bucketInstanceId,sc,oe.ID),rr&&gi&&this.collisionIndex.insertCollisionCircles(rr.circles,ye,T.get("text-ignore-placement"),b.bucketInstanceId,Bs,oe.ID),m&&this.storeCollisionData(b.bucketInstanceId,cn,Pt,Ki,ha,rr),ut.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(b.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ut.crossTileID]=new Cu((gi||We)&&!Ki?.occluded,(Vi||$e)&&!ha?.occluded,ci||b.justReloaded),l[ut.crossTileID]=!0};if(Be){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ut=b.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Pt=ut.length-1;Pt>=0;--Pt){const cn=ut[Pt];wt(b.symbolInstances.get(cn),b.collisionArrays[cn],cn)}}else for(let ut=n.symbolInstanceStart;ut<n.symbolInstanceEnd;ut++)wt(b.symbolInstances.get(ut),b.collisionArrays[ut],ut);b.justReloaded=!1}storeCollisionData(n,l,m,b,T,M){if(m.textBox||m.iconBox){let R,L;this.collisionBoxArrays.has(n)?R=this.collisionBoxArrays.get(n):(R=new Map,this.collisionBoxArrays.set(n,R)),R.has(l)?L=R.get(l):(L={text:null,icon:null},R.set(l,L)),m.textBox&&(L.text=b.box),m.iconBox&&(L.icon=T.box)}if(M){let R=this.collisionCircleArrays[n];R===void 0&&(R=this.collisionCircleArrays[n]=[]);for(let L=0;L<M.circles.length;L+=4)R.push(M.circles[L+0]-Fi),R.push(M.circles[L+1]-Fi),R.push(M.circles[L+2]),R.push(M.collisionDetected?1:0)}}markUsedJustification(n,l,m,b){let T;T=b===c.ay.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[c.aQ(l)];const M=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const R of M)R>=0&&(n.text.placedSymbolArray.get(R).crossTileID=T>=0&&R!==T?0:m.crossTileID)}markUsedOrientation(n,l,m){const b=l===c.ay.horizontal||l===c.ay.horizontalOnly?l:0,T=l===c.ay.vertical?l:0,M=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const R of M)n.text.placedSymbolArray.get(R).placedOrientation=b;m.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let m=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const b=l?l.symbolFadeChange(n):1,T=l?l.opacities:{},M=l?l.variableOffsets:{},R=l?l.placedOrientations:{};for(const L in this.placements){const F=this.placements[L],B=T[L];B?(this.opacities[L]=new al(B,b,F.text,F.icon),m=m||F.text!==B.text.placed||F.icon!==B.icon.placed):(this.opacities[L]=new al(null,b,F.text,F.icon,F.skipFade),m=m||F.text||F.icon)}for(const L in T){const F=T[L];if(!this.opacities[L]){const B=new al(F,b,!1,!1);B.isHidden()||(this.opacities[L]=B,m=m||F.text.placed||F.icon.placed)}}for(const L in M)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=M[L]);for(const L in R)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=R[L]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:n)}updateLayerOpacities(n,l){const m={};for(const b of l){const T=b.getBucket(n);T&&b.latestFeatureIndex&&n.id===T.layerIds[0]&&this.updateBucketOpacities(T,b.tileID,m,b.collisionBoxArray)}}updateBucketOpacities(n,l,m,b){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const T=n.layers[0],M=T.layout,R=new al(null,0,!1,!1,!0),L=M.get("text-allow-overlap"),F=M.get("icon-allow-overlap"),B=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Y=M.get("text-rotation-alignment")==="map",$=M.get("text-pitch-alignment")==="map",J=M.get("icon-text-fit")!=="none",oe=new al(null,0,L&&(F||!n.hasIconData()||M.get("icon-optional")),F&&(L||!n.hasTextData()||M.get("text-optional")),!0);!n.collisionArrays&&b&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(b);const de=(ye,be,Me)=>{for(let _e=0;_e<be/4;_e++)ye.opacityVertexArray.emplaceBack(Me);ye.hasVisibleVertices=ye.hasVisibleVertices||Me!==bs},pe=this.collisionBoxArrays.get(n.bucketInstanceId);for(let ye=0;ye<n.symbolInstances.length;ye++){const be=n.symbolInstances.get(ye),{numHorizontalGlyphVertices:Me,numVerticalGlyphVertices:_e,crossTileID:Ce}=be;let Re=this.opacities[Ce];m[Ce]?Re=R:Re||(Re=oe,this.opacities[Ce]=Re),m[Ce]=!0;const we=be.numIconVertices>0,Be=this.placedOrientations[be.crossTileID],We=Be===c.ay.vertical,$e=Be===c.ay.horizontal||Be===c.ay.horizontalOnly;if(Me>0||_e>0){const qe=kc(Re.text);de(n.text,Me,We?bs:qe),de(n.text,_e,$e?bs:qe);const xt=Re.text.isHidden();[be.rightJustifiedTextSymbolIndex,be.centerJustifiedTextSymbolIndex,be.leftJustifiedTextSymbolIndex].forEach(Pt=>{Pt>=0&&(n.text.placedSymbolArray.get(Pt).hidden=xt||We?1:0)}),be.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(be.verticalPlacedTextSymbolIndex).hidden=xt||$e?1:0);const wt=this.variableOffsets[be.crossTileID];wt&&this.markUsedJustification(n,wt.anchor,be,Be);const ut=this.placedOrientations[be.crossTileID];ut&&(this.markUsedJustification(n,"left",be,ut),this.markUsedOrientation(n,ut,be))}if(we){const qe=kc(Re.icon),xt=!(J&&be.verticalPlacedIconSymbolIndex&&We);be.placedIconSymbolIndex>=0&&(de(n.icon,be.numIconVertices,xt?qe:bs),n.icon.placedSymbolArray.get(be.placedIconSymbolIndex).hidden=Re.icon.isHidden()),be.verticalPlacedIconSymbolIndex>=0&&(de(n.icon,be.numVerticalIconVertices,xt?bs:qe),n.icon.placedSymbolArray.get(be.verticalPlacedIconSymbolIndex).hidden=Re.icon.isHidden())}const Ye=pe&&pe.has(ye)?pe.get(ye):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const qe=n.collisionArrays[ye];if(qe){let xt=new c.P(0,0);if(qe.textBox||qe.verticalTextBox){let wt=!0;if(B){const ut=this.variableOffsets[Ce];ut?(xt=Rp(ut.anchor,ut.width,ut.height,ut.textOffset,ut.textBoxScale),Y&&xt._rotate($?-this.transform.bearingInRadians:this.transform.bearingInRadians)):wt=!1}if(qe.textBox||qe.verticalTextBox){let ut;qe.textBox&&(ut=We),qe.verticalTextBox&&(ut=$e),lf(n.textCollisionBox.collisionVertexArray,Re.text.placed,!wt||ut,Ye.text,xt.x,xt.y)}}if(qe.iconBox||qe.verticalIconBox){const wt=!!(!$e&&qe.verticalIconBox);let ut;qe.iconBox&&(ut=wt),qe.verticalIconBox&&(ut=!wt),lf(n.iconCollisionBox.collisionVertexArray,Re.icon.placed,ut,Ye.icon,J?xt.x:0,J?xt.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,l){const m=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*m>n}setStale(){this.stale=!0}}function lf(w,n,l,m,b,T){m&&m.length!==0||(m=[0,0,0,0]);const M=m[0]-Fi,R=m[1]-Fi,L=m[2]-Fi,F=m[3]-Fi;w.emplaceBack(n?1:0,l?1:0,b||0,T||0,M,R),w.emplaceBack(n?1:0,l?1:0,b||0,T||0,L,R),w.emplaceBack(n?1:0,l?1:0,b||0,T||0,L,F),w.emplaceBack(n?1:0,l?1:0,b||0,T||0,M,F)}const kp=Math.pow(2,25),Oh=Math.pow(2,24),Op=Math.pow(2,17),Fa=Math.pow(2,16),cf=Math.pow(2,9),uf=Math.pow(2,8),Lh=Math.pow(2,1);function kc(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const n=w.placed?1:0,l=Math.floor(127*w.opacity);return l*kp+n*Oh+l*Op+n*Fa+l*cf+n*uf+l*Lh+n}const bs=0;class Nh{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,l,m,b,T){const M=this._bucketParts;for(;this._currentTileIndex<n.length;)if(l.getBucketParts(M,b,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((R,L)=>R.sortKey-L.sortKey));this._currentPartIndex<M.length;)if(l.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,T())return!0;return!1}}class Oc{constructor(n,l,m,b,T,M,R,L){this.placement=new u0(n,l,M,R,L),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(n,l,m){const b=ae(),T=()=>!this._forceFullPlacement&&ae()-b>2;for(;this._currentPlacementIndex>=0;){const M=l[n[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=R)&&(!M.maxzoom||M.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new Nh(M)),this._inProgressLayer.continuePlacement(m[M.source],this.placement,this._showCollisionBoxes,M,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const xs=512/c.a4/2;class Lp{constructor(n,l,m){this.tileID=n,this.bucketInstanceId=m,this._symbolsByKey={};const b=new Map;for(let T=0;T<l.length;T++){const M=l.get(T),R=M.key,L=b.get(R);L?L.push(M):b.set(R,[M])}for(const[T,M]of b){const R={positions:M.map(L=>({x:Math.floor(L.anchorX*xs),y:Math.floor(L.anchorY*xs)})),crossTileIDs:M.map(L=>L.crossTileID)};if(R.positions.length>128){const L=new c.aS(R.positions.length,16,Uint16Array);for(const{x:F,y:B}of R.positions)L.add(F,B);L.finish(),delete R.positions,R.index=L}this._symbolsByKey[T]=R}}getScaledCoordinates(n,l){const{x:m,y:b,z:T}=this.tileID.canonical,{x:M,y:R,z:L}=l.canonical,F=xs/Math.pow(2,L-T),B=(R*c.a4+n.anchorY)*F,Y=b*c.a4*xs;return{x:Math.floor((M*c.a4+n.anchorX)*F-m*c.a4*xs),y:Math.floor(B-Y)}}findMatches(n,l,m){const b=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let T=0;T<n.length;T++){const M=n.get(T);if(M.crossTileID)continue;const R=this._symbolsByKey[M.key];if(!R)continue;const L=this.getScaledCoordinates(M,l);if(R.index){const F=R.index.range(L.x-b,L.y-b,L.x+b,L.y+b).sort();for(const B of F){const Y=R.crossTileIDs[B];if(!m[Y]){m[Y]=!0,M.crossTileID=Y;break}}}else if(R.positions)for(let F=0;F<R.positions.length;F++){const B=R.positions[F],Y=R.crossTileIDs[F];if(Math.abs(B.x-L.x)<=b&&Math.abs(B.y-L.y)<=b&&!m[Y]){m[Y]=!0,M.crossTileID=Y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class fg{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ws{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const l=Math.round((n-this.lng)/360);if(l!==0)for(const m in this.indexes){const b=this.indexes[m],T={};for(const M in b){const R=b[M];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+l),T[R.tileID.key]=R}this.indexes[m]=T}this.lng=n}addBucket(n,l,m){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let T=0;T<l.symbolInstances.length;T++)l.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const b=this.usedCrossTileIDs[n.overscaledZ];for(const T in this.indexes){const M=this.indexes[T];if(Number(T)>n.overscaledZ)for(const R in M){const L=M[R];L.tileID.isChildOf(n)&&L.findMatches(l.symbolInstances,n,b)}else{const R=M[n.scaledTo(Number(T)).key];R&&R.findMatches(l.symbolInstances,n,b)}}for(let T=0;T<l.symbolInstances.length;T++){const M=l.symbolInstances.get(T);M.crossTileID||(M.crossTileID=m.generate(),b[M.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Lp(n,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(n,l){for(const m of l.getCrossTileIDsLists())for(const b of m)delete this.usedCrossTileIDs[n][b]}removeStaleBuckets(n){let l=!1;for(const m in this.indexes){const b=this.indexes[m];for(const T in b)n[b[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,b[T]),delete b[T],l=!0)}return l}}class Lc{constructor(){this.layerIndexes={},this.crossTileIDs=new fg,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,l,m){let b=this.layerIndexes[n.id];b===void 0&&(b=this.layerIndexes[n.id]=new ws);let T=!1;const M={};b.handleWrapJump(m);for(const R of l){const L=R.getBucket(n);L&&n.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(R.tileID,L,this.crossTileIDs)&&(T=!0),M[L.bucketInstanceId]=!0)}return b.removeStaleBuckets(M)&&(T=!0),T}pruneUnusedLayers(n){const l={};n.forEach(m=>{l[m]=!0});for(const m in this.layerIndexes)l[m]||delete this.layerIndexes[m]}}var Dn="void main() {fragColor=vec4(1.0);}";const Sa={prelude:mn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:mn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:mn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:mn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:mn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:mn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:mn(Dn,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:mn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:mn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:mn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:mn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:mn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:mn(Dn,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:mn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:mn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:mn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:mn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:mn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:mn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:mn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:mn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:mn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:mn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:mn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:mn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:mn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:mn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:mn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:mn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:mn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:mn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:mn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:mn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:mn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:mn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function mn(w,n){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=n.match(/in ([\w]+) ([\w]+)/g),b=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=T?T.concat(b):b,R={};return{fragmentSource:w=w.replace(l,(L,F,B,Y,$)=>(R[$]=!0,F==="define"?`
#ifndef HAS_UNIFORM_u_${$}
in ${B} ${Y} ${$};
#else
uniform ${B} ${Y} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${B} ${Y} ${$} = u_${$};
#endif
`)),vertexSource:n=n.replace(l,(L,F,B,Y,$)=>{const J=Y==="float"?"vec2":"vec4",oe=$.match(/color/)?"color":J;return R[$]?F==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${B} ${J} a_${$};
out ${B} ${Y} ${$};
#else
uniform ${B} ${Y} u_${$};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${B} ${Y} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${oe}(a_${$}, u_${$}_t);
#else
    ${B} ${Y} ${$} = u_${$};
#endif
`:F==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${B} ${J} a_${$};
#else
uniform ${B} ${Y} u_${$};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${B} ${Y} ${$} = a_${$};
#else
    ${B} ${Y} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${B} ${Y} ${$} = unpack_mix_${oe}(a_${$}, u_${$}_t);
#else
    ${B} ${Y} ${$} = u_${$};
#endif
`}),staticAttributes:m,staticUniforms:M}}class Ts{constructor(n,l,m){this.vertexBuffer=n,this.indexBuffer=l,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var nr=c.aT([{name:"a_pos",type:"Int16",components:2}]);const cr="#define PROJECTION_MERCATOR",ur="mercator";class yr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ur}get shaderDefine(){return cr}get shaderPreludeCode(){return Sa.projectionMercator}get vertexShaderPreludeCode(){return Sa.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aU.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,l,m,b,T){if(this._cachedMesh)return this._cachedMesh;const M=new c.aV;M.emplaceBack(0,0),M.emplaceBack(c.a4,0),M.emplaceBack(0,c.a4),M.emplaceBack(c.a4,c.a4);const R=n.createVertexBuffer(M,nr.members),L=c.aW.simpleSegment(0,0,4,2),F=new c.aX;F.emplaceBack(1,0,2),F.emplaceBack(1,2,3);const B=n.createIndexBuffer(F);return this._cachedMesh=new Ts(R,B,L),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class li{constructor(n=0,l=0,m=0,b=0){if(isNaN(n)||n<0||isNaN(l)||l<0||isNaN(m)||m<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=l,this.left=m,this.right=b}interpolate(n,l,m){return l.top!=null&&n.top!=null&&(this.top=c.G.number(n.top,l.top,m)),l.bottom!=null&&n.bottom!=null&&(this.bottom=c.G.number(n.bottom,l.bottom,m)),l.left!=null&&n.left!=null&&(this.left=c.G.number(n.left,l.left,m)),l.right!=null&&n.right!=null&&(this.right=c.G.number(n.right,l.right,m)),this}getCenter(n,l){const m=c.an((this.left+n-this.right)/2,0,n),b=c.an((this.top+l-this.bottom)/2,0,l);return new c.P(m,b)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new li(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ph(w,n){if(!w.renderWorldCopies||w.lngRange)return;const l=n.lng-w.center.lng;n.lng+=l>180?-360:l<-180?360:0}function Er(w){return Math.max(0,Math.floor(w))}class ir{constructor(n,l){var m;this.applyConstrain=(b,T)=>this._constrainOverride!==null?this._constrainOverride(b,T):this._callbacks.defaultConstrain(b,T),this._callbacks=n,this._tileSize=512,this._renderWorldCopies=l?.renderWorldCopies===void 0||!!l?.renderWorldCopies,this._minZoom=l?.minZoom||0,this._maxZoom=l?.maxZoom||22,this._minPitch=l?.minPitch==null?0:l?.minPitch,this._maxPitch=l?.maxPitch==null?60:l?.maxPitch,this._constrainOverride=(m=l?.constrainOverride)!==null&&m!==void 0?m:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Er(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new li,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,l,m){this._constrainOverride=n.constrainOverride,this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=Er(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new li(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!m&&n.autoCalculateNearFarZ,l&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get constrainOverride(){return this._constrainOverride}setConstrainOverride(n){n===void 0&&(n=null),this._constrainOverride!==n&&(this._constrainOverride=n,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const l=c.W(n,-180,180)*Math.PI/180;var m,b,T,M,R,L,F,B,Y;this._bearingInRadians!==l&&(this._unmodified=!1,this._bearingInRadians=l,this._calcMatrices(),this._rotationMatrix=D(),m=this._rotationMatrix,T=-this._bearingInRadians,M=(b=this._rotationMatrix)[0],R=b[1],L=b[2],F=b[3],B=Math.sin(T),Y=Math.cos(T),m[0]=M*Y+L*B,m[1]=R*Y+F*B,m[2]=M*-B+L*Y,m[3]=R*-B+F*Y)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const l=c.an(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==l&&(this._unmodified=!1,this._pitchInRadians=l,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const l=n/180*Math.PI;this._rollInRadians!==l&&(this._unmodified=!1,this._rollInRadians=l,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aY(this._fovInRadians)}setFov(n){n=c.an(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=c.ap(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const l=this.applyConstrain(this._center,n).zoom;this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this._tileZoom=Math.max(0,Math.floor(l)),this._scale=c.aq(l),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,l){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=l,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,l,m){this._unmodified=!1,this._edgeInsets.interpolate(n,l,m),this.constrainInternal(),this._calcMatrices()}resize(n,l,m=!0){this._width=n,this._height=l,m&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Wn([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-c.ao,c.ao])}getCameraQueryGeometry(n,l){if(l.length===1)return[l[0],n];{const{minX:m,minY:b,maxX:T,maxY:M}=c.ab.fromPoints(l).extend(n);return[new c.P(m,b),new c.P(T,b),new c.P(T,M),new c.P(m,M),new c.P(m,b)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:l,zoom:m}=this.applyConstrain(this.center,this.zoom);this.setCenter(l),this.setZoom(m),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=c.ar(new Float64Array(16));c.Q(n,n,[this._width/2,-this._height/2,1]),c.O(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=c.ar(new Float64Array(16)),c.Q(n,n,[1,-1,1]),c.O(n,n,[-1,-1,0]),c.Q(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,l,m,b){const T=m!==void 0?m:this.bearing,M=b=b!==void 0?b:this.pitch,R=c.aa.fromLngLat(n,l),L=-Math.cos(c.ap(M)),F=Math.sin(c.ap(M)),B=F*Math.sin(c.ap(T)),Y=-F*Math.cos(c.ap(T));let $=this.elevation;const J=l-$;let oe;L*J>=0||Math.abs(L)<.1?(oe=1e4,$=l+oe*L):oe=-J/L;let de,pe,ye=c.aZ(1,R.y),be=0;do{if(be+=1,be>10)break;pe=oe/ye,de=new c.aa(R.x+B*pe,R.y+Y*pe),ye=1/de.meterInMercatorCoordinateUnits()}while(Math.abs(oe-pe*ye)>1e-12);return{center:de.toLngLat(),elevation:$,zoom:c.at(this.height/2/Math.tan(this.fovInRadians/2)/pe/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const l=c.as(1,this.center.lat)*this.worldSize,m=this.cameraToCenterDistance/l,b=c.aa.fromLngLat(this.center,this.elevation),T=je(this.center,this.elevation,this.pitch,this.bearing,m);this._elevation=n;const M=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),c.aZ(T.z,b.y),this.bearing,this.pitch);this._elevation=M.elevation,this._center=M.center,this.setZoom(M.zoom)}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=c.as(1,this.center.lat)*this.worldSize;return je(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const l=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/l,n.canonical.y/l,1/l/c.a4,1/l/c.a4]}}class Vr{constructor(n,l){this.min=n,this.max=l,this.center=c.a_([],c.a$([],this.min,this.max),.5)}quadrant(n){const l=[n%2==0,n<2],m=c.b0(this.min),b=c.b0(this.max);for(let T=0;T<l.length;T++)m[T]=l[T]?this.min[T]:this.center[T],b[T]=l[T]?this.center[T]:this.max[T];return b[2]=this.max[2],new Vr(m,b)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let l=!0;for(let m=0;m<n.planes.length;m++){const b=this.intersectsPlane(n.planes[m]);if(b===0)return 0;b===1&&(l=!1)}return l?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let l=n[3],m=n[3];for(let b=0;b<3;b++)n[b]>0?(l+=n[b]*this.min[b],m+=n[b]*this.max[b]):(m+=n[b]*this.min[b],l+=n[b]*this.max[b]);return l>=0?2:m<0?0:1}}class Du{distanceToTile2d(n,l,m,b){const T=b.distanceX([n,l]),M=b.distanceY([n,l]);return Math.hypot(T,M)}getWrap(n,l,m){return m}getTileBoundingVolume(n,l,m,b){var T,M;let R=0,L=0;if(b?.terrain){const B=new c.a1(n.z,l,n.z,n.x,n.y),Y=b.terrain.getMinMaxElevation(B);R=(T=Y.minElevation)!==null&&T!==void 0?T:Math.min(0,m),L=(M=Y.maxElevation)!==null&&M!==void 0?M:Math.max(0,m)}const F=1<<n.z;return new Vr([l+n.x/F,n.y/F,R],[l+(n.x+1)/F,(n.y+1)/F,L])}allowVariableZoom(n,l){const m=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,b=c.an(78.5-m/2,0,60);return!!l.terrain||n.pitch>b}allowWorldCopies(){return!0}prepareNextFrame(){}}class Ea{constructor(n,l,m){this.points=n,this.planes=l,this.aabb=m}static fromInvProjectionMatrix(n,l=1,m=0,b,T){const M=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],R=Math.pow(2,m),L=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($=>function(J,oe,de,pe){const ye=c.aG([],J,oe),be=1/ye[3]/de*pe;return c.b5(ye,ye,[be,be,1/ye[3],be])}($,n,l,R));b&&function($,J,oe,de){const pe=de?4:0,ye=de?0:4;let be=0;const Me=[],_e=[];for(let we=0;we<4;we++){const Be=c.b1([],$[we+ye],$[we+pe]),We=c.b6(Be);c.a_(Be,Be,1/We),Me.push(We),_e.push(Be)}for(let we=0;we<4;we++){const Be=c.b7($[we+pe],_e[we],oe);be=Be!==null&&Be>=0?Math.max(be,Be):Math.max(be,Me[we])}const Ce=function(we,Be){const We=c.b1([],we[Be[0]],we[Be[1]]),$e=c.b1([],we[Be[2]],we[Be[1]]),Ye=[0,0,0,0];return c.b2(Ye,c.b3([],We,$e)),Ye[3]=-c.b4(Ye,we[Be[0]]),Ye}($,J),Re=function(we,Be){const We=c.b8(we),$e=c.b9([],we,1/We),Ye=c.b1([],Be,c.a_([],$e,c.b4(Be,$e))),qe=c.b8(Ye);if(qe>0){const xt=Math.sqrt(1-$e[3]*$e[3]),wt=c.a_([],$e,-$e[3]),ut=c.a$([],wt,c.a_([],Ye,xt/qe));return c.ba(Be,ut)}return null}(oe,Ce);if(Re!==null){const we=Re/c.b4(_e[0],Ce);be=Math.min(be,we)}for(let we=0;we<4;we++){const Be=Math.min(be,Me[we]);$[we+ye]=[$[we+pe][0]+_e[we][0]*Be,$[we+pe][1]+_e[we][1]*Be,$[we+pe][2]+_e[we][2]*Be,1]}}(L,M[0],b,T);const F=M.map($=>{const J=c.b1([],L[$[0]],L[$[1]]),oe=c.b1([],L[$[2]],L[$[1]]),de=c.b2([],c.b3([],J,oe)),pe=-c.b4(de,L[$[1]]);return de.concat(pe)}),B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Y=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const $ of L)for(let J=0;J<3;J++)B[J]=Math.min(B[J],$[J]),Y[J]=Math.max(Y[J],$[J]);return new Ea(L,F,new Vr(B,Y))}}class mi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,l,m){return this._helper.interpolatePadding(n,l,m)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,l,m=!0){this._helper.resize(n,l,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,l){this._helper.overrideNearFarZ(n,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,l){}constructor(n){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(l,m)=>{m=c.an(+m,this.minZoom,this.maxZoom);const b={center:new c.V(l.lng,l.lat),zoom:m};let T=this._helper._lngRange;if(!this._helper._renderWorldCopies&&T===null){const _e=179.9999999999;T=[-_e,_e]}const M=this.tileSize*c.aq(b.zoom);let R=0,L=M,F=0,B=M,Y=0,$=0;const{x:J,y:oe}=this.size;if(this._helper._latRange){const _e=this._helper._latRange;R=c.X(_e[1])*M,L=c.X(_e[0])*M,L-R<oe&&(Y=oe/(L-R))}T&&(F=c.W(c.Y(T[0])*M,0,M),B=c.W(c.Y(T[1])*M,0,M),B<F&&(B+=M),B-F<J&&($=J/(B-F)));const{x:de,y:pe}=xe(M,l);let ye,be;const Me=Math.max($||0,Y||0);if(Me){const _e=new c.P($?(B+F)/2:de,Y?(L+R)/2:pe);return b.center=Te(M,_e).wrap(),b.zoom+=c.at(Me),b}if(this._helper._latRange){const _e=oe/2;pe-_e<R&&(be=R+_e),pe+_e>L&&(be=L-_e)}if(T){const _e=(F+B)/2;let Ce=de;this._helper._renderWorldCopies&&(Ce=c.W(de,_e-M/2,_e+M/2));const Re=J/2;Ce-Re<F&&(ye=F+Re),Ce+Re>B&&(ye=B-Re)}if(ye!==void 0||be!==void 0){const _e=new c.P(ye??de,be??pe);b.center=Te(M,_e).wrap()}return b},this.applyConstrain=(l,m)=>this._helper.applyConstrain(l,m),this._helper=new ir({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(l,m)=>this.defaultConstrain(l,m)},n),this._coveringTilesDetailsProvider=new Du}clone(){const n=new mi;return n.apply(this),n}apply(n,l,m){this._helper.apply(n,l,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const l=[new c.bb(0,n)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new c.P(0,0)),b=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),R=Math.floor(Math.min(m.x,b.x,T.x,M.x)),L=Math.floor(Math.max(m.x,b.x,T.x,M.x)),F=1;for(let B=R-F;B<=L+F;B++)B!==0&&l.push(new c.bb(B,n))}return l}getCameraFrustum(){return Ea.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const l=this.screenPointToLocation(this.centerPoint,n),m=n?n.getElevationForLngLatZoom(l,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(n,l){const m=c.as(this.elevation,this.center.lat),b=this.screenPointToMercatorCoordinateAtZ(l,m),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),M=c.aa.fromLngLat(n),R=new c.aa(M.x-(b.x-T.x),M.y-(b.y-T.y));this.setCenter(R?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,l){return l?this.coordinatePoint(c.aa.fromLngLat(n),l.getElevationForLngLatZoom(n,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(c.aa.fromLngLat(n))}screenPointToLocation(n,l){var m;return(m=this.screenPointToMercatorCoordinate(n,l))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(n,l){if(l){const m=l.pointCoordinate(n);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,l){const m=l||0,b=[n.x,n.y,0,1],T=[n.x,n.y,1,1];c.aG(b,b,this._pixelMatrixInverse),c.aG(T,T,this._pixelMatrixInverse);const M=b[3],R=T[3],L=b[1]/M,F=T[1]/R,B=b[2]/M,Y=T[2]/R,$=B===Y?0:(m-B)/(Y-B);return new c.aa(c.G.number(b[0]/M,T[0]/R,$)/this.worldSize,c.G.number(L,F,$)/this.worldSize,m)}coordinatePoint(n,l=0,m=this._pixelMatrix){const b=[n.x*this.worldSize,n.y*this.worldSize,l,1];return c.aG(b,b,m),new c.P(b[0]/b[3],b[1]/b[3])}getBounds(){const n=Math.max(0,this._helper._height/2-Ue(this));return new Wn().extend(this.screenPointToLocation(new c.P(0,n))).extend(this.screenPointToLocation(new c.P(this._helper._width,n))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(n,l){return l?l.pointCoordinate(n)!=null:n.y>this.height/2-Ue(this)}calculatePosMatrix(n,l=!1,m){var b;const T=(b=n.key)!==null&&b!==void 0?b:c.bc(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),M=l?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(T)){const F=M.get(T);return m?F.f32:F.f64}const R=me(n,this.worldSize);c.S(R,l?this._alignedProjMatrix:this._viewProjMatrix,R);const L={f64:R,f32:new Float32Array(R)};return M.set(T,L),m?L.f32:L.f64}calculateFogMatrix(n){const l=n.key,m=this._fogMatrixCacheF32;if(m.has(l))return m.get(l);const b=me(n,this.worldSize);return c.S(b,this._fogMatrix,b),m.set(l,new Float32Array(b)),m.get(l)}calculateCenterFromCameraLngLatAlt(n,l,m,b){return this._helper.calculateCenterFromCameraLngLatAlt(n,l,m,b)}_calculateNearFarZIfNeeded(n,l,m){if(!this._helper.autoCalculateNearFarZ)return;const b=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=n-b*this._helper._pixelPerMeter/Math.cos(l),M=b<0?T:n,R=Math.PI/2+this.pitchInRadians,L=c.ap(this.fov)*(Math.abs(Math.cos(c.ap(this.roll)))*this.height+Math.abs(Math.sin(c.ap(this.roll)))*this.width)/this.height*(.5+m.y/this.height),F=Math.sin(L)*M/Math.sin(c.an(Math.PI-R-L,.01,Math.PI-.01)),B=Ue(this),Y=Math.atan(B/this._helper.cameraToCenterDistance),$=c.ap(.75),J=Y>$?2*Y*(.5+m.y/(2*B)):$,oe=Math.sin(J)*M/Math.sin(c.an(Math.PI-R-J,.01,Math.PI-.01)),de=Math.min(F,oe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-l)*de+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,l=xe(this.worldSize,this.center),m=l.x,b=l.y;this._helper._pixelPerMeter=c.as(1,this.center.lat)*this.worldSize;const T=c.ap(Math.min(this.pitch,le)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let R;this._calculateNearFarZIfNeeded(M,T,n),R=new Float64Array(16),c.bd(R,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aA(this._invProjMatrix,R),R[8]=2*-n.x/this._helper._width,R[9]=2*n.y/this._helper._height,this._projectionMatrix=c.be(R),c.Q(R,R,[1,-1,1]),c.O(R,R,[0,0,-this._helper.cameraToCenterDistance]),c.bf(R,R,-this.rollInRadians),c.bg(R,R,this.pitchInRadians),c.bf(R,R,-this.bearingInRadians),c.O(R,R,[-m,-b,0]),this._mercatorMatrix=c.Q([],R,[this.worldSize,this.worldSize,this.worldSize]),c.Q(R,R,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,R),c.O(R,R,[0,0,-this.elevation]),this._viewProjMatrix=R,this._invViewProjMatrix=c.aA([],R);const L=[0,0,-1,1];c.aG(L,L,this._invViewProjMatrix),this._cameraPosition=[L[0]/L[3],L[1]/L[3],L[2]/L[3]],this._fogMatrix=new Float64Array(16),c.bd(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,c.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.bf(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.bg(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.bf(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.O(this._fogMatrix,this._fogMatrix,[-m,-b,0]),c.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,R);const F=this._helper._width%2/2,B=this._helper._height%2/2,Y=Math.cos(this.bearingInRadians),$=Math.sin(-this.bearingInRadians),J=m-Math.round(m)+Y*F+$*B,oe=b-Math.round(b)+Y*B+$*F,de=new Float64Array(R);if(c.O(de,de,[J>.5?J-1:J,oe>.5?oe-1:oe,0]),this._alignedProjMatrix=de,R=c.aA(new Float64Array(16),this._pixelMatrix),!R)throw new Error("failed to invert matrix");this._pixelMatrixInverse=R,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new c.P(0,0)),l=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.aG(l,l,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=c.as(1,this.center.lat)*this.worldSize;return je(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,l){const m=c.aa.fromLngLat(n),b=[m.x*this.worldSize,m.y*this.worldSize,l,1];return c.aG(b,b,this._viewProjMatrix),b[2]/b[3]}getProjectionData(n){const{overscaledTileID:l,aligned:m,applyTerrainMatrix:b}=n,T=this._helper.getMercatorTileCoordinates(l),M=l?this.calculatePosMatrix(l,m,!0):null;let R;return R=l&&l.terrainRttPosMatrix32f&&b?l.terrainRttPosMatrix32f:M||c.bh(),{mainMatrix:R,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:R}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,l,m){return 1}transformLightDirection(n){return c.b0(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,l,m,b){const T=this.calculatePosMatrix(m);let M;b?(M=[n,l,b(n,l),1],c.aG(M,M,T)):(M=[n,l,0,1],kh(M,M,T));const R=M[3];return{point:new c.P(M[0]/R,M[1]/R),signedDistanceFromCamera:R,isOccluded:!1}}populateCache(n){for(const l of n)this.calculatePosMatrix(l)}getMatrixForModel(n,l){const m=c.aa.fromLngLat(n,l),b=m.meterInMercatorCoordinateUnits(),T=c.bi();return c.O(T,T,[m.x,m.y,m.z]),c.bf(T,T,Math.PI),c.bg(T,T,Math.PI/2),c.Q(T,T,[-b,b,b]),T}getProjectionDataForCustomLayer(n=!0){const l=new c.a1(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:l,applyGlobeMatrix:n}),b=me(l,this.worldSize);c.S(b,this._viewProjMatrix,b),m.tileMercatorCoords=[0,0,1,1];const T=[c.a4,c.a4,this.worldSize/this._helper.pixelsPerMeter],M=c.bj();return c.Q(M,b,T),m.fallbackMatrix=M,m.mainMatrix=M,m}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function ol(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function sl(w){if(w.useSlerp)if(w.k<1){const n=c.bk(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),l=c.bk(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),m=new Float64Array(4);c.bl(m,n,l,w.k);const b=c.bm(m);w.tr.setRoll(b.roll),w.tr.setPitch(b.pitch),w.tr.setBearing(b.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(c.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(c.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(c.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function Gl(w,n,l,m,b){const T=b.padding,M=xe(b.worldSize,l.getNorthWest()),R=xe(b.worldSize,l.getNorthEast()),L=xe(b.worldSize,l.getSouthEast()),F=xe(b.worldSize,l.getSouthWest()),B=c.ap(-m),Y=M.rotate(B),$=R.rotate(B),J=L.rotate(B),oe=F.rotate(B),de=new c.P(Math.max(Y.x,$.x,oe.x,J.x),Math.max(Y.y,$.y,oe.y,J.y)),pe=new c.P(Math.min(Y.x,$.x,oe.x,J.x),Math.min(Y.y,$.y,oe.y,J.y)),ye=de.sub(pe),be=(b.width-(T.left+T.right+n.left+n.right))/ye.x,Me=(b.height-(T.top+T.bottom+n.top+n.bottom))/ye.y;if(Me<0||be<0)return void ol();const _e=Math.min(c.at(b.scale*Math.min(be,Me)),w.maxZoom),Ce=c.P.convert(w.offset),Re=new c.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(c.ap(m)),we=Ce.add(Re).mult(b.scale/c.aq(_e));return{center:Te(b.worldSize,M.add(L).div(2).sub(we)),zoom:_e,bearing:m}}class Xr{get useGlobeControls(){return!1}handlePanInertia(n,l){const m=n.mag(),b=Math.abs(Ue(l));return{easingOffset:n.mult(Math.min(.75*b/m,1)),easingCenter:l.center}}handleMapControlsRollPitchBearingZoom(n,l){n.bearingDelta&&l.setBearing(l.bearing+n.bearingDelta),n.pitchDelta&&l.setPitch(l.pitch+n.pitchDelta),n.rollDelta&&l.setRoll(l.roll+n.rollDelta),n.zoomDelta&&l.setZoom(l.zoom+n.zoomDelta)}handleMapControlsPan(n,l,m){n.around.distSqr(l.centerPoint)<.01||l.setLocationAtPoint(m,n.around)}cameraForBoxAndBearing(n,l,m,b,T){return Gl(n,l,m,b,T)}handleJumpToCenterZoom(n,l){n.zoom!==(l.zoom!==void 0?+l.zoom:n.zoom)&&n.setZoom(+l.zoom),l.center!==void 0&&n.setCenter(c.V.convert(l.center))}handleEaseTo(n,l){const m=n.zoom,b=n.padding,T={roll:n.roll,pitch:n.pitch,bearing:n.bearing},M={roll:l.roll===void 0?n.roll:l.roll,pitch:l.pitch===void 0?n.pitch:l.pitch,bearing:l.bearing===void 0?n.bearing:l.bearing},R=l.zoom!==void 0,L=!n.isPaddingEqual(l.padding);let F=!1;const B=R?+l.zoom:n.zoom;let Y=n.centerPoint.add(l.offsetAsPoint);const $=n.screenPointToLocation(Y),{center:J,zoom:oe}=n.applyConstrain(c.V.convert(l.center||$),B??m);Ph(n,J);const de=xe(n.worldSize,$),pe=xe(n.worldSize,J).sub(de),ye=c.aq(oe-m);return F=oe!==m,{easeFunc:be=>{if(F&&n.setZoom(c.G.number(m,oe,be)),c.bn(T,M)||sl({startEulerAngles:T,endEulerAngles:M,tr:n,k:be,useSlerp:T.roll!=M.roll}),L&&(n.interpolatePadding(b,l.padding,be),Y=n.centerPoint.add(l.offsetAsPoint)),l.around)n.setLocationAtPoint(l.around,l.aroundPoint);else{const Me=c.aq(n.zoom-m),_e=oe>m?Math.min(2,ye):Math.max(.5,ye),Ce=Math.pow(_e,1-be),Re=Te(n.worldSize,de.add(pe.mult(be*Ce)).mult(Me));n.setLocationAtPoint(n.renderWorldCopies?Re.wrap():Re,Y)}},isZooming:F,elevationCenter:J}}handleFlyTo(n,l){const m=l.zoom!==void 0,b=n.zoom,T=n.applyConstrain(c.V.convert(l.center||l.locationAtOffset),m?+l.zoom:b),M=T.center,R=T.zoom;Ph(n,M);const L=xe(n.worldSize,l.locationAtOffset),F=xe(n.worldSize,M).sub(L),B=F.mag(),Y=c.aq(R-b);let $;if(l.minZoom!==void 0){const J=Math.min(+l.minZoom,b,R),oe=n.applyConstrain(M,J).zoom;$=c.aq(oe-b)}return{easeFunc:(J,oe,de,pe)=>{n.setZoom(J===1?R:b+c.at(oe));const ye=J===1?M:Te(n.worldSize,L.add(F.mult(de)).mult(oe));n.setLocationAtPoint(n.renderWorldCopies?ye.wrap():ye,pe)},scaleOfZoom:Y,targetCenter:M,scaleOfMinZoom:$,pixelPathLength:B}}}class xi{constructor(n,l,m){this.blendFunction=n,this.blendColor=l,this.mask=m}}xi.Replace=[1,0],xi.disabled=new xi(xi.Replace,c.bo.transparent,[!1,!1,!1,!1]),xi.unblended=new xi(xi.Replace,c.bo.transparent,[!0,!0,!0,!0]),xi.alphaBlended=new xi([1,771],c.bo.transparent,[!0,!0,!0,!0]);const Xi=2305;class En{constructor(n,l,m){this.enable=n,this.mode=l,this.frontFace=m}}En.disabled=new En(!1,1029,Xi),En.backCCW=new En(!0,1029,Xi),En.frontCCW=new En(!0,1028,Xi);class hn{constructor(n,l,m){this.func=n,this.mask=l,this.range=m}}hn.ReadOnly=!1,hn.ReadWrite=!0,hn.disabled=new hn(519,hn.ReadOnly,[0,1]);const Ss=7680;class Pn{constructor(n,l,m,b,T,M){this.test=n,this.ref=l,this.mask=m,this.fail=b,this.depthFail=T,this.pass=M}}Pn.disabled=new Pn({func:519,mask:0},0,0,Ss,Ss,Ss);const Zl=new WeakMap;function eo(w){var n;if(Zl.has(w))return Zl.get(w);{const l=(n=w.getParameter(w.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return Zl.set(w,l),l}}class ll{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const l=n.context,m=l.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const b=new c.aV;b.emplaceBack(-1,-1),b.emplaceBack(2,-1),b.emplaceBack(-1,2);const T=new c.aX;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Ts(l.createVertexBuffer(b,nr.members),l.createIndexBuffer(T),c.aW.simpleSegment(0,0,b.length,T.length)),this._resultBuffer=new Uint8Array(4),l.activeTexture.set(m.TEXTURE1);const M=m.createTexture();m.bindTexture(m.TEXTURE_2D,M),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=l.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),eo(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,l){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,l),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,l=n.gl;n.activeTexture.set(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,l){const m=this._cachedRenderContext.context,b=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:c.bo.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,b.TRIANGLES,hn.disabled,Pn.disabled,xi.unblended,En.disabled,((T,M)=>({u_input:T,u_output_expected:M}))(n,l),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&eo(b)){b.bindBuffer(b.PIXEL_PACK_BUFFER,this._pbo),b.readBuffer(b.COLOR_ATTACHMENT0),b.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),b.bindBuffer(b.PIXEL_PACK_BUFFER,null);const T=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);b.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&eo(n)){const l=n.clientWaitSync(this._readbackQueue.sync,0,0);if(l===n.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(l===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ll._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let l=0;return l+=n[0]/256,l+=n[1]/65536,l+=n[2]/16777216,n[3]<127&&(l=-l),l/128}}const Es=c.a4/128;function zh(w,n){const l=w.granularity!==void 0?Math.max(w.granularity,1):1,m=l+(w.generateBorders?2:0),b=l+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),T=m+1,M=b+1,R=w.generateBorders?-1:0,L=w.generateBorders||w.extendToNorthPole?-1:0,F=l+(w.generateBorders?1:0),B=l+(w.generateBorders||w.extendToSouthPole?1:0),Y=T*M,$=m*b*6,J=T*M>65536;if(J&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const oe=J||n==="32bit",de=new Int16Array(2*Y);let pe=0;for(let Me=L;Me<=B;Me++)for(let _e=R;_e<=F;_e++){let Ce=_e/l*c.a4;_e===-1&&(Ce=-Es),_e===l+1&&(Ce=c.a4+Es);let Re=Me/l*c.a4;Me===-1&&(Re=w.extendToNorthPole?c.bq:-Es),Me===l+1&&(Re=w.extendToSouthPole?c.br:c.a4+Es),de[pe++]=Ce,de[pe++]=Re}const ye=oe?new Uint32Array($):new Uint16Array($);let be=0;for(let Me=0;Me<b;Me++)for(let _e=0;_e<m;_e++){const Ce=_e+1+Me*T,Re=_e+(Me+1)*T,we=_e+1+(Me+1)*T;ye[be++]=_e+Me*T,ye[be++]=Re,ye[be++]=Ce,ye[be++]=Ce,ye[be++]=Re,ye[be++]=we}return{vertices:de.buffer.slice(0),indices:ye.buffer.slice(0),uses32bitIndices:oe}}const Fh=new c.aU({fill:new c.bs(128,2),line:new c.bs(512,0),tile:new c.bs(128,32),stencil:new c.bs(128,1),circle:3});class jh{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Sa.projectionGlobe}get vertexShaderPreludeCode(){return Sa.projectionMercator.vertexSource}get subdivisionGranularity(){return Fh}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new ll(n));const l=c.X(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-l*Math.PI*2))-.5*Math.PI,b=this._errorMeasurement.updateErrorLoop(l,m),T=ae();b!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=b,this._errorMeasurementLastChangeTime=T);const M=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bt(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bu(M))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,l,m,b,T){const M=(T==="stencil"?Fh.stencil:Fh.tile).getGranularityForZoomLevel(l.z);return this._getMesh(n,{granularity:M,generateBorders:m,extendToNorthPole:l.y===0&&b,extendToSouthPole:l.y===(1<<l.z)-1&&b})}_getMesh(n,l){const m=this._getMeshKey(l);if(m in this._tileMeshCache)return this._tileMeshCache[m];const b=function(T,M){const R=zh(M,"16bit"),L=c.aV.deserialize({arrayBuffer:R.vertices,length:R.vertices.byteLength/2/2}),F=c.aX.deserialize({arrayBuffer:R.indices,length:R.indices.byteLength/2/3});return new Ts(T.createVertexBuffer(L,nr.members),T.createIndexBuffer(F),c.aW.simpleSegment(0,0,L.length,F.length))}(n,l);return this._tileMeshCache[m]=b,b}recalculate(n){}hasTransition(){const n=ae();let l=!1;return l=l||(n-this._errorMeasurementLastChangeTime)/1e3<.7,l=l||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,l}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const hf=new c.t({type:new c.D(c.u.projection.type)});class $l extends c.E{constructor(n){super(),this._transitionable=new c.x(hf,void 0),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0)),this._mercatorProjection=new yr,this._verticalPerspectiveProjection=new jh}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof c.bv){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,l,m,b,T){return this.currentProjection.getMeshFromTileID(n,l,m,b,T)}setProjection(n){this._transitionable.setValue("type",n?.type||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function pg(w){const n=df(w.worldSize,w.center.lat);return 2*Math.PI*n}function As(w,n,l,m,b){const T=1/(1<<b),M=n/c.a4*T+m*T,R=c.bx((w/c.a4*T+l*T)*Math.PI*2+Math.PI,2*Math.PI),L=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,F=Math.cos(L),B=new Float64Array(3);return B[0]=Math.sin(R)*F,B[1]=Math.sin(L),B[2]=Math.cos(R)*F,B}function Qr(w){return function(n,l){const m=Math.cos(l),b=new Float64Array(3);return b[0]=Math.sin(n)*m,b[1]=Math.sin(l),b[2]=Math.cos(n)*m,b}(w.lng*Math.PI/180,w.lat*Math.PI/180)}function df(w,n){return w/(2*Math.PI)/Math.cos(n*Math.PI/180)}function mg(w){const n=Math.asin(w[1])/Math.PI*180,l=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(l>1e-6){const m=w[0]/l,b=Math.acos(w[2]/l),T=(m>0?b:-b)/Math.PI*180;return new c.V(c.W(T,-180,180),n)}return new c.V(0,n)}function Ur(w){return Math.cos(w*Math.PI/180)}function _r(w,n){const l=Ur(w),m=Ur(n);return c.at(m/l)}function jo(w,n){const l=w.rotate(n.bearingInRadians),m=n.zoom+_r(n.center.lat,0),b=c.bt(1/Ur(n.center.lat),1/Ur(Math.min(Math.abs(n.center.lat),60)),c.bw(m,7,3,0,1)),T=360/pg({worldSize:n.worldSize,center:{lat:n.center.lat}});return new c.V(n.center.lng-l.x*T*b,c.an(n.center.lat+l.y*T,-c.ao,c.ao))}function Iu(w){const n=.5*w,l=Math.sin(n),m=Math.cos(n);return Math.log(l+m)-Math.log(m-l)}function Np(w,n,l,m){const b=w.lat+l*m;if(Math.abs(l)>1){const T=(Math.sign(w.lat+l)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,M=Math.abs(w.lat+l)*Math.PI/180,R=Iu(T+m*(M-T)),L=Iu(T),F=Iu(M);return new c.V(w.lng+n*((R-L)/(F-L)),b)}return new c.V(w.lng+n*m,b)}class ff{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,l,m,b){const T=`${n.z}_${n.x}_${n.y}_${b?.terrain?"t":""}`,M=this._cache.get(T);if(M)return M;const R=this._cachePrevious.get(T);if(R)return this._cache.set(T,R),R;const L=this._boundingVolumeFactory(n,l,m,b);return this._cache.set(T,L),this._hadAnyChanges=!0,L}}class Bo{constructor(n,l,m,b){this.min=m,this.max=b,this.points=n,this.planes=l}static fromAabb(n,l){const m=[];for(let b=0;b<8;b++)m.push([1&~b?n[0]:l[0],(b>>1&1)==1?l[1]:n[1],(b>>2&1)==1?l[2]:n[2]]);return new Bo(m,[[-1,0,0,l[0]],[1,0,0,-n[0]],[0,-1,0,l[1]],[0,1,0,-n[1]],[0,0,-1,l[2]],[0,0,1,-n[2]]],n,l)}static fromCenterSizeAngles(n,l,m){const b=c.bA([],m[0],m[1],m[2]),T=c.bB([],[l[0],0,0],b),M=c.bB([],[0,l[1],0],b),R=c.bB([],[0,0,l[2]],b),L=[...n],F=[...n];for(let Y=0;Y<8;Y++)for(let $=0;$<3;$++){const J=n[$]+T[$]*(1&~Y?-1:1)+M[$]*((Y>>1&1)==1?1:-1)+R[$]*((Y>>2&1)==1?1:-1);L[$]=Math.min(L[$],J),F[$]=Math.max(F[$],J)}const B=[];for(let Y=0;Y<8;Y++){const $=[...n];c.a$($,$,c.a_([],T,1&~Y?-1:1)),c.a$($,$,c.a_([],M,(Y>>1&1)==1?1:-1)),c.a$($,$,c.a_([],R,(Y>>2&1)==1?1:-1)),B.push($)}return new Bo(B,[[...T,-c.b4(T,B[0])],[...M,-c.b4(M,B[0])],[...R,-c.b4(R,B[0])],[-T[0],-T[1],-T[2],-c.b4(T,B[7])],[-M[0],-M[1],-M[2],-c.b4(M,B[7])],[-R[0],-R[1],-R[2],-c.b4(R,B[7])]],L,F)}intersectsFrustum(n){let l=!0;const m=this.points.length,b=this.planes.length,T=n.planes.length,M=n.points.length;for(let R=0;R<T;R++){const L=n.planes[R];let F=0;for(let B=0;B<m;B++){const Y=this.points[B];L[0]*Y[0]+L[1]*Y[1]+L[2]*Y[2]+L[3]>=0&&F++}if(F===0)return 0;F<m&&(l=!1)}if(l)return 2;for(let R=0;R<b;R++){const L=this.planes[R];let F=0;for(let B=0;B<M;B++){const Y=n.points[B];L[0]*Y[0]+L[1]*Y[1]+L[2]*Y[2]+L[3]>=0&&F++}if(F===0)return 0}return 1}intersectsPlane(n){const l=this.points.length;let m=0;for(let b=0;b<l;b++){const T=this.points[b];n[0]*T[0]+n[1]*T[1]+n[2]*T[2]+n[3]>=0&&m++}return m===l?2:m===0?0:1}}function pf(w,n,l){const m=w-n;return m<0?-m:Math.max(0,m-l)}function Pp(w,n,l,m,b){const T=w-l;let M;return M=T<0?Math.min(-T,1+T-b):T>1?Math.min(Math.max(T-b,0),1-T):0,Math.max(M,pf(n,m,b))}class gg{constructor(){this._boundingVolumeCache=new ff(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,l,m,b){const T=1<<m.z,M=1/T,R=m.x/T,L=m.y/T;let F=2;return F=Math.min(F,Pp(n,l,R,L,M)),F=Math.min(F,Pp(n,l,R+.5,-L-M,M)),F=Math.min(F,Pp(n,l,R+.5,2-L-M,M)),F}getWrap(n,l,m){const b=1<<l.z,T=1/b,M=l.x/b,R=pf(n.x,M,T),L=pf(n.x,M-1,T),F=pf(n.x,M+1,T),B=Math.min(R,L,F);return B===F?1:B===L?-1:0}allowVariableZoom(n,l){return Yt(n,l)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,l,m,b){return this._boundingVolumeCache.getTileBoundingVolume(n,l,m,b)}_computeTileBoundingVolume(n,l,m,b){var T,M;let R=0,L=0;if(b?.terrain){const F=new c.a1(n.z,l,n.z,n.x,n.y),B=b.terrain.getMinMaxElevation(F);R=(T=B.minElevation)!==null&&T!==void 0?T:Math.min(0,m),L=(M=B.maxElevation)!==null&&M!==void 0?M:Math.max(0,m)}if(R/=c.bD,L/=c.bD,R+=1,L+=1,n.z<=0)return Bo.fromAabb([-L,-L,-L],[L,L,L]);if(n.z===1)return Bo.fromAabb([n.x===0?-L:0,n.y===0?0:-L,-L],[n.x===0?0:L,n.y===0?L:0,L]);{const F=[As(0,0,n.x,n.y,n.z),As(c.a4,0,n.x,n.y,n.z),As(c.a4,c.a4,n.x,n.y,n.z),As(0,c.a4,n.x,n.y,n.z)],B=[];for(const Ye of F)B.push(c.a_([],Ye,L));if(L!==R)for(const Ye of F)B.push(c.a_([],Ye,R));n.y===0&&B.push([0,1,0]),n.y===(1<<n.z)-1&&B.push([0,-1,0]);const Y=[1,1,1],$=[-1,-1,-1];for(const Ye of B)for(let qe=0;qe<3;qe++)Y[qe]=Math.min(Y[qe],Ye[qe]),$[qe]=Math.max($[qe],Ye[qe]);const J=As(c.a4/2,c.a4/2,n.x,n.y,n.z),oe=c.b3([],[0,1,0],J);c.b2(oe,oe);const de=c.b3([],J,oe);c.b2(de,de);const pe=c.b3([],F[2],F[1]);c.b2(pe,pe);const ye=c.b3([],F[0],F[3]);c.b2(ye,ye),B.push(c.a_([],J,L)),n.y>=(1<<n.z)/2&&B.push(c.a_([],As(c.a4/2,0,n.x,n.y,n.z),L)),n.y<(1<<n.z)/2&&B.push(c.a_([],As(c.a4/2,c.a4,n.x,n.y,n.z),L));const be=yg(J,B),Me=yg(de,B),_e=[-J[0],-J[1],-J[2],be.max],Ce=[J[0],J[1],J[2],-be.min],Re=[-de[0],-de[1],-de[2],Me.max],we=[de[0],de[1],de[2],-Me.min],Be=[...pe,0],We=[...ye,0],$e=[];return n.y===0?$e.push(c.bC(We,Be,_e),c.bC(We,Be,Ce)):$e.push(c.bC(Re,Be,_e),c.bC(Re,Be,Ce),c.bC(Re,We,_e),c.bC(Re,We,Ce)),n.y===(1<<n.z)-1?$e.push(c.bC(We,Be,_e),c.bC(We,Be,Ce)):$e.push(c.bC(we,Be,_e),c.bC(we,Be,Ce),c.bC(we,We,_e),c.bC(we,We,Ce)),new Bo($e,[_e,Ce,Re,we,Be,We],Y,$)}}}function yg(w,n){let l=1/0,m=-1/0;for(const b of n){const T=c.b4(w,b);l=Math.min(l,T),m=Math.max(m,T)}return{min:l,max:m}}class mf{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,l,m){return this._helper.interpolatePadding(n,l,m)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,l){this._helper.resize(n,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,l){this._helper.overrideNearFarZ(n,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(n){this._cachedClippingPlane=c.bE(),this._projectionMatrix=c.bi(),this._globeViewProjMatrix32f=c.bh(),this._globeViewProjMatrixNoCorrection=c.bi(),this._globeViewProjMatrixNoCorrectionInverted=c.bi(),this._globeProjMatrixInverted=c.bi(),this._cameraPosition=c.by(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(l,m)=>{const b=c.an(l.lat,-c.ao,c.ao),T=c.an(+m,this.minZoom+_r(0,b),this.maxZoom);return{center:new c.V(l.lng,b),zoom:T}},this.applyConstrain=(l,m)=>this._helper.applyConstrain(l,m),this._helper=new ir({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(l,m)=>this.defaultConstrain(l,m)},n),this._coveringTilesDetailsProvider=new gg}clone(){const n=new mf;return n.apply(this),n}apply(n,l){this._globeLatitudeErrorCorrectionRadians=l||0,this._helper.apply(n)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=c.by();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:l,applyGlobeMatrix:m}=n,b=this._helper.getMercatorTileCoordinates(l);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:b,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const l=this.pitchInRadians,m=this.cameraToCenterDistance/n,b=Math.sin(l)*m,T=Math.cos(l)*m+1,M=1/Math.sqrt(b*b+T*T)*1;let R=-b,L=T;const F=Math.sqrt(R*R+L*L);R/=F,L/=F;const B=[0,R,L];c.bF(B,B,[0,0,0],-this.bearingInRadians),c.bG(B,B,[0,0,0],-1*this.center.lat*Math.PI/180),c.bH(B,B,[0,0,0],this.center.lng*Math.PI/180);const Y=1/c.b6(B);return c.a_(B,B,Y),[...B,-M*Y]}isLocationOccluded(n){return!this.isSurfacePointVisible(Qr(n))}transformLightDirection(n){const l=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,b=Math.cos(m),T=[Math.sin(l)*b,Math.sin(m),Math.cos(l)*b],M=[T[2],0,-T[0]],R=[0,0,0];c.b3(R,M,T),c.b2(M,M),c.b2(R,R);const L=[0,0,0];return c.b2(L,[M[0]*n[0]+R[0]*n[1]+T[0]*n[2],M[1]*n[0]+R[1]*n[1]+T[1]*n[2],M[2]*n[0]+R[2]*n[1]+T[2]*n[2]]),L}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,l,m){const b=function(R,L,F){const B=1/(1<<F.z);return new c.aa(R/c.a4*B+F.x*B,L/c.a4*B+F.y*B)}(n,l,m.canonical),T=(M=b.y,[c.bx(b.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(n,l,m,b){const T=m.canonical,M=As(n,l,T.x,T.y,T.z),R=1+(b?b(n,l):0)/c.bD,L=[M[0]*R,M[1]*R,M[2]*R,1];c.aG(L,L,this._globeViewProjMatrixNoCorrection);const F=this._cachedClippingPlane,B=F[0]*M[0]+F[1]*M[1]+F[2]*M[2]+F[3]<0;return{point:new c.P(L[0]/L[3],L[1]/L[3]),signedDistanceFromCamera:L[3],isOccluded:B}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=df(this.worldSize,this.center.lat),l=c.bj(),m=c.bj();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),c.bd(l,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const b=this.centerOffset;l[8]=2*-b.x/this._helper._width,l[9]=2*b.y/this._helper._height,this._projectionMatrix=c.be(l),this._globeProjMatrixInverted=c.bj(),c.aA(this._globeProjMatrixInverted,l),c.O(l,l,[0,0,-this.cameraToCenterDistance]),c.bf(l,l,this.rollInRadians),c.bg(l,l,-this.pitchInRadians),c.bf(l,l,this.bearingInRadians),c.O(l,l,[0,0,-n]);const T=c.by();T[0]=n,T[1]=n,T[2]=n,c.bg(m,l,this.center.lat*Math.PI/180),c.bI(m,m,-this.center.lng*Math.PI/180),c.Q(m,m,T),this._globeViewProjMatrixNoCorrection=m,c.bg(l,l,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bI(l,l,-this.center.lng*Math.PI/180),c.Q(l,l,T),this._globeViewProjMatrix32f=new Float32Array(l),this._globeViewProjMatrixNoCorrectionInverted=c.bj(),c.aA(this._globeViewProjMatrixNoCorrectionInverted,m);const M=c.by();this._cameraPosition=c.by(),this._cameraPosition[2]=this.cameraToCenterDistance/n,c.bF(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),c.bG(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),c.bF(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),c.a$(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bG(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),c.bH(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const R=c.be(this._globeViewProjMatrixNoCorrectionInverted);c.Q(R,R,[1,1,-1]),this._cachedFrustum=Ea.fromInvProjectionMatrix(R,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){c.w("calculateFogMatrix is not supported on globe projection.");const l=c.bj();return c.ar(l),l}getVisibleUnwrappedCoordinates(n){return[new c.bb(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,l){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=Qr(n);c.a_(m,m,1+l/c.bD);const b=c.bE();return c.aG(b,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),b[2]/b[3]}populateCache(n){}getBounds(){const n=.5*this.width,l=.5*this.height,m=[new c.P(0,0),new c.P(n,0),new c.P(this.width,0),new c.P(this.width,l),new c.P(this.width,this.height),new c.P(n,this.height),new c.P(0,this.height),new c.P(0,l)],b=[];for(const Y of m)b.push(this.unprojectScreenPoint(Y));let T=0,M=0,R=0,L=0;const F=this.center;for(const Y of b){const $=c.bJ(F.lng,Y.lng),J=c.bJ(F.lat,Y.lat);$<M&&(M=$),$>T&&(T=$),J<L&&(L=J),J>R&&(R=J)}const B=[F.lng+M,F.lat+L,F.lng+T,F.lat+R];return this.isSurfacePointOnScreen([0,1,0])&&(B[3]=90,B[0]=-180,B[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(B[1]=-90,B[0]=-180,B[2]=180),new Wn(B)}calculateCenterFromCameraLngLatAlt(n,l,m,b){return this._helper.calculateCenterFromCameraLngLatAlt(n,l,m,b)}setLocationAtPoint(n,l){const m=Qr(this.unprojectScreenPoint(l)),b=Qr(n),T=c.by();c.bK(T);const M=c.by();c.bH(M,m,T,-this.center.lng*Math.PI/180),c.bG(M,M,T,this.center.lat*Math.PI/180);const R=b[0]*b[0]+b[2]*b[2],L=M[0]*M[0];if(R<L)return;const F=Math.sqrt(R-L),B=-F,Y=c.bL(b[0],b[2],M[0],F),$=c.bL(b[0],b[2],M[0],B),J=c.by();c.bH(J,b,T,-Y);const oe=c.bL(J[1],J[2],M[1],M[2]),de=c.by();c.bH(de,b,T,-$);const pe=c.bL(de[1],de[2],M[1],M[2]),ye=.5*Math.PI,be=oe>=-ye&&oe<=ye,Me=pe>=-ye&&pe<=ye;let _e,Ce;if(be&&Me){const We=this.center.lng*Math.PI/180,$e=this.center.lat*Math.PI/180;c.bM(Y,We)+c.bM(oe,$e)<c.bM($,We)+c.bM(pe,$e)?(_e=Y,Ce=oe):(_e=$,Ce=pe)}else if(be)_e=Y,Ce=oe;else{if(!Me)return;_e=$,Ce=pe}const Re=_e/Math.PI*180,we=Ce/Math.PI*180,Be=this.center.lat;this.setCenter(new c.V(Re,c.an(we,-90,90))),this.setZoom(this.zoom+_r(Be,this.center.lat))}locationToScreenPoint(n,l){const m=Qr(n);if(l){const b=l.getElevationForLngLatZoom(n,this._helper._tileZoom);c.a_(m,m,1+b/c.bD)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(n){const l=c.bE();return c.aG(l,[...n,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],new c.P((.5*l[0]+.5)*this.width,(.5*-l[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,l){if(l){const m=l.pointCoordinate(n);if(m)return m}return c.aa.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,l){var m;return(m=this.screenPointToMercatorCoordinate(n,l))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(n,l){const m=this._cameraPosition,b=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(m,b)}getRayDirectionFromPixel(n){const l=c.bE();l[0]=n.x/this.width*2-1,l[1]=-1*(n.y/this.height*2-1),l[2]=1,l[3]=1,c.aG(l,l,this._globeViewProjMatrixNoCorrectionInverted),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3];const m=c.by();m[0]=l[0]-this._cameraPosition[0],m[1]=l[1]-this._cameraPosition[1],m[2]=l[2]-this._cameraPosition[2];const b=c.by();return c.b2(b,m),b}isSurfacePointVisible(n){const l=this._cachedClippingPlane;return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]+l[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const l=c.bE();return c.aG(l,[...n,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3],l[0]>-1&&l[0]<1&&l[1]>-1&&l[1]<1&&l[2]>-1&&l[2]<1}rayPlanetIntersection(n,l){const m=c.b4(n,l),b=c.by(),T=c.by();c.a_(T,l,m),c.b1(b,n,T);const M=1-c.b4(b,b);if(M<0)return null;const R=c.b4(n,n)-1,L=-m+(m<0?1:-1)*Math.sqrt(M),F=R/L,B=L;return{tMin:Math.min(F,B),tMax:Math.max(F,B)}}unprojectScreenPoint(n){const l=this._cameraPosition,m=this.getRayDirectionFromPixel(n),b=this.rayPlanetIntersection(l,m);if(b){const B=c.by();c.a$(B,l,[m[0]*b.tMin,m[1]*b.tMin,m[2]*b.tMin]);const Y=c.by();return c.b2(Y,B),mg(Y)}const T=this._cachedClippingPlane,M=T[0]*m[0]+T[1]*m[1]+T[2]*m[2],R=-c.ba(T,l)/M,L=c.by();if(R>0)c.a$(L,l,[m[0]*R,m[1]*R,m[2]*R]);else{const B=c.by();c.a$(B,l,[2*m[0],2*m[1],2*m[2]]);const Y=c.ba(this._cachedClippingPlane,B);c.b1(L,B,[this._cachedClippingPlane[0]*Y,this._cachedClippingPlane[1]*Y,this._cachedClippingPlane[2]*Y])}const F=function(B){const Y=c.by();return Y[0]=B[0]*-B[3],Y[1]=B[1]*-B[3],Y[2]=B[2]*-B[3],{center:Y,radius:Math.sqrt(1-B[3]*B[3])}}(T);return mg(function(B,Y,$){const J=c.by();c.b1(J,$,B);const oe=c.by();return c.bz(oe,B,J,Y/c.b8(J)),oe}(F.center,F.radius,L))}getMatrixForModel(n,l){const m=c.V.convert(n),b=1/c.bD,T=c.bi();return c.bI(T,T,m.lng/180*Math.PI),c.bg(T,T,-m.lat/180*Math.PI),c.O(T,T,[0,0,1+l/c.bD]),c.bg(T,T,.5*Math.PI),c.Q(T,T,[b,b,b]),T}getProjectionDataForCustomLayer(n=!0){const l=this.getProjectionData({overscaledTileID:new c.a1(0,0,0,0,0),applyGlobeMatrix:n});return l.tileMercatorCoords=[0,0,1,1],l}getFastPathSimpleProjectionMatrix(n){}}class gf{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,l,m){return this._helper.interpolatePadding(n,l,m)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,l,m=!0){this._helper.resize(n,l,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,l){this._helper.overrideNearFarZ(n,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,l){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=l,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(n){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(l,m)=>this.currentTransform.defaultConstrain(l,m),this.applyConstrain=(l,m)=>this._helper.applyConstrain(l,m),this._helper=new ir({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(l,m)=>this.defaultConstrain(l,m)},n),this._globeness=1,this._mercatorTransform=new mi,this._verticalPerspectiveTransform=new mf}clone(){const n=new gf;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this),n}apply(n){this._helper.apply(n),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const l=this._mercatorTransform.getProjectionData(n),m=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:l.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:l.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return c.bt(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bt(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,l,m){const b=this._mercatorTransform.getPitchedTextCorrection(n,l,m),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,l,m);return c.bt(b,T,this._globeness)}projectTileCoordinates(n,l,m,b){return this.currentTransform.projectTileCoordinates(n,l,m,b)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,l){return this.currentTransform.lngLatToCameraDepth(n,l)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(n,l,m,b){return this._helper.calculateCenterFromCameraLngLatAlt(n,l,m,b)}setLocationAtPoint(n,l){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,l),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(n,l),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(n,l){return this.currentTransform.locationToScreenPoint(n,l)}screenPointToMercatorCoordinate(n,l){return this.currentTransform.screenPointToMercatorCoordinate(n,l)}screenPointToLocation(n,l){return this.currentTransform.screenPointToLocation(n,l)}isPointOnMapSurface(n,l){return this.currentTransform.isPointOnMapSurface(n,l)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,l){return this.currentTransform.getMatrixForModel(n,l)}getProjectionDataForCustomLayer(n=!0){const l=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return l;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return m.fallbackMatrix=l.mainMatrix,m}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class ja{get useGlobeControls(){return!0}handlePanInertia(n,l){const m=jo(n,l);return Math.abs(m.lng-l.center.lng)>180&&(m.lng=l.center.lng+179.5*Math.sign(m.lng-l.center.lng)),{easingCenter:m,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,l){const m=n.around,b=l.screenPointToLocation(m);n.bearingDelta&&l.setBearing(l.bearing+n.bearingDelta),n.pitchDelta&&l.setPitch(l.pitch+n.pitchDelta),n.rollDelta&&l.setRoll(l.roll+n.rollDelta);const T=l.zoom;n.zoomDelta&&l.setZoom(l.zoom+n.zoomDelta);const M=l.zoom-T;if(M===0)return;const R=c.bJ(l.center.lng,b.lng),L=R/(Math.abs(R/180)+1),F=c.bJ(l.center.lat,b.lat),B=l.getRayDirectionFromPixel(m),Y=l.cameraPosition,$=-1*c.b4(Y,B),J=c.by();c.a$(J,Y,[B[0]*$,B[1]*$,B[2]*$]);const oe=c.b6(J)-1,de=Math.exp(.5*-Math.max(oe-.3,0)),pe=df(l.worldSize,l.center.lat)/Math.min(l.width,l.height),ye=c.bw(pe,.9,.5,1,.25),be=(1-c.aq(-M))*Math.min(de,ye),Me=l.center.lat,_e=l.zoom,Ce=new c.V(l.center.lng+L*be,c.an(l.center.lat+F*be,-c.ao,c.ao));l.setLocationAtPoint(b,m);const Re=l.center,we=c.bw(Math.abs(R),45,85,0,1),Be=c.bw(pe,.75,.35,0,1),We=Math.pow(Math.max(we,Be),.25),$e=c.bJ(Re.lng,Ce.lng),Ye=c.bJ(Re.lat,Ce.lat);l.setCenter(new c.V(Re.lng+$e*We,Re.lat+Ye*We).wrap()),l.setZoom(_e+_r(Me,l.center.lat))}handleMapControlsPan(n,l,m){if(!n.panDelta)return;const b=l.center.lat,T=l.zoom;l.setCenter(jo(n.panDelta,l).wrap()),l.setZoom(T+_r(b,l.center.lat))}cameraForBoxAndBearing(n,l,m,b,T){const M=Gl(n,l,m,b,T),R=l.left/T.width*2-1,L=(T.width-l.right)/T.width*2-1,F=l.top/T.height*-2+1,B=(T.height-l.bottom)/T.height*-2+1,Y=c.bJ(m.getWest(),m.getEast())<0,$=Y?m.getEast():m.getWest(),J=Y?m.getWest():m.getEast(),oe=Math.max(m.getNorth(),m.getSouth()),de=Math.min(m.getNorth(),m.getSouth()),pe=$+.5*c.bJ($,J),ye=oe+.5*c.bJ(oe,de),be=T.clone();be.setCenter(M.center),be.setBearing(M.bearing),be.setPitch(0),be.setRoll(0),be.setZoom(M.zoom);const Me=be.modelViewProjectionMatrix,_e=[Qr(m.getNorthWest()),Qr(m.getNorthEast()),Qr(m.getSouthWest()),Qr(m.getSouthEast()),Qr(new c.V(J,ye)),Qr(new c.V($,ye)),Qr(new c.V(pe,oe)),Qr(new c.V(pe,de))],Ce=Qr(M.center);let Re=Number.POSITIVE_INFINITY;for(const we of _e)R<0&&(Re=ja.getLesserNonNegativeNonNull(Re,ja.solveVectorScale(we,Ce,Me,"x",R))),L>0&&(Re=ja.getLesserNonNegativeNonNull(Re,ja.solveVectorScale(we,Ce,Me,"x",L))),F>0&&(Re=ja.getLesserNonNegativeNonNull(Re,ja.solveVectorScale(we,Ce,Me,"y",F))),B<0&&(Re=ja.getLesserNonNegativeNonNull(Re,ja.solveVectorScale(we,Ce,Me,"y",B)));if(Number.isFinite(Re)&&Re!==0)return M.zoom=be.zoom+c.at(Re),M;ol()}handleJumpToCenterZoom(n,l){const m=n.center.lat,b=n.applyConstrain(l.center?c.V.convert(l.center):n.center,n.zoom).center;n.setCenter(b.wrap());const T=l.zoom!==void 0?+l.zoom:n.zoom+_r(m,b.lat);n.zoom!==T&&n.setZoom(T)}handleEaseTo(n,l){const m=n.zoom,b=n.center,T=n.padding,M={roll:n.roll,pitch:n.pitch,bearing:n.bearing},R={roll:l.roll===void 0?n.roll:l.roll,pitch:l.pitch===void 0?n.pitch:l.pitch,bearing:l.bearing===void 0?n.bearing:l.bearing},L=l.zoom!==void 0,F=!n.isPaddingEqual(l.padding);let B=!1;const Y=l.center?c.V.convert(l.center):b,$=n.applyConstrain(Y,m).center;Ph(n,$);const J=n.clone();J.setCenter($),J.setZoom(L?+l.zoom:m+_r(b.lat,Y.lat)),J.setBearing(l.bearing);const oe=new c.P(c.an(n.centerPoint.x+l.offsetAsPoint.x,0,n.width),c.an(n.centerPoint.y+l.offsetAsPoint.y,0,n.height));J.setLocationAtPoint($,oe);const de=(l.offset&&l.offsetAsPoint.mag())>0?J.center:$,pe=L?+l.zoom:m+_r(b.lat,de.lat),ye=m+_r(b.lat,0),be=pe+_r(de.lat,0),Me=c.bJ(b.lng,de.lng),_e=c.bJ(b.lat,de.lat),Ce=c.aq(be-ye);return B=pe!==m,{easeFunc:Re=>{if(c.bn(M,R)||sl({startEulerAngles:M,endEulerAngles:R,tr:n,k:Re,useSlerp:M.roll!=R.roll}),F&&n.interpolatePadding(T,l.padding,Re),l.around)c.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(l.around,l.aroundPoint);else{const we=be>ye?Math.min(2,Ce):Math.max(.5,Ce),Be=Math.pow(we,1-Re),We=Np(b,Me,_e,Re*Be);n.setCenter(We.wrap())}if(B){const we=c.G.number(ye,be,Re)+_r(0,n.center.lat);n.setZoom(we)}},isZooming:B,elevationCenter:de}}handleFlyTo(n,l){const m=l.zoom!==void 0,b=n.center,T=n.zoom,M=n.padding,R=!n.isPaddingEqual(l.padding),L=n.applyConstrain(c.V.convert(l.center||l.locationAtOffset),T).center,F=m?+l.zoom:n.zoom+_r(n.center.lat,L.lat),B=n.clone();B.setCenter(L),B.setZoom(F),B.setBearing(l.bearing);const Y=new c.P(c.an(n.centerPoint.x+l.offsetAsPoint.x,0,n.width),c.an(n.centerPoint.y+l.offsetAsPoint.y,0,n.height));B.setLocationAtPoint(L,Y);const $=B.center;Ph(n,$);const J=function(_e,Ce,Re){const we=Qr(Ce),Be=Qr(Re),We=c.b4(we,Be),$e=Math.acos(We),Ye=pg(_e);return $e/(2*Math.PI)*Ye}(n,b,$),oe=T+_r(b.lat,0),de=F+_r($.lat,0),pe=c.aq(de-oe);let ye;if(typeof l.minZoom=="number"){const _e=+l.minZoom+_r($.lat,0),Ce=Math.min(_e,oe,de)+_r(0,$.lat),Re=n.applyConstrain($,Ce).zoom+_r($.lat,0);ye=c.aq(Re-oe)}const be=c.bJ(b.lng,$.lng),Me=c.bJ(b.lat,$.lat);return{easeFunc:(_e,Ce,Re,we)=>{const Be=Np(b,be,Me,Re);R&&n.interpolatePadding(M,l.padding,_e);const We=_e===1?$:Be;n.setCenter(We.wrap());const $e=oe+c.at(Ce);n.setZoom(_e===1?F:$e+_r(0,We.lat))},scaleOfZoom:pe,targetCenter:$,scaleOfMinZoom:ye,pixelPathLength:J}}static solveVectorScale(n,l,m,b,T){const M=b==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],R=[m[3],m[7],m[11],m[15]],L=n[0]*M[0]+n[1]*M[1]+n[2]*M[2],F=n[0]*R[0]+n[1]*R[1]+n[2]*R[2],B=l[0]*M[0]+l[1]*M[1]+l[2]*M[2],Y=l[0]*R[0]+l[1]*R[1]+l[2]*R[2];return B+T*F===L+T*Y||R[3]*(L-B)+M[3]*(Y-F)+L*Y==B*F?null:(B+M[3]-T*Y-T*R[3])/(B-L-T*Y+T*F)}static getLesserNonNegativeNonNull(n,l){return l!==null&&l>=0&&l<n?l:n}}class yf{constructor(n){this._globe=n,this._mercatorCameraHelper=new Xr,this._verticalPerspectiveCameraHelper=new ja}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,l){return this.currentHelper.handlePanInertia(n,l)}handleMapControlsRollPitchBearingZoom(n,l){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,l)}handleMapControlsPan(n,l,m){this.currentHelper.handleMapControlsPan(n,l,m)}cameraForBoxAndBearing(n,l,m,b,T){return this.currentHelper.cameraForBoxAndBearing(n,l,m,b,T)}handleJumpToCenterZoom(n,l){this.currentHelper.handleJumpToCenterZoom(n,l)}handleEaseTo(n,l){return this.currentHelper.handleEaseTo(n,l)}handleFlyTo(n,l){return this.currentHelper.handleFlyTo(n,l)}}const Nc=(w,n)=>c.B(w,n&&n.filter(l=>l.identifier!=="source.canvas")),zp=c.bN();class Bh extends c.E{constructor(n,l={}){var m,b;super(),this._rtlPluginLoaded=()=>{for(const M in this.tileManagers){const R=this.tileManagers[M].getSource().type;R!=="vector"&&R!=="geojson"||this.tileManagers[M].reload()}},this.map=n,this.dispatcher=new qi(Tn(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(M,R)=>this.getGlyphs(M,R)),this.dispatcher.registerMessageHandler("GI",(M,R)=>this.getImages(M,R)),this.dispatcher.registerMessageHandler("GDA",(M,R)=>this.getDashes(M,R)),this.imageManager=new Ct,this.imageManager.setEventedParent(this);const T=((m=n._container)===null||m===void 0?void 0:m.lang)||typeof document<"u"&&((b=document.documentElement)===null||b===void 0?void 0:b.lang)||void 0;this.glyphManager=new ct(n._requestManager,l.localIdeographFontFamily,T),this.lineAtlas=new bt(256,512),this.crossTileSymbolIndex=new Lc,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",c.bO()),wa().on(il,this._rtlPluginLoaded),this.on("data",M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const R=this.tileManagers[M.sourceId];if(!R)return;const L=R.getSource();if(L&&L.vectorLayerIds)for(const F in this._layers){const B=this._layers[F];B.source===L.id&&this._validateLayer(B)}})}_setInitialValues(){var n;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new c.bP,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((n=this.crossTileSymbolIndex)===null||n===void 0?void 0:n.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(n,l){var m,b,T;this._checkLoaded();const M=l===null?(T=(b=(m=this.stylesheet.state)===null||m===void 0?void 0:m[n])===null||b===void 0?void 0:b.default)!==null&&T!==void 0?T:null:l;if(c.bQ(M,this._globalState[n]))return this;this._globalState[n]=M,this._applyGlobalStateChanges([n])}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const l=[];for(const m in n)!c.bQ(this._globalState[m],n[m].default)&&(l.push(m),this._globalState[m]=n[m].default);this._applyGlobalStateChanges(l)}_applyGlobalStateChanges(n){if(n.length===0)return;const l=new Set,m={};for(const b of n){m[b]=this._globalState[b];for(const T in this._layers){const M=this._layers[T],R=M.getLayoutAffectingGlobalStateRefs(),L=M.getPaintAffectingGlobalStateRefs();if(R.has(b)&&l.add(M.source),L.has(b))for(const{name:F,value:B}of L.get(b))this._updatePaintProperty(M,F,B)}}this.dispatcher.broadcast("UGS",m);for(const b in this.tileManagers)l.has(b)&&(this._reloadSource(b),this._changed=!0)}loadURL(n,l={},m){this.fire(new c.l("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const b=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;c.j(b,this._loadStyleRequest).then(M=>{this._loadStyleRequest=null,this._load(M.data,l,m)}).catch(M=>{this._loadStyleRequest=null,M&&!T.signal.aborted&&this.fire(new c.k(M))})}loadJSON(n,l={},m){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,H.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(n,l,m)}).catch(()=>{})}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(zp,{validate:!1})}_load(n,l,m){var b,T;let M=l.transformStyle?l.transformStyle(m,n):n;if(!l.validate||!Nc(this,c.C(M))){M=Object.assign({},M),this._loaded=!0,this.stylesheet=M;for(const R in M.sources)this.addSource(R,M.sources[R],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new Vt(this.stylesheet.light),this._setProjectionInternal(((b=this.stylesheet.projection)===null||b===void 0?void 0:b.type)||"mercator"),this.sky=new et(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){var n,l,m;const b=c.bR(this.stylesheet.layers);this.setGlobalState((n=this.stylesheet.state)!==null&&n!==void 0?n:null),this.dispatcher.broadcast("SL",b),this._order=b.map(T=>T.id),this._layers={},this._serializedLayers=null;for(const T of b){const M=c.bS(T,this._globalState);if(M.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=M,c.bT(M)&&this.tileManagers[M.source]){const R=(m=(l=T.paint)===null||l===void 0?void 0:l["raster-fade-duration"])!==null&&m!==void 0?m:M.paint.get("raster-fade-duration");this.tileManagers[M.source].setRasterFadeDuration(R)}}}_loadSprite(n,l=!1,m=void 0){let b;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(T,M,R,L){return c._(this,void 0,void 0,function*(){const F=Se(T),B=R>1?"@2x":"",Y={},$={};for(const{id:J,url:oe}of F){const de=M.transformRequest(nt(oe,B,".json"),"SpriteJSON");Y[J]=c.j(de,L);const pe=M.transformRequest(nt(oe,B,".png"),"SpriteImage");$[J]=ze.getImage(pe,L)}return yield Promise.all([...Object.values(Y),...Object.values($)]),function(J,oe){return c._(this,void 0,void 0,function*(){const de={};for(const pe in J){de[pe]={};const ye=H.getImageCanvasContext((yield oe[pe]).data),be=(yield J[pe]).data;for(const Me in be){const{width:_e,height:Ce,x:Re,y:we,sdf:Be,pixelRatio:We,stretchX:$e,stretchY:Ye,content:qe,textFitWidth:xt,textFitHeight:wt}=be[Me];de[pe][Me]={data:null,pixelRatio:We,sdf:Be,stretchX:$e,stretchY:Ye,content:qe,textFitWidth:xt,textFitHeight:wt,spriteData:{width:_e,height:Ce,x:Re,y:we,context:ye}}}}return de})}(Y,$)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(T=>{if(this._spriteRequest=null,T)for(const M in T){this._spritesImagesIds[M]=[];const R=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter(L=>!(L in T)):[];for(const L of R)this.imageManager.removeImage(L),this._changedImages[L]=!0;for(const L in T[M]){const F=M==="default"?L:`${M}:${L}`;this._spritesImagesIds[M].push(F),F in this.imageManager.images?this.imageManager.updateImage(F,T[M][L],!1):this.imageManager.addImage(F,T[M][L]),l&&(this._changedImages[F]=!0)}}}).catch(T=>{this._spriteRequest=null,b=T,this.fire(new c.k(b))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),m&&m(b)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(n){const l=this.tileManagers[n.source];if(!l)return;const m=n.sourceLayer;if(!m)return;const b=l.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(m)===-1)&&this.fire(new c.k(new Error(`Source layer "${m}" does not exist on source "${b.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.tileManagers)if(!this.tileManagers[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,l=!1){const m=this._serializedAllLayers();if(!n||n.length===0)return Object.values(l?c.bU(m):m);const b=[];for(const T of n)if(m[T]){const M=l?c.bU(m[T]):m[T];b.push(M)}return b}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const l=Object.keys(this._layers);for(const m of l){const b=this._layers[m];b.type!=="custom"&&(n[m]=b.serialize())}return n}hasTransitions(){var n,l,m;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((l=this.sky)===null||l===void 0)&&l.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const b in this.tileManagers)if(this.tileManagers[b].hasTransition())return!0;for(const b in this._layers)if(this._layers[b].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const l=this._changed;if(l){const b=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(b.length||T.length)&&this._updateWorkerLayers(b,T);for(const M in this._updatedSources){const R=this._updatedSources[M];if(R==="reload")this._reloadSource(M);else{if(R!=="clear")throw new Error(`Invalid action ${R}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const m={};for(const b in this.tileManagers){const T=this.tileManagers[b];m[b]=T.used,T.used=!1}for(const b of this._order){const T=this._layers[b];T.recalculate(n,this._availableImages),!T.isHidden(n.zoom)&&T.source&&(this.tileManagers[T.source].used=!0)}for(const b in m){const T=this.tileManagers[b];!!m[b]!=!!T.used&&T.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,l&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const l in this.tileManagers)this.tileManagers[l].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.tileManagers)this.tileManagers[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,l={}){var m;this._checkLoaded();const b=this.serialize();if(n=l.transformStyle?l.transformStyle(b,n):n,((m=l.validate)===null||m===void 0||m)&&Nc(this,c.C(n)))return!1;(n=c.bU(n)).layers=c.bR(n.layers);const T=c.bV(b,n),M=this._getOperationsToPerform(T);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(const R of M.operations)R();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const l=[],m=[];for(const b of n)switch(b.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,b.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,b.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,b.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,b.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,b.args));break;case"addSource":l.push(()=>this.addSource.apply(this,b.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,b.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,b.args));break;case"setLight":l.push(()=>this.setLight.apply(this,b.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,b.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,b.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,b.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,b.args));break;case"setSky":l.push(()=>this.setSky.apply(this,b.args));break;case"setProjection":this.setProjection.apply(this,b.args);break;case"setGlobalState":l.push(()=>this.setGlobalState.apply(this,b.args));break;case"setTransition":l.push(()=>{});break;default:m.push(b.command)}return{operations:l,unimplemented:m}}addImage(n,l){if(this.getImage(n))return this.fire(new c.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,l),this._afterImageUpdated(n)}updateImage(n,l){this.imageManager.updateImage(n,l)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,l,m={}){if(this._checkLoaded(),this.tileManagers[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(c.C.source,`sources.${n}`,l,null,m))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const b=this.tileManagers[n]=new Sn(n,l,this.dispatcher);b.style=this,b.setEventedParent(this,()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:n})),b.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===n)return this.fire(new c.k(new Error(`Source "${n}" cannot be removed while layer "${m}" is using it.`)));const l=this.tileManagers[n];delete this.tileManagers[n],delete this._updatedSources[n],l.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,l){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const m=this.tileManagers[n].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(l),this._changed=!0}getSource(n){return this.tileManagers[n]&&this.tileManagers[n].getSource()}addLayer(n,l,m={}){this._checkLoaded();const b=n.id;if(this.getLayer(b))return void this.fire(new c.k(new Error(`Layer "${b}" already exists on this map.`)));let T;if(n.type==="custom"){if(Nc(this,c.bW(n)))return;T=c.bS(n,this._globalState)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(b,n.source),n=c.bU(n),n=c.e(n,{source:b})),this._validate(c.C.layer,`layers.${b}`,n,{arrayIndex:-1},m))return;T=c.bS(n,this._globalState),this._validateLayer(T),T.setEventedParent(this,{layer:{id:b}})}const M=l?this._order.indexOf(l):this._order.length;if(l&&M===-1)this.fire(new c.k(new Error(`Cannot add layer "${b}" before non-existing layer "${l}".`)));else{if(this._order.splice(M,0,b),this._layerOrderChanged=!0,this._layers[b]=T,this._removedLayers[b]&&T.source&&T.type!=="custom"){const R=this._removedLayers[b];delete this._removedLayers[b],R.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.tileManagers[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(n,l){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===l)return;const m=this._order.indexOf(n);this._order.splice(m,1);const b=l?this._order.indexOf(l):this._order.length;l&&b===-1?this.fire(new c.k(new Error(`Cannot move layer "${n}" before non-existing layer "${l}".`))):(this._order.splice(b,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const l=this._layers[n];if(!l)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${n}".`)));l.setEventedParent(null);const m=this._order.indexOf(n);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=l,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],l.onRemove&&l.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,l,m){this._checkLoaded();const b=this.getLayer(n);b?b.minzoom===l&&b.maxzoom===m||(l!=null&&(b.minzoom=l),m!=null&&(b.maxzoom=m),this._updateLayer(b)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,l,m={}){this._checkLoaded();const b=this.getLayer(n);if(b){if(!c.bQ(b.filter,l))return l==null?(b.setFilter(void 0),void this._updateLayer(b)):void(this._validate(c.C.filter,`layers.${b.id}.filter`,l,null,m)||(b.setFilter(c.bU(l)),this._updateLayer(b)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.bU(this.getLayer(n).filter)}setLayoutProperty(n,l,m,b={}){this._checkLoaded();const T=this.getLayer(n);T?c.bQ(T.getLayoutProperty(l),m)||(T.setLayoutProperty(l,m,b),this._updateLayer(T)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,l){const m=this.getLayer(n);if(m)return m.getLayoutProperty(l);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,l,m,b={}){this._checkLoaded();const T=this.getLayer(n);T?c.bQ(T.getPaintProperty(l),m)||this._updatePaintProperty(T,l,m,b):this.fire(new c.k(new Error(`Cannot style non-existing layer "${n}".`)))}_updatePaintProperty(n,l,m,b={}){n.setPaintProperty(l,m,b)&&this._updateLayer(n),c.bT(n)&&l==="raster-fade-duration"&&this.tileManagers[n.source].setRasterFadeDuration(m),this._changed=!0,this._updatedPaintProps[n.id]=!0,this._serializedLayers=null}getPaintProperty(n,l){return this.getLayer(n).getPaintProperty(l)}setFeatureState(n,l){this._checkLoaded();const m=n.source,b=n.sourceLayer,T=this.tileManagers[m];if(T===void 0)return void this.fire(new c.k(new Error(`The source '${m}' does not exist in the map's style.`)));const M=T.getSource().type;M==="geojson"&&b?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||b?(n.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(b,n.id,l)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,l){this._checkLoaded();const m=n.source,b=this.tileManagers[m];if(b===void 0)return void this.fire(new c.k(new Error(`The source '${m}' does not exist in the map's style.`)));const T=b.getSource().type,M=T==="vector"?n.sourceLayer:void 0;T!=="vector"||M?l&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(M,n.id,l):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const l=n.source,m=n.sourceLayer,b=this.tileManagers[l];if(b!==void 0)return b.getSource().type!=="vector"||m?(n.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),b.getFeatureState(m,n.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=c.bX(this.tileManagers,T=>T.serialize()),l=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,b=this.stylesheet;return c.bY({version:b.version,name:b.name,metadata:b.metadata,light:b.light,sky:b.sky,center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,sprite:b.sprite,glyphs:b.glyphs,transition:b.transition,projection:b.projection,sources:n,layers:l,terrain:m},T=>T!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.tileManagers[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.tileManagers[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const l=M=>this._layers[M].type==="fill-extrusion",m={},b=[];for(let M=this._order.length-1;M>=0;M--){const R=this._order[M];if(l(R)){m[R]=M;for(const L of n){const F=L[R];if(F)for(const B of F)b.push(B)}}}b.sort((M,R)=>R.intersectionZ-M.intersectionZ);const T=[];for(let M=this._order.length-1;M>=0;M--){const R=this._order[M];if(l(R))for(let L=b.length-1;L>=0;L--){const F=b[L].feature;if(m[F.layer.id]<M)break;T.push(F),b.pop()}else for(const L of n){const F=L[R];if(F)for(const B of F)T.push(B.feature)}}return T}queryRenderedFeatures(n,l,m){l&&l.filter&&this._validate(c.C.filter,"queryRenderedFeatures.filter",l.filter,null,l);const b={};if(l&&l.layers){if(!(Array.isArray(l.layers)||l.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const F of l.layers){const B=this._layers[F];if(!B)return this.fire(new c.k(new Error(`The layer '${F}' does not exist in the map's style and cannot be queried for features.`))),[];b[B.source]=!0}}const T=[];l.availableImages=this._availableImages;const M=this._serializedAllLayers(),R=l.layers instanceof Set?l.layers:Array.isArray(l.layers)?new Set(l.layers):null,L=Object.assign(Object.assign({},l),{layers:R,globalState:this._globalState});for(const F in this.tileManagers)l.layers&&!b[F]||T.push(Hr(this.tileManagers[F],this._layers,M,n,L,m,this.map.terrain?(B,Y,$)=>this.map.terrain.getElevation(B,Y,$):void 0));return this.placement&&T.push(function(F,B,Y,$,J,oe,de){const pe={},ye=oe.queryRenderedSymbols($),be=[];for(const Me of Object.keys(ye).map(Number))be.push(de[Me]);be.sort(bn);for(const Me of be){const _e=Me.featureIndex.lookupSymbolFeatures(ye[Me.bucketInstanceId],B,Me.bucketIndex,Me.sourceLayerIndex,{filterSpec:J.filter,globalState:J.globalState},J.layers,J.availableImages,F);for(const Ce in _e){const Re=pe[Ce]=pe[Ce]||[],we=_e[Ce];we.sort((Be,We)=>{const $e=Me.featureSortOrder;if($e){const Ye=$e.indexOf(Be.featureIndex);return $e.indexOf(We.featureIndex)-Ye}return We.featureIndex-Be.featureIndex});for(const Be of we)Re.push(Be)}}return function(Me,_e,Ce){for(const Re in Me)for(const we of Me[Re])xn(we,Ce[_e[Re].source]);return Me}(pe,F,Y)}(this._layers,M,this.tileManagers,n,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(n,l){l?.filter&&this._validate(c.C.filter,"querySourceFeatures.filter",l.filter,null,l);const m=this.tileManagers[n];return m?function(b,T){const M=b.getRenderableIds().map(F=>b.getTileByID(F)),R=[],L={};for(let F=0;F<M.length;F++){const B=M[F],Y=B.tileID.canonical.key;L[Y]||(L[Y]=!0,B.querySourceFeatures(R,T))}return R}(m,l?Object.assign(Object.assign({},l),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(n,l={}){this._checkLoaded();const m=this.light.getLight();let b=!1;for(const M in n)if(!c.bQ(n[M],m[M])){b=!0;break}if(!b)return;const T={now:ae(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,l),this.light.updateTransitions(T)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=n,this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,l={}){this._checkLoaded();const m=this.getSky();let b=!1;if(!n&&!m)return;if(n&&!m)b=!0;else if(!n&&m)b=!0;else for(const M in n)if(!c.bQ(n[M],m[M])){b=!0;break}if(!b)return;const T={now:ae(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,l),this.sky.updateTransitions(T)}_setProjectionInternal(n){const l=function(m,b){const T={constrainOverride:b};if(Array.isArray(m)){const M=new $l({type:m});return{projection:M,transform:new gf(T),cameraHelper:new yf(M)}}switch(m){case"mercator":return{projection:new yr,transform:new mi(T),cameraHelper:new Xr};case"globe":{const M=new $l({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new gf(T),cameraHelper:new yf(M)}}case"vertical-perspective":return{projection:new jh,transform:new mf(T),cameraHelper:new ja};default:return c.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new yr,transform:new mi(T),cameraHelper:new Xr}}}(n,this.map.transformConstrain);this.projection=l.projection,this.map.migrateProjection(l.transform,l.cameraHelper);for(const m in this.tileManagers)this.tileManagers[m].reload()}_validate(n,l,m,b,T={}){return(!T||T.validate!==!1)&&Nc(this,n.call(c.C,c.e({key:l,style:this.serialize(),value:m,styleSpec:c.u},b)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),wa().off(il,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.tileManagers){const m=this.tileManagers[l];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.tileManagers[n].clearTiles()}_reloadSource(n){this.tileManagers[n].resume(),this.tileManagers[n].reload()}_updateSources(n){for(const l in this.tileManagers)this.tileManagers[l].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.tileManagers)this._reloadSource(n)}_updatePlacement(n,l,m,b,T=!1){let M=!1,R=!1;const L={};for(const F of this._order){const B=this._layers[F];if(B.type!=="symbol")continue;if(!L[B.source]){const $=this.tileManagers[B.source];L[B.source]=$.getRenderableIds(!0).map(J=>$.getTileByID(J)).sort((J,oe)=>oe.tileID.overscaledZ-J.tileID.overscaledZ||(J.tileID.isLessThan(oe.tileID)?-1:1))}const Y=this.crossTileSymbolIndex.addLayer(B,L[B.source],n.center.lng);M=M||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(ae(),n.zoom))&&(this.pauseablePlacement=new Oc(n,this.map.terrain,this._order,T,l,m,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(ae()),R=!0),M&&this.pauseablePlacement.placement.setStale()),R||M)for(const F of this._order){const B=this._layers[F];B.type==="symbol"&&this.placement.updateLayerOpacities(B,L[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(ae())}_releaseSymbolFadeTiles(){for(const n in this.tileManagers)this.tileManagers[n].releaseSymbolFadeTiles()}getImages(n,l){return c._(this,void 0,void 0,function*(){const m=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const b=this.tileManagers[l.source];return b&&b.setDependencies(l.tileID.key,l.type,l.icons),m})}getGlyphs(n,l){return c._(this,void 0,void 0,function*(){const m=yield this.glyphManager.getGlyphs(l.stacks),b=this.tileManagers[l.source];return b&&b.setDependencies(l.tileID.key,l.type,[""]),m})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,l={}){this._checkLoaded(),n&&this._validate(c.C.glyphs,"glyphs",n,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}getDashes(n,l){return c._(this,void 0,void 0,function*(){const m={};for(const[b,T]of Object.entries(l.dashes))m[b]=this.lineAtlas.getDash(T.dasharray,T.round);return m})}addSprite(n,l,m={},b){this._checkLoaded();const T=[{id:n,url:l}],M=[...Se(this.stylesheet.sprite),...T];this._validate(c.C.sprite,"sprite",M,null,m)||(this.stylesheet.sprite=M,this._loadSprite(T,!0,b))}removeSprite(n){this._checkLoaded();const l=Se(this.stylesheet.sprite);if(l.find(m=>m.id===n)){if(this._spritesImagesIds[n])for(const m of this._spritesImagesIds[n])this.imageManager.removeImage(m),this._changedImages[m]=!0;l.splice(l.findIndex(m=>m.id===n),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return Se(this.stylesheet.sprite)}setSprite(n,l={},m){this._checkLoaded(),n&&this._validate(c.C.sprite,"sprite",n,null,l)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,m):(this._unloadSprite(),m&&m(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const n in this.tileManagers){const l=this.tileManagers[n];if(l.setEventedParent(null),l._tiles){for(const m in l._tiles)l._tiles[m].unloadVectorData();l._tiles={}}l._cache.reset(),l.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const n in this._layers){const l=this._layers[n];l.setEventedParent(null),l.onRemove&&l.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Ms=c.aT([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Fp{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,l,m,b,T,M,R,L,F){this.context=n;let B=this.boundPaintVertexBuffers.length!==b.length;for(let Y=0;!B&&Y<b.length;Y++)this.boundPaintVertexBuffers[Y]!==b[Y]&&(B=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==m||B||this.boundIndexBuffer!==T||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==R||this.boundDynamicVertexBuffer2!==L||this.boundDynamicVertexBuffer3!==F?this.freshBind(l,m,b,T,M,R,L,F):(n.bindVertexArray.set(this.vao),R&&R.bind(),T&&T.dynamicDraw&&T.bind(),L&&L.bind(),F&&F.bind())}freshBind(n,l,m,b,T,M,R,L){const F=n.numAttributes,B=this.context,Y=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=b,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=R,this.boundDynamicVertexBuffer3=L,l.enableAttributes(Y,n);for(const $ of m)$.enableAttributes(Y,n);M&&M.enableAttributes(Y,n),R&&R.enableAttributes(Y,n),L&&L.enableAttributes(Y,n),l.bind(),l.setVertexAttribPointers(Y,n,T);for(const $ of m)$.bind(),$.setVertexAttribPointers(Y,n,T);M&&(M.bind(),M.setVertexAttribPointers(Y,n,T)),b&&b.bind(),R&&(R.bind(),R.setVertexAttribPointers(Y,n,T)),L&&(L.bind(),L.setVertexAttribPointers(Y,n,T)),B.currentNumAttributes=F}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Pc=(w,n,l,m,b)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:n,u_fog_color:l?l.properties.get("fog-color"):c.bo.white,u_fog_ground_blend:l?l.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:b?0:l?l.calculateFogBlendOpacity(m):0,u_horizon_color:l?l.properties.get("horizon-color"):c.bo.white,u_horizon_fog_blend:l?l.properties.get("horizon-fog-blend"):1,u_is_globe_mode:b?1:0}),Vh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function cl(w){const n=[];for(let l=0;l<w.length;l++){if(w[l]===null)continue;const m=w[l].split(" ");n.push(m.pop())}return n}class _g{constructor(n,l,m,b,T,M,R,L,F=[]){const B=n.gl;this.program=B.createProgram();const Y=cl(l.staticAttributes),$=m?m.getBinderAttributes():[],J=Y.concat($),oe=Sa.prelude.staticUniforms?cl(Sa.prelude.staticUniforms):[],de=R.staticUniforms?cl(R.staticUniforms):[],pe=l.staticUniforms?cl(l.staticUniforms):[],ye=m?m.getBinderUniforms():[],be=oe.concat(de).concat(pe).concat(ye),Me=[];for(const $e of be)Me.indexOf($e)<0&&Me.push($e);const _e=m?m.defines():[];eo(B)&&_e.unshift("#version 300 es"),T&&_e.push("#define OVERDRAW_INSPECTOR;"),M&&_e.push("#define TERRAIN3D;"),L&&_e.push(L),F&&_e.push(...F);let Ce=_e.concat(Sa.prelude.fragmentSource,R.fragmentSource,l.fragmentSource).join(`
`),Re=_e.concat(Sa.prelude.vertexSource,R.vertexSource,l.vertexSource).join(`
`);eo(B)||(Ce=function($e){return $e.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ce),Re=function($e){return $e.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Re));const we=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(we,Ce),B.compileShader(we),!B.getShaderParameter(we,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(we)}`);B.attachShader(this.program,we);const Be=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(Be,Re),B.compileShader(Be),!B.getShaderParameter(Be,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(Be)}`);B.attachShader(this.program,Be),this.attributes={};const We={};this.numAttributes=J.length;for(let $e=0;$e<this.numAttributes;$e++)J[$e]&&(B.bindAttribLocation(this.program,$e,J[$e]),this.attributes[J[$e]]=$e);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(Be),B.deleteShader(we);for(let $e=0;$e<Me.length;$e++){const Ye=Me[$e];if(Ye&&!We[Ye]){const qe=B.getUniformLocation(this.program,Ye);qe&&(We[Ye]=qe)}}this.fixedUniforms=b(n,We),this.terrainUniforms=(($e,Ye)=>({u_depth:new c.bZ($e,Ye.u_depth),u_terrain:new c.bZ($e,Ye.u_terrain),u_terrain_dim:new c.bp($e,Ye.u_terrain_dim),u_terrain_matrix:new c.b$($e,Ye.u_terrain_matrix),u_terrain_unpack:new c.c0($e,Ye.u_terrain_unpack),u_terrain_exaggeration:new c.bp($e,Ye.u_terrain_exaggeration)}))(n,We),this.projectionUniforms=(($e,Ye)=>({u_projection_matrix:new c.b$($e,Ye.u_projection_matrix),u_projection_tile_mercator_coords:new c.c0($e,Ye.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.c0($e,Ye.u_projection_clipping_plane),u_projection_transition:new c.bp($e,Ye.u_projection_transition),u_projection_fallback_matrix:new c.b$($e,Ye.u_projection_fallback_matrix)}))(n,We),this.binderUniforms=m?m.getUniforms(n,We):[]}draw(n,l,m,b,T,M,R,L,F,B,Y,$,J,oe,de,pe,ye,be,Me){const _e=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(m),n.setStencilMode(b),n.setColorMode(T),n.setCullFace(M),L){n.activeTexture.set(_e.TEXTURE2),_e.bindTexture(_e.TEXTURE_2D,L.depthTexture),n.activeTexture.set(_e.TEXTURE3),_e.bindTexture(_e.TEXTURE_2D,L.texture);for(const Re in this.terrainUniforms)this.terrainUniforms[Re].set(L[Re])}if(F)for(const Re in F)this.projectionUniforms[Vh[Re]].set(F[Re]);if(R)for(const Re in this.fixedUniforms)this.fixedUniforms[Re].set(R[Re]);pe&&pe.setUniforms(n,this.binderUniforms,oe,{zoom:de});let Ce=0;switch(l){case _e.LINES:Ce=2;break;case _e.TRIANGLES:Ce=3;break;case _e.LINE_STRIP:Ce=1}for(const Re of J.get()){const we=Re.vaos||(Re.vaos={});(we[B]||(we[B]=new Fp)).bind(n,this,Y,pe?pe.getPaintVertexBuffers():[],$,Re.vertexOffset,ye,be,Me),_e.drawElements(l,Re.primitiveLength*Ce,_e.UNSIGNED_SHORT,Re.primitiveOffset*Ce*2)}}}function Ru(w,n,l){const m=1/c.aM(l,1,n.transform.tileZoom),b=Math.pow(2,l.tileID.overscaledZ),T=l.tileSize*Math.pow(2,n.transform.tileZoom)/b,M=T*(l.tileID.canonical.x+l.tileID.wrap*b),R=T*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[m,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[M>>16,R>>16],u_pixel_coord_lower:[65535&M,65535&R]}}const jp=(w,n,l,m)=>{const b=w.style.light,T=b.properties.get("position"),M=[T.x,T.y,T.z],R=c.c3();b.properties.get("anchor")==="viewport"&&c.c4(R,w.transform.bearingInRadians),c.c5(M,M,R);const L=w.transform.transformLightDirection(M),F=b.properties.get("color");return{u_lightpos:M,u_lightpos_globe:L,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+n,u_opacity:l,u_fill_translate:m}},zc=(w,n,l,m,b,T,M)=>c.e(jp(w,n,l,m),Ru(T,w,M),{u_height_factor:-Math.pow(2,b.overscaledZ)/M.tileSize/8}),Fc=(w,n,l,m)=>c.e(Ru(n,w,l),{u_fill_translate:m}),vg=(w,n)=>({u_world:w,u_fill_translate:n}),h0=(w,n,l,m,b)=>c.e(Fc(w,n,l,b),{u_world:m}),bg=(w,n,l,m,b)=>{const T=w.transform;let M,R,L=0;if(l.paint.get("circle-pitch-alignment")==="map"){const F=c.aM(n,1,T.zoom);M=!0,R=[F,F],L=F/(c.a4*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*b}else M=!1,R=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:R,u_globe_extrude_scale:L,u_translate:m}},_f=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),Bp=w=>({u_viewport_size:[w.width,w.height]}),jc=(w,n=1)=>({u_color:w,u_overlay:0,u_overlay_scale:n}),Bc=(w,n,l,m)=>{const b=c.aM(w,1,n)/(c.a4*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:c.aM(w,1,n),u_intensity:l,u_globe_extrude_scale:b}},Vp=(w,n,l,m)=>{const b=c.N();c.c6(b,0,w.width,w.height,0,0,1);const T=w.context.gl;return{u_matrix:b,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:l,u_color_ramp:m,u_opacity:n.paint.get("heatmap-opacity")}},Cs=(w,n,l)=>{const m=l.paint.get("hillshade-accent-color");let b;switch(l.paint.get("hillshade-method")){case"basic":b=4;break;case"combined":b=1;break;case"igor":b=2;break;case"multidirectional":b=3;break;default:b=0}const T=l.getIlluminationProperties();for(let M=0;M<T.directionRadians.length;M++)l.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[M]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:Gp(0,n.tileID),u_exaggeration:l.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:m,u_method:b,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},Up=(w,n)=>{const l=n.stride,m=c.N();return c.c6(m,0,c.a4,-c.a4,0,0,1),c.O(m,m,[0,-c.a4,0]),{u_matrix:m,u_image:1,u_dimension:[l,l],u_zoom:w.overscaledZ,u_unpack:n.getUnpackVector()}};function Gp(w,n){const l=Math.pow(2,n.canonical.z),m=n.canonical.y;return[new c.aa(0,m/l).toLngLat().lat,new c.aa(0,(m+1)/l).toLngLat().lat]}const Vc=(w,n,l=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:l,u_opacity:w.paint.get("color-relief-opacity")}),ku=(w,n,l,m)=>{const b=w.transform;return{u_translation:Zp(w,n,l),u_ratio:m/c.aM(n,1,b.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Ou=(w,n,l,m,b)=>c.e(ku(w,n,l,m),{u_image:0,u_image_height:b}),xg=(w,n,l,m,b)=>{const T=w.transform,M=vf(n,T);return{u_translation:Zp(w,n,l),u_texsize:n.imageAtlasTexture.size,u_ratio:m/c.aM(n,1,T.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[M,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},wg=(w,n,l,m,b)=>{const T=vf(n,w.transform);return c.e(ku(w,n,l,m),{u_tileratio:T,u_crossfade_from:b.fromScale,u_crossfade_to:b.toScale,u_image:0,u_mix:b.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},Tg=(w,n,l,m,b,T)=>{const M=vf(n,w.transform);return c.e(ku(w,n,l,m),{u_image:0,u_image_height:T,u_tileratio:M,u_crossfade_from:b.fromScale,u_crossfade_to:b.toScale,u_image_dash:1,u_mix:b.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function vf(w,n){return 1/c.aM(w,1,n.tileZoom)}function Zp(w,n,l){return c.aN(w.transform,n,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const $p=(w,n,l,m,b)=>{return{u_tl_parent:w,u_scale_parent:n,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(M=m.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(T=m.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:Sg(m.paint.get("raster-hue-rotate")),u_coords_top:[b[0].x,b[0].y,b[1].x,b[1].y],u_coords_bottom:[b[3].x,b[3].y,b[2].x,b[2].y]};var T,M};function Sg(w){w*=Math.PI/180;const n=Math.sin(w),l=Math.cos(w);return[(2*l+1)/3,(-Math.sqrt(3)*n-l+1)/3,(Math.sqrt(3)*n-l+1)/3]}const Kr=(w,n,l,m,b,T,M,R,L,F,B,Y,$)=>{const J=M.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_pitch:J.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:J.width/J.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:R,u_coord_matrix:L,u_is_text:+B,u_pitch_with_map:+m,u_is_along_line:b,u_is_variable_anchor:T,u_texsize:Y,u_texture:0,u_translation:F,u_pitched_scale:$}},Ba=(w,n,l,m,b,T,M,R,L,F,B,Y,$,J)=>{const oe=M.transform;return c.e(Kr(w,n,l,m,b,T,M,R,L,F,B,Y,J),{u_gamma_scale:m?Math.cos(oe.pitch*Math.PI/180)*oe.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},bf=(w,n,l,m,b,T,M,R,L,F,B,Y,$)=>c.e(Ba(w,n,l,m,b,T,M,R,L,F,!0,B,0,$),{u_texsize_icon:Y,u_texture_icon:1}),xf=(w,n)=>({u_opacity:w,u_color:n}),wf=(w,n,l,m,b)=>c.e(function(T,M,R,L){const F=R.imageManager.getPattern(T.from.toString()),B=R.imageManager.getPattern(T.to.toString()),{width:Y,height:$}=R.imageManager.getPixelSize(),J=Math.pow(2,L.tileID.overscaledZ),oe=L.tileSize*Math.pow(2,R.transform.tileZoom)/J,de=oe*(L.tileID.canonical.x+L.tileID.wrap*J),pe=oe*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[Y,$],u_mix:M.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/c.aM(L,1,R.transform.tileZoom),u_pixel_coord_upper:[de>>16,pe>>16],u_pixel_coord_lower:[65535&de,65535&pe]}}(l,b,n,m),{u_opacity:w}),Tf=(w,n)=>{},Uh={fillExtrusion:(w,n)=>({u_lightpos:new c.c1(w,n.u_lightpos),u_lightpos_globe:new c.c1(w,n.u_lightpos_globe),u_lightintensity:new c.bp(w,n.u_lightintensity),u_lightcolor:new c.c1(w,n.u_lightcolor),u_vertical_gradient:new c.bp(w,n.u_vertical_gradient),u_opacity:new c.bp(w,n.u_opacity),u_fill_translate:new c.c2(w,n.u_fill_translate)}),fillExtrusionPattern:(w,n)=>({u_lightpos:new c.c1(w,n.u_lightpos),u_lightpos_globe:new c.c1(w,n.u_lightpos_globe),u_lightintensity:new c.bp(w,n.u_lightintensity),u_lightcolor:new c.c1(w,n.u_lightcolor),u_vertical_gradient:new c.bp(w,n.u_vertical_gradient),u_height_factor:new c.bp(w,n.u_height_factor),u_opacity:new c.bp(w,n.u_opacity),u_fill_translate:new c.c2(w,n.u_fill_translate),u_image:new c.bZ(w,n.u_image),u_texsize:new c.c2(w,n.u_texsize),u_pixel_coord_upper:new c.c2(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c2(w,n.u_pixel_coord_lower),u_scale:new c.c1(w,n.u_scale),u_fade:new c.bp(w,n.u_fade)}),fill:(w,n)=>({u_fill_translate:new c.c2(w,n.u_fill_translate)}),fillPattern:(w,n)=>({u_image:new c.bZ(w,n.u_image),u_texsize:new c.c2(w,n.u_texsize),u_pixel_coord_upper:new c.c2(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c2(w,n.u_pixel_coord_lower),u_scale:new c.c1(w,n.u_scale),u_fade:new c.bp(w,n.u_fade),u_fill_translate:new c.c2(w,n.u_fill_translate)}),fillOutline:(w,n)=>({u_world:new c.c2(w,n.u_world),u_fill_translate:new c.c2(w,n.u_fill_translate)}),fillOutlinePattern:(w,n)=>({u_world:new c.c2(w,n.u_world),u_image:new c.bZ(w,n.u_image),u_texsize:new c.c2(w,n.u_texsize),u_pixel_coord_upper:new c.c2(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c2(w,n.u_pixel_coord_lower),u_scale:new c.c1(w,n.u_scale),u_fade:new c.bp(w,n.u_fade),u_fill_translate:new c.c2(w,n.u_fill_translate)}),circle:(w,n)=>({u_camera_to_center_distance:new c.bp(w,n.u_camera_to_center_distance),u_scale_with_map:new c.bZ(w,n.u_scale_with_map),u_pitch_with_map:new c.bZ(w,n.u_pitch_with_map),u_extrude_scale:new c.c2(w,n.u_extrude_scale),u_device_pixel_ratio:new c.bp(w,n.u_device_pixel_ratio),u_globe_extrude_scale:new c.bp(w,n.u_globe_extrude_scale),u_translate:new c.c2(w,n.u_translate)}),collisionBox:(w,n)=>({u_pixel_extrude_scale:new c.c2(w,n.u_pixel_extrude_scale)}),collisionCircle:(w,n)=>({u_viewport_size:new c.c2(w,n.u_viewport_size)}),debug:(w,n)=>({u_color:new c.b_(w,n.u_color),u_overlay:new c.bZ(w,n.u_overlay),u_overlay_scale:new c.bp(w,n.u_overlay_scale)}),depth:Tf,clippingMask:Tf,heatmap:(w,n)=>({u_extrude_scale:new c.bp(w,n.u_extrude_scale),u_intensity:new c.bp(w,n.u_intensity),u_globe_extrude_scale:new c.bp(w,n.u_globe_extrude_scale)}),heatmapTexture:(w,n)=>({u_matrix:new c.b$(w,n.u_matrix),u_world:new c.c2(w,n.u_world),u_image:new c.bZ(w,n.u_image),u_color_ramp:new c.bZ(w,n.u_color_ramp),u_opacity:new c.bp(w,n.u_opacity)}),hillshade:(w,n)=>({u_image:new c.bZ(w,n.u_image),u_latrange:new c.c2(w,n.u_latrange),u_exaggeration:new c.bp(w,n.u_exaggeration),u_altitudes:new c.c8(w,n.u_altitudes),u_azimuths:new c.c8(w,n.u_azimuths),u_accent:new c.b_(w,n.u_accent),u_method:new c.bZ(w,n.u_method),u_shadows:new c.c7(w,n.u_shadows),u_highlights:new c.c7(w,n.u_highlights)}),hillshadePrepare:(w,n)=>({u_matrix:new c.b$(w,n.u_matrix),u_image:new c.bZ(w,n.u_image),u_dimension:new c.c2(w,n.u_dimension),u_zoom:new c.bp(w,n.u_zoom),u_unpack:new c.c0(w,n.u_unpack)}),colorRelief:(w,n)=>({u_image:new c.bZ(w,n.u_image),u_unpack:new c.c0(w,n.u_unpack),u_dimension:new c.c2(w,n.u_dimension),u_elevation_stops:new c.bZ(w,n.u_elevation_stops),u_color_stops:new c.bZ(w,n.u_color_stops),u_color_ramp_size:new c.bZ(w,n.u_color_ramp_size),u_opacity:new c.bp(w,n.u_opacity)}),line:(w,n)=>({u_translation:new c.c2(w,n.u_translation),u_ratio:new c.bp(w,n.u_ratio),u_device_pixel_ratio:new c.bp(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c2(w,n.u_units_to_pixels)}),lineGradient:(w,n)=>({u_translation:new c.c2(w,n.u_translation),u_ratio:new c.bp(w,n.u_ratio),u_device_pixel_ratio:new c.bp(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c2(w,n.u_units_to_pixels),u_image:new c.bZ(w,n.u_image),u_image_height:new c.bp(w,n.u_image_height)}),linePattern:(w,n)=>({u_translation:new c.c2(w,n.u_translation),u_texsize:new c.c2(w,n.u_texsize),u_ratio:new c.bp(w,n.u_ratio),u_device_pixel_ratio:new c.bp(w,n.u_device_pixel_ratio),u_image:new c.bZ(w,n.u_image),u_units_to_pixels:new c.c2(w,n.u_units_to_pixels),u_scale:new c.c1(w,n.u_scale),u_fade:new c.bp(w,n.u_fade)}),lineSDF:(w,n)=>({u_translation:new c.c2(w,n.u_translation),u_ratio:new c.bp(w,n.u_ratio),u_device_pixel_ratio:new c.bp(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c2(w,n.u_units_to_pixels),u_image:new c.bZ(w,n.u_image),u_mix:new c.bp(w,n.u_mix),u_tileratio:new c.bp(w,n.u_tileratio),u_crossfade_from:new c.bp(w,n.u_crossfade_from),u_crossfade_to:new c.bp(w,n.u_crossfade_to),u_lineatlas_width:new c.bp(w,n.u_lineatlas_width),u_lineatlas_height:new c.bp(w,n.u_lineatlas_height)}),lineGradientSDF:(w,n)=>({u_translation:new c.c2(w,n.u_translation),u_ratio:new c.bp(w,n.u_ratio),u_device_pixel_ratio:new c.bp(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c2(w,n.u_units_to_pixels),u_image:new c.bZ(w,n.u_image),u_image_height:new c.bp(w,n.u_image_height),u_tileratio:new c.bp(w,n.u_tileratio),u_crossfade_from:new c.bp(w,n.u_crossfade_from),u_crossfade_to:new c.bp(w,n.u_crossfade_to),u_image_dash:new c.bZ(w,n.u_image_dash),u_mix:new c.bp(w,n.u_mix),u_lineatlas_width:new c.bp(w,n.u_lineatlas_width),u_lineatlas_height:new c.bp(w,n.u_lineatlas_height)}),raster:(w,n)=>({u_tl_parent:new c.c2(w,n.u_tl_parent),u_scale_parent:new c.bp(w,n.u_scale_parent),u_buffer_scale:new c.bp(w,n.u_buffer_scale),u_fade_t:new c.bp(w,n.u_fade_t),u_opacity:new c.bp(w,n.u_opacity),u_image0:new c.bZ(w,n.u_image0),u_image1:new c.bZ(w,n.u_image1),u_brightness_low:new c.bp(w,n.u_brightness_low),u_brightness_high:new c.bp(w,n.u_brightness_high),u_saturation_factor:new c.bp(w,n.u_saturation_factor),u_contrast_factor:new c.bp(w,n.u_contrast_factor),u_spin_weights:new c.c1(w,n.u_spin_weights),u_coords_top:new c.c0(w,n.u_coords_top),u_coords_bottom:new c.c0(w,n.u_coords_bottom)}),symbolIcon:(w,n)=>({u_is_size_zoom_constant:new c.bZ(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bZ(w,n.u_is_size_feature_constant),u_size_t:new c.bp(w,n.u_size_t),u_size:new c.bp(w,n.u_size),u_camera_to_center_distance:new c.bp(w,n.u_camera_to_center_distance),u_pitch:new c.bp(w,n.u_pitch),u_rotate_symbol:new c.bZ(w,n.u_rotate_symbol),u_aspect_ratio:new c.bp(w,n.u_aspect_ratio),u_fade_change:new c.bp(w,n.u_fade_change),u_label_plane_matrix:new c.b$(w,n.u_label_plane_matrix),u_coord_matrix:new c.b$(w,n.u_coord_matrix),u_is_text:new c.bZ(w,n.u_is_text),u_pitch_with_map:new c.bZ(w,n.u_pitch_with_map),u_is_along_line:new c.bZ(w,n.u_is_along_line),u_is_variable_anchor:new c.bZ(w,n.u_is_variable_anchor),u_texsize:new c.c2(w,n.u_texsize),u_texture:new c.bZ(w,n.u_texture),u_translation:new c.c2(w,n.u_translation),u_pitched_scale:new c.bp(w,n.u_pitched_scale)}),symbolSDF:(w,n)=>({u_is_size_zoom_constant:new c.bZ(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bZ(w,n.u_is_size_feature_constant),u_size_t:new c.bp(w,n.u_size_t),u_size:new c.bp(w,n.u_size),u_camera_to_center_distance:new c.bp(w,n.u_camera_to_center_distance),u_pitch:new c.bp(w,n.u_pitch),u_rotate_symbol:new c.bZ(w,n.u_rotate_symbol),u_aspect_ratio:new c.bp(w,n.u_aspect_ratio),u_fade_change:new c.bp(w,n.u_fade_change),u_label_plane_matrix:new c.b$(w,n.u_label_plane_matrix),u_coord_matrix:new c.b$(w,n.u_coord_matrix),u_is_text:new c.bZ(w,n.u_is_text),u_pitch_with_map:new c.bZ(w,n.u_pitch_with_map),u_is_along_line:new c.bZ(w,n.u_is_along_line),u_is_variable_anchor:new c.bZ(w,n.u_is_variable_anchor),u_texsize:new c.c2(w,n.u_texsize),u_texture:new c.bZ(w,n.u_texture),u_gamma_scale:new c.bp(w,n.u_gamma_scale),u_device_pixel_ratio:new c.bp(w,n.u_device_pixel_ratio),u_is_halo:new c.bZ(w,n.u_is_halo),u_translation:new c.c2(w,n.u_translation),u_pitched_scale:new c.bp(w,n.u_pitched_scale)}),symbolTextAndIcon:(w,n)=>({u_is_size_zoom_constant:new c.bZ(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.bZ(w,n.u_is_size_feature_constant),u_size_t:new c.bp(w,n.u_size_t),u_size:new c.bp(w,n.u_size),u_camera_to_center_distance:new c.bp(w,n.u_camera_to_center_distance),u_pitch:new c.bp(w,n.u_pitch),u_rotate_symbol:new c.bZ(w,n.u_rotate_symbol),u_aspect_ratio:new c.bp(w,n.u_aspect_ratio),u_fade_change:new c.bp(w,n.u_fade_change),u_label_plane_matrix:new c.b$(w,n.u_label_plane_matrix),u_coord_matrix:new c.b$(w,n.u_coord_matrix),u_is_text:new c.bZ(w,n.u_is_text),u_pitch_with_map:new c.bZ(w,n.u_pitch_with_map),u_is_along_line:new c.bZ(w,n.u_is_along_line),u_is_variable_anchor:new c.bZ(w,n.u_is_variable_anchor),u_texsize:new c.c2(w,n.u_texsize),u_texsize_icon:new c.c2(w,n.u_texsize_icon),u_texture:new c.bZ(w,n.u_texture),u_texture_icon:new c.bZ(w,n.u_texture_icon),u_gamma_scale:new c.bp(w,n.u_gamma_scale),u_device_pixel_ratio:new c.bp(w,n.u_device_pixel_ratio),u_is_halo:new c.bZ(w,n.u_is_halo),u_translation:new c.c2(w,n.u_translation),u_pitched_scale:new c.bp(w,n.u_pitched_scale)}),background:(w,n)=>({u_opacity:new c.bp(w,n.u_opacity),u_color:new c.b_(w,n.u_color)}),backgroundPattern:(w,n)=>({u_opacity:new c.bp(w,n.u_opacity),u_image:new c.bZ(w,n.u_image),u_pattern_tl_a:new c.c2(w,n.u_pattern_tl_a),u_pattern_br_a:new c.c2(w,n.u_pattern_br_a),u_pattern_tl_b:new c.c2(w,n.u_pattern_tl_b),u_pattern_br_b:new c.c2(w,n.u_pattern_br_b),u_texsize:new c.c2(w,n.u_texsize),u_mix:new c.bp(w,n.u_mix),u_pattern_size_a:new c.c2(w,n.u_pattern_size_a),u_pattern_size_b:new c.c2(w,n.u_pattern_size_b),u_scale_a:new c.bp(w,n.u_scale_a),u_scale_b:new c.bp(w,n.u_scale_b),u_pixel_coord_upper:new c.c2(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c2(w,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bp(w,n.u_tile_units_to_pixels)}),terrain:(w,n)=>({u_texture:new c.bZ(w,n.u_texture),u_ele_delta:new c.bp(w,n.u_ele_delta),u_fog_matrix:new c.b$(w,n.u_fog_matrix),u_fog_color:new c.b_(w,n.u_fog_color),u_fog_ground_blend:new c.bp(w,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bp(w,n.u_fog_ground_blend_opacity),u_horizon_color:new c.b_(w,n.u_horizon_color),u_horizon_fog_blend:new c.bp(w,n.u_horizon_fog_blend),u_is_globe_mode:new c.bp(w,n.u_is_globe_mode)}),terrainDepth:(w,n)=>({u_ele_delta:new c.bp(w,n.u_ele_delta)}),terrainCoords:(w,n)=>({u_texture:new c.bZ(w,n.u_texture),u_terrain_coords_id:new c.bp(w,n.u_terrain_coords_id),u_ele_delta:new c.bp(w,n.u_ele_delta)}),projectionErrorMeasurement:(w,n)=>({u_input:new c.bp(w,n.u_input),u_output_expected:new c.bp(w,n.u_output_expected)}),atmosphere:(w,n)=>({u_sun_pos:new c.c1(w,n.u_sun_pos),u_atmosphere_blend:new c.bp(w,n.u_atmosphere_blend),u_globe_position:new c.c1(w,n.u_globe_position),u_globe_radius:new c.bp(w,n.u_globe_radius),u_inv_proj_matrix:new c.b$(w,n.u_inv_proj_matrix)}),sky:(w,n)=>({u_sky_color:new c.b_(w,n.u_sky_color),u_horizon_color:new c.b_(w,n.u_horizon_color),u_horizon:new c.c2(w,n.u_horizon),u_horizon_normal:new c.c2(w,n.u_horizon_normal),u_sky_horizon_blend:new c.bp(w,n.u_sky_horizon_blend),u_sky_blend:new c.bp(w,n.u_sky_blend)})};class Uc{constructor(n,l,m){this.context=n;const b=n.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Yp{constructor(n,l,m,b){this.length=l.length,this.attributes=m,this.itemSize=l.bytesPerElement,this.dynamicDraw=b,this.context=n;const T=n.gl;this.buffer=T.createBuffer(),n.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,l){for(let m=0;m<this.attributes.length;m++){const b=l.attributes[this.attributes[m].name];b!==void 0&&n.enableVertexAttribArray(b)}}setVertexAttribPointers(n,l,m){for(let b=0;b<this.attributes.length;b++){const T=this.attributes[b],M=l.attributes[T.name];M!==void 0&&n.vertexAttribPointer(M,T.components,n[Yl[T.type]],!1,this.itemSize,T.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qp extends zn{getDefault(){return c.bo.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Eg extends zn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class ql extends zn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Lu extends zn{getDefault(){return[!0,!0,!0,!0]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Sf extends zn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Gh extends zn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Ds extends zn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const l=this.current;(n.func!==l.func||n.ref!==l.ref||n.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Zh extends zn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Ef extends zn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=n,this.dirty=!1}}class Hl extends zn{getDefault(){return[0,1]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class $h extends zn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=n,this.dirty=!1}}class Nu extends zn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class _o extends zn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.BLEND):l.disable(l.BLEND),this.current=n,this.dirty=!1}}class Hp extends zn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Wp extends zn{getDefault(){return c.bo.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Yh extends zn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Jr extends zn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=n,this.dirty=!1}}class Gc extends zn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Aa extends zn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Is extends zn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Pu extends zn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class qh extends zn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class ul extends zn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Wl extends zn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Xl extends zn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Af extends zn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class gn extends zn{getDefault(){return null}set(n){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class hl extends zn{getDefault(){return null}set(n){var l;if(n===this.current&&!this.dirty)return;const m=this.gl;eo(m)?m.bindVertexArray(n):(l=m.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class d0 extends zn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Va extends zn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Zc extends zn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Vo extends zn{constructor(n,l){super(n),this.context=n,this.parent=l}getDefault(){return null}}class Ag extends Vo{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Hh extends Vo{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class $c extends Vo{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const zu="Framebuffer is not complete";class Wh{constructor(n,l,m,b,T){this.context=n,this.width=l,this.height=m;const M=n.gl,R=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new Ag(n,R),b)this.depthAttachment=T?new $c(n,R):new Hh(n,R);else if(T)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(zu)}destroy(){const n=this.context.gl,l=this.colorAttachment.get();if(l&&n.deleteTexture(l),this.depthAttachment){const m=this.depthAttachment.get();m&&n.deleteRenderbuffer(m)}n.deleteFramebuffer(this.framebuffer)}}class Fu{constructor(n){var l,m;if(this.gl=n,this.clearColor=new qp(this),this.clearDepth=new Eg(this),this.clearStencil=new ql(this),this.colorMask=new Lu(this),this.depthMask=new Sf(this),this.stencilMask=new Gh(this),this.stencilFunc=new Ds(this),this.stencilOp=new Zh(this),this.stencilTest=new Ef(this),this.depthRange=new Hl(this),this.depthTest=new $h(this),this.depthFunc=new Nu(this),this.blend=new _o(this),this.blendFunc=new Hp(this),this.blendColor=new Wp(this),this.blendEquation=new Yh(this),this.cullFace=new Jr(this),this.cullFaceSide=new Gc(this),this.frontFace=new Aa(this),this.program=new Is(this),this.activeTexture=new Pu(this),this.viewport=new qh(this),this.bindFramebuffer=new ul(this),this.bindRenderbuffer=new Wl(this),this.bindTexture=new Xl(this),this.bindVertexBuffer=new Af(this),this.bindElementBuffer=new gn(this),this.bindVertexArray=new hl(this),this.pixelStoreUnpack=new d0(this),this.pixelStoreUnpackPremultiplyAlpha=new Va(this),this.pixelStoreUnpackFlipY=new Zc(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),eo(n)){this.HALF_FLOAT=n.HALF_FLOAT;const b=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=n.RGBA16F)!==null&&l!==void 0?l:b?.RGBA16F_EXT,this.RGB16F=(m=n.RGB16F)!==null&&m!==void 0?m:b?.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const b=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=b?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,l){return new Uc(this,n,l)}createVertexBuffer(n,l,m){return new Yp(this,n,l,m)}createRenderbuffer(n,l,m){const b=this.gl,T=b.createRenderbuffer();return this.bindRenderbuffer.set(T),b.renderbufferStorage(b.RENDERBUFFER,n,l,m),this.bindRenderbuffer.set(null),T}createFramebuffer(n,l,m,b){return new Wh(this,n,l,m,b)}clear({color:n,depth:l,stencil:m}){const b=this.gl;let T=0;n&&(T|=b.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(T|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),m!==void 0&&(T|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),b.clear(T)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){c.bQ(n.blendFunction,xi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return eo(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var l;return eo(this.gl)?this.gl.deleteVertexArray(n):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let Ql;function Ma(w,n,l,m,b){const T=w.context,M=w.transform,R=T.gl,L=w.useProgram("collisionBox"),F=[];let B=0,Y=0;for(let ye=0;ye<m.length;ye++){const be=m[ye],Me=n.getTile(be).getBucket(l);if(!Me)continue;const _e=b?Me.textCollisionBox:Me.iconCollisionBox,Ce=Me.collisionCircleArray;Ce.length>0&&(F.push({circleArray:Ce,circleOffset:Y,coord:be}),B+=Ce.length/4,Y=B),_e&&L.draw(T,R.LINES,hn.disabled,Pn.disabled,w.colorModeForRenderPass(),En.disabled,_f(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(be),M.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),l.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,null,w.transform.zoom,null,null,_e.collisionVertexBuffer)}if(!b||!F.length)return;const $=w.useProgram("collisionCircle"),J=new c.c9;J.resize(4*B),J._trim();let oe=0;for(const ye of F)for(let be=0;be<ye.circleArray.length/4;be++){const Me=4*be,_e=ye.circleArray[Me+0],Ce=ye.circleArray[Me+1],Re=ye.circleArray[Me+2],we=ye.circleArray[Me+3];J.emplace(oe++,_e,Ce,Re,we,0),J.emplace(oe++,_e,Ce,Re,we,1),J.emplace(oe++,_e,Ce,Re,we,2),J.emplace(oe++,_e,Ce,Re,we,3)}(!Ql||Ql.length<2*B)&&(Ql=function(ye){const be=2*ye,Me=new c.cb;Me.resize(be),Me._trim();for(let _e=0;_e<be;_e++){const Ce=6*_e;Me.uint16[Ce+0]=4*_e+0,Me.uint16[Ce+1]=4*_e+1,Me.uint16[Ce+2]=4*_e+2,Me.uint16[Ce+3]=4*_e+2,Me.uint16[Ce+4]=4*_e+3,Me.uint16[Ce+5]=4*_e+0}return Me}(B));const de=T.createIndexBuffer(Ql,!0),pe=T.createVertexBuffer(J,c.ca.members,!0);for(const ye of F){const be=Bp(w.transform);$.draw(T,R.TRIANGLES,hn.disabled,Pn.disabled,w.colorModeForRenderPass(),En.disabled,be,w.style.map.terrain&&w.style.map.terrain.getTerrainData(ye.coord),null,l.id,pe,de,c.aW.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,w.transform.zoom,null,null,null)}pe.destroy(),de.destroy()}const Yc=c.ar(new Float32Array(16));function dl(w,n,l,m,b,T){const{horizontalAlign:M,verticalAlign:R}=c.aR(w);return new c.P((-(M-.5)*n/b+m[0])*T,(-(R-.5)*l/b+m[1])*T)}function qc(w,n,l,m,b,T){const M=n.tileAnchorPoint.add(new c.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let R=m.mult(T);l||(R=R.rotate(-b));const L=M.add(R);return kt(L.x,L.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(l){const R=ua(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(w),L=Math.atan(R.y/R.x)+(R.x<0?Math.PI:0);return w.add(m.rotate(L))}return w.add(m)}function Kl(w,n,l,m,b,T,M,R,L,F,B,Y){const $=w.text.placedSymbolArray,J=w.text.dynamicLayoutVertexArray,oe=w.icon.dynamicLayoutVertexArray,de={};J.clear();for(let pe=0;pe<$.length;pe++){const ye=$.get(pe),be=ye.hidden||!ye.crossTileID||w.allowVerticalPlacement&&!ye.placedOrientation?null:m[ye.crossTileID];if(be){const Me=new c.P(ye.anchorX,ye.anchorY),_e={getElevation:Y,width:b.width,height:b.height,pitchedLabelPlaneMatrix:T,pitchWithMap:l,transform:b,tileAnchorPoint:Me,translation:F,unwrappedTileID:B},Ce=l?Fo(Me.x,Me.y,_e):ua(Me.x,Me.y,_e),Re=qt(b.cameraToCenterDistance,Ce.signedDistanceFromCamera);let we=c.az(w.textSizeData,R,ye)*Re/c.aL;l&&(we*=w.tilePixelRatio/M);const{width:Be,height:We,anchor:$e,textOffset:Ye,textBoxScale:qe}=be,xt=dl($e,Be,We,Ye,qe,we),wt=b.getPitchedTextCorrection(Me.x+F[0],Me.y+F[1],B),ut=qc(Ce.point,_e,n,xt,-b.bearingInRadians,wt),Pt=w.allowVerticalPlacement&&ye.placedOrientation===c.ay.vertical?Math.PI/2:0;for(let cn=0;cn<ye.numGlyphs;cn++)c.aF(J,ut,Pt);L&&ye.associatedIconIndex>=0&&(de[ye.associatedIconIndex]={shiftedAnchor:ut,angle:Pt})}else Ta(ye.numGlyphs,J)}if(L){oe.clear();const pe=w.icon.placedSymbolArray;for(let ye=0;ye<pe.length;ye++){const be=pe.get(ye);if(be.hidden)Ta(be.numGlyphs,oe);else{const Me=de[ye];if(Me)for(let _e=0;_e<be.numGlyphs;_e++)c.aF(oe,Me.shiftedAnchor,Me.angle);else Ta(be.numGlyphs,oe)}}w.icon.dynamicLayoutVertexBuffer.updateData(oe)}w.text.dynamicLayoutVertexBuffer.updateData(J)}function ea(w,n,l){return l.iconsInText&&n?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Ca(w,n,l,m,b,T,M,R,L,F,B,Y,$){const J=w.context,oe=J.gl,de=w.transform,pe=R==="map",ye=L==="map",be=R!=="viewport"&&l.layout.get("symbol-placement")!=="point",Me=pe&&!ye&&!be,_e=!l.layout.get("symbol-sort-key").isConstant();let Ce=!1;const Re=w.getDepthModeForSublayer(0,hn.ReadOnly),we=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Be=[],We=de.getCircleRadiusCorrection();for(const $e of m){const Ye=n.getTile($e),qe=Ye.getBucket(l);if(!qe)continue;const xt=b?qe.text:qe.icon;if(!xt||!xt.segments.get().length||!xt.hasVisibleVertices)continue;const wt=xt.programConfigurations.get(l.id),ut=b||qe.sdfIcons,Pt=b?qe.textSizeData:qe.iconSizeData,cn=ye||de.pitch!==0,an=w.useProgram(ea(ut,b,qe),wt),Si=c.ax(Pt,de.zoom),gi=w.style.map.terrain&&w.style.map.terrain.getTerrainData($e);let Vi,ci,fr,Oi,Qi=[0,0],Ki=null;if(b)ci=Ye.glyphAtlasTexture,fr=oe.LINEAR,Vi=Ye.glyphAtlasTexture.size,qe.iconsInText&&(Qi=Ye.imageAtlasTexture.size,Ki=Ye.imageAtlasTexture,Oi=cn||w.options.rotating||w.options.zooming||Pt.kind==="composite"||Pt.kind==="camera"?oe.LINEAR:oe.NEAREST);else{const $i=l.layout.get("icon-size").constantOr(0)!==1||qe.iconsNeedLinear;ci=Ye.imageAtlasTexture,fr=ut||w.options.rotating||w.options.zooming||$i||cn?oe.LINEAR:oe.NEAREST,Vi=Ye.imageAtlasTexture.size}const rr=c.aM(Ye,1,w.transform.zoom),ha=lr(pe,w.transform,rr),Bs=c.N();c.aA(Bs,ha);const Yo=qn(ye,pe,w.transform,rr),sc=c.aN(de,Ye,T,M),Vs=de.getProjectionData({overscaledTileID:$e,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),lc=we&&qe.hasTextData(),io=l.layout.get("icon-text-fit")!=="none"&&lc&&qe.hasIconData();if(be){const $i=w.style.map.terrain?(ar,ni)=>w.style.map.terrain.getElevation($e,ar,ni):null,yi=l.layout.get("text-rotation-alignment")==="map";Ic(qe,w,b,ha,Bs,ye,F,yi,$e.toUnwrapped(),de.width,de.height,sc,$i)}const qo=b&&we||io,$a=be||qo?Yc:ye?ha:w.transform.clipSpaceToPixelsMatrix,Us=ut&&l.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let nu;nu=ut?qe.iconsInText?bf(Pt.kind,Si,Me,ye,be,qo,w,$a,Yo,sc,Vi,Qi,We):Ba(Pt.kind,Si,Me,ye,be,qo,w,$a,Yo,sc,b,Vi,0,We):Kr(Pt.kind,Si,Me,ye,be,qo,w,$a,Yo,sc,b,Vi,We);const iu={program:an,buffers:xt,uniformValues:nu,projectionData:Vs,atlasTexture:ci,atlasTextureIcon:Ki,atlasInterpolation:fr,atlasInterpolationIcon:Oi,isSDF:ut,hasHalo:Us};if(_e&&qe.canOverlap){Ce=!0;const $i=xt.segments.get();for(const yi of $i)Be.push({segments:new c.aW([yi]),sortKey:yi.sortKey,state:iu,terrainData:gi})}else Be.push({segments:xt.segments,sortKey:0,state:iu,terrainData:gi})}Ce&&Be.sort(($e,Ye)=>$e.sortKey-Ye.sortKey);for(const $e of Be){const Ye=$e.state;if(J.activeTexture.set(oe.TEXTURE0),Ye.atlasTexture.bind(Ye.atlasInterpolation,oe.CLAMP_TO_EDGE),Ye.atlasTextureIcon&&(J.activeTexture.set(oe.TEXTURE1),Ye.atlasTextureIcon&&Ye.atlasTextureIcon.bind(Ye.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),Ye.isSDF){const qe=Ye.uniformValues;Ye.hasHalo&&(qe.u_is_halo=1,fl(Ye.buffers,$e.segments,l,w,Ye.program,Re,B,Y,qe,Ye.projectionData,$e.terrainData)),qe.u_is_halo=0}fl(Ye.buffers,$e.segments,l,w,Ye.program,Re,B,Y,Ye.uniformValues,Ye.projectionData,$e.terrainData)}}function fl(w,n,l,m,b,T,M,R,L,F,B){const Y=m.context;b.draw(Y,Y.gl.TRIANGLES,T,M,R,En.backCCW,L,B,F,l.id,w.layoutVertexBuffer,w.indexBuffer,n,l.paint,m.transform.zoom,w.programConfigurations.get(l.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Ua(w,n,l,m,b){const T=w.context,M=T.gl,R=Pn.disabled,L=new xi([M.ONE,M.ONE],c.bo.transparent,[!0,!0,!0,!0]),F=n.getBucket(l);if(!F)return;const B=m.key;let Y=l.heatmapFbos.get(B);Y||(Y=Uo(T,n.tileSize,n.tileSize),l.heatmapFbos.set(B,Y)),T.bindFramebuffer.set(Y.framebuffer),T.viewport.set([0,0,n.tileSize,n.tileSize]),T.clear({color:c.bo.transparent});const $=F.programConfigurations.get(l.id),J=w.useProgram("heatmap",$,!b),oe=w.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),de=w.style.map.terrain.getTerrainData(m);J.draw(T,M.TRIANGLES,hn.disabled,R,L,En.disabled,Bc(n,w.transform.zoom,l.paint.get("heatmap-intensity"),1),de,oe,l.id,F.layoutVertexBuffer,F.indexBuffer,F.segments,l.paint,w.transform.zoom,$)}function Rs(w,n,l,m,b){const T=w.context,M=T.gl,R=w.transform;T.setColorMode(w.colorModeForRenderPass());const L=ju(T,n),F=l.key,B=n.heatmapFbos.get(F);if(!B)return;T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,B.colorAttachment.get()),T.activeTexture.set(M.TEXTURE1),L.bind(M.LINEAR,M.CLAMP_TO_EDGE);const Y=R.getProjectionData({overscaledTileID:l,applyTerrainMatrix:b,applyGlobeMatrix:!m});w.useProgram("heatmapTexture").draw(T,M.TRIANGLES,hn.disabled,Pn.disabled,w.colorModeForRenderPass(),En.disabled,Vp(w,n,0,1),null,Y,n.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,n.paint,R.zoom),B.destroy(),n.heatmapFbos.delete(F)}function Uo(w,n,l){var m,b;const T=w.gl,M=T.createTexture();T.bindTexture(T.TEXTURE_2D,M),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const R=(m=w.HALF_FLOAT)!==null&&m!==void 0?m:T.UNSIGNED_BYTE,L=(b=w.RGBA16F)!==null&&b!==void 0?b:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,L,n,l,0,T.RGBA,R,null);const F=w.createFramebuffer(n,l,!1,!1);return F.colorAttachment.set(M),F}function ju(w,n){return n.colorRampTexture||(n.colorRampTexture=new c.T(w,n.colorRamp,w.gl.RGBA)),n.colorRampTexture}function Bu(w,n,l,m,b,T,M,R){let L=256;if(b.stepInterpolant){const F=n.getSource().maxzoom,B=M.canonical.z===F?Math.ceil(1<<w.transform.maxZoom-M.canonical.z):1;L=c.an(c.cd(T.maxLineLength/c.a4*1024*B),256,l.maxTextureSize)}return R.gradient=c.ce({expression:b.gradientExpression(),evaluationKey:"lineProgress",resolution:L,image:R.gradient||void 0,clips:T.lineClipsArray}),R.texture?R.texture.update(R.gradient):R.texture=new c.T(l,R.gradient,m.RGBA),R.version=b.gradientVersion,R.texture}function Mf(w,n,l,m,b){w.activeTexture.set(n.TEXTURE0),l.imageAtlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),m.updatePaintBuffers(b)}function Xp(w,n,l,m,b,T){(b||w.lineAtlas.dirty)&&(n.activeTexture.set(l.TEXTURE0),w.lineAtlas.bind(n)),m.updatePaintBuffers(T)}function vr(w,n,l,m,b,T,M){const R=T.gradients[b.id];let L=R.texture;b.gradientVersion!==R.version&&(L=Bu(w,n,l,m,b,T,M,R)),l.activeTexture.set(m.TEXTURE0),L.bind(b.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}function wi(w,n,l,m,b,T,M,R,L){const F=T.gradients[b.id];let B=F.texture;b.gradientVersion!==F.version&&(B=Bu(w,n,l,m,b,T,M,F)),l.activeTexture.set(m.TEXTURE0),B.bind(b.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE),l.activeTexture.set(m.TEXTURE1),w.lineAtlas.bind(l),R.updatePaintBuffers(L)}function Fn(w,n,l,m,b){if(!l||!m||!m.imageAtlas)return;const T=m.imageAtlas.patternPositions;let M=T[l.to.toString()],R=T[l.from.toString()];if(!M&&R&&(M=R),!R&&M&&(R=M),!M||!R){const L=b.getPaintProperty(n);M=T[L],R=T[L]}M&&R&&w.setConstantPatternPositions(M,R)}function ks(w,n,l,m,b,T,M,R){const L=w.context.gl,F="fill-pattern",B=l.paint.get(F),Y=B&&B.constantOr(1),$=l.getCrossfadeParameters();let J,oe,de,pe,ye;const be=w.transform,Me=l.paint.get("fill-translate"),_e=l.paint.get("fill-translate-anchor");M?(oe=Y&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",J=L.LINES):(oe=Y?"fillPattern":"fill",J=L.TRIANGLES);const Ce=B.constantOr(null);for(const Re of m){const we=n.getTile(Re);if(Y&&!we.patternsLoaded())continue;const Be=we.getBucket(l);if(!Be)continue;const We=Be.programConfigurations.get(l.id),$e=w.useProgram(oe,We),Ye=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re);Y&&(w.context.activeTexture.set(L.TEXTURE0),we.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),We.updatePaintBuffers($)),Fn(We,F,Ce,we,l);const qe=be.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!R,applyTerrainMatrix:!0}),xt=c.aN(be,we,Me,_e);if(M){pe=Be.indexBuffer2,ye=Be.segments2;const ut=[L.drawingBufferWidth,L.drawingBufferHeight];de=oe==="fillOutlinePattern"&&Y?h0(w,$,we,ut,xt):vg(ut,xt)}else pe=Be.indexBuffer,ye=Be.segments,de=Y?Fc(w,$,we,xt):{u_fill_translate:xt};const wt=w.stencilModeForClipping(Re);$e.draw(w.context,J,b,wt,T,En.backCCW,de,Ye,qe,l.id,Be.layoutVertexBuffer,pe,ye,l.paint,w.transform.zoom,We)}}function Un(w,n,l,m,b,T,M,R){const L=w.context,F=L.gl,B="fill-extrusion-pattern",Y=l.paint.get(B),$=Y.constantOr(1),J=l.getCrossfadeParameters(),oe=l.paint.get("fill-extrusion-opacity"),de=Y.constantOr(null),pe=w.transform;for(const ye of m){const be=n.getTile(ye),Me=be.getBucket(l);if(!Me)continue;const _e=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ye),Ce=Me.programConfigurations.get(l.id),Re=w.useProgram($?"fillExtrusionPattern":"fillExtrusion",Ce);$&&(w.context.activeTexture.set(F.TEXTURE0),be.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),Ce.updatePaintBuffers(J));const we=pe.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!R,applyTerrainMatrix:!0});Fn(Ce,B,de,be,l);const Be=c.aN(pe,be,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),We=l.paint.get("fill-extrusion-vertical-gradient"),$e=$?zc(w,We,oe,Be,ye,J,be):jp(w,We,oe,Be);Re.draw(L,L.gl.TRIANGLES,b,T,M,En.backCCW,$e,_e,we,l.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,l.paint,w.transform.zoom,Ce,w.style.map.terrain&&Me.centroidVertexBuffer)}}function Go(w,n,l,m,b,T,M,R,L){var F;const B=w.style.projection,Y=w.context,$=w.transform,J=Y.gl,oe=[`#define NUM_ILLUMINATION_SOURCES ${l.paint.get("hillshade-highlight-color").values.length}`],de=w.useProgram("hillshade",null,!1,oe),pe=!w.options.moving;for(const ye of m){const be=n.getTile(ye),Me=be.fbo;if(!Me)continue;const _e=B.getMeshFromTileID(Y,ye.canonical,R,!0,"raster"),Ce=(F=w.style.map.terrain)===null||F===void 0?void 0:F.getTerrainData(ye);Y.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,Me.colorAttachment.get());const Re=$.getProjectionData({overscaledTileID:ye,aligned:pe,applyGlobeMatrix:!L,applyTerrainMatrix:!0});de.draw(Y,J.TRIANGLES,T,b[ye.overscaledZ],M,En.backCCW,Cs(w,be,l),Ce,Re,l.id,_e.vertexBuffer,_e.indexBuffer,_e.segments)}}function hr(w,n,l,m,b,T,M,R,L){var F;const B=w.style.projection,Y=w.context,$=w.transform,J=Y.gl,oe=w.useProgram("colorRelief"),de=!w.options.moving;let pe=!0,ye=0;for(const be of m){const Me=n.getTile(be),_e=Me.dem;if(pe){const $e=J.getParameter(J.MAX_TEXTURE_SIZE),{elevationTexture:Ye,colorTexture:qe}=l.getColorRampTextures(Y,$e,_e.getUnpackVector());Y.activeTexture.set(J.TEXTURE1),Ye.bind(J.NEAREST,J.CLAMP_TO_EDGE),Y.activeTexture.set(J.TEXTURE4),qe.bind(J.LINEAR,J.CLAMP_TO_EDGE),pe=!1,ye=Ye.size[0]}if(!_e||!_e.data)continue;const Ce=_e.stride,Re=_e.getPixels();if(Y.activeTexture.set(J.TEXTURE0),Y.pixelStoreUnpackPremultiplyAlpha.set(!1),Me.demTexture=Me.demTexture||w.getTileTexture(Ce),Me.demTexture){const $e=Me.demTexture;$e.update(Re,{premultiply:!1}),$e.bind(J.LINEAR,J.CLAMP_TO_EDGE)}else Me.demTexture=new c.T(Y,Re,J.RGBA,{premultiply:!1}),Me.demTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE);const we=B.getMeshFromTileID(Y,be.canonical,R,!0,"raster"),Be=(F=w.style.map.terrain)===null||F===void 0?void 0:F.getTerrainData(be),We=$.getProjectionData({overscaledTileID:be,aligned:de,applyGlobeMatrix:!L,applyTerrainMatrix:!0});oe.draw(Y,J.TRIANGLES,T,b[be.overscaledZ],M,En.backCCW,Vc(l,Me.dem,ye),Be,We,l.id,we.vertexBuffer,we.indexBuffer,we.segments)}}const Vu=[new c.P(0,0),new c.P(c.a4,0),new c.P(c.a4,c.a4),new c.P(0,c.a4)];function Jl(w,n,l,m,b,T,M,R,L=!1,F=!1){const B=m[m.length-1].overscaledZ,Y=w.context,$=Y.gl,J=w.useProgram("raster"),oe=w.transform,de=w.style.projection,pe=w.colorModeForRenderPass(),ye=!w.options.moving,be=l.paint.get("raster-opacity"),Me=l.paint.get("raster-resampling"),_e=l.paint.get("raster-fade-duration"),Ce=!!w.style.map.terrain;for(const Re of m){const we=w.getDepthModeForSublayer(Re.overscaledZ-B,be===1?hn.ReadWrite:hn.ReadOnly,$.LESS),Be=n.getTile(Re),We=Me==="nearest"?$.NEAREST:$.LINEAR;Y.activeTexture.set($.TEXTURE0),Be.texture.bind(We,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Y.activeTexture.set($.TEXTURE1);const{parentTile:$e,parentScaleBy:Ye,parentTopLeft:qe,fadeValues:xt}=Hc(Be,n,_e,Ce);Be.fadeOpacity=xt.tileOpacity,$e?($e.fadeOpacity=xt.parentTileOpacity,$e.texture.bind(We,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST)):Be.texture.bind(We,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Be.texture.useMipmap&&Y.extTextureFilterAnisotropic&&w.transform.pitch>20&&$.texParameterf($.TEXTURE_2D,Y.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Y.extTextureFilterAnisotropicMax);const wt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re),ut=oe.getProjectionData({overscaledTileID:Re,aligned:ye,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),Pt=$p(qe,Ye,xt.fadeMix,l,R),cn=de.getMeshFromTileID(Y,Re.canonical,T,M,"raster");J.draw(Y,$.TRIANGLES,we,b?b[Re.overscaledZ]:Pn.disabled,pe,L?En.frontCCW:En.backCCW,Pt,wt,ut,l.id,cn.vertexBuffer,cn.indexBuffer,cn.segments)}}function Hc(w,n,l,m){const b={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(l===0||m)return b;if(w.fadingParentID){const T=n.getLoadedTile(w.fadingParentID);if(!T)return b;const M=Math.pow(2,T.tileID.overscaledZ-w.tileID.overscaledZ),R=[w.tileID.canonical.x*M%1,w.tileID.canonical.y*M%1],L=function(F,B,Y){const $=ae(),J=($-B.timeAdded)/Y,oe=F.fadingDirection===Ie.Incoming,de=c.an(($-F.timeAdded)/Y,0,1),pe=c.an(1-J,0,1),ye=oe?de:pe;return{tileOpacity:ye,parentTileOpacity:oe?pe:de,fadeMix:{opacity:1,mix:1-ye}}}(w,T,l);return{parentTile:T,parentScaleBy:M,parentTopLeft:R,fadeValues:L}}if(w.selfFading){const T=function(M,R){const L=(ae()-M.timeAdded)/R,F=c.an(L,0,1);return{tileOpacity:F,fadeMix:{opacity:F,mix:0}}}(w,l);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:T}}return b}const vo=new c.bo(1,0,0,1),Xh=new c.bo(0,1,0,1),pl=new c.bo(0,0,1,1),Qh=new c.bo(1,0,1,1),ec=new c.bo(0,1,1,1);function Zo(w,n,l,m){to(w,0,n+l/2,w.transform.width,l,m)}function Os(w,n,l,m){to(w,n-l/2,0,l,w.transform.height,m)}function to(w,n,l,m,b,T){const M=w.context,R=M.gl;R.enable(R.SCISSOR_TEST),R.scissor(n*w.pixelRatio,l*w.pixelRatio,m*w.pixelRatio,b*w.pixelRatio),M.clear({color:T}),R.disable(R.SCISSOR_TEST)}function Cf(w,n,l){const m=w.context,b=m.gl,T=w.useProgram("debug"),M=hn.disabled,R=Pn.disabled,L=w.colorModeForRenderPass(),F="$debug",B=w.style.map.terrain&&w.style.map.terrain.getTerrainData(l);m.activeTexture.set(b.TEXTURE0);const Y=n.getTileByID(l.key).latestRawTileData,$=Math.floor((Y&&Y.byteLength||0)/1024),J=n.getTile(l).tileSize,oe=512/Math.min(J,512)*(l.overscaledZ/w.transform.zoom)*.5;let de=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(de+=` => ${l.overscaledZ}`),function(ye,be){ye.initDebugOverlayCanvas();const Me=ye.debugOverlayCanvas,_e=ye.context.gl,Ce=ye.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,Me.width,Me.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(be,5,5),Ce.strokeText(be,5,5),ye.debugOverlayTexture.update(Me),ye.debugOverlayTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}(w,`${de} ${$}kB`);const pe=w.transform.getProjectionData({overscaledTileID:l,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(m,b.TRIANGLES,M,R,xi.alphaBlended,En.disabled,jc(c.bo.transparent,oe),null,pe,F,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),T.draw(m,b.LINE_STRIP,M,R,L,En.disabled,jc(c.bo.red),B,pe,F,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Ls(w,n,l,m){const{isRenderingGlobe:b}=m,T=w.context,M=T.gl,R=w.transform,L=w.colorModeForRenderPass(),F=w.getDepthModeFor3D(),B=w.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,w.width,w.height]);for(const Y of l){const $=n.getTerrainMesh(Y.tileID),J=w.renderToTexture.getTexture(Y),oe=n.getTerrainData(Y.tileID);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,J.texture);const de=n.getMeshFrameDelta(R.zoom),pe=R.calculateFogMatrix(Y.tileID.toUnwrapped()),ye=Pc(de,pe,w.style.sky,R.pitch,b),be=R.getProjectionData({overscaledTileID:Y.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});B.draw(T,M.TRIANGLES,F,Pn.disabled,L,En.backCCW,ye,oe,be,"terrain",$.vertexBuffer,$.indexBuffer,$.segments)}}function tc(w,n){if(!n.mesh){const l=new c.aV;l.emplaceBack(-1,-1),l.emplaceBack(1,-1),l.emplaceBack(1,1),l.emplaceBack(-1,1);const m=new c.aX;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),n.mesh=new Ts(w.createVertexBuffer(l,nr.members),w.createIndexBuffer(m),c.aW.simpleSegment(0,0,l.length,m.length))}return n.mesh}class Kh{constructor(n,l){this.context=new Fu(n),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Sn.maxOverzooming+Sn.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Lc}resize(n,l,m){if(this.width=Math.floor(n*m),this.height=Math.floor(l*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const n=this.context,l=new c.aV;l.emplaceBack(0,0),l.emplaceBack(c.a4,0),l.emplaceBack(0,c.a4),l.emplaceBack(c.a4,c.a4),this.tileExtentBuffer=n.createVertexBuffer(l,nr.members),this.tileExtentSegments=c.aW.simpleSegment(0,0,4,2);const m=new c.aV;m.emplaceBack(0,0),m.emplaceBack(c.a4,0),m.emplaceBack(0,c.a4),m.emplaceBack(c.a4,c.a4),this.debugBuffer=n.createVertexBuffer(m,nr.members),this.debugSegments=c.aW.simpleSegment(0,0,4,5);const b=new c.cg;b.emplaceBack(0,0,0,0),b.emplaceBack(c.a4,0,c.a4,0),b.emplaceBack(0,c.a4,0,c.a4),b.emplaceBack(c.a4,c.a4,c.a4,c.a4),this.rasterBoundsBuffer=n.createVertexBuffer(b,Ms.members),this.rasterBoundsSegments=c.aW.simpleSegment(0,0,4,2);const T=new c.aV;T.emplaceBack(0,0),T.emplaceBack(c.a4,0),T.emplaceBack(0,c.a4),T.emplaceBack(c.a4,c.a4),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(T,nr.members),this.rasterBoundsSegmentsPosOnly=c.aW.simpleSegment(0,0,4,5);const M=new c.aV;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(M,nr.members),this.viewportSegments=c.aW.simpleSegment(0,0,4,2);const R=new c.ch;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(R);const L=new c.aX;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(L);const F=this.context.gl;this.stencilClearMode=new Pn({func:F.ALWAYS,mask:0},0,255,F.ZERO,F.ZERO,F.ZERO),this.tileExtentMesh=new Ts(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,l=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=c.N();c.c6(m,0,this.width,this.height,0,0,1),c.Q(m,m,[l.drawingBufferWidth,l.drawingBufferHeight,0]);const b={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(n,l.TRIANGLES,hn.disabled,this.stencilClearMode,xi.disabled,En.disabled,null,null,b,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,l,m){if(this.currentStencilSource===n.source||!n.isTileClipped()||!l||!l.length)return;this.currentStencilSource=n.source,this.nextStencilID+l.length>256&&this.clearStencil();const b=this.context;b.setColorMode(xi.disabled),b.setDepthMode(hn.disabled);const T={};for(const M of l)T[M.key]=this.nextStencilID++;this._renderTileMasks(T,l,m,!0),this._renderTileMasks(T,l,m,!1),this._tileClippingMaskIDs=T}_renderTileMasks(n,l,m,b){const T=this.context,M=T.gl,R=this.style.projection,L=this.transform,F=this.useProgram("clippingMask");for(const B of l){const Y=n[B.key],$=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),J=R.getMeshFromTileID(this.context,B.canonical,b,!0,"stencil"),oe=L.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!m,applyTerrainMatrix:!0});F.draw(T,M.TRIANGLES,hn.disabled,new Pn({func:M.ALWAYS,mask:0},Y,255,M.KEEP,M.KEEP,M.REPLACE),xi.disabled,m?En.disabled:En.backCCW,null,$,oe,"$clipping",J.vertexBuffer,J.indexBuffer,J.segments)}}_renderTilesDepthBuffer(){const n=this.context,l=n.gl,m=this.style.projection,b=this.transform,T=this.useProgram("depth"),M=this.getDepthModeFor3D(),R=on(b,{tileSize:b.tileSize});for(const L of R){const F=this.style.map.terrain&&this.style.map.terrain.getTerrainData(L),B=m.getMeshFromTileID(this.context,L.canonical,!0,!0,"raster"),Y=b.getProjectionData({overscaledTileID:L,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(n,l.TRIANGLES,M,Pn.disabled,xi.disabled,En.backCCW,null,F,Y,"$clipping",B.vertexBuffer,B.indexBuffer,B.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,l=this.context.gl;return new Pn({func:l.NOTEQUAL,mask:255},n,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(n){const l=this.context.gl;return new Pn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,l.KEEP,l.KEEP,l.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const l=this.context.gl,m=n.sort((M,R)=>R.overscaledZ-M.overscaledZ),b=m[m.length-1].overscaledZ,T=m[0].overscaledZ-b+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const M={};for(let R=0;R<T;R++)M[R+b]=new Pn({func:l.GEQUAL,mask:255},R+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=T,[M,m]}return[{[b]:Pn.disabled},m]}stencilConfigForOverlapTwoPass(n){const l=this.context.gl,m=n.sort((M,R)=>R.overscaledZ-M.overscaledZ),b=m[m.length-1].overscaledZ,T=m[0].overscaledZ-b+1;if(this.clearStencil(),T>1){const M={},R={};for(let L=0;L<T;L++)M[L+b]=new Pn({func:l.GREATER,mask:255},T+1+L,255,l.KEEP,l.KEEP,l.REPLACE),R[L+b]=new Pn({func:l.GREATER,mask:255},1+L,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID=2*T+1,[M,R,m]}return this.nextStencilID=3,[{[b]:new Pn({func:l.GREATER,mask:255},2,255,l.KEEP,l.KEEP,l.REPLACE)},{[b]:new Pn({func:l.GREATER,mask:255},1,255,l.KEEP,l.KEEP,l.REPLACE)},m]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new xi([n.CONSTANT_COLOR,n.ONE],new c.bo(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?xi.unblended:xi.alphaBlended}getDepthModeForSublayer(n,l,m){if(!this.opaquePassEnabledForLayer())return hn.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new hn(m||this.context.gl.LEQUAL,l,[b,b])}getDepthModeFor3D(){return new hn(this.context.gl.LEQUAL,hn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,l){var m,b;this.style=n,this.options=l,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(ae()),this.imageManager.beginFrame();const T=this.style._order,M=this.style.tileManagers,R={},L={},F={},B={isRenderingToTexture:!1,isRenderingGlobe:((m=n.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const $ in M){const J=M[$];J.used&&J.prepare(this.context),R[$]=J.getVisibleCoordinates(!1),L[$]=R[$].slice().reverse(),F[$]=J.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<T.length;$++)if(this.style._layers[T[$]].is3D()){this.opaquePassCutoff=$;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const $ of T){const J=this.style._layers[$];if(!J.hasOffscreenPass()||J.isHidden(this.transform.zoom))continue;const oe=L[J.source];(J.type==="custom"||oe.length)&&this.renderLayer(this,M[J.source],J,oe,B)}if((b=this.style.projection)===null||b===void 0||b.updateGPUdependent({context:this.context,useProgram:$=>this.useProgram($)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?c.bo.black:c.bo.transparent,depth:1}),this.clearStencil(),this.style.sky&&function($,J){const oe=$.context,de=oe.gl,pe=((Re,we,Be)=>{const We=Math.cos(we.rollInRadians),$e=Math.sin(we.rollInRadians),Ye=Ue(we),qe=we.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Re.properties.get("sky-color"),u_horizon_color:Re.properties.get("horizon-color"),u_horizon:[(we.width/2-Ye*$e)*Be,(we.height/2+Ye*We)*Be],u_horizon_normal:[-$e,We],u_sky_horizon_blend:Re.properties.get("sky-horizon-blend")*we.height/2*Be,u_sky_blend:qe}})(J,$.style.map.transform,$.pixelRatio),ye=new hn(de.LEQUAL,hn.ReadWrite,[0,1]),be=Pn.disabled,Me=$.colorModeForRenderPass(),_e=$.useProgram("sky"),Ce=tc(oe,J);_e.draw(oe,de.TRIANGLES,ye,be,Me,En.disabled,pe,null,void 0,"sky",Ce.vertexBuffer,Ce.indexBuffer,Ce.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const $=this.style._layers[T[this.currentLayer]],J=M[$.source],oe=R[$.source];this._renderTileClippingMasks($,oe,!1),this.renderLayer(this,J,$,oe,B)}this.renderPass="translucent";let Y=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const $=this.style._layers[T[this.currentLayer]],J=M[$.source];if(this.renderToTexture&&this.renderToTexture.renderLayer($,B))continue;this.opaquePassEnabledForLayer()||Y||(Y=!0,B.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const oe=($.type==="symbol"?F:L)[$.source];this._renderTileClippingMasks($,R[$.source],!!this.renderToTexture),this.renderLayer(this,J,$,oe,B)}if(B.isRenderingGlobe&&function($,J,oe){const de=$.context,pe=de.gl,ye=$.useProgram("atmosphere"),be=new hn(pe.LEQUAL,hn.ReadOnly,[0,1]),Me=$.transform,_e=function(qe,xt){const wt=qe.properties.get("position"),ut=[-wt.x,-wt.y,-wt.z],Pt=c.ar(new Float64Array(16));return qe.properties.get("anchor")==="map"&&(c.bf(Pt,Pt,xt.rollInRadians),c.bg(Pt,Pt,-xt.pitchInRadians),c.bf(Pt,Pt,xt.bearingInRadians),c.bg(Pt,Pt,xt.center.lat*Math.PI/180),c.bI(Pt,Pt,-xt.center.lng*Math.PI/180)),c.cf(ut,ut,Pt),ut}(oe,$.transform),Ce=Me.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Re=J.properties.get("atmosphere-blend")*Ce.projectionTransition;if(Re===0)return;const we=df(Me.worldSize,Me.center.lat),Be=Me.inverseProjectionMatrix,We=new Float64Array(4);We[3]=1,c.aG(We,We,Me.modelViewProjectionMatrix),We[0]/=We[3],We[1]/=We[3],We[2]/=We[3],We[3]=1,c.aG(We,We,Be),We[0]/=We[3],We[1]/=We[3],We[2]/=We[3],We[3]=1;const $e=((qe,xt,wt,ut,Pt)=>({u_sun_pos:qe,u_atmosphere_blend:xt,u_globe_position:wt,u_globe_radius:ut,u_inv_proj_matrix:Pt}))(_e,Re,[We[0],We[1],We[2]],we,Be),Ye=tc(de,J);ye.draw(de,pe.TRIANGLES,be,Pn.disabled,xi.alphaBlended,En.disabled,$e,null,null,"atmosphere",Ye.vertexBuffer,Ye.indexBuffer,Ye.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const $=function(J,oe){let de=null;const pe=Object.values(J._layers).flatMap(_e=>_e.source&&!_e.isHidden(oe)?[J.tileManagers[_e.source]]:[]),ye=pe.filter(_e=>_e.getSource().type==="vector"),be=pe.filter(_e=>_e.getSource().type!=="vector"),Me=_e=>{(!de||de.getSource().maxzoom<_e.getSource().maxzoom)&&(de=_e)};return ye.forEach(_e=>Me(_e)),de||be.forEach(_e=>Me(_e)),de}(this.style,this.transform.zoom);$&&function(J,oe,de){for(let pe=0;pe<de.length;pe++)Cf(J,oe,de[pe])}(this,$,$.getVisibleCoordinates())}this.options.showPadding&&function($){const J=$.transform.padding;Zo($,$.transform.height-(J.top||0),3,vo),Zo($,J.bottom||0,3,Xh),Os($,J.left||0,3,pl),Os($,$.transform.width-(J.right||0),3,Qh);const oe=$.transform.centerPoint;(function(de,pe,ye,be){to(de,pe-1,ye-10,2,20,be),to(de,pe-10,ye-1,20,2,be)})($,oe.x,$.transform.height-oe.y,ec)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let b=this.terrainFacilitator.dirty;b||(b=n?!c.ci(l,m):!c.cj(l,m)),b||(b=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),b&&(c.ck(l,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(T,M){const R=T.context,L=R.gl,F=T.transform,B=xi.unblended,Y=new hn(L.LEQUAL,hn.ReadWrite,[0,1]),$=M.tileManager.getRenderableTiles(),J=T.useProgram("terrainDepth");R.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),R.clear({color:c.bo.transparent,depth:1});for(const oe of $){const de=M.getTerrainMesh(oe.tileID),pe=M.getTerrainData(oe.tileID),ye=F.getProjectionData({overscaledTileID:oe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),be={u_ele_delta:M.getMeshFrameDelta(F.zoom)};J.draw(R,L.TRIANGLES,Y,Pn.disabled,B,En.backCCW,be,pe,ye,"terrain",de.vertexBuffer,de.indexBuffer,de.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain),function(T,M){const R=T.context,L=R.gl,F=T.transform,B=xi.unblended,Y=new hn(L.LEQUAL,hn.ReadWrite,[0,1]),$=M.getCoordsTexture(),J=M.tileManager.getRenderableTiles(),oe=T.useProgram("terrainCoords");R.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),R.clear({color:c.bo.transparent,depth:1}),M.coordsIndex=[];for(const de of J){const pe=M.getTerrainMesh(de.tileID),ye=M.getTerrainData(de.tileID);R.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,$.texture);const be={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(F.zoom)},Me=F.getProjectionData({overscaledTileID:de.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});oe.draw(R,L.TRIANGLES,Y,Pn.disabled,B,En.backCCW,be,ye,Me,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),M.coordsIndex.push(de.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain))}renderLayer(n,l,m,b,T){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(b||[]).length)&&(this.id=m.id,c.cl(m)?function(M,R,L,F,B,Y){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:$}=Y,J=Pn.disabled,oe=M.colorModeForRenderPass();(L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(de,pe,ye,be,Me,_e,Ce,Re,we){const Be=pe.transform,We=pe.style.map.terrain,$e=Me==="map",Ye=_e==="map";for(const qe of de){const xt=be.getTile(qe),wt=xt.getBucket(ye);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const ut=c.ax(wt.textSizeData,Be.zoom),Pt=c.aM(xt,1,pe.transform.zoom),cn=lr($e,pe.transform,Pt),an=ye.layout.get("icon-text-fit")!=="none"&&wt.hasIconData();if(ut){const Si=Math.pow(2,Be.zoom-xt.tileID.overscaledZ),gi=We?(Vi,ci)=>We.getElevation(qe,Vi,ci):null;Kl(wt,$e,Ye,we,Be,cn,Si,ut,an,c.aN(Be,xt,Ce,Re),qe.toUnwrapped(),gi)}}}(F,M,L,R,L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),B),L.paint.get("icon-opacity").constantOr(1)!==0&&Ca(M,R,L,F,!1,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),L.layout.get("icon-rotation-alignment"),L.layout.get("icon-pitch-alignment"),L.layout.get("icon-keep-upright"),J,oe,$),L.paint.get("text-opacity").constantOr(1)!==0&&Ca(M,R,L,F,!0,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.layout.get("text-keep-upright"),J,oe,$),R.map.showCollisionBoxes&&(Ma(M,R,L,F,!0),Ma(M,R,L,F,!1))}(n,l,m,b,this.style.placement.variableOffsets,T):c.cm(m)?function(M,R,L,F,B){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=B,$=L.paint.get("circle-opacity"),J=L.paint.get("circle-stroke-width"),oe=L.paint.get("circle-stroke-opacity"),de=!L.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(J.constantOr(1)===0||oe.constantOr(1)===0))return;const pe=M.context,ye=pe.gl,be=M.transform,Me=M.getDepthModeForSublayer(0,hn.ReadOnly),_e=Pn.disabled,Ce=M.colorModeForRenderPass(),Re=[],we=be.getCircleRadiusCorrection();for(let Be=0;Be<F.length;Be++){const We=F[Be],$e=R.getTile(We),Ye=$e.getBucket(L);if(!Ye)continue;const qe=L.paint.get("circle-translate"),xt=L.paint.get("circle-translate-anchor"),wt=c.aN(be,$e,qe,xt),ut=Ye.programConfigurations.get(L.id),Pt=M.useProgram("circle",ut),cn=Ye.layoutVertexBuffer,an=Ye.indexBuffer,Si=M.style.map.terrain&&M.style.map.terrain.getTerrainData(We),gi={programConfiguration:ut,program:Pt,layoutVertexBuffer:cn,indexBuffer:an,uniformValues:bg(M,$e,L,wt,we),terrainData:Si,projectionData:be.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!Y,applyTerrainMatrix:!0})};if(de){const Vi=Ye.segments.get();for(const ci of Vi)Re.push({segments:new c.aW([ci]),sortKey:ci.sortKey,state:gi})}else Re.push({segments:Ye.segments,sortKey:0,state:gi})}de&&Re.sort((Be,We)=>Be.sortKey-We.sortKey);for(const Be of Re){const{programConfiguration:We,program:$e,layoutVertexBuffer:Ye,indexBuffer:qe,uniformValues:xt,terrainData:wt,projectionData:ut}=Be.state;$e.draw(pe,ye.TRIANGLES,Me,_e,Ce,En.backCCW,xt,wt,ut,L.id,Ye,qe,Be.segments,L.paint,M.transform.zoom,We)}}(n,l,m,b,T):c.cn(m)?function(M,R,L,F,B){if(L.paint.get("heatmap-opacity")===0)return;const Y=M.context,{isRenderingToTexture:$,isRenderingGlobe:J}=B;if(M.style.map.terrain){for(const oe of F){const de=R.getTile(oe);R.hasRenderableParent(oe)||(M.renderPass==="offscreen"?Ua(M,de,L,oe,J):M.renderPass==="translucent"&&Rs(M,L,oe,$,J))}Y.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?function(oe,de,pe,ye){const be=oe.context,Me=be.gl,_e=oe.transform,Ce=Pn.disabled,Re=new xi([Me.ONE,Me.ONE],c.bo.transparent,[!0,!0,!0,!0]);(function(we,Be,We){const $e=we.gl;we.activeTexture.set($e.TEXTURE1),we.viewport.set([0,0,Be.width/4,Be.height/4]);let Ye=We.heatmapFbos.get(c.cc);Ye?($e.bindTexture($e.TEXTURE_2D,Ye.colorAttachment.get()),we.bindFramebuffer.set(Ye.framebuffer)):(Ye=Uo(we,Be.width/4,Be.height/4),We.heatmapFbos.set(c.cc,Ye))})(be,oe,pe),be.clear({color:c.bo.transparent});for(let we=0;we<ye.length;we++){const Be=ye[we];if(de.hasRenderableParent(Be))continue;const We=de.getTile(Be),$e=We.getBucket(pe);if(!$e)continue;const Ye=$e.programConfigurations.get(pe.id),qe=oe.useProgram("heatmap",Ye),xt=_e.getProjectionData({overscaledTileID:Be,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),wt=_e.getCircleRadiusCorrection();qe.draw(be,Me.TRIANGLES,hn.disabled,Ce,Re,En.backCCW,Bc(We,_e.zoom,pe.paint.get("heatmap-intensity"),wt),null,xt,pe.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,pe.paint,_e.zoom,Ye)}be.viewport.set([0,0,oe.width,oe.height])}(M,R,L,F):M.renderPass==="translucent"&&function(oe,de){const pe=oe.context,ye=pe.gl;pe.setColorMode(oe.colorModeForRenderPass());const be=de.heatmapFbos.get(c.cc);be&&(pe.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,be.colorAttachment.get()),pe.activeTexture.set(ye.TEXTURE1),ju(pe,de).bind(ye.LINEAR,ye.CLAMP_TO_EDGE),oe.useProgram("heatmapTexture").draw(pe,ye.TRIANGLES,hn.disabled,Pn.disabled,oe.colorModeForRenderPass(),En.disabled,Vp(oe,de,0,1),null,null,de.id,oe.viewportBuffer,oe.quadTriangleIndexBuffer,oe.viewportSegments,de.paint,oe.transform.zoom))}(M,L)}(n,l,m,b,T):c.co(m)?function(M,R,L,F,B){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=B,$=L.paint.get("line-opacity"),J=L.paint.get("line-width");if($.constantOr(1)===0||J.constantOr(1)===0)return;const oe=M.getDepthModeForSublayer(0,hn.ReadOnly),de=M.colorModeForRenderPass(),pe=L.paint.get("line-dasharray"),ye=pe.constantOr(1),be=L.paint.get("line-pattern"),Me=be.constantOr(1),_e=L.paint.get("line-gradient"),Ce=L.getCrossfadeParameters();let Re;Re=Me?"linePattern":ye&&_e?"lineGradientSDF":ye?"lineSDF":_e?"lineGradient":"line";const we=M.context,Be=we.gl,We=M.transform;let $e=!0;for(const Ye of F){const qe=R.getTile(Ye);if(Me&&!qe.patternsLoaded())continue;const xt=qe.getBucket(L);if(!xt)continue;const wt=xt.programConfigurations.get(L.id),ut=M.context.program.get(),Pt=M.useProgram(Re,wt),cn=$e||Pt.program!==ut,an=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Ye),Si=be.constantOr(null),gi=pe&&pe.constantOr(null);if(Si&&qe.imageAtlas){const Qi=qe.imageAtlas,Ki=Qi.patternPositions[Si.to.toString()],rr=Qi.patternPositions[Si.from.toString()];Ki&&rr&&wt.setConstantPatternPositions(Ki,rr)}else if(gi){const Qi=L.layout.get("line-cap")==="round",Ki=M.lineAtlas.getDash(gi.to,Qi),rr=M.lineAtlas.getDash(gi.from,Qi);wt.setConstantDashPositions(Ki,rr)}const Vi=We.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),ci=We.getPixelScale();let fr;Me?(fr=xg(M,qe,L,ci,Ce),Mf(we,Be,qe,wt,Ce)):ye&&_e?(fr=Tg(M,qe,L,ci,Ce,xt.lineClipsArray.length),wi(M,R,we,Be,L,xt,Ye,wt,Ce)):ye?(fr=wg(M,qe,L,ci,Ce),Xp(M,we,Be,wt,cn,Ce)):_e?(fr=Ou(M,qe,L,ci,xt.lineClipsArray.length),vr(M,R,we,Be,L,xt,Ye)):fr=ku(M,qe,L,ci);const Oi=M.stencilModeForClipping(Ye);Pt.draw(we,Be.TRIANGLES,oe,Oi,de,En.disabled,fr,an,Vi,L.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,L.paint,M.transform.zoom,wt,xt.layoutVertexBuffer2),$e=!1}}(n,l,m,b,T):c.cp(m)?function(M,R,L,F,B){const Y=L.paint.get("fill-color"),$=L.paint.get("fill-opacity");if($.constantOr(1)===0)return;const{isRenderingToTexture:J}=B,oe=M.colorModeForRenderPass(),de=L.paint.get("fill-pattern"),pe=M.opaquePassEnabledForLayer()&&!de.constantOr(1)&&Y.constantOr(c.bo.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===pe){const ye=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?hn.ReadWrite:hn.ReadOnly);ks(M,R,L,F,ye,oe,!1,J)}if(M.renderPass==="translucent"&&L.paint.get("fill-antialias")){const ye=M.getDepthModeForSublayer(L.getPaintProperty("fill-outline-color")?2:0,hn.ReadOnly);ks(M,R,L,F,ye,oe,!0,J)}}(n,l,m,b,T):c.cq(m)?function(M,R,L,F,B){const Y=L.paint.get("fill-extrusion-opacity");if(Y===0)return;const{isRenderingToTexture:$}=B;if(M.renderPass==="translucent"){const J=new hn(M.context.gl.LEQUAL,hn.ReadWrite,M.depthRangeFor3D);if(Y!==1||L.paint.get("fill-extrusion-pattern").constantOr(1))Un(M,R,L,F,J,Pn.disabled,xi.disabled,$),Un(M,R,L,F,J,M.stencilModeFor3D(),M.colorModeForRenderPass(),$);else{const oe=M.colorModeForRenderPass();Un(M,R,L,F,J,Pn.disabled,oe,$)}}}(n,l,m,b,T):c.cr(m)?function(M,R,L,F,B){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=B,$=M.context,J=M.style.projection.useSubdivision,oe=M.getDepthModeForSublayer(0,hn.ReadOnly),de=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(pe,ye,be,Me,_e,Ce,Re){const we=pe.context,Be=we.gl;for(const We of be){const $e=ye.getTile(We),Ye=$e.dem;if(!Ye||!Ye.data||!$e.needsHillshadePrepare)continue;const qe=Ye.dim,xt=Ye.stride,wt=Ye.getPixels();if(we.activeTexture.set(Be.TEXTURE1),we.pixelStoreUnpackPremultiplyAlpha.set(!1),$e.demTexture=$e.demTexture||pe.getTileTexture(xt),$e.demTexture){const Pt=$e.demTexture;Pt.update(wt,{premultiply:!1}),Pt.bind(Be.NEAREST,Be.CLAMP_TO_EDGE)}else $e.demTexture=new c.T(we,wt,Be.RGBA,{premultiply:!1}),$e.demTexture.bind(Be.NEAREST,Be.CLAMP_TO_EDGE);we.activeTexture.set(Be.TEXTURE0);let ut=$e.fbo;if(!ut){const Pt=new c.T(we,{width:qe,height:qe,data:null},Be.RGBA);Pt.bind(Be.LINEAR,Be.CLAMP_TO_EDGE),ut=$e.fbo=we.createFramebuffer(qe,qe,!0,!1),ut.colorAttachment.set(Pt.texture)}we.bindFramebuffer.set(ut.framebuffer),we.viewport.set([0,0,qe,qe]),pe.useProgram("hillshadePrepare").draw(we,Be.TRIANGLES,_e,Ce,Re,En.disabled,Up($e.tileID,Ye),null,null,Me.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments),$e.needsHillshadePrepare=!1}})(M,R,F,L,oe,Pn.disabled,de),$.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(J){const[pe,ye,be]=M.stencilConfigForOverlapTwoPass(F);Go(M,R,L,be,pe,oe,de,!1,Y),Go(M,R,L,be,ye,oe,de,!0,Y)}else{const[pe,ye]=M.getStencilConfigForOverlapAndUpdateStencilID(F);Go(M,R,L,ye,pe,oe,de,!1,Y)}}(n,l,m,b,T):c.cs(m)?function(M,R,L,F,B){if(M.renderPass!=="translucent"||!F.length)return;const{isRenderingToTexture:Y}=B,$=M.style.projection.useSubdivision,J=M.getDepthModeForSublayer(0,hn.ReadOnly),oe=M.colorModeForRenderPass();if($){const[de,pe,ye]=M.stencilConfigForOverlapTwoPass(F);hr(M,R,L,ye,de,J,oe,!1,Y),hr(M,R,L,ye,pe,J,oe,!0,Y)}else{const[de,pe]=M.getStencilConfigForOverlapAndUpdateStencilID(F);hr(M,R,L,pe,de,J,oe,!1,Y)}}(n,l,m,b,T):c.bT(m)?function(M,R,L,F,B){if(M.renderPass!=="translucent"||L.paint.get("raster-opacity")===0||!F.length)return;const{isRenderingToTexture:Y}=B,$=R.getSource(),J=M.style.projection.useSubdivision;if($ instanceof Sr)Jl(M,R,L,F,null,!1,!1,$.tileCoords,$.flippedWindingOrder,Y);else if(J){const[oe,de,pe]=M.stencilConfigForOverlapTwoPass(F);Jl(M,R,L,pe,oe,!1,!0,Vu,!1,Y),Jl(M,R,L,pe,de,!0,!0,Vu,!1,Y)}else{const[oe,de]=M.getStencilConfigForOverlapAndUpdateStencilID(F);Jl(M,R,L,de,oe,!1,!0,Vu,!1,Y)}}(n,l,m,b,T):c.ct(m)?function(M,R,L,F,B){const Y=L.paint.get("background-color"),$=L.paint.get("background-opacity");if($===0)return;const{isRenderingToTexture:J}=B,oe=M.context,de=oe.gl,pe=M.style.projection,ye=M.transform,be=ye.tileSize,Me=L.paint.get("background-pattern");if(M.isPatternMissing(Me))return;const _e=!Me&&Y.a===1&&$===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==_e)return;const Ce=Pn.disabled,Re=M.getDepthModeForSublayer(0,_e==="opaque"?hn.ReadWrite:hn.ReadOnly),we=M.colorModeForRenderPass(),Be=M.useProgram(Me?"backgroundPattern":"background"),We=F||on(ye,{tileSize:be,terrain:M.style.map.terrain});Me&&(oe.activeTexture.set(de.TEXTURE0),M.imageManager.bind(M.context));const $e=L.getCrossfadeParameters();for(const Ye of We){const qe=ye.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!J,applyTerrainMatrix:!0}),xt=Me?wf($,M,Me,{tileID:Ye,tileSize:be},$e):xf($,Y),wt=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Ye),ut=pe.getMeshFromTileID(oe,Ye.canonical,!1,!0,"raster");Be.draw(oe,de.TRIANGLES,Re,Ce,we,En.backCCW,xt,wt,qe,L.id,ut.vertexBuffer,ut.indexBuffer,ut.segments)}}(n,0,m,b,T):c.cu(m)&&function(M,R,L,F){const{isRenderingGlobe:B}=F,Y=M.context,$=L.implementation,J=M.style.projection,oe=M.transform,de=oe.getProjectionDataForCustomLayer(B),pe={farZ:oe.farZ,nearZ:oe.nearZ,fov:oe.fov*Math.PI/180,modelViewProjectionMatrix:oe.modelViewProjectionMatrix,projectionMatrix:oe.projectionMatrix,shaderData:{variantName:J.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${J.shaderPreludeCode.vertexSource}`,define:J.shaderDefine},defaultProjectionData:de},ye=$.renderingMode?$.renderingMode:"2d";if(M.renderPass==="offscreen"){const be=$.prerender;be&&(M.setCustomLayerDefaults(),Y.setColorMode(M.colorModeForRenderPass()),be.call($,Y.gl,pe),Y.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),Y.setColorMode(M.colorModeForRenderPass()),Y.setStencilMode(Pn.disabled);const be=ye==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,hn.ReadOnly);Y.setDepthMode(be),$.render(Y.gl,pe),Y.setDirty(),M.setBaseState(),Y.bindFramebuffer.set(null)}}(n,0,m,T))}saveTileTexture(n){const l=this._tileTextures[n.size[0]];l?l.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const l=this._tileTextures[n];return l&&l.length>0?l.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const l=this.imageManager.getPattern(n.from.toString()),m=this.imageManager.getPattern(n.to.toString());return!l||!m}useProgram(n,l,m=!1,b=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,M=this.style.projection,R=m?Sa.projectionMercator:M.shaderPreludeCode,L=m?cr:M.shaderDefine,F=n+(l?l.cacheKey:"")+`/${m?ur:M.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(b?`/${b.join("/")}`:"");return this.cache[F]||(this.cache[F]=new _g(this.context,Sa[n],l,Uh[n],this._showOverdrawInspector,T,R,L,b)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var n,l;if(this._tileTextures){for(const m in this._tileTextures){const b=this._tileTextures[m];if(b)for(const T of b)T.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((n=this.tileExtentMesh.vertexBuffer)===null||n===void 0||n.destroy()),this.tileExtentMesh&&((l=this.tileExtentMesh.indexBuffer)===null||l===void 0||l.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const m in this.cache){const b=this.cache[m];b&&b.program&&this.context.gl.deleteProgram(b.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:l}=this.context.gl;return this.width!==n||this.height!==l}}function ml(w,n){let l,m=!1,b=null,T=null;const M=()=>{b=null,m&&(w.apply(T,l),b=setTimeout(M,n),m=!1)};return(...R)=>(m=!0,T=this,l=R,b||M(),b)}class Ar{constructor(n){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let m;return l.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(m=b)}),(m&&m[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(!this._isValidHash(l))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:m,pitch:+(l[4]||0)}),!0},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{const l=this._getCurrentHash();if(l.length===0)return;const m=l.join("/");let b=m;b.split("&").length>0&&(b=b.split("&")[0]),this._hashName&&(b=`${this._hashName}=${m}`);let T=window.location.hash.replace(b,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let M=window.location.href.replace(/(#.+)?$/,T);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=ml(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const l=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,b=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,b),M=Math.round(l.lng*T)/T,R=Math.round(l.lat*T)/T,L=this._map.getBearing(),F=this._map.getPitch();let B="";if(B+=n?`/${M}/${R}/${m}`:`${m}/${R}/${M}`,(L||F)&&(B+="/"+Math.round(10*L)/10),F&&(B+=`/${Math.round(F)}`),this._hashName){const Y=this._hashName;let $=!1;const J=window.location.hash.slice(1).split("&").map(oe=>{const de=oe.split("=")[0];return de===Y?($=!0,`${de}=${B}`):oe}).filter(oe=>oe);return $||J.push(`${Y}=${B}`),`#${J.join("&")}`}return`#${B}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new c.V(+n[2],+n[1])}catch{return!1}const l=+n[0],m=+(n[3]||0),b=+(n[4]||0);return l>=this._map.getMinZoom()&&l<=this._map.getMaxZoom()&&m>=-180&&m<=180&&b>=this._map.getMinPitch()&&b<=this._map.getMaxPitch()}}const gl={linearity:.3,easing:c.cv(0,0,.3,1)},Qp=c.e({deceleration:2500,maxSpeed:1400},gl),Mg=c.e({deceleration:20,maxSpeed:1400},gl),Cg=c.e({deceleration:1e3,maxSpeed:360},gl),Df=c.e({deceleration:1e3,maxSpeed:90},gl),dr=c.e({deceleration:1e3,maxSpeed:360},gl);class Ga{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:ae(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,l=ae();for(;n.length>0&&l-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)l.zoom+=T.zoomDelta||0,l.bearing+=T.bearingDelta||0,l.pitch+=T.pitchDelta||0,l.roll+=T.rollDelta||0,T.panDelta&&l.pan._add(T.panDelta),T.around&&(l.around=T.around),T.pinchAround&&(l.pinchAround=T.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(l.pan.mag()){const T=Ns(l.pan.mag(),m,c.e({},Qp,n||{})),M=l.pan.mult(T.amount/l.pan.mag()),R=this._map.cameraHelper.handlePanInertia(M,this._map.transform);b.center=R.easingCenter,b.offset=R.easingOffset,Mr(b,T)}if(l.zoom){const T=Ns(l.zoom,m,Mg);b.zoom=this._map.transform.zoom+T.amount,Mr(b,T)}if(l.bearing){const T=Ns(l.bearing,m,Cg);b.bearing=this._map.transform.bearing+c.an(T.amount,-179,179),Mr(b,T)}if(l.pitch){const T=Ns(l.pitch,m,Df);b.pitch=this._map.transform.pitch+T.amount,Mr(b,T)}if(l.roll){const T=Ns(l.roll,m,dr);b.roll=this._map.transform.roll+c.an(T.amount,-179,179),Mr(b,T)}if(b.zoom||b.bearing){const T=l.pinchAround===void 0?l.around:l.pinchAround;b.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),c.e(b,{noMoveStart:!0})}}function Mr(w,n){(!w.duration||w.duration<n.duration)&&(w.duration=n.duration,w.easing=n.easing)}function Ns(w,n,l){const{maxSpeed:m,linearity:b,deceleration:T}=l,M=c.an(w*b/(n/1e3),-m,m),R=Math.abs(M)/(T*b);return{easing:l.easing,duration:1e3*R,amount:M*(R/2)}}class ji extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,m,b={}){m=m instanceof MouseEvent?m:new MouseEvent(n,m);const T=q.mousePos(l.getCanvas(),m),M=l.unproject(T);super(n,c.e({point:T,lngLat:M,originalEvent:m},b)),this._defaultPrevented=!1,this.target=l}}class Ps extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,m){const b=n==="touchend"?m.changedTouches:m.touches,T=q.touchPos(l.getCanvasContainer(),b),M=T.map(L=>l.unproject(L)),R=T.reduce((L,F,B,Y)=>L.add(F.div(Y.length)),new c.P(0,0));super(n,{points:T,point:R,lngLats:M,lngLat:l.unproject(R),originalEvent:m}),this._defaultPrevented=!1}}class bo extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,m){super(n,{originalEvent:m}),this._defaultPrevented=!1}}class f0{constructor(n,l){this._map=n,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new bo(n.type,this._map,n))}mousedown(n,l){return this._mousedownPos=l,this._firePreventable(new ji(n.type,this._map,n))}mouseup(n){this._map.fire(new ji(n.type,this._map,n))}click(n,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new ji(n.type,this._map,n))}dblclick(n){return this._firePreventable(new ji(n.type,this._map,n))}mouseover(n){this._map.fire(new ji(n.type,this._map,n))}mouseout(n){this._map.fire(new ji(n.type,this._map,n))}touchstart(n){return this._firePreventable(new Ps(n.type,this._map,n))}touchmove(n){this._map.fire(new Ps(n.type,this._map,n))}touchend(n){this._map.fire(new Ps(n.type,this._map,n))}touchcancel(n){this._map.fire(new Ps(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Dg{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new ji(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ji("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new ji(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Jh{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(c.P.convert(n),this._map.terrain)}}class Kp{constructor(n,l){this._map=n,this._tr=new Jh(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,l){this.isEnabled()&&n.shiftKey&&n.button===0&&(q.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(n,l){if(!this._active)return;const m=l;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=m,this._box||(this._box=q.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const T=Math.min(b.x,m.x),M=Math.max(b.x,m.x),R=Math.min(b.y,m.y),L=Math.max(b.y,m.y);q.setTransform(this._box,`translate(${T}px,${R}px)`),this._box.style.width=M-T+"px",this._box.style.height=L-R+"px"}mouseupWindow(n,l){if(!this._active||n.button!==0)return;const m=this._startPos,b=l;if(this.reset(),q.suppressClick(),m.x!==b.x||m.y!==b.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:n})),{cameraAnimation:T=>T.fitScreenCoordinates(m,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(q.remove(this._box),this._box=null),q.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,l){return this._map.fire(new c.l(n,{originalEvent:l}))}}function zs(w,n){if(w.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${n.length}`);const l={};for(let m=0;m<w.length;m++)l[w[m].identifier]=n[m];return l}class Wc{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,l,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),m.length===this.numTouches&&(this.centroid=function(b){const T=new c.P(0,0);for(const M of b)T._add(M);return T.div(b.length)}(l),this.touches=zs(m,l)))}touchmove(n,l,m){if(this.aborted||!this.centroid)return;const b=zs(m,l);for(const T in this.touches){const M=b[T];(!M||M.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(n,l,m){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Za{constructor(n){this.singleTap=new Wc(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,l,m){this.singleTap.touchstart(n,l,m)}touchmove(n,l,m){this.singleTap.touchmove(n,l,m)}touchend(n,l,m){const b=this.singleTap.touchend(n,l,m);if(b){const T=n.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(b)<30;if(T&&M||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class Ot{constructor(n){this._tr=new Jh(n),this._zoomIn=new Za({numTouches:1,numTaps:2}),this._zoomOut=new Za({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,l,m){this._zoomIn.touchstart(n,l,m),this._zoomOut.touchstart(n,l,m)}touchmove(n,l,m){this._zoomIn.touchmove(n,l,m),this._zoomOut.touchmove(n,l,m)}touchend(n,l,m){const b=this._zoomIn.touchend(n,l,m),T=this._zoomOut.touchend(n,l,m),M=this._tr;return b?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(b)},{originalEvent:n})}):T?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(T)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $o{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const l=this._moveFunction(...n);if(l.bearingDelta||l.pitchDelta||l.rollDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(n,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(l)?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,l){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const b=Array.isArray(l)?l[0]:l;return!this._moved&&b.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(m,b))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&q.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ed=0,td=2,nc={[ed]:1,[td]:2};class Fs{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const l=q.mouseButton(n);this._eventButton=l}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(l,m){const b=nc[m];return l.buttons===void 0||(l.buttons&b)!==b}(n,this._eventButton)}isValidEndEvent(n){return q.mouseButton(n)===this._eventButton}}class If{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class Xc{constructor(n=new Fs({checkCorrectEvent:()=>!0}),l=new If){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=l}_executeRelevantHandler(n,l,m){return n instanceof MouseEvent?l(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?m(n):void 0}startMove(n){this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.startMove(l),l=>this.oneFingerTouchMoveStateManager.startMove(l))}endMove(n){this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.endMove(l),l=>this.oneFingerTouchMoveStateManager.endMove(l))}isValidStartEvent(n){return this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.isValidStartEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidStartEvent(l))}isValidMoveEvent(n){return this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.isValidMoveEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(l))}isValidEndEvent(n){return this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.isValidEndEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidEndEvent(l))}}const xo=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=n=>{n.preventDefault()}};class Jp{constructor(n,l){this._clickTolerance=n.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,l,m){return this._calculateTransform(n,l,m)}touchmove(n,l,m){if(this._active){if(!this._shouldBePrevented(m.length))return n.preventDefault(),this._calculateTransform(n,l,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,l,m){this._calculateTransform(n,l,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,l,m){m.length>0&&(this._active=!0);const b=zs(m,l),T=new c.P(0,0),M=new c.P(0,0);let R=0;for(const F in b){const B=b[F],Y=this._touches[F];Y&&(T._add(B),M._add(B.sub(Y)),R++,b[F]=B)}if(this._touches=b,this._shouldBePrevented(R)||!M.mag())return;const L=M.div(R);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(R),panDelta:L}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,l,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([l[0],l[1]]))}touchmove(n,l,m){if(!this._firstTwoTouches)return;n.preventDefault();const[b,T]=this._firstTwoTouches,M=yl(m,l,b),R=yl(m,l,T);if(!M||!R)return;const L=this._aroundCenter?null:M.add(R).div(2);return this._move([M,R],L,n)}touchend(n,l,m){if(!this._firstTwoTouches)return;const[b,T]=this._firstTwoTouches,M=yl(m,l,b),R=yl(m,l,T);M&&R||(this._active&&q.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function yl(w,n,l){for(let m=0;m<w.length;m++)if(w[m].identifier===l)return n[m]}function Qc(w,n){return Math.log(w/n)/Math.LN2}class nd extends Uu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,l){const m=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Qc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qc(this._distance,m),pinchAround:l}}}function Gu(w,n){return 180*w.angleWith(n)/Math.PI}class Zu extends Uu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,l,m){const b=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Gu(this._vector,b),pinchAround:l}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const l=25/(Math.PI*this._minDiameter)*360,m=Gu(n,this._startVector);return Math.abs(m)<l}}function Rf(w){return Math.abs(w.y)>Math.abs(w.x)}class _l extends Uu{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,l,m){super.touchstart(n,l,m),this._currentTouchCount=m.length}_start(n){this._lastPoints=n,Rf(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,l,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const b=n[0].sub(this._lastPoints[0]),T=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,T,m.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(b.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(n,l,m){if(this._valid!==void 0)return this._valid;const b=n.mag()>=2,T=l.mag()>=2;if(!b&&!T)return;if(!b||!T)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const M=n.y>0==l.y>0;return Rf(n)&&Rf(l)&&M}}const Ig={panStep:100,bearingStep:15,pitchStep:10};class vl{constructor(n){this._tr=new Jh(n);const l=Ig;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let l=0,m=0,b=0,T=0,M=0;switch(n.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:n.shiftKey?m=-1:(n.preventDefault(),T=-1);break;case 39:n.shiftKey?m=1:(n.preventDefault(),T=1);break;case 38:n.shiftKey?b=1:(n.preventDefault(),M=-1);break;case 40:n.shiftKey?b=-1:(n.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(m=0,b=0),{cameraAnimation:R=>{const L=this._tr;R.easeTo({duration:300,easeId:"keyboardHandler",easing:js,zoom:l?Math.round(L.zoom)+l*(n.shiftKey?2:1):L.zoom,bearing:L.bearing+m*this._bearingStep,pitch:L.pitch+b*this._pitchStep,offset:[-T*this._panStep,-M*this._panStep],center:L.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function js(w){return w*(2-w)}const ti=4.000244140625,ic=1/450;class wo{constructor(n,l){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=n,this._tr=new Jh(n),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=ic}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let l=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const m=ae(),b=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,l!==0&&l%ti==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(b*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),n.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=n,this._delta-=l,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=q.mousePos(this._map.getCanvas(),n),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(c.V.convert(m.center)):l,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const R=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=R),typeof this._targetZoom=="number"&&(this._targetZoom+=R)}if(this._delta!==0){const R=this._type==="wheel"&&Math.abs(this._delta)>ti?this._wheelZoomRate:this._defaultZoomRate;let L=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&L!==0&&(L=1/L);const F=typeof this._targetZoom!="number"?n.scale:c.aq(this._targetZoom);this._targetZoom=n.applyConstrain(n.getCameraLngLat(),c.at(F*L)).zoom,this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,m=this._startZoom,b=this._easing;let T,M=!1;if(this._type==="wheel"&&m&&b){const R=ae()-this._lastWheelEventTime,L=Math.min((R+5)/200,1),F=b(L);T=c.G.number(m,l,F),L<1?this._frameId||(this._frameId=!0):M=!0}else T=l,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!M,zoomDelta:T-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let l=c.cx;if(this._prevEase){const m=this._prevEase,b=(ae()-m.start)/m.duration,T=m.easing(b+.01)-m.easing(b),M=.27/Math.sqrt(T*T+1e-4)*.01,R=Math.sqrt(.0729-M*M);l=c.cv(M,R,.25,1)}return this._prevEase={start:ae(),duration:n,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class bl{constructor(n,l){this._clickZoom=n,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class id{constructor(n){this._tr=new Jh(n),this.reset()}reset(){this._active=!1}dblclick(n,l){return n.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kf{constructor(){this._tap=new Za({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,l,m){if(!this._swipePoint)if(this._tapTime){const b=l[0],T=n.timeStamp-this._tapTime<500,M=this._tapPoint.dist(b)<30;T&&M?m.length>0&&(this._swipePoint=b,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(n,l,m)}touchmove(n,l,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const b=l[0],T=b.y-this._swipePoint.y;return this._swipePoint=b,n.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(n,l,m)}touchend(n,l,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const b=this._tap.touchend(n,l,m);b&&(this._tapTime=n.timeStamp,this._tapPoint=b)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kc{constructor(n,l,m){this._el=n,this._mousePan=l,this._touchPan=m}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Jc{constructor(n,l,m,b){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=l,this._mousePitch=m,this._mouseRoll=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class em{constructor(n,l,m,b){this._el=n,this._touchZoom=l,this._touchRotate=m,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class To{constructor(n,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=q.create("div","maplibregl-cooperative-gesture-screen",n);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),b=document.createElement("div");b.className="maplibregl-desktop-message",b.textContent=l,this._container.appendChild(b);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=m,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(q.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,l){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:n,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const So=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class jt extends c.l{}function Qt(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class eu{constructor(n,l){this.handleWindowEvent=b=>{this.handleEvent(b,`${b.type}Window`)},this.handleEvent=(b,T)=>{if(b.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=b.type==="renderFrame"?void 0:b,R={needsRenderFrame:!1},L={},F={};for(const{handlerName:$,handler:J,allowed:oe}of this._handlers){if(!J.isEnabled())continue;let de;if(this._blockedByActive(F,oe,$))J.reset();else if(J[T||b.type]){if(c.cy(b,T||b.type)){const pe=q.mousePos(this._map.getCanvas(),b);de=J[T||b.type](b,pe)}else if(c.cz(b,T||b.type)){const pe=this._getMapTouches(b.touches),ye=q.touchPos(this._map.getCanvas(),pe);de=J[T||b.type](b,ye,pe)}else c.cA(T||b.type)||(de=J[T||b.type](b));this.mergeHandlerResult(R,L,de,$,M),de&&de.needsRenderFrame&&this._triggerRenderFrame()}(de||J.isActive())&&(F[$]=J)}const B={};for(const $ in this._previousActiveHandlers)F[$]||(B[$]=M);this._previousActiveHandlers=F,(Object.keys(B).length||Qt(R))&&(this._changes.push([R,L,B]),this._triggerRenderFrame()),(Object.keys(F).length||Qt(R))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Y}=R;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ga(n),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,T,M]of this._listeners)q.addEventListener(b,T,b===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[n,l,m]of this._listeners)q.removeEventListener(n,l,n===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(n){const l=this._map,m=l.getCanvasContainer();this._add("mapEvent",new f0(l,n));const b=l.boxZoom=new Kp(l,n);this._add("boxZoom",b),n.interactive&&n.boxZoom&&b.enable();const T=l.cooperativeGestures=new To(l,n.cooperativeGestures);this._add("cooperativeGestures",T),n.cooperativeGestures&&T.enable();const M=new Ot(l),R=new id(l);l.doubleClickZoom=new bl(R,M),this._add("tapZoom",M),this._add("clickZoom",R),n.interactive&&n.doubleClickZoom&&l.doubleClickZoom.enable();const L=new kf;this._add("tapDragZoom",L);const F=l.touchPitch=new _l(l);this._add("touchPitch",F),n.interactive&&n.touchPitch&&l.touchPitch.enable(n.touchPitch);const B=()=>l.project(l.getCenter()),Y=function({enable:_e,clickTolerance:Ce,aroundCenter:Re=!0,minPixelCenterThreshold:we=100,rotateDegreesPerPixelMoved:Be=.8},We){const $e=new Fs({checkCorrectEvent:Ye=>q.mouseButton(Ye)===0&&Ye.ctrlKey||q.mouseButton(Ye)===2&&!Ye.ctrlKey});return new $o({clickTolerance:Ce,move:(Ye,qe)=>{const xt=We();if(Re&&Math.abs(xt.y-Ye.y)>we)return{bearingDelta:c.cw(new c.P(Ye.x,qe.y),qe,xt)};let wt=(qe.x-Ye.x)*Be;return Re&&qe.y<xt.y&&(wt=-wt),{bearingDelta:wt}},moveStateManager:$e,enable:_e,assignEvents:xo})}(n,B),$=function({enable:_e,clickTolerance:Ce,pitchDegreesPerPixelMoved:Re=-.5}){const we=new Fs({checkCorrectEvent:Be=>q.mouseButton(Be)===0&&Be.ctrlKey||q.mouseButton(Be)===2});return new $o({clickTolerance:Ce,move:(Be,We)=>({pitchDelta:(We.y-Be.y)*Re}),moveStateManager:we,enable:_e,assignEvents:xo})}(n),J=function({enable:_e,clickTolerance:Ce,rollDegreesPerPixelMoved:Re=.3},we){const Be=new Fs({checkCorrectEvent:We=>q.mouseButton(We)===2&&We.ctrlKey});return new $o({clickTolerance:Ce,move:(We,$e)=>{const Ye=we();let qe=($e.x-We.x)*Re;return $e.y<Ye.y&&(qe=-qe),{rollDelta:qe}},moveStateManager:Be,enable:_e,assignEvents:xo})}(n,B);l.dragRotate=new Jc(n,Y,$,J),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",$,["mouseRotate","mouseRoll"]),this._add("mouseRoll",J,["mousePitch"]),n.interactive&&n.dragRotate&&l.dragRotate.enable();const oe=function({enable:_e,clickTolerance:Ce}){const Re=new Fs({checkCorrectEvent:we=>q.mouseButton(we)===0&&!we.ctrlKey});return new $o({clickTolerance:Ce,move:(we,Be)=>({around:Be,panDelta:Be.sub(we)}),activateOnStart:!0,moveStateManager:Re,enable:_e,assignEvents:xo})}(n),de=new Jp(n,l);l.dragPan=new Kc(m,oe,de),this._add("mousePan",oe),this._add("touchPan",de,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&l.dragPan.enable(n.dragPan);const pe=new Zu,ye=new nd;l.touchZoomRotate=new em(m,ye,pe,L),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&l.touchZoomRotate.enable(n.touchZoomRotate),this._add("blockableMapEvent",new Dg(l));const be=l.scrollZoom=new wo(l,()=>this._triggerRenderFrame());this._add("scrollZoom",be,["mousePan"]),n.interactive&&n.scrollZoom&&l.scrollZoom.enable(n.scrollZoom);const Me=l.keyboard=new vl(l);this._add("keyboard",Me),n.interactive&&n.keyboard&&l.keyboard.enable()}_add(n,l,m){this._handlers.push({handlerName:n,handler:l,allowed:m}),this._handlersById[n]=l}stop(n){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!So(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,l,m){for(const b in n)if(b!==m&&(!l||l.indexOf(b)<0))return!0;return!1}_getMapTouches(n){const l=[];for(const m of n)this._el.contains(m.target)&&l.push(m);return l}mergeHandlerResult(n,l,m,b,T){if(!m)return;c.e(n,m);const M={handlerName:b,originalEvent:m.originalEvent||T};m.zoomDelta!==void 0&&(l.zoom=M),m.panDelta!==void 0&&(l.drag=M),m.rollDelta!==void 0&&(l.roll=M),m.pitchDelta!==void 0&&(l.pitch=M),m.bearingDelta!==void 0&&(l.rotate=M)}_applyChanges(){const n={},l={},m={};for(const[b,T,M]of this._changes)b.panDelta&&(n.panDelta=(n.panDelta||new c.P(0,0))._add(b.panDelta)),b.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+b.pitchDelta),b.rollDelta&&(n.rollDelta=(n.rollDelta||0)+b.rollDelta),b.around!==void 0&&(n.around=b.around),b.pinchAround!==void 0&&(n.pinchAround=b.pinchAround),b.noInertia&&(n.noInertia=b.noInertia),c.e(l,T),c.e(m,M);this._updateMapTransform(n,l,m),this._changes=[]}_updateMapTransform(n,l,m){const b=this._map,T=b._getTransformForUpdate(),M=b.terrain;if(!(Qt(n)||M&&this._terrainMovement))return this._fireEvents(l,m,!0);b._stop(!0);let{panDelta:R,zoomDelta:L,bearingDelta:F,pitchDelta:B,rollDelta:Y,around:$,pinchAround:J}=n;J!==void 0&&($=J),$=$||b.transform.centerPoint,M&&!T.isPointOnMapSurface($)&&($=T.centerPoint);const oe={panDelta:R,zoomDelta:L,rollDelta:Y,pitchDelta:B,bearingDelta:F,around:$};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface($)&&($=T.centerPoint);const de=$.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(R?$.sub(R):$);this._handleMapControls({terrain:M,tr:T,deltasForHelper:oe,preZoomAroundLoc:de,combinedEventsInProgress:l,panDelta:R}),b._applyUpdatedTransform(T),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(l,m,!0)}_handleMapControls({terrain:n,tr:l,deltasForHelper:m,preZoomAroundLoc:b,combinedEventsInProgress:T,panDelta:M}){const R=this._map.cameraHelper;if(R.handleMapControlsRollPitchBearingZoom(m,l),n)return R.useGlobeControls?(this._terrainMovement||!T.drag&&!T.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void R.handleMapControlsPan(m,l,b)):this._terrainMovement||!T.drag&&!T.zoom?void(T.drag&&this._terrainMovement&&M?l.setCenter(l.screenPointToLocation(l.centerPoint.sub(M))):R.handleMapControlsPan(m,l,b)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void R.handleMapControlsPan(m,l,b));R.handleMapControlsPan(m,l,b)}_fireEvents(n,l,m){const b=So(this._eventsInProgress),T=So(n),M={};for(const Y in n){const{originalEvent:$}=n[Y];this._eventsInProgress[Y]||(M[`${Y}start`]=$),this._eventsInProgress[Y]=n[Y]}!b&&T&&this._fireEvent("movestart",T.originalEvent);for(const Y in M)this._fireEvent(Y,M[Y]);T&&this._fireEvent("move",T.originalEvent);for(const Y in n){const{originalEvent:$}=n[Y];this._fireEvent(Y,$)}const R={};let L;for(const Y in this._eventsInProgress){const{handlerName:$,originalEvent:J}=this._eventsInProgress[Y];this._handlersById[$].isActive()||(delete this._eventsInProgress[Y],L=l[$]||J,R[`${Y}end`]=L)}for(const Y in R)this._fireEvent(Y,R[Y]);const F=So(this._eventsInProgress),B=(b||T)&&!F;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Y=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Y.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Y)}if(m&&B){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;!Y||!Y.essential&&H.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:L})),$(this._map.getBearing())&&this._map.resetNorth()):($(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:L})),this._updatingCamera=!1}}_fireEvent(n,l){this._map.fire(new c.l(n,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new jt("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Of extends c.E{constructor(n,l,m){super(),this._renderFrameCallback=()=>{const b=Math.min((ae()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=m.bearingSnap,this.cameraHelper=l,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(n,l){n.apply(this.transform),this.transform=n,this.cameraHelper=l}getCenter(){return new c.V(this.transform.center.lng,this.transform.center.lat)}setCenter(n,l){return this.jumpTo({center:n},l)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,l){return this.jumpTo({elevation:n},l),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,l,m){return n=c.P.convert(n).mult(-1),this.panTo(this.transform.center,c.e({offset:n},l),m)}panTo(n,l,m){return this.easeTo(c.e({center:n},l),m)}getZoom(){return this.transform.zoom}setZoom(n,l){return this.jumpTo({zoom:n},l),this}zoomTo(n,l,m){return this.easeTo(c.e({zoom:n},l),m)}zoomIn(n,l){return this.zoomTo(this.getZoom()+1,n,l),this}zoomOut(n,l){return this.zoomTo(this.getZoom()-1,n,l),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,l){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new c.l("movestart",l)).fire(new c.l("move",l)).fire(new c.l("moveend",l))),this}getBearing(){return this.transform.bearing}setBearing(n,l){return this.jumpTo({bearing:n},l),this}getPadding(){return this.transform.padding}setPadding(n,l){return this.jumpTo({padding:n},l),this}rotateTo(n,l,m){return this.easeTo(c.e({bearing:n},l),m)}resetNorth(n,l){return this.rotateTo(0,c.e({duration:1e3},n),l),this}resetNorthPitch(n,l){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},n),l),this}snapToNorth(n,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,l):this}getPitch(){return this.transform.pitch}setPitch(n,l){return this.jumpTo({pitch:n},l),this}getRoll(){return this.transform.roll}setRoll(n,l){return this.jumpTo({roll:n},l),this}cameraForBounds(n,l){n=Wn.convert(n).adjustAntiMeridian();const m=l&&l.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),m,l)}_cameraForBoxAndBearing(n,l,m,b){const T={top:0,bottom:0,right:0,left:0};if(typeof(b=c.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){const F=b.padding;b.padding={top:F,bottom:F,right:F,left:F}}const M=c.e(T,b.padding);b.padding=M;const R=this.transform,L=new Wn(n,l);return this.cameraHelper.cameraForBoxAndBearing(b,M,L,m,R)}fitBounds(n,l,m){return this._fitInternal(this.cameraForBounds(n,l),l,m)}fitScreenCoordinates(n,l,m,b,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(n)),this.transform.screenPointToLocation(c.P.convert(l)),m,b),b,T)}_fitInternal(n,l,m){return n?(delete(l=c.e(n,l)).padding,l.linear?this.easeTo(l,m):this.flyTo(l,m)):this}jumpTo(n,l){this.stop();const m=this._getTransformForUpdate();let b=!1,T=!1,M=!1;const R=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,n);const L=m.zoom!==R;return"elevation"in n&&m.elevation!==+n.elevation&&m.setElevation(+n.elevation),"bearing"in n&&m.bearing!==+n.bearing&&(b=!0,m.setBearing(+n.bearing)),"pitch"in n&&m.pitch!==+n.pitch&&(T=!0,m.setPitch(+n.pitch)),"roll"in n&&m.roll!==+n.roll&&(M=!0,m.setRoll(+n.roll)),n.padding==null||m.isPaddingEqual(n.padding)||m.setPadding(n.padding),this._applyUpdatedTransform(m),this.fire(new c.l("movestart",l)).fire(new c.l("move",l)),L&&this.fire(new c.l("zoomstart",l)).fire(new c.l("zoom",l)).fire(new c.l("zoomend",l)),b&&this.fire(new c.l("rotatestart",l)).fire(new c.l("rotate",l)).fire(new c.l("rotateend",l)),T&&this.fire(new c.l("pitchstart",l)).fire(new c.l("pitch",l)).fire(new c.l("pitchend",l)),M&&this.fire(new c.l("rollstart",l)).fire(new c.l("roll",l)).fire(new c.l("rollend",l)),this.fire(new c.l("moveend",l))}calculateCameraOptionsFromTo(n,l,m,b=0){const T=c.aa.fromLngLat(n,l),M=c.aa.fromLngLat(m,b),R=M.x-T.x,L=M.y-T.y,F=M.z-T.z,B=Math.hypot(R,L,F);if(B===0)throw new Error("Can't calculate camera options with same From and To");const Y=Math.hypot(R,L),$=c.at(this.transform.cameraToCenterDistance/B/this.transform.tileSize),J=180*Math.atan2(R,-L)/Math.PI;let oe=180*Math.acos(Y/B)/Math.PI;return oe=F<0?90-oe:90+oe,{center:M.toLngLat(),elevation:b,zoom:$,pitch:oe,bearing:J}}calculateCameraOptionsFromCameraLngLatAltRotation(n,l,m,b,T){const M=this.transform.calculateCenterFromCameraLngLatAlt(n,l,m,b);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:m,pitch:b,roll:T}}easeTo(n,l){this._stop(!1,n.easeId),((n=c.e({offset:[0,0],duration:500,easing:c.cx},n)).animate===!1||!n.essential&&H.prefersReducedMotion)&&(n.duration=0);const m=this._getTransformForUpdate(),b=this.getBearing(),T=m.pitch,M=m.roll,R="bearing"in n?this._normalizeBearing(n.bearing,b):b,L="pitch"in n?+n.pitch:T,F="roll"in n?this._normalizeBearing(n.roll,M):M,B="padding"in n?n.padding:m.padding,Y=c.P.convert(n.offset);let $,J;n.around&&($=c.V.convert(n.around),J=m.locationToScreenPoint($));const oe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},de=this.cameraHelper.handleEaseTo(m,{bearing:R,pitch:L,roll:F,padding:B,around:$,aroundPoint:J,offsetAsPoint:Y,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||b!==R,this._pitching=this._pitching||L!==T,this._rolling=this._rolling||F!==M,this._padding=!m.isPaddingEqual(B),this._zooming=this._zooming||de.isZooming,this._easeId=n.easeId,this._prepareEase(l,n.noMoveStart,oe),this.terrain&&this._prepareElevation(de.elevationCenter),this._ease(pe=>{de.easeFunc(pe),this.terrain&&!n.freezeElevation&&this._updateElevation(pe),this._applyUpdatedTransform(m),this._fireMoveEvents(l)},pe=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(l,pe)},n),this}_prepareEase(n,l,m={}){this._moving=!0,l||m.moving||this.fire(new c.l("movestart",n)),this._zooming&&!m.zooming&&this.fire(new c.l("zoomstart",n)),this._rotating&&!m.rotating&&this.fire(new c.l("rotatestart",n)),this._pitching&&!m.pitching&&this.fire(new c.l("pitchstart",n)),this._rolling&&!m.rolling&&this.fire(new c.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&l!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(m-(l-(m*n+this._elevationStart))/(1-n)),this._elevationTarget=l}this.transform.setElevation(c.G.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const l=n.getCameraLngLat(),m=n.getCameraAltitude(),b=this.terrain?this.terrain.getElevationForLngLatZoom(l,n.zoom):0;if(m<b){const T=this.calculateCameraOptionsFromTo(l,b,n.center,n.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(n){const l=[];if(l.push(b=>this._elevateCameraIfInsideTerrain(b)),this.transformCameraUpdate&&l.push(b=>this.transformCameraUpdate(b)),!l.length)return;const m=n.clone();for(const b of l){const T=m.clone(),{center:M,zoom:R,roll:L,pitch:F,bearing:B,elevation:Y}=b(T);M&&T.setCenter(M),Y!==void 0&&T.setElevation(Y),R!==void 0&&T.setZoom(R),L!==void 0&&T.setRoll(L),F!==void 0&&T.setPitch(F),B!==void 0&&T.setBearing(B),m.apply(T)}this.transform.apply(m)}_fireMoveEvents(n){this.fire(new c.l("move",n)),this._zooming&&this.fire(new c.l("zoom",n)),this._rotating&&this.fire(new c.l("rotate",n)),this._pitching&&this.fire(new c.l("pitch",n)),this._rolling&&this.fire(new c.l("roll",n))}_afterEase(n,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const m=this._zooming,b=this._rotating,T=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new c.l("zoomend",n)),b&&this.fire(new c.l("rotateend",n)),T&&this.fire(new c.l("pitchend",n)),M&&this.fire(new c.l("rollend",n)),this.fire(new c.l("moveend",n))}flyTo(n,l){if(!n.essential&&H.prefersReducedMotion){const qe=c.U(n,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(qe,l)}this.stop(),n=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.cx},n);const m=this._getTransformForUpdate(),b=m.bearing,T=m.pitch,M=m.roll,R=m.padding,L="bearing"in n?this._normalizeBearing(n.bearing,b):b,F="pitch"in n?+n.pitch:T,B="roll"in n?this._normalizeBearing(n.roll,M):M,Y="padding"in n?n.padding:m.padding,$=c.P.convert(n.offset);let J=m.centerPoint.add($);const oe=m.screenPointToLocation(J),de=this.cameraHelper.handleFlyTo(m,{bearing:L,pitch:F,roll:B,padding:Y,locationAtOffset:oe,offsetAsPoint:$,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let pe=n.curve;const ye=Math.max(m.width,m.height),be=ye/de.scaleOfZoom,Me=de.pixelPathLength;typeof de.scaleOfMinZoom=="number"&&(pe=Math.sqrt(ye/de.scaleOfMinZoom/Me*2));const _e=pe*pe;function Ce(qe){const xt=(be*be-ye*ye+(qe?-1:1)*_e*_e*Me*Me)/(2*(qe?be:ye)*_e*Me);return Math.log(Math.sqrt(xt*xt+1)-xt)}function Re(qe){return(Math.exp(qe)-Math.exp(-qe))/2}function we(qe){return(Math.exp(qe)+Math.exp(-qe))/2}const Be=Ce(!1);let We=function(qe){return we(Be)/we(Be+pe*qe)},$e=function(qe){return ye*((we(Be)*(Re(xt=Be+pe*qe)/we(xt))-Re(Be))/_e)/Me;var xt},Ye=(Ce(!0)-Be)/pe;if(Math.abs(Me)<2e-6||!isFinite(Ye)){if(Math.abs(ye-be)<1e-6)return this.easeTo(n,l);const qe=be<ye?-1:1;Ye=Math.abs(Math.log(be/ye))/pe,$e=()=>0,We=xt=>Math.exp(qe*pe*xt)}return n.duration="duration"in n?+n.duration:1e3*Ye/("screenSpeed"in n?+n.screenSpeed/pe:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=b!==L,this._pitching=F!==T,this._rolling=B!==M,this._padding=!m.isPaddingEqual(Y),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(de.targetCenter),this._ease(qe=>{const xt=qe*Ye,wt=1/We(xt),ut=$e(xt);this._rotating&&m.setBearing(c.G.number(b,L,qe)),this._pitching&&m.setPitch(c.G.number(T,F,qe)),this._rolling&&m.setRoll(c.G.number(M,B,qe)),this._padding&&(m.interpolatePadding(R,Y,qe),J=m.centerPoint.add($)),de.easeFunc(qe,wt,ut,J),this.terrain&&!n.freezeElevation&&this._updateElevation(qe),this._applyUpdatedTransform(m),this._fireMoveEvents(l)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,l){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,l)}return n||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(n,l,m){m.animate===!1||m.duration===0?(n(1),l()):(this._easeStart=ae(),this._easeOptions=m,this._onEaseFrame=n,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,l){n=c.W(n,-180,180);const m=Math.abs(n-l);return Math.abs(n-360-l)<m&&(n-=360),Math.abs(n+360-l)<m&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(c.V.convert(n),this.transform.tileZoom):null}}const ta={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ti{constructor(n=ta){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=q.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=q.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=q.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){q.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,l){const m=this._map._getUIString(`AttributionControl.${l}`);n.title=m,n.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(b=>typeof b!="string"?"":b)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const l=this._map.style.tileManagers;for(const b in l){const T=l[b];if(T.used||T.usedForTerrain){const M=T.getSource();M.attribution&&n.indexOf(M.attribution)<0&&n.push(M.attribution)}}n=n.filter(b=>String(b).trim()),n.sort((b,T)=>b.length-T.length),n=n.filter((b,T)=>{for(let M=T+1;M<n.length;M++)if(n[M].indexOf(b)>=0)return!1;return!0});const m=n.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,n.length?(this._innerContainer.innerHTML=q.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Cr{constructor(n={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const m=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=q.create("div","maplibregl-ctrl");const l=q.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){q.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Lf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const l=++this._id;return this._queue.push({callback:n,id:l,cancelled:!1}),l}remove(n){const l=this._currentlyRunning,m=l?this._queue.concat(l):this._queue;for(const b of m)if(b.id===n)return void(b.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const m of l)if(!m.cancelled&&(m.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Rg=c.aT([{name:"a_pos3d",type:"Int16",components:3}]);class rc extends c.E{constructor(n){super(),this._lastTilesetChange=ae(),this.tileManager=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(n,l){this.tileManager.update(n,l),this._renderableTilesKeys=[];const m={};for(const b of on(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l,calculateTileZoom:this.tileManager._source.calculateTileZoom}))m[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.terrainRttPosMatrix32f=new Float64Array(16),c.c6(b.terrainRttPosMatrix32f,0,c.a4,c.a4,0,0,1),this._tiles[b.key]=new K(b,this.tileSize),this._lastTilesetChange=ae());for(const b in this._tiles)m[b]||delete this._tiles[b]}freeRtt(n){for(const l in this._tiles){const m=this._tiles[l];(!n||m.tileID.equals(n)||m.tileID.isChildOf(n)||n.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,l){return l?this._getTerrainCoordsForTileRanges(n,l):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const l={};for(const m of this._renderableTilesKeys){const b=this._tiles[m].tileID,T=n.clone(),M=c.bj();if(b.canonical.equals(n.canonical))c.c6(M,0,c.a4,c.a4,0,0,1);else if(b.canonical.isChildOf(n.canonical)){const R=b.canonical.z-n.canonical.z,L=b.canonical.x-(b.canonical.x>>R<<R),F=b.canonical.y-(b.canonical.y>>R<<R),B=c.a4>>R;c.c6(M,0,B,B,0,0,1),c.O(M,M,[-L*B,-F*B,0])}else{if(!n.canonical.isChildOf(b.canonical))continue;{const R=n.canonical.z-b.canonical.z,L=n.canonical.x-(n.canonical.x>>R<<R),F=n.canonical.y-(n.canonical.y>>R<<R),B=c.a4>>R;c.c6(M,0,c.a4,c.a4,0,0,1),c.O(M,M,[L*B,F*B,0]),c.Q(M,M,[1/2**R,1/2**R,0])}}T.terrainRttPosMatrix32f=new Float32Array(M),l[m]=T}return l}_getTerrainCoordsForTileRanges(n,l){const m={};for(const b of this._renderableTilesKeys){const T=this._tiles[b].tileID;if(!this._isWithinTileRanges(T,l))continue;const M=n.clone(),R=c.bj();if(T.canonical.z===n.canonical.z){const L=n.canonical.x-T.canonical.x,F=n.canonical.y-T.canonical.y;c.c6(R,0,c.a4,c.a4,0,0,1),c.O(R,R,[L*c.a4,F*c.a4,0])}else if(T.canonical.z>n.canonical.z){const L=T.canonical.z-n.canonical.z,F=T.canonical.x-(T.canonical.x>>L<<L),B=T.canonical.y-(T.canonical.y>>L<<L),Y=n.canonical.x-(T.canonical.x>>L),$=n.canonical.y-(T.canonical.y>>L),J=c.a4>>L;c.c6(R,0,J,J,0,0,1),c.O(R,R,[-F*J+Y*c.a4,-B*J+$*c.a4,0])}else{const L=n.canonical.z-T.canonical.z,F=n.canonical.x-(n.canonical.x>>L<<L),B=n.canonical.y-(n.canonical.y>>L<<L),Y=(n.canonical.x>>L)-T.canonical.x,$=(n.canonical.y>>L)-T.canonical.y,J=c.a4<<L;c.c6(R,0,J,J,0,0,1),c.O(R,R,[F*c.a4+Y*J,B*c.a4+$*J,0])}M.terrainRttPosMatrix32f=new Float32Array(R),m[b]=M}return m}getSourceTile(n,l){const m=this.tileManager._source;let b=n.overscaledZ-this.deltaZoom;if(b>m.maxzoom&&(b=m.maxzoom),b<m.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(b).key);let T=this.tileManager.getTileByID(this._sourceTileCache[n.key]);if((!T||!T.dem)&&l)for(;b>=m.minzoom&&(!T||!T.dem);)T=this.tileManager.getTileByID(n.scaledTo(b--).key);return T}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,l){return l[n.canonical.z]&&n.canonical.x>=l[n.canonical.z].minTileX&&n.canonical.x<=l[n.canonical.z].maxTileX&&n.canonical.y>=l[n.canonical.z].minTileY&&n.canonical.y<=l[n.canonical.z].maxTileY}}class no{constructor(n,l,m){this._meshCache={},this.painter=n,this.tileManager=new rc(l),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,l,m,b=c.a4){var T;if(!(l>=0&&l<b&&m>=0&&m<b))return 0;const M=this.getTerrainData(n),R=(T=M.tile)===null||T===void 0?void 0:T.dem;if(!R)return 0;const L=c.cB([],[l/b*c.a4,m/b*c.a4],M.u_terrain_matrix),F=[L[0]*R.dim,L[1]*R.dim],B=Math.floor(F[0]),Y=Math.floor(F[1]),$=F[0]-B,J=F[1]-Y;return R.get(B,Y)*(1-$)*(1-J)+R.get(B+1,Y)*$*(1-J)+R.get(B,Y+1)*(1-$)*J+R.get(B+1,Y+1)*$*J}getElevationForLngLatZoom(n,l){if(!c.cC(l,n.wrap()))return 0;const{tileID:m,mercatorX:b,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(n,l);return this.getElevation(m,b%c.a4,T%c.a4,c.a4)}getElevation(n,l,m,b=c.a4){return this.getDEMElevation(n,l,m,b)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const b=this.painter.context,T=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(b,T,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(b,new c.R({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ar([])}const l=this.tileManager.getSourceTile(n,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const b=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new c.T(b,l.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),l.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const m=l&&l+l.tileID.key+n.key;if(m&&!this._demMatrixCache[m]){const b=this.tileManager.getSource().maxzoom;let T=n.canonical.z-l.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=b?T=n.canonical.z-b:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=n.canonical.x-(n.canonical.x>>T<<T),R=n.canonical.y-(n.canonical.y>>T<<T),L=c.cD(new Float64Array(16),[1/(c.a4<<T),1/(c.a4<<T),0]);c.O(L,L,[M*c.a4,R*c.a4,0]),this._demMatrixCache[n.key]={matrix:L,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(n){const l=this.painter,m=l.width/devicePixelRatio,b=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(l.context,{width:m,height:b,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(l.context,{width:m,height:b,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(m,b,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,m,b))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,M=0;T<this._coordsTextureSize;T++)for(let R=0;R<this._coordsTextureSize;R++,M+=4)l[M+0]=255&R,l[M+1]=255&T,l[M+2]=R>>8<<4|T>>8,l[M+3]=0;const m=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),b=new c.T(n,m,n.gl.RGBA,{premultiply:!1});return b.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),m=this.painter.context,b=m.gl,T=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),R=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(T,R-M-1,1,1,b.RGBA,b.UNSIGNED_BYTE,l),m.bindFramebuffer.set(null);const L=l[0]+(l[2]>>4<<8),F=l[1]+((15&l[2])<<8),B=this.coordsIndex[255-l[3]],Y=B&&this.tileManager.getTileByID(B);if(!Y)return null;const $=this._coordsTextureSize,J=(1<<Y.tileID.canonical.z)*$;return new c.aa((Y.tileID.canonical.x*$+L)/J+Y.tileID.wrap,(Y.tileID.canonical.y*$+F)/J,this.getElevation(Y.tileID,L,F,$))}depthAtPoint(n){const l=new Uint8Array(4),m=this.painter.context,b=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),b.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,l),m.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(n){var l;const m=((l=this.painter.style.projection)===null||l===void 0?void 0:l.transitionState)>0,b=m&&n.canonical.y===0,T=m&&n.canonical.y===(1<<n.canonical.z)-1,M=`m_${b?"n":""}_${T?"s":""}`;if(this._meshCache[M])return this._meshCache[M];const R=this.painter.context,L=new c.cE,F=new c.aX,B=this.meshSize,Y=c.a4/B,$=B*B;for(let we=0;we<=B;we++)for(let Be=0;Be<=B;Be++)L.emplaceBack(Be*Y,we*Y,0);for(let we=0;we<$;we+=B+1)for(let Be=0;Be<B;Be++)F.emplaceBack(Be+we,B+Be+we+1,B+Be+we+2),F.emplaceBack(Be+we,B+Be+we+2,Be+we+1);const J=L.length,oe=J+(B+1),de=(B+1)*B,pe=b?c.bq:0,ye=b?0:1,be=T?c.br:c.a4,Me=T?0:1;for(let we=0;we<=B;we++)L.emplaceBack(we*Y,pe,ye);for(let we=0;we<=B;we++)L.emplaceBack(we*Y,be,Me);for(let we=0;we<B;we++)F.emplaceBack(de+we,oe+we,oe+we+1),F.emplaceBack(de+we,oe+we+1,de+we+1),F.emplaceBack(0+we,J+we+1,J+we),F.emplaceBack(0+we,0+we+1,J+we+1);const _e=L.length,Ce=_e+2*(B+1);for(const we of[0,1])for(let Be=0;Be<=B;Be++)for(const We of[0,1])L.emplaceBack(we*c.a4,Be*Y,We);for(let we=0;we<2*B;we+=2)F.emplaceBack(_e+we,_e+we+1,_e+we+3),F.emplaceBack(_e+we,_e+we+3,_e+we+2),F.emplaceBack(Ce+we,Ce+we+3,Ce+we+1),F.emplaceBack(Ce+we,Ce+we+2,Ce+we+3);const Re=new Ts(R.createVertexBuffer(L,Rg.members),R.createIndexBuffer(F),c.aW.simpleSegment(0,0,L.length,F.length));return this._meshCache[M]=Re,Re}getMeshFrameDelta(n){return 2*Math.PI*c.bD/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,l){var m;const{tileID:b}=this._getOverscaledTileIDFromLngLatZoom(n,l);return(m=this.getMinMaxElevation(b).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(n){const l=this.getTerrainData(n).tile,m={minElevation:null,maxElevation:null};return l&&l.dem&&(m.minElevation=l.dem.min*this.exaggeration,m.maxElevation=l.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(n,l){const m=c.aa.fromLngLat(n.wrap()),b=(1<<l)*c.a4,T=m.x*b,M=m.y*b,R=Math.floor(T/c.a4),L=Math.floor(M/c.a4);return{tileID:new c.a1(l,0,l,R,L),mercatorX:T,mercatorY:M}}}class Bi{constructor(n,l,m){this._context=n,this._size=l,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(m.texture),{id:n,fbo:l,texture:m,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>n.id!==l),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const Kn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class ri{constructor(n,l){this.painter=n,this.terrain=l,this.pool=new Bi(n.context,30,l.tileManager.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=n._order.filter(m=>!n._layers[m].isHidden(l)),this._coordsAscending={};for(const m in n.tileManagers){this._coordsAscending[m]={};const b=n.tileManagers[m].getVisibleCoordinates(),T=n.tileManagers[m].getSource(),M=T instanceof Sr?T.terrainTileRanges:null;for(const R of b){const L=this.terrain.tileManager.getTerrainCoords(R,M);for(const F in L)this._coordsAscending[m][F]||(this._coordsAscending[m][F]=[]),this._coordsAscending[m][F].push(L[F])}}this._coordsAscendingStr={};for(const m of n._order){const b=n._layers[m],T=b.source;if(Kn[b.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(const M in this._coordsAscending[T])this._coordsAscendingStr[T][M]=this._coordsAscending[T][M].map(R=>R.key).sort().join()}}for(const m of this._renderableTiles)for(const b in this._coordsAscendingStr){const T=this._coordsAscendingStr[b][m.tileID.key];T&&T!==m.rttCoords[b]&&(m.rtt=[])}}renderLayer(n,l){if(n.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},l),{isRenderingToTexture:!0}),b=n.type,T=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(Kn[b]&&(this._prevType&&Kn[this._prevType]||this._stacks.push([]),this._prevType=b,this._stacks[this._stacks.length-1].push(n.id),!M))return!0;if(Kn[this._prevType]||Kn[b]&&M){this._prevType=b;const R=this._stacks.length-1,L=this._stacks[R]||[];for(const F of this._renderableTiles){if(this.pool.isFull()&&(Ls(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(F),F.rtt[R]){const Y=this.pool.getObjectForId(F.rtt[R].id);if(Y.stamp===F.rtt[R].stamp){this.pool.useObject(Y);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),F.rtt[R]={id:B.id,stamp:B.stamp},T.context.bindFramebuffer.set(B.fbo.framebuffer),T.context.clear({color:c.bo.transparent,stencil:0}),T.currentStencilSource=void 0;for(let Y=0;Y<L.length;Y++){const $=T.style._layers[L[Y]],J=$.source?this._coordsAscending[$.source][F.tileID.key]:[F.tileID];T.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),T._renderTileClippingMasks($,J,!0),T.renderLayer(T,T.style.tileManagers[$.source],$,J,m),$.source&&(F.rttCoords[$.source]=this._coordsAscendingStr[$.source][F.tileID.key])}}return Ls(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),Kn[b]}return!1}}const yn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Jn=A,Gi={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ta,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},$u={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ac{constructor(n,l,m=!1){this.mousedown=T=>{this.startMove(T,q.mousePos(this.element,T)),q.addEventListener(window,"mousemove",this.mousemove),q.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,q.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=q.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),q.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),q.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=q.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=l;const b=new Xc;this._rotatePitchHandler=new $o({clickTolerance:3,move:(T,M)=>{const R=l.getBoundingClientRect(),L=new c.P((R.bottom-R.top)/2,(R.right-R.left)/2);return{bearingDelta:c.cw(new c.P(T.x,M.y),M,L),pitchDelta:m?-.5*(M.y-T.y):void 0}},moveStateManager:b,enable:!0,assignEvents:()=>{}}),this.map=n,q.addEventListener(l,"mousedown",this.mousedown),q.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),q.addEventListener(l,"touchcancel",this.reset)}startMove(n,l){this._rotatePitchHandler.dragStart(n,l),q.disableDrag()}move(n,l){const m=this.map,{bearingDelta:b,pitchDelta:T}=this._rotatePitchHandler.dragMove(n,l)||{};b&&m.setBearing(m.getBearing()+b),T&&m.setPitch(m.getPitch()+T)}off(){const n=this.element;q.removeEventListener(n,"mousedown",this.mousedown),q.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),q.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),q.removeEventListener(window,"touchend",this.touchend),q.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){q.enableDrag(),q.removeEventListener(window,"mousemove",this.mousemove),q.removeEventListener(window,"mouseup",this.mouseup),q.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),q.removeEventListener(window,"touchend",this.touchend)}}let Da;function xl(w,n,l,m=!1){if(m||!l.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const b=new c.V(w.lng,w.lat);if(w=new c.V(w.lng,w.lat),n){const T=new c.V(w.lng-360,w.lat),M=new c.V(w.lng+360,w.lat),R=l.locationToScreenPoint(w).distSqr(n);l.locationToScreenPoint(T).distSqr(n)<R?w=T:l.locationToScreenPoint(M).distSqr(n)<R&&(w=M)}for(;Math.abs(w.lng-l.center.lng)>180;){const T=l.locationToScreenPoint(w);if(T.x>=0&&T.y>=0&&T.x<=l.width&&T.y<=l.height)break;w.lng>l.center.lng?w.lng-=360:w.lng+=360}return w.lng!==b.lng&&l.isPointOnMapSurface(l.locationToScreenPoint(w))?w:b}const wl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Tl(w,n,l){const m=w.classList;for(const b in wl)m.remove(`maplibregl-${l}-anchor-${b}`);m.add(`maplibregl-${l}-anchor-${n}`)}class rd extends c.E{constructor(n){if(super(),this._onKeyPress=l=>{const m=l.code,b=l.charCode||l.keyCode;m!=="Space"&&m!=="Enter"&&b!==32&&b!==13||this.togglePopup()},this._onMapClick=l=>{const m=l.originalEvent.target,b=this._element;this._popup&&(m===b||b.contains(m))&&this.togglePopup()},this._update=l=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();(l?.type==="terrain"||l?.type==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=xl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),q.setTransform(this._element,`${wl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${b}`),H.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n?.opacity,n?.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=c.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=q.create("div");const l=q.createNS("http://www.w3.org/2000/svg","svg"),m=41,b=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${m}px`),l.setAttributeNS(null,"width",`${b}px`),l.setAttributeNS(null,"viewBox",`0 0 ${b} ${m}`);const T=q.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const M=q.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const R=q.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"transform","translate(3.0, 29.0)"),R.setAttributeNS(null,"fill","#000000");const L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of L){const be=q.createNS("http://www.w3.org/2000/svg","ellipse");be.setAttributeNS(null,"opacity","0.04"),be.setAttributeNS(null,"cx","10.5"),be.setAttributeNS(null,"cy","5.80029008"),be.setAttributeNS(null,"rx",ye.rx),be.setAttributeNS(null,"ry",ye.ry),R.appendChild(be)}const F=q.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill",this._color);const B=q.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),F.appendChild(B);const Y=q.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");const $=q.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild($);const J=q.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");const oe=q.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const de=q.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#000000"),de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962");const pe=q.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),oe.appendChild(de),oe.appendChild(pe),M.appendChild(R),M.appendChild(F),M.appendChild(Y),M.appendChild(J),M.appendChild(oe),l.appendChild(M),l.setAttributeNS(null,"height",m*this._scale+"px"),l.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(l),this._offset=c.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Tl(this._element,this._anchor,"marker"),n&&n.className)for(const l of n.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),q.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.V.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const b=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var l,m;const b=(l=this._map)===null||l===void 0?void 0:l.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!b||T){const J=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==J&&(this._element.style.opacity=J))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const M=this._map,R=M.terrain.depthAtPoint(this._pos),L=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,L)-R<.006)return void(this._element.style.opacity=this._opacity);const F=-this._offset.y/M.transform.pixelsPerMeter,B=Math.sin(M.getPitch()*Math.PI/180)*F,Y=M.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),$=M.transform.lngLatToCameraDepth(this._lngLat,L+B)-Y>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&$&&this._popup.remove(),this._element.style.opacity=$?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=c.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,l){return(this._opacity===void 0||n===void 0&&l===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const Zi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let oc=0,Sl=!1;const Nf={maxWidth:100,unit:"metric"};function ad(w,n,l){const m=l&&l.maxWidth||100,b=w._container.clientHeight/2,T=w._container.clientWidth/2,M=w.unproject([T-m/2,b]),R=w.unproject([T+m/2,b]),L=Math.round(w.project(R).x-w.project(M).x),F=Math.min(m,L,w._container.clientWidth),B=M.distanceTo(R);if(l&&l.unit==="imperial"){const Y=3.2808*B;Y>5280?tu(n,F,Y/5280,w._getUIString("ScaleControl.Miles")):tu(n,F,Y,w._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?tu(n,F,B/1852,w._getUIString("ScaleControl.NauticalMiles")):B>=1e3?tu(n,F,B/1e3,w._getUIString("ScaleControl.Kilometers")):tu(n,F,B,w._getUIString("ScaleControl.Meters"))}function tu(w,n,l,m){const b=function(T){const M=Math.pow(10,`${Math.floor(T)}`.length-1);let R=T/M;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(L){const F=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*F)/F}(R),M*R}(l);w.style.width=n*(b/l)+"px",w.innerHTML=`${b}&nbsp;${m}`}const Yu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},od=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function qu(w){if(w){if(typeof w=="number"){const n=Math.round(Math.abs(w)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,w),"top-left":new c.P(n,n),"top-right":new c.P(-n,n),bottom:new c.P(0,-w),"bottom-left":new c.P(n,-n),"bottom-right":new c.P(-n,-n),left:new c.P(w,0),right:new c.P(-w,0)}}if(w instanceof c.P||Array.isArray(w)){const n=c.P.convert(w);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.P.convert(w.center||[0,0]),top:c.P.convert(w.top||[0,0]),"top-left":c.P.convert(w["top-left"]||[0,0]),"top-right":c.P.convert(w["top-right"]||[0,0]),bottom:c.P.convert(w.bottom||[0,0]),"bottom-left":c.P.convert(w["bottom-left"]||[0,0]),"bottom-right":c.P.convert(w["bottom-right"]||[0,0]),left:c.P.convert(w.left||[0,0]),right:c.P.convert(w.right||[0,0])}}return qu(new c.P(0,0))}const Gr=A;_.AJAXError=c.cI,_.Event=c.l,_.Evented=c.E,_.LngLat=c.V,_.MercatorCoordinate=c.aa,_.Point=c.P,_.addProtocol=c.cJ,_.config=c.a,_.removeProtocol=c.cK,_.AttributionControl=Ti,_.BoxZoomHandler=Kp,_.CanvasSource=sa,_.CooperativeGesturesHandler=To,_.DoubleClickZoomHandler=bl,_.DragPanHandler=Kc,_.DragRotateHandler=Jc,_.EdgeInsets=li,_.FullscreenControl=class extends c.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var n;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=l?.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){q.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=q.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);q.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},_.GeoJSONSource=ki,_.GeolocateControl=class extends c.E{constructor(w){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const l=new c.V(n.coords.longitude,n.coords.latitude),m=n.coords.accuracy,b=this._map.getBearing(),T=c.e({bearing:b},this.options.fitBoundsOptions),M=Wn.fromLngLat(l,m);this._map.fitBounds(M,T,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const l=new c.V(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=n.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Sl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=q.create("button","maplibregl-ctrl-geolocate",this._container),q.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=q.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new rd({element:this._dotElement}),this._circleElement=q.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new rd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{const m=l?.[0]instanceof ResizeObserverEntry;l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))})}},this.options=c.e({},Zi,w)}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return c._(this,arguments,void 0,function*(n=!1){if(Da!==void 0&&!n)return Da;if(window.navigator.permissions===void 0)return Da=!!window.navigator.geolocation,Da;try{Da=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Da=!!window.navigator.geolocation}return Da})}().then(n=>this._finishSetupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),q.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,oc=0,Sl=!1}_isOutOfMapMaxBounds(w){const n=this._map.getMaxBounds(),l=w.coords;return n&&(l.longitude<n.getWest()||l.longitude>n.getEast()||l.latitude<n.getSouth()||l.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const n=this._map.project(w),l=this._map.unproject([n.x+100,n.y]),m=w.distanceTo(l)/100,b=2*this._accuracy/m;this._circleElement.style.width=`${b.toFixed(2)}px`,this._circleElement.style.height=`${b.toFixed(2)}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":oc--,Sl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),oc++,oc>1?(w={maximumAge:6e5,timeout:0},Sl=!0):(w=this.options.positionOptions,Sl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},_.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const n=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=q.create("button","maplibregl-ctrl-globe",this._container),q.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){q.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},_.Hash=Ar,_.ImageSource=Sr,_.KeyboardHandler=vl,_.LngLatBounds=Wn,_.LogoControl=Cr,_.Map=class extends Of{constructor(w){var n,l;c.cF.mark(c.cG.create);const m=Object.assign(Object.assign(Object.assign({},Gi),w),{canvasContextAttributes:Object.assign(Object.assign({},Gi.canvasContextAttributes),w.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const b=new mi,T=new Xr;if(m.minZoom!==void 0&&b.setMinZoom(m.minZoom),m.maxZoom!==void 0&&b.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&b.setMinPitch(m.minPitch),m.maxPitch!==void 0&&b.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&b.setRenderWorldCopies(m.renderWorldCopies),m.transformConstrain!==null&&b.setConstrainOverride(m.transformConstrain),super(b,T,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Lf,this._controls=[],this._mapId=c.ag(),this._lostContextStyle={style:null,images:null},this._contextLost=R=>{R.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const L of Object.values(this.style._layers))if(L.type==="custom"&&console.warn(`Custom layer with id '${L.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),L._listeners)for(const[F]of Object.entries(L._listeners))console.warn(`Custom layer with id '${L.id}' had event listeners for event '${F}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new c.l("webglcontextlost",{originalEvent:R}))},this._contextRestored=R=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new c.l("webglcontextrestored",{originalEvent:R}))},this._onMapScroll=R=>{if(R.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},yn),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this._zoomLevelsToOverscale=m.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=m.transformCameraUpdate,this.transformConstrain=m.transformConstrain,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,m.reduceMotion!==void 0&&(H.prefersReducedMotion=m.reduceMotion),this._imageQueueHandle=ze.addThrottleControl(()=>this.isMoving()),this._requestManager=new rt(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let R=!1;const L=ml(F=>{this._trackResize&&!this._removed&&(this.resize(F),this.redraw())},50);this._resizeObserver=new ResizeObserver(F=>{R?L(F):R=!0}),this._resizeObserver.observe(this._container)}this.handlers=new eu(this,m),this._hash=m.hash&&new Ar(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,c.e({},m.fitBoundsOptions,{duration:0}))));const M=typeof m.style=="string"||((l=(n=m.style)===null||n===void 0?void 0:n.projection)===null||l===void 0?void 0:l.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Ti(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new Cr,m.logoPosition),this.on("style.load",()=>{if(M||this._resizeTransform(),this.transform.unmodified){const R=c.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(R)}}),this.on("data",R=>{this._update(R.dataType==="style"),this.fire(new c.l(`${R.dataType}data`,R))}),this.on("dataloading",R=>{this.fire(new c.l(`${R.dataType}dataloading`,R))}),this.on("dataabort",R=>{this.fire(new c.l("sourcedataabort",R))})}_getMapId(){return this._mapId}setGlobalStateProperty(w,n){return this.style.setGlobalStateProperty(w,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,n){if(n===void 0&&(n=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=w.onAdd(this);this._controls.push(w);const m=this._controlPositions[n];return n.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(w);return n>-1&&this._controls.splice(n,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return on(this.transform,w)}calculateCameraOptionsFromTo(w,n,l,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,n,l,m)}resize(w,n=!0){const[l,m]=this._containerDimensions(),b=this._getClampedPixelRatio(l,m);if(this._resizeCanvas(l,m,b),this.painter.resize(l,m,b),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const R=this._getClampedPixelRatio(l,m);this._resizeCanvas(l,m,R),this.painter.resize(l,m,R)}this._resizeTransform(n);const T=!this._moving;return T&&(this.stop(),this.fire(new c.l("movestart",w)).fire(new c.l("move",w))),this.fire(new c.l("resize",w)),T&&this.fire(new c.l("moveend",w)),this}_resizeTransform(w=!0){var n;const[l,m]=this._containerDimensions();this.transform.resize(l,m,w),(n=this._requestedCameraState)===null||n===void 0||n.resize(l,m,w)}_getClampedPixelRatio(w,n){const{0:l,1:m}=this._maxCanvasSize,b=this.getPixelRatio(),T=w*b,M=n*b;return Math.min(T>l?l/T:1,M>m?m/M:1)*b}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Wn.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(c.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(c.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,n,l){if(w==="mouseenter"||w==="mouseover"){let m=!1;return{layers:n,listener:l,delegates:{mousemove:T=>{const M=n.filter(L=>this.getLayer(L)),R=M.length!==0?this.queryRenderedFeatures(T.point,{layers:M}):[];R.length?m||(m=!0,l.call(this,new ji(w,this,T.originalEvent,{features:R}))):m=!1},mouseout:()=>{m=!1}}}}if(w==="mouseleave"||w==="mouseout"){let m=!1;return{layers:n,listener:l,delegates:{mousemove:M=>{const R=n.filter(L=>this.getLayer(L));(R.length!==0?this.queryRenderedFeatures(M.point,{layers:R}):[]).length?m=!0:m&&(m=!1,l.call(this,new ji(w,this,M.originalEvent)))},mouseout:M=>{m&&(m=!1,l.call(this,new ji(w,this,M.originalEvent)))}}}}{const m=b=>{const T=n.filter(R=>this.getLayer(R)),M=T.length!==0?this.queryRenderedFeatures(b.point,{layers:T}):[];M.length&&(b.features=M,l.call(this,b),delete b.features)};return{layers:n,listener:l,delegates:{[w]:m}}}}_saveDelegatedListener(w,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(n)}_removeDelegatedListener(w,n,l){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const m=this._delegatedListeners[w];for(let b=0;b<m.length;b++){const T=m[b];if(T.listener===l&&T.layers.length===n.length&&T.layers.every(M=>n.includes(M))){for(const M in T.delegates)this.off(M,T.delegates[M]);return void m.splice(b,1)}}}on(w,n,l){if(l===void 0)return super.on(w,n);const m=typeof n=="string"?[n]:n,b=this._createDelegatedListener(w,m,l);this._saveDelegatedListener(w,b);for(const T in b.delegates)this.on(T,b.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(w,m,l)}}}once(w,n,l){if(l===void 0)return super.once(w,n);const m=typeof n=="string"?[n]:n,b=this._createDelegatedListener(w,m,l);for(const T in b.delegates){const M=b.delegates[T];b.delegates[T]=(...R)=>{this._removeDelegatedListener(w,m,l),M(...R)}}this._saveDelegatedListener(w,b);for(const T in b.delegates)this.once(T,b.delegates[T]);return this}off(w,n,l){return l===void 0?super.off(w,n):(this._removeDelegatedListener(w,typeof n=="string"?[n]:n,l),this)}queryRenderedFeatures(w,n){if(!this.style)return[];let l;const m=w instanceof c.P||Array.isArray(w),b=m?w:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(m?{}:w)||{},b instanceof c.P||typeof b[0]=="number")l=[c.P.convert(b)];else{const T=c.P.convert(b[0]),M=c.P.convert(b[1]);l=[T,new c.P(M.x,T.y),M,new c.P(T.x,M.y),T]}return this.style.queryRenderedFeatures(l,n,this.transform)}querySourceFeatures(w,n){return this.style.querySourceFeatures(w,n)}setStyle(w,n){return(n=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(w,n))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const n=this._locale[w];if(n==null)throw new Error(`Missing UI string '${w}'`);return n}_updateStyle(w,n){var l,m;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,n));const b=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Bh(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,n,b):this.style.loadJSON(w,n,b),this):((m=(l=this.style)===null||l===void 0?void 0:l.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Bh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,n){if(typeof w=="string"){const l=this._requestManager.transformRequest(w,"Style");c.j(l,new AbortController).then(m=>{this._updateDiff(m.data,n)}).catch(m=>{m&&this.fire(new c.k(m))})}else typeof w=="object"&&this._updateDiff(w,n)}_updateDiff(w,n){try{this.style.setState(w,n)&&this._update(!0)}catch(l){c.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(w,n)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(w,n){return this._lazyInitEmptyStyle(),this.style.addSource(w,n),this._update(!0)}isSourceLoaded(w){const n=this.style&&this.style.tileManagers[w];if(n!==void 0)return n.loaded();this.fire(new c.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const n=this.style.tileManagers[w.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&n.reload();for(const l in this.style._layers){const m=this.style._layers[l];m.type==="hillshade"&&m.source===w.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),m.type==="color-relief"&&m.source===w.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new no(this.painter,n,w),this.painter.renderToTexture=new ri(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=l=>{var m;l.dataType==="style"?this.terrain.tileManager.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=l.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:w})),this}getTerrain(){var w,n;return(n=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const n in w){const l=w[n]._tiles;for(const m in l){const b=l[m];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,n,l){if(l){const m=this.getSource(l);if(!m)throw new Error(`There is no source with ID "${l}", cannot set LOD parameters`);m.calculateTileZoom=it(Math.max(1,w),Math.max(1,n))}else for(const m in this.style.tileManagers)this.style.tileManagers[m].getSource().calculateTileZoom=it(Math.max(1,w),Math.max(1,n));return this._update(!0),this}refreshTiles(w,n){const l=this.style.tileManagers[w];if(!l)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);n===void 0?l.reload(!0):l.refreshTiles(n.map(m=>new c.ad(m.z,m.x,m.y)))}addImage(w,n,l={}){const{pixelRatio:m=1,sdf:b=!1,stretchX:T,stretchY:M,content:R,textFitWidth:L,textFitHeight:F}=l;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||c.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:Y,data:$}=n,J=n;return this.style.addImage(w,{data:new c.R({width:B,height:Y},new Uint8Array($)),pixelRatio:m,stretchX:T,stretchY:M,content:R,textFitWidth:L,textFitHeight:F,sdf:b,version:0,userImage:J}),J.onAdd&&J.onAdd(this,w),this}}{const{width:B,height:Y,data:$}=H.getImageData(n);this.style.addImage(w,{data:new c.R({width:B,height:Y},$),pixelRatio:m,stretchX:T,stretchY:M,content:R,textFitWidth:L,textFitHeight:F,sdf:b,version:0})}}updateImage(w,n){const l=this.style.getImage(w);if(!l)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=n instanceof HTMLImageElement||c.b(n)?H.getImageData(n):n,{width:b,height:T,data:M}=m;if(b===void 0||T===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==l.data.width||T!==l.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const R=!(n instanceof HTMLImageElement||c.b(n));return l.data.replace(M,R),this.style.updateImage(w,l),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return ze.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,n){return this._lazyInitEmptyStyle(),this.style.addLayer(w,n),this._update(!0)}moveLayer(w,n){return this.style.moveLayer(w,n),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,n,l){return this.style.setLayerZoomRange(w,n,l),this._update(!0)}setFilter(w,n,l={}){return this.style.setFilter(w,n,l),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,n,l,m={}){return this.style.setPaintProperty(w,n,l,m),this._update(!0)}getPaintProperty(w,n){return this.style.getPaintProperty(w,n)}setLayoutProperty(w,n,l,m={}){return this.style.setLayoutProperty(w,n,l,m),this._update(!0)}getLayoutProperty(w,n){return this.style.getLayoutProperty(w,n)}setGlyphs(w,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,n,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,n,l,m=>{m||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,n,l=>{l||this._update(!0)}),this}setLight(w,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,n){return this.style.setFeatureState(w,n),this._update()}removeFeatureState(w,n){return this.style.removeFeatureState(w,n),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,n=0;return this._container&&(w=this._container.clientWidth||400,n=this._container.clientHeight||300),[w,n]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const n=this._canvasContainer=q.create("div","maplibregl-canvas-container",w);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=q.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),m=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],m);const b=this._controlContainer=q.create("div","maplibregl-control-container",w),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{T[M]=q.create("div",`maplibregl-ctrl-${M} `,b)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,n,l){this._canvas.width=Math.floor(l*w),this._canvas.height=Math.floor(l*n),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{n={requestedAttributes:w},m&&(n.statusMessage=m.statusMessage,n.type=m.type)},{once:!0});let l=null;if(l=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!l){const m="Failed to initialize WebGL";throw n?(n.message=m,new Error(JSON.stringify(n))):new Error(m)}this.painter=new Kh(l,this.transform),he.testSupport(l)}migrateProjection(w,n){super.migrateProjection(w,n),this.painter.transform=w,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var n,l,m,b,T;const M=this._idleTriggered?this._fadeDuration:0,R=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let L=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Y=this.transform.zoom,$=ae();this.style.zoomHistory.update(Y,$);const J=new c.H(Y,{now:$,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),oe=J.crossFadingFactor();oe===1&&oe===this._crossFadingFactor||(L=!0,this._crossFadingFactor=oe),this.style.update(J)}const F=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0!==R;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((b=this.style.projection)===null||b===void 0?void 0:b.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||F)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,F),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cF.mark(c.cG.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||L)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,c.cF.mark(c.cG.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ze.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n?.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),q.remove(this._canvasContainer),q.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cF.clearMetrics(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,H.frame(this._frameRequest,w=>{c.cF.frame(w),this._frameRequest=null;try{this._render(w)}catch(n){if(!c.cH(n)&&!function(l){return l.message===zu}(n))throw n}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Jn}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},_.MapMouseEvent=ji,_.MapTouchEvent=Ps,_.MapWheelEvent=bo,_.Marker=rd,_.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const n=this._map.getZoom(),l=n===this._map.getMaxZoom(),m=n===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,l)=>{const m=this._map._getUIString(`NavigationControl.${l}`);n.title=m,n.setAttribute("aria-label",m)},this.options=c.e({},$u,w),this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),q.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),q.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=q.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ac(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){q.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,n){const l=q.create("button",w,this._container);return l.type="button",l.addEventListener("click",n),l}},_.Popup=class extends c.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&q.remove(this._content),this._container&&(q.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=q.create("div","maplibregl-popup",this._map.getContainer()),this._tip=q.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=xl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const l=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const b=qu(this.options.offset);if(!m){const M=this._container.offsetWidth,R=this._container.offsetHeight;let L;L=l.y+b.bottom.y<R?["top"]:l.y>this._map.transform.height-R?["bottom"]:[],l.x<M/2?L.push("left"):l.x>this._map.transform.width-M/2&&L.push("right"),m=L.length===0?"bottom":L.join("-")}let T=l.add(b[m]);this.options.subpixelPositioning||(T=T.round()),q.setTransform(this._container,`${wl[m]} translate(${T.x}px,${T.y}px)`),Tl(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Yu),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=c.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const n=document.createDocumentFragment(),l=document.createElement("body");let m;for(l.innerHTML=w;m=l.firstChild,m;)n.appendChild(m);return this.setDOMContent(n)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=q.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=q.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(od);w&&w.focus()}},_.RasterDEMTileSource=Wr,_.RasterTileSource=jr,_.ScaleControl=class{constructor(w){this._onMove=()=>{ad(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,ad(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Nf),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){q.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},_.ScrollZoomHandler=wo,_.Style=Bh,_.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=q.create("button","maplibregl-ctrl-terrain",this._container),q.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){q.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},_.TwoFingersTouchPitchHandler=_l,_.TwoFingersTouchRotateHandler=Zu,_.TwoFingersTouchZoomHandler=nd,_.TwoFingersTouchZoomRotateHandler=em,_.VectorTileSource=oa,_.VideoSource=Cn,_.addSourceType=(w,n)=>c._(void 0,void 0,void 0,function*(){if(Au(w))throw new Error(`A source type called "${w}" already exists.`);((l,m)=>{la[l]=m})(w,n)}),_.clearPrewarmedResources=function(){const w=Kt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Tt),Kt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},_.createTileMesh=zh,_.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},_.getRTLTextPluginStatus=function(){return wa().getRTLTextPluginStatus()},_.getVersion=function(){return Gr},_.getWorkerCount=function(){return Nt.workerCount},_.getWorkerUrl=function(){return c.a.WORKER_URL},_.importScriptInWorkers=function(w){return tr().broadcast("IS",w)},_.isTimeFrozen=function(){return ne.isFrozen()},_.now=ae,_.prewarm=function(){Tn().acquire(Tt)},_.restoreNow=function(){ne.restoreNow()},_.setMaxParallelImageRequests=function(w){c.a.MAX_PARALLEL_IMAGE_REQUESTS=w},_.setNow=function(w){ne.setNow(w)},_.setRTLTextPlugin=function(w,n){return wa().setRTLTextPlugin(w,n)},_.setWorkerCount=function(w){Nt.workerCount=w},_.setWorkerUrl=function(w){c.a.WORKER_URL=w}});var g=a;return g})}(Zb)),Zb.exports}var hA=sR();const dA=og(hA),fA=oA({__proto__:null,default:dA},[hA]),lR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAxCAYAAACcXioiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAB/xJREFUeNrUWn9QFPcV/+zeD1ARz6DmxHRqJs1MUiedE7QxaZJ6UWKgpMIUBeSAAzOmtp0gyV9x0uHMpG2aTsexaU2qyIEx5g9rsLGE2hq5YJoAGrnE5iypoxdFSRDDaUlAudvt2709+mXdgzvYw2Zn3ux397779vPe573ve/sFThRFJOpoPv6BrDx7SSaXqHcYE6W4aP161z2LMyKXroaXt7vieb58409GxuSAqPN4JO5wnew8ERnXJJyBTG5R3A8PPezDtbtooAQIxyljSVJI50DlltaT+2s8Pbtw9/1L9/31ox1r5JgSw5L5VeXNCaEhuw9DdymAxzhOpNT5LMGFmP6oHz0dswvoluSlj6csBwIbfNF/DIUdyR7sNZ+MtXRdlJTrx2A34LccwaOWDa6mjh1r5N/N+hiQkByQwEt5PHc58uf32LB5kRuGGUBP4HSBIRmLdH2X7uCTUCgMoXzu95F/63kbaota0HbqHYjDwDkrsfCdDa6EGzD4oA/9lb74lZlRSHFUaM1BzvzPbWh4vAWp0y0IDQHDVwBTKvDpZ6dkFtambtbfgMEHfPii3IfBO+JXxJlQRDWxZA55Xuiy4HeFjXh+XzX2v1ePF8vdeCTNiaEe4GL6Uay653GX7kl8uSzs8YmUTAk8nUrS7kXuctGJvLxyuA9vw1vn69F8sV6e80KxG5v3AS3Bepw701VwaqB2UQYqP77pOcAZCTx5Pu27yH3Y7MQzP9gK33kvnl27FXdabDDNAp77RwXeaK9H6feq5HC60t+vGwv8pMEDxXMeIvAmAv/YVjhesuNXb1bLRjgyqnB/ap68ZP6iswIbD9kx/H46vkXW5th+XHBzDTCgmGK+OH01fmjqs6D0gapwLaDVJj/TidvSFsrXv3c0oujuTTDPBc63BZpmiHMaB05TkWtrk/odl245EJ/rUQwB6+atRO7VfxJoMYCK3Xa4y1rw2lMt8pTS7XacueZFa/ef0cv50ft3vE239/bwH+29TVgiMj2Sa2oZ4LBOChvrKuSm99nw+tpOZM93YmAogPI/2tF92R+eRpqTbgWOmw+g/ZD3sCjgVXp2r6Jli9To6cFCvAaskxLWuhKPSWGwfOFqzJxmwc9W1eDQprNw3FuFjS/ny0b8wdkIg4mq70E00zMNnAENESXHjHUs6JqpMUCUwTsoYXOsl2xwrXBj97vb5Fgv+a0dFwh0xYpNOPhsJw6fPIDqg/nobcW7lCd7Kdn3aGjUhYXYDBBGwGen99rgLm9Be9c7GDQHsL+tHq893SIzsfLF21H1p3y80bsNxzzeo9Tw1fEmTfC4w2rVhYVxDRBDKCEvOuatQPaCALUHT4TbA+E6PUxLwHbPFpmFn7rzEbIG8EmKB35P4AjFfC31Re5x1E+ahTENEINwkOfLqKvMFs9a8FLx6PYg+5tOXLzqR/u/PSh4sBzm2cCFAzhMjDVQv7M7lq+2ybIw1jLqICm75T5kLRXyUPqjKjS0htuDt/zh9uDXJeRgCpDfeKpxOdmPi39DKxn8qnFGTOBZFmqU7+C4v52jMeCgEHCkPYSsrJlO/LLAje4+P9o+8SCD6EiftRA/b6b2gOLfaa+CH16caQ60Usy74wQ/aRa0GCiVEnb+ajwy0AU88+RWOWwkA15Y58a3v2HD1a8CKNixGM+9X4HZ1HleOoI2yhM39T31E8zFCbOgZqBUVMAPX6ViRD2MtKZL8f7KxkY0tjdgcfVsOYklFpIXAKebAkeFEHZOAvykWGAZKJNCZ0EesoQg/TA9XE2feNOO2w029PcH8K8LXpkFqVH7cMCDS014j9rvenMa6nToy0axEGuLYWQKVal0utBIqwjbOHABA3efd/lfqNKm0lp/qtsrF6m+Vpyg1aaOmjQ9wEdYqIm3RxoxgEIn64YfiYXgAN4eTAqgco8dKbwFH35Jnm9FJ9WHV5LnYZfOn9QjLGQsWxYTC/wY1TdSCwwGMuRTgxddVKR6j6CDWubtBH5nInbz4s0FPhp46ctJHpIBUi5IRercHnTQUlmbbEVtArckR6pzLAwYtTasgl8qO3CfhT9dpJbhbC2OUUbUchx2yve5cJLLZwNNSiZlM4H+E8AXbTe+6JZlAH2IycealM265cJoBmj1Cf5HCZ//iYHAH6dRLSX6DWEjATfPCTPEG6eeBZ4Ff/0K4Q3dILwYBr5jFHXT6INlHgmBl/r+m5ULXKL+wFG0fr0uy6r0NwZakbZkL8l0TdneqB6Hqr2umdLN3USsSM3HP3B97QyIhYX/dwbGZSGerdB4t025kS5rYluuI0dhZWVISWbkLF3CM3rHZYDTEF7elwuLtPKbFDErkqQSWnCRHINozZOeNwuC8HyEhab2DhfrIG4cT/Mq4KwB6ntaczlGHxflHaJqLColNHIOSVWKWAgwLBgj3ZqWUvbFBgawUeV59trAzNUykNMIKzEK4BQF9DDJDIWZaco9L0mvMhagUo4onjYxgM1MuBhVwhrLq3SxHk5hGhUx4mFG+hTw15RzRILK3IjI+oxjxD6vwcBYLLCeVzXlozzdx4AIqkBeVwGOiKAyeiT0jFE3EkfHIBsKESVBBrza25zqRYJKgkyYhFQeDqrAChp5oplMXJQw4jW8zGskrjrGoRHfAuMU9hwJJTYvNAGPteJojfkxViOtHFK/VFAZAgawqGJ7XLDxFCcuyjUXR1ESo5wRq3f1rK4TraSJ+2ck5fivAAMAmdk6fQJV/ZUAAAAASUVORK5CYII=",cR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAxCAYAAACcXioiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAB/pJREFUeNrUWnlMFFcY/2b2YLlFvKp44J0YW6vYmoqNq60W22oieF9BShBQa4sH/qGMxkRN1ApRBOQQ1qpNGpOmNcYERVKtCohH69l61pNDFkVgYXem3xtmyHM6y+7CrrQv+fJmd2fe+/2+3/e+d8wygiCAp8rxsoti4xFhYxhP9aH1VMNzY2K4ke+Plj9y+fvSOVeeXxKf0HqNDrB7HwueK9zvl8rl6xRPdcLIIcR+GA/gYjiteHJRNOIFRvIGQ9nq6Ghu1L17KR+bzeA9duyPPfbvn8Xj96QXUidHR3eOAokI+kZZFizHuq2yMy/v+nv378NHsbHgdedOFH41wt0KuEQgHgH/gcATHACXymz09OyIpCQQnjyB3gMGwPPYWK5TBnEcAo6XQsXJIoLvm5oaab19G+OJgcD+/cGruDgK2xhhA7j2VhSIRdBl6PE45zwulzlmgEV9d++ObLp1CwSbDQSeB1tDA4T26wfP3KyCKoEYBHwegce6BlwETzw/cteuLxqvXQPeagUewRMCQl0d6JEAf+NmlAZVGMDz7g+haAQcoxIqvNEIjroLKiqaa2PZuSGbNs2oLC3FqGFAr9eDDk2D12KGQxUGDx4Ed4cN4/oAzHKrAqdLM0UC7SldEDzPsvN6JifPqKisBO2SJaBZvBheBgZCI4IWZG83NoI/jgX+1q2oxyw74q1nIbUSIIHvtXbt9KraWnhnyxZofvUKtD17Qsh338Hrrl2hCUOJDGSiCoOEas018CzmK67TCfgjeIFh5vXfsGF6TX09hGzdCk8LCuC1yQRVHAfVJ05AcGIiNDY1ieAJiZ8OH4bnYWOhIi4uqlMJ+BYVzeMZZn6/9eunV2CqtGGskxI8ZQqAjw94e3nBy5MnQd+rlziQtcHBcD019ZeKoKCjPyOX8vPnyWzLdQoBbwIe12tDN2780owzbY9du4Dp3h1u46RFAPfavBmqm5shaMYMMBcWgk+3bnCF447hM4fHX70aSTWV8tYJGIqK5gssu2DgmjXTn12+DBZMj48QcJ/4ePAZNKiVxPD8fPDCcWBDFf7MzCzEyeswPn5IamYTWei5QwWXCOgRPA7YBYOTkj6vJhkF41w3cybw3t5wd+NGCElIEEn8tXo1NNy5A+YdO+DhgQPFvMVSAEbj93I7R3JyOHep4DQBbQv4haGJidOqLBZoxhj3RrA9kEDvZctgCIYRKf3XroUATJW2rCz422QqttXX57ATJ5pUmnSLCk4RYCXwgxISIipxadATUyXJKHfXrBF/rzh6FK5HRsJjJFF16BAYKirgenb2KWtDQ45OHbzbVHCGwAIEv2jIsmUi+L7btsGj9HRxZjVg5nmYnCyGTtcJE8Dr5k3wLSmBaxkZp21Wa77BaDQ5aLvDKjgisBAzx4JRK1d+9lKrhb7bt4P57Fmox/gOwZjXhYYC8+IFPFi3DgImTwZfnLQupKUV2iyWPJ+JEwuc2bV1VAXWEfiwVasizI8fA//gAdQi+OCpU2Hozp2iCjU4UXXBXVVgeDhY0tKgNDf3V3zG5G80FriAoUMqsG2AX/gBer7m0SPxJoNOB3UImsyuGj8/8aYeq1aB18CBwBcXQ5nJdKYZY76La+A7rIIagUUIftG45cun1uBOCqQlgFajAT9Ml68zMkQSJNuQlFmLy4fygwcvNDc15XabNCm/nWOx3SpoVcAvDE9MnFKHsa3DVNmy9WfE5YAGzR9J1GVmAlRXg/XUKSg/cqQEU2VWH6MxryMnGJT3UxSqOK3AYuL58Pj4KVbM8wZfXzDgmobUeoMBNKgAIaJhWQhAEn5nzsA59LylBXyuG9Zl7VKhVQECXtwX7NtXqLwpPC7uE5COSkgJxLXND2lpv+Hn3MGTJuU4vW9A07lZhVYCuF/6VPmjdH5TSJ8XBQQFwaG0tHN4mYua5NzDMNJKDYlGVMJathVo5fh8En7/rXMqiCRGjxvHOUPCbhrFxRfUY8eNgqBlJAIEfMGePefxNxIydj1/Ge1rtPH4XLlrh2UuZyRVAs1oZgKe7AJbHAm+mDrz9u4tQUVyEVK2vQavoH2Dz15q/6Fx61holwIWtErs3CJdo2k0OAtnp6eXIvhshLVfrSE/DJGBaE/ccKbqigpvECAef4rgm7CmTJOVnl5mD3wAgh6ONoSo5L7jHqdVaCXQgPbw3+CJsXwL8Kw3MgqCfheNHC34e+Bk21kVGE+94JgbE+MOEinkHQNmpE0RYWM4jxyreKooJrMUj50Lebi0joXjZRe5/x0BZ1T4ryvgUAVX3h66+qaRoVYkHXpLOWfpUps0mGHa2DCWatehAoyKsdRSRyutz4jpJfNSmDfZDzlhaveR5/W4lN8iq3DsQglHO4hx4GlWAZwmoPxO7V6Gao+x04eguJbfAco1WZZZUQUzpYJW+k21UbpjDQVYq/A8/VlD3atGkFEJK8EOYD8JdLM0uXtLZpPWiRXSNQ+KxsGOp3UUYD0VLlqF0WSVb15pD/tJncugRQ9TViWBt0i1bFbpXtnE9uwRYBWe1imA6yli8n205xkV4AIF3EYBp0E2KQDLxitIt4ZeWwrQoaGjiGioWqMSLnI7wpv7ojfMSoWJTeFhqwIsrzJOVAcTYyeMWEWM07HeVoyDSnzTCtC1HEr0uFAF3FbGUbtm28hGagoqO+UVRIACLCjCyyFYVyYnxs5nxoVJSbBTg7Pedefs2t6Z1HN/RpLKPwIMAC/3eXOsFYGMAAAAAElFTkSuQmCC";class $m extends Error{response;request;constructor(t,a){const d=`${$m.extractMessage(t)}: ${JSON.stringify({response:t,request:a})}`;super(d),Object.setPrototypeOf(this,$m.prototype),this.response=t,this.request=a,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,$m)}static extractMessage(t){return t.errors?.[0]?.message??`GraphQL Error (Code: ${String(t.status)})`}}const $T=i=>i.toUpperCase(),O1=i=>typeof i=="function"?i():i,pA=(i,t)=>i.map((a,d)=>[a,t[d]]),yy=i=>{let t={};return i instanceof Headers?t=uR(i):Array.isArray(i)?i.forEach(([a,d])=>{a&&d!==void 0&&(t[a]=d)}):i&&(t=i),t},uR=i=>{const t={};return i.forEach((a,d)=>{t[d]=a}),t},hR=i=>{try{const t=i();return dR(t)?t.catch(a=>YT(a)):t}catch(t){return YT(t)}},YT=i=>i instanceof Error?i:new Error(String(i)),dR=i=>typeof i=="object"&&i!==null&&"then"in i&&typeof i.then=="function"&&"catch"in i&&typeof i.catch=="function"&&"finally"in i&&typeof i.finally=="function",a2=i=>{throw new Error(`Unhandled case: ${String(i)}`)},$b=i=>typeof i=="object"&&i!==null&&!Array.isArray(i),fR=(i,t)=>i.documents?i:{documents:i,requestHeaders:t,signal:void 0},pR=(i,t,a)=>i.query?i:{query:i,variables:t,requestHeaders:a,signal:void 0};function Ii(i,t){if(!!!i)throw new Error(t)}function Qd(i){return typeof i=="object"&&i!==null}function Cx(i,t){if(!!!i)throw new Error(t??"Unexpected invariant triggered.")}const mR=/\r\n|[\n\r]/g;function fw(i,t){let a=0,d=1;for(const f of i.body.matchAll(mR)){if(typeof f.index=="number"||Cx(!1),f.index>=t)break;a=f.index+f[0].length,d+=1}return{line:d,column:t+1-a}}function gR(i){return mA(i.source,fw(i.source,i.start))}function mA(i,t){const a=i.locationOffset.column-1,d="".padStart(a)+i.body,f=t.line-1,g=i.locationOffset.line-1,_=t.line+g,c=t.line===1?a:0,A=t.column+c,D=`${i.name}:${_}:${A}
`,O=d.split(/\r\n|[\n\r]/g),z=O[f];if(z.length>120){const V=Math.floor(A/80),H=A%80,ne=[];for(let ae=0;ae<z.length;ae+=80)ne.push(z.slice(ae,ae+80));return D+qT([[`${_} |`,ne[0]],...ne.slice(1,V+1).map(ae=>["|",ae]),["|","^".padStart(H)],["|",ne[V+1]]])}return D+qT([[`${_-1} |`,O[f-1]],[`${_} |`,z],["|","^".padStart(A)],[`${_+1} |`,O[f+1]]])}function qT(i){const t=i.filter(([d,f])=>f!==void 0),a=Math.max(...t.map(([d])=>d.length));return t.map(([d,f])=>d.padStart(a)+(f?" "+f:"")).join(`
`)}function yR(i){const t=i[0];return t==null||"kind"in t||"length"in t?{nodes:t,source:i[1],positions:i[2],path:i[3],originalError:i[4],extensions:i[5]}:t}class Ni extends Error{constructor(t,...a){var d,f,g;const{nodes:_,source:c,positions:A,path:D,originalError:O,extensions:z}=yR(a);super(t),this.name="GraphQLError",this.path=D??void 0,this.originalError=O??void 0,this.nodes=HT(Array.isArray(_)?_:_?[_]:void 0);const V=HT((d=this.nodes)===null||d===void 0?void 0:d.map(ne=>ne.loc).filter(ne=>ne!=null));this.source=c??(V==null||(f=V[0])===null||f===void 0?void 0:f.source),this.positions=A??V?.map(ne=>ne.start),this.locations=A&&c?A.map(ne=>fw(c,ne)):V?.map(ne=>fw(ne.source,ne.start));const H=Qd(O?.extensions)?O?.extensions:void 0;this.extensions=(g=z??H)!==null&&g!==void 0?g:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),O!=null&&O.stack?Object.defineProperty(this,"stack",{value:O.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Ni):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let t=this.message;if(this.nodes)for(const a of this.nodes)a.loc&&(t+=`

`+gR(a.loc));else if(this.source&&this.locations)for(const a of this.locations)t+=`

`+mA(this.source,a);return t}toJSON(){const t={message:this.message};return this.locations!=null&&(t.locations=this.locations),this.path!=null&&(t.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(t.extensions=this.extensions),t}}function HT(i){return i===void 0||i.length===0?void 0:i}function La(i,t,a){return new Ni(`Syntax Error: ${a}`,{source:i,positions:[t]})}class _R{constructor(t,a,d){this.start=t.start,this.end=a.end,this.startToken=t,this.endToken=a,this.source=d}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class gA{constructor(t,a,d,f,g,_){this.kind=t,this.start=a,this.end=d,this.line=f,this.column=g,this.value=_,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const yA={Name:[],Document:["definitions"],OperationDefinition:["description","name","variableDefinitions","directives","selectionSet"],VariableDefinition:["description","variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["description","name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"],TypeCoordinate:["name"],MemberCoordinate:["name","memberName"],ArgumentCoordinate:["name","fieldName","argumentName"],DirectiveCoordinate:["name"],DirectiveArgumentCoordinate:["name","argumentName"]},vR=new Set(Object.keys(yA));function WT(i){const t=i?.kind;return typeof t=="string"&&vR.has(t)}var Fd;(function(i){i.QUERY="query",i.MUTATION="mutation",i.SUBSCRIPTION="subscription"})(Fd||(Fd={}));var oi;(function(i){i.QUERY="QUERY",i.MUTATION="MUTATION",i.SUBSCRIPTION="SUBSCRIPTION",i.FIELD="FIELD",i.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",i.FRAGMENT_SPREAD="FRAGMENT_SPREAD",i.INLINE_FRAGMENT="INLINE_FRAGMENT",i.VARIABLE_DEFINITION="VARIABLE_DEFINITION",i.SCHEMA="SCHEMA",i.SCALAR="SCALAR",i.OBJECT="OBJECT",i.FIELD_DEFINITION="FIELD_DEFINITION",i.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",i.INTERFACE="INTERFACE",i.UNION="UNION",i.ENUM="ENUM",i.ENUM_VALUE="ENUM_VALUE",i.INPUT_OBJECT="INPUT_OBJECT",i.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(oi||(oi={}));var Rt;(function(i){i.NAME="Name",i.DOCUMENT="Document",i.OPERATION_DEFINITION="OperationDefinition",i.VARIABLE_DEFINITION="VariableDefinition",i.SELECTION_SET="SelectionSet",i.FIELD="Field",i.ARGUMENT="Argument",i.FRAGMENT_SPREAD="FragmentSpread",i.INLINE_FRAGMENT="InlineFragment",i.FRAGMENT_DEFINITION="FragmentDefinition",i.VARIABLE="Variable",i.INT="IntValue",i.FLOAT="FloatValue",i.STRING="StringValue",i.BOOLEAN="BooleanValue",i.NULL="NullValue",i.ENUM="EnumValue",i.LIST="ListValue",i.OBJECT="ObjectValue",i.OBJECT_FIELD="ObjectField",i.DIRECTIVE="Directive",i.NAMED_TYPE="NamedType",i.LIST_TYPE="ListType",i.NON_NULL_TYPE="NonNullType",i.SCHEMA_DEFINITION="SchemaDefinition",i.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",i.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",i.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",i.FIELD_DEFINITION="FieldDefinition",i.INPUT_VALUE_DEFINITION="InputValueDefinition",i.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",i.UNION_TYPE_DEFINITION="UnionTypeDefinition",i.ENUM_TYPE_DEFINITION="EnumTypeDefinition",i.ENUM_VALUE_DEFINITION="EnumValueDefinition",i.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",i.DIRECTIVE_DEFINITION="DirectiveDefinition",i.SCHEMA_EXTENSION="SchemaExtension",i.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",i.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",i.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",i.UNION_TYPE_EXTENSION="UnionTypeExtension",i.ENUM_TYPE_EXTENSION="EnumTypeExtension",i.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension",i.TYPE_COORDINATE="TypeCoordinate",i.MEMBER_COORDINATE="MemberCoordinate",i.ARGUMENT_COORDINATE="ArgumentCoordinate",i.DIRECTIVE_COORDINATE="DirectiveCoordinate",i.DIRECTIVE_ARGUMENT_COORDINATE="DirectiveArgumentCoordinate"})(Rt||(Rt={}));function pw(i){return i===9||i===32}function X_(i){return i>=48&&i<=57}function _A(i){return i>=97&&i<=122||i>=65&&i<=90}function o2(i){return _A(i)||i===95}function vA(i){return _A(i)||X_(i)||i===95}function bR(i){var t;let a=Number.MAX_SAFE_INTEGER,d=null,f=-1;for(let _=0;_<i.length;++_){var g;const c=i[_],A=xR(c);A!==c.length&&(d=(g=d)!==null&&g!==void 0?g:_,f=_,_!==0&&A<a&&(a=A))}return i.map((_,c)=>c===0?_:_.slice(a)).slice((t=d)!==null&&t!==void 0?t:0,f+1)}function xR(i){let t=0;for(;t<i.length&&pw(i.charCodeAt(t));)++t;return t}function wR(i,t){const a=i.replace(/"""/g,'\\"""'),d=a.split(/\r\n|[\n\r]/g),f=d.length===1,g=d.length>1&&d.slice(1).every(H=>H.length===0||pw(H.charCodeAt(0))),_=a.endsWith('\\"""'),c=i.endsWith('"')&&!_,A=i.endsWith("\\"),D=c||A,O=!f||i.length>70||D||g||_;let z="";const V=f&&pw(i.charCodeAt(0));return(O&&!V||g)&&(z+=`
`),z+=a,(O||D)&&(z+=`
`),'"""'+z+'"""'}var gt;(function(i){i.SOF="<SOF>",i.EOF="<EOF>",i.BANG="!",i.DOLLAR="$",i.AMP="&",i.PAREN_L="(",i.PAREN_R=")",i.DOT=".",i.SPREAD="...",i.COLON=":",i.EQUALS="=",i.AT="@",i.BRACKET_L="[",i.BRACKET_R="]",i.BRACE_L="{",i.PIPE="|",i.BRACE_R="}",i.NAME="Name",i.INT="Int",i.FLOAT="Float",i.STRING="String",i.BLOCK_STRING="BlockString",i.COMMENT="Comment"})(gt||(gt={}));class TR{constructor(t){const a=new gA(gt.SOF,0,0,0,0);this.source=t,this.lastToken=a,this.token=a,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let t=this.token;if(t.kind!==gt.EOF)do if(t.next)t=t.next;else{const a=ER(this,t.end);t.next=a,a.prev=t,t=a}while(t.kind===gt.COMMENT);return t}}function SR(i){return i===gt.BANG||i===gt.DOLLAR||i===gt.AMP||i===gt.PAREN_L||i===gt.PAREN_R||i===gt.DOT||i===gt.SPREAD||i===gt.COLON||i===gt.EQUALS||i===gt.AT||i===gt.BRACKET_L||i===gt.BRACKET_R||i===gt.BRACE_L||i===gt.PIPE||i===gt.BRACE_R}function Xy(i){return i>=0&&i<=55295||i>=57344&&i<=1114111}function Dx(i,t){return bA(i.charCodeAt(t))&&xA(i.charCodeAt(t+1))}function bA(i){return i>=55296&&i<=56319}function xA(i){return i>=56320&&i<=57343}function Wm(i,t){const a=i.source.body.codePointAt(t);if(a===void 0)return gt.EOF;if(a>=32&&a<=126){const d=String.fromCodePoint(a);return d==='"'?`'"'`:`"${d}"`}return"U+"+a.toString(16).toUpperCase().padStart(4,"0")}function _a(i,t,a,d,f){const g=i.line,_=1+a-i.lineStart;return new gA(t,a,d,g,_,f)}function ER(i,t){const a=i.source.body,d=a.length;let f=t;for(;f<d;){const g=a.charCodeAt(f);switch(g){case 65279:case 9:case 32:case 44:++f;continue;case 10:++f,++i.line,i.lineStart=f;continue;case 13:a.charCodeAt(f+1)===10?f+=2:++f,++i.line,i.lineStart=f;continue;case 35:return AR(i,f);case 33:return _a(i,gt.BANG,f,f+1);case 36:return _a(i,gt.DOLLAR,f,f+1);case 38:return _a(i,gt.AMP,f,f+1);case 40:return _a(i,gt.PAREN_L,f,f+1);case 41:return _a(i,gt.PAREN_R,f,f+1);case 46:if(a.charCodeAt(f+1)===46&&a.charCodeAt(f+2)===46)return _a(i,gt.SPREAD,f,f+3);break;case 58:return _a(i,gt.COLON,f,f+1);case 61:return _a(i,gt.EQUALS,f,f+1);case 64:return _a(i,gt.AT,f,f+1);case 91:return _a(i,gt.BRACKET_L,f,f+1);case 93:return _a(i,gt.BRACKET_R,f,f+1);case 123:return _a(i,gt.BRACE_L,f,f+1);case 124:return _a(i,gt.PIPE,f,f+1);case 125:return _a(i,gt.BRACE_R,f,f+1);case 34:return a.charCodeAt(f+1)===34&&a.charCodeAt(f+2)===34?kR(i,f):CR(i,f)}if(X_(g)||g===45)return MR(i,f,g);if(o2(g))return OR(i,f);throw La(i.source,f,g===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:Xy(g)||Dx(a,f)?`Unexpected character: ${Wm(i,f)}.`:`Invalid character: ${Wm(i,f)}.`)}return _a(i,gt.EOF,d,d)}function AR(i,t){const a=i.source.body,d=a.length;let f=t+1;for(;f<d;){const g=a.charCodeAt(f);if(g===10||g===13)break;if(Xy(g))++f;else if(Dx(a,f))f+=2;else break}return _a(i,gt.COMMENT,t,f,a.slice(t+1,f))}function MR(i,t,a){const d=i.source.body;let f=t,g=a,_=!1;if(g===45&&(g=d.charCodeAt(++f)),g===48){if(g=d.charCodeAt(++f),X_(g))throw La(i.source,f,`Invalid number, unexpected digit after 0: ${Wm(i,f)}.`)}else f=L1(i,f,g),g=d.charCodeAt(f);if(g===46&&(_=!0,g=d.charCodeAt(++f),f=L1(i,f,g),g=d.charCodeAt(f)),(g===69||g===101)&&(_=!0,g=d.charCodeAt(++f),(g===43||g===45)&&(g=d.charCodeAt(++f)),f=L1(i,f,g),g=d.charCodeAt(f)),g===46||o2(g))throw La(i.source,f,`Invalid number, expected digit but got: ${Wm(i,f)}.`);return _a(i,_?gt.FLOAT:gt.INT,t,f,d.slice(t,f))}function L1(i,t,a){if(!X_(a))throw La(i.source,t,`Invalid number, expected digit but got: ${Wm(i,t)}.`);const d=i.source.body;let f=t+1;for(;X_(d.charCodeAt(f));)++f;return f}function CR(i,t){const a=i.source.body,d=a.length;let f=t+1,g=f,_="";for(;f<d;){const c=a.charCodeAt(f);if(c===34)return _+=a.slice(g,f),_a(i,gt.STRING,t,f+1,_);if(c===92){_+=a.slice(g,f);const A=a.charCodeAt(f+1)===117?a.charCodeAt(f+2)===123?DR(i,f):IR(i,f):RR(i,f);_+=A.value,f+=A.size,g=f;continue}if(c===10||c===13)break;if(Xy(c))++f;else if(Dx(a,f))f+=2;else throw La(i.source,f,`Invalid character within String: ${Wm(i,f)}.`)}throw La(i.source,f,"Unterminated string.")}function DR(i,t){const a=i.source.body;let d=0,f=3;for(;f<12;){const g=a.charCodeAt(t+f++);if(g===125){if(f<5||!Xy(d))break;return{value:String.fromCodePoint(d),size:f}}if(d=d<<4|C_(g),d<0)break}throw La(i.source,t,`Invalid Unicode escape sequence: "${a.slice(t,t+f)}".`)}function IR(i,t){const a=i.source.body,d=XT(a,t+2);if(Xy(d))return{value:String.fromCodePoint(d),size:6};if(bA(d)&&a.charCodeAt(t+6)===92&&a.charCodeAt(t+7)===117){const f=XT(a,t+8);if(xA(f))return{value:String.fromCodePoint(d,f),size:12}}throw La(i.source,t,`Invalid Unicode escape sequence: "${a.slice(t,t+6)}".`)}function XT(i,t){return C_(i.charCodeAt(t))<<12|C_(i.charCodeAt(t+1))<<8|C_(i.charCodeAt(t+2))<<4|C_(i.charCodeAt(t+3))}function C_(i){return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:-1}function RR(i,t){const a=i.source.body;switch(a.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw La(i.source,t,`Invalid character escape sequence: "${a.slice(t,t+2)}".`)}function kR(i,t){const a=i.source.body,d=a.length;let f=i.lineStart,g=t+3,_=g,c="";const A=[];for(;g<d;){const D=a.charCodeAt(g);if(D===34&&a.charCodeAt(g+1)===34&&a.charCodeAt(g+2)===34){c+=a.slice(_,g),A.push(c);const O=_a(i,gt.BLOCK_STRING,t,g+3,bR(A).join(`
`));return i.line+=A.length-1,i.lineStart=f,O}if(D===92&&a.charCodeAt(g+1)===34&&a.charCodeAt(g+2)===34&&a.charCodeAt(g+3)===34){c+=a.slice(_,g),_=g+1,g+=4;continue}if(D===10||D===13){c+=a.slice(_,g),A.push(c),D===13&&a.charCodeAt(g+1)===10?g+=2:++g,c="",_=g,f=g;continue}if(Xy(D))++g;else if(Dx(a,g))g+=2;else throw La(i.source,g,`Invalid character within String: ${Wm(i,g)}.`)}throw La(i.source,g,"Unterminated string.")}function OR(i,t){const a=i.source.body,d=a.length;let f=t+1;for(;f<d;){const g=a.charCodeAt(f);if(vA(g))++f;else break}return _a(i,gt.NAME,t,f,a.slice(t,f))}const LR=10,wA=2;function wn(i){return Ix(i,[])}function Ix(i,t){switch(typeof i){case"string":return JSON.stringify(i);case"function":return i.name?`[function ${i.name}]`:"[function]";case"object":return NR(i,t);default:return String(i)}}function NR(i,t){if(i===null)return"null";if(t.includes(i))return"[Circular]";const a=[...t,i];if(PR(i)){const d=i.toJSON();if(d!==i)return typeof d=="string"?d:Ix(d,a)}else if(Array.isArray(i))return FR(i,a);return zR(i,a)}function PR(i){return typeof i.toJSON=="function"}function zR(i,t){const a=Object.entries(i);return a.length===0?"{}":t.length>wA?"["+jR(i)+"]":"{ "+a.map(([f,g])=>f+": "+Ix(g,t)).join(", ")+" }"}function FR(i,t){if(i.length===0)return"[]";if(t.length>wA)return"[Array]";const a=Math.min(LR,i.length),d=i.length-a,f=[];for(let g=0;g<a;++g)f.push(Ix(i[g],t));return d===1?f.push("... 1 more item"):d>1&&f.push(`... ${d} more items`),"["+f.join(", ")+"]"}function jR(i){const t=Object.prototype.toString.call(i).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof i.constructor=="function"){const a=i.constructor.name;if(typeof a=="string"&&a!=="")return a}return t}const BR=globalThis.process&&!0,Ih=BR?function(t,a){return t instanceof a}:function(t,a){if(t instanceof a)return!0;if(typeof t=="object"&&t!==null){var d;const f=a.prototype[Symbol.toStringTag],g=Symbol.toStringTag in t?t[Symbol.toStringTag]:(d=t.constructor)===null||d===void 0?void 0:d.name;if(f===g){const _=wn(t);throw new Error(`Cannot use ${f} "${_}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class TA{constructor(t,a="GraphQL request",d={line:1,column:1}){typeof t=="string"||Ii(!1,`Body must be a string. Received: ${wn(t)}.`),this.body=t,this.name=a,this.locationOffset=d,this.locationOffset.line>0||Ii(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Ii(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function VR(i){return Ih(i,TA)}function SA(i,t){const a=new EA(i,t),d=a.parseDocument();return Object.defineProperty(d,"tokenCount",{enumerable:!1,value:a.tokenCount}),d}function UR(i,t){const a=new EA(i,t);a.expectToken(gt.SOF);const d=a.parseValueLiteral(!1);return a.expectToken(gt.EOF),d}class EA{constructor(t,a={}){const{lexer:d,...f}=a;if(d)this._lexer=d;else{const g=VR(t)?t:new TA(t);this._lexer=new TR(g)}this._options=f,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const t=this.expectToken(gt.NAME);return this.node(t,{kind:Rt.NAME,value:t.value})}parseDocument(){return this.node(this._lexer.token,{kind:Rt.DOCUMENT,definitions:this.many(gt.SOF,this.parseDefinition,gt.EOF)})}parseDefinition(){if(this.peek(gt.BRACE_L))return this.parseOperationDefinition();const t=this.peekDescription(),a=t?this._lexer.lookahead():this._lexer.token;if(t&&a.kind===gt.BRACE_L)throw La(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are not supported on shorthand queries.");if(a.kind===gt.NAME){switch(a.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}switch(a.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition()}if(t)throw La(this._lexer.source,this._lexer.token.start,"Unexpected description, only GraphQL definitions support descriptions.");switch(a.value){case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(a)}parseOperationDefinition(){const t=this._lexer.token;if(this.peek(gt.BRACE_L))return this.node(t,{kind:Rt.OPERATION_DEFINITION,operation:Fd.QUERY,description:void 0,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const a=this.parseDescription(),d=this.parseOperationType();let f;return this.peek(gt.NAME)&&(f=this.parseName()),this.node(t,{kind:Rt.OPERATION_DEFINITION,operation:d,description:a,name:f,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const t=this.expectToken(gt.NAME);switch(t.value){case"query":return Fd.QUERY;case"mutation":return Fd.MUTATION;case"subscription":return Fd.SUBSCRIPTION}throw this.unexpected(t)}parseVariableDefinitions(){return this.optionalMany(gt.PAREN_L,this.parseVariableDefinition,gt.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Rt.VARIABLE_DEFINITION,description:this.parseDescription(),variable:this.parseVariable(),type:(this.expectToken(gt.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(gt.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const t=this._lexer.token;return this.expectToken(gt.DOLLAR),this.node(t,{kind:Rt.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Rt.SELECTION_SET,selections:this.many(gt.BRACE_L,this.parseSelection,gt.BRACE_R)})}parseSelection(){return this.peek(gt.SPREAD)?this.parseFragment():this.parseField()}parseField(){const t=this._lexer.token,a=this.parseName();let d,f;return this.expectOptionalToken(gt.COLON)?(d=a,f=this.parseName()):f=a,this.node(t,{kind:Rt.FIELD,alias:d,name:f,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(gt.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(t){const a=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(gt.PAREN_L,a,gt.PAREN_R)}parseArgument(t=!1){const a=this._lexer.token,d=this.parseName();return this.expectToken(gt.COLON),this.node(a,{kind:Rt.ARGUMENT,name:d,value:this.parseValueLiteral(t)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const t=this._lexer.token;this.expectToken(gt.SPREAD);const a=this.expectOptionalKeyword("on");return!a&&this.peek(gt.NAME)?this.node(t,{kind:Rt.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(t,{kind:Rt.INLINE_FRAGMENT,typeCondition:a?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const t=this._lexer.token,a=this.parseDescription();return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(t,{kind:Rt.FRAGMENT_DEFINITION,description:a,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:Rt.FRAGMENT_DEFINITION,description:a,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(t){const a=this._lexer.token;switch(a.kind){case gt.BRACKET_L:return this.parseList(t);case gt.BRACE_L:return this.parseObject(t);case gt.INT:return this.advanceLexer(),this.node(a,{kind:Rt.INT,value:a.value});case gt.FLOAT:return this.advanceLexer(),this.node(a,{kind:Rt.FLOAT,value:a.value});case gt.STRING:case gt.BLOCK_STRING:return this.parseStringLiteral();case gt.NAME:switch(this.advanceLexer(),a.value){case"true":return this.node(a,{kind:Rt.BOOLEAN,value:!0});case"false":return this.node(a,{kind:Rt.BOOLEAN,value:!1});case"null":return this.node(a,{kind:Rt.NULL});default:return this.node(a,{kind:Rt.ENUM,value:a.value})}case gt.DOLLAR:if(t)if(this.expectToken(gt.DOLLAR),this._lexer.token.kind===gt.NAME){const d=this._lexer.token.value;throw La(this._lexer.source,a.start,`Unexpected variable "$${d}" in constant value.`)}else throw this.unexpected(a);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const t=this._lexer.token;return this.advanceLexer(),this.node(t,{kind:Rt.STRING,value:t.value,block:t.kind===gt.BLOCK_STRING})}parseList(t){const a=()=>this.parseValueLiteral(t);return this.node(this._lexer.token,{kind:Rt.LIST,values:this.any(gt.BRACKET_L,a,gt.BRACKET_R)})}parseObject(t){const a=()=>this.parseObjectField(t);return this.node(this._lexer.token,{kind:Rt.OBJECT,fields:this.any(gt.BRACE_L,a,gt.BRACE_R)})}parseObjectField(t){const a=this._lexer.token,d=this.parseName();return this.expectToken(gt.COLON),this.node(a,{kind:Rt.OBJECT_FIELD,name:d,value:this.parseValueLiteral(t)})}parseDirectives(t){const a=[];for(;this.peek(gt.AT);)a.push(this.parseDirective(t));return a}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(t){const a=this._lexer.token;return this.expectToken(gt.AT),this.node(a,{kind:Rt.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t)})}parseTypeReference(){const t=this._lexer.token;let a;if(this.expectOptionalToken(gt.BRACKET_L)){const d=this.parseTypeReference();this.expectToken(gt.BRACKET_R),a=this.node(t,{kind:Rt.LIST_TYPE,type:d})}else a=this.parseNamedType();return this.expectOptionalToken(gt.BANG)?this.node(t,{kind:Rt.NON_NULL_TYPE,type:a}):a}parseNamedType(){return this.node(this._lexer.token,{kind:Rt.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(gt.STRING)||this.peek(gt.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const t=this._lexer.token,a=this.parseDescription();this.expectKeyword("schema");const d=this.parseConstDirectives(),f=this.many(gt.BRACE_L,this.parseOperationTypeDefinition,gt.BRACE_R);return this.node(t,{kind:Rt.SCHEMA_DEFINITION,description:a,directives:d,operationTypes:f})}parseOperationTypeDefinition(){const t=this._lexer.token,a=this.parseOperationType();this.expectToken(gt.COLON);const d=this.parseNamedType();return this.node(t,{kind:Rt.OPERATION_TYPE_DEFINITION,operation:a,type:d})}parseScalarTypeDefinition(){const t=this._lexer.token,a=this.parseDescription();this.expectKeyword("scalar");const d=this.parseName(),f=this.parseConstDirectives();return this.node(t,{kind:Rt.SCALAR_TYPE_DEFINITION,description:a,name:d,directives:f})}parseObjectTypeDefinition(){const t=this._lexer.token,a=this.parseDescription();this.expectKeyword("type");const d=this.parseName(),f=this.parseImplementsInterfaces(),g=this.parseConstDirectives(),_=this.parseFieldsDefinition();return this.node(t,{kind:Rt.OBJECT_TYPE_DEFINITION,description:a,name:d,interfaces:f,directives:g,fields:_})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(gt.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(gt.BRACE_L,this.parseFieldDefinition,gt.BRACE_R)}parseFieldDefinition(){const t=this._lexer.token,a=this.parseDescription(),d=this.parseName(),f=this.parseArgumentDefs();this.expectToken(gt.COLON);const g=this.parseTypeReference(),_=this.parseConstDirectives();return this.node(t,{kind:Rt.FIELD_DEFINITION,description:a,name:d,arguments:f,type:g,directives:_})}parseArgumentDefs(){return this.optionalMany(gt.PAREN_L,this.parseInputValueDef,gt.PAREN_R)}parseInputValueDef(){const t=this._lexer.token,a=this.parseDescription(),d=this.parseName();this.expectToken(gt.COLON);const f=this.parseTypeReference();let g;this.expectOptionalToken(gt.EQUALS)&&(g=this.parseConstValueLiteral());const _=this.parseConstDirectives();return this.node(t,{kind:Rt.INPUT_VALUE_DEFINITION,description:a,name:d,type:f,defaultValue:g,directives:_})}parseInterfaceTypeDefinition(){const t=this._lexer.token,a=this.parseDescription();this.expectKeyword("interface");const d=this.parseName(),f=this.parseImplementsInterfaces(),g=this.parseConstDirectives(),_=this.parseFieldsDefinition();return this.node(t,{kind:Rt.INTERFACE_TYPE_DEFINITION,description:a,name:d,interfaces:f,directives:g,fields:_})}parseUnionTypeDefinition(){const t=this._lexer.token,a=this.parseDescription();this.expectKeyword("union");const d=this.parseName(),f=this.parseConstDirectives(),g=this.parseUnionMemberTypes();return this.node(t,{kind:Rt.UNION_TYPE_DEFINITION,description:a,name:d,directives:f,types:g})}parseUnionMemberTypes(){return this.expectOptionalToken(gt.EQUALS)?this.delimitedMany(gt.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const t=this._lexer.token,a=this.parseDescription();this.expectKeyword("enum");const d=this.parseName(),f=this.parseConstDirectives(),g=this.parseEnumValuesDefinition();return this.node(t,{kind:Rt.ENUM_TYPE_DEFINITION,description:a,name:d,directives:f,values:g})}parseEnumValuesDefinition(){return this.optionalMany(gt.BRACE_L,this.parseEnumValueDefinition,gt.BRACE_R)}parseEnumValueDefinition(){const t=this._lexer.token,a=this.parseDescription(),d=this.parseEnumValueName(),f=this.parseConstDirectives();return this.node(t,{kind:Rt.ENUM_VALUE_DEFINITION,description:a,name:d,directives:f})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw La(this._lexer.source,this._lexer.token.start,`${Db(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const t=this._lexer.token,a=this.parseDescription();this.expectKeyword("input");const d=this.parseName(),f=this.parseConstDirectives(),g=this.parseInputFieldsDefinition();return this.node(t,{kind:Rt.INPUT_OBJECT_TYPE_DEFINITION,description:a,name:d,directives:f,fields:g})}parseInputFieldsDefinition(){return this.optionalMany(gt.BRACE_L,this.parseInputValueDef,gt.BRACE_R)}parseTypeSystemExtension(){const t=this._lexer.lookahead();if(t.kind===gt.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)}parseSchemaExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const a=this.parseConstDirectives(),d=this.optionalMany(gt.BRACE_L,this.parseOperationTypeDefinition,gt.BRACE_R);if(a.length===0&&d.length===0)throw this.unexpected();return this.node(t,{kind:Rt.SCHEMA_EXTENSION,directives:a,operationTypes:d})}parseScalarTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const a=this.parseName(),d=this.parseConstDirectives();if(d.length===0)throw this.unexpected();return this.node(t,{kind:Rt.SCALAR_TYPE_EXTENSION,name:a,directives:d})}parseObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const a=this.parseName(),d=this.parseImplementsInterfaces(),f=this.parseConstDirectives(),g=this.parseFieldsDefinition();if(d.length===0&&f.length===0&&g.length===0)throw this.unexpected();return this.node(t,{kind:Rt.OBJECT_TYPE_EXTENSION,name:a,interfaces:d,directives:f,fields:g})}parseInterfaceTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const a=this.parseName(),d=this.parseImplementsInterfaces(),f=this.parseConstDirectives(),g=this.parseFieldsDefinition();if(d.length===0&&f.length===0&&g.length===0)throw this.unexpected();return this.node(t,{kind:Rt.INTERFACE_TYPE_EXTENSION,name:a,interfaces:d,directives:f,fields:g})}parseUnionTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const a=this.parseName(),d=this.parseConstDirectives(),f=this.parseUnionMemberTypes();if(d.length===0&&f.length===0)throw this.unexpected();return this.node(t,{kind:Rt.UNION_TYPE_EXTENSION,name:a,directives:d,types:f})}parseEnumTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const a=this.parseName(),d=this.parseConstDirectives(),f=this.parseEnumValuesDefinition();if(d.length===0&&f.length===0)throw this.unexpected();return this.node(t,{kind:Rt.ENUM_TYPE_EXTENSION,name:a,directives:d,values:f})}parseInputObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const a=this.parseName(),d=this.parseConstDirectives(),f=this.parseInputFieldsDefinition();if(d.length===0&&f.length===0)throw this.unexpected();return this.node(t,{kind:Rt.INPUT_OBJECT_TYPE_EXTENSION,name:a,directives:d,fields:f})}parseDirectiveDefinition(){const t=this._lexer.token,a=this.parseDescription();this.expectKeyword("directive"),this.expectToken(gt.AT);const d=this.parseName(),f=this.parseArgumentDefs(),g=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const _=this.parseDirectiveLocations();return this.node(t,{kind:Rt.DIRECTIVE_DEFINITION,description:a,name:d,arguments:f,repeatable:g,locations:_})}parseDirectiveLocations(){return this.delimitedMany(gt.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const t=this._lexer.token,a=this.parseName();if(Object.prototype.hasOwnProperty.call(oi,a.value))return a;throw this.unexpected(t)}parseSchemaCoordinate(){const t=this._lexer.token,a=this.expectOptionalToken(gt.AT),d=this.parseName();let f;!a&&this.expectOptionalToken(gt.DOT)&&(f=this.parseName());let g;return(a||f)&&this.expectOptionalToken(gt.PAREN_L)&&(g=this.parseName(),this.expectToken(gt.COLON),this.expectToken(gt.PAREN_R)),a?g?this.node(t,{kind:Rt.DIRECTIVE_ARGUMENT_COORDINATE,name:d,argumentName:g}):this.node(t,{kind:Rt.DIRECTIVE_COORDINATE,name:d}):f?g?this.node(t,{kind:Rt.ARGUMENT_COORDINATE,name:d,fieldName:f,argumentName:g}):this.node(t,{kind:Rt.MEMBER_COORDINATE,name:d,memberName:f}):this.node(t,{kind:Rt.TYPE_COORDINATE,name:d})}node(t,a){return this._options.noLocation!==!0&&(a.loc=new _R(t,this._lexer.lastToken,this._lexer.source)),a}peek(t){return this._lexer.token.kind===t}expectToken(t){const a=this._lexer.token;if(a.kind===t)return this.advanceLexer(),a;throw La(this._lexer.source,a.start,`Expected ${AA(t)}, found ${Db(a)}.`)}expectOptionalToken(t){return this._lexer.token.kind===t?(this.advanceLexer(),!0):!1}expectKeyword(t){const a=this._lexer.token;if(a.kind===gt.NAME&&a.value===t)this.advanceLexer();else throw La(this._lexer.source,a.start,`Expected "${t}", found ${Db(a)}.`)}expectOptionalKeyword(t){const a=this._lexer.token;return a.kind===gt.NAME&&a.value===t?(this.advanceLexer(),!0):!1}unexpected(t){const a=t??this._lexer.token;return La(this._lexer.source,a.start,`Unexpected ${Db(a)}.`)}any(t,a,d){this.expectToken(t);const f=[];for(;!this.expectOptionalToken(d);)f.push(a.call(this));return f}optionalMany(t,a,d){if(this.expectOptionalToken(t)){const f=[];do f.push(a.call(this));while(!this.expectOptionalToken(d));return f}return[]}many(t,a,d){this.expectToken(t);const f=[];do f.push(a.call(this));while(!this.expectOptionalToken(d));return f}delimitedMany(t,a){this.expectOptionalToken(t);const d=[];do d.push(a.call(this));while(this.expectOptionalToken(t));return d}advanceLexer(){const{maxTokens:t}=this._options,a=this._lexer.advance();if(a.kind!==gt.EOF&&(++this._tokenCounter,t!==void 0&&this._tokenCounter>t))throw La(this._lexer.source,a.start,`Document contains more that ${t} tokens. Parsing aborted.`)}}function Db(i){const t=i.value;return AA(i.kind)+(t!=null?` "${t}"`:"")}function AA(i){return SR(i)?`"${i}"`:i}const GR=5;function ZR(i,t){const[a,d]=t?[i,t]:[void 0,i];let f=" Did you mean ";a&&(f+=a+" ");const g=d.map(A=>`"${A}"`);switch(g.length){case 0:return"";case 1:return f+g[0]+"?";case 2:return f+g[0]+" or "+g[1]+"?"}const _=g.slice(0,GR),c=_.pop();return f+_.join(", ")+", or "+c+"?"}function QT(i){return i}function MA(i,t){const a=Object.create(null);for(const d of i)a[t(d)]=d;return a}function Gm(i,t,a){const d=Object.create(null);for(const f of i)d[t(f)]=a(f);return d}function Rx(i,t){const a=Object.create(null);for(const d of Object.keys(i))a[d]=t(i[d],d);return a}function $R(i,t){let a=0,d=0;for(;a<i.length&&d<t.length;){let f=i.charCodeAt(a),g=t.charCodeAt(d);if(Ib(f)&&Ib(g)){let _=0;do++a,_=_*10+f-mw,f=i.charCodeAt(a);while(Ib(f)&&_>0);let c=0;do++d,c=c*10+g-mw,g=t.charCodeAt(d);while(Ib(g)&&c>0);if(_<c)return-1;if(_>c)return 1}else{if(f<g)return-1;if(f>g)return 1;++a,++d}}return i.length-t.length}const mw=48,YR=57;function Ib(i){return!isNaN(i)&&mw<=i&&i<=YR}function qR(i,t){const a=Object.create(null),d=new HR(i),f=Math.floor(i.length*.4)+1;for(const g of t){const _=d.measure(g,f);_!==void 0&&(a[g]=_)}return Object.keys(a).sort((g,_)=>{const c=a[g]-a[_];return c!==0?c:$R(g,_)})}class HR{constructor(t){this._input=t,this._inputLowerCase=t.toLowerCase(),this._inputArray=KT(this._inputLowerCase),this._rows=[new Array(t.length+1).fill(0),new Array(t.length+1).fill(0),new Array(t.length+1).fill(0)]}measure(t,a){if(this._input===t)return 0;const d=t.toLowerCase();if(this._inputLowerCase===d)return 1;let f=KT(d),g=this._inputArray;if(f.length<g.length){const O=f;f=g,g=O}const _=f.length,c=g.length;if(_-c>a)return;const A=this._rows;for(let O=0;O<=c;O++)A[0][O]=O;for(let O=1;O<=_;O++){const z=A[(O-1)%3],V=A[O%3];let H=V[0]=O;for(let ne=1;ne<=c;ne++){const ae=f[O-1]===g[ne-1]?0:1;let q=Math.min(z[ne]+1,V[ne-1]+1,z[ne-1]+ae);if(O>1&&ne>1&&f[O-1]===g[ne-2]&&f[O-2]===g[ne-1]){const he=A[(O-2)%3][ne-2];q=Math.min(q,he+1)}q<H&&(H=q),V[ne]=q}if(H>a)return}const D=A[_%3][c];return D<=a?D:void 0}}function KT(i){const t=i.length,a=new Array(t);for(let d=0;d<t;++d)a[d]=i.charCodeAt(d);return a}function Cc(i){if(i==null)return Object.create(null);if(Object.getPrototypeOf(i)===null)return i;const t=Object.create(null);for(const[a,d]of Object.entries(i))t[a]=d;return t}function WR(i){return`"${i.replace(XR,QR)}"`}const XR=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function QR(i){return KR[i.charCodeAt(0)]}const KR=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],JR=Object.freeze({});function s2(i,t,a=yA){const d=new Map;for(const he of Object.values(Rt))d.set(he,ek(t,he));let f,g=Array.isArray(i),_=[i],c=-1,A=[],D=i,O,z;const V=[],H=[];do{c++;const he=c===_.length,Ae=he&&A.length!==0;if(he){if(O=H.length===0?void 0:V[V.length-1],D=z,z=H.pop(),Ae)if(g){D=D.slice();let Fe=0;for(const[De,ke]of A){const ze=De-Fe;ke===null?(D.splice(ze,1),Fe++):D[ze]=ke}}else{D={...D};for(const[Fe,De]of A)D[Fe]=De}c=f.index,_=f.keys,A=f.edits,g=f.inArray,f=f.prev}else if(z){if(O=g?c:_[c],D=z[O],D==null)continue;V.push(O)}let Ee;if(!Array.isArray(D)){var ne,ae;WT(D)||Ii(!1,`Invalid AST Node: ${wn(D)}.`);const Fe=he?(ne=d.get(D.kind))===null||ne===void 0?void 0:ne.leave:(ae=d.get(D.kind))===null||ae===void 0?void 0:ae.enter;if(Ee=Fe?.call(t,D,O,z,V,H),Ee===JR)break;if(Ee===!1){if(!he){V.pop();continue}}else if(Ee!==void 0&&(A.push([O,Ee]),!he))if(WT(Ee))D=Ee;else{V.pop();continue}}if(Ee===void 0&&Ae&&A.push([O,D]),he)V.pop();else{var q;f={inArray:g,index:c,keys:_,edits:A,prev:f},g=Array.isArray(D),_=g?D:(q=a[D.kind])!==null&&q!==void 0?q:[],c=-1,A=[],z&&H.push(z),z=D}}while(f!==void 0);return A.length!==0?A[A.length-1][1]:i}function ek(i,t){const a=i[t];return typeof a=="object"?a:typeof a=="function"?{enter:a,leave:void 0}:{enter:i.enter,leave:i.leave}}function ys(i){return s2(i,nk)}const tk=80,nk={Name:{leave:i=>i.value},Variable:{leave:i=>"$"+i.name},Document:{leave:i=>$t(i.definitions,`

`)},OperationDefinition:{leave(i){const t=N1(i.variableDefinitions)?On(`(
`,$t(i.variableDefinitions,`
`),`
)`):On("(",$t(i.variableDefinitions,", "),")"),a=On("",i.description,`
`)+$t([i.operation,$t([i.name,t]),$t(i.directives," ")]," ");return(a==="query"?"":a+" ")+i.selectionSet}},VariableDefinition:{leave:({variable:i,type:t,defaultValue:a,directives:d,description:f})=>On("",f,`
`)+i+": "+t+On(" = ",a)+On(" ",$t(d," "))},SelectionSet:{leave:({selections:i})=>_u(i)},Field:{leave({alias:i,name:t,arguments:a,directives:d,selectionSet:f}){const g=On("",i,": ")+t;let _=g+On("(",$t(a,", "),")");return _.length>tk&&(_=g+On(`(
`,Yb($t(a,`
`)),`
)`)),$t([_,$t(d," "),f]," ")}},Argument:{leave:({name:i,value:t})=>i+": "+t},FragmentSpread:{leave:({name:i,directives:t})=>"..."+i+On(" ",$t(t," "))},InlineFragment:{leave:({typeCondition:i,directives:t,selectionSet:a})=>$t(["...",On("on ",i),$t(t," "),a]," ")},FragmentDefinition:{leave:({name:i,typeCondition:t,variableDefinitions:a,directives:d,selectionSet:f,description:g})=>On("",g,`
`)+`fragment ${i}${On("(",$t(a,", "),")")} on ${t} ${On("",$t(d," ")," ")}`+f},IntValue:{leave:({value:i})=>i},FloatValue:{leave:({value:i})=>i},StringValue:{leave:({value:i,block:t})=>t?wR(i):WR(i)},BooleanValue:{leave:({value:i})=>i?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:i})=>i},ListValue:{leave:({values:i})=>"["+$t(i,", ")+"]"},ObjectValue:{leave:({fields:i})=>"{"+$t(i,", ")+"}"},ObjectField:{leave:({name:i,value:t})=>i+": "+t},Directive:{leave:({name:i,arguments:t})=>"@"+i+On("(",$t(t,", "),")")},NamedType:{leave:({name:i})=>i},ListType:{leave:({type:i})=>"["+i+"]"},NonNullType:{leave:({type:i})=>i+"!"},SchemaDefinition:{leave:({description:i,directives:t,operationTypes:a})=>On("",i,`
`)+$t(["schema",$t(t," "),_u(a)]," ")},OperationTypeDefinition:{leave:({operation:i,type:t})=>i+": "+t},ScalarTypeDefinition:{leave:({description:i,name:t,directives:a})=>On("",i,`
`)+$t(["scalar",t,$t(a," ")]," ")},ObjectTypeDefinition:{leave:({description:i,name:t,interfaces:a,directives:d,fields:f})=>On("",i,`
`)+$t(["type",t,On("implements ",$t(a," & ")),$t(d," "),_u(f)]," ")},FieldDefinition:{leave:({description:i,name:t,arguments:a,type:d,directives:f})=>On("",i,`
`)+t+(N1(a)?On(`(
`,Yb($t(a,`
`)),`
)`):On("(",$t(a,", "),")"))+": "+d+On(" ",$t(f," "))},InputValueDefinition:{leave:({description:i,name:t,type:a,defaultValue:d,directives:f})=>On("",i,`
`)+$t([t+": "+a,On("= ",d),$t(f," ")]," ")},InterfaceTypeDefinition:{leave:({description:i,name:t,interfaces:a,directives:d,fields:f})=>On("",i,`
`)+$t(["interface",t,On("implements ",$t(a," & ")),$t(d," "),_u(f)]," ")},UnionTypeDefinition:{leave:({description:i,name:t,directives:a,types:d})=>On("",i,`
`)+$t(["union",t,$t(a," "),On("= ",$t(d," | "))]," ")},EnumTypeDefinition:{leave:({description:i,name:t,directives:a,values:d})=>On("",i,`
`)+$t(["enum",t,$t(a," "),_u(d)]," ")},EnumValueDefinition:{leave:({description:i,name:t,directives:a})=>On("",i,`
`)+$t([t,$t(a," ")]," ")},InputObjectTypeDefinition:{leave:({description:i,name:t,directives:a,fields:d})=>On("",i,`
`)+$t(["input",t,$t(a," "),_u(d)]," ")},DirectiveDefinition:{leave:({description:i,name:t,arguments:a,repeatable:d,locations:f})=>On("",i,`
`)+"directive @"+t+(N1(a)?On(`(
`,Yb($t(a,`
`)),`
)`):On("(",$t(a,", "),")"))+(d?" repeatable":"")+" on "+$t(f," | ")},SchemaExtension:{leave:({directives:i,operationTypes:t})=>$t(["extend schema",$t(i," "),_u(t)]," ")},ScalarTypeExtension:{leave:({name:i,directives:t})=>$t(["extend scalar",i,$t(t," ")]," ")},ObjectTypeExtension:{leave:({name:i,interfaces:t,directives:a,fields:d})=>$t(["extend type",i,On("implements ",$t(t," & ")),$t(a," "),_u(d)]," ")},InterfaceTypeExtension:{leave:({name:i,interfaces:t,directives:a,fields:d})=>$t(["extend interface",i,On("implements ",$t(t," & ")),$t(a," "),_u(d)]," ")},UnionTypeExtension:{leave:({name:i,directives:t,types:a})=>$t(["extend union",i,$t(t," "),On("= ",$t(a," | "))]," ")},EnumTypeExtension:{leave:({name:i,directives:t,values:a})=>$t(["extend enum",i,$t(t," "),_u(a)]," ")},InputObjectTypeExtension:{leave:({name:i,directives:t,fields:a})=>$t(["extend input",i,$t(t," "),_u(a)]," ")},TypeCoordinate:{leave:({name:i})=>i},MemberCoordinate:{leave:({name:i,memberName:t})=>$t([i,On(".",t)])},ArgumentCoordinate:{leave:({name:i,fieldName:t,argumentName:a})=>$t([i,On(".",t),On("(",a,":)")])},DirectiveCoordinate:{leave:({name:i})=>$t(["@",i])},DirectiveArgumentCoordinate:{leave:({name:i,argumentName:t})=>$t(["@",i,On("(",t,":)")])}};function $t(i,t=""){var a;return(a=i?.filter(d=>d).join(t))!==null&&a!==void 0?a:""}function _u(i){return On(`{
`,Yb($t(i,`
`)),`
}`)}function On(i,t,a=""){return t!=null&&t!==""?i+t+a:""}function Yb(i){return On("  ",i.replace(/\n/g,`
  `))}function N1(i){var t;return(t=i?.some(a=>a.includes(`
`)))!==null&&t!==void 0?t:!1}function gw(i,t){switch(i.kind){case Rt.NULL:return null;case Rt.INT:return parseInt(i.value,10);case Rt.FLOAT:return parseFloat(i.value);case Rt.STRING:case Rt.ENUM:case Rt.BOOLEAN:return i.value;case Rt.LIST:return i.values.map(a=>gw(a,t));case Rt.OBJECT:return Gm(i.fields,a=>a.name.value,a=>gw(a.value,t));case Rt.VARIABLE:return t?.[i.name.value]}}function Eu(i){if(i!=null||Ii(!1,"Must provide name."),typeof i=="string"||Ii(!1,"Expected name to be a string."),i.length===0)throw new Ni("Expected name to be a non-empty string.");for(let t=1;t<i.length;++t)if(!vA(i.charCodeAt(t)))throw new Ni(`Names must only contain [_a-zA-Z0-9] but "${i}" does not.`);if(!o2(i.charCodeAt(0)))throw new Ni(`Names must start with [_a-zA-Z] but "${i}" does not.`);return i}function ik(i){if(i==="true"||i==="false"||i==="null")throw new Ni(`Enum values cannot be named: ${i}`);return Eu(i)}function CA(i){return Qy(i)||yp(i)||wu(i)||Xm(i)||bp(i)||Ud(i)||Ep(i)||Gd(i)}function Qy(i){return Ih(i,lg)}function yp(i){return Ih(i,Ap)}function rk(i){if(!yp(i))throw new Error(`Expected ${wn(i)} to be a GraphQL Object type.`);return i}function wu(i){return Ih(i,BA)}function ak(i){if(!wu(i))throw new Error(`Expected ${wn(i)} to be a GraphQL Interface type.`);return i}function Xm(i){return Ih(i,VA)}function bp(i){return Ih(i,kx)}function Ud(i){return Ih(i,UA)}function Ep(i){return Ih(i,vc)}function Gd(i){return Ih(i,ii)}function DA(i){return Qy(i)||bp(i)||Ud(i)||l2(i)&&DA(i.ofType)}function IA(i){return Qy(i)||yp(i)||wu(i)||Xm(i)||bp(i)||l2(i)&&IA(i.ofType)}function RA(i){return Qy(i)||bp(i)}function ok(i){return wu(i)||Xm(i)}class vc{constructor(t){CA(t)||Ii(!1,`Expected ${wn(t)} to be a GraphQL type.`),this.ofType=t}get[Symbol.toStringTag](){return"GraphQLList"}toString(){return"["+String(this.ofType)+"]"}toJSON(){return this.toString()}}class ii{constructor(t){kA(t)||Ii(!1,`Expected ${wn(t)} to be a GraphQL nullable type.`),this.ofType=t}get[Symbol.toStringTag](){return"GraphQLNonNull"}toString(){return String(this.ofType)+"!"}toJSON(){return this.toString()}}function l2(i){return Ep(i)||Gd(i)}function kA(i){return CA(i)&&!Gd(i)}function sk(i){if(!kA(i))throw new Error(`Expected ${wn(i)} to be a GraphQL nullable type.`);return i}function lk(i){if(i){let t=i;for(;l2(t);)t=t.ofType;return t}}function OA(i){return typeof i=="function"?i():i}function LA(i){return typeof i=="function"?i():i}class lg{constructor(t){var a,d,f,g;const _=(a=t.parseValue)!==null&&a!==void 0?a:QT;this.name=Eu(t.name),this.description=t.description,this.specifiedByURL=t.specifiedByURL,this.serialize=(d=t.serialize)!==null&&d!==void 0?d:QT,this.parseValue=_,this.parseLiteral=(f=t.parseLiteral)!==null&&f!==void 0?f:(c,A)=>_(gw(c,A)),this.extensions=Cc(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(g=t.extensionASTNodes)!==null&&g!==void 0?g:[],t.specifiedByURL==null||typeof t.specifiedByURL=="string"||Ii(!1,`${this.name} must provide "specifiedByURL" as a string, but got: ${wn(t.specifiedByURL)}.`),t.serialize==null||typeof t.serialize=="function"||Ii(!1,`${this.name} must provide "serialize" function. If this custom Scalar is also used as an input type, ensure "parseValue" and "parseLiteral" functions are also provided.`),t.parseLiteral&&(typeof t.parseValue=="function"&&typeof t.parseLiteral=="function"||Ii(!1,`${this.name} must provide both "parseValue" and "parseLiteral" functions.`))}get[Symbol.toStringTag](){return"GraphQLScalarType"}toConfig(){return{name:this.name,description:this.description,specifiedByURL:this.specifiedByURL,serialize:this.serialize,parseValue:this.parseValue,parseLiteral:this.parseLiteral,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}class Ap{constructor(t){var a;this.name=Eu(t.name),this.description=t.description,this.isTypeOf=t.isTypeOf,this.extensions=Cc(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(a=t.extensionASTNodes)!==null&&a!==void 0?a:[],this._fields=()=>PA(t),this._interfaces=()=>NA(t),t.isTypeOf==null||typeof t.isTypeOf=="function"||Ii(!1,`${this.name} must provide "isTypeOf" as a function, but got: ${wn(t.isTypeOf)}.`)}get[Symbol.toStringTag](){return"GraphQLObjectType"}getFields(){return typeof this._fields=="function"&&(this._fields=this._fields()),this._fields}getInterfaces(){return typeof this._interfaces=="function"&&(this._interfaces=this._interfaces()),this._interfaces}toConfig(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:FA(this.getFields()),isTypeOf:this.isTypeOf,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}function NA(i){var t;const a=OA((t=i.interfaces)!==null&&t!==void 0?t:[]);return Array.isArray(a)||Ii(!1,`${i.name} interfaces must be an Array or a function which returns an Array.`),a}function PA(i){const t=LA(i.fields);return Dy(t)||Ii(!1,`${i.name} fields must be an object with field names as keys or a function which returns such an object.`),Rx(t,(a,d)=>{var f;Dy(a)||Ii(!1,`${i.name}.${d} field config must be an object.`),a.resolve==null||typeof a.resolve=="function"||Ii(!1,`${i.name}.${d} field resolver must be a function if provided, but got: ${wn(a.resolve)}.`);const g=(f=a.args)!==null&&f!==void 0?f:{};return Dy(g)||Ii(!1,`${i.name}.${d} args must be an object with argument names as keys.`),{name:Eu(d),description:a.description,type:a.type,args:zA(g),resolve:a.resolve,subscribe:a.subscribe,deprecationReason:a.deprecationReason,extensions:Cc(a.extensions),astNode:a.astNode}})}function zA(i){return Object.entries(i).map(([t,a])=>({name:Eu(t),description:a.description,type:a.type,defaultValue:a.defaultValue,deprecationReason:a.deprecationReason,extensions:Cc(a.extensions),astNode:a.astNode}))}function Dy(i){return Qd(i)&&!Array.isArray(i)}function FA(i){return Rx(i,t=>({description:t.description,type:t.type,args:jA(t.args),resolve:t.resolve,subscribe:t.subscribe,deprecationReason:t.deprecationReason,extensions:t.extensions,astNode:t.astNode}))}function jA(i){return Gm(i,t=>t.name,t=>({description:t.description,type:t.type,defaultValue:t.defaultValue,deprecationReason:t.deprecationReason,extensions:t.extensions,astNode:t.astNode}))}class BA{constructor(t){var a;this.name=Eu(t.name),this.description=t.description,this.resolveType=t.resolveType,this.extensions=Cc(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(a=t.extensionASTNodes)!==null&&a!==void 0?a:[],this._fields=PA.bind(void 0,t),this._interfaces=NA.bind(void 0,t),t.resolveType==null||typeof t.resolveType=="function"||Ii(!1,`${this.name} must provide "resolveType" as a function, but got: ${wn(t.resolveType)}.`)}get[Symbol.toStringTag](){return"GraphQLInterfaceType"}getFields(){return typeof this._fields=="function"&&(this._fields=this._fields()),this._fields}getInterfaces(){return typeof this._interfaces=="function"&&(this._interfaces=this._interfaces()),this._interfaces}toConfig(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:FA(this.getFields()),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}class VA{constructor(t){var a;this.name=Eu(t.name),this.description=t.description,this.resolveType=t.resolveType,this.extensions=Cc(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(a=t.extensionASTNodes)!==null&&a!==void 0?a:[],this._types=ck.bind(void 0,t),t.resolveType==null||typeof t.resolveType=="function"||Ii(!1,`${this.name} must provide "resolveType" as a function, but got: ${wn(t.resolveType)}.`)}get[Symbol.toStringTag](){return"GraphQLUnionType"}getTypes(){return typeof this._types=="function"&&(this._types=this._types()),this._types}toConfig(){return{name:this.name,description:this.description,types:this.getTypes(),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}function ck(i){const t=OA(i.types);return Array.isArray(t)||Ii(!1,`Must provide Array of types or a function which returns such an array for Union ${i.name}.`),t}class kx{constructor(t){var a;this.name=Eu(t.name),this.description=t.description,this.extensions=Cc(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(a=t.extensionASTNodes)!==null&&a!==void 0?a:[],this._values=typeof t.values=="function"?t.values:JT(this.name,t.values),this._valueLookup=null,this._nameLookup=null}get[Symbol.toStringTag](){return"GraphQLEnumType"}getValues(){return typeof this._values=="function"&&(this._values=JT(this.name,this._values())),this._values}getValue(t){return this._nameLookup===null&&(this._nameLookup=MA(this.getValues(),a=>a.name)),this._nameLookup[t]}serialize(t){this._valueLookup===null&&(this._valueLookup=new Map(this.getValues().map(d=>[d.value,d])));const a=this._valueLookup.get(t);if(a===void 0)throw new Ni(`Enum "${this.name}" cannot represent value: ${wn(t)}`);return a.name}parseValue(t){if(typeof t!="string"){const d=wn(t);throw new Ni(`Enum "${this.name}" cannot represent non-string value: ${d}.`+Rb(this,d))}const a=this.getValue(t);if(a==null)throw new Ni(`Value "${t}" does not exist in "${this.name}" enum.`+Rb(this,t));return a.value}parseLiteral(t,a){if(t.kind!==Rt.ENUM){const f=ys(t);throw new Ni(`Enum "${this.name}" cannot represent non-enum value: ${f}.`+Rb(this,f),{nodes:t})}const d=this.getValue(t.value);if(d==null){const f=ys(t);throw new Ni(`Value "${f}" does not exist in "${this.name}" enum.`+Rb(this,f),{nodes:t})}return d.value}toConfig(){const t=Gm(this.getValues(),a=>a.name,a=>({description:a.description,value:a.value,deprecationReason:a.deprecationReason,extensions:a.extensions,astNode:a.astNode}));return{name:this.name,description:this.description,values:t,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}function Rb(i,t){const a=i.getValues().map(f=>f.name),d=qR(t,a);return ZR("the enum value",d)}function JT(i,t){return Dy(t)||Ii(!1,`${i} values must be an object with value names as keys.`),Object.entries(t).map(([a,d])=>(Dy(d)||Ii(!1,`${i}.${a} must refer to an object with a "value" key representing an internal value but got: ${wn(d)}.`),{name:ik(a),description:d.description,value:d.value!==void 0?d.value:a,deprecationReason:d.deprecationReason,extensions:Cc(d.extensions),astNode:d.astNode}))}class UA{constructor(t){var a,d;this.name=Eu(t.name),this.description=t.description,this.extensions=Cc(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(a=t.extensionASTNodes)!==null&&a!==void 0?a:[],this.isOneOf=(d=t.isOneOf)!==null&&d!==void 0?d:!1,this._fields=uk.bind(void 0,t)}get[Symbol.toStringTag](){return"GraphQLInputObjectType"}getFields(){return typeof this._fields=="function"&&(this._fields=this._fields()),this._fields}toConfig(){const t=Rx(this.getFields(),a=>({description:a.description,type:a.type,defaultValue:a.defaultValue,deprecationReason:a.deprecationReason,extensions:a.extensions,astNode:a.astNode}));return{name:this.name,description:this.description,fields:t,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes,isOneOf:this.isOneOf}}toString(){return this.name}toJSON(){return this.toString()}}function uk(i){const t=LA(i.fields);return Dy(t)||Ii(!1,`${i.name} fields must be an object with field names as keys or a function which returns such an object.`),Rx(t,(a,d)=>(!("resolve"in a)||Ii(!1,`${i.name}.${d} field has a resolve property, but Input Types cannot define resolvers.`),{name:Eu(d),description:a.description,type:a.type,defaultValue:a.defaultValue,deprecationReason:a.deprecationReason,extensions:Cc(a.extensions),astNode:a.astNode}))}const P1=2147483647,z1=-2147483648,hk=new lg({name:"Int",description:"The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.",serialize(i){const t=fv(i);if(typeof t=="boolean")return t?1:0;let a=t;if(typeof t=="string"&&t!==""&&(a=Number(t)),typeof a!="number"||!Number.isInteger(a))throw new Ni(`Int cannot represent non-integer value: ${wn(t)}`);if(a>P1||a<z1)throw new Ni("Int cannot represent non 32-bit signed integer value: "+wn(t));return a},parseValue(i){if(typeof i!="number"||!Number.isInteger(i))throw new Ni(`Int cannot represent non-integer value: ${wn(i)}`);if(i>P1||i<z1)throw new Ni(`Int cannot represent non 32-bit signed integer value: ${i}`);return i},parseLiteral(i){if(i.kind!==Rt.INT)throw new Ni(`Int cannot represent non-integer value: ${ys(i)}`,{nodes:i});const t=parseInt(i.value,10);if(t>P1||t<z1)throw new Ni(`Int cannot represent non 32-bit signed integer value: ${i.value}`,{nodes:i});return t}}),dk=new lg({name:"Float",description:"The `Float` scalar type represents signed double-precision fractional values as specified by [IEEE 754](https://en.wikipedia.org/wiki/IEEE_floating_point).",serialize(i){const t=fv(i);if(typeof t=="boolean")return t?1:0;let a=t;if(typeof t=="string"&&t!==""&&(a=Number(t)),typeof a!="number"||!Number.isFinite(a))throw new Ni(`Float cannot represent non numeric value: ${wn(t)}`);return a},parseValue(i){if(typeof i!="number"||!Number.isFinite(i))throw new Ni(`Float cannot represent non numeric value: ${wn(i)}`);return i},parseLiteral(i){if(i.kind!==Rt.FLOAT&&i.kind!==Rt.INT)throw new Ni(`Float cannot represent non numeric value: ${ys(i)}`,i);return parseFloat(i.value)}}),aa=new lg({name:"String",description:"The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.",serialize(i){const t=fv(i);if(typeof t=="string")return t;if(typeof t=="boolean")return t?"true":"false";if(typeof t=="number"&&Number.isFinite(t))return t.toString();throw new Ni(`String cannot represent value: ${wn(i)}`)},parseValue(i){if(typeof i!="string")throw new Ni(`String cannot represent a non string value: ${wn(i)}`);return i},parseLiteral(i){if(i.kind!==Rt.STRING)throw new Ni(`String cannot represent a non string value: ${ys(i)}`,{nodes:i});return i.value}}),Pl=new lg({name:"Boolean",description:"The `Boolean` scalar type represents `true` or `false`.",serialize(i){const t=fv(i);if(typeof t=="boolean")return t;if(Number.isFinite(t))return t!==0;throw new Ni(`Boolean cannot represent a non boolean value: ${wn(t)}`)},parseValue(i){if(typeof i!="boolean")throw new Ni(`Boolean cannot represent a non boolean value: ${wn(i)}`);return i},parseLiteral(i){if(i.kind!==Rt.BOOLEAN)throw new Ni(`Boolean cannot represent a non boolean value: ${ys(i)}`,{nodes:i});return i.value}}),GA=new lg({name:"ID",description:'The `ID` scalar type represents a unique identifier, often used to refetch an object or as key for a cache. The ID type appears in a JSON response as a String; however, it is not intended to be human-readable. When expected as an input type, any string (such as `"4"`) or integer (such as `4`) input value will be accepted as an ID.',serialize(i){const t=fv(i);if(typeof t=="string")return t;if(Number.isInteger(t))return String(t);throw new Ni(`ID cannot represent value: ${wn(i)}`)},parseValue(i){if(typeof i=="string")return i;if(typeof i=="number"&&Number.isInteger(i))return i.toString();throw new Ni(`ID cannot represent value: ${wn(i)}`)},parseLiteral(i){if(i.kind!==Rt.STRING&&i.kind!==Rt.INT)throw new Ni("ID cannot represent a non-string and non-integer value: "+ys(i),{nodes:i});return i.value}}),fk=Object.freeze([aa,hk,dk,Pl,GA]);function fv(i){if(Qd(i)){if(typeof i.valueOf=="function"){const t=i.valueOf();if(!Qd(t))return t}if(typeof i.toJSON=="function")return i.toJSON()}return i}function pk(i){return Ih(i,cg)}class cg{constructor(t){var a,d;this.name=Eu(t.name),this.description=t.description,this.locations=t.locations,this.isRepeatable=(a=t.isRepeatable)!==null&&a!==void 0?a:!1,this.extensions=Cc(t.extensions),this.astNode=t.astNode,Array.isArray(t.locations)||Ii(!1,`@${t.name} locations must be an Array.`);const f=(d=t.args)!==null&&d!==void 0?d:{};Qd(f)&&!Array.isArray(f)||Ii(!1,`@${t.name} args must be an object with argument names as keys.`),this.args=zA(f)}get[Symbol.toStringTag](){return"GraphQLDirective"}toConfig(){return{name:this.name,description:this.description,locations:this.locations,args:jA(this.args),isRepeatable:this.isRepeatable,extensions:this.extensions,astNode:this.astNode}}toString(){return"@"+this.name}toJSON(){return this.toString()}}const mk=new cg({name:"include",description:"Directs the executor to include this field or fragment only when the `if` argument is true.",locations:[oi.FIELD,oi.FRAGMENT_SPREAD,oi.INLINE_FRAGMENT],args:{if:{type:new ii(Pl),description:"Included when true."}}}),gk=new cg({name:"skip",description:"Directs the executor to skip this field or fragment when the `if` argument is true.",locations:[oi.FIELD,oi.FRAGMENT_SPREAD,oi.INLINE_FRAGMENT],args:{if:{type:new ii(Pl),description:"Skipped when true."}}}),yk="No longer supported",_k=new cg({name:"deprecated",description:"Marks an element of a GraphQL schema as no longer supported.",locations:[oi.FIELD_DEFINITION,oi.ARGUMENT_DEFINITION,oi.INPUT_FIELD_DEFINITION,oi.ENUM_VALUE],args:{reason:{type:aa,description:"Explains why this element was deprecated, usually also including a suggestion for how to access supported similar data. Formatted using the Markdown syntax, as specified by [CommonMark](https://commonmark.org/).",defaultValue:yk}}}),vk=new cg({name:"specifiedBy",description:"Exposes a URL that specifies the behavior of this scalar.",locations:[oi.SCALAR],args:{url:{type:new ii(aa),description:"The URL that specifies the behavior of this scalar."}}}),bk=new cg({name:"oneOf",description:"Indicates exactly one field must be supplied and this field must not be `null`.",locations:[oi.INPUT_OBJECT],args:{}}),xk=Object.freeze([mk,gk,_k,vk,bk]);function wk(i){return typeof i=="object"&&typeof i?.[Symbol.iterator]=="function"}function D_(i,t){if(Gd(t)){const a=D_(i,t.ofType);return a?.kind===Rt.NULL?null:a}if(i===null)return{kind:Rt.NULL};if(i===void 0)return null;if(Ep(t)){const a=t.ofType;if(wk(i)){const d=[];for(const f of i){const g=D_(f,a);g!=null&&d.push(g)}return{kind:Rt.LIST,values:d}}return D_(i,a)}if(Ud(t)){if(!Qd(i))return null;const a=[];for(const d of Object.values(t.getFields())){const f=D_(i[d.name],d.type);f&&a.push({kind:Rt.OBJECT_FIELD,name:{kind:Rt.NAME,value:d.name},value:f})}return{kind:Rt.OBJECT,fields:a}}if(RA(t)){const a=t.serialize(i);if(a==null)return null;if(typeof a=="boolean")return{kind:Rt.BOOLEAN,value:a};if(typeof a=="number"&&Number.isFinite(a)){const d=String(a);return eS.test(d)?{kind:Rt.INT,value:d}:{kind:Rt.FLOAT,value:d}}if(typeof a=="string")return bp(t)?{kind:Rt.ENUM,value:a}:t===GA&&eS.test(a)?{kind:Rt.INT,value:a}:{kind:Rt.STRING,value:a};throw new TypeError(`Cannot convert value to AST: ${wn(a)}.`)}Cx(!1,"Unexpected input type: "+wn(t))}const eS=/^-?(?:0|[1-9][0-9]*)$/,c2=new Ap({name:"__Schema",description:"A GraphQL Schema defines the capabilities of a GraphQL server. It exposes all available types and directives on the server, as well as the entry points for query, mutation, and subscription operations.",fields:()=>({description:{type:aa,resolve:i=>i.description},types:{description:"A list of all types supported by this server.",type:new ii(new vc(new ii(vh))),resolve(i){return Object.values(i.getTypeMap())}},queryType:{description:"The type that query operations will be rooted at.",type:new ii(vh),resolve:i=>i.getQueryType()},mutationType:{description:"If this server supports mutation, the type that mutation operations will be rooted at.",type:vh,resolve:i=>i.getMutationType()},subscriptionType:{description:"If this server support subscription, the type that subscription operations will be rooted at.",type:vh,resolve:i=>i.getSubscriptionType()},directives:{description:"A list of all directives supported by this server.",type:new ii(new vc(new ii(ZA))),resolve:i=>i.getDirectives()}})}),ZA=new Ap({name:"__Directive",description:`A Directive provides a way to describe alternate runtime execution and type validation behavior in a GraphQL document.

In some cases, you need to provide options to alter GraphQL's execution behavior in ways field arguments will not suffice, such as conditionally including or skipping a field. Directives provide this by describing additional information to the executor.`,fields:()=>({name:{type:new ii(aa),resolve:i=>i.name},description:{type:aa,resolve:i=>i.description},isRepeatable:{type:new ii(Pl),resolve:i=>i.isRepeatable},locations:{type:new ii(new vc(new ii($A))),resolve:i=>i.locations},args:{type:new ii(new vc(new ii(Ox))),args:{includeDeprecated:{type:Pl,defaultValue:!1}},resolve(i,{includeDeprecated:t}){return t?i.args:i.args.filter(a=>a.deprecationReason==null)}}})}),$A=new kx({name:"__DirectiveLocation",description:"A Directive can be adjacent to many parts of the GraphQL language, a __DirectiveLocation describes one such possible adjacencies.",values:{QUERY:{value:oi.QUERY,description:"Location adjacent to a query operation."},MUTATION:{value:oi.MUTATION,description:"Location adjacent to a mutation operation."},SUBSCRIPTION:{value:oi.SUBSCRIPTION,description:"Location adjacent to a subscription operation."},FIELD:{value:oi.FIELD,description:"Location adjacent to a field."},FRAGMENT_DEFINITION:{value:oi.FRAGMENT_DEFINITION,description:"Location adjacent to a fragment definition."},FRAGMENT_SPREAD:{value:oi.FRAGMENT_SPREAD,description:"Location adjacent to a fragment spread."},INLINE_FRAGMENT:{value:oi.INLINE_FRAGMENT,description:"Location adjacent to an inline fragment."},VARIABLE_DEFINITION:{value:oi.VARIABLE_DEFINITION,description:"Location adjacent to a variable definition."},SCHEMA:{value:oi.SCHEMA,description:"Location adjacent to a schema definition."},SCALAR:{value:oi.SCALAR,description:"Location adjacent to a scalar definition."},OBJECT:{value:oi.OBJECT,description:"Location adjacent to an object type definition."},FIELD_DEFINITION:{value:oi.FIELD_DEFINITION,description:"Location adjacent to a field definition."},ARGUMENT_DEFINITION:{value:oi.ARGUMENT_DEFINITION,description:"Location adjacent to an argument definition."},INTERFACE:{value:oi.INTERFACE,description:"Location adjacent to an interface definition."},UNION:{value:oi.UNION,description:"Location adjacent to a union definition."},ENUM:{value:oi.ENUM,description:"Location adjacent to an enum definition."},ENUM_VALUE:{value:oi.ENUM_VALUE,description:"Location adjacent to an enum value definition."},INPUT_OBJECT:{value:oi.INPUT_OBJECT,description:"Location adjacent to an input object type definition."},INPUT_FIELD_DEFINITION:{value:oi.INPUT_FIELD_DEFINITION,description:"Location adjacent to an input object field definition."}}}),vh=new Ap({name:"__Type",description:"The fundamental unit of any GraphQL Schema is the type. There are many kinds of types in GraphQL as represented by the `__TypeKind` enum.\n\nDepending on the kind of a type, certain fields describe information about that type. Scalar types provide no information beyond a name, description and optional `specifiedByURL`, while Enum types provide their values. Object and Interface types provide the fields they describe. Abstract types, Union and Interface, provide the Object types possible at runtime. List and NonNull types compose other types.",fields:()=>({kind:{type:new ii(HA),resolve(i){if(Qy(i))return er.SCALAR;if(yp(i))return er.OBJECT;if(wu(i))return er.INTERFACE;if(Xm(i))return er.UNION;if(bp(i))return er.ENUM;if(Ud(i))return er.INPUT_OBJECT;if(Ep(i))return er.LIST;if(Gd(i))return er.NON_NULL;Cx(!1,`Unexpected type: "${wn(i)}".`)}},name:{type:aa,resolve:i=>"name"in i?i.name:void 0},description:{type:aa,resolve:i=>"description"in i?i.description:void 0},specifiedByURL:{type:aa,resolve:i=>"specifiedByURL"in i?i.specifiedByURL:void 0},fields:{type:new vc(new ii(YA)),args:{includeDeprecated:{type:Pl,defaultValue:!1}},resolve(i,{includeDeprecated:t}){if(yp(i)||wu(i)){const a=Object.values(i.getFields());return t?a:a.filter(d=>d.deprecationReason==null)}}},interfaces:{type:new vc(new ii(vh)),resolve(i){if(yp(i)||wu(i))return i.getInterfaces()}},possibleTypes:{type:new vc(new ii(vh)),resolve(i,t,a,{schema:d}){if(ok(i))return d.getPossibleTypes(i)}},enumValues:{type:new vc(new ii(qA)),args:{includeDeprecated:{type:Pl,defaultValue:!1}},resolve(i,{includeDeprecated:t}){if(bp(i)){const a=i.getValues();return t?a:a.filter(d=>d.deprecationReason==null)}}},inputFields:{type:new vc(new ii(Ox)),args:{includeDeprecated:{type:Pl,defaultValue:!1}},resolve(i,{includeDeprecated:t}){if(Ud(i)){const a=Object.values(i.getFields());return t?a:a.filter(d=>d.deprecationReason==null)}}},ofType:{type:vh,resolve:i=>"ofType"in i?i.ofType:void 0},isOneOf:{type:Pl,resolve:i=>{if(Ud(i))return i.isOneOf}}})}),YA=new Ap({name:"__Field",description:"Object and Interface types are described by a list of Fields, each of which has a name, potentially a list of arguments, and a return type.",fields:()=>({name:{type:new ii(aa),resolve:i=>i.name},description:{type:aa,resolve:i=>i.description},args:{type:new ii(new vc(new ii(Ox))),args:{includeDeprecated:{type:Pl,defaultValue:!1}},resolve(i,{includeDeprecated:t}){return t?i.args:i.args.filter(a=>a.deprecationReason==null)}},type:{type:new ii(vh),resolve:i=>i.type},isDeprecated:{type:new ii(Pl),resolve:i=>i.deprecationReason!=null},deprecationReason:{type:aa,resolve:i=>i.deprecationReason}})}),Ox=new Ap({name:"__InputValue",description:"Arguments provided to Fields or Directives and the input fields of an InputObject are represented as Input Values which describe their type and optionally a default value.",fields:()=>({name:{type:new ii(aa),resolve:i=>i.name},description:{type:aa,resolve:i=>i.description},type:{type:new ii(vh),resolve:i=>i.type},defaultValue:{type:aa,description:"A GraphQL-formatted string representing the default value for this input value.",resolve(i){const{type:t,defaultValue:a}=i,d=D_(a,t);return d?ys(d):null}},isDeprecated:{type:new ii(Pl),resolve:i=>i.deprecationReason!=null},deprecationReason:{type:aa,resolve:i=>i.deprecationReason}})}),qA=new Ap({name:"__EnumValue",description:"One possible value for a given Enum. Enum values are unique values, not a placeholder for a string or numeric value. However an Enum value is returned in a JSON response as a string.",fields:()=>({name:{type:new ii(aa),resolve:i=>i.name},description:{type:aa,resolve:i=>i.description},isDeprecated:{type:new ii(Pl),resolve:i=>i.deprecationReason!=null},deprecationReason:{type:aa,resolve:i=>i.deprecationReason}})});var er;(function(i){i.SCALAR="SCALAR",i.OBJECT="OBJECT",i.INTERFACE="INTERFACE",i.UNION="UNION",i.ENUM="ENUM",i.INPUT_OBJECT="INPUT_OBJECT",i.LIST="LIST",i.NON_NULL="NON_NULL"})(er||(er={}));const HA=new kx({name:"__TypeKind",description:"An enum describing what kind of type a given `__Type` is.",values:{SCALAR:{value:er.SCALAR,description:"Indicates this type is a scalar."},OBJECT:{value:er.OBJECT,description:"Indicates this type is an object. `fields` and `interfaces` are valid fields."},INTERFACE:{value:er.INTERFACE,description:"Indicates this type is an interface. `fields`, `interfaces`, and `possibleTypes` are valid fields."},UNION:{value:er.UNION,description:"Indicates this type is a union. `possibleTypes` is a valid field."},ENUM:{value:er.ENUM,description:"Indicates this type is an enum. `enumValues` is a valid field."},INPUT_OBJECT:{value:er.INPUT_OBJECT,description:"Indicates this type is an input object. `inputFields` is a valid field."},LIST:{value:er.LIST,description:"Indicates this type is a list. `ofType` is a valid field."},NON_NULL:{value:er.NON_NULL,description:"Indicates this type is a non-null. `ofType` is a valid field."}}});new ii(c2);new ii(aa);new ii(aa);const Tk=Object.freeze([c2,ZA,$A,vh,YA,Ox,qA,HA]);class Sk{constructor(t){var a,d;this.__validationErrors=t.assumeValid===!0?[]:void 0,Qd(t)||Ii(!1,"Must provide configuration object."),!t.types||Array.isArray(t.types)||Ii(!1,`"types" must be Array if provided but got: ${wn(t.types)}.`),!t.directives||Array.isArray(t.directives)||Ii(!1,`"directives" must be Array if provided but got: ${wn(t.directives)}.`),this.description=t.description,this.extensions=Cc(t.extensions),this.astNode=t.astNode,this.extensionASTNodes=(a=t.extensionASTNodes)!==null&&a!==void 0?a:[],this._queryType=t.query,this._mutationType=t.mutation,this._subscriptionType=t.subscription,this._directives=(d=t.directives)!==null&&d!==void 0?d:xk;const f=new Set(t.types);if(t.types!=null)for(const g of t.types)f.delete(g),bu(g,f);this._queryType!=null&&bu(this._queryType,f),this._mutationType!=null&&bu(this._mutationType,f),this._subscriptionType!=null&&bu(this._subscriptionType,f);for(const g of this._directives)if(pk(g))for(const _ of g.args)bu(_.type,f);bu(c2,f),this._typeMap=Object.create(null),this._subTypeMap=Object.create(null),this._implementationsMap=Object.create(null);for(const g of f){if(g==null)continue;const _=g.name;if(_||Ii(!1,"One of the provided types for building the Schema is missing a name."),this._typeMap[_]!==void 0)throw new Error(`Schema must contain uniquely named types but contains multiple types named "${_}".`);if(this._typeMap[_]=g,wu(g)){for(const c of g.getInterfaces())if(wu(c)){let A=this._implementationsMap[c.name];A===void 0&&(A=this._implementationsMap[c.name]={objects:[],interfaces:[]}),A.interfaces.push(g)}}else if(yp(g)){for(const c of g.getInterfaces())if(wu(c)){let A=this._implementationsMap[c.name];A===void 0&&(A=this._implementationsMap[c.name]={objects:[],interfaces:[]}),A.objects.push(g)}}}}get[Symbol.toStringTag](){return"GraphQLSchema"}getQueryType(){return this._queryType}getMutationType(){return this._mutationType}getSubscriptionType(){return this._subscriptionType}getRootType(t){switch(t){case Fd.QUERY:return this.getQueryType();case Fd.MUTATION:return this.getMutationType();case Fd.SUBSCRIPTION:return this.getSubscriptionType()}}getTypeMap(){return this._typeMap}getType(t){return this.getTypeMap()[t]}getPossibleTypes(t){return Xm(t)?t.getTypes():this.getImplementations(t).objects}getImplementations(t){const a=this._implementationsMap[t.name];return a??{objects:[],interfaces:[]}}isSubType(t,a){let d=this._subTypeMap[t.name];if(d===void 0){if(d=Object.create(null),Xm(t))for(const f of t.getTypes())d[f.name]=!0;else{const f=this.getImplementations(t);for(const g of f.objects)d[g.name]=!0;for(const g of f.interfaces)d[g.name]=!0}this._subTypeMap[t.name]=d}return d[a.name]!==void 0}getDirectives(){return this._directives}getDirective(t){return this.getDirectives().find(a=>a.name===t)}toConfig(){return{description:this.description,query:this.getQueryType(),mutation:this.getMutationType(),subscription:this.getSubscriptionType(),types:Object.values(this.getTypeMap()),directives:this.getDirectives(),extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes,assumeValid:this.__validationErrors!==void 0}}}function bu(i,t){const a=lk(i);if(!t.has(a)){if(t.add(a),Xm(a))for(const d of a.getTypes())bu(d,t);else if(yp(a)||wu(a)){for(const d of a.getInterfaces())bu(d,t);for(const d of Object.values(a.getFields())){bu(d.type,t);for(const f of d.args)bu(f.type,t)}}else if(Ud(a))for(const d of Object.values(a.getFields()))bu(d.type,t)}return t}function I_(i,t,a){if(i){if(i.kind===Rt.VARIABLE){i.name.value;return}if(Gd(t))return i.kind===Rt.NULL?void 0:I_(i,t.ofType,a);if(i.kind===Rt.NULL)return null;if(Ep(t)){const d=t.ofType;if(i.kind===Rt.LIST){const g=[];for(const _ of i.values)if(tS(_,a)){if(Gd(d))return;g.push(null)}else{const c=I_(_,d,a);if(c===void 0)return;g.push(c)}return g}const f=I_(i,d,a);return f===void 0?void 0:[f]}if(Ud(t)){if(i.kind!==Rt.OBJECT)return;const d=Object.create(null),f=MA(i.fields,g=>g.name.value);for(const g of Object.values(t.getFields())){const _=f[g.name];if(!_||tS(_.value,a)){if(g.defaultValue!==void 0)d[g.name]=g.defaultValue;else if(Gd(g.type))return;continue}const c=I_(_.value,g.type,a);if(c===void 0)return;d[g.name]=c}if(t.isOneOf){const g=Object.keys(d);if(g.length!==1||d[g[0]]===null)return}return d}if(RA(t)){let d;try{d=t.parseLiteral(i,a)}catch{return}return d===void 0?void 0:d}Cx(!1,"Unexpected input type: "+wn(t))}}function tS(i,t){return i.kind===Rt.VARIABLE&&t==null}function Ek(i){const t={descriptions:!0,specifiedByUrl:!1,directiveIsRepeatable:!1,schemaDescription:!1,inputValueDeprecation:!1,oneOf:!1,...i},a=t.descriptions?"description":"",d=t.specifiedByUrl?"specifiedByURL":"",f=t.directiveIsRepeatable?"isRepeatable":"",g=t.schemaDescription?a:"";function _(A){return t.inputValueDeprecation?A:""}const c=t.oneOf?"isOneOf":"";return`
    query IntrospectionQuery {
      __schema {
        ${g}
        queryType { name kind }
        mutationType { name kind }
        subscriptionType { name kind }
        types {
          ...FullType
        }
        directives {
          name
          ${a}
          ${f}
          locations
          args${_("(includeDeprecated: true)")} {
            ...InputValue
          }
        }
      }
    }

    fragment FullType on __Type {
      kind
      name
      ${a}
      ${d}
      ${c}
      fields(includeDeprecated: true) {
        name
        ${a}
        args${_("(includeDeprecated: true)")} {
          ...InputValue
        }
        type {
          ...TypeRef
        }
        isDeprecated
        deprecationReason
      }
      inputFields${_("(includeDeprecated: true)")} {
        ...InputValue
      }
      interfaces {
        ...TypeRef
      }
      enumValues(includeDeprecated: true) {
        name
        ${a}
        isDeprecated
        deprecationReason
      }
      possibleTypes {
        ...TypeRef
      }
    }

    fragment InputValue on __InputValue {
      name
      ${a}
      type { ...TypeRef }
      defaultValue
      ${_("isDeprecated")}
      ${_("deprecationReason")}
    }

    fragment TypeRef on __Type {
      kind
      name
      ofType {
        kind
        name
        ofType {
          kind
          name
          ofType {
            kind
            name
            ofType {
              kind
              name
              ofType {
                kind
                name
                ofType {
                  kind
                  name
                  ofType {
                    kind
                    name
                    ofType {
                      kind
                      name
                      ofType {
                        kind
                        name
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  `}function Ak(i,t){Qd(i)&&Qd(i.__schema)||Ii(!1,`Invalid or incomplete introspection result. Ensure that you are passing "data" property of introspection response and no "errors" was returned alongside: ${wn(i)}.`);const a=i.__schema,d=Gm(a.types,Se=>Se.name,Se=>V(Se));for(const Se of[...fk,...Tk])d[Se.name]&&(d[Se.name]=Se);const f=a.queryType?O(a.queryType):null,g=a.mutationType?O(a.mutationType):null,_=a.subscriptionType?O(a.subscriptionType):null,c=a.directives?a.directives.map(rt):[];return new Sk({description:a.description,query:f,mutation:g,subscription:_,types:Object.values(d),directives:c,assumeValid:void 0});function A(Se){if(Se.kind===er.LIST){const nt=Se.ofType;if(!nt)throw new Error("Decorated type deeper than introspection query.");return new vc(A(nt))}if(Se.kind===er.NON_NULL){const nt=Se.ofType;if(!nt)throw new Error("Decorated type deeper than introspection query.");const Mt=A(nt);return new ii(sk(Mt))}return D(Se)}function D(Se){const nt=Se.name;if(!nt)throw new Error(`Unknown type reference: ${wn(Se)}.`);const Mt=d[nt];if(!Mt)throw new Error(`Invalid or incomplete schema, unknown type: ${nt}. Ensure that a full introspection query is used in order to build a client schema.`);return Mt}function O(Se){return rk(D(Se))}function z(Se){return ak(D(Se))}function V(Se){if(Se!=null&&Se.name!=null&&Se.kind!=null)switch(Se.kind){case er.SCALAR:return H(Se);case er.OBJECT:return ae(Se);case er.INTERFACE:return q(Se);case er.UNION:return he(Se);case er.ENUM:return Ae(Se);case er.INPUT_OBJECT:return Ee(Se)}const nt=wn(Se);throw new Error(`Invalid or incomplete introspection result. Ensure that a full introspection query is used in order to build a client schema: ${nt}.`)}function H(Se){return new lg({name:Se.name,description:Se.description,specifiedByURL:Se.specifiedByURL})}function ne(Se){if(Se.interfaces===null&&Se.kind===er.INTERFACE)return[];if(!Se.interfaces){const nt=wn(Se);throw new Error(`Introspection result missing interfaces: ${nt}.`)}return Se.interfaces.map(z)}function ae(Se){return new Ap({name:Se.name,description:Se.description,interfaces:()=>ne(Se),fields:()=>Fe(Se)})}function q(Se){return new BA({name:Se.name,description:Se.description,interfaces:()=>ne(Se),fields:()=>Fe(Se)})}function he(Se){if(!Se.possibleTypes){const nt=wn(Se);throw new Error(`Introspection result missing possibleTypes: ${nt}.`)}return new VA({name:Se.name,description:Se.description,types:()=>Se.possibleTypes.map(O)})}function Ae(Se){if(!Se.enumValues){const nt=wn(Se);throw new Error(`Introspection result missing enumValues: ${nt}.`)}return new kx({name:Se.name,description:Se.description,values:Gm(Se.enumValues,nt=>nt.name,nt=>({description:nt.description,deprecationReason:nt.deprecationReason}))})}function Ee(Se){if(!Se.inputFields){const nt=wn(Se);throw new Error(`Introspection result missing inputFields: ${nt}.`)}return new UA({name:Se.name,description:Se.description,fields:()=>ke(Se.inputFields),isOneOf:Se.isOneOf})}function Fe(Se){if(!Se.fields)throw new Error(`Introspection result missing fields: ${wn(Se)}.`);return Gm(Se.fields,nt=>nt.name,De)}function De(Se){const nt=A(Se.type);if(!IA(nt)){const Mt=wn(nt);throw new Error(`Introspection must provide output type for fields, but received: ${Mt}.`)}if(!Se.args){const Mt=wn(Se);throw new Error(`Introspection result missing field args: ${Mt}.`)}return{description:Se.description,deprecationReason:Se.deprecationReason,type:nt,args:ke(Se.args)}}function ke(Se){return Gm(Se,nt=>nt.name,ze)}function ze(Se){const nt=A(Se.type);if(!DA(nt)){const Ct=wn(nt);throw new Error(`Introspection must provide input type for arguments, but received: ${Ct}.`)}const Mt=Se.defaultValue!=null?I_(UR(Se.defaultValue),nt):void 0;return{description:Se.description,type:nt,defaultValue:Mt,deprecationReason:Se.deprecationReason}}function rt(Se){if(!Se.args){const nt=wn(Se);throw new Error(`Introspection result missing directive args: ${nt}.`)}if(!Se.locations){const nt=wn(Se);throw new Error(`Introspection result missing directive locations: ${nt}.`)}return new cg({name:Se.name,description:Se.description,isRepeatable:Se.isRepeatable,locations:Se.locations.slice(),args:ke(Se.args)})}}const nS="Accept",yw="Content-Type",_w="application/json",WA="application/graphql-response+json",iS=i=>i.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),Mk=i=>{const t=i.toLowerCase();return t.includes(WA)||t.includes(_w)},rS=i=>{try{if(Array.isArray(i))return{_tag:"Batch",executionResults:i.map(aS)};if($b(i))return{_tag:"Single",executionResult:aS(i)};throw new Error(`Invalid execution result: result is not object or array. 
Got:
${String(i)}`)}catch(t){return t}},aS=i=>{if(typeof i!="object"||i===null)throw new Error("Invalid execution result: result is not object");let t,a,d;if("errors"in i){if(!$b(i.errors)&&!Array.isArray(i.errors))throw new Error("Invalid execution result: errors is not plain object OR array");t=i.errors}if("data"in i){if(!$b(i.data)&&i.data!==null)throw new Error("Invalid execution result: data is not plain object");a=i.data}if("extensions"in i){if(!$b(i.extensions))throw new Error("Invalid execution result: extensions is not plain object");d=i.extensions}return{data:a,errors:t,extensions:d}},Ck=i=>i._tag==="Batch"?i.executionResults.some(oS):oS(i.executionResult),oS=i=>Array.isArray(i.errors)?i.errors.length>0:!!i.errors,XA=i=>typeof i=="object"&&i!==null&&"kind"in i&&i.kind===Rt.OPERATION_DEFINITION,Dk=i=>{let t;const a=i.definitions.filter(XA);return a.length===1&&(t=a[0].name?.value),t},Ik=i=>{let t=!1;const a=i.definitions.filter(XA);return a.length===1&&(t=a[0].operation==="mutation"),t},F1=(i,t)=>{const a=typeof i=="string"||"kind"in i?i:String(i),d=typeof a=="string"?a:ys(a);let f=!1,g;if(t)return{expression:d,isMutation:f,operationName:g};const _=hR(()=>typeof a=="string"?SA(a):a);return _ instanceof Error?{expression:d,isMutation:f,operationName:g}:(g=Dk(_),f=Ik(_),{expression:d,operationName:g,isMutation:f})},u2=JSON,j1=async i=>{const t={...i,method:i.request._tag==="Single"?i.request.document.isMutation?"POST":$T(i.method??"post"):i.request.hasMutations?"POST":$T(i.method??"post"),fetchOptions:{...i.fetchOptions,errorPolicy:i.fetchOptions.errorPolicy??"none"}},d=await kk(t.method)(t);let f;try{f=await Rk(d,i.fetchOptions.jsonSerializer??u2)}catch(_){f=_}const g={status:d.status,headers:d.headers};if(!d.ok){if(f instanceof Error)return new $m({...g},{query:i.request._tag==="Single"?i.request.document.expression:i.request.query,variables:i.request.variables});const _=f._tag==="Batch"?{...f.executionResults,...g}:{...f.executionResult,...g};return new $m(_,{query:i.request._tag==="Single"?i.request.document.expression:i.request.query,variables:i.request.variables})}if(f instanceof Error)throw f;if(Ck(f)&&t.fetchOptions.errorPolicy==="none"){const _=f._tag==="Batch"?{...f.executionResults,...g}:{...f.executionResult,...g};return new $m(_,{query:i.request._tag==="Single"?i.request.document.expression:i.request.query,variables:i.request.variables})}switch(f._tag){case"Single":return{...g,...sS(t)(f.executionResult)};case"Batch":return{...g,data:f.executionResults.map(sS(t))};default:a2(f)}},sS=i=>t=>({extensions:t.extensions,data:t.data,errors:i.fetchOptions.errorPolicy==="all"?t.errors:void 0}),Rk=async(i,t)=>{const a=i.headers.get(yw),d=await i.text();return a&&Mk(a)?rS(t.parse(d)):rS(d)},kk=i=>async t=>{const a=new Headers(t.headers);let d=null,f;a.has(nS)||a.set(nS,[WA,_w].join(", ")),i==="POST"?(f=(t.fetchOptions.jsonSerializer??u2).stringify(Ok(t)),typeof f=="string"&&!a.has(yw)&&a.set(yw,_w)):d=Lk(t);const g={method:i,headers:a,body:f,...t.fetchOptions};let _=new URL(t.url),c=g;if(t.middleware){const D=await Promise.resolve(t.middleware({...g,url:t.url,operationName:t.request._tag==="Single"?t.request.document.operationName:void 0,variables:t.request.variables})),{url:O,...z}=D;_=new URL(O),c=z}return d&&d.forEach((D,O)=>{_.searchParams.append(O,D)}),await(t.fetch??fetch)(_,c)},Ok=i=>{switch(i.request._tag){case"Single":return{query:i.request.document.expression,variables:i.request.variables,operationName:i.request.document.operationName};case"Batch":return pA(i.request.query,i.request.variables??[]).map(([t,a])=>({query:t,variables:a}));default:throw a2(i.request)}},Lk=i=>{const t=i.fetchOptions.jsonSerializer??u2,a=new URLSearchParams;switch(i.request._tag){case"Single":return a.append("query",iS(i.request.document.expression)),i.request.variables&&a.append("variables",t.stringify(i.request.variables)),i.request.document.operationName&&a.append("operationName",i.request.document.operationName),a;case"Batch":{const d=i.request.variables?.map(_=>t.stringify(_))??[],f=i.request.query.map(iS),g=pA(f,d).map(([_,c])=>({query:_,variables:c}));return a.append("query",t.stringify(g)),a}default:throw a2(i.request)}};class Nk{url;requestConfig;constructor(t,a={}){this.url=t,this.requestConfig=a}rawRequest=async(...t)=>{const[a,d,f]=t,g=pR(a,d,f),{headers:_,fetch:c=globalThis.fetch,method:A="POST",requestMiddleware:D,responseMiddleware:O,excludeOperationName:z,...V}=this.requestConfig,{url:H}=this;g.signal!==void 0&&(V.signal=g.signal);const ne=F1(g.query,z),ae=await j1({url:H,request:{_tag:"Single",document:ne,variables:g.variables},headers:{...yy(O1(_)),...yy(g.requestHeaders)},fetch:c,method:A,fetchOptions:V,middleware:D});if(O&&await O(ae,{operationName:ne.operationName,variables:d,url:this.url}),ae instanceof Error)throw ae;return ae};async request(t,...a){const[d,f]=a,g=Pk(t,d,f),{headers:_,fetch:c=globalThis.fetch,method:A="POST",requestMiddleware:D,responseMiddleware:O,excludeOperationName:z,...V}=this.requestConfig,{url:H}=this;g.signal!==void 0&&(V.signal=g.signal);const ne=F1(g.document,z),ae=await j1({url:H,request:{_tag:"Single",document:ne,variables:g.variables},headers:{...yy(O1(_)),...yy(g.requestHeaders)},fetch:c,method:A,fetchOptions:V,middleware:D});if(O&&await O(ae,{operationName:ne.operationName,variables:g.variables,url:this.url}),ae instanceof Error)throw ae;return ae.data}async batchRequests(t,a){const d=fR(t,a),{headers:f,excludeOperationName:g,..._}=this.requestConfig;d.signal!==void 0&&(_.signal=d.signal);const c=d.documents.map(({document:V})=>F1(V,g)),A=c.map(({expression:V})=>V),D=c.some(({isMutation:V})=>V),O=d.documents.map(({variables:V})=>V),z=await j1({url:this.url,request:{_tag:"Batch",operationName:void 0,query:A,hasMutations:D,variables:O},headers:{...yy(O1(f)),...yy(d.requestHeaders)},fetch:this.requestConfig.fetch??globalThis.fetch,method:this.requestConfig.method||"POST",fetchOptions:_,middleware:this.requestConfig.requestMiddleware});if(this.requestConfig.responseMiddleware&&await this.requestConfig.responseMiddleware(z,{operationName:void 0,variables:O,url:this.url}),z instanceof Error)throw z;return z.data}setHeaders(t){return this.requestConfig.headers=t,this}setHeader(t,a){const{headers:d}=this.requestConfig;return d?d[t]=a:this.requestConfig.headers={[t]:a},this}setEndpoint(t){return this.url=t,this}}async function h2(i,t,...a){const d=zk(i,t,...a);return new Nk(d.url).request({...d})}const Pk=(i,t,a)=>i.document?i:{document:i,variables:t,requestHeaders:a,signal:void 0},zk=(i,t,...a)=>{const[d,f]=a;return typeof i=="string"?{url:i,document:t,variables:d,requestHeaders:f,signal:void 0}:i},B1="/otp/transmodel/v3",Lx=()=>{try{return new URL(B1),B1}catch{return`${window.location.origin}${B1}`}};var QA=(i=>(i.LimitToNumOfItineraries="limitToNumOfItineraries",i.LimitToSearchWindow="limitToSearchWindow",i.ListAll="listAll",i.Off="off",i))(QA||{}),Ci=(i=>(i.Air="air",i.Bicycle="bicycle",i.Bus="bus",i.Cableway="cableway",i.Car="car",i.Carpool="carpool",i.Coach="coach",i.Foot="foot",i.Funicular="funicular",i.Lift="lift",i.Metro="metro",i.Monorail="monorail",i.Rail="rail",i.Scooter="scooter",i.Taxi="taxi",i.Tram="tram",i.Trolleybus="trolleybus",i.Water="water",i))(Ci||{}),Ly=(i=>(i.Bicycle="bicycle",i.BikePark="bike_park",i.BikeRental="bike_rental",i.Car="car",i.CarPark="car_park",i.CarPickup="car_pickup",i.CarRental="car_rental",i.Carpool="carpool",i.Flexible="flexible",i.Foot="foot",i.ScooterRental="scooter_rental",i))(Ly||{}),KA=(i=>(i.Air="air",i.Bus="bus",i.Cableway="cableway",i.Coach="coach",i.Funicular="funicular",i.Lift="lift",i.Metro="metro",i.Monorail="monorail",i.Rail="rail",i.Taxi="taxi",i.Tram="tram",i.Trolleybus="trolleybus",i.Unknown="unknown",i.Water="water",i))(KA||{});const Fk={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"quayCoordinate"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"quay"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"latitude"}},{kind:"Field",name:{kind:"Name",value:"longitude"}}]}}]}}]},jk={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"serverInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"serverInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"version"}},{kind:"Field",name:{kind:"Name",value:"otpSerializationVersionId"}},{kind:"Field",name:{kind:"Name",value:"buildConfigVersion"}},{kind:"Field",name:{kind:"Name",value:"routerConfigVersion"}},{kind:"Field",name:{kind:"Name",value:"gitCommit"}},{kind:"Field",name:{kind:"Name",value:"gitBranch"}},{kind:"Field",name:{kind:"Name",value:"internalTransitModelTimeZone"}}]}}]}}]},Bk={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"authority"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authority"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},Vk={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"line"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"line"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"publicCode"}}]}}]}}]},Uk={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"quay"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"quay"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stopPlace"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]},Gk={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"trip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"accessEgressPenalty"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PenaltyForStreetMode"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alightSlackDefault"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alightSlackList"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"TransportModeSlack"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"arriveBy"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"banned"}},type:{kind:"NamedType",name:{kind:"Name",value:"InputBanned"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bicycleOptimisationMethod"}},type:{kind:"NamedType",name:{kind:"Name",value:"BicycleOptimisationMethod"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bikeSpeed"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"boardSlackDefault"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"boardSlackList"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"TransportModeSlack"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bookingTime"}},type:{kind:"NamedType",name:{kind:"Name",value:"DateTime"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"dateTime"}},type:{kind:"NamedType",name:{kind:"Name",value:"DateTime"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TripFilterInput"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"from"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Location"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ignoreRealtimeUpdates"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includePlannedCancellations"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeRealtimeCancellations"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"itineraryFilters"}},type:{kind:"NamedType",name:{kind:"Name",value:"ItineraryFilters"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locale"}},type:{kind:"NamedType",name:{kind:"Name",value:"Locale"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maxAccessEgressDurationForMode"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"StreetModeDurationInput"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maxDirectDurationForMode"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"StreetModeDurationInput"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maximumAdditionalTransfers"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maximumTransfers"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modes"}},type:{kind:"NamedType",name:{kind:"Name",value:"Modes"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numTripPatterns"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"relaxTransitGroupPriority"}},type:{kind:"NamedType",name:{kind:"Name",value:"RelaxCostInput"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"searchWindow"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"timetableView"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"to"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Location"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"transferPenalty"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"transferSlack"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"triangleFactors"}},type:{kind:"NamedType",name:{kind:"Name",value:"TriangleFactors"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"useBikeRentalAvailabilityInformation"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"via"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TripViaLocationInput"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"waitReluctance"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"walkReluctance"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"walkSpeed"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"wheelchairAccessible"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"whiteListed"}},type:{kind:"NamedType",name:{kind:"Name",value:"InputWhiteListed"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"accessEgressPenalty"},value:{kind:"Variable",name:{kind:"Name",value:"accessEgressPenalty"}}},{kind:"Argument",name:{kind:"Name",value:"alightSlackDefault"},value:{kind:"Variable",name:{kind:"Name",value:"alightSlackDefault"}}},{kind:"Argument",name:{kind:"Name",value:"alightSlackList"},value:{kind:"Variable",name:{kind:"Name",value:"alightSlackList"}}},{kind:"Argument",name:{kind:"Name",value:"arriveBy"},value:{kind:"Variable",name:{kind:"Name",value:"arriveBy"}}},{kind:"Argument",name:{kind:"Name",value:"banned"},value:{kind:"Variable",name:{kind:"Name",value:"banned"}}},{kind:"Argument",name:{kind:"Name",value:"bicycleOptimisationMethod"},value:{kind:"Variable",name:{kind:"Name",value:"bicycleOptimisationMethod"}}},{kind:"Argument",name:{kind:"Name",value:"bikeSpeed"},value:{kind:"Variable",name:{kind:"Name",value:"bikeSpeed"}}},{kind:"Argument",name:{kind:"Name",value:"boardSlackDefault"},value:{kind:"Variable",name:{kind:"Name",value:"boardSlackDefault"}}},{kind:"Argument",name:{kind:"Name",value:"boardSlackList"},value:{kind:"Variable",name:{kind:"Name",value:"boardSlackList"}}},{kind:"Argument",name:{kind:"Name",value:"bookingTime"},value:{kind:"Variable",name:{kind:"Name",value:"bookingTime"}}},{kind:"Argument",name:{kind:"Name",value:"dateTime"},value:{kind:"Variable",name:{kind:"Name",value:"dateTime"}}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}},{kind:"Argument",name:{kind:"Name",value:"from"},value:{kind:"Variable",name:{kind:"Name",value:"from"}}},{kind:"Argument",name:{kind:"Name",value:"ignoreRealtimeUpdates"},value:{kind:"Variable",name:{kind:"Name",value:"ignoreRealtimeUpdates"}}},{kind:"Argument",name:{kind:"Name",value:"includePlannedCancellations"},value:{kind:"Variable",name:{kind:"Name",value:"includePlannedCancellations"}}},{kind:"Argument",name:{kind:"Name",value:"includeRealtimeCancellations"},value:{kind:"Variable",name:{kind:"Name",value:"includeRealtimeCancellations"}}},{kind:"Argument",name:{kind:"Name",value:"itineraryFilters"},value:{kind:"Variable",name:{kind:"Name",value:"itineraryFilters"}}},{kind:"Argument",name:{kind:"Name",value:"locale"},value:{kind:"Variable",name:{kind:"Name",value:"locale"}}},{kind:"Argument",name:{kind:"Name",value:"maxAccessEgressDurationForMode"},value:{kind:"Variable",name:{kind:"Name",value:"maxAccessEgressDurationForMode"}}},{kind:"Argument",name:{kind:"Name",value:"maxDirectDurationForMode"},value:{kind:"Variable",name:{kind:"Name",value:"maxDirectDurationForMode"}}},{kind:"Argument",name:{kind:"Name",value:"maximumAdditionalTransfers"},value:{kind:"Variable",name:{kind:"Name",value:"maximumAdditionalTransfers"}}},{kind:"Argument",name:{kind:"Name",value:"maximumTransfers"},value:{kind:"Variable",name:{kind:"Name",value:"maximumTransfers"}}},{kind:"Argument",name:{kind:"Name",value:"modes"},value:{kind:"Variable",name:{kind:"Name",value:"modes"}}},{kind:"Argument",name:{kind:"Name",value:"numTripPatterns"},value:{kind:"Variable",name:{kind:"Name",value:"numTripPatterns"}}},{kind:"Argument",name:{kind:"Name",value:"pageCursor"},value:{kind:"Variable",name:{kind:"Name",value:"pageCursor"}}},{kind:"Argument",name:{kind:"Name",value:"relaxTransitGroupPriority"},value:{kind:"Variable",name:{kind:"Name",value:"relaxTransitGroupPriority"}}},{kind:"Argument",name:{kind:"Name",value:"searchWindow"},value:{kind:"Variable",name:{kind:"Name",value:"searchWindow"}}},{kind:"Argument",name:{kind:"Name",value:"timetableView"},value:{kind:"Variable",name:{kind:"Name",value:"timetableView"}}},{kind:"Argument",name:{kind:"Name",value:"to"},value:{kind:"Variable",name:{kind:"Name",value:"to"}}},{kind:"Argument",name:{kind:"Name",value:"transferPenalty"},value:{kind:"Variable",name:{kind:"Name",value:"transferPenalty"}}},{kind:"Argument",name:{kind:"Name",value:"transferSlack"},value:{kind:"Variable",name:{kind:"Name",value:"transferSlack"}}},{kind:"Argument",name:{kind:"Name",value:"triangleFactors"},value:{kind:"Variable",name:{kind:"Name",value:"triangleFactors"}}},{kind:"Argument",name:{kind:"Name",value:"useBikeRentalAvailabilityInformation"},value:{kind:"Variable",name:{kind:"Name",value:"useBikeRentalAvailabilityInformation"}}},{kind:"Argument",name:{kind:"Name",value:"via"},value:{kind:"Variable",name:{kind:"Name",value:"via"}}},{kind:"Argument",name:{kind:"Name",value:"waitReluctance"},value:{kind:"Variable",name:{kind:"Name",value:"waitReluctance"}}},{kind:"Argument",name:{kind:"Name",value:"walkReluctance"},value:{kind:"Variable",name:{kind:"Name",value:"walkReluctance"}}},{kind:"Argument",name:{kind:"Name",value:"walkSpeed"},value:{kind:"Variable",name:{kind:"Name",value:"walkSpeed"}}},{kind:"Argument",name:{kind:"Name",value:"wheelchairAccessible"},value:{kind:"Variable",name:{kind:"Name",value:"wheelchairAccessible"}}},{kind:"Argument",name:{kind:"Name",value:"whiteListed"},value:{kind:"Variable",name:{kind:"Name",value:"whiteListed"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"previousPageCursor"}},{kind:"Field",name:{kind:"Name",value:"nextPageCursor"}},{kind:"Field",name:{kind:"Name",value:"tripPatterns"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aimedStartTime"}},{kind:"Field",name:{kind:"Name",value:"aimedEndTime"}},{kind:"Field",name:{kind:"Name",value:"expectedEndTime"}},{kind:"Field",name:{kind:"Name",value:"expectedStartTime"}},{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"distance"}},{kind:"Field",name:{kind:"Name",value:"generalizedCost"}},{kind:"Field",name:{kind:"Name",value:"legs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"mode"}},{kind:"Field",name:{kind:"Name",value:"aimedStartTime"}},{kind:"Field",name:{kind:"Name",value:"aimedEndTime"}},{kind:"Field",name:{kind:"Name",value:"expectedEndTime"}},{kind:"Field",name:{kind:"Name",value:"expectedStartTime"}},{kind:"Field",name:{kind:"Name",value:"realtime"}},{kind:"Field",name:{kind:"Name",value:"distance"}},{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"generalizedCost"}},{kind:"Field",name:{kind:"Name",value:"fromPlace"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"quay"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"toPlace"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"quay"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"fromEstimatedCall"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"destinationDisplay"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"frontText"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"line"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publicCode"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"presentation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colour"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"authority"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pointsOnLink"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"points"}}]}},{kind:"Field",name:{kind:"Name",value:"interchangeTo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"staySeated"}}]}},{kind:"Field",name:{kind:"Name",value:"interchangeFrom"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"staySeated"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"systemNotices"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tag"}}]}}]}}]}}]}}]},Zk={"\n  query quayCoordinate($id: String!) {\n    quay(id: $id) {\n      latitude\n      longitude\n    }\n  }\n":Fk,"\n  query serverInfo {\n    serverInfo {\n      version\n      otpSerializationVersionId\n      buildConfigVersion\n      routerConfigVersion\n      gitCommit\n      gitBranch\n      internalTransitModelTimeZone\n    }\n  }\n":jk,"\n  query authority($id: String!) {\n    authority(id: $id) {\n      name\n      id\n    }\n  }\n":Bk,"\n  query line($id: ID!) {\n    line(id: $id) {\n      name\n      publicCode\n    }\n  }\n":Vk,"\n  query quay($id: String!) {\n    quay(id: $id) {\n      stopPlace {\n        id\n        name\n      }\n    }\n  }\n":Uk,"\nquery trip(\n  $accessEgressPenalty: [PenaltyForStreetMode!]\n  $alightSlackDefault: Int\n  $alightSlackList: [TransportModeSlack]\n  $arriveBy: Boolean\n  $banned: InputBanned\n  $bicycleOptimisationMethod: BicycleOptimisationMethod\n  $bikeSpeed: Float\n  $boardSlackDefault: Int\n  $boardSlackList: [TransportModeSlack]\n  $bookingTime: DateTime\n  $dateTime: DateTime\n  $filters: [TripFilterInput!]\n  $from: Location!\n  $ignoreRealtimeUpdates: Boolean\n  $includePlannedCancellations: Boolean\n  $includeRealtimeCancellations: Boolean\n  $itineraryFilters: ItineraryFilters\n  $locale: Locale\n  $maxAccessEgressDurationForMode: [StreetModeDurationInput!]\n  $maxDirectDurationForMode: [StreetModeDurationInput!]\n  $maximumAdditionalTransfers: Int\n  $maximumTransfers: Int\n  $modes: Modes\n  $numTripPatterns: Int\n  $pageCursor: String\n  $relaxTransitGroupPriority: RelaxCostInput\n  $searchWindow: Int\n  $timetableView: Boolean\n  $to: Location!\n  $transferPenalty: Int\n  $transferSlack: Int\n  $triangleFactors: TriangleFactors\n  $useBikeRentalAvailabilityInformation: Boolean\n  $via: [TripViaLocationInput!]\n  $waitReluctance: Float\n  $walkReluctance: Float\n  $walkSpeed: Float\n  $wheelchairAccessible: Boolean\n  $whiteListed: InputWhiteListed\n) {\n  trip(\n    accessEgressPenalty: $accessEgressPenalty\n    alightSlackDefault: $alightSlackDefault\n    alightSlackList: $alightSlackList\n    arriveBy: $arriveBy\n    banned: $banned\n    bicycleOptimisationMethod: $bicycleOptimisationMethod\n    bikeSpeed: $bikeSpeed\n    boardSlackDefault: $boardSlackDefault\n    boardSlackList: $boardSlackList\n    bookingTime: $bookingTime\n    dateTime: $dateTime\n    filters: $filters\n    from: $from\n    ignoreRealtimeUpdates: $ignoreRealtimeUpdates\n    includePlannedCancellations: $includePlannedCancellations\n    includeRealtimeCancellations: $includeRealtimeCancellations\n    itineraryFilters: $itineraryFilters\n    locale: $locale\n    maxAccessEgressDurationForMode: $maxAccessEgressDurationForMode\n    maxDirectDurationForMode: $maxDirectDurationForMode\n    maximumAdditionalTransfers: $maximumAdditionalTransfers\n    maximumTransfers: $maximumTransfers\n    modes: $modes\n    numTripPatterns: $numTripPatterns\n    pageCursor: $pageCursor\n    relaxTransitGroupPriority: $relaxTransitGroupPriority\n    searchWindow: $searchWindow\n    timetableView: $timetableView\n    to: $to\n    transferPenalty: $transferPenalty\n    transferSlack: $transferSlack\n    triangleFactors: $triangleFactors\n    useBikeRentalAvailabilityInformation: $useBikeRentalAvailabilityInformation\n    via: $via\n    waitReluctance: $waitReluctance\n    walkReluctance: $walkReluctance\n    walkSpeed: $walkSpeed\n    wheelchairAccessible: $wheelchairAccessible\n    whiteListed: $whiteListed\n  ) \n    {\n    previousPageCursor\n    nextPageCursor\n    tripPatterns {\n        aimedStartTime\n        aimedEndTime\n        expectedEndTime\n        expectedStartTime\n        duration\n        distance\n        generalizedCost\n        legs {\n            id\n            mode\n            aimedStartTime\n            aimedEndTime\n            expectedEndTime\n            expectedStartTime\n            realtime\n            distance\n            duration\n            generalizedCost\n            fromPlace {\n                name\n                quay {\n                    id\n                }\n            }\n            toPlace {\n                name\n                quay {\n                    id\n                }\n            }\n            fromEstimatedCall {\n                destinationDisplay {\n                    frontText\n                }\n            }\n            line {\n                publicCode\n                name\n                id\n                presentation {\n                    colour\n                }\n            }\n            authority {\n                name\n                id\n            }\n            pointsOnLink {\n                points\n            }\n            interchangeTo {\n                staySeated\n            }\n            interchangeFrom {\n                staySeated\n            }\n        }\n        systemNotices {\n            tag\n        }\n    }\n  }\n}":Gk};function Ky(i){return Zk[i]??{}}const $k=Ky(`
  query quayCoordinate($id: String!) {
    quay(id: $id) {
      latitude
      longitude
    }
  }
`),Yk=i=>{const[t,a]=ie.useState(null);return ie.useEffect(()=>{(async()=>{if(i.place){const f={id:i.place};try{a(await h2(Lx(),$k,f))}catch(g){console.error("Error at useQuayCoordinateQuery",g)}}else a(null)})()},[i]),t?.quay};function lS(i){const t=Yk(i);if(t){const{latitude:a,longitude:d}=t;if(a&&d)return{latitude:a,longitude:d}}if(i.coordinates)return{...i.coordinates}}function qk({setCursor:i,tripQueryVariables:t,setTripQueryVariables:a,loading:d}){const f=lS(t.from),g=lS(t.to);return Q.jsxs(Q.Fragment,{children:[f&&Q.jsx(UT,{draggable:!0,latitude:f.latitude,longitude:f.longitude,onDragStart:()=>i("grabbing"),onDragEnd:_=>{i("auto"),d||a({...t,from:{coordinates:{latitude:_.lngLat.lat,longitude:_.lngLat.lng}}})},anchor:"bottom-right",children:Q.jsx("img",{alt:"",src:lR,height:48,width:49})}),g&&Q.jsx(UT,{draggable:!0,latitude:g.latitude,longitude:g.longitude,onDragStart:()=>i("grabbing"),onDragEnd:_=>{i("auto"),d||a({...t,to:{coordinates:{latitude:_.lngLat.lat,longitude:_.lngLat.lng}}})},anchor:"bottom-right",children:Q.jsx("img",{alt:"",src:cR,height:48,width:49})})]})}var Hk=function(i,t){for(var a=Math.pow(10,t),d=i.length,f=new Array(Math.floor(i.length/2)),g=0,_=0,c=0,A=0;g<d;++A){var D=1,O=0,z=void 0;do z=i.charCodeAt(g++)-63-1,D+=z<<O,O+=5;while(z>=31);_+=D&1?~(D>>1):D>>1,D=1,O=0;do z=i.charCodeAt(g++)-63-1,D+=z<<O,O+=5;while(z>=31);c+=D&1?~(D>>1):D>>1,f[A]=[_/a,c/a]}return f.length=A,f};const Wk=function(i){return i===Ci.Foot?"#191616":i===Ci.Bicycle?"#5076D9":i===Ci.Scooter?"#14b7ca":i===Ci.Car?"#7e7e7e":i===Ci.Rail?"#86BF8B":i===Ci.Coach?"#25642A":i===Ci.Metro?"#D9B250":i===Ci.Bus?"#fe0000":i===Ci.Tram?"#D9B250":i===Ci.Trolleybus?"#25642A":i===Ci.Water||i===Ci.Air||i===Ci.Cableway||i===Ci.Funicular||i===Ci.Monorail||i===Ci.Taxi?"#81304C":"#aaa"},JA=function(i){return i.line?.presentation?.colour?`#${i.line.presentation.colour}`:Wk(i.mode)};function Xk({tripPattern:i}){return Q.jsx(Q.Fragment,{children:i?.legs.map((t,a)=>t.pointsOnLink&&Q.jsxs(nR,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:Hk(t.pointsOnLink.points,5).map(d=>d.reverse())}},children:[Q.jsx(GT,{type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#000","line-width":5}}),Q.jsx(GT,{type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":JA(t),"line-width":4}})]},t.id||`footleg_${a}`))})}const eM=(i,t,a)=>({...i,[a]:{coordinates:{latitude:t.lat,longitude:t.lng}}}),Qk=(i,t)=>eM(i,t,"from"),Kk=(i,t)=>eM(i,t,"to");function Jk({tripQueryVariables:i,setTripQueryVariables:t}){return ie.useCallback(a=>{a.preventDefault(),i.from.coordinates?t(Kk(i,a.lngLat)):t(Qk(i,a.lngLat))},[i,t])}var V1={exports:{}};var cS;function eO(){return cS||(cS=1,function(i){(function(){var t={}.hasOwnProperty;function a(){for(var g="",_=0;_<arguments.length;_++){var c=arguments[_];c&&(g=f(g,d(c)))}return g}function d(g){if(typeof g=="string"||typeof g=="number")return g;if(typeof g!="object")return"";if(Array.isArray(g))return a.apply(null,g);if(g.toString!==Object.prototype.toString&&!g.toString.toString().includes("[native code]"))return g.toString();var _="";for(var c in g)t.call(g,c)&&g[c]&&(_=f(_,c));return _}function f(g,_){return _?g?g+" "+_:g+_:g}i.exports?(a.default=a,i.exports=a):window.classNames=a})()}(V1)),V1.exports}var tO=eO();const pn=og(tO);function fn(){return fn=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var d in a)({}).hasOwnProperty.call(a,d)&&(i[d]=a[d])}return i},fn.apply(null,arguments)}function d2(i,t){if(i==null)return{};var a={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(t.indexOf(d)!==-1)continue;a[d]=i[d]}return a}function uS(i){return"default"+i.charAt(0).toUpperCase()+i.substr(1)}function nO(i){var t=iO(i,"string");return typeof t=="symbol"?t:String(t)}function iO(i,t){if(typeof i!="object"||i===null)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var d=a.call(i,t);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function rO(i,t,a){var d=ie.useRef(i!==void 0),f=ie.useState(t),g=f[0],_=f[1],c=i!==void 0,A=d.current;return d.current=c,!c&&A&&g!==t&&_(t),[c?i:g,ie.useCallback(function(D){for(var O=arguments.length,z=new Array(O>1?O-1:0),V=1;V<O;V++)z[V-1]=arguments[V];a&&a.apply(void 0,[D].concat(z)),_(D)},[a])]}function tM(i,t){return Object.keys(t).reduce(function(a,d){var f,g=a,_=g[uS(d)],c=g[d],A=d2(g,[uS(d),d].map(nO)),D=t[d],O=rO(c,_,i[D]),z=O[0],V=O[1];return fn({},A,(f={},f[d]=z,f[D]=V,f))},i)}function nx(i,t){return nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,d){return a.__proto__=d,a},nx(i,t)}function aO(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,nx(i,t)}const oO=["xxl","xl","lg","md","sm","xs"],sO="xs",pv=ie.createContext({prefixes:{},breakpoints:oO,minBreakpoint:sO}),{Consumer:nj,Provider:ij}=pv;function Ln(i,t){const{prefixes:a}=ie.useContext(pv);return i||a[t]||t}function lO(){const{breakpoints:i}=ie.useContext(pv);return i}function cO(){const{minBreakpoint:i}=ie.useContext(pv);return i}function f2(){const{dir:i}=ie.useContext(pv);return i==="rtl"}function Jy(i){return i&&i.ownerDocument||document}function uO(i){var t=Jy(i);return t&&t.defaultView||window}function hO(i,t){return uO(i).getComputedStyle(i,t)}var dO=/([A-Z])/g;function fO(i){return i.replace(dO,"-$1").toLowerCase()}var pO=/^ms-/;function kb(i){return fO(i).replace(pO,"-ms-")}var mO=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function gO(i){return!!(i&&mO.test(i))}function Zd(i,t){var a="",d="";if(typeof t=="string")return i.style.getPropertyValue(kb(t))||hO(i).getPropertyValue(kb(t));Object.keys(t).forEach(function(f){var g=t[f];!g&&g!==0?i.style.removeProperty(kb(f)):gO(f)?d+=f+"("+g+") ":a+=kb(f)+": "+g+";"}),d&&(a+="transform: "+d+";"),i.style.cssText+=";"+a}var U1={exports:{}},G1,hS;function yO(){if(hS)return G1;hS=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return G1=i,G1}var Z1,dS;function _O(){if(dS)return Z1;dS=1;var i=yO();function t(){}function a(){}return a.resetWarningCache=t,Z1=function(){function d(_,c,A,D,O,z){if(z!==i){var V=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw V.name="Invariant Violation",V}}d.isRequired=d;function f(){return d}var g={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:f,element:d,elementType:d,instanceOf:f,node:d,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:a,resetWarningCache:t};return g.PropTypes=g,g},Z1}var fS;function vO(){return fS||(fS=1,U1.exports=_O()()),U1.exports}var bO=vO();const $d=og(bO),pS={disabled:!1},nM=Nl.createContext(null);var xO=function(t){return t.scrollTop},R_="unmounted",dp="exited",xu="entering",Nd="entered",Q_="exiting",rf=function(i){aO(t,i);function t(d,f){var g;g=i.call(this,d,f)||this;var _=f,c=_&&!_.isMounting?d.enter:d.appear,A;return g.appearStatus=null,d.in?c?(A=dp,g.appearStatus=xu):A=Nd:d.unmountOnExit||d.mountOnEnter?A=R_:A=dp,g.state={status:A},g.nextCallback=null,g}t.getDerivedStateFromProps=function(f,g){var _=f.in;return _&&g.status===R_?{status:dp}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(f){var g=null;if(f!==this.props){var _=this.state.status;this.props.in?_!==xu&&_!==Nd&&(g=xu):(_===xu||_===Nd)&&(g=Q_)}this.updateStatus(!1,g)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var f=this.props.timeout,g,_,c;return g=_=c=f,f!=null&&typeof f!="number"&&(g=f.exit,_=f.enter,c=f.appear!==void 0?f.appear:_),{exit:g,enter:_,appear:c}},a.updateStatus=function(f,g){if(f===void 0&&(f=!1),g!==null)if(this.cancelNextCallback(),g===xu){if(this.props.unmountOnExit||this.props.mountOnEnter){var _=this.props.nodeRef?this.props.nodeRef.current:Um.findDOMNode(this);_&&xO(_)}this.performEnter(f)}else this.performExit();else this.props.unmountOnExit&&this.state.status===dp&&this.setState({status:R_})},a.performEnter=function(f){var g=this,_=this.props.enter,c=this.context?this.context.isMounting:f,A=this.props.nodeRef?[c]:[Um.findDOMNode(this),c],D=A[0],O=A[1],z=this.getTimeouts(),V=c?z.appear:z.enter;if(!f&&!_||pS.disabled){this.safeSetState({status:Nd},function(){g.props.onEntered(D)});return}this.props.onEnter(D,O),this.safeSetState({status:xu},function(){g.props.onEntering(D,O),g.onTransitionEnd(V,function(){g.safeSetState({status:Nd},function(){g.props.onEntered(D,O)})})})},a.performExit=function(){var f=this,g=this.props.exit,_=this.getTimeouts(),c=this.props.nodeRef?void 0:Um.findDOMNode(this);if(!g||pS.disabled){this.safeSetState({status:dp},function(){f.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Q_},function(){f.props.onExiting(c),f.onTransitionEnd(_.exit,function(){f.safeSetState({status:dp},function(){f.props.onExited(c)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(f,g){g=this.setNextCallback(g),this.setState(f,g)},a.setNextCallback=function(f){var g=this,_=!0;return this.nextCallback=function(c){_&&(_=!1,g.nextCallback=null,f(c))},this.nextCallback.cancel=function(){_=!1},this.nextCallback},a.onTransitionEnd=function(f,g){this.setNextCallback(g);var _=this.props.nodeRef?this.props.nodeRef.current:Um.findDOMNode(this),c=f==null&&!this.props.addEndListener;if(!_||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var A=this.props.nodeRef?[this.nextCallback]:[_,this.nextCallback],D=A[0],O=A[1];this.props.addEndListener(D,O)}f!=null&&setTimeout(this.nextCallback,f)},a.render=function(){var f=this.state.status;if(f===R_)return null;var g=this.props,_=g.children;g.in,g.mountOnEnter,g.unmountOnExit,g.appear,g.enter,g.exit,g.timeout,g.addEndListener,g.onEnter,g.onEntering,g.onEntered,g.onExit,g.onExiting,g.onExited,g.nodeRef;var c=d2(g,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Nl.createElement(nM.Provider,{value:null},typeof _=="function"?_(f,c):Nl.cloneElement(Nl.Children.only(_),c))},t}(Nl.Component);rf.contextType=nM;rf.propTypes={};function _y(){}rf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:_y,onEntering:_y,onEntered:_y,onExit:_y,onExiting:_y,onExited:_y};rf.UNMOUNTED=R_;rf.EXITED=dp;rf.ENTERING=xu;rf.ENTERED=Nd;rf.EXITING=Q_;function iM(i){return i.code==="Escape"||i.keyCode===27}function wO(){const i=ie.version.split(".");return{major:+i[0],minor:+i[1],patch:+i[2]}}function e0(i){if(!i||typeof i=="function")return null;const{major:t}=wO();return t>=19?i.props.ref:i.ref}const t0=!!(typeof window<"u"&&window.document&&window.document.createElement);var vw=!1,bw=!1;try{var $1={get passive(){return vw=!0},get once(){return bw=vw=!0}};t0&&(window.addEventListener("test",$1,$1),window.removeEventListener("test",$1,!0))}catch{}function rM(i,t,a,d){if(d&&typeof d!="boolean"&&!bw){var f=d.once,g=d.capture,_=a;!bw&&f&&(_=a.__once||function c(A){this.removeEventListener(t,c,g),a.call(this,A)},a.__once=_),i.addEventListener(t,_,vw?d:g)}i.addEventListener(t,a,d)}function xw(i,t,a,d){var f=d&&typeof d!="boolean"?d.capture:d;i.removeEventListener(t,a,f),a.__once&&i.removeEventListener(t,a.__once,f)}function jd(i,t,a,d){return rM(i,t,a,d),function(){xw(i,t,a,d)}}function TO(i,t,a,d){if(d===void 0&&(d=!0),i){var f=document.createEvent("HTMLEvents");f.initEvent(t,a,d),i.dispatchEvent(f)}}function SO(i){var t=Zd(i,"transitionDuration")||"",a=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*a}function EO(i,t,a){a===void 0&&(a=5);var d=!1,f=setTimeout(function(){d||TO(i,"transitionend",!0)},t+a),g=jd(i,"transitionend",function(){d=!0},{once:!0});return function(){clearTimeout(f),g()}}function aM(i,t,a,d){a==null&&(a=SO(i)||0);var f=EO(i,a,d),g=jd(i,"transitionend",t);return function(){f(),g()}}function mS(i,t){const a=Zd(i,t)||"",d=a.indexOf("ms")===-1?1e3:1;return parseFloat(a)*d}function p2(i,t){const a=mS(i,"transitionDuration"),d=mS(i,"transitionDelay"),f=aM(i,g=>{g.target===i&&(f(),t(g))},a+d)}function x_(...i){return i.filter(t=>t!=null).reduce((t,a)=>{if(typeof a!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?a:function(...f){t.apply(this,f),a.apply(this,f)}},null)}function oM(i){i.offsetHeight}const gS=i=>!i||typeof i=="function"?i:t=>{i.current=t};function AO(i,t){const a=gS(i),d=gS(t);return f=>{a&&a(f),d&&d(f)}}function m2(i,t){return ie.useMemo(()=>AO(i,t),[i,t])}function ww(i){return i&&"setState"in i?Um.findDOMNode(i):i??null}const Nx=Nl.forwardRef(({onEnter:i,onEntering:t,onEntered:a,onExit:d,onExiting:f,onExited:g,addEndListener:_,children:c,childRef:A,...D},O)=>{const z=ie.useRef(null),V=m2(z,A),H=ke=>{V(ww(ke))},ne=ke=>ze=>{ke&&z.current&&ke(z.current,ze)},ae=ie.useCallback(ne(i),[i]),q=ie.useCallback(ne(t),[t]),he=ie.useCallback(ne(a),[a]),Ae=ie.useCallback(ne(d),[d]),Ee=ie.useCallback(ne(f),[f]),Fe=ie.useCallback(ne(g),[g]),De=ie.useCallback(ne(_),[_]);return Q.jsx(rf,{ref:O,...D,onEnter:ae,onEntered:he,onEntering:q,onExit:Ae,onExited:Fe,onExiting:Ee,addEndListener:De,nodeRef:z,children:typeof c=="function"?(ke,ze)=>c(ke,{...ze,ref:H}):Nl.cloneElement(c,{ref:H})})});Nx.displayName="TransitionWrapper";const MO={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function CO(i,t){const a=`offset${i[0].toUpperCase()}${i.slice(1)}`,d=t[a],f=MO[i];return d+parseInt(Zd(t,f[0]),10)+parseInt(Zd(t,f[1]),10)}const DO={[dp]:"collapse",[Q_]:"collapsing",[xu]:"collapsing",[Nd]:"collapse show"},g2=Nl.forwardRef(({onEnter:i,onEntering:t,onEntered:a,onExit:d,onExiting:f,className:g,children:_,dimension:c="height",in:A=!1,timeout:D=300,mountOnEnter:O=!1,unmountOnExit:z=!1,appear:V=!1,getDimensionValue:H=CO,...ne},ae)=>{const q=typeof c=="function"?c():c,he=ie.useMemo(()=>x_(ke=>{ke.style[q]="0"},i),[q,i]),Ae=ie.useMemo(()=>x_(ke=>{const ze=`scroll${q[0].toUpperCase()}${q.slice(1)}`;ke.style[q]=`${ke[ze]}px`},t),[q,t]),Ee=ie.useMemo(()=>x_(ke=>{ke.style[q]=null},a),[q,a]),Fe=ie.useMemo(()=>x_(ke=>{ke.style[q]=`${H(q,ke)}px`,oM(ke)},d),[d,H,q]),De=ie.useMemo(()=>x_(ke=>{ke.style[q]=null},f),[q,f]);return Q.jsx(Nx,{ref:ae,addEndListener:p2,...ne,"aria-expanded":ne.role?A:null,onEnter:he,onEntering:Ae,onEntered:Ee,onExit:Fe,onExiting:De,childRef:e0(_),in:A,timeout:D,mountOnEnter:O,unmountOnExit:z,appear:V,children:(ke,ze)=>Nl.cloneElement(_,{...ze,className:pn(g,_.props.className,DO[ke],q==="width"&&"collapse-horizontal")})})});g2.displayName="Collapse";function sM(i,t){return Array.isArray(i)?i.includes(t):i===t}const mv=ie.createContext({});mv.displayName="AccordionContext";const y2=ie.forwardRef(({as:i="div",bsPrefix:t,className:a,children:d,eventKey:f,...g},_)=>{const{activeEventKey:c}=ie.useContext(mv);return t=Ln(t,"accordion-collapse"),Q.jsx(g2,{ref:_,in:sM(c,f),...g,className:pn(a,t),children:Q.jsx(i,{children:ie.Children.only(d)})})});y2.displayName="AccordionCollapse";const Px=ie.createContext({eventKey:""});Px.displayName="AccordionItemContext";const lM=ie.forwardRef(({as:i="div",bsPrefix:t,className:a,onEnter:d,onEntering:f,onEntered:g,onExit:_,onExiting:c,onExited:A,...D},O)=>{t=Ln(t,"accordion-body");const{eventKey:z}=ie.useContext(Px);return Q.jsx(y2,{eventKey:z,onEnter:d,onEntering:f,onEntered:g,onExit:_,onExiting:c,onExited:A,children:Q.jsx(i,{ref:O,...D,className:pn(a,t)})})});lM.displayName="AccordionBody";function IO(i,t){const{activeEventKey:a,onSelect:d,alwaysOpen:f}=ie.useContext(mv);return g=>{let _=i===a?null:i;f&&(Array.isArray(a)?a.includes(i)?_=a.filter(c=>c!==i):_=[...a,i]:_=[i]),d?.(_,g),t?.(g)}}const _2=ie.forwardRef(({as:i="button",bsPrefix:t,className:a,onClick:d,...f},g)=>{t=Ln(t,"accordion-button");const{eventKey:_}=ie.useContext(Px),c=IO(_,d),{activeEventKey:A}=ie.useContext(mv);return i==="button"&&(f.type="button"),Q.jsx(i,{ref:g,onClick:c,...f,"aria-expanded":Array.isArray(A)?A.includes(_):_===A,className:pn(a,t,!sM(A,_)&&"collapsed")})});_2.displayName="AccordionButton";const cM=ie.forwardRef(({as:i="h2","aria-controls":t,bsPrefix:a,className:d,children:f,onClick:g,..._},c)=>(a=Ln(a,"accordion-header"),Q.jsx(i,{ref:c,..._,className:pn(d,a),children:Q.jsx(_2,{onClick:g,"aria-controls":t,children:f})})));cM.displayName="AccordionHeader";const uM=ie.forwardRef(({as:i="div",bsPrefix:t,className:a,eventKey:d,...f},g)=>{t=Ln(t,"accordion-item");const _=ie.useMemo(()=>({eventKey:d}),[d]);return Q.jsx(Px.Provider,{value:_,children:Q.jsx(i,{ref:g,...f,className:pn(a,t)})})});uM.displayName="AccordionItem";const hM=ie.forwardRef((i,t)=>{const{as:a="div",activeKey:d,bsPrefix:f,className:g,onSelect:_,flush:c,alwaysOpen:A,...D}=tM(i,{activeKey:"onSelect"}),O=Ln(f,"accordion"),z=ie.useMemo(()=>({activeEventKey:d,onSelect:_,alwaysOpen:A}),[d,_,A]);return Q.jsx(mv.Provider,{value:z,children:Q.jsx(a,{ref:t,...D,className:pn(g,O,c&&`${O}-flush`)})})});hM.displayName="Accordion";const Ob=Object.assign(hM,{Button:_2,Collapse:y2,Item:uM,Header:cM,Body:lM});function RO(i){const t=ie.useRef(i);return ie.useEffect(()=>{t.current=i},[i]),t}function Qm(i){const t=RO(i);return ie.useCallback(function(...a){return t.current&&t.current(...a)},[t])}const dM=i=>ie.forwardRef((t,a)=>Q.jsx("div",{...t,ref:a,className:pn(t.className,i)}));function yS(){return ie.useState(null)}function kO(i){const t=ie.useRef(i);return ie.useEffect(()=>{t.current=i},[i]),t}function yh(i){const t=kO(i);return ie.useCallback(function(...a){return t.current&&t.current(...a)},[t])}function fM(){const i=ie.useRef(!0),t=ie.useRef(()=>i.current);return ie.useEffect(()=>(i.current=!0,()=>{i.current=!1}),[]),t.current}function OO(i){const t=ie.useRef(null);return ie.useEffect(()=>{t.current=i}),t.current}const LO=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",NO=typeof document<"u",_S=NO||LO?ie.useLayoutEffect:ie.useEffect,PO=["as","disabled"];function zO(i,t){if(i==null)return{};var a={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(t.indexOf(d)>=0)continue;a[d]=i[d]}return a}function FO(i){return!i||i.trim()==="#"}function pM({tagName:i,disabled:t,href:a,target:d,rel:f,role:g,onClick:_,tabIndex:c=0,type:A}){i||(a!=null||d!=null||f!=null?i="a":i="button");const D={tagName:i};if(i==="button")return[{type:A||"button",disabled:t},D];const O=V=>{if((t||i==="a"&&FO(a))&&V.preventDefault(),t){V.stopPropagation();return}_?.(V)},z=V=>{V.key===" "&&(V.preventDefault(),O(V))};return i==="a"&&(a||(a="#"),t&&(a=void 0)),[{role:g??"button",disabled:void 0,tabIndex:t?void 0:c,href:a,target:i==="a"?d:void 0,"aria-disabled":t||void 0,rel:i==="a"?f:void 0,onClick:O,onKeyDown:z},D]}const jO=ie.forwardRef((i,t)=>{let{as:a,disabled:d}=i,f=zO(i,PO);const[g,{tagName:_}]=pM(Object.assign({tagName:a,disabled:d},f));return Q.jsx(_,Object.assign({},f,g,{ref:t}))});jO.displayName="Button";const BO={[xu]:"show",[Nd]:"show"},Ny=ie.forwardRef(({className:i,children:t,transitionClasses:a={},onEnter:d,...f},g)=>{const _={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...f},c=ie.useCallback((A,D)=>{oM(A),d?.(A,D)},[d]);return Q.jsx(Nx,{ref:g,addEndListener:p2,..._,onEnter:c,childRef:e0(t),children:(A,D)=>ie.cloneElement(t,{...D,className:pn("fade",i,t.props.className,BO[A],a[A])})})});Ny.displayName="Fade";const VO={"aria-label":$d.string,onClick:$d.func,variant:$d.oneOf(["white"])},v2=ie.forwardRef(({className:i,variant:t,"aria-label":a="Close",...d},f)=>Q.jsx("button",{ref:f,type:"button",className:pn("btn-close",t&&`btn-close-${t}`,i),"aria-label":a,...d}));v2.displayName="CloseButton";v2.propTypes=VO;const _p=ie.forwardRef(({as:i,bsPrefix:t,variant:a="primary",size:d,active:f=!1,disabled:g=!1,className:_,...c},A)=>{const D=Ln(t,"btn"),[O,{tagName:z}]=pM({tagName:i,disabled:g,...c}),V=z;return Q.jsx(V,{...O,...c,ref:A,disabled:g,className:pn(_,D,f&&"active",a&&`${D}-${a}`,d&&`${D}-${d}`,c.href&&g&&"disabled")})});_p.displayName="Button";const b2=ie.forwardRef(({bsPrefix:i,size:t,vertical:a=!1,className:d,role:f="group",as:g="div",..._},c)=>{const A=Ln(i,"btn-group");let D=A;return a&&(D=`${A}-vertical`),Q.jsx(g,{..._,ref:c,role:f,className:pn(d,D,t&&`${A}-${t}`)})});b2.displayName="ButtonGroup";function UO(i){const t=ie.useRef(i);return t.current=i,t}function GO(i){const t=UO(i);ie.useEffect(()=>()=>t.current(),[])}function ZO(i,t){return ie.Children.toArray(i).some(a=>ie.isValidElement(a)&&a.type===t)}function $O({as:i,bsPrefix:t,className:a,...d}){t=Ln(t,"col");const f=lO(),g=cO(),_=[],c=[];return f.forEach(A=>{const D=d[A];delete d[A];let O,z,V;typeof D=="object"&&D!=null?{span:O,offset:z,order:V}=D:O=D;const H=A!==g?`-${A}`:"";O&&_.push(O===!0?`${t}${H}`:`${t}${H}-${O}`),V!=null&&c.push(`order${H}-${V}`),z!=null&&c.push(`offset${H}-${z}`)}),[{...d,className:pn(a,..._,...c)},{as:i,bsPrefix:t,spans:_}]}const mM=ie.forwardRef((i,t)=>{const[{className:a,...d},{as:f="div",bsPrefix:g,spans:_}]=$O(i);return Q.jsx(f,{...d,ref:t,className:pn(a,!_.length&&g)})});mM.displayName="Col";var YO=Function.prototype.bind.call(Function.prototype.call,[].slice);function vy(i,t){return YO(i.querySelectorAll(t))}var vS=Object.prototype.hasOwnProperty;function bS(i,t,a){for(a of i.keys())if(V_(a,t))return a}function V_(i,t){var a,d,f;if(i===t)return!0;if(i&&t&&(a=i.constructor)===t.constructor){if(a===Date)return i.getTime()===t.getTime();if(a===RegExp)return i.toString()===t.toString();if(a===Array){if((d=i.length)===t.length)for(;d--&&V_(i[d],t[d]););return d===-1}if(a===Set){if(i.size!==t.size)return!1;for(d of i)if(f=d,f&&typeof f=="object"&&(f=bS(t,f),!f)||!t.has(f))return!1;return!0}if(a===Map){if(i.size!==t.size)return!1;for(d of i)if(f=d[0],f&&typeof f=="object"&&(f=bS(t,f),!f)||!V_(d[1],t.get(f)))return!1;return!0}if(a===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(a===DataView){if((d=i.byteLength)===t.byteLength)for(;d--&&i.getInt8(d)===t.getInt8(d););return d===-1}if(ArrayBuffer.isView(i)){if((d=i.byteLength)===t.byteLength)for(;d--&&i[d]===t[d];);return d===-1}if(!a||typeof i=="object"){d=0;for(a in i)if(vS.call(i,a)&&++d&&!vS.call(t,a)||!(a in t)||!V_(i[a],t[a]))return!1;return Object.keys(t).length===d}}return i!==i&&t!==t}function qO(i){const t=fM();return[i[0],ie.useCallback(a=>{if(t())return i[1](a)},[t,i[1]])]}var Ks="top",Sc="bottom",Ec="right",Js="left",x2="auto",gv=[Ks,Sc,Ec,Js],Py="start",K_="end",HO="clippingParents",gM="viewport",w_="popper",WO="reference",xS=gv.reduce(function(i,t){return i.concat([t+"-"+Py,t+"-"+K_])},[]),yM=[].concat(gv,[x2]).reduce(function(i,t){return i.concat([t,t+"-"+Py,t+"-"+K_])},[]),XO="beforeRead",QO="read",KO="afterRead",JO="beforeMain",e3="main",t3="afterMain",n3="beforeWrite",i3="write",r3="afterWrite",a3=[XO,QO,KO,JO,e3,t3,n3,i3,r3];function Th(i){return i.split("-")[0]}function Bl(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function Km(i){var t=Bl(i).Element;return i instanceof t||i instanceof Element}function Sh(i){var t=Bl(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function w2(i){if(typeof ShadowRoot>"u")return!1;var t=Bl(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}var Ym=Math.max,ix=Math.min,zy=Math.round;function Tw(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function _M(){return!/^((?!chrome|android).)*safari/i.test(Tw())}function Fy(i,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);var d=i.getBoundingClientRect(),f=1,g=1;t&&Sh(i)&&(f=i.offsetWidth>0&&zy(d.width)/i.offsetWidth||1,g=i.offsetHeight>0&&zy(d.height)/i.offsetHeight||1);var _=Km(i)?Bl(i):window,c=_.visualViewport,A=!_M()&&a,D=(d.left+(A&&c?c.offsetLeft:0))/f,O=(d.top+(A&&c?c.offsetTop:0))/g,z=d.width/f,V=d.height/g;return{width:z,height:V,top:O,right:D+z,bottom:O+V,left:D,x:D,y:O}}function T2(i){var t=Fy(i),a=i.offsetWidth,d=i.offsetHeight;return Math.abs(t.width-a)<=1&&(a=t.width),Math.abs(t.height-d)<=1&&(d=t.height),{x:i.offsetLeft,y:i.offsetTop,width:a,height:d}}function vM(i,t){var a=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(a&&w2(a)){var d=t;do{if(d&&i.isSameNode(d))return!0;d=d.parentNode||d.host}while(d)}return!1}function xp(i){return i?(i.nodeName||"").toLowerCase():null}function Kd(i){return Bl(i).getComputedStyle(i)}function o3(i){return["table","td","th"].indexOf(xp(i))>=0}function Mp(i){return((Km(i)?i.ownerDocument:i.document)||window.document).documentElement}function zx(i){return xp(i)==="html"?i:i.assignedSlot||i.parentNode||(w2(i)?i.host:null)||Mp(i)}function wS(i){return!Sh(i)||Kd(i).position==="fixed"?null:i.offsetParent}function s3(i){var t=/firefox/i.test(Tw()),a=/Trident/i.test(Tw());if(a&&Sh(i)){var d=Kd(i);if(d.position==="fixed")return null}var f=zx(i);for(w2(f)&&(f=f.host);Sh(f)&&["html","body"].indexOf(xp(f))<0;){var g=Kd(f);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||t&&g.willChange==="filter"||t&&g.filter&&g.filter!=="none")return f;f=f.parentNode}return null}function yv(i){for(var t=Bl(i),a=wS(i);a&&o3(a)&&Kd(a).position==="static";)a=wS(a);return a&&(xp(a)==="html"||xp(a)==="body"&&Kd(a).position==="static")?t:a||s3(i)||t}function S2(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function U_(i,t,a){return Ym(i,ix(t,a))}function l3(i,t,a){var d=U_(i,t,a);return d>a?a:d}function bM(){return{top:0,right:0,bottom:0,left:0}}function xM(i){return Object.assign({},bM(),i)}function wM(i,t){return t.reduce(function(a,d){return a[d]=i,a},{})}var c3=function(t,a){return t=typeof t=="function"?t(Object.assign({},a.rects,{placement:a.placement})):t,xM(typeof t!="number"?t:wM(t,gv))};function u3(i){var t,a=i.state,d=i.name,f=i.options,g=a.elements.arrow,_=a.modifiersData.popperOffsets,c=Th(a.placement),A=S2(c),D=[Js,Ec].indexOf(c)>=0,O=D?"height":"width";if(!(!g||!_)){var z=c3(f.padding,a),V=T2(g),H=A==="y"?Ks:Js,ne=A==="y"?Sc:Ec,ae=a.rects.reference[O]+a.rects.reference[A]-_[A]-a.rects.popper[O],q=_[A]-a.rects.reference[A],he=yv(g),Ae=he?A==="y"?he.clientHeight||0:he.clientWidth||0:0,Ee=ae/2-q/2,Fe=z[H],De=Ae-V[O]-z[ne],ke=Ae/2-V[O]/2+Ee,ze=U_(Fe,ke,De),rt=A;a.modifiersData[d]=(t={},t[rt]=ze,t.centerOffset=ze-ke,t)}}function h3(i){var t=i.state,a=i.options,d=a.element,f=d===void 0?"[data-popper-arrow]":d;f!=null&&(typeof f=="string"&&(f=t.elements.popper.querySelector(f),!f)||vM(t.elements.popper,f)&&(t.elements.arrow=f))}const d3={name:"arrow",enabled:!0,phase:"main",fn:u3,effect:h3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function jy(i){return i.split("-")[1]}var f3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function p3(i,t){var a=i.x,d=i.y,f=t.devicePixelRatio||1;return{x:zy(a*f)/f||0,y:zy(d*f)/f||0}}function TS(i){var t,a=i.popper,d=i.popperRect,f=i.placement,g=i.variation,_=i.offsets,c=i.position,A=i.gpuAcceleration,D=i.adaptive,O=i.roundOffsets,z=i.isFixed,V=_.x,H=V===void 0?0:V,ne=_.y,ae=ne===void 0?0:ne,q=typeof O=="function"?O({x:H,y:ae}):{x:H,y:ae};H=q.x,ae=q.y;var he=_.hasOwnProperty("x"),Ae=_.hasOwnProperty("y"),Ee=Js,Fe=Ks,De=window;if(D){var ke=yv(a),ze="clientHeight",rt="clientWidth";if(ke===Bl(a)&&(ke=Mp(a),Kd(ke).position!=="static"&&c==="absolute"&&(ze="scrollHeight",rt="scrollWidth")),ke=ke,f===Ks||(f===Js||f===Ec)&&g===K_){Fe=Sc;var Se=z&&ke===De&&De.visualViewport?De.visualViewport.height:ke[ze];ae-=Se-d.height,ae*=A?1:-1}if(f===Js||(f===Ks||f===Sc)&&g===K_){Ee=Ec;var nt=z&&ke===De&&De.visualViewport?De.visualViewport.width:ke[rt];H-=nt-d.width,H*=A?1:-1}}var Mt=Object.assign({position:c},D&&f3),Ct=O===!0?p3({x:H,y:ae},Bl(a)):{x:H,y:ae};if(H=Ct.x,ae=Ct.y,A){var Ft;return Object.assign({},Mt,(Ft={},Ft[Fe]=Ae?"0":"",Ft[Ee]=he?"0":"",Ft.transform=(De.devicePixelRatio||1)<=1?"translate("+H+"px, "+ae+"px)":"translate3d("+H+"px, "+ae+"px, 0)",Ft))}return Object.assign({},Mt,(t={},t[Fe]=Ae?ae+"px":"",t[Ee]=he?H+"px":"",t.transform="",t))}function m3(i){var t=i.state,a=i.options,d=a.gpuAcceleration,f=d===void 0?!0:d,g=a.adaptive,_=g===void 0?!0:g,c=a.roundOffsets,A=c===void 0?!0:c,D={placement:Th(t.placement),variation:jy(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:f,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,TS(Object.assign({},D,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:_,roundOffsets:A})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,TS(Object.assign({},D,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:A})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const g3={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:m3,data:{}};var Lb={passive:!0};function y3(i){var t=i.state,a=i.instance,d=i.options,f=d.scroll,g=f===void 0?!0:f,_=d.resize,c=_===void 0?!0:_,A=Bl(t.elements.popper),D=[].concat(t.scrollParents.reference,t.scrollParents.popper);return g&&D.forEach(function(O){O.addEventListener("scroll",a.update,Lb)}),c&&A.addEventListener("resize",a.update,Lb),function(){g&&D.forEach(function(O){O.removeEventListener("scroll",a.update,Lb)}),c&&A.removeEventListener("resize",a.update,Lb)}}const _3={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:y3,data:{}};var v3={left:"right",right:"left",bottom:"top",top:"bottom"};function qb(i){return i.replace(/left|right|bottom|top/g,function(t){return v3[t]})}var b3={start:"end",end:"start"};function SS(i){return i.replace(/start|end/g,function(t){return b3[t]})}function E2(i){var t=Bl(i),a=t.pageXOffset,d=t.pageYOffset;return{scrollLeft:a,scrollTop:d}}function A2(i){return Fy(Mp(i)).left+E2(i).scrollLeft}function x3(i,t){var a=Bl(i),d=Mp(i),f=a.visualViewport,g=d.clientWidth,_=d.clientHeight,c=0,A=0;if(f){g=f.width,_=f.height;var D=_M();(D||!D&&t==="fixed")&&(c=f.offsetLeft,A=f.offsetTop)}return{width:g,height:_,x:c+A2(i),y:A}}function w3(i){var t,a=Mp(i),d=E2(i),f=(t=i.ownerDocument)==null?void 0:t.body,g=Ym(a.scrollWidth,a.clientWidth,f?f.scrollWidth:0,f?f.clientWidth:0),_=Ym(a.scrollHeight,a.clientHeight,f?f.scrollHeight:0,f?f.clientHeight:0),c=-d.scrollLeft+A2(i),A=-d.scrollTop;return Kd(f||a).direction==="rtl"&&(c+=Ym(a.clientWidth,f?f.clientWidth:0)-g),{width:g,height:_,x:c,y:A}}function M2(i){var t=Kd(i),a=t.overflow,d=t.overflowX,f=t.overflowY;return/auto|scroll|overlay|hidden/.test(a+f+d)}function TM(i){return["html","body","#document"].indexOf(xp(i))>=0?i.ownerDocument.body:Sh(i)&&M2(i)?i:TM(zx(i))}function G_(i,t){var a;t===void 0&&(t=[]);var d=TM(i),f=d===((a=i.ownerDocument)==null?void 0:a.body),g=Bl(d),_=f?[g].concat(g.visualViewport||[],M2(d)?d:[]):d,c=t.concat(_);return f?c:c.concat(G_(zx(_)))}function Sw(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function T3(i,t){var a=Fy(i,!1,t==="fixed");return a.top=a.top+i.clientTop,a.left=a.left+i.clientLeft,a.bottom=a.top+i.clientHeight,a.right=a.left+i.clientWidth,a.width=i.clientWidth,a.height=i.clientHeight,a.x=a.left,a.y=a.top,a}function ES(i,t,a){return t===gM?Sw(x3(i,a)):Km(t)?T3(t,a):Sw(w3(Mp(i)))}function S3(i){var t=G_(zx(i)),a=["absolute","fixed"].indexOf(Kd(i).position)>=0,d=a&&Sh(i)?yv(i):i;return Km(d)?t.filter(function(f){return Km(f)&&vM(f,d)&&xp(f)!=="body"}):[]}function E3(i,t,a,d){var f=t==="clippingParents"?S3(i):[].concat(t),g=[].concat(f,[a]),_=g[0],c=g.reduce(function(A,D){var O=ES(i,D,d);return A.top=Ym(O.top,A.top),A.right=ix(O.right,A.right),A.bottom=ix(O.bottom,A.bottom),A.left=Ym(O.left,A.left),A},ES(i,_,d));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function SM(i){var t=i.reference,a=i.element,d=i.placement,f=d?Th(d):null,g=d?jy(d):null,_=t.x+t.width/2-a.width/2,c=t.y+t.height/2-a.height/2,A;switch(f){case Ks:A={x:_,y:t.y-a.height};break;case Sc:A={x:_,y:t.y+t.height};break;case Ec:A={x:t.x+t.width,y:c};break;case Js:A={x:t.x-a.width,y:c};break;default:A={x:t.x,y:t.y}}var D=f?S2(f):null;if(D!=null){var O=D==="y"?"height":"width";switch(g){case Py:A[D]=A[D]-(t[O]/2-a[O]/2);break;case K_:A[D]=A[D]+(t[O]/2-a[O]/2);break}}return A}function J_(i,t){t===void 0&&(t={});var a=t,d=a.placement,f=d===void 0?i.placement:d,g=a.strategy,_=g===void 0?i.strategy:g,c=a.boundary,A=c===void 0?HO:c,D=a.rootBoundary,O=D===void 0?gM:D,z=a.elementContext,V=z===void 0?w_:z,H=a.altBoundary,ne=H===void 0?!1:H,ae=a.padding,q=ae===void 0?0:ae,he=xM(typeof q!="number"?q:wM(q,gv)),Ae=V===w_?WO:w_,Ee=i.rects.popper,Fe=i.elements[ne?Ae:V],De=E3(Km(Fe)?Fe:Fe.contextElement||Mp(i.elements.popper),A,O,_),ke=Fy(i.elements.reference),ze=SM({reference:ke,element:Ee,placement:f}),rt=Sw(Object.assign({},Ee,ze)),Se=V===w_?rt:ke,nt={top:De.top-Se.top+he.top,bottom:Se.bottom-De.bottom+he.bottom,left:De.left-Se.left+he.left,right:Se.right-De.right+he.right},Mt=i.modifiersData.offset;if(V===w_&&Mt){var Ct=Mt[f];Object.keys(nt).forEach(function(Ft){var Ut=[Ec,Sc].indexOf(Ft)>=0?1:-1,Gt=[Ks,Sc].indexOf(Ft)>=0?"y":"x";nt[Ft]+=Ct[Gt]*Ut})}return nt}function A3(i,t){t===void 0&&(t={});var a=t,d=a.placement,f=a.boundary,g=a.rootBoundary,_=a.padding,c=a.flipVariations,A=a.allowedAutoPlacements,D=A===void 0?yM:A,O=jy(d),z=O?c?xS:xS.filter(function(ne){return jy(ne)===O}):gv,V=z.filter(function(ne){return D.indexOf(ne)>=0});V.length===0&&(V=z);var H=V.reduce(function(ne,ae){return ne[ae]=J_(i,{placement:ae,boundary:f,rootBoundary:g,padding:_})[Th(ae)],ne},{});return Object.keys(H).sort(function(ne,ae){return H[ne]-H[ae]})}function M3(i){if(Th(i)===x2)return[];var t=qb(i);return[SS(i),t,SS(t)]}function C3(i){var t=i.state,a=i.options,d=i.name;if(!t.modifiersData[d]._skip){for(var f=a.mainAxis,g=f===void 0?!0:f,_=a.altAxis,c=_===void 0?!0:_,A=a.fallbackPlacements,D=a.padding,O=a.boundary,z=a.rootBoundary,V=a.altBoundary,H=a.flipVariations,ne=H===void 0?!0:H,ae=a.allowedAutoPlacements,q=t.options.placement,he=Th(q),Ae=he===q,Ee=A||(Ae||!ne?[qb(q)]:M3(q)),Fe=[q].concat(Ee).reduce(function(Tt,Nt){return Tt.concat(Th(Nt)===x2?A3(t,{placement:Nt,boundary:O,rootBoundary:z,padding:D,flipVariations:ne,allowedAutoPlacements:ae}):Nt)},[]),De=t.rects.reference,ke=t.rects.popper,ze=new Map,rt=!0,Se=Fe[0],nt=0;nt<Fe.length;nt++){var Mt=Fe[nt],Ct=Th(Mt),Ft=jy(Mt)===Py,Ut=[Ks,Sc].indexOf(Ct)>=0,Gt=Ut?"width":"height",Ge=J_(t,{placement:Mt,boundary:O,rootBoundary:z,altBoundary:V,padding:D}),ct=Ut?Ft?Ec:Js:Ft?Sc:Ks;De[Gt]>ke[Gt]&&(ct=qb(ct));var St=qb(ct),pt=[];if(g&&pt.push(Ge[Ct]<=0),c&&pt.push(Ge[ct]<=0,Ge[St]<=0),pt.every(function(Tt){return Tt})){Se=Mt,rt=!1;break}ze.set(Mt,pt)}if(rt)for(var Vt=ne?3:1,Oe=function(Nt){var zt=Fe.find(function(Kt){var rn=ze.get(Kt);if(rn)return rn.slice(0,Nt).every(function(Tn){return Tn})});if(zt)return Se=zt,"break"},et=Vt;et>0;et--){var bt=Oe(et);if(bt==="break")break}t.placement!==Se&&(t.modifiersData[d]._skip=!0,t.placement=Se,t.reset=!0)}}const D3={name:"flip",enabled:!0,phase:"main",fn:C3,requiresIfExists:["offset"],data:{_skip:!1}};function AS(i,t,a){return a===void 0&&(a={x:0,y:0}),{top:i.top-t.height-a.y,right:i.right-t.width+a.x,bottom:i.bottom-t.height+a.y,left:i.left-t.width-a.x}}function MS(i){return[Ks,Ec,Sc,Js].some(function(t){return i[t]>=0})}function I3(i){var t=i.state,a=i.name,d=t.rects.reference,f=t.rects.popper,g=t.modifiersData.preventOverflow,_=J_(t,{elementContext:"reference"}),c=J_(t,{altBoundary:!0}),A=AS(_,d),D=AS(c,f,g),O=MS(A),z=MS(D);t.modifiersData[a]={referenceClippingOffsets:A,popperEscapeOffsets:D,isReferenceHidden:O,hasPopperEscaped:z},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":O,"data-popper-escaped":z})}const R3={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:I3};function k3(i,t,a){var d=Th(i),f=[Js,Ks].indexOf(d)>=0?-1:1,g=typeof a=="function"?a(Object.assign({},t,{placement:i})):a,_=g[0],c=g[1];return _=_||0,c=(c||0)*f,[Js,Ec].indexOf(d)>=0?{x:c,y:_}:{x:_,y:c}}function O3(i){var t=i.state,a=i.options,d=i.name,f=a.offset,g=f===void 0?[0,0]:f,_=yM.reduce(function(O,z){return O[z]=k3(z,t.rects,g),O},{}),c=_[t.placement],A=c.x,D=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=A,t.modifiersData.popperOffsets.y+=D),t.modifiersData[d]=_}const L3={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:O3};function N3(i){var t=i.state,a=i.name;t.modifiersData[a]=SM({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const P3={name:"popperOffsets",enabled:!0,phase:"read",fn:N3,data:{}};function z3(i){return i==="x"?"y":"x"}function F3(i){var t=i.state,a=i.options,d=i.name,f=a.mainAxis,g=f===void 0?!0:f,_=a.altAxis,c=_===void 0?!1:_,A=a.boundary,D=a.rootBoundary,O=a.altBoundary,z=a.padding,V=a.tether,H=V===void 0?!0:V,ne=a.tetherOffset,ae=ne===void 0?0:ne,q=J_(t,{boundary:A,rootBoundary:D,padding:z,altBoundary:O}),he=Th(t.placement),Ae=jy(t.placement),Ee=!Ae,Fe=S2(he),De=z3(Fe),ke=t.modifiersData.popperOffsets,ze=t.rects.reference,rt=t.rects.popper,Se=typeof ae=="function"?ae(Object.assign({},t.rects,{placement:t.placement})):ae,nt=typeof Se=="number"?{mainAxis:Se,altAxis:Se}:Object.assign({mainAxis:0,altAxis:0},Se),Mt=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Ct={x:0,y:0};if(ke){if(g){var Ft,Ut=Fe==="y"?Ks:Js,Gt=Fe==="y"?Sc:Ec,Ge=Fe==="y"?"height":"width",ct=ke[Fe],St=ct+q[Ut],pt=ct-q[Gt],Vt=H?-rt[Ge]/2:0,Oe=Ae===Py?ze[Ge]:rt[Ge],et=Ae===Py?-rt[Ge]:-ze[Ge],bt=t.elements.arrow,Tt=H&&bt?T2(bt):{width:0,height:0},Nt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:bM(),zt=Nt[Ut],Kt=Nt[Gt],rn=U_(0,ze[Ge],Tt[Ge]),Tn=Ee?ze[Ge]/2-Vt-rn-zt-nt.mainAxis:Oe-rn-zt-nt.mainAxis,qi=Ee?-ze[Ge]/2+Vt+rn+Kt+nt.mainAxis:et+rn+Kt+nt.mainAxis,tr=t.elements.arrow&&yv(t.elements.arrow),Ri=tr?Fe==="y"?tr.clientTop||0:tr.clientLeft||0:0,Hr=(Ft=Mt?.[Fe])!=null?Ft:0,bn=ct+Tn-Hr-Ri,xn=ct+qi-Hr,gr=U_(H?ix(St,bn):St,ct,H?Ym(pt,xn):pt);ke[Fe]=gr,Ct[Fe]=gr-ct}if(c){var Wn,ba=Fe==="x"?Ks:Js,oa=Fe==="x"?Sc:Ec,jr=ke[De],Wr=De==="y"?"height":"width",xa=jr+q[ba],Qa=jr-q[oa],ki=[Ks,Js].indexOf(he)!==-1,Sr=(Wn=Mt?.[De])!=null?Wn:0,Cn=ki?xa:jr-ze[Wr]-rt[Wr]-Sr+nt.altAxis,sa=ki?jr+ze[Wr]+rt[Wr]-Sr-nt.altAxis:Qa,la=H&&ki?l3(Cn,jr,sa):U_(H?Cn:xa,jr,H?sa:Qa);ke[De]=la,Ct[De]=la-jr}t.modifiersData[d]=Ct}}const j3={name:"preventOverflow",enabled:!0,phase:"main",fn:F3,requiresIfExists:["offset"]};function B3(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function V3(i){return i===Bl(i)||!Sh(i)?E2(i):B3(i)}function U3(i){var t=i.getBoundingClientRect(),a=zy(t.width)/i.offsetWidth||1,d=zy(t.height)/i.offsetHeight||1;return a!==1||d!==1}function G3(i,t,a){a===void 0&&(a=!1);var d=Sh(t),f=Sh(t)&&U3(t),g=Mp(t),_=Fy(i,f,a),c={scrollLeft:0,scrollTop:0},A={x:0,y:0};return(d||!d&&!a)&&((xp(t)!=="body"||M2(g))&&(c=V3(t)),Sh(t)?(A=Fy(t,!0),A.x+=t.clientLeft,A.y+=t.clientTop):g&&(A.x=A2(g))),{x:_.left+c.scrollLeft-A.x,y:_.top+c.scrollTop-A.y,width:_.width,height:_.height}}function Z3(i){var t=new Map,a=new Set,d=[];i.forEach(function(g){t.set(g.name,g)});function f(g){a.add(g.name);var _=[].concat(g.requires||[],g.requiresIfExists||[]);_.forEach(function(c){if(!a.has(c)){var A=t.get(c);A&&f(A)}}),d.push(g)}return i.forEach(function(g){a.has(g.name)||f(g)}),d}function $3(i){var t=Z3(i);return a3.reduce(function(a,d){return a.concat(t.filter(function(f){return f.phase===d}))},[])}function Y3(i){var t;return function(){return t||(t=new Promise(function(a){Promise.resolve().then(function(){t=void 0,a(i())})})),t}}function q3(i){var t=i.reduce(function(a,d){var f=a[d.name];return a[d.name]=f?Object.assign({},f,d,{options:Object.assign({},f.options,d.options),data:Object.assign({},f.data,d.data)}):d,a},{});return Object.keys(t).map(function(a){return t[a]})}var CS={placement:"bottom",modifiers:[],strategy:"absolute"};function DS(){for(var i=arguments.length,t=new Array(i),a=0;a<i;a++)t[a]=arguments[a];return!t.some(function(d){return!(d&&typeof d.getBoundingClientRect=="function")})}function H3(i){i===void 0&&(i={});var t=i,a=t.defaultModifiers,d=a===void 0?[]:a,f=t.defaultOptions,g=f===void 0?CS:f;return function(c,A,D){D===void 0&&(D=g);var O={placement:"bottom",orderedModifiers:[],options:Object.assign({},CS,g),modifiersData:{},elements:{reference:c,popper:A},attributes:{},styles:{}},z=[],V=!1,H={state:O,setOptions:function(he){var Ae=typeof he=="function"?he(O.options):he;ae(),O.options=Object.assign({},g,O.options,Ae),O.scrollParents={reference:Km(c)?G_(c):c.contextElement?G_(c.contextElement):[],popper:G_(A)};var Ee=$3(q3([].concat(d,O.options.modifiers)));return O.orderedModifiers=Ee.filter(function(Fe){return Fe.enabled}),ne(),H.update()},forceUpdate:function(){if(!V){var he=O.elements,Ae=he.reference,Ee=he.popper;if(DS(Ae,Ee)){O.rects={reference:G3(Ae,yv(Ee),O.options.strategy==="fixed"),popper:T2(Ee)},O.reset=!1,O.placement=O.options.placement,O.orderedModifiers.forEach(function(nt){return O.modifiersData[nt.name]=Object.assign({},nt.data)});for(var Fe=0;Fe<O.orderedModifiers.length;Fe++){if(O.reset===!0){O.reset=!1,Fe=-1;continue}var De=O.orderedModifiers[Fe],ke=De.fn,ze=De.options,rt=ze===void 0?{}:ze,Se=De.name;typeof ke=="function"&&(O=ke({state:O,options:rt,name:Se,instance:H})||O)}}}},update:Y3(function(){return new Promise(function(q){H.forceUpdate(),q(O)})}),destroy:function(){ae(),V=!0}};if(!DS(c,A))return H;H.setOptions(D).then(function(q){!V&&D.onFirstUpdate&&D.onFirstUpdate(q)});function ne(){O.orderedModifiers.forEach(function(q){var he=q.name,Ae=q.options,Ee=Ae===void 0?{}:Ae,Fe=q.effect;if(typeof Fe=="function"){var De=Fe({state:O,name:he,instance:H,options:Ee}),ke=function(){};z.push(De||ke)}})}function ae(){z.forEach(function(q){return q()}),z=[]}return H}}const W3=H3({defaultModifiers:[R3,P3,g3,_3,L3,D3,j3,d3]}),X3=["enabled","placement","strategy","modifiers"];function Q3(i,t){if(i==null)return{};var a={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(t.indexOf(d)>=0)continue;a[d]=i[d]}return a}const K3={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},J3={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:i})=>()=>{const{reference:t,popper:a}=i.elements;if("removeAttribute"in t){const d=(t.getAttribute("aria-describedby")||"").split(",").filter(f=>f.trim()!==a.id);d.length?t.setAttribute("aria-describedby",d.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:i})=>{var t;const{popper:a,reference:d}=i.elements,f=(t=a.getAttribute("role"))==null?void 0:t.toLowerCase();if(a.id&&f==="tooltip"&&"setAttribute"in d){const g=d.getAttribute("aria-describedby");if(g&&g.split(",").indexOf(a.id)!==-1)return;d.setAttribute("aria-describedby",g?`${g},${a.id}`:a.id)}}},eL=[];function tL(i,t,a={}){let{enabled:d=!0,placement:f="bottom",strategy:g="absolute",modifiers:_=eL}=a,c=Q3(a,X3);const A=ie.useRef(_),D=ie.useRef(),O=ie.useCallback(()=>{var q;(q=D.current)==null||q.update()},[]),z=ie.useCallback(()=>{var q;(q=D.current)==null||q.forceUpdate()},[]),[V,H]=qO(ie.useState({placement:f,update:O,forceUpdate:z,attributes:{},styles:{popper:{},arrow:{}}})),ne=ie.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:q})=>{const he={},Ae={};Object.keys(q.elements).forEach(Ee=>{he[Ee]=q.styles[Ee],Ae[Ee]=q.attributes[Ee]}),H({state:q,styles:he,attributes:Ae,update:O,forceUpdate:z,placement:q.placement})}}),[O,z,H]),ae=ie.useMemo(()=>(V_(A.current,_)||(A.current=_),A.current),[_]);return ie.useEffect(()=>{!D.current||!d||D.current.setOptions({placement:f,strategy:g,modifiers:[...ae,ne,K3]})},[g,f,ne,d,ae]),ie.useEffect(()=>{if(!(!d||i==null||t==null))return D.current=W3(i,t,Object.assign({},c,{placement:f,strategy:g,modifiers:[...ae,J3,ne]})),()=>{D.current!=null&&(D.current.destroy(),D.current=void 0,H(q=>Object.assign({},q,{attributes:{},styles:{popper:{}}})))}},[d,i,t]),V}function rx(i,t){if(i.contains)return i.contains(t);if(i.compareDocumentPosition)return i===t||!!(i.compareDocumentPosition(t)&16)}var Y1,IS;function nL(){if(IS)return Y1;IS=1;var i=function(){};return Y1=i,Y1}var iL=nL();const rL=og(iL),RS=()=>{};function aL(i){return i.button===0}function oL(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}const Hb=i=>i&&("current"in i?i.current:i),kS={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function sL(i,t=RS,{disabled:a,clickTrigger:d="click"}={}){const f=ie.useRef(!1),g=ie.useRef(!1),_=ie.useCallback(D=>{const O=Hb(i);rL(!!O,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),f.current=!O||oL(D)||!aL(D)||!!rx(O,D.target)||g.current,g.current=!1},[i]),c=yh(D=>{const O=Hb(i);O&&rx(O,D.target)?g.current=!0:g.current=!1}),A=yh(D=>{f.current||t(D)});ie.useEffect(()=>{var D,O;if(a||i==null)return;const z=Jy(Hb(i)),V=z.defaultView||window;let H=(D=V.event)!=null?D:(O=V.parent)==null?void 0:O.event,ne=null;kS[d]&&(ne=jd(z,kS[d],c,!0));const ae=jd(z,d,_,!0),q=jd(z,d,Ae=>{if(Ae===H){H=void 0;return}A(Ae)});let he=[];return"ontouchstart"in z.documentElement&&(he=[].slice.call(z.body.children).map(Ae=>jd(Ae,"mousemove",RS))),()=>{ne?.(),ae(),q(),he.forEach(Ae=>Ae())}},[i,a,d,_,c,A])}function lL(i){const t={};return Array.isArray(i)?(i?.forEach(a=>{t[a.name]=a}),t):i||t}function cL(i={}){return Array.isArray(i)?i:Object.keys(i).map(t=>(i[t].name=t,i[t]))}function uL({enabled:i,enableEvents:t,placement:a,flip:d,offset:f,fixed:g,containerPadding:_,arrowElement:c,popperConfig:A={}}){var D,O,z,V;const H=lL(A.modifiers);return Object.assign({},A,{placement:a,enabled:i,strategy:g?"fixed":A.strategy,modifiers:cL(Object.assign({},H,{eventListeners:{enabled:t,options:(D=H.eventListeners)==null?void 0:D.options},preventOverflow:Object.assign({},H.preventOverflow,{options:Object.assign({padding:_},(O=H.preventOverflow)==null?void 0:O.options)}),offset:{options:Object.assign({offset:f},(z=H.offset)==null?void 0:z.options)},arrow:Object.assign({},H.arrow,{enabled:!!c,options:Object.assign({},(V=H.arrow)==null?void 0:V.options,{element:c})}),flip:Object.assign({enabled:!!d},H.flip)}))})}const hL=ie.createContext(null),dL="data-rr-ui-";function fL(i){return`${dL}${i}`}const EM=ie.createContext(t0?window:void 0);EM.Provider;function C2(){return ie.useContext(EM)}const pL=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",mL=typeof document<"u",AM=mL||pL?ie.useLayoutEffect:ie.useEffect,_v=ie.createContext(null);_v.displayName="NavbarContext";const gL={type:$d.string,tooltip:$d.bool,as:$d.elementType},Fx=ie.forwardRef(({as:i="div",className:t,type:a="valid",tooltip:d=!1,...f},g)=>Q.jsx(i,{...f,ref:g,className:pn(t,`${a}-${d?"tooltip":"feedback"}`)}));Fx.displayName="Feedback";Fx.propTypes=gL;const Jd=ie.createContext({}),D2=ie.forwardRef(({id:i,bsPrefix:t,className:a,type:d="checkbox",isValid:f=!1,isInvalid:g=!1,as:_="input",...c},A)=>{const{controlId:D}=ie.useContext(Jd);return t=Ln(t,"form-check-input"),Q.jsx(_,{...c,ref:A,type:d,id:i||D,className:pn(a,t,f&&"is-valid",g&&"is-invalid")})});D2.displayName="FormCheckInput";const ax=ie.forwardRef(({bsPrefix:i,className:t,htmlFor:a,...d},f)=>{const{controlId:g}=ie.useContext(Jd);return i=Ln(i,"form-check-label"),Q.jsx("label",{...d,ref:f,htmlFor:a||g,className:pn(t,i)})});ax.displayName="FormCheckLabel";const MM=ie.forwardRef(({id:i,bsPrefix:t,bsSwitchPrefix:a,inline:d=!1,reverse:f=!1,disabled:g=!1,isValid:_=!1,isInvalid:c=!1,feedbackTooltip:A=!1,feedback:D,feedbackType:O,className:z,style:V,title:H="",type:ne="checkbox",label:ae,children:q,as:he="input",...Ae},Ee)=>{t=Ln(t,"form-check"),a=Ln(a,"form-switch");const{controlId:Fe}=ie.useContext(Jd),De=ie.useMemo(()=>({controlId:i||Fe}),[Fe,i]),ke=!q&&ae!=null&&ae!==!1||ZO(q,ax),ze=Q.jsx(D2,{...Ae,type:ne==="switch"?"checkbox":ne,ref:Ee,isValid:_,isInvalid:c,disabled:g,as:he});return Q.jsx(Jd.Provider,{value:De,children:Q.jsx("div",{style:V,className:pn(z,ke&&t,d&&`${t}-inline`,f&&`${t}-reverse`,ne==="switch"&&a),children:q||Q.jsxs(Q.Fragment,{children:[ze,ke&&Q.jsx(ax,{title:H,children:ae}),D&&Q.jsx(Fx,{type:O,tooltip:A,children:D})]})})})});MM.displayName="FormCheck";const ox=Object.assign(MM,{Input:D2,Label:ax}),CM=ie.forwardRef(({bsPrefix:i,type:t,size:a,htmlSize:d,id:f,className:g,isValid:_=!1,isInvalid:c=!1,plaintext:A,readOnly:D,as:O="input",...z},V)=>{const{controlId:H}=ie.useContext(Jd);return i=Ln(i,"form-control"),Q.jsx(O,{...z,type:t,size:d,ref:V,readOnly:D,id:f||H,className:pn(g,A?`${i}-plaintext`:i,a&&`${i}-${a}`,t==="color"&&`${i}-color`,_&&"is-valid",c&&"is-invalid")})});CM.displayName="FormControl";const yL=Object.assign(CM,{Feedback:Fx}),DM=ie.forwardRef(({className:i,bsPrefix:t,as:a="div",...d},f)=>(t=Ln(t,"form-floating"),Q.jsx(a,{ref:f,className:pn(i,t),...d})));DM.displayName="FormFloating";const I2=ie.forwardRef(({controlId:i,as:t="div",...a},d)=>{const f=ie.useMemo(()=>({controlId:i}),[i]);return Q.jsx(Jd.Provider,{value:f,children:Q.jsx(t,{...a,ref:d})})});I2.displayName="FormGroup";const IM=ie.forwardRef(({as:i="label",bsPrefix:t,column:a=!1,visuallyHidden:d=!1,className:f,htmlFor:g,..._},c)=>{const{controlId:A}=ie.useContext(Jd);t=Ln(t,"form-label");let D="col-form-label";typeof a=="string"&&(D=`${D} ${D}-${a}`);const O=pn(f,t,d&&"visually-hidden",a&&D);return g=g||A,a?Q.jsx(mM,{ref:c,as:"label",className:O,htmlFor:g,..._}):Q.jsx(i,{ref:c,className:O,htmlFor:g,..._})});IM.displayName="FormLabel";const RM=ie.forwardRef(({bsPrefix:i,className:t,id:a,...d},f)=>{const{controlId:g}=ie.useContext(Jd);return i=Ln(i,"form-range"),Q.jsx("input",{...d,type:"range",ref:f,className:pn(t,i),id:a||g})});RM.displayName="FormRange";const kM=ie.forwardRef(({bsPrefix:i,size:t,htmlSize:a,className:d,isValid:f=!1,isInvalid:g=!1,id:_,...c},A)=>{const{controlId:D}=ie.useContext(Jd);return i=Ln(i,"form-select"),Q.jsx("select",{...c,size:a,ref:A,className:pn(d,i,t&&`${i}-${t}`,f&&"is-valid",g&&"is-invalid"),id:_||D})});kM.displayName="FormSelect";const OM=ie.forwardRef(({bsPrefix:i,className:t,as:a="small",muted:d,...f},g)=>(i=Ln(i,"form-text"),Q.jsx(a,{...f,ref:g,className:pn(t,i,d&&"text-muted")})));OM.displayName="FormText";const LM=ie.forwardRef((i,t)=>Q.jsx(ox,{...i,ref:t,type:"switch"}));LM.displayName="Switch";const _L=Object.assign(LM,{Input:ox.Input,Label:ox.Label}),NM=ie.forwardRef(({bsPrefix:i,className:t,children:a,controlId:d,label:f,...g},_)=>(i=Ln(i,"form-floating"),Q.jsxs(I2,{ref:_,className:pn(t,i),controlId:d,...g,children:[a,Q.jsx("label",{htmlFor:d,children:f})]})));NM.displayName="FloatingLabel";const vL={_ref:$d.any,validated:$d.bool,as:$d.elementType},R2=ie.forwardRef(({className:i,validated:t,as:a="form",...d},f)=>Q.jsx(a,{...d,ref:f,className:pn(i,t&&"was-validated")}));R2.displayName="Form";R2.propTypes=vL;const Pi=Object.assign(R2,{Group:I2,Control:yL,Floating:DM,Check:ox,Switch:_L,Label:IM,Text:OM,Range:RM,Select:kM,FloatingLabel:NM}),OS=i=>!i||typeof i=="function"?i:t=>{i.current=t};function bL(i,t){const a=OS(i),d=OS(t);return f=>{a&&a(f),d&&d(f)}}function jx(i,t){return ie.useMemo(()=>bL(i,t),[i,t])}var Nb;function LS(i){if((!Nb&&Nb!==0||i)&&t0){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Nb=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Nb}function xL(){return ie.useState(null)}function q1(i){i===void 0&&(i=Jy());try{var t=i.activeElement;return!t||!t.nodeName?null:t}catch{return i.body}}function wL(i){const t=ie.useRef(i);return t.current=i,t}function TL(i){const t=wL(i);ie.useEffect(()=>()=>t.current(),[])}function SL(i=document){const t=i.defaultView;return Math.abs(t.innerWidth-i.documentElement.clientWidth)}const NS=fL("modal-open");class k2{constructor({ownerDocument:t,handleContainerOverflow:a=!0,isRTL:d=!1}={}){this.handleContainerOverflow=a,this.isRTL=d,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return SL(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const a={overflow:"hidden"},d=this.isRTL?"paddingLeft":"paddingRight",f=this.getElement();t.style={overflow:f.style.overflow,[d]:f.style[d]},t.scrollBarWidth&&(a[d]=`${parseInt(Zd(f,d)||"0",10)+t.scrollBarWidth}px`),f.setAttribute(NS,""),Zd(f,a)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const a=this.getElement();a.removeAttribute(NS),Object.assign(a.style,t.style)}add(t){let a=this.modals.indexOf(t);return a!==-1||(a=this.modals.length,this.modals.push(t),this.setModalAttributes(t),a!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),a}remove(t){const a=this.modals.indexOf(t);a!==-1&&(this.modals.splice(a,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const H1=(i,t)=>t0?i==null?(t||Jy()).body:(typeof i=="function"&&(i=i()),i&&"current"in i&&(i=i.current),i&&("nodeType"in i||i.getBoundingClientRect)?i:null):null;function Ew(i,t){const a=C2(),[d,f]=ie.useState(()=>H1(i,a?.document));if(!d){const g=H1(i);g&&f(g)}return ie.useEffect(()=>{},[t,d]),ie.useEffect(()=>{const g=H1(i);g!==d&&f(g)},[i,d]),d}function EL({children:i,in:t,onExited:a,mountOnEnter:d,unmountOnExit:f}){const g=ie.useRef(null),_=ie.useRef(t),c=yh(a);ie.useEffect(()=>{t?_.current=!0:c(g.current)},[t,c]);const A=jx(g,e0(i)),D=ie.cloneElement(i,{ref:A});return t?D:f||!_.current&&d?null:D}const AL=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function ML(i,t){if(i==null)return{};var a={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(t.indexOf(d)>=0)continue;a[d]=i[d]}return a}function CL(i){let{onEnter:t,onEntering:a,onEntered:d,onExit:f,onExiting:g,onExited:_,addEndListener:c,children:A}=i,D=ML(i,AL);const O=ie.useRef(null),z=jx(O,e0(A)),V=Fe=>De=>{Fe&&O.current&&Fe(O.current,De)},H=ie.useCallback(V(t),[t]),ne=ie.useCallback(V(a),[a]),ae=ie.useCallback(V(d),[d]),q=ie.useCallback(V(f),[f]),he=ie.useCallback(V(g),[g]),Ae=ie.useCallback(V(_),[_]),Ee=ie.useCallback(V(c),[c]);return Object.assign({},D,{nodeRef:O},t&&{onEnter:H},a&&{onEntering:ne},d&&{onEntered:ae},f&&{onExit:q},g&&{onExiting:he},_&&{onExited:Ae},c&&{addEndListener:Ee},{children:typeof A=="function"?(Fe,De)=>A(Fe,Object.assign({},De,{ref:z})):ie.cloneElement(A,{ref:z})})}const DL=["component"];function IL(i,t){if(i==null)return{};var a={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(t.indexOf(d)>=0)continue;a[d]=i[d]}return a}const RL=ie.forwardRef((i,t)=>{let{component:a}=i,d=IL(i,DL);const f=CL(d);return Q.jsx(a,Object.assign({ref:t},f))});function kL({in:i,onTransition:t}){const a=ie.useRef(null),d=ie.useRef(!0),f=yh(t);return _S(()=>{if(!a.current)return;let g=!1;return f({in:i,element:a.current,initial:d.current,isStale:()=>g}),()=>{g=!0}},[i,f]),_S(()=>(d.current=!1,()=>{d.current=!0}),[]),a}function OL({children:i,in:t,onExited:a,onEntered:d,transition:f}){const[g,_]=ie.useState(!t);t&&g&&_(!1);const c=kL({in:!!t,onTransition:D=>{const O=()=>{D.isStale()||(D.in?d?.(D.element,D.initial):(_(!0),a?.(D.element)))};Promise.resolve(f(D)).then(O,z=>{throw D.in||_(!0),z})}}),A=jx(c,e0(i));return g&&!t?null:ie.cloneElement(i,{ref:A})}function Aw(i,t,a){return i?Q.jsx(RL,Object.assign({},a,{component:i})):t?Q.jsx(OL,Object.assign({},a,{transition:t})):Q.jsx(EL,Object.assign({},a))}const LL=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function NL(i,t){if(i==null)return{};var a={};for(var d in i)if({}.hasOwnProperty.call(i,d)){if(t.indexOf(d)>=0)continue;a[d]=i[d]}return a}let W1;function PL(i){return W1||(W1=new k2({ownerDocument:i?.document})),W1}function zL(i){const t=C2(),a=i||PL(t),d=ie.useRef({dialog:null,backdrop:null});return Object.assign(d.current,{add:()=>a.add(d.current),remove:()=>a.remove(d.current),isTopModal:()=>a.isTopModal(d.current),setDialogRef:ie.useCallback(f=>{d.current.dialog=f},[]),setBackdropRef:ie.useCallback(f=>{d.current.backdrop=f},[])})}const PM=ie.forwardRef((i,t)=>{let{show:a=!1,role:d="dialog",className:f,style:g,children:_,backdrop:c=!0,keyboard:A=!0,onBackdropClick:D,onEscapeKeyDown:O,transition:z,runTransition:V,backdropTransition:H,runBackdropTransition:ne,autoFocus:ae=!0,enforceFocus:q=!0,restoreFocus:he=!0,restoreFocusOptions:Ae,renderDialog:Ee,renderBackdrop:Fe=xn=>Q.jsx("div",Object.assign({},xn)),manager:De,container:ke,onShow:ze,onHide:rt=()=>{},onExit:Se,onExited:nt,onExiting:Mt,onEnter:Ct,onEntering:Ft,onEntered:Ut}=i,Gt=NL(i,LL);const Ge=C2(),ct=Ew(ke),St=zL(De),pt=fM(),Vt=OO(a),[Oe,et]=ie.useState(!a),bt=ie.useRef(null);ie.useImperativeHandle(t,()=>St,[St]),t0&&!Vt&&a&&(bt.current=q1(Ge?.document)),a&&Oe&&et(!1);const Tt=yh(()=>{if(St.add(),qi.current=jd(document,"keydown",rn),Tn.current=jd(document,"focus",()=>setTimeout(zt),!0),ze&&ze(),ae){var xn,gr;const Wn=q1((xn=(gr=St.dialog)==null?void 0:gr.ownerDocument)!=null?xn:Ge?.document);St.dialog&&Wn&&!rx(St.dialog,Wn)&&(bt.current=Wn,St.dialog.focus())}}),Nt=yh(()=>{if(St.remove(),qi.current==null||qi.current(),Tn.current==null||Tn.current(),he){var xn;(xn=bt.current)==null||xn.focus==null||xn.focus(Ae),bt.current=null}});ie.useEffect(()=>{!a||!ct||Tt()},[a,ct,Tt]),ie.useEffect(()=>{Oe&&Nt()},[Oe,Nt]),TL(()=>{Nt()});const zt=yh(()=>{if(!q||!pt()||!St.isTopModal())return;const xn=q1(Ge?.document);St.dialog&&xn&&!rx(St.dialog,xn)&&St.dialog.focus()}),Kt=yh(xn=>{xn.target===xn.currentTarget&&(D?.(xn),c===!0&&rt())}),rn=yh(xn=>{A&&iM(xn)&&St.isTopModal()&&(O?.(xn),xn.defaultPrevented||rt())}),Tn=ie.useRef(),qi=ie.useRef(),tr=(...xn)=>{et(!0),nt?.(...xn)};if(!ct)return null;const Ri=Object.assign({role:d,ref:St.setDialogRef,"aria-modal":d==="dialog"?!0:void 0},Gt,{style:g,className:f,tabIndex:-1});let Hr=Ee?Ee(Ri):Q.jsx("div",Object.assign({},Ri,{children:ie.cloneElement(_,{role:"document"})}));Hr=Aw(z,V,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!a,onExit:Se,onExiting:Mt,onExited:tr,onEnter:Ct,onEntering:Ft,onEntered:Ut,children:Hr});let bn=null;return c&&(bn=Fe({ref:St.setBackdropRef,onClick:Kt}),bn=Aw(H,ne,{in:!!a,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:bn})),Q.jsx(Q.Fragment,{children:Um.createPortal(Q.jsxs(Q.Fragment,{children:[bn,Hr]}),ct)})});PM.displayName="Modal";const zM=Object.assign(PM,{Manager:k2});function Mw(i,t){return i.classList?!!t&&i.classList.contains(t):(" "+(i.className.baseVal||i.className)+" ").indexOf(" "+t+" ")!==-1}function FL(i,t){i.classList?i.classList.add(t):Mw(i,t)||(typeof i.className=="string"?i.className=i.className+" "+t:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+t))}function PS(i,t){return i.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function jL(i,t){i.classList?i.classList.remove(t):typeof i.className=="string"?i.className=PS(i.className,t):i.setAttribute("class",PS(i.className&&i.className.baseVal||"",t))}const by={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class FM extends k2{adjustAndStore(t,a,d){const f=a.style[t];a.dataset[t]=f,Zd(a,{[t]:`${parseFloat(Zd(a,t))+d}px`})}restore(t,a){const d=a.dataset[t];d!==void 0&&(delete a.dataset[t],Zd(a,{[t]:d}))}setContainerStyle(t){super.setContainerStyle(t);const a=this.getElement();if(FL(a,"modal-open"),!t.scrollBarWidth)return;const d=this.isRTL?"paddingLeft":"paddingRight",f=this.isRTL?"marginLeft":"marginRight";vy(a,by.FIXED_CONTENT).forEach(g=>this.adjustAndStore(d,g,t.scrollBarWidth)),vy(a,by.STICKY_CONTENT).forEach(g=>this.adjustAndStore(f,g,-t.scrollBarWidth)),vy(a,by.NAVBAR_TOGGLER).forEach(g=>this.adjustAndStore(f,g,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const a=this.getElement();jL(a,"modal-open");const d=this.isRTL?"paddingLeft":"paddingRight",f=this.isRTL?"marginLeft":"marginRight";vy(a,by.FIXED_CONTENT).forEach(g=>this.restore(d,g)),vy(a,by.STICKY_CONTENT).forEach(g=>this.restore(f,g)),vy(a,by.NAVBAR_TOGGLER).forEach(g=>this.restore(f,g))}}let X1;function jM(i){return X1||(X1=new FM(i)),X1}const BM=ie.forwardRef(({className:i,bsPrefix:t,as:a="div",...d},f)=>(t=Ln(t,"modal-body"),Q.jsx(a,{ref:f,className:pn(i,t),...d})));BM.displayName="ModalBody";const O2=ie.createContext({onHide(){}}),L2=ie.forwardRef(({bsPrefix:i,className:t,contentClassName:a,centered:d,size:f,fullscreen:g,children:_,scrollable:c,...A},D)=>{i=Ln(i,"modal");const O=`${i}-dialog`,z=typeof g=="string"?`${i}-fullscreen-${g}`:`${i}-fullscreen`;return Q.jsx("div",{...A,ref:D,className:pn(O,t,f&&`${i}-${f}`,d&&`${O}-centered`,c&&`${O}-scrollable`,g&&z),children:Q.jsx("div",{className:pn(`${i}-content`,a),children:_})})});L2.displayName="ModalDialog";const VM=ie.forwardRef(({className:i,bsPrefix:t,as:a="div",...d},f)=>(t=Ln(t,"modal-footer"),Q.jsx(a,{ref:f,className:pn(i,t),...d})));VM.displayName="ModalFooter";const N2=ie.forwardRef(({closeLabel:i="Close",closeVariant:t,closeButton:a=!1,onHide:d,children:f,...g},_)=>{const c=ie.useContext(O2),A=Qm(()=>{c?.onHide(),d?.()});return Q.jsxs("div",{ref:_,...g,children:[f,a&&Q.jsx(v2,{"aria-label":i,variant:t,onClick:A})]})});N2.displayName="AbstractModalHeader";const UM=ie.forwardRef(({bsPrefix:i,className:t,closeLabel:a="Close",closeButton:d=!1,...f},g)=>(i=Ln(i,"modal-header"),Q.jsx(N2,{ref:g,...f,className:pn(t,i),closeLabel:a,closeButton:d})));UM.displayName="ModalHeader";const BL=dM("h4"),GM=ie.forwardRef(({className:i,bsPrefix:t,as:a=BL,...d},f)=>(t=Ln(t,"modal-title"),Q.jsx(a,{ref:f,className:pn(i,t),...d})));GM.displayName="ModalTitle";function VL(i){return Q.jsx(Ny,{...i,timeout:null})}function UL(i){return Q.jsx(Ny,{...i,timeout:null})}const ZM=ie.forwardRef(({bsPrefix:i,className:t,style:a,dialogClassName:d,contentClassName:f,children:g,dialogAs:_=L2,"data-bs-theme":c,"aria-labelledby":A,"aria-describedby":D,"aria-label":O,show:z=!1,animation:V=!0,backdrop:H=!0,keyboard:ne=!0,onEscapeKeyDown:ae,onShow:q,onHide:he,container:Ae,autoFocus:Ee=!0,enforceFocus:Fe=!0,restoreFocus:De=!0,restoreFocusOptions:ke,onEntered:ze,onExit:rt,onExiting:Se,onEnter:nt,onEntering:Mt,onExited:Ct,backdropClassName:Ft,manager:Ut,...Gt},Ge)=>{const[ct,St]=ie.useState({}),[pt,Vt]=ie.useState(!1),Oe=ie.useRef(!1),et=ie.useRef(!1),bt=ie.useRef(null),[Tt,Nt]=xL(),zt=m2(Ge,Nt),Kt=Qm(he),rn=f2();i=Ln(i,"modal");const Tn=ie.useMemo(()=>({onHide:Kt}),[Kt]);function qi(){return Ut||jM({isRTL:rn})}function tr(Cn){if(!t0)return;const sa=qi().getScrollbarWidth()>0,la=Cn.scrollHeight>Jy(Cn).documentElement.clientHeight;St({paddingRight:sa&&!la?LS():void 0,paddingLeft:!sa&&la?LS():void 0})}const Ri=Qm(()=>{Tt&&tr(Tt.dialog)});GO(()=>{xw(window,"resize",Ri),bt.current==null||bt.current()});const Hr=()=>{Oe.current=!0},bn=Cn=>{Oe.current&&Tt&&Cn.target===Tt.dialog&&(et.current=!0),Oe.current=!1},xn=()=>{Vt(!0),bt.current=aM(Tt.dialog,()=>{Vt(!1)})},gr=Cn=>{Cn.target===Cn.currentTarget&&xn()},Wn=Cn=>{if(H==="static"){gr(Cn);return}if(et.current||Cn.target!==Cn.currentTarget){et.current=!1;return}he?.()},ba=Cn=>{ne?ae?.(Cn):(Cn.preventDefault(),H==="static"&&xn())},oa=(Cn,sa)=>{Cn&&tr(Cn),nt?.(Cn,sa)},jr=Cn=>{bt.current==null||bt.current(),rt?.(Cn)},Wr=(Cn,sa)=>{Mt?.(Cn,sa),rM(window,"resize",Ri)},xa=Cn=>{Cn&&(Cn.style.display=""),Ct?.(Cn),xw(window,"resize",Ri)},Qa=ie.useCallback(Cn=>Q.jsx("div",{...Cn,className:pn(`${i}-backdrop`,Ft,!V&&"show")}),[V,Ft,i]),ki={...a,...ct};ki.display="block";const Sr=Cn=>Q.jsx("div",{role:"dialog",...Cn,style:ki,className:pn(t,i,pt&&`${i}-static`,!V&&"show"),onClick:H?Wn:void 0,onMouseUp:bn,"data-bs-theme":c,"aria-label":O,"aria-labelledby":A,"aria-describedby":D,children:Q.jsx(_,{...Gt,onMouseDown:Hr,className:d,contentClassName:f,children:g})});return Q.jsx(O2.Provider,{value:Tn,children:Q.jsx(zM,{show:z,ref:zt,backdrop:H,container:Ae,keyboard:!0,autoFocus:Ee,enforceFocus:Fe,restoreFocus:De,restoreFocusOptions:ke,onEscapeKeyDown:ba,onShow:q,onHide:he,onEnter:oa,onEntering:Wr,onEntered:ze,onExit:jr,onExiting:Se,onExited:xa,manager:qi(),transition:V?VL:void 0,backdropTransition:V?UL:void 0,renderBackdrop:Qa,renderDialog:Sr})})});ZM.displayName="Modal";const Pb=Object.assign(ZM,{Body:BM,Header:UM,Title:GM,Footer:VM,Dialog:L2,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),$M=ie.forwardRef(({bsPrefix:i,className:t,as:a,...d},f)=>{i=Ln(i,"navbar-brand");const g=a||(d.href?"a":"span");return Q.jsx(g,{...d,ref:f,className:pn(t,i)})});$M.displayName="NavbarBrand";const YM=ie.forwardRef(({children:i,bsPrefix:t,...a},d)=>{t=Ln(t,"navbar-collapse");const f=ie.useContext(_v);return Q.jsx(g2,{in:!!(f&&f.expanded),...a,children:Q.jsx("div",{ref:d,className:t,children:i})})});YM.displayName="NavbarCollapse";const qM=ie.forwardRef(({bsPrefix:i,className:t,children:a,label:d="Toggle navigation",as:f="button",onClick:g,..._},c)=>{i=Ln(i,"navbar-toggler");const{onToggle:A,expanded:D}=ie.useContext(_v)||{},O=Qm(z=>{g&&g(z),A&&A()});return f==="button"&&(_.type="button"),Q.jsx(f,{..._,ref:c,onClick:O,"aria-label":d,className:pn(t,i,!D&&"collapsed"),children:a||Q.jsx("span",{className:`${i}-icon`})})});qM.displayName="NavbarToggle";const Cw=new WeakMap,zS=(i,t)=>{if(!i||!t)return;const a=Cw.get(t)||new Map;Cw.set(t,a);let d=a.get(i);return d||(d=t.matchMedia(i),d.refCount=0,a.set(d.media,d)),d};function GL(i,t=typeof window>"u"?void 0:window){const a=zS(i,t),[d,f]=ie.useState(()=>a?a.matches:!1);return AM(()=>{let g=zS(i,t);if(!g)return f(!1);let _=Cw.get(t);const c=()=>{f(g.matches)};return g.refCount++,g.addListener(c),c(),()=>{g.removeListener(c),g.refCount--,g.refCount<=0&&_?.delete(g.media),g=void 0}},[i]),d}function ZL(i){const t=Object.keys(i);function a(c,A){return c===A?A:c?`${c} and ${A}`:A}function d(c){return t[Math.min(t.indexOf(c)+1,t.length-1)]}function f(c){const A=d(c);let D=i[A];return typeof D=="number"?D=`${D-.2}px`:D=`calc(${D} - 0.2px)`,`(max-width: ${D})`}function g(c){let A=i[c];return typeof A=="number"&&(A=`${A}px`),`(min-width: ${A})`}function _(c,A,D){let O;typeof c=="object"?(O=c,D=A,A=!0):(A=A||!0,O={[c]:A});let z=ie.useMemo(()=>Object.entries(O).reduce((V,[H,ne])=>((ne==="up"||ne===!0)&&(V=a(V,g(H))),(ne==="down"||ne===!0)&&(V=a(V,f(H))),V),""),[JSON.stringify(O)]);return GL(z,D)}return _}const $L=ZL({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),HM=ie.forwardRef(({className:i,bsPrefix:t,as:a="div",...d},f)=>(t=Ln(t,"offcanvas-body"),Q.jsx(a,{ref:f,className:pn(i,t),...d})));HM.displayName="OffcanvasBody";const YL={[xu]:"show",[Nd]:"show"},WM=ie.forwardRef(({bsPrefix:i,className:t,children:a,in:d=!1,mountOnEnter:f=!1,unmountOnExit:g=!1,appear:_=!1,...c},A)=>(i=Ln(i,"offcanvas"),Q.jsx(Nx,{ref:A,addEndListener:p2,in:d,mountOnEnter:f,unmountOnExit:g,appear:_,...c,childRef:e0(a),children:(D,O)=>ie.cloneElement(a,{...O,className:pn(t,a.props.className,(D===xu||D===Q_)&&`${i}-toggling`,YL[D])})})));WM.displayName="OffcanvasToggling";const XM=ie.forwardRef(({bsPrefix:i,className:t,closeLabel:a="Close",closeButton:d=!1,...f},g)=>(i=Ln(i,"offcanvas-header"),Q.jsx(N2,{ref:g,...f,className:pn(t,i),closeLabel:a,closeButton:d})));XM.displayName="OffcanvasHeader";const qL=dM("h5"),QM=ie.forwardRef(({className:i,bsPrefix:t,as:a=qL,...d},f)=>(t=Ln(t,"offcanvas-title"),Q.jsx(a,{ref:f,className:pn(i,t),...d})));QM.displayName="OffcanvasTitle";function HL(i){return Q.jsx(WM,{...i})}function WL(i){return Q.jsx(Ny,{...i})}const KM=ie.forwardRef(({bsPrefix:i,className:t,children:a,"aria-labelledby":d,placement:f="start",responsive:g,show:_=!1,backdrop:c=!0,keyboard:A=!0,scroll:D=!1,onEscapeKeyDown:O,onShow:z,onHide:V,container:H,autoFocus:ne=!0,enforceFocus:ae=!0,restoreFocus:q=!0,restoreFocusOptions:he,onEntered:Ae,onExit:Ee,onExiting:Fe,onEnter:De,onEntering:ke,onExited:ze,backdropClassName:rt,manager:Se,renderStaticNode:nt=!1,...Mt},Ct)=>{const Ft=ie.useRef();i=Ln(i,"offcanvas");const[Ut,Gt]=ie.useState(!1),Ge=Qm(V),ct=$L(g||"xs","up");ie.useEffect(()=>{Gt(g?_&&!ct:_)},[_,g,ct]);const St=ie.useMemo(()=>({onHide:Ge}),[Ge]);function pt(){return Se||(D?(Ft.current||(Ft.current=new FM({handleContainerOverflow:!1})),Ft.current):jM())}const Vt=(Tt,...Nt)=>{Tt&&(Tt.style.visibility="visible"),De?.(Tt,...Nt)},Oe=(Tt,...Nt)=>{Tt&&(Tt.style.visibility=""),ze?.(...Nt)},et=ie.useCallback(Tt=>Q.jsx("div",{...Tt,className:pn(`${i}-backdrop`,rt)}),[rt,i]),bt=Tt=>Q.jsx("div",{...Tt,...Mt,className:pn(t,g?`${i}-${g}`:i,`${i}-${f}`),"aria-labelledby":d,children:a});return Q.jsxs(Q.Fragment,{children:[!Ut&&(g||nt)&&bt({}),Q.jsx(O2.Provider,{value:St,children:Q.jsx(zM,{show:Ut,ref:Ct,backdrop:c,container:H,keyboard:A,autoFocus:ne,enforceFocus:ae&&!D,restoreFocus:q,restoreFocusOptions:he,onEscapeKeyDown:O,onShow:z,onHide:Ge,onEnter:Vt,onEntering:ke,onEntered:Ae,onExit:Ee,onExiting:Fe,onExited:Oe,manager:pt(),transition:HL,backdropTransition:WL,renderBackdrop:et,renderDialog:bt})})]})});KM.displayName="Offcanvas";const XL=Object.assign(KM,{Body:HM,Header:XM,Title:QM}),JM=ie.forwardRef(({onHide:i,...t},a)=>{const d=ie.useContext(_v),f=Qm(()=>{d==null||d.onToggle==null||d.onToggle(),i?.()});return Q.jsx(XL,{ref:a,show:!!(d!=null&&d.expanded),...t,renderStaticNode:!0,onHide:f})});JM.displayName="NavbarOffcanvas";const eC=ie.forwardRef(({className:i,bsPrefix:t,as:a="span",...d},f)=>(t=Ln(t,"navbar-text"),Q.jsx(a,{ref:f,className:pn(i,t),...d})));eC.displayName="NavbarText";const tC=ie.forwardRef((i,t)=>{const{bsPrefix:a,expand:d=!0,variant:f="light",bg:g,fixed:_,sticky:c,className:A,as:D="nav",expanded:O,onToggle:z,onSelect:V,collapseOnSelect:H=!1,...ne}=tM(i,{expanded:"onToggle"}),ae=Ln(a,"navbar"),q=ie.useCallback((...Ee)=>{V?.(...Ee),H&&O&&z?.(!1)},[V,H,O,z]);ne.role===void 0&&D!=="nav"&&(ne.role="navigation");let he=`${ae}-expand`;typeof d=="string"&&(he=`${he}-${d}`);const Ae=ie.useMemo(()=>({onToggle:()=>z?.(!O),bsPrefix:ae,expanded:!!O,expand:d}),[ae,O,d,z]);return Q.jsx(_v.Provider,{value:Ae,children:Q.jsx(hL.Provider,{value:q,children:Q.jsx(D,{ref:t,...ne,className:pn(A,ae,d&&he,f&&`${ae}-${f}`,g&&`bg-${g}`,c&&`sticky-${c}`,_&&`fixed-${_}`)})})})});tC.displayName="Navbar";const QL=Object.assign(tC,{Brand:$M,Collapse:YM,Offcanvas:JM,Text:eC,Toggle:qM}),KL=()=>{};function JL(i,t,{disabled:a,clickTrigger:d}={}){const f=t||KL;sL(i,f,{disabled:a,clickTrigger:d});const g=yh(_=>{iM(_)&&f(_)});ie.useEffect(()=>{if(a||i==null)return;const _=Jy(Hb(i));let c=(_.defaultView||window).event;const A=jd(_,"keyup",D=>{if(D===c){c=void 0;return}g(D)});return()=>{A()}},[i,a,g])}const nC=ie.forwardRef((i,t)=>{const{flip:a,offset:d,placement:f,containerPadding:g,popperConfig:_={},transition:c,runTransition:A}=i,[D,O]=yS(),[z,V]=yS(),H=jx(O,t),ne=Ew(i.container),ae=Ew(i.target),[q,he]=ie.useState(!i.show),Ae=tL(ae,D,uL({placement:f,enableEvents:!!i.show,containerPadding:g||5,flip:a,offset:d,arrowElement:z,popperConfig:_}));i.show&&q&&he(!1);const Ee=(...Mt)=>{he(!0),i.onExited&&i.onExited(...Mt)},Fe=i.show||!q;if(JL(D,i.onHide,{disabled:!i.rootClose||i.rootCloseDisabled,clickTrigger:i.rootCloseEvent}),!Fe)return null;const{onExit:De,onExiting:ke,onEnter:ze,onEntering:rt,onEntered:Se}=i;let nt=i.children(Object.assign({},Ae.attributes.popper,{style:Ae.styles.popper,ref:H}),{popper:Ae,placement:f,show:!!i.show,arrowProps:Object.assign({},Ae.attributes.arrow,{style:Ae.styles.arrow,ref:V})});return nt=Aw(c,A,{in:!!i.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:nt,onExit:De,onExiting:ke,onExited:Ee,onEnter:ze,onEntering:rt,onEntered:Se}),ne?Um.createPortal(nt,ne):null});nC.displayName="Overlay";const iC=ie.forwardRef(({className:i,bsPrefix:t,as:a="div",...d},f)=>(t=Ln(t,"popover-header"),Q.jsx(a,{ref:f,className:pn(i,t),...d})));iC.displayName="PopoverHeader";const P2=ie.forwardRef(({className:i,bsPrefix:t,as:a="div",...d},f)=>(t=Ln(t,"popover-body"),Q.jsx(a,{ref:f,className:pn(i,t),...d})));P2.displayName="PopoverBody";function rC(i,t){let a=i;return i==="left"?a=t?"end":"start":i==="right"&&(a=t?"start":"end"),a}function aC(i="absolute"){return{position:i,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const oC=ie.forwardRef(({bsPrefix:i,placement:t="right",className:a,style:d,children:f,body:g,arrowProps:_,hasDoneInitialMeasure:c,popper:A,show:D,...O},z)=>{const V=Ln(i,"popover"),H=f2(),[ne]=t?.split("-")||[],ae=rC(ne,H);let q=d;return D&&!c&&(q={...d,...aC(A?.strategy)}),Q.jsxs("div",{ref:z,role:"tooltip",style:q,"x-placement":ne,className:pn(a,V,ne&&`bs-popover-${ae}`),...O,children:[Q.jsx("div",{className:"popover-arrow",..._}),g?Q.jsx(P2,{children:f}):f]})});oC.displayName="Popover";const eN=Object.assign(oC,{Header:iC,Body:P2,POPPER_OFFSET:[0,8]}),sC=ie.forwardRef(({bsPrefix:i,placement:t="right",className:a,style:d,children:f,arrowProps:g,hasDoneInitialMeasure:_,popper:c,show:A,...D},O)=>{i=Ln(i,"tooltip");const z=f2(),[V]=t?.split("-")||[],H=rC(V,z);let ne=d;return A&&!_&&(ne={...d,...aC(c?.strategy)}),Q.jsxs("div",{ref:O,style:ne,role:"tooltip","x-placement":V,className:pn(a,i,`bs-tooltip-${H}`),...D,children:[Q.jsx("div",{className:"tooltip-arrow",...g}),Q.jsx("div",{className:`${i}-inner`,children:f})]})});sC.displayName="Tooltip";const tN=Object.assign(sC,{TOOLTIP_OFFSET:[0,6]});function nN(i){const t=ie.useRef(null),a=Ln(void 0,"popover"),d=Ln(void 0,"tooltip"),f=ie.useMemo(()=>({name:"offset",options:{offset:()=>{if(i)return i;if(t.current){if(Mw(t.current,a))return eN.POPPER_OFFSET;if(Mw(t.current,d))return tN.TOOLTIP_OFFSET}return[0,0]}}}),[i,a,d]);return[t,[f]]}function iN(i,t){const{ref:a}=i,{ref:d}=t;i.ref=a.__wrapped||(a.__wrapped=f=>a(ww(f))),t.ref=d.__wrapped||(d.__wrapped=f=>d(ww(f)))}const lC=ie.forwardRef(({children:i,transition:t=Ny,popperConfig:a={},rootClose:d=!1,placement:f="top",show:g=!1,..._},c)=>{const A=ie.useRef({}),[D,O]=ie.useState(null),[z,V]=nN(_.offset),H=m2(c,z),ne=t===!0?Ny:t||void 0,ae=Qm(q=>{O(q),a==null||a.onFirstUpdate==null||a.onFirstUpdate(q)});return AM(()=>{D&&_.target&&(A.current.scheduleUpdate==null||A.current.scheduleUpdate())},[D,_.target]),ie.useEffect(()=>{g||O(null)},[g]),Q.jsx(nC,{..._,ref:H,popperConfig:{...a,modifiers:V.concat(a.modifiers||[]),onFirstUpdate:ae},transition:ne,rootClose:d,placement:f,show:g,children:(q,{arrowProps:he,popper:Ae,show:Ee})=>{var Fe;iN(q,he);const De=Ae?.placement,ke=Object.assign(A.current,{state:Ae?.state,scheduleUpdate:Ae?.update,placement:De,outOfBoundaries:(Ae==null||(Fe=Ae.state)==null||(Fe=Fe.modifiersData.hide)==null?void 0:Fe.isReferenceHidden)||!1,strategy:a.strategy}),ze=!!D;return typeof i=="function"?i({...q,placement:De,show:Ee,...!t&&Ee&&{className:"show"},popper:ke,arrowProps:he,hasDoneInitialMeasure:ze}):ie.cloneElement(i,{...q,placement:De,arrowProps:he,popper:ke,hasDoneInitialMeasure:ze,className:pn(i.props.className,!t&&Ee&&"show"),style:{...i.props.style,...q.style}})}})});lC.displayName="Overlay";const cC=ie.forwardRef(({bsPrefix:i,variant:t,animation:a="border",size:d,as:f="div",className:g,..._},c)=>{i=Ln(i,"spinner");const A=`${i}-${a}`;return Q.jsx(f,{ref:c,..._,className:pn(g,A,d&&`${A}-${d}`,t&&`text-${t}`)})});cC.displayName="Spinner";const vv=ie.forwardRef(({bsPrefix:i,className:t,striped:a,bordered:d,borderless:f,hover:g,size:_,variant:c,responsive:A,...D},O)=>{const z=Ln(i,"table"),V=pn(t,z,c&&`${z}-${c}`,_&&`${z}-${_}`,a&&`${z}-${typeof a=="string"?`striped-${a}`:"striped"}`,d&&`${z}-bordered`,f&&`${z}-borderless`,g&&`${z}-hover`),H=Q.jsx("table",{...D,className:V,ref:O});if(A){let ne=`${z}-responsive`;return typeof A=="string"&&(ne=`${ne}-${A}`),Q.jsx("div",{className:ne,children:H})}return H});vv.displayName="Table";function rN({tripQueryVariables:i,setTripQueryVariables:t,coordinates:a,onClose:d}){return Q.jsx(r2,{longitude:a.lng,latitude:a.lat,anchor:"bottom",onClose:d,children:Q.jsxs(b2,{vertical:!0,children:[Q.jsx(_p,{onClick:()=>{t({...i,from:{coordinates:{latitude:a.lat,longitude:a.lng}}}),d()},children:"Start here"}),Q.jsx(_p,{onClick:()=>{t({...i,to:{coordinates:{latitude:a.lat,longitude:a.lng}}}),d()},children:"End here"})]})})}function aN({coordinates:i,properties:t,onClose:a}){return Q.jsxs(r2,{latitude:i.lat,longitude:i.lng,closeButton:!0,onClose:()=>a(),maxWidth:"350px",children:[Q.jsx(vv,{bordered:!0,children:Q.jsx("tbody",{children:Object.entries(t).map(([d,f])=>Q.jsxs("tr",{children:[Q.jsx("th",{scope:"row",children:d}),Q.jsx("td",{children:String(f)})]},d))})}),Q.jsx("div",{className:"geometry-popup-osm-link",children:Q.jsx("a",{href:`https://www.openstreetmap.org/?mlat=${i.lat}&mlon=${i.lng}#map=18/${i.lat}/${i.lng}`,target:"_blank",rel:"noreferrer",children:" osm.org"})})]})}const uC=i=>{const t=i.getStyle();return!t||!t.layers?[]:t.layers.filter(a=>a.type!=="raster"&&!a.id.startsWith("jsx")).filter(a=>i.getLayoutProperty(a.id,"visibility")!=="none").map(a=>a.id)},oN=({mapRef:i,setInteractiveLayerIds:t})=>{const[a,d]=ie.useState([]),[f,g]=ie.useState({});ie.useEffect(()=>{if(!i)return;const A=i.getMap(),D=()=>{const O=A.getStyle();if(!O||!O.layers)return;const z=O.layers.filter(H=>H.type==="raster").map(H=>{let ne=H.id;const ae=H.metadata?.name;return ae&&(ne=ae),{id:H.id,name:ne}});d(z);const V={};O.layers.filter(H=>H.type!=="raster"&&!H.id.startsWith("jsx")).reverse().forEach(H=>{const ne=H.metadata?.group||"Misc";V[ne]||(V[ne]=[]),V[ne].push({id:H.id,name:H.id})}),g(V)};return A.isStyleLoaded()?D():A.on("styledata",D),()=>{A.off("styledata",D)}},[i]);const _=ie.useCallback((A,D)=>{if(!i)return;const O=i.getMap();O.setLayoutProperty(A,"visibility",D?"visible":"none");const z=uC(O);t(z)},[i,t]),c=ie.useCallback(A=>{if(!i)return;const D=i.getMap();a.forEach(O=>{D.setLayoutProperty(O.id,"visibility",O.id===A?"visible":"none")})},[i,a]);return Q.jsxs("div",{style:{display:"flex",flexDirection:"column",padding:"10px",width:"250px",borderRadius:"4px",overflowY:"auto"},children:[Q.jsx("h4",{style:{marginTop:0},children:"Background"}),Q.jsx("select",{onChange:A=>c(A.target.value),children:a.map(A=>Q.jsx("option",{value:A.id,children:A.name},A.id))}),Q.jsx("h4",{style:{marginTop:"1rem"},children:"Debug Layers"}),Object.entries(f).map(([A,D])=>{const O=D.every(V=>i?.getMap().getLayoutProperty(V.id,"visibility")!=="none"),z=V=>{D.forEach(H=>{_(H.id,V)})};return Q.jsxs("div",{style:{marginBottom:"10px"},children:[Q.jsx("h6",{style:{margin:"0 0 5px"},children:Q.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[Q.jsx("input",{type:"checkbox",checked:O,onChange:V=>z(V.target.checked),style:{marginRight:"5px"}}),A]})}),D.map(V=>{const H=i?.getMap().getLayoutProperty(V.id,"visibility")!=="none";return Q.jsxs("label",{style:{display:"block",cursor:"pointer",marginBottom:"5px"},children:[Q.jsx("input",{type:"checkbox",checked:H,onChange:ne=>_(V.id,ne.target.checked),style:{marginLeft:"20px",marginRight:"5px"}}),V.name]},V.id)})]},A)})]})},sN="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20fill='var(--ci-primary-color,%20currentColor)'%20d='M432,32a63.973,63.973,0,0,0-34.344,117.963L355.894,296.13c-1.289-.078-2.585-.13-3.894-.13a63.659,63.659,0,0,0-38.193,12.678l-77.154-64.295A64,64,0,1,0,131.259,269.7L85.967,360.288C84,360.105,82.013,360,80,360a64.082,64.082,0,1,0,36.243,11.29l42.8-85.589a63.845,63.845,0,0,0,59.982-14.356l74.7,62.252a64,64,0,1,0,92.621-27.56L428.106,159.87c1.289.078,2.585.13,3.894.13a64,64,0,0,0,0-128ZM80,456a32,32,0,1,1,32-32A32.036,32.036,0,0,1,80,456Zm96-200a32,32,0,1,1,32-32A32.036,32.036,0,0,1,176,256ZM352,392a32,32,0,1,1,32-32A32.036,32.036,0,0,1,352,392Zm80-264a32,32,0,1,1,32-32A32.036,32.036,0,0,1,432,128Z'%20class='ci-primary'/%3e%3c/svg%3e";class lN extends ie.Component{constructor(t){super(t),this.state={isSidebarOpen:!1,activeContent:null}}toggleSidebar=t=>{this.setState(a=>({isSidebarOpen:a.activeContent!==t||!a.isSidebarOpen,activeContent:a.activeContent===t?null:t}))};render(){const{isSidebarOpen:t,activeContent:a}=this.state,{position:d,setInteractiveLayerIds:f,mapRef:g}=this.props;return Q.jsxs("div",{children:[Q.jsx("button",{onClick:()=>this.toggleSidebar("debugLayer"),className:`sidebar-button right ${a==="debugLayer"?"active":""} ${t?"open":""}`,style:{top:"20px"},children:Q.jsx("img",{src:sN,alt:"Debug layer",title:"Debug layer",style:{width:"25px",height:"25px"}})}),Q.jsx("div",{className:"right-menu-container",style:{position:"absolute",top:0,right:0,width:t?"270px":"0",height:"100%",backgroundColor:"#f4f4f4",overflowX:"hidden",transition:"0.3s",paddingTop:"20px",boxShadow:t?"-2px 0 5px rgba(0, 0, 0, 0.2)":"none"},children:t&&a==="debugLayer"&&Q.jsx(oN,{position:d,setInteractiveLayerIds:f,mapRef:g})})]})}}function cN({coordinates:i,features:t,onClose:a,setShowPropsPopup:d}){return Q.jsxs(r2,{maxWidth:"600px",latitude:i.lat,longitude:i.lng,onClose:a,children:[Q.jsx("strong",{children:"Overlapping features"}),Q.jsxs(vv,{bordered:!0,children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{scope:"col",children:"layer id"}),Q.jsx("th",{scope:"col",children:"class"}),Q.jsx("th",{scope:"col",children:"name/label"})]})}),Q.jsx("tbody",{children:t.map((f,g)=>Q.jsxs("tr",{onClick:()=>{a(),d({coordinates:i,feature:f})},className:"feature-select-item",children:[Q.jsx("td",{children:f.layer.id}),Q.jsx("td",{children:f.properties.class}),Q.jsx("td",{children:f.properties.name||f.properties.label||"n/a"})]},g))})]})]})}const uN="/otp/debug/vectortiles/style.json";function hN({tripQueryVariables:i,setTripQueryVariables:t,tripQueryResult:a,selectedTripPatternIndexes:d,loading:f}){const g=Jk({tripQueryVariables:i,setTripQueryVariables:t}),[_,c]=ie.useState(null),[A,D]=ie.useState(null),[O,z]=ie.useState(null),[V,H]=ie.useState([]),[ne,ae]=ie.useState("auto"),q=ie.useCallback(()=>ae("pointer"),[]),he=ie.useCallback(()=>ae("auto"),[]),Ae=ze=>{if(ze.features){if(ze.features.length==1){const rt=ze.features[0];D({coordinates:ze.lngLat,feature:rt})}ze.features.length>1&&z({coordinates:ze.lngLat,features:ze.features})}},Ee=ze=>{const rt=ze.target;if(rt.getZoom()<2){const Se=rt.getSource("stops");rt.fitBounds(Se.bounds,{animate:!1})}},Fe=ze=>{ze.target.addControl(new dA.AttributionControl,"bottom-left")};function De(ze){Ee(ze);const rt=uC(ze.target);H(rt),Fe(ze)}const ke=ie.useRef(null);return Q.jsx("div",{className:"map-container below-content",children:Q.jsxs(GI,{attributionControl:!1,mapLib:lA(()=>Promise.resolve().then(()=>fA),void 0),mapStyle:uN,onDblClick:g,onContextMenu:ze=>{c(ze.lngLat)},interactiveLayerIds:V,cursor:ne,onMouseEnter:q,onMouseLeave:he,onClick:Ae,hash:!0,touchPitch:!1,dragRotate:!1,onLoad:De,ref:ke,children:[Q.jsx(WI,{position:"top-left"}),Q.jsx(qk,{setCursor:ae,tripQueryVariables:i,setTripQueryVariables:t,loading:f}),Q.jsx(lN,{position:"top-right",setInteractiveLayerIds:H,mapRef:ke?.current}),a?.trip.tripPatterns.length&&d.map(ze=>{const rt=a.trip.tripPatterns[ze];return rt?Q.jsx(Xk,{tripPattern:rt},`trippattern-${ze}`):null}),_&&Q.jsx(rN,{tripQueryVariables:i,setTripQueryVariables:t,coordinates:_,onClose:()=>c(null)}),A?.feature?.properties&&Q.jsx(aN,{coordinates:A?.coordinates,properties:A?.feature?.properties,onClose:()=>D(null)}),O&&Q.jsx(cN,{...O,setShowPropsPopup:D,onClose:()=>z(null)})]})})}function dN(){const[i,t]=ie.useState(0),a=ie.useRef(null);return ie.useLayoutEffect(()=>{a.current&&t(a.current.getBoundingClientRect().width)},[]),ie.useEffect(()=>{const d=()=>{a.current&&t(a.current.getBoundingClientRect().width)};return window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[]),{containerRef:a,containerWidth:i}}const fN=70,pN=20,Dw=40;function mN(i,t,a,d){const f=ie.useMemo(()=>new Date(d).getTime()-new Date(a).getTime(),[a,d]),g=ie.useMemo(()=>(new Date(i.expectedStartTime).getTime()-new Date(a).getTime())/f,[i.expectedStartTime,a,f]),_=ie.useMemo(()=>new Date(i.expectedEndTime).getTime()-new Date(i.expectedStartTime).getTime(),[i.expectedStartTime,i.expectedEndTime]),c=pN+Dw,D=t-fN-Dw-c,O=c+g*D,z=D*(_/f);return{maxSpan:f,startPx:c,pxSpan:D,widthPx:z,leftPx:O}}const gN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAYAAAHu22/pAAAAB3RJTUUH1AsWERgjekHtpwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAARnQU1BAACxjwv8YQUAAABwSURBVHjanVCBDcAgCLPE/19mYxsEqtNEEiMFCgWoajPD/V7PHIvCUxGJP4OhVJ52gAZwK2UVwKAicFbDtmbGQpQY1XwSI+kBZm0F9cziuZITzCyCeG7ZkzvMRP4SZ+O3W5arbsjSDu1Yal+RVse5AI1+butsyxyOAAAAAElFTkSuQmCC",yN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QURGRTc0NjUwOEY0MTFFMzlDRjU5Nzk1NzEzMUE2MTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QURGRTc0NjYwOEY0MTFFMzlDRjU5Nzk1NzEzMUE2MTMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBREZFNzQ2MzA4RjQxMUUzOUNGNTk3OTU3MTMxQTYxMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBREZFNzQ2NDA4RjQxMUUzOUNGNTk3OTU3MTMxQTYxMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqNIu00AAAElSURBVHjatFMxUsMwEESyC0rTpUyZkh/gdOmAF8T5gf0DeAFPAF5A8oKYjs7+gZ0XxOlSBMTuzCqj8ZgwwKCZHUt3q7u9O9k4587+dZ1H8SVwByS/DdAAjkGG/PabzC/Y+sz1T2VvlZnf8VfcaOgyPmtl7oAWmMXWboDxwX20Id8MBKDsGx2nCvIQUIr9+6E+JT+XdC8/O1WuDRsGUPoVcAuUKmMuTuo5wONxrGyQRpUGxEb2tUBbFXBynZMIjclhW6GuJZ1sEmw7bK+BkZSysffglOK8gTPB9sK/g7ZXGs/h6BJ/OViv5FiR5z1nKkIBLMih7B6Hd2qjmiq9tGc5KHmKrJ38bFglfy1OB//CBOPLJLuF42lgvAySaTJHjvnr7/wpwAC3fWYavCrEiwAAAABJRU5ErkJggg==",_N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAQCAYAAADAvYV+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NENBOTBGRTMzRTQxMTFFMjhDOTJBRDlBRjYxRDhBQjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NENBOTBGRTQzRTQxMTFFMjhDOTJBRDlBRjYxRDhBQjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0Q0E5MEZFMTNFNDExMUUyOEM5MkFEOUFGNjFEOEFCNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0Q0E5MEZFMjNFNDExMUUyOEM5MkFEOUFGNjFEOEFCNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiA2Kl8AAADnSURBVHjalNK/CwFhHMdx5y4pP0qM8nuwisxKmU3KaJaRP4E/QDEY/Atmk8HkDxCL7LKQRXLe3/oq6Ry+9bq7ej73PN/nnjNs2/b8Wl7PH2XlUmm5Z9BCGQmEcMMWK0yxM7LJVImHBQKYY/+yorxYwwUVi0sDB3Thf1t5jRl6kpNwEROMXdqNoCrLxXUGt5LxuIRjuhG3kvGYtCH6OH74lHdEJSdBA/UfPvNZZjLR1E061UTHTa8uE9Z2HA9Ox+9yKCc9sa9tPDc3wAZD+F4CV3SQl5ylgTaWGDnMWEBQcsY/v+hDgAEA1dErlh2yhgAAAAAASUVORK5CYII=",vN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUZENDM4N0RGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUZENDM4N0VGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1RkQ0Mzg3QkY5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1RkQ0Mzg3Q0Y5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsxmCRcAAACkSURBVHjaYmBmYCgA4v9E4gJGILGfAQIOMuAH9mASqOE+EDcQUAxS1wBSywRkKwDxBwbCAKRGgQnKuUCEBrAaJgYSAQuUNmAmrNYARIBC6T8pNpDsJCYiQwgeUixQ34OCdiFUMB7KB4EHaOIPQDZsBGIBIkwXAKsFeloAiM8TkY5AagSQoz4BhLEkCRRxFqggKIzzoewHaHpg4hf+AjHJ8QAQYAAazC31vEwRQAAAAABJRU5ErkJggg==",bN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDE5QzczNkYzRTNFMTFFMjk5RDJDQTI4Q0FGRjg0MjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDE5QzczNzAzRTNFMTFFMjk5RDJDQTI4Q0FGRjg0MjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMTlDNzM2RDNFM0UxMUUyOTlEMkNBMjhDQUZGODQyMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMTlDNzM2RTNFM0UxMUUyOTlEMkNBMjhDQUZGODQyMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsXLmU4AAAEXSURBVHjaYvz//z8DuYCJgQLAoqKgCGPLA/FWIAYJ/EBWA8TMUAwSjwLi7TAJGKgAYlYgNgPif1BXgfzEDsVfgLgUiLvRNYsAcSQQFwPxVTwubQHiy0DsDsQ7YZqjoc7aDcRcUBegA5ArHgDxKSDOgWkuAeI2qAaQrX8JhBMP1KKlzEICAjuAjNNQ00D+lQViDhyYEaoOZEkmKFA4gfggEG+BGoIPvALieUC8AsRhVJZXeA/15xUg1sXhX2RwHYh5gViGBRotbEBsRGTa0EROAEuBOAKIRYH4LhCfw2H7H2h4mAPxb5A3QZrzoM51AOLNQFyIx1Z/IN4AxF9hAcYA9S8InCHg5BtA/BqIbwLxR8YBy1UAAQYACBg5UlgYM2QAAAAASUVORK5CYII=",xN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAQCAYAAADAvYV+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NENBOTBGRTMzRTQxMTFFMjhDOTJBRDlBRjYxRDhBQjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NENBOTBGRTQzRTQxMTFFMjhDOTJBRDlBRjYxRDhBQjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0Q0E5MEZFMTNFNDExMUUyOEM5MkFEOUFGNjFEOEFCNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0Q0E5MEZFMjNFNDExMUUyOEM5MkFEOUFGNjFEOEFCNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiA2Kl8AAADnSURBVHjalNK/CwFhHMdx5y4pP0qM8nuwisxKmU3KaJaRP4E/QDEY/Atmk8HkDxCL7LKQRXLe3/oq6Ry+9bq7ej73PN/nnjNs2/b8Wl7PH2XlUmm5Z9BCGQmEcMMWK0yxM7LJVImHBQKYY/+yorxYwwUVi0sDB3Thf1t5jRl6kpNwEROMXdqNoCrLxXUGt5LxuIRjuhG3kvGYtCH6OH74lHdEJSdBA/UfPvNZZjLR1E061UTHTa8uE9Z2HA9Ox+9yKCc9sa9tPDc3wAZD+F4CV3SQl5ylgTaWGDnMWEBQcsY/v+hDgAEA1dErlh2yhgAAAAAASUVORK5CYII=",wN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAQCAYAAAAvf+5AAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTMxQjUxMkEzRTNEMTFFMjkxQkRFRTAzRUExOUZGRDQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTMxQjUxMkIzRTNEMTFFMjkxQkRFRTAzRUExOUZGRDQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFMzFCNTEyODNFM0QxMUUyOTFCREVFMDNFQTE5RkZENCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMzFCNTEyOTNFM0QxMUUyOTFCREVFMDNFQTE5RkZENCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuptisMAAAEBSURBVHjabNE/S0JhFMdxTZFQJwkRGhKDojEc2vz3CsIlGmpWmosgMMFFBaPBpabcfBGFEOkgODgLIrU3aKvg98h54HS5Bz6ce5/7e54Hzg0eHqQDPnWLOzTRkYWdgH8VsIecW/ALHmGOT7TdYlh7HFVc4ARRTDD2Bl9x6Tk5izze3dVyVVktPOFTe2ILXcTgRvCDD9SQkIwEV6jjzZz0hGd84wYlufoaf/jV0BoDfX5EBvd2PGvtIb3BfVvKRvcSQdFsOvdOwQXPcKyjqOjagx7wL3ilvYEXDHXw+zaY1GBff5tUT3vGBmXQu+aj1Jf2lA3K9EdmJFIzTPUnbGsjwAAGpSpgxyPGdAAAAABJRU5ErkJggg==",TN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUZENDM4N0RGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUZENDM4N0VGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1RkQ0Mzg3QkY5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1RkQ0Mzg3Q0Y5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsxmCRcAAACkSURBVHjaYmBmYCgA4v9E4gJGILGfAQIOMuAH9mASqOE+EDcQUAxS1wBSywRkKwDxBwbCAKRGgQnKuUCEBrAaJgYSAQuUNmAmrNYARIBC6T8pNpDsJCYiQwgeUixQ34OCdiFUMB7KB4EHaOIPQDZsBGIBIkwXAKsFeloAiM8TkY5AagSQoz4BhLEkCRRxFqggKIzzoewHaHpg4hf+AjHJ8QAQYAAazC31vEwRQAAAAABJRU5ErkJggg==",SN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQ3NjlDM0RGOTdBMTFFMkIwM0ZFQ0Y5QUFGNjUyQTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQ3NjlDM0VGOTdBMTFFMkIwM0ZFQ0Y5QUFGNjUyQTkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NDc2OUMzQkY5N0ExMUUyQjAzRkVDRjlBQUY2NTJBOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NDc2OUMzQ0Y5N0ExMUUyQjAzRkVDRjlBQUY2NTJBOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlF1VygAAAEpSURBVHjalNM9SwNBFIXh2WUNfqTTUggoYqFVijQiKDaCYJFGtLCwEn+QWKWwEStbC0WIGP0BWoi9QkSIED+IS+J75C4MAy7ZgSfc2T2XzEwm0UylsuWca2DcDTc+sRfReEsxiQck9nIVE1Z/4MrqFAt4U7CKXZzaywiPmLP5MzYxsLlWeBzzUcJLsJzon9pZthTb5NUNP/6yauzjvUCjsv3YNvxVoFHZNLE9XuDH28+0F1R9Z7UOaEQ92fFXc75hFLXwoZbac8VHT41tfOMMnZxwxzLKttXYxBPqaOU0tiyjbFNXTuu/sdsy7127cKReZkmNeriONXTtdw1vy8DOo4xLnGeN2TjENU6Cxm0s4yB7kNi/YB+L2MAKdrwla4mzmMIY7nH0K8AAYkc9+sRCXd0AAAAASUVORK5CYII=",EN="https://www.opentripplanner.org/debug-client-assets/2025/12/2025-12-04T11:44/assets/monorail-CEIE-7ZV.png",AN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUZENDM4N0RGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUZENDM4N0VGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1RkQ0Mzg3QkY5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1RkQ0Mzg3Q0Y5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsxmCRcAAACkSURBVHjaYmBmYCgA4v9E4gJGILGfAQIOMuAH9mASqOE+EDcQUAxS1wBSywRkKwDxBwbCAKRGgQnKuUCEBrAaJgYSAQuUNmAmrNYARIBC6T8pNpDsJCYiQwgeUixQ34OCdiFUMB7KB4EHaOIPQDZsBGIBIkwXAKsFeloAiM8TkY5AagSQoz4BhLEkCRRxFqggKIzzoewHaHpg4hf+AjHJ8QAQYAAazC31vEwRQAAAAABJRU5ErkJggg==",MN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABHNCSVQICAgIfAhkiAAAAFtJREFUKJFjYCAOCBGpDif4D8UUG8LAwMDAwESJKaOaaaj5GwOZ8fyfgYHBAomNIYkrBYkyMDD8wKaOhYGBYTEWg9CBJBax5YxYNDBiUYjNYBR1y/FoQgZwlwIAXKYUAUY5kWQAAAAASUVORK5CYII=",CN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDE5QzczNkYzRTNFMTFFMjk5RDJDQTI4Q0FGRjg0MjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDE5QzczNzAzRTNFMTFFMjk5RDJDQTI4Q0FGRjg0MjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMTlDNzM2RDNFM0UxMUUyOTlEMkNBMjhDQUZGODQyMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMTlDNzM2RTNFM0UxMUUyOTlEMkNBMjhDQUZGODQyMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsXLmU4AAAEXSURBVHjaYvz//z8DuYCJgQLAoqKgCGPLA/FWIAYJ/EBWA8TMUAwSjwLi7TAJGKgAYlYgNgPif1BXgfzEDsVfgLgUiLvRNYsAcSQQFwPxVTwubQHiy0DsDsQ7YZqjoc7aDcRcUBegA5ArHgDxKSDOgWkuAeI2qAaQrX8JhBMP1KKlzEICAjuAjNNQ00D+lQViDhyYEaoOZEkmKFA4gfggEG+BGoIPvALieUC8AsRhVJZXeA/15xUg1sXhX2RwHYh5gViGBRotbEBsRGTa0EROAEuBOAKIRYH4LhCfw2H7H2h4mAPxb5A3QZrzoM51AOLNQFyIx1Z/IN4AxF9hAcYA9S8InCHg5BtA/BqIbwLxR8YBy1UAAQYACBg5UlgYM2QAAAAASUVORK5CYII=",DN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAQCAYAAADAvYV+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkQyOERBMzVGOTczMTFFMkFDQjZCNkE3RjAwN0ZGREYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkQyOERBMzZGOTczMTFFMkFDQjZCNkE3RjAwN0ZGREYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGRDI4REEzM0Y5NzMxMUUyQUNCNkI2QTdGMDA3RkZERiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGRDI4REEzNEY5NzMxMUUyQUNCNkI2QTdGMDA3RkZERiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnfLFegAAAD0SURBVHjaYmBABQJAvB2I9YF4GxCLI0syoSlmA2JlIBYEYiUg5kCWZIRq8AHiaiDmBOJfSPKsQPwbiPuAeC1IIAOIvwPxfzz4LxAXswAJA6h1VUB8DohZkEz+A8TqQDwRiDVBAgugOtkYcINPQLyUiYF48B9k5Q+oJ4uB+CzUU8jO0ABiXpA6FqgTQKCNgMm/SXEGSqTcB+KXaPJvgPguLE5AitmhHEMg9kdTHA7EWlA2JzOQEAViV2jQ2UE1IcegNhDbAvFCmKAV1EpssfcZahgTLLYeQZ1zDS1tMEOD7jEQ/2OAprLdUIwNrADi06BkCxBgAAYGNHBMbk0cAAAAAElFTkSuQmCC",IN="https://www.opentripplanner.org/debug-client-assets/2025/12/2025-12-04T11:44/assets/trolleybus-BefhFtdd.png",RN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDMzQjkxOEQwOEY3MTFFMzkyMzE4RDY4NzY0RTRDNEUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDMzQjkxOEUwOEY3MTFFMzkyMzE4RDY4NzY0RTRDNEUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMzNCOTE4QjA4RjcxMUUzOTIzMThENjg3NjRFNEM0RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMzNCOTE4QzA4RjcxMUUzOTIzMThENjg3NjRFNEM0RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgA3WlcAAAD7SURBVHjapFLRDYIwEAXlw8/qApI4AG4gTuAIsIIToJMIE+gIuEF//TCWCagT6NU8yIltgHjJy7XQ93r3er7niNUyjCnF2Ob3SinbucBzhyFnWJcEq4BvuTmllBBCwIQkaMKeKpH8/LRDPlDagVgQrsCNYIRnCyHm9VO3IpNOARnIJW5MAIUqYux7PUg7+xMEtdUDKl1QOjPX+6IkL7a8BTGCbGL95QHeOB8hcLGZWIwQOP4IUBUlnB7SfztUARnYDIy0uewYcwEfpHnGB/unBxpY8xYUGxzhmH3F2hM4++H4GN8NRrYRiUCqQIrw/cpEDEcagZf3R7wFGAACCErn0v3YEQAAAABJRU5ErkJggg==";function kN(i){return i===Ci.Rail||i===Ci.Coach||i===Ci.Metro||i===Ci.Bus||i===Ci.Tram||i===Ci.Water||i===Ci.Air||i===Ci.Cableway||i===Ci.Funicular||i===Ci.Trolleybus||i===Ci.Monorail||i===Ci.Taxi}function ON(i){const t=LN(i);function a(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}const d=a(t[0]/255),f=a(t[1]/255),g=a(t[2]/255);return .2126*d+.7152*f+.0722*g>.179?"#000":"#fff"}function LN(i){return NN(i)}function NN(i){return i.length===4?PN(i):[parseInt(i.slice(1,3),16),parseInt(i.slice(3,5),16),parseInt(i.slice(5,7),16)]}function PN(i){const t=i.slice(1,2),a=i.slice(2,3),d=i.slice(3,4);return[parseInt(t+t,16),parseInt(a+a,16),parseInt(d+d,16)]}function zN(i,t,a,d,f){const g=ie.useMemo(()=>(new Date(i.expectedStartTime).getTime()-new Date(t).getTime())/a,[i.expectedStartTime,t,a]),_=ie.useMemo(()=>f*(new Date(i.expectedEndTime).getTime()-new Date(i.expectedStartTime).getTime())/a-1,[f,i,a]),c=d+g*f+1,A=_>40&&kN(i.mode)&&i.line?.publicCode&&i.line.publicCode.length<=6,D=JA(i),O=ie.useMemo(()=>ON(D),[D]);return{widthPx:_,leftPx:c,legTextColor:O,modeColor:D,showPublicCode:A}}const FN=Object.assign({"../../static/img/mode/air.png":gN,"../../static/img/mode/bicycle.png":yN,"../../static/img/mode/bus.png":_N,"../../static/img/mode/cableway.png":vN,"../../static/img/mode/car.png":bN,"../../static/img/mode/coach.png":xN,"../../static/img/mode/foot.png":wN,"../../static/img/mode/funicular.png":TN,"../../static/img/mode/metro.png":SN,"../../static/img/mode/monorail.png":EN,"../../static/img/mode/rail.png":AN,"../../static/img/mode/scooter.png":MN,"../../static/img/mode/taxi.png":CN,"../../static/img/mode/tram.png":DN,"../../static/img/mode/trolleybus.png":IN,"../../static/img/mode/water.png":RN});function jN(i){return FN[`../../static/img/mode/${i.mode.toLowerCase()}.png`]}function BN({leg:i,earliestStartTime:t,maxSpan:a,startPx:d,pxSpan:f}){const{widthPx:g,leftPx:_,legTextColor:c,modeColor:A,showPublicCode:D}=zN(i,t,a,d,f),O=jN(i);return Q.jsxs("div",{className:"itinerary-header-leg-wrapper",style:{width:`${g}px`,left:_,color:c,background:A},children:[Q.jsx("div",{className:"itinerary-header-leg-icon",style:{background:c,maskImage:`url(${O})`,WebkitMaskImage:`url(${O})`}}),D&&Q.jsx("span",{className:"itinerary-header-leg-public-code",children:i.line?.publicCode})]})}function Tu(i,t,a){return new Date(i).toLocaleTimeString("en-US",{timeStyle:a,hourCycle:"h24",timeZone:t})}const n0=ie.createContext("UTC");function VN({tripPattern:i,itineraryIndex:t,containerWidth:a,earliestStartTime:d,latestEndTime:f,comparisonSelectedIndexes:g,setComparisonSelectedIndexes:_}){const{maxSpan:c,pxSpan:A,startPx:D,widthPx:O,leftPx:z}=mN(i,a,d,f),V=ie.useContext(n0),H=ie.useMemo(()=>Tu(i.expectedStartTime,V,"short"),[i.expectedStartTime,V]),ne=ie.useMemo(()=>Tu(i.expectedEndTime,V,"short"),[i.expectedEndTime,V]),ae=()=>{!_||!g||(g.includes(t)?_(g.filter(he=>he!==t)):g.length<2&&_([...g,t]))},q=g?.includes(t)||!1;return Q.jsxs("div",{className:"itinerary-header-wrapper",style:{position:"relative"},children:[g&&_&&Q.jsx("div",{onClick:he=>he.stopPropagation(),style:{position:"absolute",top:"4px",right:"4px",zIndex:10},children:Q.jsx("input",{type:"checkbox",checked:q,onChange:ae,disabled:!q&&g.length>=2,title:"Select for comparison"})}),Q.jsxs("div",{className:"itinerary-header-itinerary-number",children:[t+1,"."]}),Q.jsx("div",{className:"itinerary-header-itinerary-line",style:{width:`${O+5}px`,left:`${z-2}px`}}),Q.jsx("div",{title:i.expectedStartTime,className:"itinerary-header-itinerary-time",style:{left:`${z-Dw}px`},children:H}),i.legs.map((he,Ae)=>Q.jsx(BN,{leg:he,earliestStartTime:d,startPx:D,maxSpan:c,pxSpan:A},he.id||`leg_${Ae}`)),Q.jsx("div",{title:i.expectedEndTime,className:"itinerary-header-itinerary-time",style:{left:`${z+O+2}px`},children:ne})]})}function UN(i){const t=ie.useMemo(()=>i?.trip.tripPatterns.reduce((d,f)=>d===null?f?.expectedStartTime:new Date(f?.expectedStartTime)<new Date(d)?f.expectedStartTime:d,null)||null,[i?.trip]),a=ie.useMemo(()=>i?.trip.tripPatterns.reduce((d,f)=>d===null?f?.expectedEndTime:new Date(f?.expectedEndTime)>new Date(d)?f.expectedEndTime:d,null)||null,[i?.trip]);return[t,a]}function FS({aimedTime:i,expectedTime:t,hasRealtime:a}){const d=ie.useContext(n0);return i!==t?Q.jsxs(Q.Fragment,{children:[Q.jsx("span",{title:t,style:{color:"red"},children:Tu(t,d,"short")}),Q.jsx("span",{title:i,style:{textDecoration:"line-through"},children:Tu(i,d,"short")})]}):Q.jsxs("span",{title:t,children:[Tu(t,d,"short"),a&&Q.jsx("span",{children:" (on time)"})]})}function z2(i){const t=i/1e3;return t>100?`${t.toFixed(0)} km`:t>1?`${t.toFixed(1)} km`:`${i.toFixed(0)} m`}const zb=i=>{const t=parseFloat(i.replace(/[^0-9.]/g,""));return i.includes("km")?t*1e3:t};function F2(i){const t=Math.floor(i/3600),a=Math.floor(i/60)%60,d=i%60;let f="";return t>0&&(f=`${f}${t}h `),a>0&&(f=`${f}${a}min `),d>1&&(f=`${f}${d}s`),f}const GN="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='1200pt'%20height='1200pt'%20version='1.1'%20viewBox='0%200%201200%201200'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3cpath%20d='m660%20156c0%2069.586-56.414%20126-126%20126s-126-56.414-126-126%2056.414-126%20126-126%20126%2056.414%20126%20126'/%3e%3cpath%20d='m667.2%20849.6h-168c-43.199%200-80.398-31.199-86.398-74.398l-50.398-322.8c-3.6016-20.398-22.801-34.801-44.398-32.398-20.398%203.6016-34.801%2022.801-32.398%2044.398l50.395%20322.8c12%2080.398%2081.602%20139.2%20163.2%20139.2h168c21.602%200%2038.398-16.801%2038.398-38.398%200.003906-21.602-16.797-38.398-38.398-38.398z'/%3e%3cpath%20d='m913.2%201101.6-66-367.2c-4.8008-27.602-28.801-46.801-56.398-46.801h-116.4l-19.203-267.6c-3.6016-58.801-52.801-104.4-111.6-104.4h-18c-33.602%200-64.801%2014.398-87.602%2039.602-21.602%2025.199-31.199%2058.801-26.398%2092.398l48%20306c4.8008%2027.602%2028.801%2049.199%2056.398%2049.199h226.8l57.602%20320.4c4.8008%2027.602%2028.801%2046.801%2056.398%2046.801%203.6016%200%207.1992%200%2010.801-1.1992%2031.203-6%2051.602-34.801%2045.602-67.199z'/%3e%3c/g%3e%3c/svg%3e";function ZN({leg:i}){return i.interchangeFrom?.staySeated?Q.jsx("img",{alt:"Stay-seated transfer",title:"Stay-seated transfer",src:GN,width:"20",height:"20",className:"d-inline-block align-middle"}):null}const $N=Ky(`
  query line($id: ID!) {
    line(id: $id) {
      name
      publicCode
    }
  }
`),YN=ys($N),qN="/graphiql?flavor=transmodel";function HN({legId:i,legName:t}){const a={id:i},d=encodeURIComponent(YN),f=encodeURIComponent(JSON.stringify(a));return Q.jsx("a",{href:qN+"&query="+d+"&variables="+f,target:"_blank",rel:"noreferrer",children:t})}const WN=Ky(`
  query quay($id: String!) {
    quay(id: $id) {
      stopPlace {
        id
        name
      }
    }
  }
`),XN=ys(WN),QN="/graphiql?flavor=transmodel";function jS({legId:i,legName:t}){const a={id:i},d=encodeURIComponent(XN),f=encodeURIComponent(JSON.stringify(a));return Q.jsx("a",{href:QN+"&query="+d+"&variables="+f,target:"_blank",rel:"noreferrer",children:t})}const KN=Ky(`
  query authority($id: String!) {
    authority(id: $id) {
      name
      id
    }
  }
`),JN=ys(KN),eP="/graphiql?flavor=transmodel";function tP({legId:i,legName:t}){const a={id:i},d=encodeURIComponent(JN),f=encodeURIComponent(JSON.stringify(a));return Q.jsx("a",{href:eP+"&query="+d+"&variables="+f,target:"_blank",rel:"noreferrer",children:t})}function nP(i){return i.line?.publicCode?i.line.publicCode+" "+i.fromEstimatedCall?.destinationDisplay?.frontText:i.line?.name||"unknown"}function iP({leg:i,isLast:t}){return Q.jsxs("div",{className:"itinerary-leg-details",children:[Q.jsxs("div",{className:"times",children:[z2(i.distance),", ",F2(i.duration),","," ",Q.jsxs("span",{title:"Generalized cost: "+i.generalizedCost,children:["",i.generalizedCost]})]}),Q.jsx(ZN,{leg:i}),Q.jsx(FS,{aimedTime:i.aimedStartTime,expectedTime:i.expectedStartTime,hasRealtime:i.realtime})," -"," ",Q.jsx(FS,{aimedTime:i.aimedEndTime,expectedTime:i.expectedEndTime,hasRealtime:i.realtime}),Q.jsxs("div",{className:"mode",children:[Q.jsx("b",{children:i.mode})," ",i.line&&Q.jsxs(Q.Fragment,{children:[Q.jsx(HN,{legId:i.line?.id,legName:nP(i)}),", ",Q.jsx(tP,{legId:i.authority?.id,legName:i.authority?.name})]})," ",i.mode!==Ci.Foot&&Q.jsxs(Q.Fragment,{children:[Q.jsx("br",{}),Q.jsx(jS,{legId:i.fromPlace.quay?.id,legName:i.fromPlace.name})," "," "]})," ",!t&&Q.jsx(jS,{legId:i.toPlace.quay?.id,legName:i.toPlace.name})]})]})}function rP({tripPattern:i}){return Q.jsxs("div",{children:[i.systemNotices.length>0&&Q.jsxs("p",{children:["System tags: ",i.systemNotices.map(t=>t.tag).join(", ")]}),i.legs.map((t,a)=>Q.jsx(iP,{leg:t,isLast:a===i.legs.length-1},t.id?t.id:`noid_${a}`)),Q.jsxs("div",{className:"generalized-cost",children:["Generalized cost: ",i.generalizedCost]})]})}function aP({previousPageCursor:i,nextPageCursor:t,onPagination:a,loading:d,comparisonSelectedIndexes:f,onCompare:g}){return Q.jsxs("div",{className:"pagination-controls-container",children:[Q.jsx(_p,{variant:"outline-primary",size:"sm",disabled:!i||d,onClick:()=>{i&&a(i)},children:"Previous page"}),Q.jsx("div",{style:{textAlign:"center"},children:f?.length===2&&g&&Q.jsx(_p,{variant:"primary",size:"sm",onClick:g,children:"Compare selected"})}),Q.jsx(_p,{variant:"outline-primary",size:"sm",disabled:!t||d,onClick:()=>{t&&a(t)},children:"Next page"})]})}function oP({error:i,onDismiss:t}){if(!i)return null;const a=_=>{try{const c=_,A=String(c.message||"").toLowerCase(),D=c.code;if(A.includes("fetch")&&A.includes("failed"))return{userMessage:"Connection failed. Please check your internet connection and try again.",showRaw:!1};if(A.includes("network error")||D==="NETWORK_ERROR")return{userMessage:"Network error occurred. Please verify your internet connection and try again.",showRaw:!1};if(A.includes("enotfound")||A.includes("getaddrinfo"))return{userMessage:"Unable to reach the server. Please check your internet connection or try again later.",showRaw:!1};if(A.includes("timeout"))return{userMessage:"Request timed out. The server may be busy, please try again in a moment.",showRaw:!0};const O=c.response;if(O&&typeof O.status=="number"){const z=O.status;if(z>=500)return{userMessage:"Server error occurred. Please try again later.",showRaw:!0};if(z===404)return{userMessage:"Service not found. Please contact support if this issue persists.",showRaw:!0};if(z>=400)return{userMessage:"Request failed. Please check your search parameters and try again.",showRaw:!0}}if(O&&O.errors)return{userMessage:"Server returned an error response.",showRaw:!0}}catch{}return{userMessage:"An unexpected error occurred. Please try again.",showRaw:!0}},{userMessage:d,showRaw:f}=a(i);let g;try{const c=i.response;c&&c.errors?g=JSON.stringify(c.errors,null,2):c&&c.data?g=JSON.stringify(c.data,null,2):g=JSON.stringify(i,null,2)}catch{g="Unable to display error details"}return Q.jsx("div",{className:"error-display-container",children:Q.jsxs("div",{className:"flex-space-between",children:[Q.jsxs("div",{className:"flex-1",children:[Q.jsx("div",{className:"error-title",children:"Search Error"}),Q.jsx("div",{className:"error-message",children:d}),f&&Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"error-title",children:"Technical Details:"}),Q.jsx("pre",{className:"error-details",children:g})]})]}),t&&Q.jsx("button",{onClick:t,className:"error-dismiss-button","aria-label":"Dismiss error",children:""})]})})}function sP({hasSearched:i,tripQueryResult:t}){return!i||!t?null:Q.jsx("div",{className:"no-results-display-container",children:Q.jsx("div",{className:"flex-space-between",children:Q.jsxs("div",{className:"flex-1",children:[Q.jsx("div",{className:"info-title",children:"No Results Found"}),Q.jsx("div",{className:"info-message",children:"No matching trips were found for your search criteria."}),Q.jsx("div",{className:"info-title",children:"Raw Response:"}),Q.jsx("pre",{className:"no-results-details",children:JSON.stringify(t,null,2)})]})})})}function lP({tripQueryResult:i,selectedTripPatternIndexes:t,setSelectedTripPatternIndexes:a,pageResults:d,loading:f,comparisonSelectedIndexes:g,setComparisonSelectedIndexes:_,onCompare:c,error:A}){const[D,O]=UN(i),{containerRef:z,containerWidth:V}=dN(),H=ie.useContext(n0),ne=!!(i&&i.trip.tripPatterns.length===0),ae=i!==null,q=A||ae&&!A&&ne;return Q.jsxs("section",{className:"left-pane-container below-content",ref:z,children:[Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"panel-header",children:"Itinerary results"}),Q.jsx(oP,{error:A}),Q.jsx(sP,{hasSearched:ae&&!A&&ne,tripQueryResult:i}),!q&&Q.jsx("div",{className:"pagination-controls",children:Q.jsx(aP,{onPagination:d,previousPageCursor:i?.trip.previousPageCursor,nextPageCursor:i?.trip.nextPageCursor,loading:f,comparisonSelectedIndexes:g,onCompare:c})}),Q.jsx(Ob,{activeKey:t.map(String),onSelect:he=>{const Ae=parseInt(he);a(Ee=>{if(Ee.includes(Ae))return Ee.filter(Fe=>Fe!==Ae);{const Fe=[...Ee,Ae];return Fe.length>2?Fe.slice(-2):Fe}})},children:i&&i.trip.tripPatterns.map((he,Ae)=>Q.jsxs(Ob.Item,{eventKey:`${Ae}`,bsPrefix:he.systemNotices.length===0?"":"accordion-item-filtered",children:[Q.jsx(Ob.Header,{children:Q.jsx(VN,{containerWidth:V,tripPattern:he,itineraryIndex:Ae,earliestStartTime:D,latestEndTime:O,comparisonSelectedIndexes:g,setComparisonSelectedIndexes:_})}),Q.jsx(Ob.Body,{children:Q.jsx(rP,{tripPattern:he})})]},`${Ae}`))})]}),Q.jsxs("div",{className:"time-zone-info",children:["All times in ",Q.jsx("code",{children:H})]})]})}const up=(i,t,a="lower")=>i==null||t==null||i===t?"":(a==="lower"?i<t:i>t)?"compare-value-best":"",hp={duration:"lower",cost:"lower",legs:"lower",walkingDistance:"lower"},BS=(i,t)=>{if(!i)throw new Error("TripPattern is required");const a=Tu(i.expectedStartTime,t,"short"),d=Tu(i.expectedEndTime,t,"short"),f=F2(i.duration),g=i.generalizedCost,_=i.legs.filter(A=>A&&A.mode===Ci.Foot).reduce((A,D)=>A+D.distance,0),c=Math.max(0,i.legs.length-1);return{startTime:a,endTime:d,duration:f,generalizedCost:g,walkingDistance:z2(_),totalLegs:c}},VS=(i,t,a)=>i.map((d,f)=>{const g=d.id||`leg${t}_${f}`,_=d.fromPlace?.name||"Unknown",c=d.toPlace?.name||"Unknown",A=`${d.mode}${d.line?.publicCode?` (${d.line.publicCode})`:""} | ${_}  ${c} | ${Tu(d.aimedStartTime,a,"short")} to ${Tu(d.aimedEndTime,a,"short")}`;return{value:g,label:A}});function cP({itinerary1:i,itinerary2:t,summary1:a,summary2:d,selectedIndexes:f}){return Q.jsxs(vv,{bordered:!0,hover:!0,className:"compare-summary-table",children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{children:"Itinerary"}),Q.jsx("th",{children:"Start Time"}),Q.jsx("th",{children:"End Time"}),Q.jsx("th",{children:"Duration"}),Q.jsx("th",{children:"Cost"}),Q.jsx("th",{children:"Transfers"}),Q.jsx("th",{children:"Walking Distance"})]})}),Q.jsxs("tbody",{children:[Q.jsxs("tr",{children:[Q.jsx("td",{children:Q.jsxs("span",{className:"compare-itinerary-number",children:["#",f[0]+1]})}),Q.jsx("td",{children:a.startTime}),Q.jsx("td",{children:a.endTime}),Q.jsx("td",{className:up(i.duration,t.duration,hp.duration),children:a.duration}),Q.jsxs("td",{className:up(a.generalizedCost,d.generalizedCost,hp.cost),children:["",a.generalizedCost]}),Q.jsx("td",{className:up(a.totalLegs,d.totalLegs,hp.legs),children:a.totalLegs}),Q.jsx("td",{className:up(zb(a.walkingDistance),zb(d.walkingDistance),hp.walkingDistance),children:a.walkingDistance})]}),Q.jsxs("tr",{children:[Q.jsx("td",{children:Q.jsxs("span",{className:"compare-itinerary-number",children:["#",f[1]+1]})}),Q.jsx("td",{children:d.startTime}),Q.jsx("td",{children:d.endTime}),Q.jsx("td",{className:up(t.duration,i.duration,hp.duration),children:d.duration}),Q.jsxs("td",{className:up(d.generalizedCost,a.generalizedCost,hp.cost),children:["",d.generalizedCost]}),Q.jsx("td",{className:up(d.totalLegs,a.totalLegs,hp.legs),children:d.totalLegs}),Q.jsx("td",{className:up(zb(d.walkingDistance),zb(a.walkingDistance),hp.walkingDistance),children:d.walkingDistance})]})]})]})}function Jm(i){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(i)}function uP(i,t){if(Jm(i)!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var d=a.call(i,t);if(Jm(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function hC(i){var t=uP(i,"string");return Jm(t)=="symbol"?t:t+""}function k_(i,t,a){return(t=hC(t))in i?Object.defineProperty(i,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[t]=a,i}function US(i,t){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);t&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(i,f).enumerable})),a.push.apply(a,d)}return a}function un(i){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?US(Object(a),!0).forEach(function(d){k_(i,d,a[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):US(Object(a)).forEach(function(d){Object.defineProperty(i,d,Object.getOwnPropertyDescriptor(a,d))})}return i}function hP(i){if(Array.isArray(i))return i}function dP(i,t){var a=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(a!=null){var d,f,g,_,c=[],A=!0,D=!1;try{if(g=(a=a.call(i)).next,t===0){if(Object(a)!==a)return;A=!1}else for(;!(A=(d=g.call(a)).done)&&(c.push(d.value),c.length!==t);A=!0);}catch(O){D=!0,f=O}finally{try{if(!A&&a.return!=null&&(_=a.return(),Object(_)!==_))return}finally{if(D)throw f}}return c}}function Iw(i,t){(t==null||t>i.length)&&(t=i.length);for(var a=0,d=Array(t);a<t;a++)d[a]=i[a];return d}function dC(i,t){if(i){if(typeof i=="string")return Iw(i,t);var a={}.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Iw(i,t):void 0}}function fP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yd(i,t){return hP(i)||dP(i,t)||dC(i,t)||fP()}function af(i,t){if(i==null)return{};var a,d,f=d2(i,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(i);for(d=0;d<g.length;d++)a=g[d],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(i,a)&&(f[a]=i[a])}return f}var pP=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function mP(i){var t=i.defaultInputValue,a=t===void 0?"":t,d=i.defaultMenuIsOpen,f=d===void 0?!1:d,g=i.defaultValue,_=g===void 0?null:g,c=i.inputValue,A=i.menuIsOpen,D=i.onChange,O=i.onInputChange,z=i.onMenuClose,V=i.onMenuOpen,H=i.value,ne=af(i,pP),ae=ie.useState(c!==void 0?c:a),q=Yd(ae,2),he=q[0],Ae=q[1],Ee=ie.useState(A!==void 0?A:f),Fe=Yd(Ee,2),De=Fe[0],ke=Fe[1],ze=ie.useState(H!==void 0?H:_),rt=Yd(ze,2),Se=rt[0],nt=rt[1],Mt=ie.useCallback(function(St,pt){typeof D=="function"&&D(St,pt),nt(St)},[D]),Ct=ie.useCallback(function(St,pt){var Vt;typeof O=="function"&&(Vt=O(St,pt)),Ae(Vt!==void 0?Vt:St)},[O]),Ft=ie.useCallback(function(){typeof V=="function"&&V(),ke(!0)},[V]),Ut=ie.useCallback(function(){typeof z=="function"&&z(),ke(!1)},[z]),Gt=c!==void 0?c:he,Ge=A!==void 0?A:De,ct=H!==void 0?H:Se;return un(un({},ne),{},{inputValue:Gt,menuIsOpen:Ge,onChange:Mt,onInputChange:Ct,onMenuClose:Ut,onMenuOpen:Ft,value:ct})}function gP(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function GS(i,t){for(var a=0;a<t.length;a++){var d=t[a];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,hC(d.key),d)}}function yP(i,t,a){return t&&GS(i.prototype,t),a&&GS(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i}function _P(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&nx(i,t)}function sx(i){return sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sx(i)}function fC(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fC=function(){return!!i})()}function vP(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function bP(i,t){if(t&&(Jm(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vP(i)}function xP(i){var t=fC();return function(){var a,d=sx(i);if(t){var f=sx(this).constructor;a=Reflect.construct(d,arguments,f)}else a=d.apply(this,arguments);return bP(this,a)}}function wP(i){if(Array.isArray(i))return Iw(i)}function TP(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function SP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j2(i){return wP(i)||TP(i)||dC(i)||SP()}function EP(i){if(i.sheet)return i.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===i)return document.styleSheets[t]}function AP(i){var t=document.createElement("style");return t.setAttribute("data-emotion",i.key),i.nonce!==void 0&&t.setAttribute("nonce",i.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var MP=function(){function i(a){var d=this;this._insertTag=function(f){var g;d.tags.length===0?d.insertionPoint?g=d.insertionPoint.nextSibling:d.prepend?g=d.container.firstChild:g=d.before:g=d.tags[d.tags.length-1].nextSibling,d.container.insertBefore(f,g),d.tags.push(f)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var t=i.prototype;return t.hydrate=function(d){d.forEach(this._insertTag)},t.insert=function(d){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(AP(this));var f=this.tags[this.tags.length-1];if(this.isSpeedy){var g=EP(f);try{g.insertRule(d,g.cssRules.length)}catch{}}else f.appendChild(document.createTextNode(d));this.ctr++},t.flush=function(){this.tags.forEach(function(d){var f;return(f=d.parentNode)==null?void 0:f.removeChild(d)}),this.tags=[],this.ctr=0},i}(),ko="-ms-",lx="-moz-",Ai="-webkit-",pC="comm",B2="rule",V2="decl",CP="@import",mC="@keyframes",DP="@layer",IP=Math.abs,Bx=String.fromCharCode,RP=Object.assign;function kP(i,t){return mo(i,0)^45?(((t<<2^mo(i,0))<<2^mo(i,1))<<2^mo(i,2))<<2^mo(i,3):0}function gC(i){return i.trim()}function OP(i,t){return(i=t.exec(i))?i[0]:i}function Mi(i,t,a){return i.replace(t,a)}function Rw(i,t){return i.indexOf(t)}function mo(i,t){return i.charCodeAt(t)|0}function ev(i,t,a){return i.slice(t,a)}function ph(i){return i.length}function U2(i){return i.length}function Fb(i,t){return t.push(i),i}function LP(i,t){return i.map(t).join("")}var Vx=1,By=1,yC=0,el=0,va=0,i0="";function Ux(i,t,a,d,f,g,_){return{value:i,root:t,parent:a,type:d,props:f,children:g,line:Vx,column:By,length:_,return:""}}function T_(i,t){return RP(Ux("",null,null,"",null,null,0),i,{length:-i.length},t)}function NP(){return va}function PP(){return va=el>0?mo(i0,--el):0,By--,va===10&&(By=1,Vx--),va}function zl(){return va=el<yC?mo(i0,el++):0,By++,va===10&&(By=1,Vx++),va}function Eh(){return mo(i0,el)}function Wb(){return el}function bv(i,t){return ev(i0,i,t)}function tv(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _C(i){return Vx=By=1,yC=ph(i0=i),el=0,[]}function vC(i){return i0="",i}function Xb(i){return gC(bv(el-1,kw(i===91?i+2:i===40?i+1:i)))}function zP(i){for(;(va=Eh())&&va<33;)zl();return tv(i)>2||tv(va)>3?"":" "}function FP(i,t){for(;--t&&zl()&&!(va<48||va>102||va>57&&va<65||va>70&&va<97););return bv(i,Wb()+(t<6&&Eh()==32&&zl()==32))}function kw(i){for(;zl();)switch(va){case i:return el;case 34:case 39:i!==34&&i!==39&&kw(va);break;case 40:i===41&&kw(i);break;case 92:zl();break}return el}function jP(i,t){for(;zl()&&i+va!==57;)if(i+va===84&&Eh()===47)break;return"/*"+bv(t,el-1)+"*"+Bx(i===47?i:zl())}function BP(i){for(;!tv(Eh());)zl();return bv(i,el)}function VP(i){return vC(Qb("",null,null,null,[""],i=_C(i),0,[0],i))}function Qb(i,t,a,d,f,g,_,c,A){for(var D=0,O=0,z=_,V=0,H=0,ne=0,ae=1,q=1,he=1,Ae=0,Ee="",Fe=f,De=g,ke=d,ze=Ee;q;)switch(ne=Ae,Ae=zl()){case 40:if(ne!=108&&mo(ze,z-1)==58){Rw(ze+=Mi(Xb(Ae),"&","&\f"),"&\f")!=-1&&(he=-1);break}case 34:case 39:case 91:ze+=Xb(Ae);break;case 9:case 10:case 13:case 32:ze+=zP(ne);break;case 92:ze+=FP(Wb()-1,7);continue;case 47:switch(Eh()){case 42:case 47:Fb(UP(jP(zl(),Wb()),t,a),A);break;default:ze+="/"}break;case 123*ae:c[D++]=ph(ze)*he;case 125*ae:case 59:case 0:switch(Ae){case 0:case 125:q=0;case 59+O:he==-1&&(ze=Mi(ze,/\f/g,"")),H>0&&ph(ze)-z&&Fb(H>32?$S(ze+";",d,a,z-1):$S(Mi(ze," ","")+";",d,a,z-2),A);break;case 59:ze+=";";default:if(Fb(ke=ZS(ze,t,a,D,O,f,c,Ee,Fe=[],De=[],z),g),Ae===123)if(O===0)Qb(ze,t,ke,ke,Fe,g,z,c,De);else switch(V===99&&mo(ze,3)===110?100:V){case 100:case 108:case 109:case 115:Qb(i,ke,ke,d&&Fb(ZS(i,ke,ke,0,0,f,c,Ee,f,Fe=[],z),De),f,De,z,c,d?Fe:De);break;default:Qb(ze,ke,ke,ke,[""],De,0,c,De)}}D=O=H=0,ae=he=1,Ee=ze="",z=_;break;case 58:z=1+ph(ze),H=ne;default:if(ae<1){if(Ae==123)--ae;else if(Ae==125&&ae++==0&&PP()==125)continue}switch(ze+=Bx(Ae),Ae*ae){case 38:he=O>0?1:(ze+="\f",-1);break;case 44:c[D++]=(ph(ze)-1)*he,he=1;break;case 64:Eh()===45&&(ze+=Xb(zl())),V=Eh(),O=z=ph(Ee=ze+=BP(Wb())),Ae++;break;case 45:ne===45&&ph(ze)==2&&(ae=0)}}return g}function ZS(i,t,a,d,f,g,_,c,A,D,O){for(var z=f-1,V=f===0?g:[""],H=U2(V),ne=0,ae=0,q=0;ne<d;++ne)for(var he=0,Ae=ev(i,z+1,z=IP(ae=_[ne])),Ee=i;he<H;++he)(Ee=gC(ae>0?V[he]+" "+Ae:Mi(Ae,/&\f/g,V[he])))&&(A[q++]=Ee);return Ux(i,t,a,f===0?B2:c,A,D,O)}function UP(i,t,a){return Ux(i,t,a,pC,Bx(NP()),ev(i,2,-2),0)}function $S(i,t,a,d){return Ux(i,t,a,V2,ev(i,0,d),ev(i,d+1,-1),d)}function Iy(i,t){for(var a="",d=U2(i),f=0;f<d;f++)a+=t(i[f],f,i,t)||"";return a}function GP(i,t,a,d){switch(i.type){case DP:if(i.children.length)break;case CP:case V2:return i.return=i.return||i.value;case pC:return"";case mC:return i.return=i.value+"{"+Iy(i.children,d)+"}";case B2:i.value=i.props.join(",")}return ph(a=Iy(i.children,d))?i.return=i.value+"{"+a+"}":""}function ZP(i){var t=U2(i);return function(a,d,f,g){for(var _="",c=0;c<t;c++)_+=i[c](a,d,f,g)||"";return _}}function $P(i){return function(t){t.root||(t=t.return)&&i(t)}}function YP(i){var t=Object.create(null);return function(a){return t[a]===void 0&&(t[a]=i(a)),t[a]}}var qP=function(t,a,d){for(var f=0,g=0;f=g,g=Eh(),f===38&&g===12&&(a[d]=1),!tv(g);)zl();return bv(t,el)},HP=function(t,a){var d=-1,f=44;do switch(tv(f)){case 0:f===38&&Eh()===12&&(a[d]=1),t[d]+=qP(el-1,a,d);break;case 2:t[d]+=Xb(f);break;case 4:if(f===44){t[++d]=Eh()===58?"&\f":"",a[d]=t[d].length;break}default:t[d]+=Bx(f)}while(f=zl());return t},WP=function(t,a){return vC(HP(_C(t),a))},YS=new WeakMap,XP=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var a=t.value,d=t.parent,f=t.column===d.column&&t.line===d.line;d.type!=="rule";)if(d=d.parent,!d)return;if(!(t.props.length===1&&a.charCodeAt(0)!==58&&!YS.get(d))&&!f){YS.set(t,!0);for(var g=[],_=WP(a,g),c=d.props,A=0,D=0;A<_.length;A++)for(var O=0;O<c.length;O++,D++)t.props[D]=g[A]?_[A].replace(/&\f/g,c[O]):c[O]+" "+_[A]}}},QP=function(t){if(t.type==="decl"){var a=t.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(t.return="",t.value="")}};function bC(i,t){switch(kP(i,t)){case 5103:return Ai+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ai+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return Ai+i+lx+i+ko+i+i;case 6828:case 4268:return Ai+i+ko+i+i;case 6165:return Ai+i+ko+"flex-"+i+i;case 5187:return Ai+i+Mi(i,/(\w+).+(:[^]+)/,Ai+"box-$1$2"+ko+"flex-$1$2")+i;case 5443:return Ai+i+ko+"flex-item-"+Mi(i,/flex-|-self/,"")+i;case 4675:return Ai+i+ko+"flex-line-pack"+Mi(i,/align-content|flex-|-self/,"")+i;case 5548:return Ai+i+ko+Mi(i,"shrink","negative")+i;case 5292:return Ai+i+ko+Mi(i,"basis","preferred-size")+i;case 6060:return Ai+"box-"+Mi(i,"-grow","")+Ai+i+ko+Mi(i,"grow","positive")+i;case 4554:return Ai+Mi(i,/([^-])(transform)/g,"$1"+Ai+"$2")+i;case 6187:return Mi(Mi(Mi(i,/(zoom-|grab)/,Ai+"$1"),/(image-set)/,Ai+"$1"),i,"")+i;case 5495:case 3959:return Mi(i,/(image-set\([^]*)/,Ai+"$1$`$1");case 4968:return Mi(Mi(i,/(.+:)(flex-)?(.*)/,Ai+"box-pack:$3"+ko+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ai+i+i;case 4095:case 3583:case 4068:case 2532:return Mi(i,/(.+)-inline(.+)/,Ai+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ph(i)-1-t>6)switch(mo(i,t+1)){case 109:if(mo(i,t+4)!==45)break;case 102:return Mi(i,/(.+:)(.+)-([^]+)/,"$1"+Ai+"$2-$3$1"+lx+(mo(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~Rw(i,"stretch")?bC(Mi(i,"stretch","fill-available"),t)+i:i}break;case 4949:if(mo(i,t+1)!==115)break;case 6444:switch(mo(i,ph(i)-3-(~Rw(i,"!important")&&10))){case 107:return Mi(i,":",":"+Ai)+i;case 101:return Mi(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ai+(mo(i,14)===45?"inline-":"")+"box$3$1"+Ai+"$2$3$1"+ko+"$2box$3")+i}break;case 5936:switch(mo(i,t+11)){case 114:return Ai+i+ko+Mi(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return Ai+i+ko+Mi(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return Ai+i+ko+Mi(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return Ai+i+ko+i+i}return i}var KP=function(t,a,d,f){if(t.length>-1&&!t.return)switch(t.type){case V2:t.return=bC(t.value,t.length);break;case mC:return Iy([T_(t,{value:Mi(t.value,"@","@"+Ai)})],f);case B2:if(t.length)return LP(t.props,function(g){switch(OP(g,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Iy([T_(t,{props:[Mi(g,/:(read-\w+)/,":"+lx+"$1")]})],f);case"::placeholder":return Iy([T_(t,{props:[Mi(g,/:(plac\w+)/,":"+Ai+"input-$1")]}),T_(t,{props:[Mi(g,/:(plac\w+)/,":"+lx+"$1")]}),T_(t,{props:[Mi(g,/:(plac\w+)/,ko+"input-$1")]})],f)}return""})}},JP=[KP],ez=function(t){var a=t.key;if(a==="css"){var d=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(d,function(ae){var q=ae.getAttribute("data-emotion");q.indexOf(" ")!==-1&&(document.head.appendChild(ae),ae.setAttribute("data-s",""))})}var f=t.stylisPlugins||JP,g={},_,c=[];_=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(ae){for(var q=ae.getAttribute("data-emotion").split(" "),he=1;he<q.length;he++)g[q[he]]=!0;c.push(ae)});var A,D=[XP,QP];{var O,z=[GP,$P(function(ae){O.insert(ae)})],V=ZP(D.concat(f,z)),H=function(q){return Iy(VP(q),V)};A=function(q,he,Ae,Ee){O=Ae,H(q?q+"{"+he.styles+"}":he.styles),Ee&&(ne.inserted[he.name]=!0)}}var ne={key:a,sheet:new MP({key:a,container:_,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:g,registered:{},insert:A};return ne.sheet.hydrate(c),ne},Q1={exports:{}},Li={};var qS;function tz(){if(qS)return Li;qS=1;var i=typeof Symbol=="function"&&Symbol.for,t=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,d=i?Symbol.for("react.fragment"):60107,f=i?Symbol.for("react.strict_mode"):60108,g=i?Symbol.for("react.profiler"):60114,_=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,A=i?Symbol.for("react.async_mode"):60111,D=i?Symbol.for("react.concurrent_mode"):60111,O=i?Symbol.for("react.forward_ref"):60112,z=i?Symbol.for("react.suspense"):60113,V=i?Symbol.for("react.suspense_list"):60120,H=i?Symbol.for("react.memo"):60115,ne=i?Symbol.for("react.lazy"):60116,ae=i?Symbol.for("react.block"):60121,q=i?Symbol.for("react.fundamental"):60117,he=i?Symbol.for("react.responder"):60118,Ae=i?Symbol.for("react.scope"):60119;function Ee(De){if(typeof De=="object"&&De!==null){var ke=De.$$typeof;switch(ke){case t:switch(De=De.type,De){case A:case D:case d:case g:case f:case z:return De;default:switch(De=De&&De.$$typeof,De){case c:case O:case ne:case H:case _:return De;default:return ke}}case a:return ke}}}function Fe(De){return Ee(De)===D}return Li.AsyncMode=A,Li.ConcurrentMode=D,Li.ContextConsumer=c,Li.ContextProvider=_,Li.Element=t,Li.ForwardRef=O,Li.Fragment=d,Li.Lazy=ne,Li.Memo=H,Li.Portal=a,Li.Profiler=g,Li.StrictMode=f,Li.Suspense=z,Li.isAsyncMode=function(De){return Fe(De)||Ee(De)===A},Li.isConcurrentMode=Fe,Li.isContextConsumer=function(De){return Ee(De)===c},Li.isContextProvider=function(De){return Ee(De)===_},Li.isElement=function(De){return typeof De=="object"&&De!==null&&De.$$typeof===t},Li.isForwardRef=function(De){return Ee(De)===O},Li.isFragment=function(De){return Ee(De)===d},Li.isLazy=function(De){return Ee(De)===ne},Li.isMemo=function(De){return Ee(De)===H},Li.isPortal=function(De){return Ee(De)===a},Li.isProfiler=function(De){return Ee(De)===g},Li.isStrictMode=function(De){return Ee(De)===f},Li.isSuspense=function(De){return Ee(De)===z},Li.isValidElementType=function(De){return typeof De=="string"||typeof De=="function"||De===d||De===D||De===g||De===f||De===z||De===V||typeof De=="object"&&De!==null&&(De.$$typeof===ne||De.$$typeof===H||De.$$typeof===_||De.$$typeof===c||De.$$typeof===O||De.$$typeof===q||De.$$typeof===he||De.$$typeof===Ae||De.$$typeof===ae)},Li.typeOf=Ee,Li}var HS;function nz(){return HS||(HS=1,Q1.exports=tz()),Q1.exports}var K1,WS;function iz(){if(WS)return K1;WS=1;var i=nz(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},d={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},f={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},g={};g[i.ForwardRef]=d,g[i.Memo]=f;function _(ne){return i.isMemo(ne)?f:g[ne.$$typeof]||t}var c=Object.defineProperty,A=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,O=Object.getOwnPropertyDescriptor,z=Object.getPrototypeOf,V=Object.prototype;function H(ne,ae,q){if(typeof ae!="string"){if(V){var he=z(ae);he&&he!==V&&H(ne,he,q)}var Ae=A(ae);D&&(Ae=Ae.concat(D(ae)));for(var Ee=_(ne),Fe=_(ae),De=0;De<Ae.length;++De){var ke=Ae[De];if(!a[ke]&&!(q&&q[ke])&&!(Fe&&Fe[ke])&&!(Ee&&Ee[ke])){var ze=O(ae,ke);try{c(ne,ke,ze)}catch{}}}}return ne}return K1=H,K1}iz();var rz=!0;function az(i,t,a){var d="";return a.split(" ").forEach(function(f){i[f]!==void 0?t.push(i[f]+";"):f&&(d+=f+" ")}),d}var xC=function(t,a,d){var f=t.key+"-"+a.name;(d===!1||rz===!1)&&t.registered[f]===void 0&&(t.registered[f]=a.styles)},oz=function(t,a,d){xC(t,a,d);var f=t.key+"-"+a.name;if(t.inserted[a.name]===void 0){var g=a;do t.insert(a===g?"."+f:"",g,t.sheet,!0),g=g.next;while(g!==void 0)}};function sz(i){for(var t=0,a,d=0,f=i.length;f>=4;++d,f-=4)a=i.charCodeAt(d)&255|(i.charCodeAt(++d)&255)<<8|(i.charCodeAt(++d)&255)<<16|(i.charCodeAt(++d)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,t=(a&65535)*1540483477+((a>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(f){case 3:t^=(i.charCodeAt(d+2)&255)<<16;case 2:t^=(i.charCodeAt(d+1)&255)<<8;case 1:t^=i.charCodeAt(d)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var lz={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},cz=/[A-Z]|^ms/g,uz=/_EMO_([^_]+?)_([^]*?)_EMO_/g,wC=function(t){return t.charCodeAt(1)===45},XS=function(t){return t!=null&&typeof t!="boolean"},J1=YP(function(i){return wC(i)?i:i.replace(cz,"-$&").toLowerCase()}),QS=function(t,a){switch(t){case"animation":case"animationName":if(typeof a=="string")return a.replace(uz,function(d,f,g){return mh={name:f,styles:g,next:mh},f})}return lz[t]!==1&&!wC(t)&&typeof a=="number"&&a!==0?a+"px":a};function nv(i,t,a){if(a==null)return"";var d=a;if(d.__emotion_styles!==void 0)return d;switch(typeof a){case"boolean":return"";case"object":{var f=a;if(f.anim===1)return mh={name:f.name,styles:f.styles,next:mh},f.name;var g=a;if(g.styles!==void 0){var _=g.next;if(_!==void 0)for(;_!==void 0;)mh={name:_.name,styles:_.styles,next:mh},_=_.next;var c=g.styles+";";return c}return hz(i,t,a)}case"function":{if(i!==void 0){var A=mh,D=a(i);return mh=A,nv(i,t,D)}break}}var O=a;return O}function hz(i,t,a){var d="";if(Array.isArray(a))for(var f=0;f<a.length;f++)d+=nv(i,t,a[f])+";";else for(var g in a){var _=a[g];if(typeof _!="object"){var c=_;XS(c)&&(d+=J1(g)+":"+QS(g,c)+";")}else if(Array.isArray(_)&&typeof _[0]=="string"&&t==null)for(var A=0;A<_.length;A++)XS(_[A])&&(d+=J1(g)+":"+QS(g,_[A])+";");else{var D=nv(i,t,_);switch(g){case"animation":case"animationName":{d+=J1(g)+":"+D+";";break}default:d+=g+"{"+D+"}"}}}return d}var KS=/label:\s*([^\s;{]+)\s*(;|$)/g,mh;function TC(i,t,a){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var d=!0,f="";mh=void 0;var g=i[0];if(g==null||g.raw===void 0)d=!1,f+=nv(a,t,g);else{var _=g;f+=_[0]}for(var c=1;c<i.length;c++)if(f+=nv(a,t,i[c]),d){var A=g;f+=A[c]}KS.lastIndex=0;for(var D="",O;(O=KS.exec(f))!==null;)D+="-"+O[1];var z=sz(f)+D;return{name:z,styles:f,next:mh}}var dz=function(t){return t()},fz=AT.useInsertionEffect?AT.useInsertionEffect:!1,pz=fz||dz,SC=ie.createContext(typeof HTMLElement<"u"?ez({key:"css"}):null);SC.Provider;var mz=function(t){return ie.forwardRef(function(a,d){var f=ie.useContext(SC);return t(a,f,d)})},gz=ie.createContext({}),G2={}.hasOwnProperty,Ow="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",yz=function(t,a){var d={};for(var f in a)G2.call(a,f)&&(d[f]=a[f]);return d[Ow]=t,d},_z=function(t){var a=t.cache,d=t.serialized,f=t.isStringTag;return xC(a,d,f),pz(function(){return oz(a,d,f)}),null},vz=mz(function(i,t,a){var d=i.css;typeof d=="string"&&t.registered[d]!==void 0&&(d=t.registered[d]);var f=i[Ow],g=[d],_="";typeof i.className=="string"?_=az(t.registered,g,i.className):i.className!=null&&(_=i.className+" ");var c=TC(g,void 0,ie.useContext(gz));_+=t.key+"-"+c.name;var A={};for(var D in i)G2.call(i,D)&&D!=="css"&&D!==Ow&&(A[D]=i[D]);return A.className=_,a&&(A.ref=a),ie.createElement(ie.Fragment,null,ie.createElement(_z,{cache:t,serialized:c,isStringTag:typeof f=="string"}),ie.createElement(f,A))}),bz=vz,ln=function(t,a){var d=arguments;if(a==null||!G2.call(a,"css"))return ie.createElement.apply(void 0,d);var f=d.length,g=new Array(f);g[0]=bz,g[1]=yz(t,a);for(var _=2;_<f;_++)g[_]=d[_];return ie.createElement.apply(null,g)};(function(i){var t;t||(t=i.JSX||(i.JSX={}))})(ln||(ln={}));function Z2(){for(var i=arguments.length,t=new Array(i),a=0;a<i;a++)t[a]=arguments[a];return TC(t)}function xz(){var i=Z2.apply(void 0,arguments),t="animation-"+i.name;return{name:t,styles:"@keyframes "+t+"{"+i.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function wz(i,t){return t||(t=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(t)}}))}const Tz=Math.min,Sz=Math.max,cx=Math.round,jb=Math.floor,ux=i=>({x:i,y:i});function Ez(i){const{x:t,y:a,width:d,height:f}=i;return{width:d,height:f,top:a,left:t,right:t+d,bottom:a+f,x:t,y:a}}function Gx(){return typeof window<"u"}function EC(i){return MC(i)?(i.nodeName||"").toLowerCase():"#document"}function ef(i){var t;return(i==null||(t=i.ownerDocument)==null?void 0:t.defaultView)||window}function AC(i){var t;return(t=(MC(i)?i.ownerDocument:i.document)||window.document)==null?void 0:t.documentElement}function MC(i){return Gx()?i instanceof Node||i instanceof ef(i).Node:!1}function Az(i){return Gx()?i instanceof Element||i instanceof ef(i).Element:!1}function $2(i){return Gx()?i instanceof HTMLElement||i instanceof ef(i).HTMLElement:!1}function JS(i){return!Gx()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof ef(i).ShadowRoot}function CC(i){const{overflow:t,overflowX:a,overflowY:d,display:f}=Y2(i);return/auto|scroll|overlay|hidden|clip/.test(t+d+a)&&!["inline","contents"].includes(f)}function Mz(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Cz(i){return["html","body","#document"].includes(EC(i))}function Y2(i){return ef(i).getComputedStyle(i)}function Dz(i){if(EC(i)==="html")return i;const t=i.assignedSlot||i.parentNode||JS(i)&&i.host||AC(i);return JS(t)?t.host:t}function DC(i){const t=Dz(i);return Cz(t)?i.ownerDocument?i.ownerDocument.body:i.body:$2(t)&&CC(t)?t:DC(t)}function hx(i,t,a){var d;t===void 0&&(t=[]),a===void 0&&(a=!0);const f=DC(i),g=f===((d=i.ownerDocument)==null?void 0:d.body),_=ef(f);if(g){const c=Lw(_);return t.concat(_,_.visualViewport||[],CC(f)?f:[],c&&a?hx(c):[])}return t.concat(f,hx(f,[],a))}function Lw(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function Iz(i){const t=Y2(i);let a=parseFloat(t.width)||0,d=parseFloat(t.height)||0;const f=$2(i),g=f?i.offsetWidth:a,_=f?i.offsetHeight:d,c=cx(a)!==g||cx(d)!==_;return c&&(a=g,d=_),{width:a,height:d,$:c}}function q2(i){return Az(i)?i:i.contextElement}function eE(i){const t=q2(i);if(!$2(t))return ux(1);const a=t.getBoundingClientRect(),{width:d,height:f,$:g}=Iz(t);let _=(g?cx(a.width):a.width)/d,c=(g?cx(a.height):a.height)/f;return(!_||!Number.isFinite(_))&&(_=1),(!c||!Number.isFinite(c))&&(c=1),{x:_,y:c}}const Rz=ux(0);function kz(i){const t=ef(i);return!Mz()||!t.visualViewport?Rz:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Oz(i,t,a){return!1}function tE(i,t,a,d){t===void 0&&(t=!1);const f=i.getBoundingClientRect(),g=q2(i);let _=ux(1);t&&(_=eE(i));const c=Oz()?kz(g):ux(0);let A=(f.left+c.x)/_.x,D=(f.top+c.y)/_.y,O=f.width/_.x,z=f.height/_.y;if(g){const V=ef(g),H=d;let ne=V,ae=Lw(ne);for(;ae&&d&&H!==ne;){const q=eE(ae),he=ae.getBoundingClientRect(),Ae=Y2(ae),Ee=he.left+(ae.clientLeft+parseFloat(Ae.paddingLeft))*q.x,Fe=he.top+(ae.clientTop+parseFloat(Ae.paddingTop))*q.y;A*=q.x,D*=q.y,O*=q.x,z*=q.y,A+=Ee,D+=Fe,ne=ef(ae),ae=Lw(ne)}}return Ez({width:O,height:z,x:A,y:D})}function Lz(i,t){let a=null,d;const f=AC(i);function g(){var c;clearTimeout(d),(c=a)==null||c.disconnect(),a=null}function _(c,A){c===void 0&&(c=!1),A===void 0&&(A=1),g();const{left:D,top:O,width:z,height:V}=i.getBoundingClientRect();if(c||t(),!z||!V)return;const H=jb(O),ne=jb(f.clientWidth-(D+z)),ae=jb(f.clientHeight-(O+V)),q=jb(D),Ae={rootMargin:-H+"px "+-ne+"px "+-ae+"px "+-q+"px",threshold:Sz(0,Tz(1,A))||1};let Ee=!0;function Fe(De){const ke=De[0].intersectionRatio;if(ke!==A){if(!Ee)return _();ke?_(!1,ke):d=setTimeout(()=>{_(!1,1e-7)},1e3)}Ee=!1}try{a=new IntersectionObserver(Fe,{...Ae,root:f.ownerDocument})}catch{a=new IntersectionObserver(Fe,Ae)}a.observe(i)}return _(!0),g}function Nz(i,t,a,d){d===void 0&&(d={});const{ancestorScroll:f=!0,ancestorResize:g=!0,elementResize:_=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:A=!1}=d,D=q2(i),O=f||g?[...D?hx(D):[],...hx(t)]:[];O.forEach(he=>{f&&he.addEventListener("scroll",a,{passive:!0}),g&&he.addEventListener("resize",a)});const z=D&&c?Lz(D,a):null;let V=-1,H=null;_&&(H=new ResizeObserver(he=>{let[Ae]=he;Ae&&Ae.target===D&&H&&(H.unobserve(t),cancelAnimationFrame(V),V=requestAnimationFrame(()=>{var Ee;(Ee=H)==null||Ee.observe(t)})),a()}),D&&!A&&H.observe(D),H.observe(t));let ne,ae=A?tE(i):null;A&&q();function q(){const he=tE(i);ae&&(he.x!==ae.x||he.y!==ae.y||he.width!==ae.width||he.height!==ae.height)&&a(),ae=he,ne=requestAnimationFrame(q)}return a(),()=>{var he;O.forEach(Ae=>{f&&Ae.removeEventListener("scroll",a),g&&Ae.removeEventListener("resize",a)}),z?.(),(he=H)==null||he.disconnect(),H=null,A&&cancelAnimationFrame(ne)}}var Nw=ie.useLayoutEffect,Pz=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],dx=function(){};function zz(i,t){return t?t[0]==="-"?i+t:i+"__"+t:i}function Fz(i,t){for(var a=arguments.length,d=new Array(a>2?a-2:0),f=2;f<a;f++)d[f-2]=arguments[f];var g=[].concat(d);if(t&&i)for(var _ in t)t.hasOwnProperty(_)&&t[_]&&g.push("".concat(zz(i,_)));return g.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var nE=function(t){return qz(t)?t.filter(Boolean):Jm(t)==="object"&&t!==null?[t]:[]},IC=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var a=af(t,Pz);return un({},a)},qr=function(t,a,d){var f=t.cx,g=t.getStyles,_=t.getClassNames,c=t.className;return{css:g(a,t),className:f(d??{},_(a,t),c)}};function Zx(i){return[document.documentElement,document.body,window].indexOf(i)>-1}function jz(i){return Zx(i)?window.innerHeight:i.clientHeight}function RC(i){return Zx(i)?window.pageYOffset:i.scrollTop}function fx(i,t){if(Zx(i)){window.scrollTo(0,t);return}i.scrollTop=t}function Bz(i){var t=getComputedStyle(i),a=t.position==="absolute",d=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var f=i;f=f.parentElement;)if(t=getComputedStyle(f),!(a&&t.position==="static")&&d.test(t.overflow+t.overflowY+t.overflowX))return f;return document.documentElement}function Vz(i,t,a,d){return a*((i=i/d-1)*i*i+1)+t}function Bb(i,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:dx,f=RC(i),g=t-f,_=10,c=0;function A(){c+=_;var D=Vz(c,f,g,a);fx(i,D),c<a?window.requestAnimationFrame(A):d(i)}A()}function iE(i,t){var a=i.getBoundingClientRect(),d=t.getBoundingClientRect(),f=t.offsetHeight/3;d.bottom+f>a.bottom?fx(i,Math.min(t.offsetTop+t.clientHeight-i.offsetHeight+f,i.scrollHeight)):d.top-f<a.top&&fx(i,Math.max(t.offsetTop-f,0))}function Uz(i){var t=i.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function rE(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Gz(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var kC=!1,Zz={get passive(){return kC=!0}},Vb=typeof window<"u"?window:{};Vb.addEventListener&&Vb.removeEventListener&&(Vb.addEventListener("p",dx,Zz),Vb.removeEventListener("p",dx,!1));var $z=kC;function Yz(i){return i!=null}function qz(i){return Array.isArray(i)}function Ub(i,t,a){return i?t:a}var Hz=function(t){for(var a=arguments.length,d=new Array(a>1?a-1:0),f=1;f<a;f++)d[f-1]=arguments[f];var g=Object.entries(t).filter(function(_){var c=Yd(_,1),A=c[0];return!d.includes(A)});return g.reduce(function(_,c){var A=Yd(c,2),D=A[0],O=A[1];return _[D]=O,_},{})},Wz=["children","innerProps"],Xz=["children","innerProps"];function Qz(i){var t=i.maxHeight,a=i.menuEl,d=i.minHeight,f=i.placement,g=i.shouldScroll,_=i.isFixedPosition,c=i.controlHeight,A=Bz(a),D={placement:"bottom",maxHeight:t};if(!a||!a.offsetParent)return D;var O=A.getBoundingClientRect(),z=O.height,V=a.getBoundingClientRect(),H=V.bottom,ne=V.height,ae=V.top,q=a.offsetParent.getBoundingClientRect(),he=q.top,Ae=_?window.innerHeight:jz(A),Ee=RC(A),Fe=parseInt(getComputedStyle(a).marginBottom,10),De=parseInt(getComputedStyle(a).marginTop,10),ke=he-De,ze=Ae-ae,rt=ke+Ee,Se=z-Ee-ae,nt=H-Ae+Ee+Fe,Mt=Ee+ae-De,Ct=160;switch(f){case"auto":case"bottom":if(ze>=ne)return{placement:"bottom",maxHeight:t};if(Se>=ne&&!_)return g&&Bb(A,nt,Ct),{placement:"bottom",maxHeight:t};if(!_&&Se>=d||_&&ze>=d){g&&Bb(A,nt,Ct);var Ft=_?ze-Fe:Se-Fe;return{placement:"bottom",maxHeight:Ft}}if(f==="auto"||_){var Ut=t,Gt=_?ke:rt;return Gt>=d&&(Ut=Math.min(Gt-Fe-c,t)),{placement:"top",maxHeight:Ut}}if(f==="bottom")return g&&fx(A,nt),{placement:"bottom",maxHeight:t};break;case"top":if(ke>=ne)return{placement:"top",maxHeight:t};if(rt>=ne&&!_)return g&&Bb(A,Mt,Ct),{placement:"top",maxHeight:t};if(!_&&rt>=d||_&&ke>=d){var Ge=t;return(!_&&rt>=d||_&&ke>=d)&&(Ge=_?ke-De:rt-De),g&&Bb(A,Mt,Ct),{placement:"top",maxHeight:Ge}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(f,'".'))}return D}function Kz(i){var t={bottom:"top",top:"bottom"};return i?t[i]:"bottom"}var OC=function(t){return t==="auto"?"bottom":t},Jz=function(t,a){var d,f=t.placement,g=t.theme,_=g.borderRadius,c=g.spacing,A=g.colors;return un((d={label:"menu"},k_(d,Kz(f),"100%"),k_(d,"position","absolute"),k_(d,"width","100%"),k_(d,"zIndex",1),d),a?{}:{backgroundColor:A.neutral0,borderRadius:_,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},LC=ie.createContext(null),e4=function(t){var a=t.children,d=t.minMenuHeight,f=t.maxMenuHeight,g=t.menuPlacement,_=t.menuPosition,c=t.menuShouldScrollIntoView,A=t.theme,D=ie.useContext(LC)||{},O=D.setPortalPlacement,z=ie.useRef(null),V=ie.useState(f),H=Yd(V,2),ne=H[0],ae=H[1],q=ie.useState(null),he=Yd(q,2),Ae=he[0],Ee=he[1],Fe=A.spacing.controlHeight;return Nw(function(){var De=z.current;if(De){var ke=_==="fixed",ze=c&&!ke,rt=Qz({maxHeight:f,menuEl:De,minHeight:d,placement:g,shouldScroll:ze,isFixedPosition:ke,controlHeight:Fe});ae(rt.maxHeight),Ee(rt.placement),O?.(rt.placement)}},[f,g,_,c,d,O,Fe]),a({ref:z,placerProps:un(un({},t),{},{placement:Ae||OC(g),maxHeight:ne})})},t4=function(t){var a=t.children,d=t.innerRef,f=t.innerProps;return ln("div",fn({},qr(t,"menu",{menu:!0}),{ref:d},f),a)},n4=t4,i4=function(t,a){var d=t.maxHeight,f=t.theme.spacing.baseUnit;return un({maxHeight:d,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},a?{}:{paddingBottom:f,paddingTop:f})},r4=function(t){var a=t.children,d=t.innerProps,f=t.innerRef,g=t.isMulti;return ln("div",fn({},qr(t,"menuList",{"menu-list":!0,"menu-list--is-multi":g}),{ref:f},d),a)},NC=function(t,a){var d=t.theme,f=d.spacing.baseUnit,g=d.colors;return un({textAlign:"center"},a?{}:{color:g.neutral40,padding:"".concat(f*2,"px ").concat(f*3,"px")})},a4=NC,o4=NC,s4=function(t){var a=t.children,d=a===void 0?"No options":a,f=t.innerProps,g=af(t,Wz);return ln("div",fn({},qr(un(un({},g),{},{children:d,innerProps:f}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),f),d)},l4=function(t){var a=t.children,d=a===void 0?"Loading...":a,f=t.innerProps,g=af(t,Xz);return ln("div",fn({},qr(un(un({},g),{},{children:d,innerProps:f}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),f),d)},c4=function(t){var a=t.rect,d=t.offset,f=t.position;return{left:a.left,position:f,top:d,width:a.width,zIndex:1}},u4=function(t){var a=t.appendTo,d=t.children,f=t.controlElement,g=t.innerProps,_=t.menuPlacement,c=t.menuPosition,A=ie.useRef(null),D=ie.useRef(null),O=ie.useState(OC(_)),z=Yd(O,2),V=z[0],H=z[1],ne=ie.useMemo(function(){return{setPortalPlacement:H}},[]),ae=ie.useState(null),q=Yd(ae,2),he=q[0],Ae=q[1],Ee=ie.useCallback(function(){if(f){var ze=Uz(f),rt=c==="fixed"?0:window.pageYOffset,Se=ze[V]+rt;(Se!==he?.offset||ze.left!==he?.rect.left||ze.width!==he?.rect.width)&&Ae({offset:Se,rect:ze})}},[f,c,V,he?.offset,he?.rect.left,he?.rect.width]);Nw(function(){Ee()},[Ee]);var Fe=ie.useCallback(function(){typeof D.current=="function"&&(D.current(),D.current=null),f&&A.current&&(D.current=Nz(f,A.current,Ee,{elementResize:"ResizeObserver"in window}))},[f,Ee]);Nw(function(){Fe()},[Fe]);var De=ie.useCallback(function(ze){A.current=ze,Fe()},[Fe]);if(!a&&c!=="fixed"||!he)return null;var ke=ln("div",fn({ref:De},qr(un(un({},t),{},{offset:he.offset,position:c,rect:he.rect}),"menuPortal",{"menu-portal":!0}),g),d);return ln(LC.Provider,{value:ne},a?Mx.createPortal(ke,a):ke)},h4=function(t){var a=t.isDisabled,d=t.isRtl;return{label:"container",direction:d?"rtl":void 0,pointerEvents:a?"none":void 0,position:"relative"}},d4=function(t){var a=t.children,d=t.innerProps,f=t.isDisabled,g=t.isRtl;return ln("div",fn({},qr(t,"container",{"--is-disabled":f,"--is-rtl":g}),d),a)},f4=function(t,a){var d=t.theme.spacing,f=t.isMulti,g=t.hasValue,_=t.selectProps.controlShouldRenderValue;return un({alignItems:"center",display:f&&g&&_?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},a?{}:{padding:"".concat(d.baseUnit/2,"px ").concat(d.baseUnit*2,"px")})},p4=function(t){var a=t.children,d=t.innerProps,f=t.isMulti,g=t.hasValue;return ln("div",fn({},qr(t,"valueContainer",{"value-container":!0,"value-container--is-multi":f,"value-container--has-value":g}),d),a)},m4=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},g4=function(t){var a=t.children,d=t.innerProps;return ln("div",fn({},qr(t,"indicatorsContainer",{indicators:!0}),d),a)},aE,y4=["size"],_4=["innerProps","isRtl","size"],v4={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},PC=function(t){var a=t.size,d=af(t,y4);return ln("svg",fn({height:a,width:a,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:v4},d))},H2=function(t){return ln(PC,fn({size:20},t),ln("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},zC=function(t){return ln(PC,fn({size:20},t),ln("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},FC=function(t,a){var d=t.isFocused,f=t.theme,g=f.spacing.baseUnit,_=f.colors;return un({label:"indicatorContainer",display:"flex",transition:"color 150ms"},a?{}:{color:d?_.neutral60:_.neutral20,padding:g*2,":hover":{color:d?_.neutral80:_.neutral40}})},b4=FC,x4=function(t){var a=t.children,d=t.innerProps;return ln("div",fn({},qr(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),d),a||ln(zC,null))},w4=FC,T4=function(t){var a=t.children,d=t.innerProps;return ln("div",fn({},qr(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),d),a||ln(H2,null))},S4=function(t,a){var d=t.isDisabled,f=t.theme,g=f.spacing.baseUnit,_=f.colors;return un({label:"indicatorSeparator",alignSelf:"stretch",width:1},a?{}:{backgroundColor:d?_.neutral10:_.neutral20,marginBottom:g*2,marginTop:g*2})},E4=function(t){var a=t.innerProps;return ln("span",fn({},a,qr(t,"indicatorSeparator",{"indicator-separator":!0})))},A4=xz(aE||(aE=wz([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),M4=function(t,a){var d=t.isFocused,f=t.size,g=t.theme,_=g.colors,c=g.spacing.baseUnit;return un({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:f,lineHeight:1,marginRight:f,textAlign:"center",verticalAlign:"middle"},a?{}:{color:d?_.neutral60:_.neutral20,padding:c*2})},ew=function(t){var a=t.delay,d=t.offset;return ln("span",{css:Z2({animation:"".concat(A4," 1s ease-in-out ").concat(a,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:d?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},C4=function(t){var a=t.innerProps,d=t.isRtl,f=t.size,g=f===void 0?4:f,_=af(t,_4);return ln("div",fn({},qr(un(un({},_),{},{innerProps:a,isRtl:d,size:g}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),a),ln(ew,{delay:0,offset:d}),ln(ew,{delay:160,offset:!0}),ln(ew,{delay:320,offset:!d}))},D4=function(t,a){var d=t.isDisabled,f=t.isFocused,g=t.theme,_=g.colors,c=g.borderRadius,A=g.spacing;return un({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:A.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},a?{}:{backgroundColor:d?_.neutral5:_.neutral0,borderColor:d?_.neutral10:f?_.primary:_.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:f?"0 0 0 1px ".concat(_.primary):void 0,"&:hover":{borderColor:f?_.primary:_.neutral30}})},I4=function(t){var a=t.children,d=t.isDisabled,f=t.isFocused,g=t.innerRef,_=t.innerProps,c=t.menuIsOpen;return ln("div",fn({ref:g},qr(t,"control",{control:!0,"control--is-disabled":d,"control--is-focused":f,"control--menu-is-open":c}),_,{"aria-disabled":d||void 0}),a)},R4=I4,k4=["data"],O4=function(t,a){var d=t.theme.spacing;return a?{}:{paddingBottom:d.baseUnit*2,paddingTop:d.baseUnit*2}},L4=function(t){var a=t.children,d=t.cx,f=t.getStyles,g=t.getClassNames,_=t.Heading,c=t.headingProps,A=t.innerProps,D=t.label,O=t.theme,z=t.selectProps;return ln("div",fn({},qr(t,"group",{group:!0}),A),ln(_,fn({},c,{selectProps:z,theme:O,getStyles:f,getClassNames:g,cx:d}),D),ln("div",null,a))},N4=function(t,a){var d=t.theme,f=d.colors,g=d.spacing;return un({label:"group",cursor:"default",display:"block"},a?{}:{color:f.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:g.baseUnit*3,paddingRight:g.baseUnit*3,textTransform:"uppercase"})},P4=function(t){var a=IC(t);a.data;var d=af(a,k4);return ln("div",fn({},qr(t,"groupHeading",{"group-heading":!0}),d))},z4=L4,F4=["innerRef","isDisabled","isHidden","inputClassName"],j4=function(t,a){var d=t.isDisabled,f=t.value,g=t.theme,_=g.spacing,c=g.colors;return un(un({visibility:d?"hidden":"visible",transform:f?"translateZ(0)":""},B4),a?{}:{margin:_.baseUnit/2,paddingBottom:_.baseUnit/2,paddingTop:_.baseUnit/2,color:c.neutral80})},jC={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},B4={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":un({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},jC)},V4=function(t){return un({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},jC)},U4=function(t){var a=t.cx,d=t.value,f=IC(t),g=f.innerRef,_=f.isDisabled,c=f.isHidden,A=f.inputClassName,D=af(f,F4);return ln("div",fn({},qr(t,"input",{"input-container":!0}),{"data-value":d||""}),ln("input",fn({className:a({input:!0},A),ref:g,style:V4(c),disabled:_},D)))},G4=U4,Z4=function(t,a){var d=t.theme,f=d.spacing,g=d.borderRadius,_=d.colors;return un({label:"multiValue",display:"flex",minWidth:0},a?{}:{backgroundColor:_.neutral10,borderRadius:g/2,margin:f.baseUnit/2})},$4=function(t,a){var d=t.theme,f=d.borderRadius,g=d.colors,_=t.cropWithEllipsis;return un({overflow:"hidden",textOverflow:_||_===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},a?{}:{borderRadius:f/2,color:g.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Y4=function(t,a){var d=t.theme,f=d.spacing,g=d.borderRadius,_=d.colors,c=t.isFocused;return un({alignItems:"center",display:"flex"},a?{}:{borderRadius:g/2,backgroundColor:c?_.dangerLight:void 0,paddingLeft:f.baseUnit,paddingRight:f.baseUnit,":hover":{backgroundColor:_.dangerLight,color:_.danger}})},BC=function(t){var a=t.children,d=t.innerProps;return ln("div",d,a)},q4=BC,H4=BC;function W4(i){var t=i.children,a=i.innerProps;return ln("div",fn({role:"button"},a),t||ln(H2,{size:14}))}var X4=function(t){var a=t.children,d=t.components,f=t.data,g=t.innerProps,_=t.isDisabled,c=t.removeProps,A=t.selectProps,D=d.Container,O=d.Label,z=d.Remove;return ln(D,{data:f,innerProps:un(un({},qr(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":_})),g),selectProps:A},ln(O,{data:f,innerProps:un({},qr(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:A},a),ln(z,{data:f,innerProps:un(un({},qr(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(a||"option")},c),selectProps:A}))},Q4=X4,K4=function(t,a){var d=t.isDisabled,f=t.isFocused,g=t.isSelected,_=t.theme,c=_.spacing,A=_.colors;return un({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},a?{}:{backgroundColor:g?A.primary:f?A.primary25:"transparent",color:d?A.neutral20:g?A.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:d?void 0:g?A.primary:A.primary50}})},J4=function(t){var a=t.children,d=t.isDisabled,f=t.isFocused,g=t.isSelected,_=t.innerRef,c=t.innerProps;return ln("div",fn({},qr(t,"option",{option:!0,"option--is-disabled":d,"option--is-focused":f,"option--is-selected":g}),{ref:_,"aria-disabled":d},c),a)},eF=J4,tF=function(t,a){var d=t.theme,f=d.spacing,g=d.colors;return un({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},a?{}:{color:g.neutral50,marginLeft:f.baseUnit/2,marginRight:f.baseUnit/2})},nF=function(t){var a=t.children,d=t.innerProps;return ln("div",fn({},qr(t,"placeholder",{placeholder:!0}),d),a)},iF=nF,rF=function(t,a){var d=t.isDisabled,f=t.theme,g=f.spacing,_=f.colors;return un({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},a?{}:{color:d?_.neutral40:_.neutral80,marginLeft:g.baseUnit/2,marginRight:g.baseUnit/2})},aF=function(t){var a=t.children,d=t.isDisabled,f=t.innerProps;return ln("div",fn({},qr(t,"singleValue",{"single-value":!0,"single-value--is-disabled":d}),f),a)},oF=aF,sF={ClearIndicator:T4,Control:R4,DropdownIndicator:x4,DownChevron:zC,CrossIcon:H2,Group:z4,GroupHeading:P4,IndicatorsContainer:g4,IndicatorSeparator:E4,Input:G4,LoadingIndicator:C4,Menu:n4,MenuList:r4,MenuPortal:u4,LoadingMessage:l4,NoOptionsMessage:s4,MultiValue:Q4,MultiValueContainer:q4,MultiValueLabel:H4,MultiValueRemove:W4,Option:eF,Placeholder:iF,SelectContainer:d4,SingleValue:oF,ValueContainer:p4},lF=function(t){return un(un({},sF),t.components)},oE=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function cF(i,t){return!!(i===t||oE(i)&&oE(t))}function uF(i,t){if(i.length!==t.length)return!1;for(var a=0;a<i.length;a++)if(!cF(i[a],t[a]))return!1;return!0}function hF(i,t){t===void 0&&(t=uF);var a=null;function d(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];if(a&&a.lastThis===this&&t(f,a.lastArgs))return a.lastResult;var _=i.apply(this,f);return a={lastResult:_,lastArgs:f,lastThis:this},_}return d.clear=function(){a=null},d}var dF={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},fF=function(t){return ln("span",fn({css:dF},t))},sE=fF,pF={guidance:function(t){var a=t.isSearchable,d=t.isMulti,f=t.tabSelectsValue,g=t.context,_=t.isInitialFocus;switch(g){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(f?", press Tab to select the option and exit the menu":"",".");case"input":return _?"".concat(t["aria-label"]||"Select"," is focused ").concat(a?",type to refine list":"",", press Down to open the menu, ").concat(d?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var a=t.action,d=t.label,f=d===void 0?"":d,g=t.labels,_=t.isDisabled;switch(a){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(f,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(g.length>1?"s":""," ").concat(g.join(","),", selected.");case"select-option":return _?"option ".concat(f," is disabled. Select another option."):"option ".concat(f,", selected.");default:return""}},onFocus:function(t){var a=t.context,d=t.focused,f=t.options,g=t.label,_=g===void 0?"":g,c=t.selectValue,A=t.isDisabled,D=t.isSelected,O=t.isAppleDevice,z=function(ae,q){return ae&&ae.length?"".concat(ae.indexOf(q)+1," of ").concat(ae.length):""};if(a==="value"&&c)return"value ".concat(_," focused, ").concat(z(c,d),".");if(a==="menu"&&O){var V=A?" disabled":"",H="".concat(D?" selected":"").concat(V);return"".concat(_).concat(H,", ").concat(z(f,d),".")}return""},onFilter:function(t){var a=t.inputValue,d=t.resultsMessage;return"".concat(d).concat(a?" for search term "+a:"",".")}},mF=function(t){var a=t.ariaSelection,d=t.focusedOption,f=t.focusedValue,g=t.focusableOptions,_=t.isFocused,c=t.selectValue,A=t.selectProps,D=t.id,O=t.isAppleDevice,z=A.ariaLiveMessages,V=A.getOptionLabel,H=A.inputValue,ne=A.isMulti,ae=A.isOptionDisabled,q=A.isSearchable,he=A.menuIsOpen,Ae=A.options,Ee=A.screenReaderStatus,Fe=A.tabSelectsValue,De=A.isLoading,ke=A["aria-label"],ze=A["aria-live"],rt=ie.useMemo(function(){return un(un({},pF),z||{})},[z]),Se=ie.useMemo(function(){var Gt="";if(a&&rt.onChange){var Ge=a.option,ct=a.options,St=a.removedValue,pt=a.removedValues,Vt=a.value,Oe=function(rn){return Array.isArray(rn)?null:rn},et=St||Ge||Oe(Vt),bt=et?V(et):"",Tt=ct||pt||void 0,Nt=Tt?Tt.map(V):[],zt=un({isDisabled:et&&ae(et,c),label:bt,labels:Nt},a);Gt=rt.onChange(zt)}return Gt},[a,rt,ae,c,V]),nt=ie.useMemo(function(){var Gt="",Ge=d||f,ct=!!(d&&c&&c.includes(d));if(Ge&&rt.onFocus){var St={focused:Ge,label:V(Ge),isDisabled:ae(Ge,c),isSelected:ct,options:g,context:Ge===d?"menu":"value",selectValue:c,isAppleDevice:O};Gt=rt.onFocus(St)}return Gt},[d,f,V,ae,rt,g,c,O]),Mt=ie.useMemo(function(){var Gt="";if(he&&Ae.length&&!De&&rt.onFilter){var Ge=Ee({count:g.length});Gt=rt.onFilter({inputValue:H,resultsMessage:Ge})}return Gt},[g,H,he,rt,Ae,Ee,De]),Ct=a?.action==="initial-input-focus",Ft=ie.useMemo(function(){var Gt="";if(rt.guidance){var Ge=f?"value":he?"menu":"input";Gt=rt.guidance({"aria-label":ke,context:Ge,isDisabled:d&&ae(d,c),isMulti:ne,isSearchable:q,tabSelectsValue:Fe,isInitialFocus:Ct})}return Gt},[ke,d,f,ne,ae,q,he,rt,c,Fe,Ct]),Ut=ln(ie.Fragment,null,ln("span",{id:"aria-selection"},Se),ln("span",{id:"aria-focused"},nt),ln("span",{id:"aria-results"},Mt),ln("span",{id:"aria-guidance"},Ft));return ln(ie.Fragment,null,ln(sE,{id:D},Ct&&Ut),ln(sE,{"aria-live":ze,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},_&&!Ct&&Ut))},gF=mF,Pw=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],yF=new RegExp("["+Pw.map(function(i){return i.letters}).join("")+"]","g"),VC={};for(var tw=0;tw<Pw.length;tw++)for(var nw=Pw[tw],iw=0;iw<nw.letters.length;iw++)VC[nw.letters[iw]]=nw.base;var UC=function(t){return t.replace(yF,function(a){return VC[a]})},_F=hF(UC),lE=function(t){return t.replace(/^\s+|\s+$/g,"")},vF=function(t){return"".concat(t.label," ").concat(t.value)},bF=function(t){return function(a,d){if(a.data.__isNew__)return!0;var f=un({ignoreCase:!0,ignoreAccents:!0,stringify:vF,trim:!0,matchFrom:"any"},t),g=f.ignoreCase,_=f.ignoreAccents,c=f.stringify,A=f.trim,D=f.matchFrom,O=A?lE(d):d,z=A?lE(c(a)):c(a);return g&&(O=O.toLowerCase(),z=z.toLowerCase()),_&&(O=_F(O),z=UC(z)),D==="start"?z.substr(0,O.length)===O:z.indexOf(O)>-1}},xF=["innerRef"];function wF(i){var t=i.innerRef,a=af(i,xF),d=Hz(a,"onExited","in","enter","exit","appear");return ln("input",fn({ref:t},d,{css:Z2({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var TF=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function SF(i){var t=i.isEnabled,a=i.onBottomArrive,d=i.onBottomLeave,f=i.onTopArrive,g=i.onTopLeave,_=ie.useRef(!1),c=ie.useRef(!1),A=ie.useRef(0),D=ie.useRef(null),O=ie.useCallback(function(q,he){if(D.current!==null){var Ae=D.current,Ee=Ae.scrollTop,Fe=Ae.scrollHeight,De=Ae.clientHeight,ke=D.current,ze=he>0,rt=Fe-De-Ee,Se=!1;rt>he&&_.current&&(d&&d(q),_.current=!1),ze&&c.current&&(g&&g(q),c.current=!1),ze&&he>rt?(a&&!_.current&&a(q),ke.scrollTop=Fe,Se=!0,_.current=!0):!ze&&-he>Ee&&(f&&!c.current&&f(q),ke.scrollTop=0,Se=!0,c.current=!0),Se&&TF(q)}},[a,d,f,g]),z=ie.useCallback(function(q){O(q,q.deltaY)},[O]),V=ie.useCallback(function(q){A.current=q.changedTouches[0].clientY},[]),H=ie.useCallback(function(q){var he=A.current-q.changedTouches[0].clientY;O(q,he)},[O]),ne=ie.useCallback(function(q){if(q){var he=$z?{passive:!1}:!1;q.addEventListener("wheel",z,he),q.addEventListener("touchstart",V,he),q.addEventListener("touchmove",H,he)}},[H,V,z]),ae=ie.useCallback(function(q){q&&(q.removeEventListener("wheel",z,!1),q.removeEventListener("touchstart",V,!1),q.removeEventListener("touchmove",H,!1))},[H,V,z]);return ie.useEffect(function(){if(t){var q=D.current;return ne(q),function(){ae(q)}}},[t,ne,ae]),function(q){D.current=q}}var cE=["boxSizing","height","overflow","paddingRight","position"],uE={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function hE(i){i.cancelable&&i.preventDefault()}function dE(i){i.stopPropagation()}function fE(){var i=this.scrollTop,t=this.scrollHeight,a=i+this.offsetHeight;i===0?this.scrollTop=1:a===t&&(this.scrollTop=i-1)}function pE(){return"ontouchstart"in window||navigator.maxTouchPoints}var mE=!!(typeof window<"u"&&window.document&&window.document.createElement),S_=0,xy={capture:!1,passive:!1};function EF(i){var t=i.isEnabled,a=i.accountForScrollbars,d=a===void 0?!0:a,f=ie.useRef({}),g=ie.useRef(null),_=ie.useCallback(function(A){if(mE){var D=document.body,O=D&&D.style;if(d&&cE.forEach(function(ne){var ae=O&&O[ne];f.current[ne]=ae}),d&&S_<1){var z=parseInt(f.current.paddingRight,10)||0,V=document.body?document.body.clientWidth:0,H=window.innerWidth-V+z||0;Object.keys(uE).forEach(function(ne){var ae=uE[ne];O&&(O[ne]=ae)}),O&&(O.paddingRight="".concat(H,"px"))}D&&pE()&&(D.addEventListener("touchmove",hE,xy),A&&(A.addEventListener("touchstart",fE,xy),A.addEventListener("touchmove",dE,xy))),S_+=1}},[d]),c=ie.useCallback(function(A){if(mE){var D=document.body,O=D&&D.style;S_=Math.max(S_-1,0),d&&S_<1&&cE.forEach(function(z){var V=f.current[z];O&&(O[z]=V)}),D&&pE()&&(D.removeEventListener("touchmove",hE,xy),A&&(A.removeEventListener("touchstart",fE,xy),A.removeEventListener("touchmove",dE,xy)))}},[d]);return ie.useEffect(function(){if(t){var A=g.current;return _(A),function(){c(A)}}},[t,_,c]),function(A){g.current=A}}var AF=function(t){var a=t.target;return a.ownerDocument.activeElement&&a.ownerDocument.activeElement.blur()},MF={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function CF(i){var t=i.children,a=i.lockEnabled,d=i.captureEnabled,f=d===void 0?!0:d,g=i.onBottomArrive,_=i.onBottomLeave,c=i.onTopArrive,A=i.onTopLeave,D=SF({isEnabled:f,onBottomArrive:g,onBottomLeave:_,onTopArrive:c,onTopLeave:A}),O=EF({isEnabled:a}),z=function(H){D(H),O(H)};return ln(ie.Fragment,null,a&&ln("div",{onClick:AF,css:MF}),t(z))}var DF={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},IF=function(t){var a=t.name,d=t.onFocus;return ln("input",{required:!0,name:a,tabIndex:-1,"aria-hidden":"true",onFocus:d,css:DF,value:"",onChange:function(){}})},RF=IF;function W2(i){var t;return typeof window<"u"&&window.navigator!=null?i.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function kF(){return W2(/^iPhone/i)}function GC(){return W2(/^Mac/i)}function OF(){return W2(/^iPad/i)||GC()&&navigator.maxTouchPoints>1}function LF(){return kF()||OF()}function NF(){return GC()||LF()}var PF=function(t){return t.label},zF=function(t){return t.label},FF=function(t){return t.value},jF=function(t){return!!t.isDisabled},BF={clearIndicator:w4,container:h4,control:D4,dropdownIndicator:b4,group:O4,groupHeading:N4,indicatorsContainer:m4,indicatorSeparator:S4,input:j4,loadingIndicator:M4,loadingMessage:o4,menu:Jz,menuList:i4,menuPortal:c4,multiValue:Z4,multiValueLabel:$4,multiValueRemove:Y4,noOptionsMessage:a4,option:K4,placeholder:tF,singleValue:rF,valueContainer:f4},VF={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},UF=4,ZC=4,GF=38,ZF=ZC*2,$F={baseUnit:ZC,controlHeight:GF,menuGutter:ZF},rw={borderRadius:UF,colors:VF,spacing:$F},YF={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:rE(),captureMenuScroll:!rE(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:bF(),formatGroupLabel:PF,getOptionLabel:zF,getOptionValue:FF,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:jF,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Gz(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var a=t.count;return"".concat(a," result").concat(a!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function gE(i,t,a,d){var f=qC(i,t,a),g=HC(i,t,a),_=YC(i,t),c=px(i,t);return{type:"option",data:t,isDisabled:f,isSelected:g,label:_,value:c,index:d}}function Kb(i,t){return i.options.map(function(a,d){if("options"in a){var f=a.options.map(function(_,c){return gE(i,_,t,c)}).filter(function(_){return _E(i,_)});return f.length>0?{type:"group",data:a,options:f,index:d}:void 0}var g=gE(i,a,t,d);return _E(i,g)?g:void 0}).filter(Yz)}function $C(i){return i.reduce(function(t,a){return a.type==="group"?t.push.apply(t,j2(a.options.map(function(d){return d.data}))):t.push(a.data),t},[])}function yE(i,t){return i.reduce(function(a,d){return d.type==="group"?a.push.apply(a,j2(d.options.map(function(f){return{data:f.data,id:"".concat(t,"-").concat(d.index,"-").concat(f.index)}}))):a.push({data:d.data,id:"".concat(t,"-").concat(d.index)}),a},[])}function qF(i,t){return $C(Kb(i,t))}function _E(i,t){var a=i.inputValue,d=a===void 0?"":a,f=t.data,g=t.isSelected,_=t.label,c=t.value;return(!XC(i)||!g)&&WC(i,{label:_,value:c,data:f},d)}function HF(i,t){var a=i.focusedValue,d=i.selectValue,f=d.indexOf(a);if(f>-1){var g=t.indexOf(a);if(g>-1)return a;if(f<t.length)return t[f]}return null}function WF(i,t){var a=i.focusedOption;return a&&t.indexOf(a)>-1?a:t[0]}var aw=function(t,a){var d,f=(d=t.find(function(g){return g.data===a}))===null||d===void 0?void 0:d.id;return f||null},YC=function(t,a){return t.getOptionLabel(a)},px=function(t,a){return t.getOptionValue(a)};function qC(i,t,a){return typeof i.isOptionDisabled=="function"?i.isOptionDisabled(t,a):!1}function HC(i,t,a){if(a.indexOf(t)>-1)return!0;if(typeof i.isOptionSelected=="function")return i.isOptionSelected(t,a);var d=px(i,t);return a.some(function(f){return px(i,f)===d})}function WC(i,t,a){return i.filterOption?i.filterOption(t,a):!0}var XC=function(t){var a=t.hideSelectedOptions,d=t.isMulti;return a===void 0?d:a},XF=1,QC=function(i){_P(a,i);var t=xP(a);function a(d){var f;if(gP(this,a),f=t.call(this,d),f.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},f.blockOptionHover=!1,f.isComposing=!1,f.commonProps=void 0,f.initialTouchX=0,f.initialTouchY=0,f.openAfterFocus=!1,f.scrollToFocusedOptionOnUpdate=!1,f.userIsDragging=void 0,f.controlRef=null,f.getControlRef=function(A){f.controlRef=A},f.focusedOptionRef=null,f.getFocusedOptionRef=function(A){f.focusedOptionRef=A},f.menuListRef=null,f.getMenuListRef=function(A){f.menuListRef=A},f.inputRef=null,f.getInputRef=function(A){f.inputRef=A},f.focus=f.focusInput,f.blur=f.blurInput,f.onChange=function(A,D){var O=f.props,z=O.onChange,V=O.name;D.name=V,f.ariaOnChange(A,D),z(A,D)},f.setValue=function(A,D,O){var z=f.props,V=z.closeMenuOnSelect,H=z.isMulti,ne=z.inputValue;f.onInputChange("",{action:"set-value",prevInputValue:ne}),V&&(f.setState({inputIsHiddenAfterUpdate:!H}),f.onMenuClose()),f.setState({clearFocusValueOnUpdate:!0}),f.onChange(A,{action:D,option:O})},f.selectOption=function(A){var D=f.props,O=D.blurInputOnSelect,z=D.isMulti,V=D.name,H=f.state.selectValue,ne=z&&f.isOptionSelected(A,H),ae=f.isOptionDisabled(A,H);if(ne){var q=f.getOptionValue(A);f.setValue(H.filter(function(he){return f.getOptionValue(he)!==q}),"deselect-option",A)}else if(!ae)z?f.setValue([].concat(j2(H),[A]),"select-option",A):f.setValue(A,"select-option");else{f.ariaOnChange(A,{action:"select-option",option:A,name:V});return}O&&f.blurInput()},f.removeValue=function(A){var D=f.props.isMulti,O=f.state.selectValue,z=f.getOptionValue(A),V=O.filter(function(ne){return f.getOptionValue(ne)!==z}),H=Ub(D,V,V[0]||null);f.onChange(H,{action:"remove-value",removedValue:A}),f.focusInput()},f.clearValue=function(){var A=f.state.selectValue;f.onChange(Ub(f.props.isMulti,[],null),{action:"clear",removedValues:A})},f.popValue=function(){var A=f.props.isMulti,D=f.state.selectValue,O=D[D.length-1],z=D.slice(0,D.length-1),V=Ub(A,z,z[0]||null);O&&f.onChange(V,{action:"pop-value",removedValue:O})},f.getFocusedOptionId=function(A){return aw(f.state.focusableOptionsWithIds,A)},f.getFocusableOptionsWithIds=function(){return yE(Kb(f.props,f.state.selectValue),f.getElementId("option"))},f.getValue=function(){return f.state.selectValue},f.cx=function(){for(var A=arguments.length,D=new Array(A),O=0;O<A;O++)D[O]=arguments[O];return Fz.apply(void 0,[f.props.classNamePrefix].concat(D))},f.getOptionLabel=function(A){return YC(f.props,A)},f.getOptionValue=function(A){return px(f.props,A)},f.getStyles=function(A,D){var O=f.props.unstyled,z=BF[A](D,O);z.boxSizing="border-box";var V=f.props.styles[A];return V?V(z,D):z},f.getClassNames=function(A,D){var O,z;return(O=(z=f.props.classNames)[A])===null||O===void 0?void 0:O.call(z,D)},f.getElementId=function(A){return"".concat(f.state.instancePrefix,"-").concat(A)},f.getComponents=function(){return lF(f.props)},f.buildCategorizedOptions=function(){return Kb(f.props,f.state.selectValue)},f.getCategorizedOptions=function(){return f.props.menuIsOpen?f.buildCategorizedOptions():[]},f.buildFocusableOptions=function(){return $C(f.buildCategorizedOptions())},f.getFocusableOptions=function(){return f.props.menuIsOpen?f.buildFocusableOptions():[]},f.ariaOnChange=function(A,D){f.setState({ariaSelection:un({value:A},D)})},f.onMenuMouseDown=function(A){A.button===0&&(A.stopPropagation(),A.preventDefault(),f.focusInput())},f.onMenuMouseMove=function(A){f.blockOptionHover=!1},f.onControlMouseDown=function(A){if(!A.defaultPrevented){var D=f.props.openMenuOnClick;f.state.isFocused?f.props.menuIsOpen?A.target.tagName!=="INPUT"&&A.target.tagName!=="TEXTAREA"&&f.onMenuClose():D&&f.openMenu("first"):(D&&(f.openAfterFocus=!0),f.focusInput()),A.target.tagName!=="INPUT"&&A.target.tagName!=="TEXTAREA"&&A.preventDefault()}},f.onDropdownIndicatorMouseDown=function(A){if(!(A&&A.type==="mousedown"&&A.button!==0)&&!f.props.isDisabled){var D=f.props,O=D.isMulti,z=D.menuIsOpen;f.focusInput(),z?(f.setState({inputIsHiddenAfterUpdate:!O}),f.onMenuClose()):f.openMenu("first"),A.preventDefault()}},f.onClearIndicatorMouseDown=function(A){A&&A.type==="mousedown"&&A.button!==0||(f.clearValue(),A.preventDefault(),f.openAfterFocus=!1,A.type==="touchend"?f.focusInput():setTimeout(function(){return f.focusInput()}))},f.onScroll=function(A){typeof f.props.closeMenuOnScroll=="boolean"?A.target instanceof HTMLElement&&Zx(A.target)&&f.props.onMenuClose():typeof f.props.closeMenuOnScroll=="function"&&f.props.closeMenuOnScroll(A)&&f.props.onMenuClose()},f.onCompositionStart=function(){f.isComposing=!0},f.onCompositionEnd=function(){f.isComposing=!1},f.onTouchStart=function(A){var D=A.touches,O=D&&D.item(0);O&&(f.initialTouchX=O.clientX,f.initialTouchY=O.clientY,f.userIsDragging=!1)},f.onTouchMove=function(A){var D=A.touches,O=D&&D.item(0);if(O){var z=Math.abs(O.clientX-f.initialTouchX),V=Math.abs(O.clientY-f.initialTouchY),H=5;f.userIsDragging=z>H||V>H}},f.onTouchEnd=function(A){f.userIsDragging||(f.controlRef&&!f.controlRef.contains(A.target)&&f.menuListRef&&!f.menuListRef.contains(A.target)&&f.blurInput(),f.initialTouchX=0,f.initialTouchY=0)},f.onControlTouchEnd=function(A){f.userIsDragging||f.onControlMouseDown(A)},f.onClearIndicatorTouchEnd=function(A){f.userIsDragging||f.onClearIndicatorMouseDown(A)},f.onDropdownIndicatorTouchEnd=function(A){f.userIsDragging||f.onDropdownIndicatorMouseDown(A)},f.handleInputChange=function(A){var D=f.props.inputValue,O=A.currentTarget.value;f.setState({inputIsHiddenAfterUpdate:!1}),f.onInputChange(O,{action:"input-change",prevInputValue:D}),f.props.menuIsOpen||f.onMenuOpen()},f.onInputFocus=function(A){f.props.onFocus&&f.props.onFocus(A),f.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(f.openAfterFocus||f.props.openMenuOnFocus)&&f.openMenu("first"),f.openAfterFocus=!1},f.onInputBlur=function(A){var D=f.props.inputValue;if(f.menuListRef&&f.menuListRef.contains(document.activeElement)){f.inputRef.focus();return}f.props.onBlur&&f.props.onBlur(A),f.onInputChange("",{action:"input-blur",prevInputValue:D}),f.onMenuClose(),f.setState({focusedValue:null,isFocused:!1})},f.onOptionHover=function(A){if(!(f.blockOptionHover||f.state.focusedOption===A)){var D=f.getFocusableOptions(),O=D.indexOf(A);f.setState({focusedOption:A,focusedOptionId:O>-1?f.getFocusedOptionId(A):null})}},f.shouldHideSelectedOptions=function(){return XC(f.props)},f.onValueInputFocus=function(A){A.preventDefault(),A.stopPropagation(),f.focus()},f.onKeyDown=function(A){var D=f.props,O=D.isMulti,z=D.backspaceRemovesValue,V=D.escapeClearsValue,H=D.inputValue,ne=D.isClearable,ae=D.isDisabled,q=D.menuIsOpen,he=D.onKeyDown,Ae=D.tabSelectsValue,Ee=D.openMenuOnFocus,Fe=f.state,De=Fe.focusedOption,ke=Fe.focusedValue,ze=Fe.selectValue;if(!ae&&!(typeof he=="function"&&(he(A),A.defaultPrevented))){switch(f.blockOptionHover=!0,A.key){case"ArrowLeft":if(!O||H)return;f.focusValue("previous");break;case"ArrowRight":if(!O||H)return;f.focusValue("next");break;case"Delete":case"Backspace":if(H)return;if(ke)f.removeValue(ke);else{if(!z)return;O?f.popValue():ne&&f.clearValue()}break;case"Tab":if(f.isComposing||A.shiftKey||!q||!Ae||!De||Ee&&f.isOptionSelected(De,ze))return;f.selectOption(De);break;case"Enter":if(A.keyCode===229)break;if(q){if(!De||f.isComposing)return;f.selectOption(De);break}return;case"Escape":q?(f.setState({inputIsHiddenAfterUpdate:!1}),f.onInputChange("",{action:"menu-close",prevInputValue:H}),f.onMenuClose()):ne&&V&&f.clearValue();break;case" ":if(H)return;if(!q){f.openMenu("first");break}if(!De)return;f.selectOption(De);break;case"ArrowUp":q?f.focusOption("up"):f.openMenu("last");break;case"ArrowDown":q?f.focusOption("down"):f.openMenu("first");break;case"PageUp":if(!q)return;f.focusOption("pageup");break;case"PageDown":if(!q)return;f.focusOption("pagedown");break;case"Home":if(!q)return;f.focusOption("first");break;case"End":if(!q)return;f.focusOption("last");break;default:return}A.preventDefault()}},f.state.instancePrefix="react-select-"+(f.props.instanceId||++XF),f.state.selectValue=nE(d.value),d.menuIsOpen&&f.state.selectValue.length){var g=f.getFocusableOptionsWithIds(),_=f.buildFocusableOptions(),c=_.indexOf(f.state.selectValue[0]);f.state.focusableOptionsWithIds=g,f.state.focusedOption=_[c],f.state.focusedOptionId=aw(g,_[c])}return f}return yP(a,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&iE(this.menuListRef,this.focusedOptionRef),NF()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(f){var g=this.props,_=g.isDisabled,c=g.menuIsOpen,A=this.state.isFocused;(A&&!_&&f.isDisabled||A&&c&&!f.menuIsOpen)&&this.focusInput(),A&&_&&!f.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!A&&!_&&f.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(iE(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(f,g){this.props.onInputChange(f,g)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(f){var g=this,_=this.state,c=_.selectValue,A=_.isFocused,D=this.buildFocusableOptions(),O=f==="first"?0:D.length-1;if(!this.props.isMulti){var z=D.indexOf(c[0]);z>-1&&(O=z)}this.scrollToFocusedOptionOnUpdate=!(A&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:D[O],focusedOptionId:this.getFocusedOptionId(D[O])},function(){return g.onMenuOpen()})}},{key:"focusValue",value:function(f){var g=this.state,_=g.selectValue,c=g.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var A=_.indexOf(c);c||(A=-1);var D=_.length-1,O=-1;if(_.length){switch(f){case"previous":A===0?O=0:A===-1?O=D:O=A-1;break;case"next":A>-1&&A<D&&(O=A+1);break}this.setState({inputIsHidden:O!==-1,focusedValue:_[O]})}}}},{key:"focusOption",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",g=this.props.pageSize,_=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var A=0,D=c.indexOf(_);_||(D=-1),f==="up"?A=D>0?D-1:c.length-1:f==="down"?A=(D+1)%c.length:f==="pageup"?(A=D-g,A<0&&(A=0)):f==="pagedown"?(A=D+g,A>c.length-1&&(A=c.length-1)):f==="last"&&(A=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[A],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[A])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(rw):un(un({},rw),this.props.theme):rw}},{key:"getCommonProps",value:function(){var f=this.clearValue,g=this.cx,_=this.getStyles,c=this.getClassNames,A=this.getValue,D=this.selectOption,O=this.setValue,z=this.props,V=z.isMulti,H=z.isRtl,ne=z.options,ae=this.hasValue();return{clearValue:f,cx:g,getStyles:_,getClassNames:c,getValue:A,hasValue:ae,isMulti:V,isRtl:H,options:ne,selectOption:D,selectProps:z,setValue:O,theme:this.getTheme()}}},{key:"hasValue",value:function(){var f=this.state.selectValue;return f.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var f=this.props,g=f.isClearable,_=f.isMulti;return g===void 0?_:g}},{key:"isOptionDisabled",value:function(f,g){return qC(this.props,f,g)}},{key:"isOptionSelected",value:function(f,g){return HC(this.props,f,g)}},{key:"filterOption",value:function(f,g){return WC(this.props,f,g)}},{key:"formatOptionLabel",value:function(f,g){if(typeof this.props.formatOptionLabel=="function"){var _=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(f,{context:g,inputValue:_,selectValue:c})}else return this.getOptionLabel(f)}},{key:"formatGroupLabel",value:function(f){return this.props.formatGroupLabel(f)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var f=this.props,g=f.isDisabled,_=f.isSearchable,c=f.inputId,A=f.inputValue,D=f.tabIndex,O=f.form,z=f.menuIsOpen,V=f.required,H=this.getComponents(),ne=H.Input,ae=this.state,q=ae.inputIsHidden,he=ae.ariaSelection,Ae=this.commonProps,Ee=c||this.getElementId("input"),Fe=un(un(un({"aria-autocomplete":"list","aria-expanded":z,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":V,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},z&&{"aria-controls":this.getElementId("listbox")}),!_&&{"aria-readonly":!0}),this.hasValue()?he?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return _?ie.createElement(ne,fn({},Ae,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:Ee,innerRef:this.getInputRef,isDisabled:g,isHidden:q,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:D,form:O,type:"text",value:A},Fe)):ie.createElement(wF,fn({id:Ee,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:dx,onFocus:this.onInputFocus,disabled:g,tabIndex:D,inputMode:"none",form:O,value:""},Fe))}},{key:"renderPlaceholderOrValue",value:function(){var f=this,g=this.getComponents(),_=g.MultiValue,c=g.MultiValueContainer,A=g.MultiValueLabel,D=g.MultiValueRemove,O=g.SingleValue,z=g.Placeholder,V=this.commonProps,H=this.props,ne=H.controlShouldRenderValue,ae=H.isDisabled,q=H.isMulti,he=H.inputValue,Ae=H.placeholder,Ee=this.state,Fe=Ee.selectValue,De=Ee.focusedValue,ke=Ee.isFocused;if(!this.hasValue()||!ne)return he?null:ie.createElement(z,fn({},V,{key:"placeholder",isDisabled:ae,isFocused:ke,innerProps:{id:this.getElementId("placeholder")}}),Ae);if(q)return Fe.map(function(rt,Se){var nt=rt===De,Mt="".concat(f.getOptionLabel(rt),"-").concat(f.getOptionValue(rt));return ie.createElement(_,fn({},V,{components:{Container:c,Label:A,Remove:D},isFocused:nt,isDisabled:ae,key:Mt,index:Se,removeProps:{onClick:function(){return f.removeValue(rt)},onTouchEnd:function(){return f.removeValue(rt)},onMouseDown:function(Ft){Ft.preventDefault()}},data:rt}),f.formatOptionLabel(rt,"value"))});if(he)return null;var ze=Fe[0];return ie.createElement(O,fn({},V,{data:ze,isDisabled:ae}),this.formatOptionLabel(ze,"value"))}},{key:"renderClearIndicator",value:function(){var f=this.getComponents(),g=f.ClearIndicator,_=this.commonProps,c=this.props,A=c.isDisabled,D=c.isLoading,O=this.state.isFocused;if(!this.isClearable()||!g||A||!this.hasValue()||D)return null;var z={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return ie.createElement(g,fn({},_,{innerProps:z,isFocused:O}))}},{key:"renderLoadingIndicator",value:function(){var f=this.getComponents(),g=f.LoadingIndicator,_=this.commonProps,c=this.props,A=c.isDisabled,D=c.isLoading,O=this.state.isFocused;if(!g||!D)return null;var z={"aria-hidden":"true"};return ie.createElement(g,fn({},_,{innerProps:z,isDisabled:A,isFocused:O}))}},{key:"renderIndicatorSeparator",value:function(){var f=this.getComponents(),g=f.DropdownIndicator,_=f.IndicatorSeparator;if(!g||!_)return null;var c=this.commonProps,A=this.props.isDisabled,D=this.state.isFocused;return ie.createElement(_,fn({},c,{isDisabled:A,isFocused:D}))}},{key:"renderDropdownIndicator",value:function(){var f=this.getComponents(),g=f.DropdownIndicator;if(!g)return null;var _=this.commonProps,c=this.props.isDisabled,A=this.state.isFocused,D={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return ie.createElement(g,fn({},_,{innerProps:D,isDisabled:c,isFocused:A}))}},{key:"renderMenu",value:function(){var f=this,g=this.getComponents(),_=g.Group,c=g.GroupHeading,A=g.Menu,D=g.MenuList,O=g.MenuPortal,z=g.LoadingMessage,V=g.NoOptionsMessage,H=g.Option,ne=this.commonProps,ae=this.state.focusedOption,q=this.props,he=q.captureMenuScroll,Ae=q.inputValue,Ee=q.isLoading,Fe=q.loadingMessage,De=q.minMenuHeight,ke=q.maxMenuHeight,ze=q.menuIsOpen,rt=q.menuPlacement,Se=q.menuPosition,nt=q.menuPortalTarget,Mt=q.menuShouldBlockScroll,Ct=q.menuShouldScrollIntoView,Ft=q.noOptionsMessage,Ut=q.onMenuScrollToTop,Gt=q.onMenuScrollToBottom;if(!ze)return null;var Ge=function(bt,Tt){var Nt=bt.type,zt=bt.data,Kt=bt.isDisabled,rn=bt.isSelected,Tn=bt.label,qi=bt.value,tr=ae===zt,Ri=Kt?void 0:function(){return f.onOptionHover(zt)},Hr=Kt?void 0:function(){return f.selectOption(zt)},bn="".concat(f.getElementId("option"),"-").concat(Tt),xn={id:bn,onClick:Hr,onMouseMove:Ri,onMouseOver:Ri,tabIndex:-1,role:"option","aria-selected":f.state.isAppleDevice?void 0:rn};return ie.createElement(H,fn({},ne,{innerProps:xn,data:zt,isDisabled:Kt,isSelected:rn,key:bn,label:Tn,type:Nt,value:qi,isFocused:tr,innerRef:tr?f.getFocusedOptionRef:void 0}),f.formatOptionLabel(bt.data,"menu"))},ct;if(this.hasOptions())ct=this.getCategorizedOptions().map(function(et){if(et.type==="group"){var bt=et.data,Tt=et.options,Nt=et.index,zt="".concat(f.getElementId("group"),"-").concat(Nt),Kt="".concat(zt,"-heading");return ie.createElement(_,fn({},ne,{key:zt,data:bt,options:Tt,Heading:c,headingProps:{id:Kt,data:et.data},label:f.formatGroupLabel(et.data)}),et.options.map(function(rn){return Ge(rn,"".concat(Nt,"-").concat(rn.index))}))}else if(et.type==="option")return Ge(et,"".concat(et.index))});else if(Ee){var St=Fe({inputValue:Ae});if(St===null)return null;ct=ie.createElement(z,ne,St)}else{var pt=Ft({inputValue:Ae});if(pt===null)return null;ct=ie.createElement(V,ne,pt)}var Vt={minMenuHeight:De,maxMenuHeight:ke,menuPlacement:rt,menuPosition:Se,menuShouldScrollIntoView:Ct},Oe=ie.createElement(e4,fn({},ne,Vt),function(et){var bt=et.ref,Tt=et.placerProps,Nt=Tt.placement,zt=Tt.maxHeight;return ie.createElement(A,fn({},ne,Vt,{innerRef:bt,innerProps:{onMouseDown:f.onMenuMouseDown,onMouseMove:f.onMenuMouseMove},isLoading:Ee,placement:Nt}),ie.createElement(CF,{captureEnabled:he,onTopArrive:Ut,onBottomArrive:Gt,lockEnabled:Mt},function(Kt){return ie.createElement(D,fn({},ne,{innerRef:function(Tn){f.getMenuListRef(Tn),Kt(Tn)},innerProps:{role:"listbox","aria-multiselectable":ne.isMulti,id:f.getElementId("listbox")},isLoading:Ee,maxHeight:zt,focusedOption:ae}),ct)}))});return nt||Se==="fixed"?ie.createElement(O,fn({},ne,{appendTo:nt,controlElement:this.controlRef,menuPlacement:rt,menuPosition:Se}),Oe):Oe}},{key:"renderFormField",value:function(){var f=this,g=this.props,_=g.delimiter,c=g.isDisabled,A=g.isMulti,D=g.name,O=g.required,z=this.state.selectValue;if(O&&!this.hasValue()&&!c)return ie.createElement(RF,{name:D,onFocus:this.onValueInputFocus});if(!(!D||c))if(A)if(_){var V=z.map(function(ae){return f.getOptionValue(ae)}).join(_);return ie.createElement("input",{name:D,type:"hidden",value:V})}else{var H=z.length>0?z.map(function(ae,q){return ie.createElement("input",{key:"i-".concat(q),name:D,type:"hidden",value:f.getOptionValue(ae)})}):ie.createElement("input",{name:D,type:"hidden",value:""});return ie.createElement("div",null,H)}else{var ne=z[0]?this.getOptionValue(z[0]):"";return ie.createElement("input",{name:D,type:"hidden",value:ne})}}},{key:"renderLiveRegion",value:function(){var f=this.commonProps,g=this.state,_=g.ariaSelection,c=g.focusedOption,A=g.focusedValue,D=g.isFocused,O=g.selectValue,z=this.getFocusableOptions();return ie.createElement(gF,fn({},f,{id:this.getElementId("live-region"),ariaSelection:_,focusedOption:c,focusedValue:A,isFocused:D,selectValue:O,focusableOptions:z,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var f=this.getComponents(),g=f.Control,_=f.IndicatorsContainer,c=f.SelectContainer,A=f.ValueContainer,D=this.props,O=D.className,z=D.id,V=D.isDisabled,H=D.menuIsOpen,ne=this.state.isFocused,ae=this.commonProps=this.getCommonProps();return ie.createElement(c,fn({},ae,{className:O,innerProps:{id:z,onKeyDown:this.onKeyDown},isDisabled:V,isFocused:ne}),this.renderLiveRegion(),ie.createElement(g,fn({},ae,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:V,isFocused:ne,menuIsOpen:H}),ie.createElement(A,fn({},ae,{isDisabled:V}),this.renderPlaceholderOrValue(),this.renderInput()),ie.createElement(_,fn({},ae,{isDisabled:V}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(f,g){var _=g.prevProps,c=g.clearFocusValueOnUpdate,A=g.inputIsHiddenAfterUpdate,D=g.ariaSelection,O=g.isFocused,z=g.prevWasFocused,V=g.instancePrefix,H=f.options,ne=f.value,ae=f.menuIsOpen,q=f.inputValue,he=f.isMulti,Ae=nE(ne),Ee={};if(_&&(ne!==_.value||H!==_.options||ae!==_.menuIsOpen||q!==_.inputValue)){var Fe=ae?qF(f,Ae):[],De=ae?yE(Kb(f,Ae),"".concat(V,"-option")):[],ke=c?HF(g,Ae):null,ze=WF(g,Fe),rt=aw(De,ze);Ee={selectValue:Ae,focusedOption:ze,focusedOptionId:rt,focusableOptionsWithIds:De,focusedValue:ke,clearFocusValueOnUpdate:!1}}var Se=A!=null&&f!==_?{inputIsHidden:A,inputIsHiddenAfterUpdate:void 0}:{},nt=D,Mt=O&&z;return O&&!Mt&&(nt={value:Ub(he,Ae,Ae[0]||null),options:Ae,action:"initial-input-focus"},Mt=!z),D?.action==="initial-input-focus"&&(nt=null),un(un(un({},Ee),Se),{},{prevProps:f,ariaSelection:nt,prevWasFocused:Mt})}}]),a}(ie.Component);QC.defaultProps=YF;var QF=ie.forwardRef(function(i,t){var a=mP(i);return ie.createElement(QC,fn({ref:t},a))}),vE=QF;function KF({itinerary1Legs:i,itinerary2Legs:t,selectedLeg1Ids:a,selectedLeg2Ids:d,setSelectedLeg1Ids:f,setSelectedLeg2Ids:g,selectedIndexes:_,timeZone:c}){const A=VS(i,1,c),D=VS(t,2,c);return Q.jsx("div",{className:"compare-section-divider",children:Q.jsxs("div",{className:"compare-legs-select-container",children:[Q.jsxs("div",{className:"compare-leg-select-column",children:[Q.jsxs("label",{className:"compare-leg-select-label",children:["Itinerary #",_[0]+1," Legs:"]}),Q.jsx(vE,{isMulti:!0,options:A,value:A.filter(O=>a.includes(O.value)),onChange:O=>{const z=O?O.map(V=>V.value):[];f(z)},placeholder:"Select legs to compare...",className:"compare-leg-select",classNamePrefix:"compare-leg-select"})]}),Q.jsxs("div",{className:"compare-leg-select-column",children:[Q.jsxs("label",{className:"compare-leg-select-label",children:["Itinerary #",_[1]+1," Legs:"]}),Q.jsx(vE,{isMulti:!0,options:D,value:D.filter(O=>d.includes(O.value)),onChange:O=>{const z=O?O.map(V=>V.value):[];g(z)},placeholder:"Select legs to compare...",className:"compare-leg-select",classNamePrefix:"compare-leg-select"})]})]})})}const JF=(i,t)=>{if(!i)return`itinerary_${t}_leg_invalid`;if(i.id)return`itinerary_${t}_leg_${i.id}`;const a=`${i.mode}_${i.aimedStartTime}_${i.aimedEndTime}_${i.fromPlace?.name||"unknown"}_${i.toPlace?.name||"unknown"}`;return`itinerary_${t}_leg_${a}`};function e5({itinerary1:i,itinerary2:t,selectedLegIds:a,selectedIndexes:d,timeZone:f}){return a.length===0?null:Q.jsxs("div",{className:"compare-selected-legs-section",children:[Q.jsx("h6",{className:"compare-selected-legs-title",children:"Selected Legs Comparison"}),Q.jsxs(vv,{striped:!0,bordered:!0,hover:!0,children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{children:"Itinerary"}),Q.jsx("th",{children:"From"}),Q.jsx("th",{children:"To"}),Q.jsx("th",{children:"Mode"}),Q.jsx("th",{children:"Line"}),Q.jsx("th",{children:"Start Time"}),Q.jsx("th",{children:"End Time"}),Q.jsx("th",{children:"Duration"}),Q.jsx("th",{children:"Distance"}),Q.jsx("th",{children:"Cost"})]})}),Q.jsx("tbody",{children:[i,t].map((g,_)=>g.legs.filter(c=>c&&a.includes(c.id||`leg${_+1}_${g.legs.indexOf(c)}`)).map(c=>Q.jsxs("tr",{children:[Q.jsx("td",{children:Q.jsxs("strong",{children:["#",d[_]+1]})}),Q.jsx("td",{children:c.fromPlace?.name||"-"}),Q.jsx("td",{children:c.toPlace?.name||"-"}),Q.jsx("td",{children:c.mode}),Q.jsx("td",{children:c.line?.publicCode||c.line?.name||"-"}),Q.jsx("td",{children:Tu(c.aimedStartTime,f,"short")}),Q.jsx("td",{children:Tu(c.aimedEndTime,f,"short")}),Q.jsx("td",{children:F2(c.duration)}),Q.jsx("td",{children:z2(c.distance)}),Q.jsxs("td",{children:["",c.generalizedCost]})]},JF(c,_))))})]})]})}function t5({show:i,onHide:t,tripQueryResult:a,selectedIndexes:d}){const f=ie.useContext(n0),[g,_]=ie.useState([]),[c,A]=ie.useState([]),D=[...g,...c];if(!a||d.length!==2)return null;const O=a.trip.tripPatterns[d[0]],z=a.trip.tripPatterns[d[1]],V=BS(O,f),H=BS(z,f);return Q.jsxs(Pb,{show:i,onHide:t,centered:!0,className:"full-width-modal",children:[Q.jsx(Pb.Header,{closeButton:!0,children:Q.jsx(Pb.Title,{children:"Compare Itineraries"})}),Q.jsxs(Pb.Body,{children:[Q.jsx(cP,{itinerary1:O,itinerary2:z,summary1:V,summary2:H,selectedIndexes:d}),Q.jsx(KF,{itinerary1Legs:O.legs,itinerary2Legs:z.legs,selectedLeg1Ids:g,selectedLeg2Ids:c,setSelectedLeg1Ids:_,setSelectedLeg2Ids:A,selectedIndexes:d,timeZone:f}),Q.jsx(e5,{itinerary1:O,itinerary2:z,selectedLegIds:D,selectedIndexes:d,timeZone:f})]})]})}const n5=Ky(`
query trip(
  $accessEgressPenalty: [PenaltyForStreetMode!]
  $alightSlackDefault: Int
  $alightSlackList: [TransportModeSlack]
  $arriveBy: Boolean
  $banned: InputBanned
  $bicycleOptimisationMethod: BicycleOptimisationMethod
  $bikeSpeed: Float
  $boardSlackDefault: Int
  $boardSlackList: [TransportModeSlack]
  $bookingTime: DateTime
  $dateTime: DateTime
  $filters: [TripFilterInput!]
  $from: Location!
  $ignoreRealtimeUpdates: Boolean
  $includePlannedCancellations: Boolean
  $includeRealtimeCancellations: Boolean
  $itineraryFilters: ItineraryFilters
  $locale: Locale
  $maxAccessEgressDurationForMode: [StreetModeDurationInput!]
  $maxDirectDurationForMode: [StreetModeDurationInput!]
  $maximumAdditionalTransfers: Int
  $maximumTransfers: Int
  $modes: Modes
  $numTripPatterns: Int
  $pageCursor: String
  $relaxTransitGroupPriority: RelaxCostInput
  $searchWindow: Int
  $timetableView: Boolean
  $to: Location!
  $transferPenalty: Int
  $transferSlack: Int
  $triangleFactors: TriangleFactors
  $useBikeRentalAvailabilityInformation: Boolean
  $via: [TripViaLocationInput!]
  $waitReluctance: Float
  $walkReluctance: Float
  $walkSpeed: Float
  $wheelchairAccessible: Boolean
  $whiteListed: InputWhiteListed
) {
  trip(
    accessEgressPenalty: $accessEgressPenalty
    alightSlackDefault: $alightSlackDefault
    alightSlackList: $alightSlackList
    arriveBy: $arriveBy
    banned: $banned
    bicycleOptimisationMethod: $bicycleOptimisationMethod
    bikeSpeed: $bikeSpeed
    boardSlackDefault: $boardSlackDefault
    boardSlackList: $boardSlackList
    bookingTime: $bookingTime
    dateTime: $dateTime
    filters: $filters
    from: $from
    ignoreRealtimeUpdates: $ignoreRealtimeUpdates
    includePlannedCancellations: $includePlannedCancellations
    includeRealtimeCancellations: $includeRealtimeCancellations
    itineraryFilters: $itineraryFilters
    locale: $locale
    maxAccessEgressDurationForMode: $maxAccessEgressDurationForMode
    maxDirectDurationForMode: $maxDirectDurationForMode
    maximumAdditionalTransfers: $maximumAdditionalTransfers
    maximumTransfers: $maximumTransfers
    modes: $modes
    numTripPatterns: $numTripPatterns
    pageCursor: $pageCursor
    relaxTransitGroupPriority: $relaxTransitGroupPriority
    searchWindow: $searchWindow
    timetableView: $timetableView
    to: $to
    transferPenalty: $transferPenalty
    transferSlack: $transferSlack
    triangleFactors: $triangleFactors
    useBikeRentalAvailabilityInformation: $useBikeRentalAvailabilityInformation
    via: $via
    waitReluctance: $waitReluctance
    walkReluctance: $walkReluctance
    walkSpeed: $walkSpeed
    wheelchairAccessible: $wheelchairAccessible
    whiteListed: $whiteListed
  ) 
    {
    previousPageCursor
    nextPageCursor
    tripPatterns {
        aimedStartTime
        aimedEndTime
        expectedEndTime
        expectedStartTime
        duration
        distance
        generalizedCost
        legs {
            id
            mode
            aimedStartTime
            aimedEndTime
            expectedEndTime
            expectedStartTime
            realtime
            distance
            duration
            generalizedCost
            fromPlace {
                name
                quay {
                    id
                }
            }
            toPlace {
                name
                quay {
                    id
                }
            }
            fromEstimatedCall {
                destinationDisplay {
                    frontText
                }
            }
            line {
                publicCode
                name
                id
                presentation {
                    colour
                }
            }
            authority {
                name
                id
            }
            pointsOnLink {
                points
            }
            interchangeTo {
                staySeated
            }
            interchangeFrom {
                staySeated
            }
        }
        systemNotices {
            tag
        }
    }
  }
}`),i5=ys(n5);function r5(i){const t={};return s2(i,{OperationDefinition(a){a.operation==="query"&&a.variableDefinitions&&a.variableDefinitions.forEach(d=>{const f=d.variable.name.value;t[f]=ys(d.type)})}}),t}function KC(i){const t=SA(i5),a=r5(t),d=Object.keys(i).filter(g=>i[g]!==void 0),f=s2(t,{OperationDefinition(g){if(g.operation==="query"){const _=g.variableDefinitions?.filter(c=>{const A=c.variable.name.value;return d.includes(A)&&a[A]});return{...g,variableDefinitions:_||[]}}return g},Field(g){if(g.name.value==="trip"&&g.arguments){const _=g.arguments.filter(c=>{if(c.value.kind==="Variable"){const A=c.value.name.value;return d.includes(A)&&a[A]}return!0});return{...g,arguments:_}}return g}});return ys(f)}function JC(i){const t={};return Object.keys(i).forEach(a=>{const d=i[a];d!==void 0&&(t[a]=d)}),t}const a5=i=>{const[t,a]=ie.useState(null),[d,f]=ie.useState(!1),[g,_]=ie.useState(null),c=ie.useCallback(async A=>{if(d)console.warn("Wait for previous search to finish");else if(i){f(!0),_(null);try{const D=A?{...i,pageCursor:A}:i,O=JC(D),z=KC(D);a(await h2(Lx(),z,O))}catch(D){console.error("Error at useTripQuery",D),_(D),a(null)}f(!1)}else console.warn("Can't search without variables")},[a,i,d]);return ie.useEffect(()=>{bE(i?.from)&&bE(i?.to)&&c()},[i?.from,i?.to]),[t,d,c,g]};function bE(i){return i&&(i.coordinates||i.place)}const o5=Ky(`
  query serverInfo {
    serverInfo {
      version
      otpSerializationVersionId
      buildConfigVersion
      routerConfigVersion
      gitCommit
      gitBranch
      internalTransitModelTimeZone
    }
  }
`),s5=()=>{const[i,t]=ie.useState(null);return ie.useEffect(()=>{(async()=>{t(await h2(Lx(),o5))})()},[]),i?.serverInfo},l5={from:{},to:{},dateTime:new Date().toISOString()},c5=()=>{const t=new URLSearchParams(window.location.search).get("variables");return t?JSON.parse(decodeURIComponent(t)):l5},u5=i=>{const t=new URLSearchParams(window.location.search);t.set("variables",encodeURIComponent(JSON.stringify(i))),history.pushState({},"","?"+t.toString()+window.location.hash)},h5=()=>{const[i,t]=ie.useState(c5());return ie.useEffect(()=>{u5(i)},[i]),{tripQueryVariables:i,setTripQueryVariables:t}};function d5({target:i,serverInfo:t}){return Q.jsx(lC,{target:i.current,show:!!t,placement:"right",children:Q.jsx("div",{style:{position:"absolute",backgroundColor:"rgba(255, 100, 100, 0.85)",padding:"2px 10px",color:"white",borderRadius:3},children:Q.jsx("pre",{children:JSON.stringify(t,null,2)})})})}const f5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20width='256px'%20height='256px'%20viewBox='0%200%20125.333%20125.334'%20xml:space='preserve'%3e%3cpath%20fill='%232179BF'%20d='M62.668,0C33.83,0,9.559,19.483,2.258,46l72.681-0.003c4.729-0.011,8.555-3.837,8.561-8.568%20c-0.006-4.729-3.831-8.555-8.561-8.559c-4.731,0.004-8.557,3.83-8.564,8.559v4.592h-13.7v-4.592%20c0-12.294,9.962-22.261,22.265-22.263c12.298,0.002,22.262,9.969,22.266,22.263c-0.003,12.3-9.968,22.264-22.266,22.271H0.074%20C0.028,60.684,0,61.671,0,62.666c0,34.611,28.057,62.668,62.668,62.668c34.609,0,62.665-28.057,62.665-62.668%20C125.333,28.057,97.277,0,62.668,0%20M92.222,85.667v-3.473v-4.86l-47.058,0.003c-4.729,0.011-8.556,3.837-8.561,8.568%20c0.005,4.728,3.831,8.555,8.561,8.559c4.731-0.004,8.558-3.831,8.565-8.559v-4.592h13.699v4.592%20c0,12.294-9.961,22.261-22.265,22.263c-12.298-0.002-22.26-9.969-22.264-22.263c0.002-12.3,9.966-22.264,22.264-22.271h47.058V56.12%20l21.712,14.775L92.222,85.667z'/%3e%3c/svg%3e";function p5({serverInfo:i}){const[t,a]=ie.useState(!1),d=ie.useRef(null);return Q.jsxs("div",{className:"logo-container box",style:{display:"flex"},children:[Q.jsx(QL.Brand,{onClick:()=>a(f=>!f),children:Q.jsxs("div",{ref:d,children:[Q.jsx("img",{alt:"",src:f5,width:"50",height:"50",className:"logo-image"}),"OTP Debug",t&&Q.jsx(d5,{serverInfo:i,target:d})]})}),Q.jsxs("div",{className:"details",children:[Q.jsxs("div",{children:["Version: ",i?.version]}),Q.jsxs("div",{children:["Time zone: ",i?.internalTransitModelTimeZone]})]})]})}const xE=7,wE="-{0,1}\\d+(\\.\\d+){0,1}",m5="("+wE+")(\\s+)("+wE+")";function g5(i){const t=i.match(m5);return t?{coordinates:{latitude:+t[1],longitude:+t[4]}}:{place:i}}function y5(i){return i.coordinates?`${i.coordinates?.latitude.toPrecision(xE)} ${i.coordinates?.longitude.toPrecision(xE)}`:i.place?i.place:null}function TE({id:i,label:t,tripQueryVariables:a,setTripQueryVariables:d,locationFieldKey:f}){const g=a[f],_=y5(g)||"",[c,A]=ie.useState(_),[D,O]=ie.useState(g);D!==g&&(O(g),A(_));const z=ie.useCallback(V=>{const H=g5(V)||{};d({...a,[f]:H})},[a,d,f]);return Q.jsxs(Pi.Group,{children:[Q.jsx(Pi.Label,{column:"sm",htmlFor:i,children:t}),Q.jsx(Pi.Control,{type:"text",id:i,size:"sm",placeholder:"[Click in map]",className:"input-medium",onChange:V=>{A(V.target.value)},onBlur:V=>{z(V.target.value)},value:c})]})}const _5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='100pt'%20height='100pt'%20version='1.1'%20viewBox='0%200%20100%20100'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m92.223%2050.707c-2.5234%200-4.5469%202.0195-4.5469%204.5469v13.938h-51.516l10.203-10.203c1.8164-1.8164%201.8164-4.6445%200-6.4648-1.8164-1.8164-4.6445-1.8164-6.4648%200l-18.082%2018.082c-1.7188%201.7188-1.8164%204.6445%200%206.3633l18.082%2018.383c0.91016%200.91016%202.0195%201.3125%203.2305%201.3125%201.1094%200%202.3242-0.40234%203.2305-1.3125%201.8164-1.7188%201.8164-4.6445%200.10156-6.4648l-10.703-10.605h56.465c2.5234%200%204.5469-2.0195%204.5469-4.5469v-18.48c0-2.5273-2.0234-4.5469-4.5469-4.5469z'/%3e%3cpath%20d='m63.738%2029.695-10.305%2010.406c-1.7188%201.8164-1.7188%204.6445%200.10156%206.4648%200.91016%200.91016%202.0195%201.3125%203.2305%201.3125s2.3242-0.40234%203.2305-1.3125l18.082-18.383c1.7188-1.8164%201.7188-4.6445%200-6.3633l-18.18-18.184c-1.8164-1.8164-4.6445-1.8164-6.4648%200-1.8164%201.8164-1.8164%204.6445%200%206.4648l10.504%2010.504h-56.363c-2.5234%200-4.5469%202.0195-4.5469%204.5469v18.383c0%202.5234%202.0195%204.5469%204.5469%204.5469%202.5234%200%204.5469-2.0195%204.5469-4.5469v-13.84z'/%3e%3c/svg%3e";function v5({tripQueryVariables:i,setTripQueryVariables:t}){const a=()=>{t({...i,from:i.to,to:i.from})};return Q.jsx("button",{className:"swap-from-to",onClick:a,title:"Swap from/to",children:Q.jsx("img",{alt:"Swap from/to",src:_5})})}function b5({tripQueryVariables:i,setTripQueryVariables:t}){const a=d=>{if(d===void 0){const f={...i};delete f.arriveBy,t(f)}else t({...i,arriveBy:d})};return Q.jsxs(Pi.Group,{children:[Q.jsx(Pi.Label,{column:"sm",htmlFor:"departureArrivalSelect",children:"Depart/Arrive"}),Q.jsxs(Pi.Select,{size:"sm",className:"input-medium",onChange:d=>d.target.value==="arrival"?a(!0):a(void 0),value:i.arriveBy?"arrival":"departure",style:{verticalAlign:"bottom"},children:[Q.jsx("option",{value:"arrival",children:"Arrive by"}),Q.jsx("option",{value:"departure",children:"Depart after"})]})]})}class re extends Array{constructor(t,a){if(super(t),this.sign=a,Object.setPrototypeOf(this,re.prototype),t>re.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(t){var a=Math.floor,d=Number.isFinite;if(typeof t=="number"){if(t===0)return re.__zero();if(re.__isOneDigitInt(t))return 0>t?re.__oneDigit(-t,!0):re.__oneDigit(t,!1);if(!d(t)||a(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return re.__fromDouble(t)}if(typeof t=="string"){const f=re.__fromString(t);if(f===null)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return f}if(typeof t=="boolean")return t===!0?re.__oneDigit(1,!1):re.__zero();if(typeof t=="object"){if(t.constructor===re)return t;const f=re.__toPrimitive(t);return re.BigInt(f)}throw new TypeError("Cannot convert "+t+" to a BigInt")}toDebugString(){const t=["BigInt["];for(const a of this)t.push((a&&(a>>>0).toString(16))+", ");return t.push("]"),t.join("")}toString(t=10){if(2>t||36<t)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(t&t-1)==0?re.__toStringBasePowerOfTwo(this,t):re.__toStringGeneric(this,t,!1)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(t){const a=t.length;if(a===0)return 0;if(a===1){const q=t.__unsignedDigit(0);return t.sign?-q:q}const d=t.__digit(a-1),f=re.__clz30(d),g=30*a-f;if(1024<g)return t.sign?-1/0:1/0;let _=g-1,c=d,A=a-1;const D=f+3;let O=D===32?0:c<<D;O>>>=12;const z=D-12;let V=12<=D?0:c<<20+D,H=20+D;for(0<z&&0<A&&(A--,c=t.__digit(A),O|=c>>>30-z,V=c<<z+2,H=z+2);0<H&&0<A;)A--,c=t.__digit(A),V|=30<=H?c<<H-30:c>>>30-H,H-=30;const ne=re.__decideRounding(t,H,A,c);if((ne===1||ne===0&&(1&V)==1)&&(V=V+1>>>0,V===0&&(O++,O>>>20!=0&&(O=0,_++,1023<_))))return t.sign?-1/0:1/0;const ae=t.sign?-2147483648:0;return _=_+1023<<20,re.__kBitConversionInts[1]=ae|_|O,re.__kBitConversionInts[0]=V,re.__kBitConversionDouble[0]}static unaryMinus(t){if(t.length===0)return t;const a=t.__copy();return a.sign=!t.sign,a}static bitwiseNot(t){return t.sign?re.__absoluteSubOne(t).__trim():re.__absoluteAddOne(t,!0)}static exponentiate(t,a){if(a.sign)throw new RangeError("Exponent must be positive");if(a.length===0)return re.__oneDigit(1,!1);if(t.length===0)return t;if(t.length===1&&t.__digit(0)===1)return t.sign&&(1&a.__digit(0))==0?re.unaryMinus(t):t;if(1<a.length)throw new RangeError("BigInt too big");let d=a.__unsignedDigit(0);if(d===1)return t;if(d>=re.__kMaxLengthBits)throw new RangeError("BigInt too big");if(t.length===1&&t.__digit(0)===2){const _=1+(0|d/30),c=t.sign&&(1&d)!=0,A=new re(_,c);A.__initializeDigits();const D=1<<d%30;return A.__setDigit(_-1,D),A}let f=null,g=t;for((1&d)!=0&&(f=t),d>>=1;d!==0;d>>=1)g=re.multiply(g,g),(1&d)!=0&&(f===null?f=g:f=re.multiply(f,g));return f}static multiply(t,a){if(t.length===0)return t;if(a.length===0)return a;let d=t.length+a.length;30<=t.__clzmsd()+a.__clzmsd()&&d--;const f=new re(d,t.sign!==a.sign);f.__initializeDigits();for(let g=0;g<t.length;g++)re.__multiplyAccumulate(a,t.__digit(g),f,g);return f.__trim()}static divide(t,a){if(a.length===0)throw new RangeError("Division by zero");if(0>re.__absoluteCompare(t,a))return re.__zero();const d=t.sign!==a.sign,f=a.__unsignedDigit(0);let g;if(a.length===1&&32767>=f){if(f===1)return d===t.sign?t:re.unaryMinus(t);g=re.__absoluteDivSmall(t,f,null)}else g=re.__absoluteDivLarge(t,a,!0,!1);return g.sign=d,g.__trim()}static remainder(t,a){if(a.length===0)throw new RangeError("Division by zero");if(0>re.__absoluteCompare(t,a))return t;const d=a.__unsignedDigit(0);if(a.length===1&&32767>=d){if(d===1)return re.__zero();const g=re.__absoluteModSmall(t,d);return g===0?re.__zero():re.__oneDigit(g,t.sign)}const f=re.__absoluteDivLarge(t,a,!1,!0);return f.sign=t.sign,f.__trim()}static add(t,a){const d=t.sign;return d===a.sign?re.__absoluteAdd(t,a,d):0<=re.__absoluteCompare(t,a)?re.__absoluteSub(t,a,d):re.__absoluteSub(a,t,!d)}static subtract(t,a){const d=t.sign;return d===a.sign?0<=re.__absoluteCompare(t,a)?re.__absoluteSub(t,a,d):re.__absoluteSub(a,t,!d):re.__absoluteAdd(t,a,d)}static leftShift(t,a){return a.length===0||t.length===0?t:a.sign?re.__rightShiftByAbsolute(t,a):re.__leftShiftByAbsolute(t,a)}static signedRightShift(t,a){return a.length===0||t.length===0?t:a.sign?re.__leftShiftByAbsolute(t,a):re.__rightShiftByAbsolute(t,a)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(t,a){return 0>re.__compareToBigInt(t,a)}static lessThanOrEqual(t,a){return 0>=re.__compareToBigInt(t,a)}static greaterThan(t,a){return 0<re.__compareToBigInt(t,a)}static greaterThanOrEqual(t,a){return 0<=re.__compareToBigInt(t,a)}static equal(t,a){if(t.sign!==a.sign||t.length!==a.length)return!1;for(let d=0;d<t.length;d++)if(t.__digit(d)!==a.__digit(d))return!1;return!0}static notEqual(t,a){return!re.equal(t,a)}static bitwiseAnd(t,a){var d=Math.max;if(!t.sign&&!a.sign)return re.__absoluteAnd(t,a).__trim();if(t.sign&&a.sign){const f=d(t.length,a.length)+1;let g=re.__absoluteSubOne(t,f);const _=re.__absoluteSubOne(a);return g=re.__absoluteOr(g,_,g),re.__absoluteAddOne(g,!0,g).__trim()}return t.sign&&([t,a]=[a,t]),re.__absoluteAndNot(t,re.__absoluteSubOne(a)).__trim()}static bitwiseXor(t,a){var d=Math.max;if(!t.sign&&!a.sign)return re.__absoluteXor(t,a).__trim();if(t.sign&&a.sign){const _=d(t.length,a.length),c=re.__absoluteSubOne(t,_),A=re.__absoluteSubOne(a);return re.__absoluteXor(c,A,c).__trim()}const f=d(t.length,a.length)+1;t.sign&&([t,a]=[a,t]);let g=re.__absoluteSubOne(a,f);return g=re.__absoluteXor(g,t,g),re.__absoluteAddOne(g,!0,g).__trim()}static bitwiseOr(t,a){var d=Math.max;const f=d(t.length,a.length);if(!t.sign&&!a.sign)return re.__absoluteOr(t,a).__trim();if(t.sign&&a.sign){let _=re.__absoluteSubOne(t,f);const c=re.__absoluteSubOne(a);return _=re.__absoluteAnd(_,c,_),re.__absoluteAddOne(_,!0,_).__trim()}t.sign&&([t,a]=[a,t]);let g=re.__absoluteSubOne(a,f);return g=re.__absoluteAndNot(g,t,g),re.__absoluteAddOne(g,!0,g).__trim()}static asIntN(t,a){var d=Math.floor;if(a.length===0)return a;if(t=d(t),0>t)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(t===0)return re.__zero();if(t>=re.__kMaxLengthBits)return a;const f=0|(t+29)/30;if(a.length<f)return a;const g=a.__unsignedDigit(f-1),_=1<<(t-1)%30;if(a.length===f&&g<_)return a;if((g&_)!==_)return re.__truncateToNBits(t,a);if(!a.sign)return re.__truncateAndSubFromPowerOfTwo(t,a,!0);if((g&_-1)==0){for(let c=f-2;0<=c;c--)if(a.__digit(c)!==0)return re.__truncateAndSubFromPowerOfTwo(t,a,!1);return a.length===f&&g===_?a:re.__truncateToNBits(t,a)}return re.__truncateAndSubFromPowerOfTwo(t,a,!1)}static asUintN(t,a){var d=Math.floor;if(a.length===0)return a;if(t=d(t),0>t)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(t===0)return re.__zero();if(a.sign){if(t>re.__kMaxLengthBits)throw new RangeError("BigInt too big");return re.__truncateAndSubFromPowerOfTwo(t,a,!1)}if(t>=re.__kMaxLengthBits)return a;const f=0|(t+29)/30;if(a.length<f)return a;const g=t%30;return a.length==f&&(g===0||!(a.__digit(f-1)>>>g))?a:re.__truncateToNBits(t,a)}static ADD(t,a){if(t=re.__toPrimitive(t),a=re.__toPrimitive(a),typeof t=="string")return typeof a!="string"&&(a=a.toString()),t+a;if(typeof a=="string")return t.toString()+a;if(t=re.__toNumeric(t),a=re.__toNumeric(a),re.__isBigInt(t)&&re.__isBigInt(a))return re.add(t,a);if(typeof t=="number"&&typeof a=="number")return t+a;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(t,a){return re.__compare(t,a,0)}static LE(t,a){return re.__compare(t,a,1)}static GT(t,a){return re.__compare(t,a,2)}static GE(t,a){return re.__compare(t,a,3)}static EQ(t,a){for(;;){if(re.__isBigInt(t))return re.__isBigInt(a)?re.equal(t,a):re.EQ(a,t);if(typeof t=="number"){if(re.__isBigInt(a))return re.__equalToNumber(a,t);if(typeof a!="object")return t==a;a=re.__toPrimitive(a)}else if(typeof t=="string"){if(re.__isBigInt(a))return t=re.__fromString(t),t!==null&&re.equal(t,a);if(typeof a!="object")return t==a;a=re.__toPrimitive(a)}else if(typeof t=="boolean"){if(re.__isBigInt(a))return re.__equalToNumber(a,+t);if(typeof a!="object")return t==a;a=re.__toPrimitive(a)}else if(typeof t=="symbol"){if(re.__isBigInt(a))return!1;if(typeof a!="object")return t==a;a=re.__toPrimitive(a)}else if(typeof t=="object"){if(typeof a=="object"&&a.constructor!==re)return t==a;t=re.__toPrimitive(t)}else return t==a}}static NE(t,a){return!re.EQ(t,a)}static DataViewGetBigInt64(t,a,d=!1){return re.asIntN(64,re.DataViewGetBigUint64(t,a,d))}static DataViewGetBigUint64(t,a,d=!1){const[f,g]=d?[4,0]:[0,4],_=t.getUint32(a+f,d),c=t.getUint32(a+g,d),A=new re(3,!1);return A.__setDigit(0,1073741823&c),A.__setDigit(1,(268435455&_)<<2|c>>>30),A.__setDigit(2,_>>>28),A.__trim()}static DataViewSetBigInt64(t,a,d,f=!1){re.DataViewSetBigUint64(t,a,d,f)}static DataViewSetBigUint64(t,a,d,f=!1){d=re.asUintN(64,d);let g=0,_=0;if(0<d.length&&(_=d.__digit(0),1<d.length)){const D=d.__digit(1);_|=D<<30,g=D>>>2,2<d.length&&(g|=d.__digit(2)<<28)}const[c,A]=f?[4,0]:[0,4];t.setUint32(a+c,g,f),t.setUint32(a+A,_,f)}static __zero(){return new re(0,!1)}static __oneDigit(t,a){const d=new re(1,a);return d.__setDigit(0,t),d}__copy(){const t=new re(this.length,this.sign);for(let a=0;a<this.length;a++)t[a]=this[a];return t}__trim(){let t=this.length,a=this[t-1];for(;a===0;)t--,a=this[t-1],this.pop();return t===0&&(this.sign=!1),this}__initializeDigits(){for(let t=0;t<this.length;t++)this[t]=0}static __decideRounding(t,a,d,f){if(0<a)return-1;let g;if(0>a)g=-a-1;else{if(d===0)return-1;d--,f=t.__digit(d),g=29}let _=1<<g;if((f&_)==0)return-1;if(_-=1,(f&_)!=0)return 1;for(;0<d;)if(d--,t.__digit(d)!==0)return 1;return 0}static __fromDouble(t){re.__kBitConversionDouble[0]=t;const a=2047&re.__kBitConversionInts[1]>>>20,d=a-1023,f=(0|d/30)+1,g=new re(f,0>t);let _=1048575&re.__kBitConversionInts[1]|1048576,c=re.__kBitConversionInts[0];const A=20,D=d%30;let O,z=0;if(D<20){const V=A-D;z=V+32,O=_>>>V,_=_<<32-V|c>>>V,c<<=32-V}else if(D===20)z=32,O=_,_=c,c=0;else{const V=D-A;z=32-V,O=_<<V|c>>>32-V,_=c<<V,c=0}g.__setDigit(f-1,O);for(let V=f-2;0<=V;V--)0<z?(z-=30,O=_>>>2,_=_<<30|c>>>2,c<<=30):O=0,g.__setDigit(V,O);return g.__trim()}static __isWhitespace(t){return 13>=t&&9<=t||(159>=t?t==32:131071>=t?t==160||t==5760:196607>=t?(t&=131071,10>=t||t==40||t==41||t==47||t==95||t==4096):t==65279)}static __fromString(t,a=0){let d=0;const f=t.length;let g=0;if(g===f)return re.__zero();let _=t.charCodeAt(g);for(;re.__isWhitespace(_);){if(++g===f)return re.__zero();_=t.charCodeAt(g)}if(_===43){if(++g===f)return null;_=t.charCodeAt(g),d=1}else if(_===45){if(++g===f)return null;_=t.charCodeAt(g),d=-1}if(a===0){if(a=10,_===48){if(++g===f)return re.__zero();if(_=t.charCodeAt(g),_===88||_===120){if(a=16,++g===f)return null;_=t.charCodeAt(g)}else if(_===79||_===111){if(a=8,++g===f)return null;_=t.charCodeAt(g)}else if(_===66||_===98){if(a=2,++g===f)return null;_=t.charCodeAt(g)}}}else if(a===16&&_===48){if(++g===f)return re.__zero();if(_=t.charCodeAt(g),_===88||_===120){if(++g===f)return null;_=t.charCodeAt(g)}}if(d!=0&&a!==10)return null;for(;_===48;){if(++g===f)return re.__zero();_=t.charCodeAt(g)}const c=f-g;let A=re.__kMaxBitsPerChar[a],D=re.__kBitsPerCharTableMultiplier-1;if(c>1073741824/A)return null;const O=A*c+D>>>re.__kBitsPerCharTableShift,z=new re(0|(O+29)/30,!1),V=10>a?a:10,H=10<a?a-10:0;if((a&a-1)==0){A>>=re.__kBitsPerCharTableShift;const ne=[],ae=[];let q=!1;do{let he=0,Ae=0;for(;;){let Ee;if(_-48>>>0<V)Ee=_-48;else if((32|_)-97>>>0<H)Ee=(32|_)-87;else{q=!0;break}if(Ae+=A,he=he<<A|Ee,++g===f){q=!0;break}if(_=t.charCodeAt(g),30<Ae+A)break}ne.push(he),ae.push(Ae)}while(!q);re.__fillFromParts(z,ne,ae)}else{z.__initializeDigits();let ne=!1,ae=0;do{let q=0,he=1;for(;;){let Ee;if(_-48>>>0<V)Ee=_-48;else if((32|_)-97>>>0<H)Ee=(32|_)-87;else{ne=!0;break}const Fe=he*a;if(1073741823<Fe)break;if(he=Fe,q=q*a+Ee,ae++,++g===f){ne=!0;break}_=t.charCodeAt(g)}D=30*re.__kBitsPerCharTableMultiplier-1;const Ae=0|(A*ae+D>>>re.__kBitsPerCharTableShift)/30;z.__inplaceMultiplyAdd(he,q,Ae)}while(!ne)}if(g!==f){if(!re.__isWhitespace(_))return null;for(g++;g<f;g++)if(_=t.charCodeAt(g),!re.__isWhitespace(_))return null}return z.sign=d==-1,z.__trim()}static __fillFromParts(t,a,d){let f=0,g=0,_=0;for(let c=a.length-1;0<=c;c--){const A=a[c],D=d[c];g|=A<<_,_+=D,_===30?(t.__setDigit(f++,g),_=0,g=0):30<_&&(t.__setDigit(f++,1073741823&g),_-=30,g=A>>>D-_)}if(g!==0){if(f>=t.length)throw new Error("implementation bug");t.__setDigit(f++,g)}for(;f<t.length;f++)t.__setDigit(f,0)}static __toStringBasePowerOfTwo(t,a){const d=t.length;let f=a-1;f=(85&f>>>1)+(85&f),f=(51&f>>>2)+(51&f),f=(15&f>>>4)+(15&f);const g=f,_=a-1,c=t.__digit(d-1),A=re.__clz30(c);let D=0|(30*d-A+g-1)/g;if(t.sign&&D++,268435456<D)throw new Error("string too long");const O=Array(D);let z=D-1,V=0,H=0;for(let ae=0;ae<d-1;ae++){const q=t.__digit(ae),he=(V|q<<H)&_;O[z--]=re.__kConversionChars[he];const Ae=g-H;for(V=q>>>Ae,H=30-Ae;H>=g;)O[z--]=re.__kConversionChars[V&_],V>>>=g,H-=g}const ne=(V|c<<H)&_;for(O[z--]=re.__kConversionChars[ne],V=c>>>g-H;V!==0;)O[z--]=re.__kConversionChars[V&_],V>>>=g;if(t.sign&&(O[z--]="-"),z!=-1)throw new Error("implementation bug");return O.join("")}static __toStringGeneric(t,a,d){const f=t.length;if(f===0)return"";if(f===1){let ae=t.__unsignedDigit(0).toString(a);return d===!1&&t.sign&&(ae="-"+ae),ae}const g=30*f-re.__clz30(t.__digit(f-1)),_=re.__kMaxBitsPerChar[a],c=_-1;let A=g*re.__kBitsPerCharTableMultiplier;A+=c-1,A=0|A/c;const D=A+1>>1,O=re.exponentiate(re.__oneDigit(a,!1),re.__oneDigit(D,!1));let z,V;const H=O.__unsignedDigit(0);if(O.length===1&&32767>=H){z=new re(t.length,!1),z.__initializeDigits();let ae=0;for(let q=2*t.length-1;0<=q;q--){const he=ae<<15|t.__halfDigit(q);z.__setHalfDigit(q,0|he/H),ae=0|he%H}V=ae.toString(a)}else{const ae=re.__absoluteDivLarge(t,O,!0,!0);z=ae.quotient;const q=ae.remainder.__trim();V=re.__toStringGeneric(q,a,!0)}z.__trim();let ne=re.__toStringGeneric(z,a,!0);for(;V.length<D;)V="0"+V;return d===!1&&t.sign&&(ne="-"+ne),ne+V}static __unequalSign(t){return t?-1:1}static __absoluteGreater(t){return t?-1:1}static __absoluteLess(t){return t?1:-1}static __compareToBigInt(t,a){const d=t.sign;if(d!==a.sign)return re.__unequalSign(d);const f=re.__absoluteCompare(t,a);return 0<f?re.__absoluteGreater(d):0>f?re.__absoluteLess(d):0}static __compareToNumber(t,a){if(re.__isOneDigitInt(a)){const d=t.sign,f=0>a;if(d!==f)return re.__unequalSign(d);if(t.length===0){if(f)throw new Error("implementation bug");return a===0?0:-1}if(1<t.length)return re.__absoluteGreater(d);const g=Math.abs(a),_=t.__unsignedDigit(0);return _>g?re.__absoluteGreater(d):_<g?re.__absoluteLess(d):0}return re.__compareToDouble(t,a)}static __compareToDouble(t,a){if(a!==a)return a;if(a===1/0)return-1;if(a===-1/0)return 1;const d=t.sign;if(d!==0>a)return re.__unequalSign(d);if(a===0)throw new Error("implementation bug: should be handled elsewhere");if(t.length===0)return-1;re.__kBitConversionDouble[0]=a;const f=2047&re.__kBitConversionInts[1]>>>20;if(f==2047)throw new Error("implementation bug: handled elsewhere");const g=f-1023;if(0>g)return re.__absoluteGreater(d);const _=t.length;let c=t.__digit(_-1);const A=re.__clz30(c),D=30*_-A,O=g+1;if(D<O)return re.__absoluteLess(d);if(D>O)return re.__absoluteGreater(d);let z=1048576|1048575&re.__kBitConversionInts[1],V=re.__kBitConversionInts[0];const H=20,ne=29-A;if(ne!==(0|(D-1)%30))throw new Error("implementation bug");let ae,q=0;if(20>ne){const he=H-ne;q=he+32,ae=z>>>he,z=z<<32-he|V>>>he,V<<=32-he}else if(ne===20)q=32,ae=z,z=V,V=0;else{const he=ne-H;q=32-he,ae=z<<he|V>>>32-he,z=V<<he,V=0}if(c>>>=0,ae>>>=0,c>ae)return re.__absoluteGreater(d);if(c<ae)return re.__absoluteLess(d);for(let he=_-2;0<=he;he--){0<q?(q-=30,ae=z>>>2,z=z<<30|V>>>2,V<<=30):ae=0;const Ae=t.__unsignedDigit(he);if(Ae>ae)return re.__absoluteGreater(d);if(Ae<ae)return re.__absoluteLess(d)}if(z!==0||V!==0){if(q===0)throw new Error("implementation bug");return re.__absoluteLess(d)}return 0}static __equalToNumber(t,a){var d=Math.abs;return re.__isOneDigitInt(a)?a===0?t.length===0:t.length===1&&t.sign===0>a&&t.__unsignedDigit(0)===d(a):re.__compareToDouble(t,a)===0}static __comparisonResultToBool(t,a){return a===0?0>t:a===1?0>=t:a===2?0<t:a===3?0<=t:void 0}static __compare(t,a,d){if(t=re.__toPrimitive(t),a=re.__toPrimitive(a),typeof t=="string"&&typeof a=="string")switch(d){case 0:return t<a;case 1:return t<=a;case 2:return t>a;case 3:return t>=a}if(re.__isBigInt(t)&&typeof a=="string")return a=re.__fromString(a),a!==null&&re.__comparisonResultToBool(re.__compareToBigInt(t,a),d);if(typeof t=="string"&&re.__isBigInt(a))return t=re.__fromString(t),t!==null&&re.__comparisonResultToBool(re.__compareToBigInt(t,a),d);if(t=re.__toNumeric(t),a=re.__toNumeric(a),re.__isBigInt(t)){if(re.__isBigInt(a))return re.__comparisonResultToBool(re.__compareToBigInt(t,a),d);if(typeof a!="number")throw new Error("implementation bug");return re.__comparisonResultToBool(re.__compareToNumber(t,a),d)}if(typeof t!="number")throw new Error("implementation bug");if(re.__isBigInt(a))return re.__comparisonResultToBool(re.__compareToNumber(a,t),2^d);if(typeof a!="number")throw new Error("implementation bug");return d===0?t<a:d===1?t<=a:d===2?t>a:d===3?t>=a:void 0}__clzmsd(){return re.__clz30(this.__digit(this.length-1))}static __absoluteAdd(t,a,d){if(t.length<a.length)return re.__absoluteAdd(a,t,d);if(t.length===0)return t;if(a.length===0)return t.sign===d?t:re.unaryMinus(t);let f=t.length;(t.__clzmsd()===0||a.length===t.length&&a.__clzmsd()===0)&&f++;const g=new re(f,d);let _=0,c=0;for(;c<a.length;c++){const A=t.__digit(c)+a.__digit(c)+_;_=A>>>30,g.__setDigit(c,1073741823&A)}for(;c<t.length;c++){const A=t.__digit(c)+_;_=A>>>30,g.__setDigit(c,1073741823&A)}return c<g.length&&g.__setDigit(c,_),g.__trim()}static __absoluteSub(t,a,d){if(t.length===0)return t;if(a.length===0)return t.sign===d?t:re.unaryMinus(t);const f=new re(t.length,d);let g=0,_=0;for(;_<a.length;_++){const c=t.__digit(_)-a.__digit(_)-g;g=1&c>>>30,f.__setDigit(_,1073741823&c)}for(;_<t.length;_++){const c=t.__digit(_)-g;g=1&c>>>30,f.__setDigit(_,1073741823&c)}return f.__trim()}static __absoluteAddOne(t,a,d=null){const f=t.length;d===null?d=new re(f,a):d.sign=a;let g=1;for(let _=0;_<f;_++){const c=t.__digit(_)+g;g=c>>>30,d.__setDigit(_,1073741823&c)}return g!=0&&d.__setDigitGrow(f,1),d}static __absoluteSubOne(t,a){const d=t.length;a=a||d;const f=new re(a,!1);let g=1;for(let _=0;_<d;_++){const c=t.__digit(_)-g;g=1&c>>>30,f.__setDigit(_,1073741823&c)}if(g!=0)throw new Error("implementation bug");for(let _=d;_<a;_++)f.__setDigit(_,0);return f}static __absoluteAnd(t,a,d=null){let f=t.length,g=a.length,_=g;if(f<g){_=f;const D=t,O=f;t=a,f=g,a=D,g=O}let c=_;d===null?d=new re(c,!1):c=d.length;let A=0;for(;A<_;A++)d.__setDigit(A,t.__digit(A)&a.__digit(A));for(;A<c;A++)d.__setDigit(A,0);return d}static __absoluteAndNot(t,a,d=null){const f=t.length,g=a.length;let _=g;f<g&&(_=f);let c=f;d===null?d=new re(c,!1):c=d.length;let A=0;for(;A<_;A++)d.__setDigit(A,t.__digit(A)&~a.__digit(A));for(;A<f;A++)d.__setDigit(A,t.__digit(A));for(;A<c;A++)d.__setDigit(A,0);return d}static __absoluteOr(t,a,d=null){let f=t.length,g=a.length,_=g;if(f<g){_=f;const D=t,O=f;t=a,f=g,a=D,g=O}let c=f;d===null?d=new re(c,!1):c=d.length;let A=0;for(;A<_;A++)d.__setDigit(A,t.__digit(A)|a.__digit(A));for(;A<f;A++)d.__setDigit(A,t.__digit(A));for(;A<c;A++)d.__setDigit(A,0);return d}static __absoluteXor(t,a,d=null){let f=t.length,g=a.length,_=g;if(f<g){_=f;const D=t,O=f;t=a,f=g,a=D,g=O}let c=f;d===null?d=new re(c,!1):c=d.length;let A=0;for(;A<_;A++)d.__setDigit(A,t.__digit(A)^a.__digit(A));for(;A<f;A++)d.__setDigit(A,t.__digit(A));for(;A<c;A++)d.__setDigit(A,0);return d}static __absoluteCompare(t,a){const d=t.length-a.length;if(d!=0)return d;let f=t.length-1;for(;0<=f&&t.__digit(f)===a.__digit(f);)f--;return 0>f?0:t.__unsignedDigit(f)>a.__unsignedDigit(f)?1:-1}static __multiplyAccumulate(t,a,d,f){if(a===0)return;const g=32767&a,_=a>>>15;let c=0,A=0;for(let D,O=0;O<t.length;O++,f++){D=d.__digit(f);const z=t.__digit(O),V=32767&z,H=z>>>15,ne=re.__imul(V,g),ae=re.__imul(V,_),q=re.__imul(H,g),he=re.__imul(H,_);D+=A+ne+c,c=D>>>30,D&=1073741823,D+=((32767&ae)<<15)+((32767&q)<<15),c+=D>>>30,A=he+(ae>>>15)+(q>>>15),d.__setDigit(f,1073741823&D)}for(;c!=0||A!==0;f++){let D=d.__digit(f);D+=c+A,A=0,c=D>>>30,d.__setDigit(f,1073741823&D)}}static __internalMultiplyAdd(t,a,d,f,g){let _=d,c=0;for(let A=0;A<f;A++){const D=t.__digit(A),O=re.__imul(32767&D,a),z=re.__imul(D>>>15,a),V=O+((32767&z)<<15)+c+_;_=V>>>30,c=z>>>15,g.__setDigit(A,1073741823&V)}if(g.length>f)for(g.__setDigit(f++,_+c);f<g.length;)g.__setDigit(f++,0);else if(_+c!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(t,a,d){d>this.length&&(d=this.length);const f=32767&t,g=t>>>15;let _=0,c=a;for(let A=0;A<d;A++){const D=this.__digit(A),O=32767&D,z=D>>>15,V=re.__imul(O,f),H=re.__imul(O,g),ne=re.__imul(z,f),ae=re.__imul(z,g);let q=c+V+_;_=q>>>30,q&=1073741823,q+=((32767&H)<<15)+((32767&ne)<<15),_+=q>>>30,c=ae+(H>>>15)+(ne>>>15),this.__setDigit(A,1073741823&q)}if(_!=0||c!==0)throw new Error("implementation bug")}static __absoluteDivSmall(t,a,d=null){d===null&&(d=new re(t.length,!1));let f=0;for(let g,_=2*t.length-1;0<=_;_-=2){g=(f<<15|t.__halfDigit(_))>>>0;const c=0|g/a;f=0|g%a,g=(f<<15|t.__halfDigit(_-1))>>>0;const A=0|g/a;f=0|g%a,d.__setDigit(_>>>1,c<<15|A)}return d}static __absoluteModSmall(t,a){let d=0;for(let f=2*t.length-1;0<=f;f--)d=0|((d<<15|t.__halfDigit(f))>>>0)%a;return d}static __absoluteDivLarge(t,a,d,f){const g=a.__halfDigitLength(),_=a.length,c=t.__halfDigitLength()-g;let A=null;d&&(A=new re(c+2>>>1,!1),A.__initializeDigits());const D=new re(g+2>>>1,!1);D.__initializeDigits();const O=re.__clz15(a.__halfDigit(g-1));0<O&&(a=re.__specialLeftShift(a,O,0));const z=re.__specialLeftShift(t,O,1),V=a.__halfDigit(g-1);let H=0;for(let ne,ae=c;0<=ae;ae--){ne=32767;const q=z.__halfDigit(ae+g);if(q!==V){const Ae=(q<<15|z.__halfDigit(ae+g-1))>>>0;ne=0|Ae/V;let Ee=0|Ae%V;const Fe=a.__halfDigit(g-2),De=z.__halfDigit(ae+g-2);for(;re.__imul(ne,Fe)>>>0>(Ee<<16|De)>>>0&&(ne--,Ee+=V,!(32767<Ee)););}re.__internalMultiplyAdd(a,ne,0,_,D);let he=z.__inplaceSub(D,ae,g+1);he!==0&&(he=z.__inplaceAdd(a,ae,g),z.__setHalfDigit(ae+g,32767&z.__halfDigit(ae+g)+he),ne--),d&&(1&ae?H=ne<<15:A.__setDigit(ae>>>1,H|ne))}if(f)return z.__inplaceRightShift(O),d?{quotient:A,remainder:z}:z;if(d)return A;throw new Error("unreachable")}static __clz15(t){return re.__clz30(t)-15}__inplaceAdd(t,a,d){let f=0;for(let g=0;g<d;g++){const _=this.__halfDigit(a+g)+t.__halfDigit(g)+f;f=_>>>15,this.__setHalfDigit(a+g,32767&_)}return f}__inplaceSub(t,a,d){let f=0;if(1&a){a>>=1;let g=this.__digit(a),_=32767&g,c=0;for(;c<d-1>>>1;c++){const O=t.__digit(c),z=(g>>>15)-(32767&O)-f;f=1&z>>>15,this.__setDigit(a+c,(32767&z)<<15|32767&_),g=this.__digit(a+c+1),_=(32767&g)-(O>>>15)-f,f=1&_>>>15}const A=t.__digit(c),D=(g>>>15)-(32767&A)-f;if(f=1&D>>>15,this.__setDigit(a+c,(32767&D)<<15|32767&_),a+c+1>=this.length)throw new RangeError("out of bounds");(1&d)==0&&(g=this.__digit(a+c+1),_=(32767&g)-(A>>>15)-f,f=1&_>>>15,this.__setDigit(a+t.length,1073709056&g|32767&_))}else{a>>=1;let g=0;for(;g<t.length-1;g++){const O=this.__digit(a+g),z=t.__digit(g),V=(32767&O)-(32767&z)-f;f=1&V>>>15;const H=(O>>>15)-(z>>>15)-f;f=1&H>>>15,this.__setDigit(a+g,(32767&H)<<15|32767&V)}const _=this.__digit(a+g),c=t.__digit(g),A=(32767&_)-(32767&c)-f;f=1&A>>>15;let D=0;(1&d)==0&&(D=(_>>>15)-(c>>>15)-f,f=1&D>>>15),this.__setDigit(a+g,(32767&D)<<15|32767&A)}return f}__inplaceRightShift(t){if(t===0)return;let a=this.__digit(0)>>>t;const d=this.length-1;for(let f=0;f<d;f++){const g=this.__digit(f+1);this.__setDigit(f,1073741823&g<<30-t|a),a=g>>>t}this.__setDigit(d,a)}static __specialLeftShift(t,a,d){const f=t.length,g=new re(f+d,!1);if(a===0){for(let c=0;c<f;c++)g.__setDigit(c,t.__digit(c));return 0<d&&g.__setDigit(f,0),g}let _=0;for(let c=0;c<f;c++){const A=t.__digit(c);g.__setDigit(c,1073741823&A<<a|_),_=A>>>30-a}return 0<d&&g.__setDigit(f,_),g}static __leftShiftByAbsolute(t,a){const d=re.__toShiftAmount(a);if(0>d)throw new RangeError("BigInt too big");const f=0|d/30,g=d%30,_=t.length,c=g!==0&&t.__digit(_-1)>>>30-g!=0,A=_+f+(c?1:0),D=new re(A,t.sign);if(g===0){let O=0;for(;O<f;O++)D.__setDigit(O,0);for(;O<A;O++)D.__setDigit(O,t.__digit(O-f))}else{let O=0;for(let z=0;z<f;z++)D.__setDigit(z,0);for(let z=0;z<_;z++){const V=t.__digit(z);D.__setDigit(z+f,1073741823&V<<g|O),O=V>>>30-g}if(c)D.__setDigit(_+f,O);else if(O!==0)throw new Error("implementation bug")}return D.__trim()}static __rightShiftByAbsolute(t,a){const d=t.length,f=t.sign,g=re.__toShiftAmount(a);if(0>g)return re.__rightShiftByMaximum(f);const _=0|g/30,c=g%30;let A=d-_;if(0>=A)return re.__rightShiftByMaximum(f);let D=!1;if(f){if((t.__digit(_)&(1<<c)-1)!=0)D=!0;else for(let z=0;z<_;z++)if(t.__digit(z)!==0){D=!0;break}}D&&c===0&&~t.__digit(d-1)==0&&A++;let O=new re(A,f);if(c===0){O.__setDigit(A-1,0);for(let z=_;z<d;z++)O.__setDigit(z-_,t.__digit(z))}else{let z=t.__digit(_)>>>c;const V=d-_-1;for(let H=0;H<V;H++){const ne=t.__digit(H+_+1);O.__setDigit(H,1073741823&ne<<30-c|z),z=ne>>>c}O.__setDigit(V,z)}return D&&(O=re.__absoluteAddOne(O,!0,O)),O.__trim()}static __rightShiftByMaximum(t){return t?re.__oneDigit(1,!0):re.__zero()}static __toShiftAmount(t){if(1<t.length)return-1;const a=t.__unsignedDigit(0);return a>re.__kMaxLengthBits?-1:a}static __toPrimitive(t,a="default"){if(typeof t!="object"||t.constructor===re)return t;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const g=t[Symbol.toPrimitive];if(g){const _=g(a);if(typeof _!="object")return _;throw new TypeError("Cannot convert object to primitive value")}}const d=t.valueOf;if(d){const g=d.call(t);if(typeof g!="object")return g}const f=t.toString;if(f){const g=f.call(t);if(typeof g!="object")return g}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(t){return re.__isBigInt(t)?t:+t}static __isBigInt(t){return typeof t=="object"&&t!==null&&t.constructor===re}static __truncateToNBits(t,a){const d=0|(t+29)/30,f=new re(d,a.sign),g=d-1;for(let c=0;c<g;c++)f.__setDigit(c,a.__digit(c));let _=a.__digit(g);if(t%30!=0){const c=32-t%30;_=_<<c>>>c}return f.__setDigit(g,_),f.__trim()}static __truncateAndSubFromPowerOfTwo(t,a,d){var f=Math.min;const g=0|(t+29)/30,_=new re(g,d);let c=0;const A=g-1;let D=0;for(const H=f(A,a.length);c<H;c++){const ne=0-a.__digit(c)-D;D=1&ne>>>30,_.__setDigit(c,1073741823&ne)}for(;c<A;c++)_.__setDigit(c,0|1073741823&-D);let O=A<a.length?a.__digit(A):0;const z=t%30;let V;if(z==0)V=0-O-D,V&=1073741823;else{const H=32-z;O=O<<H>>>H;const ne=1<<32-H;V=ne-O-D,V&=ne-1}return _.__setDigit(A,V),_.__trim()}__digit(t){return this[t]}__unsignedDigit(t){return this[t]>>>0}__setDigit(t,a){this[t]=0|a}__setDigitGrow(t,a){this[t]=0|a}__halfDigitLength(){const t=this.length;return 32767>=this.__unsignedDigit(t-1)?2*t-1:2*t}__halfDigit(t){return 32767&this[t>>>1]>>>15*(1&t)}__setHalfDigit(t,a){const d=t>>>1,f=this.__digit(d),g=1&t?32767&f|a<<15:1073709056&f|32767&a;this.__setDigit(d,g)}static __digitPow(t,a){let d=1;for(;0<a;)1&a&&(d*=t),a>>>=1,t*=t;return d}static __isOneDigitInt(t){return(1073741823&t)===t}}re.__kMaxLength=33554432,re.__kMaxLengthBits=re.__kMaxLength<<5,re.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],re.__kBitsPerCharTableShift=5,re.__kBitsPerCharTableMultiplier=1<<re.__kBitsPerCharTableShift,re.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],re.__kBitConversionBuffer=new ArrayBuffer(8),re.__kBitConversionDouble=new Float64Array(re.__kBitConversionBuffer),re.__kBitConversionInts=new Int32Array(re.__kBitConversionBuffer),re.__clz30=Math.clz32?function(i){return Math.clz32(i)-2}:function(i){return i===0?30:0|29-(0|Math.log(i>>>0)/Math.LN2)},re.__imul=Math.imul||function(i,t){return 0|i*t};const Ll=re.BigInt(0),iv=re.BigInt(1),X2=re.BigInt(2),x5=re.BigInt(10),w5=re.BigInt(24),T5=re.BigInt(60),S5=re.BigInt(1e3),xv=re.BigInt(1e6),Z_=re.BigInt(1e9),eD=re.multiply(re.BigInt(3600),Z_),E5=re.multiply(T5,Z_),wp=re.multiply(eD,w5);function Ld(i){return typeof i=="bigint"?re.BigInt(i.toString(10)):i}function tD(i){return re.equal(re.remainder(i,X2),Ll)}function Bm(i){return re.lessThan(i,Ll)?re.unaryMinus(i):i}function mx(i,t){return re.lessThan(i,t)?-1:re.greaterThan(i,t)?1:0}function O_(i,t){return{quotient:re.divide(i,t),remainder:re.remainder(i,t)}}var SE,EE;const _n="slot-epochNanoSeconds",vn="slot-iso-date",mr="slot-iso-date-time",zr="slot-time",Dt="slot-calendar",nD="slot-date-brand",iD="slot-year-month-brand",rD="slot-month-day-brand",Di="slot-time-zone",as="slot-years",os="slot-months",Hs="slot-weeks",ss="slot-days",ls="slot-hours",cs="slot-minutes",us="slot-seconds",hs="slot-milliseconds",ds="slot-microseconds",Ws="slot-nanoseconds",aD="date",oD="ym",sD="md",lD="time",cD="datetime",uD="instant",ug="original",Ey="timezone-canonical",zw="timezone-original",L_="calendar-id",hD="locale",Fw="options",dD=new WeakMap,jw=Symbol.for("@@Temporal__GetSlots");(SE=globalThis)[jw]||(SE[jw]=function(i){return dD.get(i)});const $x=globalThis[jw],Bw=Symbol.for("@@Temporal__CreateSlots");(EE=globalThis)[Bw]||(EE[Bw]=function(i){dD.set(i,Object.create(null))});const of=globalThis[Bw];function _s(i,...t){if(!i||typeof i!="object")return!1;const a=$x(i);return!!a&&t.every(d=>d in a)}function se(i,t){const a=$x(i)?.[t];if(a===void 0)throw new TypeError(`Missing internal slot ${t}`);return a}function Vn(i,t,a){const d=$x(i);if(d===void 0)throw new TypeError("Missing slots for the given container");if(d[t])throw new TypeError(`${t} already has set`);d[t]=a}const Vw={};function sf(i,t){Object.defineProperty(i.prototype,Symbol.toStringTag,{value:t,writable:!1,enumerable:!1,configurable:!0});const a=Object.getOwnPropertyNames(i);for(let f=0;f<a.length;f++){const g=a[f],_=Object.getOwnPropertyDescriptor(i,g);_.configurable&&_.enumerable&&(_.enumerable=!1,Object.defineProperty(i,g,_))}const d=Object.getOwnPropertyNames(i.prototype);for(let f=0;f<d.length;f++){const g=d[f],_=Object.getOwnPropertyDescriptor(i.prototype,g);_.configurable&&_.enumerable&&(_.enumerable=!1,Object.defineProperty(i.prototype,g,_))}Uw(t,i),Uw(`${t}.prototype`,i.prototype)}function Uw(i,t){const a=`%${i}%`;if(Vw[a]!==void 0)throw new Error(`intrinsic ${i} already exists`);Vw[a]=t}function yo(i){return Vw[i]}function My(i,t){let a=i;if(a===0)return{div:a,mod:a};const d=Math.sign(a);a=Math.abs(a);const f=Math.trunc(1+Math.log10(a));if(t>=f)return{div:0*d,mod:d*a};if(t===0)return{div:d*a,mod:0*d};const g=a.toPrecision(f);return{div:d*Number.parseInt(g.slice(0,f-t),10),mod:d*Number.parseInt(g.slice(f-t),10)}}function ow(i,t,a){let d=i,f=a;if(d===0)return f;const g=Math.sign(d)||Math.sign(f);d=Math.abs(d),f=Math.abs(f);const _=d.toPrecision(Math.trunc(1+Math.log10(d)));if(f===0)return g*Number.parseInt(_+"0".repeat(t),10);const c=_+f.toPrecision(Math.trunc(1+Math.log10(f))).padStart(t,"0");return g*Number.parseInt(c,10)}function Yx(i,t){const a=t==="negative";switch(i){case"ceil":return a?"zero":"infinity";case"floor":return a?"infinity":"zero";case"expand":return"infinity";case"trunc":return"zero";case"halfCeil":return a?"half-zero":"half-infinity";case"halfFloor":return a?"half-infinity":"half-zero";case"halfExpand":return"half-infinity";case"halfTrunc":return"half-zero";case"halfEven":return"half-even"}}function qx(i,t,a,d,f){return f==="zero"?i:f==="infinity"?t:a<0?i:a>0?t:f==="half-zero"?i:f==="half-infinity"?t:d?i:t}class $n{constructor(t){this.totalNs=Ld(t),this.sec=re.toNumber(re.divide(this.totalNs,Z_)),this.subsec=re.toNumber(re.remainder(this.totalNs,Z_))}static validateNew(t,a){if(re.greaterThan(Bm(t),$n.MAX))throw new RangeError(`${a} of duration time units cannot exceed ${$n.MAX} s`);return new $n(t)}static fromEpochNsDiff(t,a){const d=re.subtract(Ld(t),Ld(a));return new $n(d)}static fromComponents(t,a,d,f,g,_){const c=re.add(re.add(re.add(re.add(re.add(re.BigInt(_),re.multiply(re.BigInt(g),S5)),re.multiply(re.BigInt(f),xv)),re.multiply(re.BigInt(d),Z_)),re.multiply(re.BigInt(a),E5)),re.multiply(re.BigInt(t),eD));return $n.validateNew(c,"total")}abs(){return new $n(Bm(this.totalNs))}add(t){return $n.validateNew(re.add(this.totalNs,t.totalNs),"sum")}add24HourDays(t){return $n.validateNew(re.add(this.totalNs,re.multiply(re.BigInt(t),wp)),"sum")}addToEpochNs(t){return re.add(Ld(t),this.totalNs)}cmp(t){return mx(this.totalNs,t.totalNs)}divmod(t){const{quotient:a,remainder:d}=O_(this.totalNs,re.BigInt(t));return{quotient:re.toNumber(a),remainder:new $n(d)}}fdiv(t){const a=Ld(t),d=re.BigInt(a);let{quotient:f,remainder:g}=O_(this.totalNs,d);const _=[];let c;const A=(re.lessThan(this.totalNs,Ll)?-1:1)*Math.sign(re.toNumber(a));for(;!re.equal(g,Ll)&&_.length<50;)g=re.multiply(g,x5),{quotient:c,remainder:g}=O_(g,d),_.push(Math.abs(re.toNumber(c)));return A*+(Bm(f).toString()+"."+_.join(""))}isZero(){return re.equal(this.totalNs,Ll)}round(t,a){const d=Ld(t);if(re.equal(d,iv))return this;const{quotient:f,remainder:g}=O_(this.totalNs,d),_=re.lessThan(this.totalNs,Ll)?"negative":"positive",c=re.multiply(Bm(f),d),A=re.add(c,d),D=mx(Bm(re.multiply(g,X2)),d),O=Yx(a,_),z=re.equal(Bm(this.totalNs),c)?c:qx(c,A,D,tD(f),O),V=_==="positive"?z:re.unaryMinus(z);return $n.validateNew(V,"rounding")}sign(){return this.cmp(new $n(Ll))}subtract(t){return $n.validateNew(re.subtract(this.totalNs,t.totalNs),"difference")}}$n.MAX=re.BigInt("9007199254740991999999999"),$n.ZERO=new $n(Ll);const AE=/[A-Za-z._][A-Za-z._0-9+-]*/,wv=new RegExp(`(?:${/(?:[+-](?:[01][0-9]|2[0-3])(?::?[0-5][0-9])?)/.source}|(?:${AE.source})(?:\\/(?:${AE.source}))*)`),fD=/(?:[+-]\d{6}|\d{4})/,gx=/(?:0[1-9]|1[0-2])/,Gw=/(?:0[1-9]|[12]\d|3[01])/,A5=new RegExp(`(${fD.source})(?:-(${gx.source})-(${Gw.source})|(${gx.source})(${Gw.source}))`),pD=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,mD=/((?:[+-])(?:[01][0-9]|2[0-3])(?::?(?:[0-5][0-9])(?::?(?:[0-5][0-9])(?:[.,](?:\d{1,9}))?)?)?)/,gD=new RegExp(`([zZ])|${mD.source}?`),Vy=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,M5=new RegExp([`^${A5.source}`,`(?:(?:[tT]|\\s+)${pD.source}(?:${gD.source})?)?`,`(?:\\[!?(${wv.source})\\])?`,`((?:${Vy.source})*)$`].join("")),C5=new RegExp([`^[tT]?${pD.source}`,`(?:${gD.source})?`,`(?:\\[!?${wv.source}\\])?`,`((?:${Vy.source})*)$`].join("")),D5=new RegExp(`^(${fD.source})-?(${gx.source})(?:\\[!?${wv.source}\\])?((?:${Vy.source})*)$`),I5=new RegExp(`^(?:--)?(${gx.source})-?(${Gw.source})(?:\\[!?${wv.source}\\])?((?:${Vy.source})*)$`),sw=/(\d+)(?:[.,](\d{1,9}))?/,R5=new RegExp(`(?:${sw.source}H)?(?:${sw.source}M)?(?:${sw.source}S)?`),k5=new RegExp(`^([+-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${R5.source})?$`,"i"),Tp=864e5,yx=1e6*Tp,O5=6e10,yD=1e8*Tp,Uy=wh(yD),rv=re.unaryMinus(Uy),L5=re.add(re.subtract(rv,wp),iv),N5=re.subtract(re.add(Uy,wp),iv),P5=146097*Tp,ME=-271821,CE=275760,$_=Date.UTC(1847,0,1),z5=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","ethiopic-amete-alem","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"],F5=new Set(["ACT","AET","AGT","ART","AST","BET","BST","CAT","CNT","CST","CTT","EAT","ECT","IET","IST","JST","MIT","NET","NST","PLT","PNT","PRT","PST","SST","VST"]);function Fr(i){return typeof i=="object"&&i!==null||typeof i=="function"}function Hx(i){if(typeof i=="bigint")throw new TypeError("Cannot convert BigInt to number");return Number(i)}function Wx(i){if(typeof i=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return String(i)}function Mn(i){const t=Hx(i);if(t===0)return 0;if(Number.isNaN(t)||t===1/0||t===-1/0)throw new RangeError("invalid number value");const a=Math.trunc(t);return a===0?0:a}function DE(i,t){const a=Mn(i);if(a<=0)throw t!==void 0?new RangeError(`property '${t}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return a}function vu(i){const t=Hx(i);if(Number.isNaN(t))throw new RangeError("not a number");if(t===1/0||t===-1/0)throw new RangeError("infinity is out of range");if(!function(a){if(typeof a!="number"||Number.isNaN(a)||a===1/0||a===-1/0)return!1;const d=Math.abs(a);return Math.floor(d)===d}(t))throw new RangeError(`unsupported fractional value ${i}`);return t===0?0:t}function av(i,t){return String(i).padStart(t,"0")}function Na(i){if(typeof i!="string")throw new TypeError(`expected a string, not ${String(i)}`);return i}function Zw(i,t){if(Fr(i)){const a=i?.toString();if(typeof a=="string"||typeof a=="number")return a;throw new TypeError("Cannot convert object to primitive value")}return i}const $w=["era","eraYear","year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],j5={era:Wx,eraYear:Mn,year:Mn,month:DE,monthCode:function(i){const t=Na(Zw(i));if(t.length<3||t.length>4||t[0]!=="M"||"0123456789".indexOf(t[1])===-1||"0123456789".indexOf(t[2])===-1||t[1]+t[2]==="00"&&t[3]!=="L"||t[3]!=="L"&&t[3]!==void 0)throw new RangeError(`bad month code ${t}; must match M01-M99 or M00L-M99L`);return t},day:DE,hour:Mn,minute:Mn,second:Mn,millisecond:Mn,microsecond:Mn,nanosecond:Mn,offset:function(i){const t=Na(Zw(i));return s0(t),t},timeZone:ms},B5={hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},Gy=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],IE=Object.fromEntries(Gy.map(i=>[i[0],i[1]])),V5=Object.fromEntries(Gy.map(([i,t])=>[t,i])),Y_=Gy.map(([,i])=>i),Zy={day:yx,hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},_x=["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],U5=Intl.DateTimeFormat,RE=new Map;function _D(i){const t=uv(i);let a=RE.get(t);return a===void 0&&(a=new U5("en-us",{timeZone:t,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),RE.set(t,a)),a}function fo(i){return _s(i,_n)&&!_s(i,Di,Dt)}function Nr(i){return _s(i,as,os,ss,ls,cs,us,hs,ds,Ws)}function Pr(i){return _s(i,nD)}function Yr(i){return _s(i,zr)}function sr(i){return _s(i,mr)}function po(i){return _s(i,iD)}function Ol(i){return _s(i,rD)}function Zn(i){return _s(i,_n,Di,Dt)}function ot(i,t){if(!t(i))throw new TypeError("invalid receiver: method called with the wrong type of this-object")}function r0(i){if(_s(i,Dt)||_s(i,Di))throw new TypeError("with() does not support a calendar or timeZone property");if(Yr(i))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(i.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(i.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function Tv(i,t){return t==="never"||t==="auto"&&i==="iso8601"?"":`[${t==="critical"?"!":""}u-ca=${i}]`}function Xx(i){let t,a,d=!1;for(Vy.lastIndex=0;a=Vy.exec(i);){const{1:f,2:g,3:_}=a;if(g==="u-ca"){if(t===void 0)t=_,d=f==="!";else if(f==="!"||d)throw new RangeError(`Invalid annotations in ${i}: more than one u-ca present with critical flag`)}else if(f==="!")throw new RangeError(`Unrecognized annotation: !${g}=${_}`)}return t}function Rh(i){const t=M5.exec(i);if(!t)throw new RangeError(`invalid RFC 9557 string: ${i}`);const a=Xx(t[16]);let d=t[1];if(d==="-000000")throw new RangeError(`invalid RFC 9557 string: ${i}`);const f=+d,g=+(t[2]??t[4]??1),_=+(t[3]??t[5]??1),c=t[6]!==void 0,A=+(t[6]??0),D=+(t[7]??t[10]??0);let O=+(t[8]??t[11]??0);O===60&&(O=59);const z=(t[9]??t[12]??"")+"000000000",V=+z.slice(0,3),H=+z.slice(3,6),ne=+z.slice(6,9);let ae,q=!1;t[13]?(ae=void 0,q=!0):t[14]&&(ae=t[14]);const he=t[15];return nT(f,g,_,A,D,O,V,H,ne),{year:f,month:g,day:_,time:c?{hour:A,minute:D,second:O,millisecond:V,microsecond:H,nanosecond:ne}:"start-of-day",tzAnnotation:he,offset:ae,z:q,calendar:a}}function vD(i){const t=C5.exec(i);let a,d,f,g,_,c,A;if(t){A=Xx(t[10]),a=+(t[1]??0),d=+(t[2]??t[5]??0),f=+(t[3]??t[6]??0),f===60&&(f=59);const D=(t[4]??t[7]??"")+"000000000";if(g=+D.slice(0,3),_=+D.slice(3,6),c=+D.slice(6,9),t[8])throw new RangeError("Z designator not supported for PlainTime")}else{let D,O;if({time:D,z:O,calendar:A}=Rh(i),D==="start-of-day")throw new RangeError(`time is missing in string: ${i}`);if(O)throw new RangeError("Z designator not supported for PlainTime");({hour:a,minute:d,second:f,millisecond:g,microsecond:_,nanosecond:c}=D)}if(e1(a,d,f,g,_,c),/[tT ][0-9][0-9]/.test(i))return{hour:a,minute:d,second:f,millisecond:g,microsecond:_,nanosecond:c,calendar:A};try{const{month:D,day:O}=K2(i);tg(1972,D,O)}catch{try{const{year:D,month:O}=Q2(i);tg(D,O,1)}catch{return{hour:a,minute:d,second:f,millisecond:g,microsecond:_,nanosecond:c,calendar:A}}}throw new RangeError(`invalid RFC 9557 time-only string ${i}; may need a T prefix`)}function Q2(i){const t=D5.exec(i);let a,d,f,g;if(t){f=Xx(t[3]);let _=t[1];if(_==="-000000")throw new RangeError(`invalid RFC 9557 string: ${i}`);if(a=+_,d=+t[2],g=1,f!==void 0&&f!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let _;if({year:a,month:d,calendar:f,day:g,z:_}=Rh(i),_)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:a,month:d,calendar:f,referenceISODay:g}}function K2(i){const t=I5.exec(i);let a,d,f,g;if(t){if(f=Xx(t[3]),a=+t[1],d=+t[2],f!==void 0&&f!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let _;if({month:a,day:d,calendar:f,year:g,z:_}=Rh(i),_)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:a,day:d,calendar:f,referenceISOYear:g}}const bD=new RegExp(`^${wv.source}$`,"i"),xD=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])?)?/.source}$`);function wD(i){const t=Z5.test(i)?"Seconds not allowed in offset time zone":"Invalid time zone";throw new RangeError(`${t}: ${i}`)}function vp(i){return bD.test(i)||wD(i),xD.test(i)?{offsetMinutes:s0(i)/6e10}:{tzName:i}}function q_(i,t,a,d){let f=i,g=t,_=a;switch(d){case"reject":tg(f,g,_);break;case"constrain":({year:f,month:g,day:_}=jD(f,g,_))}return{year:f,month:g,day:_}}function Qx(i,t,a,d,f,g,_){let c=i,A=t,D=a,O=d,z=f,V=g;switch(_){case"reject":e1(c,A,D,O,z,V);break;case"constrain":c=fs(c,0,23),A=fs(A,0,59),D=fs(D,0,59),O=fs(O,0,999),z=fs(z,0,999),V=fs(V,0,999)}return{hour:c,minute:A,second:D,millisecond:O,microsecond:z,nanosecond:V}}function TD(i){if(!Fr(i))throw new TypeError("invalid duration-like");const t={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let a=!1;for(let d=0;d<_x.length;d++){const f=_x[d],g=i[f];g!==void 0&&(a=!0,t[f]=vu(g))}if(!a)throw new TypeError("invalid duration-like");return t}function Lo({years:i,months:t,weeks:a,days:d},f,g,_){return{years:i,months:_??t,weeks:g??a,days:f??d}}function ui(i,t){return{isoDate:i,time:t}}function si(i){return Wd(i,"overflow",["constrain","reject"],"constrain")}function H_(i){return Wd(i,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Su(i,t){return Wd(i,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],t)}function Jb(i,t){return Wd(i,"offset",["prefer","use","ignore","reject"],t)}function Sv(i){return Wd(i,"calendarName",["auto","always","never","critical"],"auto")}function a0(i){let t=i.roundingIncrement;if(t===void 0)return 1;const a=Mn(t);if(a<1||a>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${t}`);return a}function o0(i,t,a){const d=a?t:t-1;if(i>d)throw new RangeError(`roundingIncrement must be at least 1 and less than ${d}, not ${i}`);if(t%i!=0)throw new RangeError(`Rounding increment must divide evenly into ${t}`)}function Ev(i){const t=i.fractionalSecondDigits;if(t===void 0)return"auto";if(typeof t!="number"){if(Wx(t)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);return"auto"}const a=Math.floor(t);if(!Number.isFinite(a)||a<0||a>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);return a}function Av(i,t){switch(i){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(t){case"auto":return{precision:t,unit:"nanosecond",increment:1};case 0:return{precision:t,unit:"second",increment:1};case 1:case 2:case 3:return{precision:t,unit:"millisecond",increment:10**(3-t)};case 4:case 5:case 6:return{precision:t,unit:"microsecond",increment:10**(6-t)};case 7:case 8:case 9:return{precision:t,unit:"nanosecond",increment:10**(9-t)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const tf=Symbol("~required~");function Qs(i,t,a,d,f=[]){let g=[];for(let D=0;D<Gy.length;D++){const O=Gy[D],z=O[1],V=O[2];a!=="datetime"&&a!==V||g.push(z)}g=g.concat(f);let _=d;_===tf?_=void 0:_!==void 0&&g.push(_);let c=[];c=c.concat(g);for(let D=0;D<g.length;D++){const O=g[D],z=V5[O];z!==void 0&&c.push(z)}let A=Wd(i,t,c,_);if(A===void 0&&d===tf)throw new RangeError(`${t} is required`);return A&&A in IE?IE[A]:A}function lw(i){const t=i.relativeTo;if(t===void 0)return{};let a,d,f,g,_,c="option",A=!1;if(Fr(t)){if(Zn(t))return{zonedRelativeTo:t};if(Pr(t))return{plainRelativeTo:t};if(sr(t))return{plainRelativeTo:ps(se(t,mr).isoDate,se(t,Dt))};f=Rv(t);const D=Vl(f,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],[]);({isoDate:a,time:d}=Cv(f,D,"constrain")),{offset:_,timeZone:g}=D,_===void 0&&(c="wall")}else{let D,O,z,V,H;if({year:z,month:V,day:H,time:d,calendar:f,tzAnnotation:D,offset:_,z:O}=Rh(Na(t)),D)g=ms(D),O?c="exact":_||(c="wall"),A=!0;else if(O)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");f||(f="iso8601"),f=vs(f),a={year:z,month:V,day:H}}return g===void 0?{plainRelativeTo:ps(a,f)}:{zonedRelativeTo:Oo(vx(a,d,c,c==="option"?s0(_):0,g,"compatible","reject",A),g,f)}}function Pd(i){return se(i,as)!==0?"year":se(i,os)!==0?"month":se(i,Hs)!==0?"week":se(i,ss)!==0?"day":se(i,ls)!==0?"hour":se(i,cs)!==0?"minute":se(i,us)!==0?"second":se(i,hs)!==0?"millisecond":se(i,ds)!==0?"microsecond":"nanosecond"}function qd(i,t){return Y_.indexOf(i)>Y_.indexOf(t)?t:i}function gh(i){return i==="year"||i==="month"||i==="week"}function zd(i){return gh(i)||i==="day"?"date":"time"}function Cp(i){return yo("%calendarImpl%")(i)}function Mv(i){return yo("%calendarImpl%")(se(i,Dt))}function gs(i,t,a="date"){const d=Object.create(null),f=Cp(i).isoToDate(t,{year:!0,monthCode:!0,day:!0});return d.monthCode=f.monthCode,a!=="month-day"&&a!=="date"||(d.day=f.day),a!=="year-month"&&a!=="date"||(d.year=f.year),d}function Vl(i,t,a,d,f){const g=Cp(i).extraFields(a),_=a.concat(d,g),c=Object.create(null);let A=!1;_.sort();for(let D=0;D<_.length;D++){const O=_[D],z=t[O];if(z!==void 0)A=!0,c[O]=(0,j5[O])(z);else if(f!=="partial"){if(f.includes(O))throw new TypeError(`required property '${O}' missing or undefined`);c[O]=B5[O]}}if(f==="partial"&&!A)throw new TypeError("no supported properties found");return c}function Yw(i,t="complete"){const a=["hour","microsecond","millisecond","minute","nanosecond","second"];let d=!1;const f=Object.create(null);for(let g=0;g<a.length;g++){const _=a[g],c=i[_];c!==void 0?(f[_]=Mn(c),d=!0):t==="complete"&&(f[_]=0)}if(!d)throw new TypeError("invalid time-like");return f}function N_(i,t){if(Fr(i)){if(Pr(i))return si(nn(t)),ps(se(i,vn),se(i,Dt));if(Zn(i)){const A=Ac(se(i,Di),se(i,_n));return si(nn(t)),ps(A.isoDate,se(i,Dt))}if(sr(i))return si(nn(t)),ps(se(i,mr).isoDate,se(i,Dt));const c=Rv(i);return ps(Sp(c,Vl(c,i,["year","month","monthCode","day"],[],[]),si(nn(t))),c)}let{year:a,month:d,day:f,calendar:g,z:_}=Rh(Na(i));if(_)throw new RangeError("Z designator not supported for PlainDate");return g||(g="iso8601"),g=vs(g),si(nn(t)),ps({year:a,month:d,day:f},g)}function Cv(i,t,a){return ui(Sp(i,t,a),Qx(t.hour,t.minute,t.second,t.millisecond,t.microsecond,t.nanosecond,a))}function P_(i,t){let a,d,f;if(Fr(i)){if(sr(i))return si(nn(t)),bc(se(i,mr),se(i,Dt));if(Zn(i)){const c=Ac(se(i,Di),se(i,_n));return si(nn(t)),bc(c,se(i,Dt))}if(Pr(i))return si(nn(t)),bc(ui(se(i,vn),{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),se(i,Dt));f=Rv(i);const g=Vl(f,i,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],[]),_=si(nn(t));({isoDate:a,time:d}=Cv(f,g,_))}else{let g,_,c,A;if({year:_,month:c,day:A,time:d,calendar:f,z:g}=Rh(Na(i)),g)throw new RangeError("Z designator not supported for PlainDateTime");d==="start-of-day"&&(d={deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),nT(_,c,A,d.hour,d.minute,d.second,d.millisecond,d.microsecond,d.nanosecond),f||(f="iso8601"),f=vs(f),si(nn(t)),a={year:_,month:c,day:A}}return bc(ui(a,d),f)}function Tc(i){const t=yo("%Temporal.Duration%");if(Nr(i))return new t(se(i,as),se(i,os),se(i,Hs),se(i,ss),se(i,ls),se(i,cs),se(i,us),se(i,hs),se(i,ds),se(i,Ws));if(!Fr(i))return function(f){const{years:g,months:_,weeks:c,days:A,hours:D,minutes:O,seconds:z,milliseconds:V,microseconds:H,nanoseconds:ne}=function(ae){const q=k5.exec(ae);if(!q)throw new RangeError(`invalid duration: ${ae}`);if(q.every((St,pt)=>pt<2||St===void 0))throw new RangeError(`invalid duration: ${ae}`);const he=q[1]==="-"?-1:1,Ae=q[2]===void 0?0:Mn(q[2])*he,Ee=q[3]===void 0?0:Mn(q[3])*he,Fe=q[4]===void 0?0:Mn(q[4])*he,De=q[5]===void 0?0:Mn(q[5])*he,ke=q[6]===void 0?0:Mn(q[6])*he,ze=q[7],rt=q[8],Se=q[9],nt=q[10],Mt=q[11];let Ct=0,Ft=0,Ut=0;if(ze!==void 0){if(rt??Se??nt??Mt)throw new RangeError("only the smallest unit can be fractional");Ut=3600*Mn((ze+"000000000").slice(0,9))*he}else if(Ct=rt===void 0?0:Mn(rt)*he,Se!==void 0){if(nt??Mt)throw new RangeError("only the smallest unit can be fractional");Ut=60*Mn((Se+"000000000").slice(0,9))*he}else Ft=nt===void 0?0:Mn(nt)*he,Mt!==void 0&&(Ut=Mn((Mt+"000000000").slice(0,9))*he);const Gt=Ut%1e3,Ge=Math.trunc(Ut/1e3)%1e3,ct=Math.trunc(Ut/1e6)%1e3;return Ft+=Math.trunc(Ut/1e9)%60,Ct+=Math.trunc(Ut/6e10),t1(Ae,Ee,Fe,De,ke,Ct,Ft,ct,Ge,Gt),{years:Ae,months:Ee,weeks:Fe,days:De,hours:ke,minutes:Ct,seconds:Ft,milliseconds:ct,microseconds:Ge,nanoseconds:Gt}}(f);return new(yo("%Temporal.Duration%"))(g,_,c,A,D,O,z,V,H,ne)}(Na(i));const a={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let d=TD(i);for(let f=0;f<_x.length;f++){const g=_x[f],_=d[g];_!==void 0&&(a[g]=_)}return new t(a.years,a.months,a.weeks,a.days,a.hours,a.minutes,a.seconds,a.milliseconds,a.microseconds,a.nanoseconds)}function z_(i){let t;if(Fr(i)){if(fo(i)||Zn(i))return bh(se(i,_n));t=Zw(i)}else t=i;const{year:a,month:d,day:f,time:g,offset:_,z:c}=function(ae){const q=Rh(ae);if(!q.z&&!q.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return q}(Na(t)),{hour:A=0,minute:D=0,second:O=0,millisecond:z=0,microsecond:V=0,nanosecond:H=0}=g==="start-of-day"?{}:g,ne=cv(a,d,f,A,D,O,z,V,H-(c?0:s0(_)));return ky(ne.isoDate),bh(go(ne))}function kE(i,t){if(Fr(i)){if(Ol(i))return si(nn(t)),Cy(se(i,vn),se(i,Dt));let c;return _s(i,Dt)?c=se(i,Dt):(c=i.calendar,c===void 0&&(c="iso8601"),c=Iv(c)),Cy(bx(c,Vl(c,i,["year","month","monthCode","day"],[],[]),si(nn(t))),c)}let{month:a,day:d,referenceISOYear:f,calendar:g}=K2(Na(i));if(g===void 0&&(g="iso8601"),g=vs(g),si(nn(t)),g==="iso8601")return Cy({year:1972,month:a,day:d},g);let _={year:f,month:a,day:d};return hg(_),_=bx(g,gs(g,_,"month-day"),"constrain"),Cy(_,g)}function mp(i,t){let a;if(Fr(i)){if(Yr(i))return si(nn(t)),Bd(se(i,zr));if(sr(i))return si(nn(t)),Bd(se(i,mr).time);if(Zn(i)){const D=Ac(se(i,Di),se(i,_n));return si(nn(t)),Bd(D.time)}const{hour:d,minute:f,second:g,millisecond:_,microsecond:c,nanosecond:A}=Yw(i);a=Qx(d,f,g,_,c,A,si(nn(t)))}else a=vD(Na(i)),si(nn(t));return Bd(a)}function SD(i){return i===void 0?{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}:se(mp(i),zr)}function F_(i,t){if(Fr(i)){if(po(i))return si(nn(t)),Ry(se(i,vn),se(i,Dt));const c=Rv(i);return Ry(ov(c,Vl(c,i,["year","month","monthCode"],[],[]),si(nn(t))),c)}let{year:a,month:d,referenceISODay:f,calendar:g}=Q2(Na(i));g===void 0&&(g="iso8601"),g=vs(g),si(nn(t));let _={year:a,month:d,day:f};return iT(_),_=ov(g,gs(g,_,"year-month"),"constrain"),Ry(_,g)}function vx(i,t,a,d,f,g,_,c){if(t==="start-of-day")return fp(f,i);const A=ui(i,t);if(a==="wall"||_==="ignore")return No(f,A,g);if(a==="exact"||_==="use"){const z=cv(i.year,i.month,i.day,t.hour,t.minute,t.second,t.millisecond,t.microsecond,t.nanosecond-d);ky(z.isoDate);const V=go(z);return Ch(V),V}ky(i);const D=go(A),O=sv(f,A);for(let z=0;z<O.length;z++){const V=O[z],H=re.toNumber(re.subtract(D,V)),ne=gp(H,6e10,"halfExpand");if(H===d||c&&ne===d)return V}if(_==="reject"){const z=qw(d),V=lv(A,"iso8601","auto");throw new RangeError(`Offset ${z} is invalid for ${V} in ${f}`)}return OD(O,f,A,g)}function j_(i,t){let a,d,f,g,_,c,A,D=!1,O="option";if(Fr(i)){if(Zn(i)){const ae=nn(t);return H_(ae),Jb(ae,"reject"),si(ae),Oo(se(i,_n),se(i,Di),se(i,Dt))}_=Rv(i);const V=Vl(_,i,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],["timeZone"]);({offset:g,timeZone:f}=V),g===void 0&&(O="wall");const H=nn(t);c=H_(H),A=Jb(H,"reject");const ne=si(H);({isoDate:a,time:d}=Cv(_,V,ne))}else{let V,H,ne,ae,q;({year:ne,month:ae,day:q,time:d,tzAnnotation:V,offset:g,z:H,calendar:_}=function(Ae){const Ee=Rh(Ae);if(!Ee.tzAnnotation)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return Ee}(Na(i))),f=ms(V),H?O="exact":g||(O="wall"),_||(_="iso8601"),_=vs(_),D=!0;const he=nn(t);c=H_(he),A=Jb(he,"reject"),si(he),a={year:ne,month:ae,day:q}}let z=0;return O==="option"&&(z=s0(g)),Oo(vx(a,d,O,z,f,c,A,D),f,_)}function ED(i,t,a){hg(t),of(i),Vn(i,vn,t),Vn(i,Dt,a),Vn(i,nD,!0)}function ps(i,t){const a=yo("%Temporal.PlainDate%"),d=Object.create(a.prototype);return ED(d,i,t),d}function AD(i,t,a){ng(t),of(i),Vn(i,mr,t),Vn(i,Dt,a)}function bc(i,t){const a=yo("%Temporal.PlainDateTime%"),d=Object.create(a.prototype);return AD(d,i,t),d}function MD(i,t,a){hg(t),of(i),Vn(i,vn,t),Vn(i,Dt,a),Vn(i,rD,!0)}function Cy(i,t){const a=yo("%Temporal.PlainMonthDay%"),d=Object.create(a.prototype);return MD(d,i,t),d}function CD(i,t){of(i),Vn(i,zr,t)}function Bd(i){const t=yo("%Temporal.PlainTime%"),a=Object.create(t.prototype);return CD(a,i),a}function DD(i,t,a){iT(t),of(i),Vn(i,vn,t),Vn(i,Dt,a),Vn(i,iD,!0)}function Ry(i,t){const a=yo("%Temporal.PlainYearMonth%"),d=Object.create(a.prototype);return DD(d,i,t),d}function ID(i,t){Ch(t),of(i),Vn(i,_n,t)}function bh(i){const t=yo("%Temporal.Instant%"),a=Object.create(t.prototype);return ID(a,i),a}function RD(i,t,a,d){Ch(t),of(i),Vn(i,_n,t),Vn(i,Di,a),Vn(i,Dt,d)}function Oo(i,t,a="iso8601"){const d=yo("%Temporal.ZonedDateTime%"),f=Object.create(d.prototype);return RD(f,i,t,a),f}function OE(i){return $w.filter(t=>i[t]!==void 0)}function eg(i,t,a){const d=OE(a),f=Cp(i).fieldKeysToIgnore(d),g=Object.create(null),_=OE(t);for(let c=0;c<$w.length;c++){let A;const D=$w[c];_.includes(D)&&!f.includes(D)&&(A=t[D]),d.includes(D)&&(A=a[D]),A!==void 0&&(g[D]=A)}return g}function Fl(i,t,a,d){const f=Cp(i).dateAdd(t,a,d);return hg(f),f}function Dv(i,t,a,d){return Cp(i).dateUntil(t,a,d)}function Iv(i){if(Fr(i)&&_s(i,Dt))return se(i,Dt);const t=Na(i);try{return vs(t)}catch{}let a;try{({calendar:a}=Rh(t))}catch{try{({calendar:a}=vD(t))}catch{try{({calendar:a}=Q2(t))}catch{({calendar:a}=K2(t))}}}return a||(a="iso8601"),vs(a)}function Rv(i){if(_s(i,Dt))return se(i,Dt);const{calendar:t}=i;return t===void 0?"iso8601":Iv(t)}function Mh(i,t){return vs(i)===vs(t)}function Sp(i,t,a){const d=Cp(i);d.resolveFields(t,"date");const f=d.dateToISO(t,a);return hg(f),f}function ov(i,t,a){const d=Cp(i);d.resolveFields(t,"year-month"),t.day=1;const f=d.dateToISO(t,a);return iT(f),f}function bx(i,t,a){const d=Cp(i);d.resolveFields(t,"month-day");const f=d.monthDayToISOReferenceDate(t,a);return hg(f),f}function ms(i){if(Fr(i)&&Zn(i))return se(i,Di);const t=Na(i);if(t==="UTC")return"UTC";const{tzName:a,offsetMinutes:d}=function(g){const{tzAnnotation:_,offset:c,z:A}=function(D){if(bD.test(D))return{tzAnnotation:D,offset:void 0,z:!1};try{const{tzAnnotation:O,offset:z,z:V}=Rh(D);if(V||O||z)return{tzAnnotation:O,offset:z,z:V}}catch{}wD(D)}(g);return _?vp(_):A?vp("UTC"):c?vp(c):void 0}(t);if(d!==void 0)return J2(d);const f=xx(a);if(!f)throw new RangeError(`Unrecognized time zone ${a}`);return f.identifier}function kD(i,t){if(i===t)return!0;const a=vp(i).offsetMinutes,d=vp(t).offsetMinutes;if(a===void 0&&d===void 0){const f=xx(t);if(!f)return!1;const g=xx(i);return!!g&&g.primaryIdentifier===f.primaryIdentifier}return a===d}function Vd(i,t){const a=vp(i).offsetMinutes;return a!==void 0?6e10*a:Hw(i,t)}function qw(i){const t=i<0?"-":"+",a=Math.abs(i),d=Math.floor(a/36e11),f=Math.floor(a/6e10)%60,g=Math.floor(a/1e9)%60,_=a%1e9;return`${t}${Kx(d,f,g,_,g===0&&_===0?"minute":"auto")}`}function Ac(i,t){const a=Vd(i,t);let{isoDate:{year:d,month:f,day:g},time:{hour:_,minute:c,second:A,millisecond:D,microsecond:O,nanosecond:z}}=PD(t);return cv(d,f,g,_,c,A,D,O,z+a)}function No(i,t,a){return OD(sv(i,t),i,t,a)}function OD(i,t,a,d){const f=i.length;if(f===1)return i[0];if(f)switch(d){case"compatible":case"earlier":return i[0];case"later":return i[f-1];case"reject":throw new RangeError("multiple instants found")}if(d==="reject")throw new RangeError("multiple instants found");const g=go(a),_=re.subtract(g,wp);Ch(_);const c=Vd(t,_),A=re.add(g,wp);Ch(A);const D=Vd(t,A)-c;switch(d){case"earlier":{const O=$n.fromComponents(0,0,0,0,0,-D),z=$y(a.time,O);return sv(t,ui(tl(a.isoDate.year,a.isoDate.month,a.isoDate.day+z.deltaDays),z))[0]}case"compatible":case"later":{const O=$n.fromComponents(0,0,0,0,0,D),z=$y(a.time,O),V=sv(t,ui(tl(a.isoDate.year,a.isoDate.month,a.isoDate.day+z.deltaDays),z));return V[V.length-1]}}}function sv(i,t){if(i==="UTC")return ky(t.isoDate),[go(t)];const a=vp(i).offsetMinutes;if(a!==void 0){const d=cv(t.isoDate.year,t.isoDate.month,t.isoDate.day,t.time.hour,t.time.minute-a,t.time.second,t.time.millisecond,t.time.microsecond,t.time.nanosecond);ky(d.isoDate);const f=go(d);return Ch(f),[f]}return ky(t.isoDate),function(d,f){let g=go(f),_=re.subtract(g,wp);re.lessThan(_,rv)&&(_=g);let c=re.add(g,wp);re.greaterThan(c,Uy)&&(c=g);const A=Hw(d,_),D=Hw(d,c);return(A===D?[A]:[A,D]).map(z=>{const V=re.subtract(g,re.BigInt(z)),H=function(ne,ae){const{epochMilliseconds:q,time:{millisecond:he,microsecond:Ae,nanosecond:Ee}}=PD(ae),{year:Fe,month:De,day:ke,hour:ze,minute:rt,second:Se}=zD(ne,q);return cv(Fe,De,ke,ze,rt,Se,he,Ae,Ee)}(d,V);if(Yy(f,H)===0)return Ch(V),V}).filter(z=>z!==void 0)}(i,t)}function fp(i,t){const a=ui(t,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),d=sv(i,a);if(d.length)return d[0];const f=go(a),g=re.subtract(f,wp);return Ch(g),tT(i,g)}function kv(i){let t;return t=i<0||i>9999?(i<0?"-":"+")+av(Math.abs(i),6):av(i,4),t}function jl(i){return av(i,2)}function LD(i,t){let a;if(t==="auto"){if(i===0)return"";a=av(i,9).replace(/0+$/,"")}else{if(t===0)return"";a=av(i,9).slice(0,t)}return`.${a}`}function Kx(i,t,a,d,f){let g=`${jl(i)}:${jl(t)}`;return f==="minute"||(g+=`:${jl(a)}`,g+=LD(d,f)),g}function LE(i,t,a){let d=t;d===void 0&&(d="UTC");const f=se(i,_n),g=lv(Ac(d,f),"iso8601",a,"never");let _="Z";return t!==void 0&&(_=ND(Vd(d,f))),`${g}${_}`}function Gb(i,t){const a=se(i,as),d=se(i,os),f=se(i,Hs),g=se(i,ss),_=se(i,ls),c=se(i,cs),A=Tx(i);let D="";a!==0&&(D+=`${Math.abs(a)}Y`),d!==0&&(D+=`${Math.abs(d)}M`),f!==0&&(D+=`${Math.abs(f)}W`),g!==0&&(D+=`${Math.abs(g)}D`);let O="";_!==0&&(O+=`${Math.abs(_)}H`),c!==0&&(O+=`${Math.abs(c)}M`);const z=$n.fromComponents(0,0,se(i,us),se(i,hs),se(i,ds),se(i,Ws));z.isZero()&&!["second","millisecond","microsecond","nanosecond"].includes(Pd(i))&&t==="auto"||(O+=`${Math.abs(z.sec)}${LD(Math.abs(z.subsec),t)}S`);let V=`${A<0?"-":""}P${D}`;return O&&(V=`${V}T${O}`),V}function NE(i,t="auto"){const{year:a,month:d,day:f}=se(i,vn);return`${kv(a)}-${jl(d)}-${jl(f)}${Tv(se(i,Dt),t)}`}function PE({hour:i,minute:t,second:a,millisecond:d,microsecond:f,nanosecond:g},_){return Kx(i,t,a,1e6*d+1e3*f+g,_)}function lv(i,t,a,d="auto"){const{isoDate:{year:f,month:g,day:_},time:{hour:c,minute:A,second:D,millisecond:O,microsecond:z,nanosecond:V}}=i;return`${kv(f)}-${jl(g)}-${jl(_)}T${Kx(c,A,D,1e6*O+1e3*z+V,a)}${Tv(t,d)}`}function zE(i,t="auto"){const{year:a,month:d,day:f}=se(i,vn);let g=`${jl(d)}-${jl(f)}`;const _=se(i,Dt);t!=="always"&&t!=="critical"&&_==="iso8601"||(g=`${kv(a)}-${g}`);const c=Tv(_,t);return c&&(g+=c),g}function FE(i,t="auto"){const{year:a,month:d,day:f}=se(i,vn);let g=`${kv(a)}-${jl(d)}`;const _=se(i,Dt);t!=="always"&&t!=="critical"&&_==="iso8601"||(g+=`-${jl(f)}`);const c=Tv(_,t);return c&&(g+=c),g}function jE(i,t,a="auto",d="auto",f="auto",g=void 0){let _=se(i,_n);if(g){const{unit:O,increment:z,roundingMode:V}=g;_=Kw(_,z,O,V)}const c=se(i,Di),A=Vd(c,_);let D=lv(Ac(c,_),"iso8601",t,"never");return f!=="never"&&(D+=ND(A)),d!=="never"&&(D+=`[${d==="critical"?"!":""}${c}]`),D+=Tv(se(i,Dt),a),D}function BE(i){return xD.test(i)}function s0(i){const t=$5.exec(i);if(!t)throw new RangeError(`invalid time zone offset: ${i}; must match HH:MM[:SS.SSSSSSSSS]`);return(t[1]==="-"?-1:1)*(1e9*(60*(60*+t[2]+ +(t[3]||0))+ +(t[4]||0))+ +((t[5]||0)+"000000000").slice(0,9))}let E_;const G5=Object.assign(Object.create(null),{"/":!0,"-":!0,_:!0});function xx(i){if(E_===void 0){const g=Intl.supportedValuesOf?.("timeZone");if(g){E_=new Map;for(let _=0;_<g.length;_++){const c=g[_];E_.set(uv(c),c)}}else E_=null}const t=uv(i);let a=E_?.get(t);if(a)return{identifier:a,primaryIdentifier:a};try{a=_D(i).resolvedOptions().timeZone}catch{return}if(t==="antarctica/south_pole"&&(a="Antarctica/McMurdo"),F5.has(i))throw new RangeError(`${i} is a legacy time zone identifier from ICU. Use ${a} instead`);const d=[...t].map((g,_)=>_===0||G5[t[_-1]]?g.toUpperCase():g).join("").split("/");if(d.length===1)return t==="gb-eire"?{identifier:"GB-Eire",primaryIdentifier:a}:{identifier:t.length<=3||/[-0-9]/.test(t)?t.toUpperCase():d[0],primaryIdentifier:a};if(d[0]==="Etc")return{identifier:`Etc/${["Zulu","Greenwich","Universal"].includes(d[1])?d[1]:d[1].toUpperCase()}`,primaryIdentifier:a};if(d[0]==="Us")return{identifier:`US/${d[1]}`,primaryIdentifier:a};const f=new Map([["Act","ACT"],["Lhi","LHI"],["Nsw","NSW"],["Dar_Es_Salaam","Dar_es_Salaam"],["Port_Of_Spain","Port_of_Spain"],["Port-Au-Prince","Port-au-Prince"],["Isle_Of_Man","Isle_of_Man"],["Comodrivadavia","ComodRivadavia"],["Knox_In","Knox_IN"],["Dumontdurville","DumontDUrville"],["Mcmurdo","McMurdo"],["Denoronha","DeNoronha"],["Easterisland","EasterIsland"],["Bajanorte","BajaNorte"],["Bajasur","BajaSur"]]);return d[1]=f.get(d[1])??d[1],d.length>2&&(d[2]=f.get(d[2])??d[2]),{identifier:d.join("/"),primaryIdentifier:a}}function qm(i,t){const{year:a,month:d,day:f,hour:g,minute:_,second:c}=zD(i,t);let A=t%1e3;return A<0&&(A+=1e3),1e6*(eT({isoDate:{year:a,month:d,day:f},time:{hour:g,minute:_,second:c,millisecond:A}})-t)}function Hw(i,t){return qm(i,Mc(t,"floor"))}function J2(i){const t=i<0?"-":"+",a=Math.abs(i);return`${t}${Kx(Math.floor(a/60),a%60,0,0,"minute")}`}function ND(i){return J2(gp(i,O5,"halfExpand")/6e10)}function eT({isoDate:{year:i,month:t,day:a},time:{hour:d,minute:f,second:g,millisecond:_}}){const c=i%400,A=(i-c)/400,D=new Date;return D.setUTCHours(d,f,g,_),D.setUTCFullYear(c,t-1,a),D.getTime()+P5*A}function go(i){const t=eT(i),a=1e3*i.time.microsecond+i.time.nanosecond;return re.add(wh(t),re.BigInt(a))}function PD(i){let t=Mc(i,"trunc"),a=re.toNumber(re.remainder(i,xv));a<0&&(a+=1e6,t-=1);const d=Math.floor(a/1e3)%1e3,f=a%1e3,g=new Date(t);return{epochMilliseconds:t,isoDate:{year:g.getUTCFullYear(),month:g.getUTCMonth()+1,day:g.getUTCDate()},time:{hour:g.getUTCHours(),minute:g.getUTCMinutes(),second:g.getUTCSeconds(),millisecond:g.getUTCMilliseconds(),microsecond:d,nanosecond:f}}}function tT(i,t){if(i==="UTC")return null;const a=Mc(t,"floor");if(a<$_)return tT(i,wh($_));const d=Date.now(),f=Math.max(a,d)+366*Tp*3;let g=a,_=qm(i,g),c=g,A=_;for(;_===A&&g<f;){if(c=g+2*Tp*7,c>yD)return null;A=qm(i,c),_===A&&(g=c)}return _===A?null:wh(qD(D=>qm(i,D),g,c,_,A))}function Ww(i,t){if(i==="UTC")return null;const a=Mc(t,"ceil"),d=Date.now(),f=d+366*Tp*3;if(a>f){const D=Ww(i,wh(f));if(D===null||re.lessThan(D,wh(d)))return D}if(i==="Africa/Casablanca"||i==="Africa/El_Aaiun"){const D=Date.UTC(2088,0,1);if(D<a)return Ww(i,wh(D))}let g=a-1;if(g<$_)return null;let _=qm(i,g),c=g,A=_;for(;_===A&&g>$_;){if(c=g-2*Tp*7,c<$_)return null;A=qm(i,c),_===A&&(g=c)}return _===A?null:wh(qD(D=>qm(i,D),c,g,A,_))}function zD(i,t){return function(a){const d=a.split(/[^\w]+/);if(d.length!==7)throw new RangeError(`expected 7 parts in "${a}`);const f=+d[0],g=+d[1];let _=+d[2];const c=d[3];if(c[0]==="b"||c[0]==="B")_=1-_;else if(c[0]!=="a"&&c[0]!=="A")throw new RangeError(`Unknown era ${c} in "${a}`);const A=d[4]==="24"?0:+d[4],D=+d[5],O=+d[6];if(!(Number.isFinite(_)&&Number.isFinite(f)&&Number.isFinite(g)&&Number.isFinite(A)&&Number.isFinite(D)&&Number.isFinite(O)))throw new RangeError(`Invalid number in "${a}`);return{year:_,month:f,day:g,hour:A,minute:D,second:O}}(_D(i).format(t))}function wx(i){return i!==void 0&&!(i%4!=0||i%100==0&&i%400!=0)}function Hm(i,t){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[wx(i)?"leapyear":"standard"][t-1]}function Tx(i){const t=[se(i,as),se(i,os),se(i,Hs),se(i,ss),se(i,ls),se(i,cs),se(i,us),se(i,hs),se(i,ds),se(i,Ws)];for(let a=0;a<t.length;a++){const d=t[a];if(d!==0)return d<0?-1:1}return 0}function Jx(i){const t=["years","months","weeks","days"];for(let a=0;a<t.length;a++){const d=i[t[a]];if(d!==0)return d<0?-1:1}return 0}function FD(i){const t=Jx(i.date);return t!==0?t:i.time.sign()}function Zm(i,t){let a=i,d=t;if(!Number.isFinite(a)||!Number.isFinite(d))throw new RangeError("infinity is out of range");return d-=1,a+=Math.floor(d/12),d%=12,d<0&&(d+=12),d+=1,{year:a,month:d}}function tl(i,t,a){let d=i,f=t,g=a;if(!Number.isFinite(g))throw new RangeError("infinity is out of range");({year:d,month:f}=Zm(d,f));const _=146097;if(Math.abs(g)>_){const D=Math.trunc(g/_);d+=400*D,g-=D*_}let c=0,A=f>2?d:d-1;for(;c=wx(A)?366:365,g<-c;)d-=1,A-=1,g+=c;for(A+=1;c=wx(A)?366:365,g>c;)d+=1,A+=1,g-=c;for(;g<1;)({year:d,month:f}=Zm(d,f-1)),g+=Hm(d,f);for(;g>Hm(d,f);)g-=Hm(d,f),{year:d,month:f}=Zm(d,f+1);return{year:d,month:f,day:g}}function cv(i,t,a,d,f,g,_,c,A){const D=pp(d,f,g,_,c,A);return ui(tl(i,t,a+D.deltaDays),D)}function pp(i,t,a,d,f,g){let _,c=i,A=t,D=a,O=d,z=f,V=g;({div:_,mod:V}=My(V,3)),z+=_,V<0&&(z-=1,V+=1e3),{div:_,mod:z}=My(z,3),O+=_,z<0&&(O-=1,z+=1e3),D+=Math.trunc(O/1e3),O%=1e3,O<0&&(D-=1,O+=1e3),A+=Math.trunc(D/60),D%=60,D<0&&(A-=1,D+=60),c+=Math.trunc(A/60),A%=60,A<0&&(c-=1,A+=60);let H=Math.trunc(c/24);return c%=24,c<0&&(H-=1,c+=24),H+=0,c+=0,A+=0,D+=0,O+=0,z+=0,V+=0,{deltaDays:H,hour:c,minute:A,second:D,millisecond:O,microsecond:z,nanosecond:V}}function VE(i,t){const a=Lo(i,0);if(Jx(a)===0)return i.days;const d=se(t,vn),f=Fl(se(t,Dt),d,a,"constrain"),g=ig(d.year,d.month-1,d.day),_=ig(f.year,f.month-1,f.day)-g;return i.days+_}function nl(i){return new(yo("%Temporal.Duration%"))(-se(i,as),-se(i,os),-se(i,Hs),-se(i,ss),-se(i,ls),-se(i,cs),-se(i,us),-se(i,hs),-se(i,ds),-se(i,Ws))}function fs(i,t,a){return Math.min(a,Math.max(t,i))}function jD(i,t,a){const d=fs(t,1,12);return{year:i,month:d,day:fs(a,1,Hm(i,d))}}function Xa(i,t,a){if(i<t||i>a)throw new RangeError(`value out of range: ${t} <= ${i} <= ${a}`)}function tg(i,t,a){Xa(t,1,12),Xa(a,1,Hm(i,t))}function hg(i){ng(ui(i,{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}))}function e1(i,t,a,d,f,g){Xa(i,0,23),Xa(t,0,59),Xa(a,0,59),Xa(d,0,999),Xa(f,0,999),Xa(g,0,999)}function nT(i,t,a,d,f,g,_,c,A){tg(i,t,a),e1(d,f,g,_,c,A)}function ng(i){const t=go(i);(re.lessThan(t,L5)||re.greaterThan(t,N5))&&Ch(t)}function Xw(i){go(i)}function Ch(i){if(re.lessThan(i,rv)||re.greaterThan(i,Uy))throw new RangeError("date/time value is outside of supported range")}function iT({year:i,month:t}){Xa(i,ME,CE),i===ME?Xa(t,4,12):i===CE&&Xa(t,1,9)}function t1(i,t,a,d,f,g,_,c,A,D){let O=0;const z=[i,t,a,d,f,g,_,c,A,D];for(let he=0;he<z.length;he++){const Ae=z[he];if(Ae===1/0||Ae===-1/0)throw new RangeError("infinite values not allowed as duration fields");if(Ae!==0){const Ee=Ae<0?-1:1;if(O!==0&&Ee!==O)throw new RangeError("mixed-sign values not allowed as duration fields");O=Ee}}if(Math.abs(i)>=2**32||Math.abs(t)>=2**32||Math.abs(a)>=2**32)throw new RangeError("years, months, and weeks must be < 2");const V=My(c,3),H=My(A,6),ne=My(D,9),ae=My(1e6*V.mod+1e3*H.mod+ne.mod,9).div,q=86400*d+3600*f+60*g+_+V.div+H.div+ne.div+ae;if(!Number.isSafeInteger(q))throw new RangeError("total of duration time units cannot exceed 9007199254740991.999999999 s")}function Ay(i){return{date:{years:se(i,as),months:se(i,os),weeks:se(i,Hs),days:se(i,ss)},time:$n.fromComponents(se(i,ls),se(i,cs),se(i,us),se(i,hs),se(i,ds),se(i,Ws))}}function xh(i){const t=$n.fromComponents(se(i,ls),se(i,cs),se(i,us),se(i,hs),se(i,ds),se(i,Ws)).add24HourDays(se(i,ss));return{date:{years:se(i,as),months:se(i,os),weeks:se(i,Hs),days:0},time:t}}function BD(i){const t=xh(i),a=Math.trunc(t.time.sec/86400);return t1(t.date.years,t.date.months,t.date.weeks,a,0,0,0,0,0,0),{...t.date,days:a}}function xc(i,t){const a=i.time.sign();let d=i.time.abs().subsec,f=0,g=0,_=i.time.abs().sec,c=0,A=0,D=0;switch(t){case"year":case"month":case"week":case"day":f=Math.trunc(d/1e3),d%=1e3,g=Math.trunc(f/1e3),f%=1e3,_+=Math.trunc(g/1e3),g%=1e3,c=Math.trunc(_/60),_%=60,A=Math.trunc(c/60),c%=60,D=Math.trunc(A/24),A%=24;break;case"hour":f=Math.trunc(d/1e3),d%=1e3,g=Math.trunc(f/1e3),f%=1e3,_+=Math.trunc(g/1e3),g%=1e3,c=Math.trunc(_/60),_%=60,A=Math.trunc(c/60),c%=60;break;case"minute":f=Math.trunc(d/1e3),d%=1e3,g=Math.trunc(f/1e3),f%=1e3,_+=Math.trunc(g/1e3),g%=1e3,c=Math.trunc(_/60),_%=60;break;case"second":f=Math.trunc(d/1e3),d%=1e3,g=Math.trunc(f/1e3),f%=1e3,_+=Math.trunc(g/1e3),g%=1e3;break;case"millisecond":f=Math.trunc(d/1e3),d%=1e3,g=ow(_,3,Math.trunc(f/1e3)),f%=1e3,_=0;break;case"microsecond":f=ow(_,6,Math.trunc(d/1e3)),d%=1e3,_=0;break;case"nanosecond":d=ow(_,9,d),_=0}return new(yo("%Temporal.Duration%"))(i.date.years,i.date.months,i.date.weeks,i.date.days+a*D,a*A,a*c,a*_,a*g,a*f,a*d)}function Hd(i,t){return Jx(i),t.sign(),{date:i,time:t}}function ig(i,t,a){return eT({isoDate:{year:i,month:t+1,day:a},time:{hour:0,minute:0,second:0,millisecond:0}})/Tp}function ky({year:i,month:t,day:a}){if(Math.abs(ig(i,t-1,a))>1e8)throw new RangeError("date/time value is outside the supported range")}function rT(i,t){const a=t.hour-i.hour,d=t.minute-i.minute,f=t.second-i.second,g=t.millisecond-i.millisecond,_=t.microsecond-i.microsecond,c=t.nanosecond-i.nanosecond;return $n.fromComponents(a,d,f,g,_,c)}function aT(i,t,a,d,f){let g=$n.fromEpochNsDiff(t,i);return g=Sx(g,a,d,f),Hd({years:0,months:0,weeks:0,days:0},g)}function VD(i,t,a,d){Xw(i),Xw(t);let f=rT(i.time,t.time);const g=f.sign(),_=Dh(i.isoDate,t.isoDate);let c=t.isoDate;_===g&&(c=tl(c.year,c.month,c.day+g),f=f.add24HourDays(-g));const A=qd("day",d),D=Dv(a,i.isoDate,c,A);return d!==A&&(f=f.add24HourDays(D.days),D.days=0),Hd(D,f)}function UD(i,t,a,d,f){const g=re.subtract(t,i);if(re.equal(g,Ll))return{date:{years:0,months:0,weeks:0,days:0},time:$n.ZERO};const _=re.lessThan(g,Ll)?-1:1,c=Ac(a,i),A=Ac(a,t);let D,O=0,z=_===1?2:1,V=rT(c.time,A.time);for(V.sign()===-_&&O++;O<=z;O++){D=ui(tl(A.isoDate.year,A.isoDate.month,A.isoDate.day-O*_),c.time);const ne=No(a,D,"compatible");if(V=$n.fromEpochNsDiff(t,ne),V.sign()!==-_)break}const H=qd("day",f);return Hd(Dv(d,c.isoDate,D.isoDate,H),V)}function GD(i,t,a,d,f,g,_,c,A){let D,O,z,V,H=t;switch(c){case"year":{const Ct=gp(H.date.years,_,"trunc");D=Ct,O=Ct+_*i,z={years:D,months:0,weeks:0,days:0},V={...z,years:O};break}case"month":{const Ct=gp(H.date.months,_,"trunc");D=Ct,O=Ct+_*i,z=Lo(H.date,0,0,D),V=Lo(H.date,0,0,O);break}case"week":{const Ct=Lo(H.date,0,0),Ft=Fl(g,d.isoDate,Ct,"constrain"),Ut=Dv(g,Ft,tl(Ft.year,Ft.month,Ft.day+H.date.days),"week"),Gt=gp(H.date.weeks+Ut.weeks,_,"trunc");D=Gt,O=Gt+_*i,z=Lo(H.date,0,D),V=Lo(H.date,0,O);break}case"day":{const Ct=gp(H.date.days,_,"trunc");D=Ct,O=Ct+_*i,z=Lo(H.date,D),V=Lo(H.date,O);break}}const ne=Fl(g,d.isoDate,z,"constrain"),ae=Fl(g,d.isoDate,V,"constrain");let q,he;const Ae=ui(ne,d.time),Ee=ui(ae,d.time);f?(q=No(f,Ae,"compatible"),he=No(f,Ee,"compatible")):(q=go(Ae),he=go(Ee));const Fe=$n.fromEpochNsDiff(a,q),De=$n.fromEpochNsDiff(he,q),ke=Yx(A,i<0?"negative":"positive"),ze=Fe.add(Fe).abs().subtract(De.abs()).sign(),rt=Math.abs(D)/_%2==0,Se=Fe.isZero()?Math.abs(D):Fe.cmp(De)?qx(Math.abs(D),Math.abs(O),ze,rt,ke):Math.abs(O),nt=new $n(re.add(re.multiply(De.totalNs,re.BigInt(D)),re.multiply(Fe.totalNs,re.BigInt(_*i)))).fdiv(De.totalNs),Mt=Se===Math.abs(O);return H={date:Mt?V:z,time:$n.ZERO},{nudgeResult:{duration:H,nudgedEpochNs:Mt?he:q,didExpandCalendarUnit:Mt},total:nt}}function n1(i,t,a,d,f,g,_,c,A){let D=i;const O=gh(c)||d&&c==="day",z=FD(D)<0?-1:1;let V;return O?{nudgeResult:V}=GD(z,D,t,a,d,f,_,c,A):V=d?function(H,ne,ae,q,he,Ae,Ee,Fe){let De=ne;const ke=Fl(he,ae.isoDate,De.date,"constrain"),ze=ui(ke,ae.time),rt=ui(tl(ke.year,ke.month,ke.day+H),ae.time),Se=No(q,ze,"compatible"),nt=No(q,rt,"compatible"),Mt=$n.fromEpochNsDiff(nt,Se);if(Mt.sign()!==H)throw new RangeError("time zone returned inconsistent Instants");const Ct=re.BigInt(Zy[Ee]*Ae);let Ft=De.time.round(Ct,Fe);const Ut=Ft.subtract(Mt),Gt=Ut.sign()!==-H;let Ge,ct;return Gt?(Ge=H,Ft=Ut.round(Ct,Fe),ct=Ft.addToEpochNs(nt)):(Ge=0,ct=Ft.addToEpochNs(Se)),{duration:Hd(Lo(De.date,De.date.days+Ge),Ft),nudgedEpochNs:ct,didExpandCalendarUnit:Gt}}(z,D,a,d,f,_,c,A):function(H,ne,ae,q,he,Ae){let Ee=H;const Fe=Ee.time.add24HourDays(Ee.date.days),De=Fe.round(re.BigInt(q*Zy[he]),Ae),ke=De.subtract(Fe),{quotient:ze}=Fe.divmod(yx),{quotient:rt}=De.divmod(yx),Se=Math.sign(rt-ze)===Fe.sign(),nt=ke.addToEpochNs(ne);let Mt=0,Ct=De;return zd(ae)==="date"&&(Mt=rt,Ct=De.add($n.fromComponents(24*-rt,0,0,0,0,0))),{duration:{date:Lo(Ee.date,Mt),time:Ct},nudgedEpochNs:nt,didExpandCalendarUnit:Se}}(D,t,g,_,c,A),D=V.duration,V.didExpandCalendarUnit&&c!=="week"&&(D=function(H,ne,ae,q,he,Ae,Ee,Fe){let De=ne;if(Fe===Ee)return De;const ke=Y_.indexOf(Ee);for(let ze=Y_.indexOf(Fe)-1;ze>=ke;ze--){const rt=Y_[ze];if(rt==="week"&&Ee!=="week")continue;let Se;switch(rt){case"year":Se={years:De.date.years+H,months:0,weeks:0,days:0};break;case"month":{const Ct=De.date.months+H;Se=Lo(De.date,0,0,Ct);break}case"week":{const Ct=De.date.weeks+H;Se=Lo(De.date,0,Ct);break}}const nt=ui(Fl(Ae,q.isoDate,Se,"constrain"),q.time);let Mt;if(Mt=he?No(he,nt,"compatible"):go(nt),mx(ae,Mt)===-H)break;De={date:Se,time:$n.ZERO}}return De}(z,D,V.nudgedEpochNs,a,d,f,g,qd(c,"day"))),D}function UE(i,t,a,d,f,g){return gh(g)||d&&g==="day"?GD(FD(i)<0?-1:1,i,t,a,d,f,1,g,"trunc").total:W_(i.time.add24HourDays(i.date.days),g)}function ZD(i,t,a,d,f,g,_){if(Yy(i,t)==0)return{date:{years:0,months:0,weeks:0,days:0},time:$n.ZERO};ng(i),ng(t);const c=VD(i,t,a,d);return g==="nanosecond"&&f===1?c:n1(c,go(t),i,null,a,d,f,g,_)}function $D(i,t,a,d,f,g,_,c){if(zd(f)==="time")return aT(i,t,g,_,c);const A=UD(i,t,a,d,f);return _==="nanosecond"&&g===1?A:n1(A,t,Ac(a,i),a,d,f,g,_,c)}function l0(i,t,a,d,f,g){const _=Gy.reduce((H,ne)=>{const ae=ne[0],q=ne[1],he=ne[2];return a!=="datetime"&&he!==a||d.includes(q)||H.push(q,ae),H},[]);let c=Qs(t,"largestUnit",a,"auto");if(d.includes(c))throw new RangeError(`largestUnit must be one of ${_.join(", ")}, not ${c}`);const A=a0(t);let D=Su(t,"trunc");i==="since"&&(D=function(H){switch(H){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return H}}(D));const O=Qs(t,"smallestUnit",a,f);if(d.includes(O))throw new RangeError(`smallestUnit must be one of ${_.join(", ")}, not ${O}`);const z=qd(g,O);if(c==="auto"&&(c=z),qd(c,O)!==c)throw new RangeError(`largestUnit ${c} cannot be smaller than smallestUnit ${O}`);const V={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[O];return V!==void 0&&o0(A,V,!1),{largestUnit:c,roundingIncrement:A,roundingMode:D,smallestUnit:O}}function GE(i,t,a,d){const f=z_(a),g=l0(i,nn(d),"time",[],"nanosecond","second");let _=xc(aT(se(t,_n),se(f,_n),g.roundingIncrement,g.smallestUnit,g.roundingMode),g.largestUnit);return i==="since"&&(_=nl(_)),_}function ZE(i,t,a,d){const f=N_(a),g=se(t,Dt),_=se(f,Dt);if(!Mh(g,_))throw new RangeError(`cannot compute difference between dates of ${g} and ${_} calendars`);const c=l0(i,nn(d),"date",[],"day","day"),A=yo("%Temporal.Duration%"),D=se(t,vn),O=se(f,vn);if(Dh(D,O)===0)return new A;let z={date:Dv(g,D,O,c.largestUnit),time:$n.ZERO};if(c.smallestUnit!=="day"||c.roundingIncrement!==1){const H=ui(D,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});z=n1(z,go(ui(O,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),H,null,g,c.largestUnit,c.roundingIncrement,c.smallestUnit,c.roundingMode)}let V=xc(z,"day");return i==="since"&&(V=nl(V)),V}function $E(i,t,a,d){const f=P_(a),g=se(t,Dt),_=se(f,Dt);if(!Mh(g,_))throw new RangeError(`cannot compute difference between dates of ${g} and ${_} calendars`);const c=l0(i,nn(d),"datetime",[],"nanosecond","day"),A=yo("%Temporal.Duration%"),D=se(t,mr),O=se(f,mr);if(Yy(D,O)===0)return new A;let z=xc(ZD(D,O,g,c.largestUnit,c.roundingIncrement,c.smallestUnit,c.roundingMode),c.largestUnit);return i==="since"&&(z=nl(z)),z}function YE(i,t,a,d){const f=mp(a),g=l0(i,nn(d),"time",[],"nanosecond","hour");let _=rT(se(t,zr),se(f,zr));_=Sx(_,g.roundingIncrement,g.smallestUnit,g.roundingMode);let c=xc(Hd({years:0,months:0,weeks:0,days:0},_),g.largestUnit);return i==="since"&&(c=nl(c)),c}function qE(i,t,a,d){const f=F_(a),g=se(t,Dt),_=se(f,Dt);if(!Mh(g,_))throw new RangeError(`cannot compute difference between months of ${g} and ${_} calendars`);const c=l0(i,nn(d),"date",["week","day"],"month","year"),A=yo("%Temporal.Duration%");if(Dh(se(t,vn),se(f,vn))==0)return new A;const D=gs(g,se(t,vn),"year-month");D.day=1;const O=Sp(g,D,"constrain"),z=gs(g,se(f,vn),"year-month");z.day=1;const V=Sp(g,z,"constrain");let H={date:Lo(Dv(g,O,V,c.largestUnit),0,0),time:$n.ZERO};if(c.smallestUnit!=="month"||c.roundingIncrement!==1){const ae=ui(O,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});H=n1(H,go(ui(V,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),ae,null,g,c.largestUnit,c.roundingIncrement,c.smallestUnit,c.roundingMode)}let ne=xc(H,"day");return i==="since"&&(ne=nl(ne)),ne}function HE(i,t,a,d){const f=j_(a),g=se(t,Dt),_=se(f,Dt);if(!Mh(g,_))throw new RangeError(`cannot compute difference between dates of ${g} and ${_} calendars`);const c=l0(i,nn(d),"datetime",[],"nanosecond","hour"),A=se(t,_n),D=se(f,_n),O=yo("%Temporal.Duration%");let z;if(zd(c.largestUnit)!=="date")z=xc(aT(A,D,c.roundingIncrement,c.smallestUnit,c.roundingMode),c.largestUnit);else{const V=se(t,Di);if(!kD(V,se(f,Di)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");if(re.equal(A,D))return new O;z=xc($D(A,D,V,g,c.largestUnit,c.roundingIncrement,c.smallestUnit,c.roundingMode),"hour")}return i==="since"&&(z=nl(z)),z}function $y({hour:i,minute:t,second:a,millisecond:d,microsecond:f,nanosecond:g},_){let c=a,A=g;return c+=_.sec,A+=_.subsec,pp(i,t,c,d,f,A)}function Qw(i,t){const a=t.addToEpochNs(i);return Ch(a),a}function B_(i,t,a,d,f="constrain"){if(Jx(d.date)===0)return Qw(i,d.time);const g=Ac(t,i);return Qw(No(t,ui(Fl(a,g.isoDate,d.date,f),g.time),"compatible"),d.time)}function WE(i,t,a){let d=Tc(a);i==="subtract"&&(d=nl(d));const f=qd(Pd(t),Pd(d));if(gh(f))throw new RangeError("For years, months, or weeks arithmetic, use date arithmetic relative to a starting point");const g=xh(t),_=xh(d);return xc(Hd({years:0,months:0,weeks:0,days:0},g.time.add(_.time)),f)}function XE(i,t,a){let d=Tc(a);i==="subtract"&&(d=nl(d));const f=Pd(d);if(zd(f)==="date")throw new RangeError(`Duration field ${f} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);const g=xh(d);return bh(Qw(se(t,_n),g.time))}function QE(i,t,a,d){const f=se(t,Dt);let g=Tc(a);i==="subtract"&&(g=nl(g));const _=BD(g),c=si(nn(d));return ps(Fl(f,se(t,vn),_,c),f)}function KE(i,t,a,d){let f=Tc(a);i==="subtract"&&(f=nl(f));const g=si(nn(d)),_=se(t,Dt),c=xh(f),A=se(t,mr),D=$y(A.time,c.time),O=Lo(c.date,D.deltaDays);return t1(O.years,O.months,O.weeks,O.days,0,0,0,0,0,0),bc(ui(Fl(_,A.isoDate,O,g),D),_)}function JE(i,t,a){let d=Tc(a);i==="subtract"&&(d=nl(d));const f=xh(d),{hour:g,minute:_,second:c,millisecond:A,microsecond:D,nanosecond:O}=$y(se(t,zr),f.time);return Bd(Qx(g,_,c,A,D,O,"reject"))}function eA(i,t,a,d){let f=Tc(a);i==="subtract"&&(f=nl(f));const g=si(nn(d)),_=Tx(f),c=se(t,Dt),A=gs(c,se(t,vn),"year-month");A.day=1;let D=Sp(c,A,"constrain");if(_<0){const z=Fl(c,D,{months:1},"constrain");D=tl(z.year,z.month,z.day-1)}const O=BD(f);return hg(D),Ry(ov(c,gs(c,Fl(c,D,O,g),"year-month"),g),c)}function tA(i,t,a,d){let f=Tc(a);i==="subtract"&&(f=nl(f));const g=si(nn(d)),_=se(t,Di),c=se(t,Dt),A=Ay(f);return Oo(B_(se(t,_n),_,c,A,g),_,c)}function gp(i,t,a){const d=Math.trunc(i/t),f=i%t,g=i<0?"negative":"positive",_=Math.abs(d),c=_+1,A=Xs(Math.abs(2*f)-t),D=_%2==0,O=Yx(a,g),z=f===0?_:qx(_,c,A,D,O);return t*(g==="positive"?z:-z)}function Kw(i,t,a,d){const f=Zy[a]*t;return function(g,_,c){const A=Ld(g),D=Ld(_),O=re.divide(A,D),z=re.remainder(A,D),V=Yx(c,"positive");let H,ne;re.lessThan(A,Ll)?(H=re.subtract(O,iv),ne=O):(H=O,ne=re.add(O,iv));const ae=mx(Bm(re.multiply(z,X2)),D)*(re.lessThan(A,Ll)?-1:1)+0,q=re.equal(z,Ll)?O:qx(H,ne,ae,tD(H),V);return re.multiply(q,D)}(i,re.BigInt(f),d)}function Jw(i,t,a,d){Xw(i);const{year:f,month:g,day:_}=i.isoDate,c=e2(i.time,t,a,d);return ui(tl(f,g,_+c.deltaDays),c)}function e2({hour:i,minute:t,second:a,millisecond:d,microsecond:f,nanosecond:g},_,c,A){let D;switch(c){case"day":case"hour":D=1e3*(1e3*(1e3*(60*(60*i+t)+a)+d)+f)+g;break;case"minute":D=1e3*(1e3*(1e3*(60*t+a)+d)+f)+g;break;case"second":D=1e3*(1e3*(1e3*a+d)+f)+g;break;case"millisecond":D=1e3*(1e3*d+f)+g;break;case"microsecond":D=1e3*f+g;break;case"nanosecond":D=g}const O=Zy[c],z=gp(D,O*_,A)/O;switch(c){case"day":return{deltaDays:z,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return pp(z,0,0,0,0,0);case"minute":return pp(i,z,0,0,0,0);case"second":return pp(i,t,z,0,0,0);case"millisecond":return pp(i,t,a,z,0,0);case"microsecond":return pp(i,t,a,d,z,0);case"nanosecond":return pp(i,t,a,d,f,z);default:throw new Error(`Invalid unit ${c}`)}}function Sx(i,t,a,d){const f=Zy[a];return i.round(re.BigInt(f*t),d)}function W_(i,t){const a=Zy[t];return i.fdiv(re.BigInt(a))}function Dh(i,t){return i.year!==t.year?Xs(i.year-t.year):i.month!==t.month?Xs(i.month-t.month):i.day!==t.day?Xs(i.day-t.day):0}function t2(i,t){return i.hour!==t.hour?Xs(i.hour-t.hour):i.minute!==t.minute?Xs(i.minute-t.minute):i.second!==t.second?Xs(i.second-t.second):i.millisecond!==t.millisecond?Xs(i.millisecond-t.millisecond):i.microsecond!==t.microsecond?Xs(i.microsecond-t.microsecond):i.nanosecond!==t.nanosecond?Xs(i.nanosecond-t.nanosecond):0}function Yy(i,t){const a=Dh(i.isoDate,t.isoDate);return a!==0?a:t2(i.time,t.time)}function YD(i){const t=Ex(i);return globalThis.BigInt!==void 0?globalThis.BigInt(t.toString(10)):t}function Mc(i,t){const a=Ld(i),{quotient:d,remainder:f}=O_(a,xv);let g=re.toNumber(d);return t==="floor"&&re.toNumber(f)<0&&(g-=1),t==="ceil"&&re.toNumber(f)>0&&(g+=1),g}function wh(i){if(!Number.isInteger(i))throw new RangeError("epoch milliseconds must be an integer");return re.multiply(re.BigInt(i),xv)}function Ex(i){let t=i;if(typeof i=="object"){const a=i[Symbol.toPrimitive];a&&typeof a=="function"&&(t=a.call(i,"number"))}if(typeof t=="number")throw new TypeError("cannot convert number to bigint");return typeof t=="bigint"?re.BigInt(t.toString(10)):re.BigInt(t)}const n2=(()=>{let i=re.BigInt(Date.now()%1e6);return()=>{const t=Date.now(),a=re.BigInt(t),d=re.add(wh(t),i);return i=re.remainder(a,xv),re.greaterThan(d,Uy)?Uy:re.lessThan(d,rv)?rv:d}})();function A_(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}function Xs(i){return i<0?-1:i>0?1:i}function nn(i){if(i===void 0)return Object.create(null);if(Fr(i)&&i!==null)return i;throw new TypeError("Options parameter must be an object, not "+(i===null?"null":typeof i))}function rg(i,t){const a=Object.create(null);return a[i]=t,a}function Wd(i,t,a,d){let f=i[t];if(f!==void 0){if(f=Wx(f),!a.includes(f))throw new RangeError(`${t} must be one of ${a.join(", ")}, not ${f}`);return f}if(d===tf)throw new RangeError(`${t} option is required`);return d}function vs(i){const t=uv(i);if(!z5.includes(uv(t)))throw new RangeError(`invalid calendar identifier ${t}`);switch(t){case"ethiopic-amete-alem":return"ethioaa";case"islamicc":return"islamic-civil"}return t}function uv(i){let t="";for(let a=0;a<i.length;a++){const d=i.charCodeAt(a);t+=d>=65&&d<=90?String.fromCharCode(d+32):String.fromCharCode(d)}return t}function Dp(i){throw new TypeError(`Do not use built-in arithmetic operators with Temporal objects. When comparing, use ${i==="PlainMonthDay"?"Temporal.PlainDate.compare(obj1.toPlainDate(year), obj2.toPlainDate(year))":`Temporal.${i}.compare(obj1, obj2)`}, not obj1 > obj2. When coercing to strings, use \`\${obj}\` or String(obj), not '' + obj. When coercing to numbers, use properties or methods of the object, not \`+obj\`. When concatenating with strings, use \`\${str}\${obj}\` or str.concat(obj), not str + obj. In React, coerce to a string before rendering a Temporal object.`)}const Z5=new RegExp(`^${mD.source}$`),$5=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/.source}$`);function qD(i,t,a,d=i(t),f=i(a)){let g=t,_=a,c=d,A=f;for(;_-g>1;){let D=Math.trunc((g+_)/2);const O=i(D);O===c?(g=D,c=O):O===A&&(_=D,A=O)}return _}function HD(i){return[...i]}function WD(i,t){if(i!=="gregory"&&i!=="iso8601")return;const a=Ov[i];let d=t.year;const{dayOfWeek:f,dayOfYear:g,daysInYear:_}=a.isoToDate(t,{dayOfWeek:!0,dayOfYear:!0,daysInYear:!0}),c=a.getFirstDayOfWeek(),A=a.getMinimalDaysInFirstWeek();let D=(f+7-c)%7,O=(f-g+7001-c)%7,z=Math.floor((g-1+O)/7);if(7-O>=A&&++z,z==0)z=function(V,H,ne,ae){let q=(ae-V-ne+1)%7;q<0&&(q+=7);let he=Math.floor((ne+q-1)/7);return 7-q>=H&&++he,he}(c,A,g+a.isoToDate(a.dateAdd(t,{years:-1},"constrain"),{daysInYear:!0}).daysInYear,f),d--;else if(g>=_-5){let V=(D+_-g)%7;V<0&&(V+=7),6-V>=A&&g+7-D>_&&(z=1,d++)}return{week:z,year:d}}function nA(i,t,a,d,f){if(t!==f.year){if(i*(t-f.year)>0)return!0}else if(a!==f.month){if(i*(a-f.month)>0)return!0}else if(d!==f.day&&i*(d-f.day)>0)return!0;return!1}const Ov={};function ag(i){if(!i.startsWith("M"))throw new RangeError(`Invalid month code: ${i}.  Month codes must start with M.`);const t=+i.slice(1);if(Number.isNaN(t))throw new RangeError(`Invalid month code: ${i}`);return t}function Ah(i,t=!1){return`M${`${i}`.padStart(2,"0")}${t?"L":""}`}function oT(i,t=void 0,a=12){let{month:d,monthCode:f}=i;if(f===void 0){if(d===void 0)throw new TypeError("Either month or monthCode are required");t==="reject"&&Xa(d,1,a),t==="constrain"&&(d=fs(d,1,a)),f=Ah(d)}else{const g=ag(f);if(f!==Ah(g))throw new RangeError(`Invalid month code: ${f}`);if(d!==void 0&&d!==g)throw new RangeError(`monthCode ${f} and month ${d} must match if both are present`);if(d=g,d<1||d>a)throw new RangeError(`Invalid monthCode: ${f}`)}return{...i,month:d,monthCode:f}}Ov.iso8601={resolveFields(i,t){if((t==="date"||t==="year-month")&&i.year===void 0)throw new TypeError("year is required");if((t==="date"||t==="month-day")&&i.day===void 0)throw new TypeError("day is required");Object.assign(i,oT(i))},dateToISO:(i,t)=>q_(i.year,i.month,i.day,t),monthDayToISOReferenceDate(i,t){const{month:a,day:d}=q_(i.year??1972,i.month,i.day,t);return{month:a,day:d,year:1972}},extraFields:()=>[],fieldKeysToIgnore(i){const t=new Set;for(let a=0;a<i.length;a++){const d=i[a];t.add(d),d==="month"?t.add("monthCode"):d==="monthCode"&&t.add("month")}return HD(t)},dateAdd(i,{years:t=0,months:a=0,weeks:d=0,days:f=0},g){let{year:_,month:c,day:A}=i;return _+=t,c+=a,{year:_,month:c}=Zm(_,c),{year:_,month:c,day:A}=q_(_,c,A,g),A+=f+7*d,tl(_,c,A)},dateUntil(i,t,a){const d=-Dh(i,t);if(d===0)return{years:0,months:0,weeks:0,days:0};let f,g=0,_=0;if(a==="year"||a==="month"){let O=t.year-i.year;for(O!==0&&(O-=d);!nA(d,i.year+O,i.month,i.day,t);)g=O,O+=d;let z=d;for(f=Zm(i.year+g,i.month+z);!nA(d,f.year,f.month,i.day,t);)_=z,z+=d,f=Zm(f.year,f.month+d);a==="month"&&(_+=12*g,g=0)}f=Zm(i.year+g,i.month+_);const c=jD(f.year,f.month,i.day);let A=0,D=ig(t.year,t.month-1,t.day)-ig(c.year,c.month-1,c.day);return a==="week"&&(A=Math.trunc(D/7),D%=7),{years:g,months:_,weeks:A,days:D}},isoToDate({year:i,month:t,day:a},d){const f={era:void 0,eraYear:void 0,year:i,month:t,day:a,daysInWeek:7,monthsInYear:12};if(d.monthCode&&(f.monthCode=Ah(t)),d.dayOfWeek){const g=t+(t<3?10:-2),_=i-(t<3?1:0),c=Math.floor(_/100),A=_-100*c,D=(a+Math.floor(2.6*g-.2)+(A+Math.floor(A/4))+(Math.floor(c/4)-2*c))%7;f.dayOfWeek=D+(D<=0?7:0)}if(d.dayOfYear){let g=a;for(let _=t-1;_>0;_--)g+=Hm(i,_);f.dayOfYear=g}return d.weekOfYear&&(f.weekOfYear=WD("iso8601",{year:i,month:t,day:a})),d.daysInMonth&&(f.daysInMonth=Hm(i,t)),(d.daysInYear||d.inLeapYear)&&(f.inLeapYear=wx(i),f.daysInYear=f.inLeapYear?366:365),f},getFirstDayOfWeek:()=>1,getMinimalDaysInFirstWeek:()=>4};class Wa{constructor(t){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,t!==void 0){let a=0;for(const d of t.map.entries()){if(++a>Wa.MAX_CACHE_ENTRIES)break;this.map.set(...d)}}}get(t){const a=this.map.get(t);return a&&(this.hits++,this.report()),this.calls++,a}set(t,a){this.map.set(t,a),this.misses++,this.report()}report(){}setObject(t){if(Wa.objectMap.get(t))throw new RangeError("object already cached");Wa.objectMap.set(t,this),this.report()}static getCacheForObject(t){let a=Wa.objectMap.get(t);return a||(a=new Wa,Wa.objectMap.set(t,a)),a}}function XD({isoYear:i,isoMonth:t,isoDay:a}){return`${kv(i)}-${jl(t)}-${jl(a)}T00:00Z`}function cw(i,t){return{years:i.year-t.year,months:i.month-t.month,days:i.day-t.day}}Wa.objectMap=new WeakMap,Wa.MAX_CACHE_ENTRIES=1e3;class dg{constructor(){this.eras=[],this.hasEra=!1,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new Intl.DateTimeFormat(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:"short",timeZone:"UTC"})),this.formatter}getCalendarParts(t){let a=this.getFormatter(),d=new Date(t);if(t==="-271821-04-19T00:00Z"){const f=a.resolvedOptions();a=new Intl.DateTimeFormat(f.locale,{...f,timeZone:"Etc/GMT+1"}),d=new Date("-271821-04-20T00:00Z")}try{return a.formatToParts(d)}catch{throw new RangeError(`Invalid ISO date: ${t}`)}}isoToCalendarDate(t,a){const{year:d,month:f,day:g}=t,_=JSON.stringify({func:"isoToCalendarDate",isoYear:d,isoMonth:f,isoDay:g,id:this.id}),c=a.get(_);if(c)return c;const A=XD({isoYear:d,isoMonth:f,isoDay:g}),D=this.getCalendarParts(A),O={};for(let V=0;V<D.length;V++){const{type:H,value:ne}=D[V];if(H!=="year"&&H!=="relatedYear"||(this.hasEra?O.eraYear=+ne:O.year=+ne),H==="month"){const ae=/^([0-9]*)(.*?)$/.exec(ne);if(!ae||ae.length!=3||!ae[1]&&!ae[2])throw new RangeError(`Unexpected month: ${ne}`);if(O.month=ae[1]?+ae[1]:1,O.month<1)throw new RangeError(`Invalid month ${ne} from ${A}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(O.month>13)throw new RangeError(`Invalid month ${ne} from ${A}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);ae[2]&&(O.monthExtra=ae[2])}H==="day"&&(O.day=+ne),this.hasEra&&H==="era"&&ne!=null&&ne!==""&&(O.era=ne.split(" (")[0].normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(/ /g,"-").toLowerCase())}if(this.hasEra&&O.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.hasEra){const V=this.eras.find(H=>O.era===H.genericName);V&&(O.era=V.code)}if(this.reviseIntlEra){const{era:V,eraYear:H}=this.reviseIntlEra(O,t);O.era=V,O.eraYear=H}this.checkIcuBugs&&this.checkIcuBugs(t);const z=this.adjustCalendarDate(O,a,"constrain",!0);if(z.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(t)}`);if(z.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(t)}`);if(z.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(t)}`);return a.set(_,z),["constrain","reject"].forEach(V=>{const H=JSON.stringify({func:"calendarToIsoDate",year:z.year,month:z.month,day:z.day,overflow:V,id:this.id});a.set(H,t)}),z}validateCalendarDate(t){const{month:a,year:d,day:f,eraYear:g,monthCode:_,monthExtra:c}=t;if(c!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(d===void 0&&g===void 0)throw new TypeError("year or eraYear is required");if(a===void 0&&_===void 0)throw new TypeError("month or monthCode is required");if(f===void 0)throw new RangeError("Missing day");if(_!==void 0){if(typeof _!="string")throw new RangeError("monthCode must be a string, not "+typeof _);if(!/^M([01]?\d)(L?)$/.test(_))throw new RangeError(`Invalid monthCode: ${_}`)}if(this.hasEra&&t.era===void 0!=(t.eraYear===void 0))throw new TypeError("properties era and eraYear must be provided together")}adjustCalendarDate(t,a=void 0,d="constrain",f=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let g=t;this.validateCalendarDate(g);const _=this.monthsInYear(g,a);let{month:c,monthCode:A}=g;return{month:c,monthCode:A}=oT(g,d,_),{...g,month:c,monthCode:A}}regulateMonthDayNaive(t,a,d){const f=this.monthsInYear(t,d);let{month:g,day:_}=t;return a==="reject"?(Xa(g,1,f),Xa(_,1,this.maximumMonthLength(t))):(g=fs(g,1,f),_=fs(_,1,this.maximumMonthLength({...t,month:g}))),{...t,month:g,day:_}}calendarToIsoDate(t,a="constrain",d){const f=t;let g=this.adjustCalendarDate(t,d,a,!1);g=this.regulateMonthDayNaive(g,a,d);const{year:_,month:c,day:A}=g,D=JSON.stringify({func:"calendarToIsoDate",year:_,month:c,day:A,overflow:a,id:this.id});let O,z=d.get(D);if(z||f.year!==void 0&&f.month!==void 0&&f.day!==void 0&&(f.year!==g.year||f.month!==g.month||f.day!==g.day)&&(O=JSON.stringify({func:"calendarToIsoDate",year:f.year,month:f.month,day:f.day,overflow:a,id:this.id}),z=d.get(O),z))return z;let V=this.estimateIsoDate({year:_,month:c,day:A});const H=Ae=>{let Ee=this.addDaysIso(V,Ae);if(g.day>this.minimumMonthLength(g)){let Fe=this.isoToCalendarDate(Ee,d);for(;Fe.month!==c||Fe.year!==_;){if(a==="reject")throw new RangeError(`day ${A} does not exist in month ${c} of year ${_}`);Ee=this.addDaysIso(Ee,-1),Fe=this.isoToCalendarDate(Ee,d)}}return Ee};let ne=0,ae=this.isoToCalendarDate(V,d),q=cw(g,ae);if(q.years!==0||q.months!==0||q.days!==0){const Ae=365*q.years+30*q.months+q.days;V=this.addDaysIso(V,Ae),ae=this.isoToCalendarDate(V,d),q=cw(g,ae),q.years===0&&q.months===0?V=H(q.days):ne=this.compareCalendarDates(g,ae)}let he=8;for(;ne;){V=this.addDaysIso(V,ne*he);const Ae=ae;ae=this.isoToCalendarDate(V,d);const Ee=ne;if(ne=this.compareCalendarDates(g,ae),ne){if(q=cw(g,ae),q.years===0&&q.months===0)V=H(q.days),ne=0;else if(Ee&&ne!==Ee)if(he>1)he/=2;else{if(a==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...f})}`);this.compareCalendarDates(ae,Ae)>0&&(V=this.addDaysIso(V,-1)),ne=0}}}if(d.set(D,V),O&&d.set(O,V),g.year===void 0||g.month===void 0||g.day===void 0||g.monthCode===void 0||this.hasEra&&(g.era===void 0||g.eraYear===void 0))throw new RangeError("Unexpected missing property");return V}compareCalendarDates(t,a){return t.year!==a.year?Xs(t.year-a.year):t.month!==a.month?Xs(t.month-a.month):t.day!==a.day?Xs(t.day-a.day):0}regulateDate(t,a="constrain",d){const f=this.calendarToIsoDate(t,a,d);return this.isoToCalendarDate(f,d)}addDaysIso(t,a){return tl(t.year,t.month,t.day+a)}addDaysCalendar(t,a,d){const f=this.calendarToIsoDate(t,"constrain",d),g=this.addDaysIso(f,a);return this.isoToCalendarDate(g,d)}addMonthsCalendar(t,a,d,f){let g=t;const{day:_}=g;for(let c=0,A=Math.abs(a);c<A;c++){const{month:D}=g,O=g,z=a<0?-Math.max(_,this.daysInPreviousMonth(g,f)):this.daysInMonth(g,f),V=this.calendarToIsoDate(g,"constrain",f);let H=this.addDaysIso(V,z);if(g=this.isoToCalendarDate(H,f),a>0){const ne=this.monthsInYear(O,f);for(;g.month-1!=D%ne;)H=this.addDaysIso(H,-1),g=this.isoToCalendarDate(H,f)}g.day!==_&&(g=this.regulateDate({...g,day:_},"constrain",f))}if(d==="reject"&&g.day!==_)throw new RangeError(`Day ${_} does not exist in resulting calendar month`);return g}addCalendar(t,{years:a=0,months:d=0,weeks:f=0,days:g=0},_,c){const{year:A,day:D,monthCode:O}=t,z=this.adjustCalendarDate({year:A+a,monthCode:O,day:D},c),V=this.addMonthsCalendar(z,d,_,c),H=g+7*f;return this.addDaysCalendar(V,H,c)}untilCalendar(t,a,d,f){let g=0,_=0,c=0,A=0;switch(d){case"day":g=this.calendarDaysUntil(t,a,f);break;case"week":{const D=this.calendarDaysUntil(t,a,f);g=D%7,_=(D-g)/7;break}case"month":case"year":{const D=this.compareCalendarDates(a,t);if(!D)return{years:0,months:0,weeks:0,days:0};const O=a.year-t.year,z=a.day-t.day;if(d==="year"&&O){let ne=0;a.monthCode>t.monthCode&&(ne=1),a.monthCode<t.monthCode&&(ne=-1),ne||(ne=Math.sign(z)),A=ne*D<0?O-D:O}let V,H=A?this.addCalendar(t,{years:A},"constrain",f):t;do c+=D,V=H,H=this.addMonthsCalendar(V,D,"constrain",f),H.day!==t.day&&(H=this.regulateDate({...H,day:t.day},"constrain",f));while(this.compareCalendarDates(a,H)*D>=0);c-=D,g=this.calendarDaysUntil(V,a,f);break}}return{years:A,months:c,weeks:_,days:g}}daysInMonth(t,a){const{day:d}=t,f=this.maximumMonthLength(t),g=this.minimumMonthLength(t);if(g===f)return g;const _=d<=f-g?f:g,c=this.calendarToIsoDate(t,"constrain",a),A=this.addDaysIso(c,_),D=this.isoToCalendarDate(A,a),O=this.addDaysIso(A,-D.day);return this.isoToCalendarDate(O,a).day}daysInPreviousMonth(t,a){const{day:d,month:f,year:g}=t;let _={year:f>1?g:g-1,month:f,day:1};const c=f>1?f-1:this.monthsInYear(_,a);_={..._,month:c};const A=this.minimumMonthLength(_),D=this.maximumMonthLength(_);if(A===D)return D;const O=this.calendarToIsoDate(t,"constrain",a),z=this.addDaysIso(O,-d);return this.isoToCalendarDate(z,a).day}startOfCalendarYear(t){return{year:t.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(t){return{year:t.year,month:t.month,day:1}}calendarDaysUntil(t,a,d){const f=this.calendarToIsoDate(t,"constrain",d),g=this.calendarToIsoDate(a,"constrain",d);return ig(g.year,g.month-1,g.day)-ig(f.year,f.month-1,f.day)}monthDaySearchStartYear(t,a){return 1972}monthDayFromFields(t,a,d){let f,g,_,c,A,{era:D,eraYear:O,year:z,month:V,monthCode:H,day:ne}=t;if(V!==void 0&&z===void 0&&(!this.hasEra||D===void 0||O===void 0))throw new TypeError("when month is present, year (or era and eraYear) are required");(H===void 0||z!==void 0||this.hasEra&&O!==void 0)&&({monthCode:H,day:ne}=this.isoToCalendarDate(this.calendarToIsoDate(t,a,d),d));const ae={year:this.monthDaySearchStartYear(H,ne),month:12,day:31},q=this.isoToCalendarDate(ae,d),he=q.monthCode>H||q.monthCode===H&&q.day>=ne?q.year:q.year-1;for(let Ae=0;Ae<20;Ae++){const Ee=this.adjustCalendarDate({day:ne,monthCode:H,year:he-Ae},d),Fe=this.calendarToIsoDate(Ee,"constrain",d),De=this.isoToCalendarDate(Fe,d);if({year:f,month:g,day:_}=Fe,De.monthCode===H&&De.day===ne)return{month:g,day:_,year:f};if(a==="constrain"){const ke=this.maxLengthOfMonthCodeInAnyYear(De.monthCode);if(De.monthCode===H&&De.day===ke&&ne>ke)return{month:g,day:_,year:f};(c===void 0||De.monthCode===c.monthCode&&De.day>c.day)&&(c=De,A=Fe)}}if(a==="constrain"&&A!==void 0)return A;throw new RangeError(`No recent ${this.id} year with monthCode ${H} and day ${ne}`)}getFirstDayOfWeek(){}getMinimalDaysInFirstWeek(){}}class Y5 extends dg{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}}}inLeapYear(t){const{year:a}=t;return(7*a+1)%19<7}monthsInYear(t){return this.inLeapYear(t)?13:12}minimumMonthLength(t){return this.minMaxMonthLength(t,"min")}maximumMonthLength(t){return this.minMaxMonthLength(t,"max")}minMaxMonthLength(t,a){const{month:d,year:f}=t,g=this.getMonthCode(f,d),_=Object.entries(this.months).find(A=>A[1].monthCode===g);if(_===void 0)throw new RangeError(`unmatched Hebrew month: ${d}`);const c=_[1].days;return typeof c=="number"?c:c[a]}maxLengthOfMonthCodeInAnyYear(t){return["M04","M06","M08","M10","M12"].includes(t)?29:30}estimateIsoDate(t){const{year:a}=t;return{year:a-3760,month:1,day:1}}getMonthCode(t,a){return this.inLeapYear({year:t})?a===6?Ah(5,!0):Ah(a<6?a:a-1):Ah(a)}adjustCalendarDate(t,a,d="constrain",f=!1){let{year:g,month:_,monthCode:c,day:A,monthExtra:D}=t;if(g===void 0)throw new TypeError("Missing property: year");if(f){if(D){const O=this.months[D];if(!O)throw new RangeError(`Unrecognized month from formatToParts: ${D}`);_=this.inLeapYear({year:g})?O.leap:O.regular}return c=this.getMonthCode(g,_),{year:g,month:_,day:A,monthCode:c}}if(this.validateCalendarDate(t),_===void 0)if(c.endsWith("L")){if(c!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${c}`);if(_=6,!this.inLeapYear({year:g})){if(d==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${g} which is not a leap year`);_=6,c="M06"}}else{_=ag(c),this.inLeapYear({year:g})&&_>=6&&_++;const O=this.monthsInYear({year:g});if(_<1||_>O)throw new RangeError(`Invalid monthCode: ${c}`)}else if(d==="reject"?(Xa(_,1,this.monthsInYear({year:g})),Xa(A,1,this.maximumMonthLength({year:g,month:_}))):(_=fs(_,1,this.monthsInYear({year:g})),A=fs(A,1,this.maximumMonthLength({year:g,month:_}))),c===void 0)c=this.getMonthCode(g,_);else if(this.getMonthCode(g,_)!==c)throw new RangeError(`monthCode ${c} doesn't correspond to month ${_} in Hebrew year ${g}`);return{...t,day:A,month:_,monthCode:c,year:g}}}class c0 extends dg{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425}inLeapYear(t,a){const d={year:t.year,month:1,monthCode:"M01",day:1},f={year:t.year+1,month:1,monthCode:"M01",day:1};return this.calendarDaysUntil(d,f,a)===355}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(){return 30}estimateIsoDate(t){const{year:a}=this.adjustCalendarDate(t);return{year:Math.floor(a*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class q5 extends c0{constructor(){super(...arguments),this.id="islamic"}}class H5 extends c0{constructor(){super(...arguments),this.id="islamic-umalqura"}}class W5 extends c0{constructor(){super(...arguments),this.id="islamic-tbla"}}class X5 extends c0{constructor(){super(...arguments),this.id="islamic-civil"}}class Q5 extends c0{constructor(){super(...arguments),this.id="islamic-rgsa"}}class K5 extends c0{constructor(){super(...arguments),this.id="islamicc"}}class J5 extends dg{constructor(){super(...arguments),this.id="persian",this.calendarType="solar"}inLeapYear(t,a){return this.daysInMonth({year:t.year,month:12,day:1},a)===30}monthsInYear(){return 12}minimumMonthLength(t){const{month:a}=t;return a===12?29:a<=6?31:30}maximumMonthLength(t){const{month:a}=t;return a===12?30:a<=6?31:30}maxLengthOfMonthCodeInAnyYear(t){return ag(t)<=6?31:30}estimateIsoDate(t){const{year:a}=this.adjustCalendarDate(t);return{year:a+621,month:1,day:1}}}class e6 extends dg{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(t){return sT(t.year+78)}monthsInYear(){return 12}minimumMonthLength(t){return this.getMonthInfo(t).length}maximumMonthLength(t){return this.getMonthInfo(t).length}maxLengthOfMonthCodeInAnyYear(t){const a=ag(t);let d=this.months[a];return d=d.leap??d,d.length}getMonthInfo(t){const{month:a}=t;let d=this.months[a];if(d===void 0)throw new RangeError(`Invalid month: ${a}`);return this.inLeapYear(t)&&d.leap&&(d=d.leap),d}estimateIsoDate(t){const a=this.adjustCalendarDate(t),d=this.getMonthInfo(a);return tl(a.year+78+(d.nextYear?1:0),d.month,d.day+a.day-1)}checkIcuBugs(t){if(this.vulnerableToBceBug&&t.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function sT(i){return i%4==0&&(i%100!=0||i%400==0)}class QD extends dg{constructor(t,a){super(),this.calendarType="solar",this.id=t,this.isoEpoch=a}inLeapYear(t){const{year:a}=this.estimateIsoDate({month:1,day:1,year:t.year});return sT(a)}monthsInYear(){return 12}minimumMonthLength(t){const{month:a}=t;return a===2?this.inLeapYear(t)?29:28:[4,6,9,11].indexOf(a)>=0?30:31}maximumMonthLength(t){return this.minimumMonthLength(t)}maxLengthOfMonthCodeInAnyYear(t){return[31,29,31,30,31,30,31,31,30,31,30,31][ag(t)-1]}estimateIsoDate(t){const a=this.adjustCalendarDate(t);return q_(a.year+this.isoEpoch.year,a.month+this.isoEpoch.month,a.day+this.isoEpoch.day,"constrain")}}class KD extends dg{constructor(t,a){super(),this.hasEra=!0,this.calendarType="solar",this.id=t;const{eras:d,anchorEra:f}=function(g){let _,c=g;if(c.length===0)throw new RangeError("Invalid era data: eras are required");if(c.length===1&&c[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(c.length===1&&!c[0].code)throw new RangeError("Invalid era data: at least one named era is required");if(c.filter(D=>D.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");c.forEach(D=>{if(D.isAnchor||!D.anchorEpoch&&!D.reverseOf){if(_)throw new RangeError("Invalid era data: cannot have multiple anchor eras");_=D,D.anchorEpoch={year:D.hasYearZero?0:1}}else if(!D.code)throw new RangeError("If era name is blank, it must be the anchor era")}),c=c.filter(D=>D.code),c.forEach(D=>{const{reverseOf:O}=D;if(O){const z=c.find(V=>V.code===O);if(z===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${O}`);D.reverseOf=z,D.anchorEpoch=z.anchorEpoch,D.isoEpoch=z.isoEpoch}D.anchorEpoch.month===void 0&&(D.anchorEpoch.month=1),D.anchorEpoch.day===void 0&&(D.anchorEpoch.day=1)}),c.sort((D,O)=>{if(D.reverseOf)return 1;if(O.reverseOf)return-1;if(!D.isoEpoch||!O.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return O.isoEpoch.year-D.isoEpoch.year});const A=c[c.length-1].reverseOf;if(A&&A!==c[c.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return c.forEach((D,O)=>{D.genericName="era"+(c.length-1-O)}),{eras:c,anchorEra:_||c[0]}}(a);this.anchorEra=f,this.eras=d}inLeapYear(t){const{year:a}=this.estimateIsoDate({month:1,day:1,year:t.year});return sT(a)}monthsInYear(){return 12}minimumMonthLength(t){const{month:a}=t;return a===2?this.inLeapYear(t)?29:28:[4,6,9,11].indexOf(a)>=0?30:31}maximumMonthLength(t){return this.minimumMonthLength(t)}maxLengthOfMonthCodeInAnyYear(t){return[31,29,31,30,31,30,31,31,30,31,30,31][ag(t)-1]}completeEraYear(t){const a=(c,A,D)=>{const O=t[c];if(O!=null&&O!=A&&!(D||[]).includes(O)){const z=D?.[0];throw new RangeError(`Input ${c} ${O} doesn't match calculated value ${z?`${A} (also called ${z})`:A}`)}},d=c=>{let A;const D={...t,year:c},O=this.eras.find((z,V)=>{if(V===this.eras.length-1){if(z.reverseOf){if(c>0)throw new RangeError(`Signed year ${c} is invalid for era ${z.code}`);return A=z.anchorEpoch.year-c,!0}return A=c-z.anchorEpoch.year+(z.hasYearZero?0:1),!0}return this.compareCalendarDates(D,z.anchorEpoch)>=0&&(A=c-z.anchorEpoch.year+(z.hasYearZero?0:1),!0)});if(!O)throw new RangeError(`Year ${c} was not matched by any era`);return{eraYear:A,era:O.code,eraNames:O.names}};let{year:f,eraYear:g,era:_}=t;if(f!=null){const c=d(f);({eraYear:g,era:_}=c),a("era",_,c?.eraNames),a("eraYear",g)}else{if(g==null)throw new RangeError("Either year or eraYear and era are required");{if(_===void 0)throw new RangeError("era and eraYear must be provided together");const c=this.eras.find(({code:A,names:D=[]})=>A===_||D.includes(_));if(!c)throw new RangeError(`Era ${_} (ISO year ${g}) was not matched by any era`);f=c.reverseOf?c.anchorEpoch.year-g:g+c.anchorEpoch.year-(c.hasYearZero?0:1),a("year",f),{eraYear:g,era:_}=d(f)}}return{...t,year:f,eraYear:g,era:_}}adjustCalendarDate(t,a,d="constrain"){let f=t;const{month:g,monthCode:_}=f;return g===void 0&&(f={...f,month:ag(_)}),this.validateCalendarDate(f),f=this.completeEraYear(f),super.adjustCalendarDate(f,a,d)}estimateIsoDate(t){const a=this.adjustCalendarDate(t),{year:d,month:f,day:g}=a,{anchorEra:_}=this;return q_(d+_.isoEpoch.year-(_.hasYearZero?0:1),f,g,"constrain")}}class lT extends KD{constructor(t,a){super(t,a)}isoToCalendarDate(t){const{year:a,month:d,day:f}=t,g=Ah(d),_=a-this.anchorEra.isoEpoch.year+1;return this.completeEraYear({year:_,month:d,monthCode:g,day:f})}}const _h={inLeapYear(i){const{year:t}=i;return(t+1)%4==0},monthsInYear:()=>13,minimumMonthLength(i){const{month:t}=i;return t===13?this.inLeapYear(i)?6:5:30},maximumMonthLength(i){return this.minimumMonthLength(i)},maxLengthOfMonthCodeInAnyYear:i=>i==="M13"?6:30};class t6 extends QD{constructor(t,a){super(t,a),this.inLeapYear=_h.inLeapYear,this.monthsInYear=_h.monthsInYear,this.minimumMonthLength=_h.minimumMonthLength,this.maximumMonthLength=_h.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=_h.maxLengthOfMonthCodeInAnyYear}}class JD extends KD{constructor(t,a){super(t,a),this.inLeapYear=_h.inLeapYear,this.monthsInYear=_h.monthsInYear,this.minimumMonthLength=_h.minimumMonthLength,this.maximumMonthLength=_h.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=_h.maxLengthOfMonthCodeInAnyYear}}class n6 extends t6{constructor(){super("ethioaa",{year:-5492,month:7,day:17})}}class i6 extends JD{constructor(){super("coptic",[{code:"coptic",isoEpoch:{year:284,month:8,day:29}},{code:"coptic-inverse",reverseOf:"coptic"}])}}class r6 extends JD{constructor(){super("ethiopic",[{code:"ethioaa",names:["ethiopic-amete-alem","mundi"],isoEpoch:{year:-5492,month:7,day:17}},{code:"ethiopic",names:["incar"],isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class a6 extends lT{constructor(){super("roc",[{code:"roc",names:["minguo"],isoEpoch:{year:1912,month:1,day:1}},{code:"roc-inverse",names:["before-roc"],reverseOf:"roc"}])}}class o6 extends QD{constructor(){super("buddhist",{year:-543,month:1,day:1})}}class s6 extends lT{constructor(){super("gregory",[{code:"gregory",names:["ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"gregory-inverse",names:["be","bce"],reverseOf:"gregory"}])}reviseIntlEra(t){let{era:a,eraYear:d}=t;return a==="b"&&(a="gregory-inverse"),a==="a"&&(a="gregory"),{era:a,eraYear:d}}getFirstDayOfWeek(){return 1}getMinimalDaysInFirstWeek(){return 1}}class l6 extends lT{constructor(){super("japanese",[{code:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{code:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{code:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{code:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{code:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{code:"japanese",names:["japanese","gregory","ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"japanese-inverse",names:["japanese-inverse","gregory-inverse","bc","bce"],reverseOf:"japanese"}]),this.erasBeginMidYear=!0}reviseIntlEra(t,a){const{era:d,eraYear:f}=t,{year:g}=a;return this.eras.find(_=>_.code===d)?{era:d,eraYear:f}:g<1?{era:"japanese-inverse",eraYear:1-g}:{era:"japanese",eraYear:g}}}class eI extends dg{constructor(){super(...arguments),this.calendarType="lunisolar"}inLeapYear(t,a){const d=this.getMonthList(t.year,a);return Object.entries(d).length===13}monthsInYear(t,a){return this.inLeapYear(t,a)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(t){return["M01L","M09L","M10L","M11L","M12L"].includes(t)?29:30}monthDaySearchStartYear(t,a){const d={M01L:[1651,1651],M02L:[1947,1765],M03L:[1966,1955],M04L:[1963,1944],M05L:[1971,1952],M06L:[1960,1941],M07L:[1968,1938],M08L:[1957,1718],M09L:[1832,1832],M10L:[1870,1870],M11L:[1814,1814],M12L:[1890,1890]}[t]??[1972,1972];return a<30?d[0]:d[1]}getMonthList(t,a){if(t===void 0)throw new TypeError("Missing year");const d=JSON.stringify({func:"getMonthList",calendarYear:t,id:this.id}),f=a.get(d);if(f)return f;const g=this.getFormatter(),_=(q,he)=>{const Ae=XD({isoYear:q,isoMonth:2,isoDay:1}),Ee=new Date(Ae);Ee.setUTCDate(he+1);const Fe=g.formatToParts(Ee),De=Fe.find(Se=>Se.type==="month").value,ke=+Fe.find(Se=>Se.type==="day").value,ze=Fe.find(Se=>Se.type==="relatedYear");let rt;if(ze===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return rt=+ze.value,{calendarMonthString:De,calendarDay:ke,calendarYearToVerify:rt}};let c=17,{calendarMonthString:A,calendarDay:D,calendarYearToVerify:O}=_(t,c);A!=="1"&&(c+=29,{calendarMonthString:A,calendarDay:D}=_(t,c)),c-=D-5;const z={};let V,H,ne=1,ae=!1;do({calendarMonthString:A,calendarDay:D,calendarYearToVerify:O}=_(t,c)),V&&(z[H].daysInMonth=V+30-D),O!==t?ae=!0:(z[A]={monthIndex:ne++},c+=30),V=D,H=A;while(!ae);return z[H].daysInMonth=V+30-D,a.set(d,z),z}estimateIsoDate(t){const{year:a,month:d}=t;return{year:a,month:d>=12?12:d+1,day:1}}adjustCalendarDate(t,a,d="constrain",f=!1){let{year:g,month:_,monthExtra:c,day:A,monthCode:D}=t;if(g===void 0)throw new TypeError("Missing property: year");if(f){if(c&&c!=="bis")throw new RangeError(`Unexpected leap month suffix: ${c}`);const O=Ah(_,c!==void 0),z=`${_}${c||""}`,V=this.getMonthList(g,a)[z];if(V===void 0)throw new RangeError(`Unmatched month ${z} in Chinese year ${g}`);return _=V.monthIndex,{year:g,month:_,day:A,monthCode:O}}if(this.validateCalendarDate(t),_===void 0){const O=this.getMonthList(g,a);let z=D.replace(/^M|L$/g,H=>H==="L"?"bis":"");z[0]==="0"&&(z=z.slice(1));let V=O[z];if(_=V&&V.monthIndex,_===void 0&&D.endsWith("L")&&D!="M13L"&&d==="constrain"){const H=+D.replace(/^M0?|L$/g,"");V=O[H],V&&(_=V.monthIndex,D=Ah(H))}if(_===void 0)throw new RangeError(`Unmatched month ${D} in Chinese year ${g}`)}else if(D===void 0){const O=this.getMonthList(g,a),z=Object.entries(O),V=z.length;d==="reject"?(Xa(_,1,V),Xa(A,1,this.maximumMonthLength())):(_=fs(_,1,V),A=fs(A,1,this.maximumMonthLength()));const H=z.find(ne=>ne[1].monthIndex===_);if(H===void 0)throw new RangeError(`Invalid month ${_} in Chinese year ${g}`);D=Ah(+H[0].replace("bis",""),H[0].indexOf("bis")!==-1)}else{const O=this.getMonthList(g,a);let z=D.replace(/^M|L$/g,H=>H==="L"?"bis":"");z[0]==="0"&&(z=z.slice(1));const V=O[z];if(!V)throw new RangeError(`Unmatched monthCode ${D} in Chinese year ${g}`);if(_!==V.monthIndex)throw new RangeError(`monthCode ${D} doesn't correspond to month ${_} in Chinese year ${g}`)}return{...t,year:g,month:_,monthCode:D,day:A}}}class c6 extends eI{constructor(){super(...arguments),this.id="chinese"}}class u6 extends eI{constructor(){super(...arguments),this.id="dangi"}}class h6{constructor(t){this.helper=t}extraFields(t){return this.helper.hasEra&&t.includes("year")?["era","eraYear"]:[]}resolveFields(t){if(this.helper.calendarType!=="lunisolar"){const a=new Wa;oT(t,void 0,this.helper.monthsInYear({year:t.year??1972},a))}}dateToISO(t,a){const d=new Wa,f=this.helper.calendarToIsoDate(t,a,d);return d.setObject(f),f}monthDayToISOReferenceDate(t,a){const d=new Wa,f=this.helper.monthDayFromFields(t,a,d);return d.setObject(f),f}fieldKeysToIgnore(t){const a=new Set;for(let d=0;d<t.length;d++){const f=t[d];switch(a.add(f),f){case"era":a.add("eraYear"),a.add("year");break;case"eraYear":a.add("era"),a.add("year");break;case"year":a.add("era"),a.add("eraYear");break;case"month":a.add("monthCode"),this.helper.erasBeginMidYear&&(a.add("era"),a.add("eraYear"));break;case"monthCode":a.add("month"),this.helper.erasBeginMidYear&&(a.add("era"),a.add("eraYear"));break;case"day":this.helper.erasBeginMidYear&&(a.add("era"),a.add("eraYear"))}}return HD(a)}dateAdd(t,{years:a,months:d,weeks:f,days:g},_){const c=Wa.getCacheForObject(t),A=this.helper.isoToCalendarDate(t,c),D=this.helper.addCalendar(A,{years:a,months:d,weeks:f,days:g},_,c),O=this.helper.calendarToIsoDate(D,"constrain",c);return Wa.getCacheForObject(O)||new Wa(c).setObject(O),O}dateUntil(t,a,d){const f=Wa.getCacheForObject(t),g=Wa.getCacheForObject(a),_=this.helper.isoToCalendarDate(t,f),c=this.helper.isoToCalendarDate(a,g);return this.helper.untilCalendar(_,c,d,f)}isoToDate(t,a){const d=Wa.getCacheForObject(t),f=this.helper.isoToCalendarDate(t,d);if(a.dayOfWeek&&(f.dayOfWeek=Ov.iso8601.isoToDate(t,{dayOfWeek:!0}).dayOfWeek),a.dayOfYear){const g=this.helper.startOfCalendarYear(f),_=this.helper.calendarDaysUntil(g,f,d);f.dayOfYear=_+1}if(a.weekOfYear&&(f.weekOfYear=WD(this.helper.id,t)),f.daysInWeek=7,a.daysInMonth&&(f.daysInMonth=this.helper.daysInMonth(f,d)),a.daysInYear){const g=this.helper.startOfCalendarYear(f),_=this.helper.addCalendar(g,{years:1},"constrain",d);f.daysInYear=this.helper.calendarDaysUntil(g,_,d)}return a.monthsInYear&&(f.monthsInYear=this.helper.monthsInYear(f,d)),a.inLeapYear&&(f.inLeapYear=this.helper.inLeapYear(f,d)),f}getFirstDayOfWeek(){return this.helper.getFirstDayOfWeek()}getMinimalDaysInFirstWeek(){return this.helper.getMinimalDaysInFirstWeek()}}for(const i of[Y5,J5,r6,n6,i6,c6,u6,a6,e6,o6,s6,l6,q5,H5,W5,X5,Q5,K5]){const t=new i;Ov[t.id]=new h6(t)}Uw("calendarImpl",function(i){return Ov[i]});const hv=Intl.DateTimeFormat;function wy(i,t){let a=se(i,t);return typeof a=="function"&&(a=new hv(se(i,hD),a(se(i,Fw))),function(d,f,g){const _=$x(d);if(_===void 0)throw new TypeError("Missing slots for the given container");if(_[f]===void 0)throw new TypeError(`tried to reset ${f} which was not set`);_[f]=g}(i,t,a)),a}function M_(i){return _s(i,ug)}class dv{constructor(t=void 0,a=void 0){(function(d,f,g){const _=g!==void 0;let c;if(_){const z=["localeMatcher","calendar","numberingSystem","hour12","hourCycle","timeZone","weekday","era","year","month","day","dayPeriod","hour","minute","second","fractionalSecondDigits","timeZoneName","formatMatcher","dateStyle","timeStyle"];c=function(H){if(H==null)throw new TypeError(`Expected object not ${H}`);return Object(H)}(g);const V=Object.create(null);for(let H=0;H<z.length;H++){const ne=z[H];Object.prototype.hasOwnProperty.call(c,ne)&&(V[ne]=c[ne])}c=V}else c=Object.create(null);const A=new hv(f,c),D=A.resolvedOptions();if(of(d),_){const z=Object.assign(Object.create(null),D);for(const V in z)Object.prototype.hasOwnProperty.call(c,V)||delete z[V];z.hour12=c.hour12,z.hourCycle=c.hourCycle,Vn(d,Fw,z)}else Vn(d,Fw,c);Vn(d,hD,D.locale),Vn(d,ug,A),Vn(d,Ey,D.timeZone),Vn(d,L_,D.calendar),Vn(d,aD,b6),Vn(d,oD,_6),Vn(d,sD,v6),Vn(d,lD,y6),Vn(d,cD,x6),Vn(d,uD,w6);const O=_?c.timeZone:void 0;if(O===void 0)Vn(d,zw,D.timeZone);else{const z=Wx(O);if(z.startsWith(""))throw new RangeError("Unicode minus (U+2212) is not supported in time zone offsets");Vn(d,zw,ms(z))}})(this,t,a)}get format(){ot(this,M_);const t=f6.bind(this);return Object.defineProperties(t,{length:{value:1,enumerable:!1,writable:!1,configurable:!0},name:{value:"",enumerable:!1,writable:!1,configurable:!0}}),t}formatRange(t,a){return ot(this,M_),m6.call(this,t,a)}formatToParts(t,...a){return ot(this,M_),p6.call(this,t,...a)}formatRangeToParts(t,a){return ot(this,M_),g6.call(this,t,a)}resolvedOptions(){return ot(this,M_),d6.call(this)}}"formatToParts"in hv.prototype||delete dv.prototype.formatToParts,"formatRangeToParts"in hv.prototype||delete dv.prototype.formatRangeToParts;const wc=function(i=void 0,t=void 0){return new dv(i,t)};function d6(){const i=se(this,ug).resolvedOptions();return i.timeZone=se(this,zw),i}function f6(i,...t){let a,d,f=qy(i,this);return f.formatter?(a=f.formatter,d=[Mc(f.epochNs,"floor")]):(a=se(this,ug),d=[i,...t]),a.format(...d)}function p6(i,...t){let a,d,f=qy(i,this);return f.formatter?(a=f.formatter,d=[Mc(f.epochNs,"floor")]):(a=se(this,ug),d=[i,...t]),a.formatToParts(...d)}function m6(i,t){if(i===void 0||t===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");const a=Ax(i),d=Ax(t);let f,g=[a,d];if(Xd(a)!==Xd(d))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");if(Xd(a)){if(!tI(a,d))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{epochNs:_,formatter:c}=qy(a,this),{epochNs:A,formatter:D}=qy(d,this);c&&(f=c,g=[Mc(_,"floor"),Mc(A,"floor")])}return f||(f=se(this,ug)),f.formatRange(...g)}function g6(i,t){if(i===void 0||t===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");const a=Ax(i),d=Ax(t);let f,g=[a,d];if(Xd(a)!==Xd(d))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");if(Xd(a)){if(!tI(a,d))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{epochNs:_,formatter:c}=qy(a,this),{epochNs:A,formatter:D}=qy(d,this);c&&(f=c,g=[Mc(_,"floor"),Mc(A,"floor")])}return f||(f=se(this,ug)),f.formatRangeToParts(...g)}function Lv(i={},t={}){const a=Object.assign({},i),d=["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"];for(let f=0;f<d.length;f++){const g=d[f];a[g]=g in t?t[g]:a[g],a[g]!==!1&&a[g]!==void 0||delete a[g]}return a}function y6(i){const t=Lv(i,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});if(t.timeStyle!=="long"&&t.timeStyle!=="full"||(delete t.timeStyle,Object.assign(t,{hour:"numeric",minute:"2-digit",second:"2-digit"})),!r1(t)){if(Nv(i))throw new TypeError(`cannot format Temporal.PlainTime with options [${Object.keys(i)}]`);Object.assign(t,{hour:"numeric",minute:"numeric",second:"numeric"})}return t}function _6(i){const t={short:{year:"2-digit",month:"numeric"},medium:{year:"numeric",month:"short"},long:{year:"numeric",month:"long"},full:{year:"numeric",month:"long"}},a=Lv(i,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in a&&a.dateStyle){const d=a.dateStyle;delete a.dateStyle,Object.assign(a,t[d])}if(!("year"in a||"month"in a||"era"in a)){if(Nv(i))throw new TypeError(`cannot format PlainYearMonth with options [${Object.keys(i)}]`);Object.assign(a,{year:"numeric",month:"numeric"})}return a}function v6(i){const t={short:{month:"numeric",day:"numeric"},medium:{month:"short",day:"numeric"},long:{month:"long",day:"numeric"},full:{month:"long",day:"numeric"}},a=Lv(i,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in a&&a.dateStyle){const d=a.dateStyle;delete a.dateStyle,Object.assign(a,t[d])}if(!("month"in a)&&!("day"in a)){if(Nv(i))throw new TypeError(`cannot format PlainMonthDay with options [${Object.keys(i)}]`);Object.assign(a,{month:"numeric",day:"numeric"})}return a}function b6(i){const t=Lv(i,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if(!i1(t)){if(Nv(i))throw new TypeError(`cannot format PlainDate with options [${Object.keys(i)}]`);Object.assign(t,{year:"numeric",month:"numeric",day:"numeric"})}return t}function x6(i){const t=Lv(i,{timeZoneName:!1});if((t.timeStyle==="long"||t.timeStyle==="full")&&(delete t.timeStyle,Object.assign(t,{hour:"numeric",minute:"2-digit",second:"2-digit"}),t.dateStyle)&&(Object.assign(t,{short:{year:"numeric",month:"numeric",day:"numeric"},medium:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric"},full:{year:"numeric",month:"long",day:"numeric",weekday:"long"}}[t.dateStyle]),delete t.dateStyle),!r1(t)&&!i1(t)){if(Nv(i))throw new TypeError(`cannot format PlainDateTime with options [${Object.keys(i)}]`);Object.assign(t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return t}function w6(i){let t=i;return r1(t)||i1(t)||(t=Object.assign({},t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),t}function i1(i){return"year"in i||"month"in i||"day"in i||"weekday"in i||"dateStyle"in i||"era"in i}function r1(i){return"hour"in i||"minute"in i||"second"in i||"timeStyle"in i||"dayPeriod"in i||"fractionalSecondDigits"in i}function Nv(i){return i1(i)||r1(i)||"dateStyle"in i||"timeStyle"in i||"timeZoneName"in i}function Xd(i){return Pr(i)||Yr(i)||sr(i)||Zn(i)||po(i)||Ol(i)||fo(i)}function Ax(i){return Xd(i)?i:Hx(i)}function tI(i,t){return!(!Xd(i)||!Xd(t)||Yr(i)&&!Yr(t)||Pr(i)&&!Pr(t)||sr(i)&&!sr(t)||Zn(i)&&!Zn(t)||po(i)&&!po(t)||Ol(i)&&!Ol(t)||fo(i)&&!fo(t))}function qy(i,t){if(Yr(i)){const a={isoDate:{year:1970,month:1,day:1},time:se(i,zr)};return{epochNs:No(se(t,Ey),a,"compatible"),formatter:wy(t,lD)}}if(po(i)){const a=se(i,Dt),d=se(t,L_);if(a!==d)throw new RangeError(`cannot format PlainYearMonth with calendar ${a} in locale with calendar ${d}`);const f=ui(se(i,vn),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:No(se(t,Ey),f,"compatible"),formatter:wy(t,oD)}}if(Ol(i)){const a=se(i,Dt),d=se(t,L_);if(a!==d)throw new RangeError(`cannot format PlainMonthDay with calendar ${a} in locale with calendar ${d}`);const f=ui(se(i,vn),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:No(se(t,Ey),f,"compatible"),formatter:wy(t,sD)}}if(Pr(i)){const a=se(i,Dt),d=se(t,L_);if(a!=="iso8601"&&a!==d)throw new RangeError(`cannot format PlainDate with calendar ${a} in locale with calendar ${d}`);const f=ui(se(i,vn),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:No(se(t,Ey),f,"compatible"),formatter:wy(t,aD)}}if(sr(i)){const a=se(i,Dt),d=se(t,L_);if(a!=="iso8601"&&a!==d)throw new RangeError(`cannot format PlainDateTime with calendar ${a} in locale with calendar ${d}`);const f=se(i,mr);return{epochNs:No(se(t,Ey),f,"compatible"),formatter:wy(t,cD)}}if(Zn(i))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return fo(i)?{epochNs:se(i,_n),formatter:wy(t,uD)}:{}}function nI(i){const t=Object.create(null);return t.years=se(i,as),t.months=se(i,os),t.weeks=se(i,Hs),t.days=se(i,ss),t.hours=se(i,ls),t.minutes=se(i,cs),t.seconds=se(i,us),t.milliseconds=se(i,hs),t.microseconds=se(i,ds),t.nanoseconds=se(i,Ws),t}dv.prototype.constructor=wc,Object.defineProperty(wc,"prototype",{value:dv.prototype,writable:!1,enumerable:!1,configurable:!1}),wc.supportedLocalesOf=hv.supportedLocalesOf,sf(wc,"Intl.DateTimeFormat");const{format:T6,formatToParts:S6}=Intl.DurationFormat?.prototype??Object.create(null);function iI(i){Intl.DurationFormat.prototype.resolvedOptions.call(this);const t=nI(Tc(i));return T6.call(this,t)}Intl.DurationFormat?.prototype&&(Intl.DurationFormat.prototype.format=iI,Intl.DurationFormat.prototype.formatToParts=function(i){Intl.DurationFormat.prototype.resolvedOptions.call(this);const t=nI(Tc(i));return S6.call(this,t)});class cT{constructor(t){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");ID(this,Ex(t))}get epochMilliseconds(){return ot(this,fo),Mc(se(this,_n),"floor")}get epochNanoseconds(){return ot(this,fo),YD(re.BigInt(se(this,_n)))}add(t){return ot(this,fo),XE("add",this,t)}subtract(t){return ot(this,fo),XE("subtract",this,t)}until(t,a=void 0){return ot(this,fo),GE("until",this,t,a)}since(t,a=void 0){return ot(this,fo),GE("since",this,t,a)}round(t){if(ot(this,fo),t===void 0)throw new TypeError("options parameter is required");const a=typeof t=="string"?rg("smallestUnit",t):nn(t),d=a0(a),f=Su(a,"halfExpand"),g=Qs(a,"smallestUnit","time",tf);return o0(d,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[g],!0),bh(Kw(se(this,_n),d,g,f))}equals(t){ot(this,fo);const a=z_(t),d=se(this,_n),f=se(a,_n);return re.equal(re.BigInt(d),re.BigInt(f))}toString(t=void 0){ot(this,fo);const a=nn(t),d=Ev(a),f=Su(a,"trunc"),g=Qs(a,"smallestUnit","time",void 0);if(g==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let _=a.timeZone;_!==void 0&&(_=ms(_));const{precision:c,unit:A,increment:D}=Av(g,d);return LE(bh(Kw(se(this,_n),D,A,f)),_,c)}toJSON(){return ot(this,fo),LE(this,void 0,"auto")}toLocaleString(t=void 0,a=void 0){return ot(this,fo),new wc(t,a).format(this)}valueOf(){Dp("Instant")}toZonedDateTimeISO(t){ot(this,fo);const a=ms(t);return Oo(se(this,_n),a,"iso8601")}static fromEpochMilliseconds(t){return bh(wh(Hx(t)))}static fromEpochNanoseconds(t){return bh(Ex(t))}static from(t){return z_(t)}static compare(t,a){const d=z_(t),f=z_(a),g=se(d,_n),_=se(f,_n);return re.lessThan(g,_)?-1:re.greaterThan(g,_)?1:0}}sf(cT,"Temporal.Instant");class uT{constructor(t,a,d,f="iso8601"){const g=Mn(t),_=Mn(a),c=Mn(d),A=vs(f===void 0?"iso8601":Na(f));tg(g,_,c),ED(this,{year:g,month:_,day:c},A)}get calendarId(){return ot(this,Pr),se(this,Dt)}get era(){return ns(this,"era")}get eraYear(){return ns(this,"eraYear")}get year(){return ns(this,"year")}get month(){return ns(this,"month")}get monthCode(){return ns(this,"monthCode")}get day(){return ns(this,"day")}get dayOfWeek(){return ns(this,"dayOfWeek")}get dayOfYear(){return ns(this,"dayOfYear")}get weekOfYear(){return ns(this,"weekOfYear")?.week}get yearOfWeek(){return ns(this,"weekOfYear")?.year}get daysInWeek(){return ns(this,"daysInWeek")}get daysInMonth(){return ns(this,"daysInMonth")}get daysInYear(){return ns(this,"daysInYear")}get monthsInYear(){return ns(this,"monthsInYear")}get inLeapYear(){return ns(this,"inLeapYear")}with(t,a=void 0){if(ot(this,Pr),!Fr(t))throw new TypeError("invalid argument");r0(t);const d=se(this,Dt);let f=gs(d,se(this,vn));return f=eg(d,f,Vl(d,t,["year","month","monthCode","day"],[],"partial")),ps(Sp(d,f,si(nn(a))),d)}withCalendar(t){ot(this,Pr);const a=Iv(t);return ps(se(this,vn),a)}add(t,a=void 0){return ot(this,Pr),QE("add",this,t,a)}subtract(t,a=void 0){return ot(this,Pr),QE("subtract",this,t,a)}until(t,a=void 0){return ot(this,Pr),ZE("until",this,t,a)}since(t,a=void 0){return ot(this,Pr),ZE("since",this,t,a)}equals(t){ot(this,Pr);const a=N_(t);return Dh(se(this,vn),se(a,vn))===0&&Mh(se(this,Dt),se(a,Dt))}toString(t=void 0){return ot(this,Pr),NE(this,Sv(nn(t)))}toJSON(){return ot(this,Pr),NE(this)}toLocaleString(t=void 0,a=void 0){return ot(this,Pr),new wc(t,a).format(this)}valueOf(){Dp("PlainDate")}toPlainDateTime(t=void 0){ot(this,Pr);const a=SD(t);return bc(ui(se(this,vn),a),se(this,Dt))}toZonedDateTime(t){let a,d;if(ot(this,Pr),Fr(t)){const _=t.timeZone;_===void 0?a=ms(t):(a=ms(_),d=t.plainTime)}else a=ms(t);const f=se(this,vn);let g;return d===void 0?g=fp(a,f):(d=mp(d),g=No(a,ui(f,se(d,zr)),"compatible")),Oo(g,a,se(this,Dt))}toPlainYearMonth(){ot(this,Pr);const t=se(this,Dt);return Ry(ov(t,gs(t,se(this,vn)),"constrain"),t)}toPlainMonthDay(){ot(this,Pr);const t=se(this,Dt);return Cy(bx(t,gs(t,se(this,vn)),"constrain"),t)}static from(t,a=void 0){return N_(t,a)}static compare(t,a){const d=N_(t),f=N_(a);return Dh(se(d,vn),se(f,vn))}}function ns(i,t){ot(i,Pr);const a=se(i,vn);return Mv(i).isoToDate(a,{[t]:!0})[t]}sf(uT,"Temporal.PlainDate");class hT{constructor(t,a,d,f=0,g=0,_=0,c=0,A=0,D=0,O="iso8601"){const z=Mn(t),V=Mn(a),H=Mn(d),ne=f===void 0?0:Mn(f),ae=g===void 0?0:Mn(g),q=_===void 0?0:Mn(_),he=c===void 0?0:Mn(c),Ae=A===void 0?0:Mn(A),Ee=D===void 0?0:Mn(D),Fe=vs(O===void 0?"iso8601":Na(O));nT(z,V,H,ne,ae,q,he,Ae,Ee),AD(this,{isoDate:{year:z,month:V,day:H},time:{hour:ne,minute:ae,second:q,millisecond:he,microsecond:Ae,nanosecond:Ee}},Fe)}get calendarId(){return ot(this,sr),se(this,Dt)}get year(){return is(this,"year")}get month(){return is(this,"month")}get monthCode(){return is(this,"monthCode")}get day(){return is(this,"day")}get hour(){return Ty(this,"hour")}get minute(){return Ty(this,"minute")}get second(){return Ty(this,"second")}get millisecond(){return Ty(this,"millisecond")}get microsecond(){return Ty(this,"microsecond")}get nanosecond(){return Ty(this,"nanosecond")}get era(){return is(this,"era")}get eraYear(){return is(this,"eraYear")}get dayOfWeek(){return is(this,"dayOfWeek")}get dayOfYear(){return is(this,"dayOfYear")}get weekOfYear(){return is(this,"weekOfYear")?.week}get yearOfWeek(){return is(this,"weekOfYear")?.year}get daysInWeek(){return is(this,"daysInWeek")}get daysInYear(){return is(this,"daysInYear")}get daysInMonth(){return is(this,"daysInMonth")}get monthsInYear(){return is(this,"monthsInYear")}get inLeapYear(){return is(this,"inLeapYear")}with(t,a=void 0){if(ot(this,sr),!Fr(t))throw new TypeError("invalid argument");r0(t);const d=se(this,Dt),f=se(this,mr);let g={...gs(d,f.isoDate),...f.time};return g=eg(d,g,Vl(d,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],"partial")),bc(Cv(d,g,si(nn(a))),d)}withPlainTime(t=void 0){ot(this,sr);const a=SD(t);return bc(ui(se(this,mr).isoDate,a),se(this,Dt))}withCalendar(t){ot(this,sr);const a=Iv(t);return bc(se(this,mr),a)}add(t,a=void 0){return ot(this,sr),KE("add",this,t,a)}subtract(t,a=void 0){return ot(this,sr),KE("subtract",this,t,a)}until(t,a=void 0){return ot(this,sr),$E("until",this,t,a)}since(t,a=void 0){return ot(this,sr),$E("since",this,t,a)}round(t){if(ot(this,sr),t===void 0)throw new TypeError("options parameter is required");const a=typeof t=="string"?rg("smallestUnit",t):nn(t),d=a0(a),f=Su(a,"halfExpand"),g=Qs(a,"smallestUnit","time",tf,["day"]),_={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[g];o0(d,_,_===1);const c=se(this,mr);return bc(d===1&&g==="nanosecond"?c:Jw(c,d,g,f),se(this,Dt))}equals(t){ot(this,sr);const a=P_(t);return Yy(se(this,mr),se(a,mr))===0&&Mh(se(this,Dt),se(a,Dt))}toString(t=void 0){ot(this,sr);const a=nn(t),d=Sv(a),f=Ev(a),g=Su(a,"trunc"),_=Qs(a,"smallestUnit","time",void 0);if(_==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:c,unit:A,increment:D}=Av(_,f),O=Jw(se(this,mr),D,A,g);return ng(O),lv(O,se(this,Dt),c,d)}toJSON(){return ot(this,sr),lv(se(this,mr),se(this,Dt),"auto")}toLocaleString(t=void 0,a=void 0){return ot(this,sr),new wc(t,a).format(this)}valueOf(){Dp("PlainDateTime")}toZonedDateTime(t,a=void 0){ot(this,sr);const d=ms(t),f=H_(nn(a));return Oo(No(d,se(this,mr),f),d,se(this,Dt))}toPlainDate(){return ot(this,sr),ps(se(this,mr).isoDate,se(this,Dt))}toPlainTime(){return ot(this,sr),Bd(se(this,mr).time)}static from(t,a=void 0){return P_(t,a)}static compare(t,a){const d=P_(t),f=P_(a);return Yy(se(d,mr),se(f,mr))}}function is(i,t){ot(i,sr);const a=se(i,mr).isoDate;return Mv(i).isoToDate(a,{[t]:!0})[t]}function Ty(i,t){return ot(i,sr),se(i,mr).time[t]}sf(hT,"Temporal.PlainDateTime");class Hy{constructor(t=0,a=0,d=0,f=0,g=0,_=0,c=0,A=0,D=0,O=0){const z=t===void 0?0:vu(t),V=a===void 0?0:vu(a),H=d===void 0?0:vu(d),ne=f===void 0?0:vu(f),ae=g===void 0?0:vu(g),q=_===void 0?0:vu(_),he=c===void 0?0:vu(c),Ae=A===void 0?0:vu(A),Ee=D===void 0?0:vu(D),Fe=O===void 0?0:vu(O);t1(z,V,H,ne,ae,q,he,Ae,Ee,Fe),of(this),Vn(this,as,z),Vn(this,os,V),Vn(this,Hs,H),Vn(this,ss,ne),Vn(this,ls,ae),Vn(this,cs,q),Vn(this,us,he),Vn(this,hs,Ae),Vn(this,ds,Ee),Vn(this,Ws,Fe)}get years(){return ot(this,Nr),se(this,as)}get months(){return ot(this,Nr),se(this,os)}get weeks(){return ot(this,Nr),se(this,Hs)}get days(){return ot(this,Nr),se(this,ss)}get hours(){return ot(this,Nr),se(this,ls)}get minutes(){return ot(this,Nr),se(this,cs)}get seconds(){return ot(this,Nr),se(this,us)}get milliseconds(){return ot(this,Nr),se(this,hs)}get microseconds(){return ot(this,Nr),se(this,ds)}get nanoseconds(){return ot(this,Nr),se(this,Ws)}get sign(){return ot(this,Nr),Tx(this)}get blank(){return ot(this,Nr),Tx(this)===0}with(t){ot(this,Nr);const a=TD(t),{years:d=se(this,as),months:f=se(this,os),weeks:g=se(this,Hs),days:_=se(this,ss),hours:c=se(this,ls),minutes:A=se(this,cs),seconds:D=se(this,us),milliseconds:O=se(this,hs),microseconds:z=se(this,ds),nanoseconds:V=se(this,Ws)}=a;return new Hy(d,f,g,_,c,A,D,O,z,V)}negated(){return ot(this,Nr),nl(this)}abs(){return ot(this,Nr),new Hy(Math.abs(se(this,as)),Math.abs(se(this,os)),Math.abs(se(this,Hs)),Math.abs(se(this,ss)),Math.abs(se(this,ls)),Math.abs(se(this,cs)),Math.abs(se(this,us)),Math.abs(se(this,hs)),Math.abs(se(this,ds)),Math.abs(se(this,Ws)))}add(t){return ot(this,Nr),WE("add",this,t)}subtract(t){return ot(this,Nr),WE("subtract",this,t)}round(t){if(ot(this,Nr),t===void 0)throw new TypeError("options parameter is required");const a=Pd(this),d=typeof t=="string"?rg("smallestUnit",t):nn(t);let f=Qs(d,"largestUnit","datetime",void 0,["auto"]),{plainRelativeTo:g,zonedRelativeTo:_}=lw(d);const c=a0(d),A=Su(d,"halfExpand");let D=Qs(d,"smallestUnit","datetime",void 0),O=!0;D||(O=!1,D="nanosecond");const z=qd(a,D);let V=!0;if(f||(V=!1,f=z),f==="auto"&&(f=z),!O&&!V)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(qd(f,D)!==f)throw new RangeError(`largestUnit ${f} cannot be smaller than smallestUnit ${D}`);const H={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[D];if(H!==void 0&&o0(c,H,!1),c>1&&zd(D)==="date"&&f!==D)throw new RangeError("For calendar units with roundingIncrement > 1, use largestUnit = smallestUnit");if(_){let ae=Ay(this);const q=se(_,Di),he=se(_,Dt),Ae=se(_,_n);return ae=$D(Ae,B_(Ae,q,he,ae),q,he,f,c,D,A),zd(f)==="date"&&(f="hour"),xc(ae,f)}if(g){let ae=xh(this);const q=$y({hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},ae.time),he=se(g,vn),Ae=se(g,Dt),Ee=Fl(Ae,he,Lo(ae.date,q.deltaDays),"constrain");return ae=ZD(ui(he,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),ui(Ee,q),Ae,f,c,D,A),xc(ae,f)}if(gh(a))throw new RangeError(`a starting point is required for ${a}s balancing`);if(gh(f))throw new RangeError(`a starting point is required for ${f}s balancing`);let ne=xh(this);if(D==="day"){const{quotient:ae,remainder:q}=ne.time.divmod(yx);let he=ne.date.days+ae+W_(q,"day");he=gp(he,c,A),ne=Hd({years:0,months:0,weeks:0,days:he},$n.ZERO)}else ne=Hd({years:0,months:0,weeks:0,days:0},Sx(ne.time,c,D,A));return xc(ne,f)}total(t){if(ot(this,Nr),t===void 0)throw new TypeError("options argument is required");const a=typeof t=="string"?rg("unit",t):nn(t);let{plainRelativeTo:d,zonedRelativeTo:f}=lw(a);const g=Qs(a,"unit","datetime",tf);if(f){const c=Ay(this),A=se(f,Di),D=se(f,Dt),O=se(f,_n);return function(z,V,H,ne,ae){return zd(ae)==="time"?W_($n.fromEpochNsDiff(V,z),ae):UE(UD(z,V,H,ne,ae),V,Ac(H,z),H,ne,ae)}(O,B_(O,A,D,c),A,D,g)}if(d){const c=xh(this);let A=$y({hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},c.time);const D=se(d,vn),O=se(d,Dt),z=Fl(O,D,Lo(c.date,A.deltaDays),"constrain");return function(V,H,ne,ae){if(Yy(V,H)==0)return 0;ng(V),ng(H);const q=VD(V,H,ne,ae);return ae==="nanosecond"?re.toNumber(q.time.totalNs):UE(q,go(H),V,null,ne,ae)}(ui(D,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),ui(z,A),O,g)}const _=Pd(this);if(gh(_))throw new RangeError(`a starting point is required for ${_}s total`);if(gh(g))throw new RangeError(`a starting point is required for ${g}s total`);return W_(xh(this).time,g)}toString(t=void 0){ot(this,Nr);const a=nn(t),d=Ev(a),f=Su(a,"trunc"),g=Qs(a,"smallestUnit","time",void 0);if(g==="hour"||g==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');const{precision:_,unit:c,increment:A}=Av(g,d);if(c==="nanosecond"&&A===1)return Gb(this,_);const D=Pd(this);let O=Ay(this);const z=Sx(O.time,A,c,f);return O=Hd(O.date,z),Gb(xc(O,qd(D,"second")),_)}toJSON(){return ot(this,Nr),Gb(this,"auto")}toLocaleString(t=void 0,a=void 0){if(ot(this,Nr),typeof Intl.DurationFormat=="function"){const d=new Intl.DurationFormat(t,a);return iI.call(d,this)}return console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),Gb(this,"auto")}valueOf(){Dp("Duration")}static from(t){return Tc(t)}static compare(t,a,d=void 0){const f=Tc(t),g=Tc(a),_=nn(d),{plainRelativeTo:c,zonedRelativeTo:A}=lw(_);if(se(f,as)===se(g,as)&&se(f,os)===se(g,os)&&se(f,Hs)===se(g,Hs)&&se(f,ss)===se(g,ss)&&se(f,ls)===se(g,ls)&&se(f,cs)===se(g,cs)&&se(f,us)===se(g,us)&&se(f,hs)===se(g,hs)&&se(f,ds)===se(g,ds)&&se(f,Ws)===se(g,Ws))return 0;const D=Pd(f),O=Pd(g),z=Ay(f),V=Ay(g);if(A&&(zd(D)==="date"||zd(O)==="date")){const he=se(A,Di),Ae=se(A,Dt),Ee=se(A,_n),Fe=B_(Ee,he,Ae,z),De=B_(Ee,he,Ae,V);return Xs(re.toNumber(re.subtract(Fe,De)))}let H=z.date.days,ne=V.date.days;if(gh(D)||gh(O)){if(!c)throw new RangeError("A starting point is required for years, months, or weeks comparison");H=VE(z.date,c),ne=VE(V.date,c)}const ae=z.time.add24HourDays(H),q=V.time.add24HourDays(ne);return ae.cmp(q)}}sf(Hy,"Temporal.Duration");class dT{constructor(t,a,d="iso8601",f=1972){const g=Mn(t),_=Mn(a),c=vs(d===void 0?"iso8601":Na(d)),A=Mn(f);tg(A,g,_),MD(this,{year:A,month:g,day:_},c)}get monthCode(){return iA(this,"monthCode")}get day(){return iA(this,"day")}get calendarId(){return ot(this,Ol),se(this,Dt)}with(t,a=void 0){if(ot(this,Ol),!Fr(t))throw new TypeError("invalid argument");r0(t);const d=se(this,Dt);let f=gs(d,se(this,vn),"month-day");return f=eg(d,f,Vl(d,t,["year","month","monthCode","day"],[],"partial")),Cy(bx(d,f,si(nn(a))),d)}equals(t){ot(this,Ol);const a=kE(t);return Dh(se(this,vn),se(a,vn))===0&&Mh(se(this,Dt),se(a,Dt))}toString(t=void 0){return ot(this,Ol),zE(this,Sv(nn(t)))}toJSON(){return ot(this,Ol),zE(this)}toLocaleString(t=void 0,a=void 0){return ot(this,Ol),new wc(t,a).format(this)}valueOf(){Dp("PlainMonthDay")}toPlainDate(t){if(ot(this,Ol),!Fr(t))throw new TypeError("argument should be an object");const a=se(this,Dt);return ps(Sp(a,eg(a,gs(a,se(this,vn),"month-day"),Vl(a,t,["year"],[],[])),"constrain"),a)}static from(t,a=void 0){return kE(t,a)}}function iA(i,t){ot(i,Ol);const a=se(i,vn);return Mv(i).isoToDate(a,{[t]:!0})[t]}function uw(i){return Ac(i,n2())}sf(dT,"Temporal.PlainMonthDay");const rI={instant:()=>bh(n2()),plainDateTimeISO:(i=A_())=>bc(uw(ms(i)),"iso8601"),plainDateISO:(i=A_())=>ps(uw(ms(i)).isoDate,"iso8601"),plainTimeISO:(i=A_())=>Bd(uw(ms(i)).time),timeZoneId:()=>A_(),zonedDateTimeISO:(i=A_())=>{const t=ms(i);return Oo(n2(),t,"iso8601")},[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(rI,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});class Pv{constructor(t=0,a=0,d=0,f=0,g=0,_=0){const c=t===void 0?0:Mn(t),A=a===void 0?0:Mn(a),D=d===void 0?0:Mn(d),O=f===void 0?0:Mn(f),z=g===void 0?0:Mn(g),V=_===void 0?0:Mn(_);e1(c,A,D,O,z,V),CD(this,{hour:c,minute:A,second:D,millisecond:O,microsecond:z,nanosecond:V})}get hour(){return ot(this,Yr),se(this,zr).hour}get minute(){return ot(this,Yr),se(this,zr).minute}get second(){return ot(this,Yr),se(this,zr).second}get millisecond(){return ot(this,Yr),se(this,zr).millisecond}get microsecond(){return ot(this,Yr),se(this,zr).microsecond}get nanosecond(){return ot(this,Yr),se(this,zr).nanosecond}with(t,a=void 0){if(ot(this,Yr),!Fr(t))throw new TypeError("invalid argument");r0(t);const d=Yw(t,"partial"),f=Yw(this);let{hour:g,minute:_,second:c,millisecond:A,microsecond:D,nanosecond:O}=Object.assign(f,d);const z=si(nn(a));return{hour:g,minute:_,second:c,millisecond:A,microsecond:D,nanosecond:O}=Qx(g,_,c,A,D,O,z),new Pv(g,_,c,A,D,O)}add(t){return ot(this,Yr),JE("add",this,t)}subtract(t){return ot(this,Yr),JE("subtract",this,t)}until(t,a=void 0){return ot(this,Yr),YE("until",this,t,a)}since(t,a=void 0){return ot(this,Yr),YE("since",this,t,a)}round(t){if(ot(this,Yr),t===void 0)throw new TypeError("options parameter is required");const a=typeof t=="string"?rg("smallestUnit",t):nn(t),d=a0(a),f=Su(a,"halfExpand"),g=Qs(a,"smallestUnit","time",tf);return o0(d,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[g],!1),Bd(e2(se(this,zr),d,g,f))}equals(t){ot(this,Yr);const a=mp(t);return t2(se(this,zr),se(a,zr))===0}toString(t=void 0){ot(this,Yr);const a=nn(t),d=Ev(a),f=Su(a,"trunc"),g=Qs(a,"smallestUnit","time",void 0);if(g==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:_,unit:c,increment:A}=Av(g,d);return PE(e2(se(this,zr),A,c,f),_)}toJSON(){return ot(this,Yr),PE(se(this,zr),"auto")}toLocaleString(t=void 0,a=void 0){return ot(this,Yr),new wc(t,a).format(this)}valueOf(){Dp("PlainTime")}static from(t,a=void 0){return mp(t,a)}static compare(t,a){const d=mp(t),f=mp(a);return t2(se(d,zr),se(f,zr))}}sf(Pv,"Temporal.PlainTime");class fT{constructor(t,a,d="iso8601",f=1){const g=Mn(t),_=Mn(a),c=vs(d===void 0?"iso8601":Na(d)),A=Mn(f);tg(g,_,A),DD(this,{year:g,month:_,day:A},c)}get year(){return Od(this,"year")}get month(){return Od(this,"month")}get monthCode(){return Od(this,"monthCode")}get calendarId(){return ot(this,po),se(this,Dt)}get era(){return Od(this,"era")}get eraYear(){return Od(this,"eraYear")}get daysInMonth(){return Od(this,"daysInMonth")}get daysInYear(){return Od(this,"daysInYear")}get monthsInYear(){return Od(this,"monthsInYear")}get inLeapYear(){return Od(this,"inLeapYear")}with(t,a=void 0){if(ot(this,po),!Fr(t))throw new TypeError("invalid argument");r0(t);const d=se(this,Dt);let f=gs(d,se(this,vn),"year-month");return f=eg(d,f,Vl(d,t,["year","month","monthCode"],[],"partial")),Ry(ov(d,f,si(nn(a))),d)}add(t,a=void 0){return ot(this,po),eA("add",this,t,a)}subtract(t,a=void 0){return ot(this,po),eA("subtract",this,t,a)}until(t,a=void 0){return ot(this,po),qE("until",this,t,a)}since(t,a=void 0){return ot(this,po),qE("since",this,t,a)}equals(t){ot(this,po);const a=F_(t);return Dh(se(this,vn),se(a,vn))===0&&Mh(se(this,Dt),se(a,Dt))}toString(t=void 0){return ot(this,po),FE(this,Sv(nn(t)))}toJSON(){return ot(this,po),FE(this)}toLocaleString(t=void 0,a=void 0){return ot(this,po),new wc(t,a).format(this)}valueOf(){Dp("PlainYearMonth")}toPlainDate(t){if(ot(this,po),!Fr(t))throw new TypeError("argument should be an object");const a=se(this,Dt);return ps(Sp(a,eg(a,gs(a,se(this,vn),"year-month"),Vl(a,t,["day"],[],[])),"constrain"),a)}static from(t,a=void 0){return F_(t,a)}static compare(t,a){const d=F_(t),f=F_(a);return Dh(se(d,vn),se(f,vn))}}function Od(i,t){ot(i,po);const a=se(i,vn);return Mv(i).isoToDate(a,{[t]:!0})[t]}sf(fT,"Temporal.PlainYearMonth");const E6=wc.prototype.resolvedOptions;class pT{constructor(t,a,d="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const f=Ex(t);let g=Na(a);const{tzName:_,offsetMinutes:c}=vp(g);if(c===void 0){const A=xx(_);if(!A)throw new RangeError(`unknown time zone ${_}`);g=A.identifier}else g=J2(c);RD(this,f,g,vs(d===void 0?"iso8601":Na(d)))}get calendarId(){return ot(this,Zn),se(this,Dt)}get timeZoneId(){return ot(this,Zn),se(this,Di)}get year(){return rs(this,"year")}get month(){return rs(this,"month")}get monthCode(){return rs(this,"monthCode")}get day(){return rs(this,"day")}get hour(){return Sy(this,"hour")}get minute(){return Sy(this,"minute")}get second(){return Sy(this,"second")}get millisecond(){return Sy(this,"millisecond")}get microsecond(){return Sy(this,"microsecond")}get nanosecond(){return Sy(this,"nanosecond")}get era(){return rs(this,"era")}get eraYear(){return rs(this,"eraYear")}get epochMilliseconds(){return ot(this,Zn),Mc(se(this,_n),"floor")}get epochNanoseconds(){return ot(this,Zn),YD(se(this,_n))}get dayOfWeek(){return rs(this,"dayOfWeek")}get dayOfYear(){return rs(this,"dayOfYear")}get weekOfYear(){return rs(this,"weekOfYear")?.week}get yearOfWeek(){return rs(this,"weekOfYear")?.year}get hoursInDay(){ot(this,Zn);const t=se(this,Di),a=fh(this).isoDate,d=tl(a.year,a.month,a.day+1),f=fp(t,a),g=fp(t,d);return W_($n.fromEpochNsDiff(g,f),"hour")}get daysInWeek(){return rs(this,"daysInWeek")}get daysInMonth(){return rs(this,"daysInMonth")}get daysInYear(){return rs(this,"daysInYear")}get monthsInYear(){return rs(this,"monthsInYear")}get inLeapYear(){return rs(this,"inLeapYear")}get offset(){return ot(this,Zn),qw(Vd(se(this,Di),se(this,_n)))}get offsetNanoseconds(){return ot(this,Zn),Vd(se(this,Di),se(this,_n))}with(t,a=void 0){if(ot(this,Zn),!Fr(t))throw new TypeError("invalid zoned-date-time-like");r0(t);const d=se(this,Dt),f=se(this,Di),g=Vd(f,se(this,_n)),_=fh(this);let c={...gs(d,_.isoDate),..._.time,offset:qw(g)};c=eg(d,c,Vl(d,t,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset"],"partial"));const A=nn(a),D=H_(A),O=Jb(A,"prefer"),z=Cv(d,c,si(A)),V=s0(c.offset);return Oo(vx(z.isoDate,z.time,"option",V,f,D,O,!1),f,d)}withPlainTime(t=void 0){ot(this,Zn);const a=se(this,Di),d=se(this,Dt),f=fh(this).isoDate;let g;return g=t===void 0?fp(a,f):No(a,ui(f,se(mp(t),zr)),"compatible"),Oo(g,a,d)}withTimeZone(t){ot(this,Zn);const a=ms(t);return Oo(se(this,_n),a,se(this,Dt))}withCalendar(t){ot(this,Zn);const a=Iv(t);return Oo(se(this,_n),se(this,Di),a)}add(t,a=void 0){return ot(this,Zn),tA("add",this,t,a)}subtract(t,a=void 0){return ot(this,Zn),tA("subtract",this,t,a)}until(t,a=void 0){return ot(this,Zn),HE("until",this,t,a)}since(t,a=void 0){return ot(this,Zn),HE("since",this,t,a)}round(t){if(ot(this,Zn),t===void 0)throw new TypeError("options parameter is required");const a=typeof t=="string"?rg("smallestUnit",t):nn(t),d=a0(a),f=Su(a,"halfExpand"),g=Qs(a,"smallestUnit","time",tf,["day"]),_={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[g];if(o0(d,_,_===1),g==="nanosecond"&&d===1)return Oo(se(this,_n),se(this,Di),se(this,Dt));const c=se(this,Di),A=se(this,_n),D=fh(this);let O;if(g==="day"){const z=D.isoDate,V=tl(z.year,z.month,z.day+1),H=fp(c,z),ne=fp(c,V),ae=re.subtract(ne,H);O=$n.fromEpochNsDiff(A,H).round(ae,f).addToEpochNs(H)}else{const z=Jw(D,d,g,f),V=Vd(c,A);O=vx(z.isoDate,z.time,"option",V,c,"compatible","prefer",!1)}return Oo(O,c,se(this,Dt))}equals(t){ot(this,Zn);const a=j_(t),d=se(this,_n),f=se(a,_n);return!!re.equal(re.BigInt(d),re.BigInt(f))&&!!kD(se(this,Di),se(a,Di))&&Mh(se(this,Dt),se(a,Dt))}toString(t=void 0){ot(this,Zn);const a=nn(t),d=Sv(a),f=Ev(a),g=function(V){return Wd(V,"offset",["auto","never"],"auto")}(a),_=Su(a,"trunc"),c=Qs(a,"smallestUnit","time",void 0);if(c==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const A=function(V){return Wd(V,"timeZoneName",["auto","never","critical"],"auto")}(a),{precision:D,unit:O,increment:z}=Av(c,f);return jE(this,D,d,A,g,{unit:O,increment:z,roundingMode:_})}toLocaleString(t=void 0,a=void 0){ot(this,Zn);const d=nn(a),f=Object.create(null);if(function(A,D,O,z){if(D==null)return;const V=Reflect.ownKeys(D);for(let H=0;H<V.length;H++){const ne=V[H];if(!O.some(ae=>Object.is(ae,ne))&&Object.prototype.propertyIsEnumerable.call(D,ne)){const ae=D[ne];A[ne]=ae}}}(f,d,["timeZone"]),d.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");if(f.year===void 0&&f.month===void 0&&f.day===void 0&&f.era===void 0&&f.weekday===void 0&&f.dateStyle===void 0&&f.hour===void 0&&f.minute===void 0&&f.second===void 0&&f.fractionalSecondDigits===void 0&&f.timeStyle===void 0&&f.dayPeriod===void 0&&f.timeZoneName===void 0&&(f.timeZoneName="short"),f.timeZone=se(this,Di),BE(f.timeZone))throw new RangeError("toLocaleString does not currently support offset time zones");const g=new wc(t,f),_=E6.call(g).calendar,c=se(this,Dt);if(c!=="iso8601"&&_!=="iso8601"&&!Mh(_,c))throw new RangeError(`cannot format ZonedDateTime with calendar ${c} in locale with calendar ${_}`);return g.format(bh(se(this,_n)))}toJSON(){return ot(this,Zn),jE(this,"auto")}valueOf(){Dp("ZonedDateTime")}startOfDay(){ot(this,Zn);const t=se(this,Di);return Oo(fp(t,fh(this).isoDate),t,se(this,Dt))}getTimeZoneTransition(t){ot(this,Zn);const a=se(this,Di);if(t===void 0)throw new TypeError("options parameter is required");const d=Wd(typeof t=="string"?rg("direction",t):nn(t),"direction",["next","previous"],tf);if(d===void 0)throw new TypeError("direction option is required");if(BE(a)||a==="UTC")return null;const f=se(this,_n),g=d==="next"?tT(a,f):Ww(a,f);return g===null?null:Oo(g,a,se(this,Dt))}toInstant(){return ot(this,Zn),bh(se(this,_n))}toPlainDate(){return ot(this,Zn),ps(fh(this).isoDate,se(this,Dt))}toPlainTime(){return ot(this,Zn),Bd(fh(this).time)}toPlainDateTime(){return ot(this,Zn),bc(fh(this),se(this,Dt))}static from(t,a=void 0){return j_(t,a)}static compare(t,a){const d=j_(t),f=j_(a),g=se(d,_n),_=se(f,_n);return re.lessThan(re.BigInt(g),re.BigInt(_))?-1:re.greaterThan(re.BigInt(g),re.BigInt(_))?1:0}}function fh(i){return Ac(se(i,Di),se(i,_n))}function rs(i,t){ot(i,Zn);const a=fh(i).isoDate;return Mv(i).isoToDate(a,{[t]:!0})[t]}function Sy(i,t){return ot(i,Zn),fh(i).time[t]}sf(pT,"Temporal.ZonedDateTime");var rA=Object.freeze({__proto__:null,Duration:Hy,Instant:cT,Now:rI,PlainDate:uT,PlainDateTime:hT,PlainMonthDay:dT,PlainTime:Pv,PlainYearMonth:fT,ZonedDateTime:pT});const A6=[cT,uT,hT,Hy,dT,Pv,fT,pT];for(const i of A6){const t=Object.getOwnPropertyDescriptor(i,"prototype");(t.configurable||t.enumerable||t.writable)&&(t.configurable=!1,t.enumerable=!1,t.writable=!1,Object.defineProperty(i,"prototype",t))}function M6({tripQueryVariables:i,setTripQueryVariables:t}){const a=ie.useContext(n0),d=rA.Instant.from(i.dateTime).toZonedDateTimeISO(a).toPlainDateTime().toString({smallestUnit:"minute",calendarName:"never"}),f=ie.useCallback(g=>{const _=rA.PlainDateTime.from(g.target.value).toZonedDateTime(a).toString({calendarName:"never",timeZoneName:"never"});t({...i,dateTime:_})},[i,t,a]);return Q.jsxs(Pi.Group,{children:[Q.jsx(Pi.Label,{column:"sm",htmlFor:"timePicker",title:"Time zone: "+a,children:"Time"}),Q.jsx(Pi.Control,{type:"datetime-local",id:"timePicker",size:"sm",onChange:f,value:d})]})}function C6({tripQueryVariables:i,setTripQueryVariables:t}){return Q.jsxs(Pi.Group,{children:[Q.jsx(Pi.Label,{column:"sm",htmlFor:"searchWindowInput",children:"Search window"}),Q.jsx(Pi.Control,{type:"number",id:"searchWindowInput",size:"sm",placeholder:"(in minutes)",min:1,className:"input-small",value:i.searchWindow||"",onChange:a=>t({...i,searchWindow:Number(a.target.value)>0?Number(a.target.value):void 0})})]})}function D6({tripQueryVariables:i,setTripQueryVariables:t}){return Q.jsxs(Pi.Group,{children:[Q.jsx(Pi.Label,{column:"sm",htmlFor:"accessSelect",children:"Access"}),Q.jsxs(Pi.Select,{id:"accessSelect",size:"sm",className:"input-medium",onChange:a=>{a.target.value!=="not_selected"?t({...i,modes:{...i.modes,accessMode:a.target.value}}):t({...i,modes:i.modes?.directMode||i.modes?.transportModes?{...i.modes,accessMode:void 0}:void 0})},value:i.modes?.accessMode||"not_selected",children:[Q.jsx("option",{value:"not_selected",children:"Not selected"}),Object.values(Ly).map(a=>Q.jsx("option",{value:a,children:a},a))]})]})}function I6({tripQueryVariables:i,setTripQueryVariables:t}){return Q.jsxs(Pi.Group,{children:[Q.jsx(Pi.Label,{column:"sm",htmlFor:"egressSelect",children:"Egress"}),Q.jsxs(Pi.Select,{id:"egressSelect",size:"sm",className:"input-medium",onChange:a=>{a.target.value!=="not_selected"?t({...i,modes:{...i.modes,egressMode:a.target.value}}):t({...i,modes:i.modes?.directMode||i.modes?.transportModes?{...i.modes,egressMode:void 0}:void 0})},value:i.modes?.egressMode||"not_selected",children:[Q.jsx("option",{value:"not_selected",children:"Not selected"}),Object.values(Ly).map(a=>Q.jsx("option",{value:a,children:a},a))]})]})}function R6({tripQueryVariables:i,setTripQueryVariables:t}){return Q.jsxs(Pi.Group,{children:[Q.jsx(Pi.Label,{column:"sm",htmlFor:"directModeSelect",children:"Direct mode"}),Q.jsxs(Pi.Select,{id:"directModeSelect",size:"sm",className:"input-medium",onChange:a=>{a.target.value!=="not_selected"?t({...i,modes:{...i.modes,directMode:a.target.value}}):t({...i,modes:i.modes?.accessMode||i.modes?.egressMode||i.modes?.transportModes?{...i.modes,directMode:void 0}:void 0})},value:i.modes?.directMode||"not_selected",children:[Q.jsx("option",{value:"not_selected",children:"Not selected"}),Object.values(Ly).map(a=>Q.jsx("option",{value:a,children:a},a))]})]})}const k6=({label:i,options:t,values:a,onChange:d})=>{const[f,g]=ie.useState(!1),_=ie.useRef(null),c=()=>{g(!f)},A=D=>{const O=D.target.value,z=D.target.checked;d(z?[...a,O]:a.filter(V=>V!==O))};return ie.useEffect(()=>{const D=O=>{_.current&&!_.current.contains(O.target)&&g(!1)};return f&&document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[f]),Q.jsxs("div",{className:`dropdown ${f?"show":""}`,ref:_,children:[Q.jsx(Pi.Label,{column:"sm",htmlFor:"multiSelectDropdown",children:i}),Q.jsx(Pi.Control,{type:"text",id:"multiSelectDropdown",size:"sm",className:"input-medium",value:a.length>0?a.join(", "):"Not selected",onClick:c,onChange:()=>{}}),Q.jsx("div",{style:{width:"20%"},className:`dropdown-menu ${f?"show":""}`,children:t.map(D=>Q.jsx(Pi.Check,{style:{marginLeft:"10%"},type:"checkbox",id:`option_${D.id}`,label:D.label,checked:a.includes(D.id),onChange:A,value:`${D.id}`},`${D.id}`))})]})};function O6({tripQueryVariables:i,setTripQueryVariables:t}){const a=ie.useMemo(()=>i?.modes?.transportModes?.map(f=>f?.transportMode).filter(f=>!!f)||[],[i.modes?.transportModes]),d=ie.useCallback(f=>{const g=f.filter(_=>_!=null).map(_=>({transportMode:_}));if(g.length===0){const _={...i.modes};delete _.transportModes;const c=_.directMode||_.accessMode||_.egressMode;t({...i,modes:c?_:void 0})}else{const _=i.modes?.accessMode||Ly.Foot,c=i.modes?.egressMode||Ly.Foot;t({...i,modes:{...i.modes,transportModes:g,accessMode:_,egressMode:c}})}},[i,t]);return Q.jsx(k6,{label:"Transit mode",options:Object.values(KA).map(f=>({id:f,label:f.toString()})),values:a,onChange:d})}function L6({tripQueryVariables:i,setTripQueryVariables:t}){return Q.jsxs(Pi.Group,{children:[Q.jsx(Pi.Label,{column:"sm",htmlFor:"numTripPatternsInput",children:"#"}),Q.jsx(Pi.Control,{type:"number",id:"numTripPatternsInput",size:"sm",placeholder:"12",min:1,className:"input-tiny",value:i.numTripPatterns||"",onChange:a=>t({...i,numTripPatterns:Number(a.target.value)>0?Number(a.target.value):void 0})})]})}function N6({tripQueryVariables:i,setTripQueryVariables:t}){return Q.jsxs(Pi.Group,{children:[Q.jsx(Pi.Label,{column:"sm",htmlFor:"itineraryDebugFilterSelect",children:"Filter debug"}),Q.jsxs(Pi.Select,{id:"itineraryDebugFilterSelect",size:"sm",className:"input-medium",onChange:a=>{if(a.target.value==="not_selected"){const d={...i.itineraryFilters};delete d.debug;const f=Object.keys(d).length>0;t({...i,itineraryFilters:f?d:void 0})}else t({...i,itineraryFilters:{...i.itineraryFilters,debug:a.target.value}})},value:i.itineraryFilters?.debug||"not_selected",children:[Q.jsx("option",{value:"not_selected",children:"Not selected"}),Object.values(QA).map(a=>Q.jsx("option",{value:a,children:a},a))]})]})}const P6="https://www.opentripplanner.org/debug-client-assets/2025/12/2025-12-04T11:44/assets/graphql-solid-B1mrnAEK.svg",aA="/graphiql?flavor=transmodel";function z6({tripQueryVariables:i}){const t=JC(i),a=encodeURIComponent(JSON.stringify(t)),d=KC(i),f=encodeURIComponent(d),g="Open in GraphiQL",_=aA.includes("?")?"&":"?",c=`${aA}${_}query=${f}&variables=${a}`;return Q.jsx(_p,{title:g,href:c,target:"_blank",children:Q.jsx("img",{alt:g,title:g,src:P6,width:"20",height:"20",className:"d-inline-block align-middle"})})}function F6({tripQueryVariables:i,setTripQueryVariables:t,onRoute:a,loading:d}){return Q.jsxs("div",{className:"box input-group search-bar",children:[Q.jsxs("div",{className:"input-family",children:[Q.jsx(TE,{label:"From",id:"fromInputField",locationFieldKey:"from",tripQueryVariables:i,setTripQueryVariables:t}),Q.jsx(v5,{tripQueryVariables:i,setTripQueryVariables:t}),Q.jsx(TE,{label:"To",id:"toInputField",locationFieldKey:"to",tripQueryVariables:i,setTripQueryVariables:t})]}),Q.jsxs("div",{className:"input-family",children:[Q.jsx(b5,{tripQueryVariables:i,setTripQueryVariables:t}),Q.jsx(M6,{tripQueryVariables:i,setTripQueryVariables:t})]}),Q.jsxs("div",{className:"input-family",children:[Q.jsx(L6,{tripQueryVariables:i,setTripQueryVariables:t}),Q.jsx(C6,{tripQueryVariables:i,setTripQueryVariables:t})]}),Q.jsxs("div",{className:"input-family",children:[Q.jsx(D6,{tripQueryVariables:i,setTripQueryVariables:t}),Q.jsx(O6,{tripQueryVariables:i,setTripQueryVariables:t}),Q.jsx(I6,{tripQueryVariables:i,setTripQueryVariables:t}),Q.jsx(R6,{tripQueryVariables:i,setTripQueryVariables:t})]}),Q.jsx(N6,{tripQueryVariables:i,setTripQueryVariables:t}),Q.jsx("div",{className:"search-bar-route-button-wrapper",children:Q.jsxs(b2,{children:[Q.jsxs(_p,{variant:"primary",onClick:()=>a(),disabled:d,children:[d&&Q.jsxs(Q.Fragment,{children:[Q.jsx(cC,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," "]}),"Route"]}),Q.jsx(z6,{tripQueryVariables:i})]})})]})}const aI=ie.createContext(void 0);function j6(){const i=ie.useContext(aI);if(!i)throw new Error("useTripSchema must be used within a TripSchemaProvider");return i}function Ys(i,t){return t.split(".").reduce((a,d)=>{if(a!=null){if(Array.isArray(a)){const f=Number(d);return Number.isNaN(f)?void 0:a[f]}else if(typeof a=="object")return a[d]}},i)}function Vm(i,t,a){const d=t.split(".");function f(g,_){const c=d[_],A=!isNaN(Number(c));if(_===d.length-1){if(Array.isArray(g)&&A){const V=[...g];return V[Number(c)]=a,V}if(hw(g)&&!A)return{...g,[c]:a};if(A){const V=Array.isArray(g)?[...g]:[];return V[Number(c)]=a,V}else return{...hw(g)?g:{},[c]:a}}const D=_+1,O=d[D],z=!isNaN(Number(O));if(Array.isArray(g)&&A){const V=[...g],H=g[Number(c)];return V[Number(c)]=f(H!==void 0?H:z?[]:{},D),V}else if(hw(g)&&!A){const V={...g},H=g[c];return V[c]=f(H!==void 0?H:z?[]:{},D),V}else if(A){const V=[];return V[Number(c)]=f(z?[]:{},D),V}else return{[c]:f(z?[]:{},D)}}return i==null&&(i=!isNaN(Number(d[0]))?[]:{}),f(i,0)}function hw(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}const B6="data:image/svg+xml,%3csvg%20height='36'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%2036%2036'%20width='36'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='20.75'%20cy='6'%20r='4'/%3e%3cpath%20d='m24.84%2026.23a1%201%200%200%200%20-1.4.29%2016.6%2016.6%200%200%201%20-3.51%203.77c-.33.25-1.56%201.2-2.08%201-.36-.11-.15-.82-.08-1.12l.53-1.57c.22-.64%204.05-12%204.47-13.3.62-1.9.35-3.77-2.48-3.32-.77.08-8.58%201.09-8.72%201.1a1%201%200%200%200%20.13%202s3-.39%203.33-.42a.88.88%200%200%201%20.85.44%202.47%202.47%200%200%201%20-.07%201.71c-.26%201-4.37%2012.58-4.5%2013.25a2.78%202.78%200%200%200%201.18%203%205%205%200%200%200%203.08.83%208.53%208.53%200%200%200%203.09-.62c2.49-1%205.09-3.66%206.46-5.75a1%201%200%200%200%20-.28-1.29z'/%3e%3cpath%20d='m0%200h36v36h-36z'%20fill='none'/%3e%3c/svg%3e",V6="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6.5%201C6.22386%201%206%201.22386%206%201.5C6%201.77614%206.22386%202%206.5%202C7.12671%202%207.45718%202.20028%207.65563%202.47812C7.8781%202.78957%208%203.28837%208%204V11C8%2011.7116%207.8781%2012.2104%207.65563%2012.5219C7.45718%2012.7997%207.12671%2013%206.5%2013C6.22386%2013%206%2013.2239%206%2013.5C6%2013.7761%206.22386%2014%206.5%2014C7.37329%2014%208.04282%2013.7003%208.46937%2013.1031C8.47976%2013.0886%208.48997%2013.0739%208.5%2013.0591C8.51003%2013.0739%208.52024%2013.0886%208.53063%2013.1031C8.95718%2013.7003%209.62671%2014%2010.5%2014C10.7761%2014%2011%2013.7761%2011%2013.5C11%2013.2239%2010.7761%2013%2010.5%2013C9.87329%2013%209.54282%2012.7997%209.34437%2012.5219C9.1219%2012.2104%209%2011.7116%209%2011V4C9%203.28837%209.1219%202.78957%209.34437%202.47812C9.54282%202.20028%209.87329%202%2010.5%202C10.7761%202%2011%201.77614%2011%201.5C11%201.22386%2010.7761%201%2010.5%201C9.62671%201%208.95718%201.29972%208.53063%201.89688C8.52024%201.91143%208.51003%201.92611%208.5%201.9409C8.48997%201.92611%208.47976%201.91143%208.46937%201.89688C8.04282%201.29972%207.37329%201%206.5%201ZM14%205H11V4H14C14.5523%204%2015%204.44772%2015%205V10C15%2010.5523%2014.5523%2011%2014%2011H11V10H14V5ZM6%204V5H1L1%2010H6V11H1C0.447715%2011%200%2010.5523%200%2010V5C0%204.44772%200.447715%204%201%204H6Z'%20fill='currentColor'%20/%3e%3c/svg%3e",U6="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.49998%200.5C5.49998%200.223858%205.72383%200%205.99998%200H7.49998H8.99998C9.27612%200%209.49998%200.223858%209.49998%200.5C9.49998%200.776142%209.27612%201%208.99998%201H7.99998V2.11922C9.09832%202.20409%2010.119%202.56622%2010.992%203.13572C11.0116%203.10851%2011.0336%203.08252%2011.058%203.05806L12.058%202.05806C12.3021%201.81398%2012.6978%201.81398%2012.9419%202.05806C13.186%202.30214%2013.186%202.69786%2012.9419%202.94194L11.967%203.91682C13.1595%205.07925%2013.9%206.70314%2013.9%208.49998C13.9%2012.0346%2011.0346%2014.9%207.49998%2014.9C3.96535%2014.9%201.09998%2012.0346%201.09998%208.49998C1.09998%205.13361%203.69904%202.3743%206.99998%202.11922V1H5.99998C5.72383%201%205.49998%200.776142%205.49998%200.5ZM2.09998%208.49998C2.09998%205.51764%204.51764%203.09998%207.49998%203.09998C10.4823%203.09998%2012.9%205.51764%2012.9%208.49998C12.9%2011.4823%2010.4823%2013.9%207.49998%2013.9C4.51764%2013.9%202.09998%2011.4823%202.09998%208.49998ZM7.49998%208.49998V4.09998C5.06992%204.09998%203.09998%206.06992%203.09998%208.49998C3.09998%2010.93%205.06992%2012.9%207.49998%2012.9C8.715%2012.9%209.815%2012.4075%2010.6112%2011.6112L7.49998%208.49998Z'%20fill='currentColor'%20/%3e%3c/svg%3e",G6=({defaultValue:i,type:t})=>Q.jsxs("span",{children:[i!=null&&Q.jsx("span",{title:`Default: ${i??"None"}`,children:Q.jsx("img",{alt:"Info",src:B6,className:"default-tooltip-icon"})}),t!=null&&t.subtype==="DoubleFunction"&&Q.jsx("span",{title:`Type: ${t.subtype??"None"}
 Format: \`a + b t\`. Example: \`30m + 2.0 t\``,children:Q.jsx("img",{alt:"Info",src:V6,className:"default-tooltip-icon"})}),t!=null&&t.subtype==="Duration"&&Q.jsx("span",{className:"default-tooltip-icon",title:`Type: ${t.subtype??"None"}
 Duration in a lenient ISO-8601 duration format.
Example P2DT2H12M40S, 2d2h12m40s or 1h`,children:Q.jsx("img",{alt:"Info",src:U6,className:"default-tooltip-icon"})})]}),oI=new Set(["numTripPatterns","arriveBy","from","to","dateTime","searchWindow","modes.accessMode","modes.directMode","modes.egressMode"]),sI=({tripQueryVariables:i,setTripQueryVariables:t,setExpandedArguments:a})=>{function d(){let f={};oI.forEach(g=>{const _=Ys(i,g);_!==void 0&&(f=Vm(f,g,_))}),t(f),a&&a({})}return Q.jsx("button",{className:"reset-button",onClick:d,children:"Reset"})};function dw(i){if(!i)return" ";const t=i.split(".");return t[t.length-1].replace(/([A-Z])/g," $1").trim().replace(/\b\w/g,d=>d.toUpperCase())+" "}function ex(i,t=[]){let a=[];return i?(Object.entries(i).forEach(([d,f])=>{const g=[...t,d].join(".");a=a.concat(Z6(d,f,g,t))}),a):[]}function Z6(i,t,a,d){let f=[];if(typeof t=="object"&&t.type)if(t.type.type==="Enum"){const g=["Not selected",...t.type.values||[]],_=t.defaultValue!==void 0?t.defaultValue:"Not selected";f.push({path:a,type:{type:"Enum"},defaultValue:_,enumValues:g,isList:t.isList})}else t.type.type==="InputObject"&&t.isList?(f.push({path:a,type:{type:"Group",name:t.type.name},defaultValue:t.defaultValue,isComplex:!0,isList:!0}),f=f.concat(ex(t.type.fields,[...d,`${i}.*`]))):t.type.type==="InputObject"?(f.push({path:a,type:{type:"Group",name:t.type.name},isComplex:!0,isList:!1}),f=f.concat(ex(t.type.fields,[...d,i]))):t.type.type==="Scalar"&&f.push({path:a,type:{type:t.type.type,subtype:t.type.subtype},defaultValue:t.defaultValue,isList:t.isList});else typeof t=="object"&&t.type?.fields?(f.push({path:a,type:{type:"Group"},isComplex:!0}),f=f.concat(ex(t.type.fields,[...d,i]))):f.push({path:a,type:t.type??typeof t,defaultValue:t.defaultValue});return f}const $6=({tripQueryVariables:i,setTripQueryVariables:t,expandedArguments:a,setExpandedArguments:d})=>{const[f]=ie.useState(""),{tripArgs:g,loading:_,error:c}=j6(),A=g&&!_&&!c?ex(g.trip.arguments):[];function D(ke){return ke.replace(/\.\d+/g,".*")}function O(ke,ze){const rt=D(ke),Se=A.find(Mt=>Mt.path===rt);if(!Se){console.error(`No matching argumentConfig found for path: ${ke}`);return}if(Se.type.subtype!=null&&["String","DoubleFunction","ID","Duration"].includes(Se.type.subtype)&&Se.isList&&typeof ze=="string"){const Mt=ze.split(",").map(Ft=>Ft.trim());let Ct=Vm(i,ke,Mt);Ct=H(Ct,ke),t(Ct);return}let nt=Vm(i,ke,ze);nt=H(nt,ke),t(nt)}function z(ke){return typeof ke=="object"&&ke!==null&&!Array.isArray(ke)}function V(ke){return ke==null?!0:Array.isArray(ke)?ke.length===0:z(ke)?Object.values(ke).every(V):!1}function H(ke,ze){if(!ze.includes(".")){const Se=Ys(ke,ze);if(V(Se)){const nt={...ke};return delete nt[ze],nt}return ke}const rt=ze.split(".");for(let Se=rt.length-1;Se>0;Se--){const nt=rt.slice(0,Se).join("."),Mt=Ys(ke,nt);V(Mt)&&(ke=Vm(ke,nt,void 0))}return ke}function ne(ke){d({...a,[ke]:!a[ke]})}function ae(){d({})}const q=A.filter(({path:ke})=>dw(ke).toLowerCase().includes(f.toLowerCase())).filter(({path:ke})=>!oI.has(ke));function he(ke,ze,rt,Se){const nt=Ys(i,ke)??[],Mt=Se.name;return Q.jsxs("div",{children:[nt.map((Ct,Ft)=>{const Ut=`${ke}.${Ft}`,Gt=ze.filter(St=>St.path.startsWith(`${ke}.*.`)&&St.path!==`${ke}.*`).map(St=>({...St,path:St.path.replace(`${ke}.*`,Ut)})),Ge=Gt.filter(St=>St.path.split(".").length===Ut.split(".").length+1),ct=a[Ut];return Q.jsxs("div",{style:{marginLeft:15},children:[Q.jsxs("span",{style:{cursor:"pointer"},onClick:()=>ne(Ut),children:[ct?" ":" "," [#",Ft+1,"]"]}),Q.jsx("button",{style:{marginLeft:10},onClick:()=>Ee(ke,Ft),children:"Remove"}),ct&&Q.jsx("div",{style:{marginLeft:20},children:De(Ge,rt+1,Gt)})]},Ut)}),Q.jsxs("button",{onClick:()=>Ae(ke),children:["+ Add ",Mt]})]})}function Ae(ke){const rt=[...Ys(i,ke)??[],{}],Se=Vm(i,ke,rt);t(Se)}function Ee(ke,ze){const Se=(Ys(i,ke)??[]).filter((Mt,Ct)=>Ct!==ze);let nt=Vm(i,ke,Se);nt=H(nt,ke),t(nt)}function Fe(ke){let ze=Vm(i,ke,void 0);ze=H(ze,ke),t(ze)}function De(ke,ze,rt){return ke.map(({path:Se,type:nt,defaultValue:Mt,enumValues:Ct,isComplex:Ft,isList:Ut})=>{const Gt=a[Se],Ge=Se.split(".").length,ct=rt.filter(pt=>{const Vt=pt.path.split(".").length;return pt.path.startsWith(`${Se}.`)&&pt.path!==Se&&Vt===Ge+1}),St=ze+1;return Q.jsx("div",{style:{marginLeft:`${ze*15}px`,marginBottom:"10px"},children:Ft?Q.jsxs("div",{children:[Q.jsxs("span",{style:{cursor:"pointer"},onClick:()=>ne(Se),children:[Gt?" ":" "," ",dw(Se)]}),Gt&&Ut?Q.jsx("div",{style:{marginLeft:20},children:he(Se,rt,St,nt)}):Gt?De(ct,St,rt):null]}):Q.jsxs("div",{children:[Q.jsxs("label",{className:"argument-label",htmlFor:Se,children:[dw(Se)," ",Q.jsx(G6,{defaultValue:Mt,type:nt})]}),nt.subtype==="Boolean"&&(()=>{const pt=Ys(i,Se),Vt=pt!==void 0;return Q.jsxs("span",{children:[Q.jsx("input",{type:"checkbox",id:Se,checked:pt??!1,onChange:Oe=>O(Se,Oe.target.checked)}),Vt&&Q.jsx("button",{onClick:()=>Fe(Se),className:"remove-argument",style:{fontSize:"10px",paddingTop:"2px",marginLeft:"8px",marginBottom:"0px",marginTop:"-5px",height:"14px",width:"45px",verticalAlign:"middle"},children:"Clear"})]})})(),nt.subtype!=null&&["String","DoubleFunction","ID","Duration"].includes(nt.subtype)&&Ut&&Q.jsx("input",{className:"comma-separated-input",type:"text",id:Se,value:(()=>{const pt=Ys(i,Se);return Array.isArray(pt)?pt.join(", "):""})(),onChange:pt=>O(Se,pt.target.value),placeholder:"Comma-separated list"}),nt.subtype!=null&&["String","DoubleFunction","ID","Duration"].includes(nt.subtype)&&!Ut&&Q.jsx("input",{type:"text",id:Se,value:Ys(i,Se)??"",onChange:pt=>O(Se,pt.target.value||void 0)}),nt.subtype==="Int"&&Q.jsx("input",{type:"number",id:Se,value:Ys(i,Se)??"",onChange:pt=>{const Vt=parseInt(pt.target.value,10);O(Se,Number.isNaN(Vt)?void 0:Vt)}}),nt.subtype==="Float"&&Q.jsx("input",{type:"number",id:Se,step:"any",value:Ys(i,Se)??"",onChange:pt=>{const Vt=parseFloat(pt.target.value);O(Se,Number.isNaN(Vt)?void 0:Vt)}}),nt.subtype==="DateTime"&&Q.jsx("input",{type:"datetime-local",id:Se,value:(Ys(i,Se)??"").slice(0,16),onChange:pt=>{const Vt=pt.target.value?new Date(pt.target.value).toISOString():void 0;O(Se,Vt)}}),nt.type==="Enum"&&Ct&&Ut&&Q.jsx("select",{id:Se,multiple:!0,value:(()=>{const pt=Ys(i,Se);return Array.isArray(pt)?pt:[]})(),onChange:pt=>{const Vt=Array.from(pt.target.selectedOptions,Oe=>Oe.value);O(Se,Vt)},children:Ct.map(pt=>Q.jsx("option",{value:pt,children:pt},pt))}),nt.type==="Enum"&&Ct&&!Ut&&Q.jsx("select",{id:Se,value:Ys(i,Se)??"Not selected",onChange:pt=>{const Vt=pt.target.value==="Not selected"?void 0:pt.target.value;O(Se,Vt)},children:Ct.map(pt=>Q.jsx("option",{value:pt,children:pt},pt))})]})},Se)})}return Q.jsxs("div",{className:"left-pane-container below-content",children:[Q.jsxs("div",{className:"panel-header",style:{display:"flex",alignItems:"center",position:"relative"},children:[Q.jsx("button",{className:"collapse-all-button",onClick:ae,style:{padding:"4px 8px"},children:"Collapse all"}),Q.jsx("span",{className:"panel-header-title-with-left-button",children:"Arguments"}),Q.jsx("div",{style:{marginLeft:"auto"},children:Q.jsx(sI,{tripQueryVariables:i,setTripQueryVariables:t,setExpandedArguments:d})})]}),q.length===0?Q.jsx("p",{children:"No arguments found."}):Q.jsx("div",{className:"argument-list",children:De(q.filter(ke=>ke.path.split(".").length===1),0,q)})]})},Y6="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='icon%20icon-tabler%20icon-tabler-route'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20stroke-width='2'%20stroke='currentColor'%20fill='none'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3ccircle%20cx='6'%20cy='19'%20r='2'%20/%3e%3ccircle%20cx='18'%20cy='5'%20r='2'%20/%3e%3cpath%20d='M12%2019h4.5a3.5%203.5%200%200%200%200%20-7h-8a3.5%203.5%200%200%201%200%20-7h3.5'%20/%3e%3c/svg%3e",q6="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15%2010.5A3.502%203.502%200%200%200%2018.355%208H21a1%201%200%201%200%200-2h-2.645a3.502%203.502%200%200%200-6.71%200H3a1%201%200%200%200%200%202h8.645A3.502%203.502%200%200%200%2015%2010.5zM3%2016a1%201%200%201%200%200%202h2.145a3.502%203.502%200%200%200%206.71%200H21a1%201%200%201%200%200-2h-9.145a3.502%203.502%200%200%200-6.71%200H3z'%20fill='currentColor'/%3e%3c/svg%3e",H6="data:image/svg+xml,%3csvg%20height='16'%20viewBox='0%200%2016%2016'%20width='16'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m1%202h4v2h-2v2l-1%202%201%202v2h2v2h-4v-4l-1-2%201-2zm4%205c.55228475%200%201%20.44771525%201%201s-.44771525%201-1%201-1-.44771525-1-1%20.44771525-1%201-1zm3%200c.55228475%200%201%20.44771525%201%201s-.44771525%201-1%201-1-.44771525-1-1%20.44771525-1%201-1zm3%200c.5522847%200%201%20.44771525%201%201s-.4477153%201-1%201-1-.44771525-1-1%20.4477153-1%201-1zm0-3v-2h4v4l1%202-1%202v4h-4v-2h2v-2l1-2-1-2v-2z'%20fill='%23293040'/%3e%3c/svg%3e",W6=({children:i})=>{const[t,a]=ie.useState(0),d=g=>{switch(g){case 0:return Q.jsx("img",{src:Y6,alt:"Itinerary results",title:"Itinerary results"});case 1:return Q.jsx("img",{src:q6,alt:"Arguments",title:"Arguments"});case 2:return Q.jsx("img",{width:"25",height:"25",src:H6,alt:"Arguments raw",title:"Arguments raw"});default:return null}},f=Nl.Children.toArray(i).filter(g=>Nl.isValidElement(g));return Q.jsxs("div",{className:"sidebar-container",children:[Q.jsx("div",{className:"sidebar",children:f.map((g,_)=>Q.jsx("div",{className:`sidebar-button ${_===t?"active":""}`,onClick:()=>a(_),children:d(_)},_))}),Q.jsx("div",{className:"sidebar-content",children:f.map((g,_)=>_===t?Q.jsx("div",{children:g},_):null)})]})},X6=({tripQueryVariables:i,setTripQueryVariables:t,setExpandedArguments:a})=>Q.jsxs("div",{className:"left-pane-container below-content",style:{fontSize:"14px"},children:[Q.jsxs("div",{className:"panel-header",style:{display:"flex",alignItems:"center",position:"relative"},children:[Q.jsx("span",{className:"panel-header-title-simple",children:"Arguments raw"}),Q.jsx("div",{style:{marginLeft:"auto"},children:Q.jsx(sI,{tripQueryVariables:i,setTripQueryVariables:t,setExpandedArguments:a})})]}),Q.jsx("pre",{children:JSON.stringify(i,null,2)})]});function Q6(i){let t=i;for(;;)if(Gd(t))t=t.ofType;else if(Ep(t))t=t.ofType;else break;return t}function lI(i){const t=Q6(i);if(Qy(t))return{type:"Scalar",subtype:t.name};if(bp(t))return{type:"Enum",values:t.getValues().map(a=>a.name)};if(Ud(t)){const a=t.getFields(),d={};for(const f of Object.keys(a)){const g=a[f];if(g.deprecationReason)continue;const _=Ep(g.type),c=g.defaultValue!==void 0?g.defaultValue:null;d[f]={type:lI(g.type),defaultValue:c,isList:_}}return{type:"InputObject",name:t.name,fields:d}}return{type:"Scalar",subtype:"String"}}function K6(i){const t=i.getQueryType();if(!t)throw new Error("No Query type found in the schema.");const a=t.getFields().trip;if(!a)throw new Error("No trip query found in the schema.");const d={};return a.args.forEach(f=>{if(f.deprecationReason)return;const g=f.name,_=lI(f.type),c=f.defaultValue!==null?f.defaultValue:null,A=Ep(f.type);d[g]={type:_,...c!==null&&{defaultValue:c},isList:A}}),{trip:{arguments:d}}}async function J6(i){const t=Ek(),a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})});if(!a.ok)throw new Error(`Failed to fetch schema. HTTP error: ${a.status}`);const{data:d}=await a.json(),f=Ak(d);return K6(f)}function ej({endpoint:i,children:t}){const[a,d]=ie.useState(null),[f,g]=ie.useState(!0),[_,c]=ie.useState(null);ie.useEffect(()=>{let D=!0;async function O(){g(!0),c(null);try{const z=await J6(i);D&&d(z)}catch(z){console.error("Error loading trip arguments:",z),D&&c("Failed to load trip schema")}finally{D&&g(!1)}}return O(),()=>{D=!1}},[i]);const A={tripArgs:a,loading:f,error:_};return Q.jsx(aI.Provider,{value:A,children:t})}function tj(){const i=s5(),{tripQueryVariables:t,setTripQueryVariables:a}=h5(),[d,f]=ie.useState([]),[g,_]=ie.useState(!1),[c,A,D]=a5(t),[O,z]=ie.useState([0]),[V,H]=ie.useState({}),ne=i?.internalTransitModelTimeZone||Intl.DateTimeFormat().resolvedOptions().timeZone;return ie.useEffect(()=>{c?.trip.tripPatterns.length&&z([0])},[c]),Q.jsx("div",{className:"app",children:Q.jsxs(n0.Provider,{value:ne,children:[Q.jsxs("div",{className:"layout",children:[Q.jsx("div",{className:"box logo-section",children:Q.jsx(p5,{serverInfo:i})}),Q.jsx("div",{className:"box input-section",children:Q.jsx(F6,{onRoute:D,tripQueryVariables:t,setTripQueryVariables:a,loading:A})}),Q.jsx("div",{className:"box trip-section",children:Q.jsxs(W6,{children:[Q.jsx(lP,{tripQueryResult:c,selectedTripPatternIndexes:O,setSelectedTripPatternIndexes:z,pageResults:D,loading:A,comparisonSelectedIndexes:d,setComparisonSelectedIndexes:f,onCompare:()=>_(!0)}),Q.jsx(ej,{endpoint:Lx(),children:Q.jsx($6,{tripQueryVariables:t,setTripQueryVariables:a,expandedArguments:V,setExpandedArguments:H})}),Q.jsx(X6,{tripQueryVariables:t,setTripQueryVariables:a,setExpandedArguments:H})]})}),Q.jsx("div",{className:"box map-section",children:Q.jsx(hN,{tripQueryResult:c,tripQueryVariables:t,setTripQueryVariables:a,selectedTripPatternIndexes:O,loading:A})})]}),Q.jsx(t5,{show:g,onHide:()=>_(!1),tripQueryResult:c,selectedIndexes:d})]})})}DI.createRoot(document.getElementById("root")).render(Q.jsx(Nl.StrictMode,{children:Q.jsx(tj,{})}));
