function wA(i,n){for(var a=0;a<n.length;a++){const h=n[a];if(typeof h!="string"&&!Array.isArray(h)){for(const f in h)if(f!=="default"&&!(f in i)){const g=Object.getOwnPropertyDescriptor(h,f);g&&Object.defineProperty(i,f,g.get?g:{enumerable:!0,get:()=>h[f]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))h(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const _ of g.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&h(_)}).observe(document,{childList:!0,subtree:!0});function a(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function h(f){if(f.ep)return;f.ep=!0;const g=a(f);fetch(f.href,g)}})();function eg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var F1={exports:{}},M_={};var FT;function jI(){if(FT)return M_;FT=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(h,f,g){var _=null;if(g!==void 0&&(_=""+g),f.key!==void 0&&(_=""+f.key),"key"in f){g={};for(var c in f)c!=="key"&&(g[c]=f[c])}else g=f;return f=g.ref,{$$typeof:i,type:h,key:_,ref:f!==void 0?f:null,props:g}}return M_.Fragment=n,M_.jsx=a,M_.jsxs=a,M_}var jT;function BI(){return jT||(jT=1,F1.exports=jI()),F1.exports}var Q=BI(),j1={exports:{}},In={};var BT;function VI(){if(BT)return In;BT=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),_=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),V=Symbol.iterator;function Y(Le){return Le===null||typeof Le!="object"?null:(Le=V&&Le[V]||Le["@@iterator"],typeof Le=="function"?Le:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,q={};function fe(Le,tt,xt){this.props=Le,this.context=tt,this.refs=q,this.updater=xt||ee}fe.prototype.isReactComponent={},fe.prototype.setState=function(Le,tt){if(typeof Le!="object"&&typeof Le!="function"&&Le!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Le,tt,"setState")},fe.prototype.forceUpdate=function(Le){this.updater.enqueueForceUpdate(this,Le,"forceUpdate")};function Ee(){}Ee.prototype=fe.prototype;function we(Le,tt,xt){this.props=Le,this.context=tt,this.refs=q,this.updater=xt||ee}var ze=we.prototype=new Ee;ze.constructor=we,ie(ze,fe.prototype),ze.isPureReactComponent=!0;var Ce=Array.isArray;function Re(){}var Ne={H:null,A:null,T:null,S:null},at=Object.prototype.hasOwnProperty;function Te(Le,tt,xt){var St=xt.ref;return{$$typeof:i,type:Le,key:tt,ref:St!==void 0?St:null,props:xt}}function it(Le,tt){return Te(Le.type,tt,Le.props)}function Dt(Le){return typeof Le=="object"&&Le!==null&&Le.$$typeof===i}function Mt(Le){var tt={"=":"=0",":":"=2"};return"$"+Le.replace(/[=:]/g,function(xt){return tt[xt]})}var Ut=/\/+/g;function Ht(Le,tt){return typeof Le=="object"&&Le!==null&&Le.key!=null?Mt(""+Le.key):tt.toString(36)}function Yt(Le){switch(Le.status){case"fulfilled":return Le.value;case"rejected":throw Le.reason;default:switch(typeof Le.status=="string"?Le.then(Re,Re):(Le.status="pending",Le.then(function(tt){Le.status==="pending"&&(Le.status="fulfilled",Le.value=tt)},function(tt){Le.status==="pending"&&(Le.status="rejected",Le.reason=tt)})),Le.status){case"fulfilled":return Le.value;case"rejected":throw Le.reason}}throw Le}function Ve(Le,tt,xt,St,Nt){var Zt=typeof Le;(Zt==="undefined"||Zt==="boolean")&&(Le=null);var Jt=!1;if(Le===null)Jt=!0;else switch(Zt){case"bigint":case"string":case"number":Jt=!0;break;case"object":switch(Le.$$typeof){case i:case n:Jt=!0;break;case O:return Jt=Le._init,Ve(Jt(Le._payload),tt,xt,St,Nt)}}if(Jt)return Nt=Nt(Le),Jt=St===""?"."+Ht(Le,0):St,Ce(Nt)?(xt="",Jt!=null&&(xt=Jt.replace(Ut,"$&/")+"/"),Ve(Nt,tt,xt,"",function(Ri){return Ri})):Nt!=null&&(Dt(Nt)&&(Nt=it(Nt,xt+(Nt.key==null||Le&&Le.key===Nt.key?"":(""+Nt.key).replace(Ut,"$&/")+"/")+Jt)),tt.push(Nt)),1;Jt=0;var on=St===""?".":St+":";if(Ce(Le))for(var Sn=0;Sn<Le.length;Sn++)St=Le[Sn],Zt=on+Ht(St,Sn),Jt+=Ve(St,tt,xt,Zt,Nt);else if(Sn=Y(Le),typeof Sn=="function")for(Le=Sn.call(Le),Sn=0;!(St=Le.next()).done;)St=St.value,Zt=on+Ht(St,Sn++),Jt+=Ve(St,tt,xt,Zt,Nt);else if(Zt==="object"){if(typeof Le.then=="function")return Ve(Yt(Le),tt,xt,St,Nt);throw tt=String(Le),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(Le).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return Jt}function ut(Le,tt,xt){if(Le==null)return Le;var St=[],Nt=0;return Ve(Le,St,"","",function(Zt){return tt.call(xt,Zt,Nt++)}),St}function Tt(Le){if(Le._status===-1){var tt=Le._result;tt=tt(),tt.then(function(xt){(Le._status===0||Le._status===-1)&&(Le._status=1,Le._result=xt)},function(xt){(Le._status===0||Le._status===-1)&&(Le._status=2,Le._result=xt)}),Le._status===-1&&(Le._status=0,Le._result=tt)}if(Le._status===1)return Le._result.default;throw Le._result}var gt=typeof reportError=="function"?reportError:function(Le){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Le=="object"&&Le!==null&&typeof Le.message=="string"?String(Le.message):String(Le),error:Le});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Le);return}console.error(Le)},$t={map:ut,forEach:function(Le,tt,xt){ut(Le,function(){tt.apply(this,arguments)},xt)},count:function(Le){var tt=0;return ut(Le,function(){tt++}),tt},toArray:function(Le){return ut(Le,function(tt){return tt})||[]},only:function(Le){if(!Dt(Le))throw Error("React.Children.only expected to receive a single React element child.");return Le}};return In.Activity=z,In.Children=$t,In.Component=fe,In.Fragment=a,In.Profiler=f,In.PureComponent=we,In.StrictMode=h,In.Suspense=A,In.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ne,In.__COMPILER_RUNTIME={__proto__:null,c:function(Le){return Ne.H.useMemoCache(Le)}},In.cache=function(Le){return function(){return Le.apply(null,arguments)}},In.cacheSignal=function(){return null},In.cloneElement=function(Le,tt,xt){if(Le==null)throw Error("The argument must be a React element, but you passed "+Le+".");var St=ie({},Le.props),Nt=Le.key;if(tt!=null)for(Zt in tt.key!==void 0&&(Nt=""+tt.key),tt)!at.call(tt,Zt)||Zt==="key"||Zt==="__self"||Zt==="__source"||Zt==="ref"&&tt.ref===void 0||(St[Zt]=tt[Zt]);var Zt=arguments.length-2;if(Zt===1)St.children=xt;else if(1<Zt){for(var Jt=Array(Zt),on=0;on<Zt;on++)Jt[on]=arguments[on+2];St.children=Jt}return Te(Le.type,Nt,St)},In.createContext=function(Le){return Le={$$typeof:_,_currentValue:Le,_currentValue2:Le,_threadCount:0,Provider:null,Consumer:null},Le.Provider=Le,Le.Consumer={$$typeof:g,_context:Le},Le},In.createElement=function(Le,tt,xt){var St,Nt={},Zt=null;if(tt!=null)for(St in tt.key!==void 0&&(Zt=""+tt.key),tt)at.call(tt,St)&&St!=="key"&&St!=="__self"&&St!=="__source"&&(Nt[St]=tt[St]);var Jt=arguments.length-2;if(Jt===1)Nt.children=xt;else if(1<Jt){for(var on=Array(Jt),Sn=0;Sn<Jt;Sn++)on[Sn]=arguments[Sn+2];Nt.children=on}if(Le&&Le.defaultProps)for(St in Jt=Le.defaultProps,Jt)Nt[St]===void 0&&(Nt[St]=Jt[St]);return Te(Le,Zt,Nt)},In.createRef=function(){return{current:null}},In.forwardRef=function(Le){return{$$typeof:c,render:Le}},In.isValidElement=Dt,In.lazy=function(Le){return{$$typeof:O,_payload:{_status:-1,_result:Le},_init:Tt}},In.memo=function(Le,tt){return{$$typeof:D,type:Le,compare:tt===void 0?null:tt}},In.startTransition=function(Le){var tt=Ne.T,xt={};Ne.T=xt;try{var St=Le(),Nt=Ne.S;Nt!==null&&Nt(xt,St),typeof St=="object"&&St!==null&&typeof St.then=="function"&&St.then(Re,gt)}catch(Zt){gt(Zt)}finally{tt!==null&&xt.types!==null&&(tt.types=xt.types),Ne.T=tt}},In.unstable_useCacheRefresh=function(){return Ne.H.useCacheRefresh()},In.use=function(Le){return Ne.H.use(Le)},In.useActionState=function(Le,tt,xt){return Ne.H.useActionState(Le,tt,xt)},In.useCallback=function(Le,tt){return Ne.H.useCallback(Le,tt)},In.useContext=function(Le){return Ne.H.useContext(Le)},In.useDebugValue=function(){},In.useDeferredValue=function(Le,tt){return Ne.H.useDeferredValue(Le,tt)},In.useEffect=function(Le,tt){return Ne.H.useEffect(Le,tt)},In.useEffectEvent=function(Le){return Ne.H.useEffectEvent(Le)},In.useId=function(){return Ne.H.useId()},In.useImperativeHandle=function(Le,tt,xt){return Ne.H.useImperativeHandle(Le,tt,xt)},In.useInsertionEffect=function(Le,tt){return Ne.H.useInsertionEffect(Le,tt)},In.useLayoutEffect=function(Le,tt){return Ne.H.useLayoutEffect(Le,tt)},In.useMemo=function(Le,tt){return Ne.H.useMemo(Le,tt)},In.useOptimistic=function(Le,tt){return Ne.H.useOptimistic(Le,tt)},In.useReducer=function(Le,tt,xt){return Ne.H.useReducer(Le,tt,xt)},In.useRef=function(Le){return Ne.H.useRef(Le)},In.useState=function(Le){return Ne.H.useState(Le)},In.useSyncExternalStore=function(Le,tt,xt){return Ne.H.useSyncExternalStore(Le,tt,xt)},In.useTransition=function(){return Ne.H.useTransition()},In.version="19.2.3",In}var VT;function p2(){return VT||(VT=1,j1.exports=VI()),j1.exports}var te=p2();const Ll=eg(te),UT=wA({__proto__:null,default:Ll},[te]);var B1={exports:{}},C_={},V1={exports:{}},U1={};var GT;function UI(){return GT||(GT=1,(function(i){function n(Ve,ut){var Tt=Ve.length;Ve.push(ut);e:for(;0<Tt;){var gt=Tt-1>>>1,$t=Ve[gt];if(0<f($t,ut))Ve[gt]=ut,Ve[Tt]=$t,Tt=gt;else break e}}function a(Ve){return Ve.length===0?null:Ve[0]}function h(Ve){if(Ve.length===0)return null;var ut=Ve[0],Tt=Ve.pop();if(Tt!==ut){Ve[0]=Tt;e:for(var gt=0,$t=Ve.length,Le=$t>>>1;gt<Le;){var tt=2*(gt+1)-1,xt=Ve[tt],St=tt+1,Nt=Ve[St];if(0>f(xt,Tt))St<$t&&0>f(Nt,xt)?(Ve[gt]=Nt,Ve[St]=Tt,gt=St):(Ve[gt]=xt,Ve[tt]=Tt,gt=tt);else if(St<$t&&0>f(Nt,Tt))Ve[gt]=Nt,Ve[St]=Tt,gt=St;else break e}}return ut}function f(Ve,ut){var Tt=Ve.sortIndex-ut.sortIndex;return Tt!==0?Tt:Ve.id-ut.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;i.unstable_now=function(){return g.now()}}else{var _=Date,c=_.now();i.unstable_now=function(){return _.now()-c}}var A=[],D=[],O=1,z=null,V=3,Y=!1,ee=!1,ie=!1,q=!1,fe=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,we=typeof setImmediate<"u"?setImmediate:null;function ze(Ve){for(var ut=a(D);ut!==null;){if(ut.callback===null)h(D);else if(ut.startTime<=Ve)h(D),ut.sortIndex=ut.expirationTime,n(A,ut);else break;ut=a(D)}}function Ce(Ve){if(ie=!1,ze(Ve),!ee)if(a(A)!==null)ee=!0,Re||(Re=!0,Mt());else{var ut=a(D);ut!==null&&Yt(Ce,ut.startTime-Ve)}}var Re=!1,Ne=-1,at=5,Te=-1;function it(){return q?!0:!(i.unstable_now()-Te<at)}function Dt(){if(q=!1,Re){var Ve=i.unstable_now();Te=Ve;var ut=!0;try{e:{ee=!1,ie&&(ie=!1,Ee(Ne),Ne=-1),Y=!0;var Tt=V;try{t:{for(ze(Ve),z=a(A);z!==null&&!(z.expirationTime>Ve&&it());){var gt=z.callback;if(typeof gt=="function"){z.callback=null,V=z.priorityLevel;var $t=gt(z.expirationTime<=Ve);if(Ve=i.unstable_now(),typeof $t=="function"){z.callback=$t,ze(Ve),ut=!0;break t}z===a(A)&&h(A),ze(Ve)}else h(A);z=a(A)}if(z!==null)ut=!0;else{var Le=a(D);Le!==null&&Yt(Ce,Le.startTime-Ve),ut=!1}}break e}finally{z=null,V=Tt,Y=!1}ut=void 0}}finally{ut?Mt():Re=!1}}}var Mt;if(typeof we=="function")Mt=function(){we(Dt)};else if(typeof MessageChannel<"u"){var Ut=new MessageChannel,Ht=Ut.port2;Ut.port1.onmessage=Dt,Mt=function(){Ht.postMessage(null)}}else Mt=function(){fe(Dt,0)};function Yt(Ve,ut){Ne=fe(function(){Ve(i.unstable_now())},ut)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Ve){Ve.callback=null},i.unstable_forceFrameRate=function(Ve){0>Ve||125<Ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):at=0<Ve?Math.floor(1e3/Ve):5},i.unstable_getCurrentPriorityLevel=function(){return V},i.unstable_next=function(Ve){switch(V){case 1:case 2:case 3:var ut=3;break;default:ut=V}var Tt=V;V=ut;try{return Ve()}finally{V=Tt}},i.unstable_requestPaint=function(){q=!0},i.unstable_runWithPriority=function(Ve,ut){switch(Ve){case 1:case 2:case 3:case 4:case 5:break;default:Ve=3}var Tt=V;V=Ve;try{return ut()}finally{V=Tt}},i.unstable_scheduleCallback=function(Ve,ut,Tt){var gt=i.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?gt+Tt:gt):Tt=gt,Ve){case 1:var $t=-1;break;case 2:$t=250;break;case 5:$t=1073741823;break;case 4:$t=1e4;break;default:$t=5e3}return $t=Tt+$t,Ve={id:O++,callback:ut,priorityLevel:Ve,startTime:Tt,expirationTime:$t,sortIndex:-1},Tt>gt?(Ve.sortIndex=Tt,n(D,Ve),a(A)===null&&Ve===a(D)&&(ie?(Ee(Ne),Ne=-1):ie=!0,Yt(Ce,Tt-gt))):(Ve.sortIndex=$t,n(A,Ve),ee||Y||(ee=!0,Re||(Re=!0,Mt()))),Ve},i.unstable_shouldYield=it,i.unstable_wrapCallback=function(Ve){var ut=V;return function(){var Tt=V;V=ut;try{return Ve.apply(this,arguments)}finally{V=Tt}}}})(U1)),U1}var $T;function GI(){return $T||($T=1,V1.exports=UI()),V1.exports}var G1={exports:{}},Ls={};var ZT;function $I(){if(ZT)return Ls;ZT=1;var i=p2();function n(A){var D="https://react.dev/errors/"+A;if(1<arguments.length){D+="?args[]="+encodeURIComponent(arguments[1]);for(var O=2;O<arguments.length;O++)D+="&args[]="+encodeURIComponent(arguments[O])}return"Minified React error #"+A+"; visit "+D+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var h={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},f=Symbol.for("react.portal");function g(A,D,O){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:z==null?null:""+z,children:A,containerInfo:D,implementation:O}}var _=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(A,D){if(A==="font")return"";if(typeof D=="string")return D==="use-credentials"?D:""}return Ls.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=h,Ls.createPortal=function(A,D){var O=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D||D.nodeType!==1&&D.nodeType!==9&&D.nodeType!==11)throw Error(n(299));return g(A,D,null,O)},Ls.flushSync=function(A){var D=_.T,O=h.p;try{if(_.T=null,h.p=2,A)return A()}finally{_.T=D,h.p=O,h.d.f()}},Ls.preconnect=function(A,D){typeof A=="string"&&(D?(D=D.crossOrigin,D=typeof D=="string"?D==="use-credentials"?D:"":void 0):D=null,h.d.C(A,D))},Ls.prefetchDNS=function(A){typeof A=="string"&&h.d.D(A)},Ls.preinit=function(A,D){if(typeof A=="string"&&D&&typeof D.as=="string"){var O=D.as,z=c(O,D.crossOrigin),V=typeof D.integrity=="string"?D.integrity:void 0,Y=typeof D.fetchPriority=="string"?D.fetchPriority:void 0;O==="style"?h.d.S(A,typeof D.precedence=="string"?D.precedence:void 0,{crossOrigin:z,integrity:V,fetchPriority:Y}):O==="script"&&h.d.X(A,{crossOrigin:z,integrity:V,fetchPriority:Y,nonce:typeof D.nonce=="string"?D.nonce:void 0})}},Ls.preinitModule=function(A,D){if(typeof A=="string")if(typeof D=="object"&&D!==null){if(D.as==null||D.as==="script"){var O=c(D.as,D.crossOrigin);h.d.M(A,{crossOrigin:O,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0})}}else D==null&&h.d.M(A)},Ls.preload=function(A,D){if(typeof A=="string"&&typeof D=="object"&&D!==null&&typeof D.as=="string"){var O=D.as,z=c(O,D.crossOrigin);h.d.L(A,O,{crossOrigin:z,integrity:typeof D.integrity=="string"?D.integrity:void 0,nonce:typeof D.nonce=="string"?D.nonce:void 0,type:typeof D.type=="string"?D.type:void 0,fetchPriority:typeof D.fetchPriority=="string"?D.fetchPriority:void 0,referrerPolicy:typeof D.referrerPolicy=="string"?D.referrerPolicy:void 0,imageSrcSet:typeof D.imageSrcSet=="string"?D.imageSrcSet:void 0,imageSizes:typeof D.imageSizes=="string"?D.imageSizes:void 0,media:typeof D.media=="string"?D.media:void 0})}},Ls.preloadModule=function(A,D){if(typeof A=="string")if(D){var O=c(D.as,D.crossOrigin);h.d.m(A,{as:typeof D.as=="string"&&D.as!=="script"?D.as:void 0,crossOrigin:O,integrity:typeof D.integrity=="string"?D.integrity:void 0})}else h.d.m(A)},Ls.requestFormReset=function(A){h.d.r(A)},Ls.unstable_batchedUpdates=function(A,D){return A(D)},Ls.useFormState=function(A,D,O){return _.H.useFormState(A,D,O)},Ls.useFormStatus=function(){return _.H.useHostTransitionStatus()},Ls.version="19.2.3",Ls}var qT;function TA(){if(qT)return G1.exports;qT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),G1.exports=$I(),G1.exports}var YT;function ZI(){if(YT)return C_;YT=1;var i=GI(),n=p2(),a=TA();function h(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)u+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function g(o){var u=o,y=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(y=u.return),o=u.return;while(o)}return u.tag===3?y:null}function _(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function A(o){if(g(o)!==o)throw Error(h(188))}function D(o){var u=o.alternate;if(!u){if(u=g(o),u===null)throw Error(h(188));return u!==o?null:o}for(var y=o,T=u;;){var R=y.return;if(R===null)break;var N=R.alternate;if(N===null){if(T=R.return,T!==null){y=T;continue}break}if(R.child===N.child){for(N=R.child;N;){if(N===y)return A(R),o;if(N===T)return A(R),u;N=N.sibling}throw Error(h(188))}if(y.return!==T.return)y=R,T=N;else{for(var H=!1,ue=R.child;ue;){if(ue===y){H=!0,y=R,T=N;break}if(ue===T){H=!0,T=R,y=N;break}ue=ue.sibling}if(!H){for(ue=N.child;ue;){if(ue===y){H=!0,y=N,T=R;break}if(ue===T){H=!0,T=N,y=R;break}ue=ue.sibling}if(!H)throw Error(h(189))}}if(y.alternate!==T)throw Error(h(190))}if(y.tag!==3)throw Error(h(188));return y.stateNode.current===y?o:u}function O(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=O(o),u!==null)return u;o=o.sibling}return null}var z=Object.assign,V=Symbol.for("react.element"),Y=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),Ee=Symbol.for("react.consumer"),we=Symbol.for("react.context"),ze=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),Te=Symbol.for("react.activity"),it=Symbol.for("react.memo_cache_sentinel"),Dt=Symbol.iterator;function Mt(o){return o===null||typeof o!="object"?null:(o=Dt&&o[Dt]||o["@@iterator"],typeof o=="function"?o:null)}var Ut=Symbol.for("react.client.reference");function Ht(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Ut?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ie:return"Fragment";case fe:return"Profiler";case q:return"StrictMode";case Ce:return"Suspense";case Re:return"SuspenseList";case Te:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case ee:return"Portal";case we:return o.displayName||"Context";case Ee:return(o._context.displayName||"Context")+".Consumer";case ze:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ne:return u=o.displayName||null,u!==null?u:Ht(o.type)||"Memo";case at:u=o._payload,o=o._init;try{return Ht(o(u))}catch{}}return null}var Yt=Array.isArray,Ve=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt={pending:!1,data:null,method:null,action:null},gt=[],$t=-1;function Le(o){return{current:o}}function tt(o){0>$t||(o.current=gt[$t],gt[$t]=null,$t--)}function xt(o,u){$t++,gt[$t]=o.current,o.current=u}var St=Le(null),Nt=Le(null),Zt=Le(null),Jt=Le(null);function on(o,u){switch(xt(Zt,u),xt(Nt,o),xt(St,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?ih(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=ih(u),o=i_(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}tt(St),xt(St,o)}function Sn(){tt(St),tt(Nt),tt(Zt)}function Ri(o){o.memoizedState!==null&&xt(Jt,o);var u=St.current,y=i_(u,o.type);u!==y&&(xt(Nt,o),xt(St,y))}function Tr(o){Nt.current===o&&(tt(St),tt(Nt)),Jt.current===o&&(tt(Jt),ep._currentValue=Tt)}var Fi,ta;function Nn(o){if(Fi===void 0)try{throw Error()}catch(y){var u=y.stack.trim().match(/\n( *(at )?)/);Fi=u&&u[1]||"",ta=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fi+o+ta}var bn=!1;function Sr(o,u){if(!o||bn)return"";bn=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(u){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(st){var nt=st}Reflect.construct(o,[],bt)}else{try{bt.call()}catch(st){nt=st}o.call(bt.prototype)}}else{try{throw Error()}catch(st){nt=st}(bt=o())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(st){if(st&&nt&&typeof st.stack=="string")return[st.stack,nt.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=T.DetermineComponentFrameRoot(),H=N[0],ue=N[1];if(H&&ue){var Oe=H.split(`
`),et=ue.split(`
`);for(R=T=0;T<Oe.length&&!Oe[T].includes("DetermineComponentFrameRoot");)T++;for(;R<et.length&&!et[R].includes("DetermineComponentFrameRoot");)R++;if(T===Oe.length||R===et.length)for(T=Oe.length-1,R=et.length-1;1<=T&&0<=R&&Oe[T]!==et[R];)R--;for(;1<=T&&0<=R;T--,R--)if(Oe[T]!==et[R]){if(T!==1||R!==1)do if(T--,R--,0>R||Oe[T]!==et[R]){var ft=`
`+Oe[T].replace(" at new "," at ");return o.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",o.displayName)),ft}while(1<=T&&0<=R);break}}}finally{bn=!1,Error.prepareStackTrace=y}return(y=o?o.displayName||o.name:"")?Nn(y):""}function Xn(o,u){switch(o.tag){case 26:case 27:case 5:return Nn(o.type);case 16:return Nn("Lazy");case 13:return o.child!==u&&u!==null?Nn("Suspense Fallback"):Nn("Suspense");case 19:return Nn("SuspenseList");case 0:case 15:return Sr(o.type,!1);case 11:return Sr(o.type.render,!1);case 1:return Sr(o.type,!0);case 31:return Nn("Activity");default:return""}}function Za(o){try{var u="",y=null;do u+=Xn(o,y),y=o,o=o.return;while(o);return u}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}var qa=Object.prototype.hasOwnProperty,Br=i.unstable_scheduleCallback,na=i.unstable_cancelCallback,la=i.unstable_shouldYield,js=i.unstable_requestPaint,ji=i.unstable_now,Dr=i.unstable_getCurrentPriorityLevel,Fe=i.unstable_ImmediatePriority,re=i.unstable_UserBlockingPriority,ae=i.unstable_NormalPriority,he=i.unstable_LowPriority,De=i.unstable_IdlePriority,ke=i.log,Ye=i.unstable_setDisableYieldValue,Ue=null,Pe=null;function He(o){if(typeof ke=="function"&&Ye(o),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(Ue,o)}catch{}}var ht=Math.clz32?Math.clz32:qt,dt=Math.log,Ft=Math.LN2;function qt(o){return o>>>=0,o===0?32:31-(dt(o)/Ft|0)|0}var an=256,Qn=262144,Pn=4194304;function $e(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ei(o,u,y){var T=o.pendingLanes;if(T===0)return 0;var R=0,N=o.suspendedLanes,H=o.pingedLanes;o=o.warmLanes;var ue=T&134217727;return ue!==0?(T=ue&~N,T!==0?R=$e(T):(H&=ue,H!==0?R=$e(H):y||(y=ue&~o,y!==0&&(R=$e(y))))):(ue=T&~N,ue!==0?R=$e(ue):H!==0?R=$e(H):y||(y=T&~o,y!==0&&(R=$e(y)))),R===0?0:u!==0&&u!==R&&(u&N)===0&&(N=R&-R,y=u&-u,N>=y||N===32&&(y&4194048)!==0)?u:R}function pr(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function un(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ti(){var o=Pn;return Pn<<=1,(Pn&62914560)===0&&(Pn=4194304),o}function Ir(o){for(var u=[],y=0;31>y;y++)u.push(o);return u}function si(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Qi(o,u,y,T,R,N){var H=o.pendingLanes;o.pendingLanes=y,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=y,o.entangledLanes&=y,o.errorRecoveryDisabledLanes&=y,o.shellSuspendCounter=0;var ue=o.entanglements,Oe=o.expirationTimes,et=o.hiddenUpdates;for(y=H&~y;0<y;){var ft=31-ht(y),bt=1<<ft;ue[ft]=0,Oe[ft]=-1;var nt=et[ft];if(nt!==null)for(et[ft]=null,ft=0;ft<nt.length;ft++){var st=nt[ft];st!==null&&(st.lane&=-536870913)}y&=~bt}T!==0&&pi(o,T,0),N!==0&&R===0&&o.tag!==0&&(o.suspendedLanes|=N&~(H&~u))}function pi(o,u,y){o.pendingLanes|=u,o.suspendedLanes&=~u;var T=31-ht(u);o.entangledLanes|=u,o.entanglements[T]=o.entanglements[T]|1073741824|y&261930}function mr(o,u){var y=o.entangledLanes|=u;for(o=o.entanglements;y;){var T=31-ht(y),R=1<<T;R&u|o[T]&u&&(o[T]|=u),y&=~R}}function Su(o,u){var y=u&-u;return y=(y&42)!==0?1:Ac(y),(y&(o.suspendedLanes|u))!==0?0:y}function Ac(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function wt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ca(){var o=ut.p;return o!==0?o:(o=window.event,o===void 0?32:Md(o.type))}function ua(o,u){var y=ut.p;try{return ut.p=o,u()}finally{ut.p=y}}var Bs=Math.random().toString(36).slice(2),wi="__reactFiber$"+Bs,Ct="__reactProps$"+Bs,dn="__reactContainer$"+Bs,vn="__reactEvents$"+Bs,Ya="__reactListeners$"+Bs,af="__reactHandles$"+Bs,To="__reactResources$"+Bs,hn="__reactMarker$"+Bs;function Mc(o){delete o[wi],delete o[Ct],delete o[vn],delete o[Ya],delete o[af]}function So(o){var u=o[wi];if(u)return u;for(var y=o.parentNode;y;){if(u=y[dn]||y[wi]){if(y=u.alternate,u.child!==null||y!==null&&y.child!==null)for(o=gm(o);o!==null;){if(y=o[wi])return y;o=gm(o)}return u}o=y,y=o.parentNode}return null}function ll(o){if(o=o[wi]||o[dn]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function Eo(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(h(33))}function Ao(o){var u=o[To];return u||(u=o[To]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Ki(o){o[hn]=!0}var Eu=new Set,ha={};function zn(o,u){cl(o,u),cl(o+"Capture",u)}function cl(o,u){for(ha[o]=u,o=0;o<u.length;o++)Eu.add(u[o])}var Au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mu={},Vl={};function Vs(o){return qa.call(Vl,o)?!0:qa.call(Mu,o)?!1:Au.test(o)?Vl[o]=!0:(Mu[o]=!0,!1)}function kh(o,u,y){if(Vs(u))if(y===null)o.removeAttribute(u);else{switch(typeof y){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var T=u.toLowerCase().slice(0,5);if(T!=="data-"&&T!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+y)}}function Mo(o,u,y){if(y===null)o.removeAttribute(u);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+y)}}function ms(o,u,y,T){if(T===null)o.removeAttribute(y);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(y);return}o.setAttributeNS(u,y,""+T)}}function qn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Sp(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function og(o,u,y){var T=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var R=T.get,N=T.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return R.call(this)},set:function(H){y=""+H,N.call(this,H)}}),Object.defineProperty(o,u,{enumerable:T.enumerable}),{getValue:function(){return y},setValue:function(H){y=""+H},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Cc(o){if(!o._valueTracker){var u=Sp(o)?"checked":"value";o._valueTracker=og(o,u,""+o[u])}}function Ep(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var y=u.getValue(),T="";return o&&(T=Sp(o)?o.checked?"true":"false":o.value),o=T,o!==y?(u.setValue(o),!0):!1}function Oh(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var lg=/[\n"\\]/g;function ba(o){return o.replace(lg,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Lh(o,u,y,T,R,N,H,ue){o.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.type=H:o.removeAttribute("type"),u!=null?H==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+qn(u)):o.value!==""+qn(u)&&(o.value=""+qn(u)):H!=="submit"&&H!=="reset"||o.removeAttribute("value"),u!=null?Nh(o,H,qn(u)):y!=null?Nh(o,H,qn(y)):T!=null&&o.removeAttribute("value"),R==null&&N!=null&&(o.defaultChecked=!!N),R!=null&&(o.checked=R&&typeof R!="function"&&typeof R!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?o.name=""+qn(ue):o.removeAttribute("name")}function sf(o,u,y,T,R,N,H,ue){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.type=N),u!=null||y!=null){if(!(N!=="submit"&&N!=="reset"||u!=null)){Cc(o);return}y=y!=null?""+qn(y):"",u=u!=null?""+qn(u):y,ue||u===o.value||(o.value=u),o.defaultValue=u}T=T??R,T=typeof T!="function"&&typeof T!="symbol"&&!!T,o.checked=ue?o.checked:!!T,o.defaultChecked=!!T,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(o.name=H),Cc(o)}function Nh(o,u,y){u==="number"&&Oh(o.ownerDocument)===o||o.defaultValue===""+y||(o.defaultValue=""+y)}function Ul(o,u,y,T){if(o=o.options,u){u={};for(var R=0;R<y.length;R++)u["$"+y[R]]=!0;for(y=0;y<o.length;y++)R=u.hasOwnProperty("$"+o[y].value),o[y].selected!==R&&(o[y].selected=R),R&&T&&(o[y].defaultSelected=!0)}else{for(y=""+qn(y),u=null,R=0;R<o.length;R++){if(o[R].value===y){o[R].selected=!0,T&&(o[R].defaultSelected=!0);return}u!==null||o[R].disabled||(u=o[R])}u!==null&&(u.selected=!0)}}function cg(o,u,y){if(u!=null&&(u=""+qn(u),u!==o.value&&(o.value=u),y==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=y!=null?""+qn(y):""}function Cu(o,u,y,T){if(u==null){if(T!=null){if(y!=null)throw Error(h(92));if(Yt(T)){if(1<T.length)throw Error(h(93));T=T[0]}y=T}y==null&&(y=""),u=y}y=qn(u),o.defaultValue=y,T=o.textContent,T===y&&T!==""&&T!==null&&(o.value=T),Cc(o)}function ul(o,u){if(u){var y=o.firstChild;if(y&&y===o.lastChild&&y.nodeType===3){y.nodeValue=u;return}}o.textContent=u}var ug=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dc(o,u,y){var T=u.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?T?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":T?o.setProperty(u,y):typeof y!="number"||y===0||ug.has(u)?u==="float"?o.cssFloat=y:o[u]=(""+y).trim():o[u]=y+"px"}function of(o,u,y){if(u!=null&&typeof u!="object")throw Error(h(62));if(o=o.style,y!=null){for(var T in y)!y.hasOwnProperty(T)||u!=null&&u.hasOwnProperty(T)||(T.indexOf("--")===0?o.setProperty(T,""):T==="float"?o.cssFloat="":o[T]="");for(var R in u)T=u[R],u.hasOwnProperty(R)&&y[R]!==T&&Dc(o,R,T)}else for(var N in u)u.hasOwnProperty(N)&&Dc(o,N,u[N])}function Ic(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Du=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _n(o){return Du.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Us(){}var Ap=null;function Ph(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Rr=null,gr=null;function Bi(o){var u=ll(o);if(u&&(o=u.stateNode)){var y=o[Ct]||null;e:switch(o=u.stateNode,u.type){case"input":if(Lh(o,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),u=y.name,y.type==="radio"&&u!=null){for(y=o;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+ba(""+u)+'"][type="radio"]'),u=0;u<y.length;u++){var T=y[u];if(T!==o&&T.form===o.form){var R=T[Ct]||null;if(!R)throw Error(h(90));Lh(T,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(u=0;u<y.length;u++)T=y[u],T.form===o.form&&Ep(T)}break e;case"textarea":cg(o,y.value,y.defaultValue);break e;case"select":u=y.value,u!=null&&Ul(o,!!y.multiple,u,!1)}}}var tn=!1;function mi(o,u,y){if(tn)return o(u,y);tn=!0;try{var T=o(u);return T}finally{if(tn=!1,(Rr!==null||gr!==null)&&(lm(),Rr&&(u=Rr,o=gr,gr=Rr=null,Bi(u),o)))for(u=0;u<o.length;u++)Bi(o[u])}}function gs(o,u){var y=o.stateNode;if(y===null)return null;var T=y[Ct]||null;if(T===null)return null;y=T[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(o=o.type,T=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!T;break e;default:o=!1}if(o)return null;if(y&&typeof y!="function")throw Error(h(231,u,typeof y));return y}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xa=!1;if(Ji)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){xa=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{xa=!1}var Ha=null,Co=null,Vi=null;function $l(){if(Vi)return Vi;var o,u=Co,y=u.length,T,R="value"in Ha?Ha.value:Ha.textContent,N=R.length;for(o=0;o<y&&u[o]===R[o];o++);var H=y-o;for(T=1;T<=H&&u[y-T]===R[N-T];T++);return Vi=R.slice(o,1<T?1-T:void 0)}function Wa(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Rc(){return!0}function wa(){return!1}function Er(o){function u(y,T,R,N,H){this._reactName=y,this._targetInst=R,this.type=T,this.nativeEvent=N,this.target=H,this.currentTarget=null;for(var ue in o)o.hasOwnProperty(ue)&&(y=o[ue],this[ue]=y?y(N):N[ue]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Rc:wa,this.isPropagationStopped=wa,this}return z(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Rc)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Rc)},persist:function(){},isPersistent:Rc}),u}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zh=Er(Ta),kc=z({},Ta,{view:0,detail:0}),Oc=Er(kc),oi,Zl,Mn,fn=z({},kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Mn&&(Mn&&o.type==="mousemove"?(oi=o.screenX-Mn.screenX,Zl=o.screenY-Mn.screenY):Zl=oi=0,Mn=o),oi)},movementY:function(o){return"movementY"in o?o.movementY:Zl}}),Lc=Er(fn),Fn=z({},fn,{dataTransfer:0}),Fh=Er(Fn),ys=z({},kc,{relatedTarget:0}),ql=Er(ys),Yl=z({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),hg=Er(Yl),jh=z({},Ta,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Mp=Er(jh),x0=z({},Ta,{data:0}),Cp=Er(x0),Sa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Do={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ui={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nc(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Ui[o])?!!u[o]:!1}function Bh(){return Nc}var Vh=z({},kc,{key:function(o){if(o.key){var u=Sa[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Wa(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Do[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bh,charCode:function(o){return o.type==="keypress"?Wa(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Wa(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),er=Er(Vh),dg=z({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lf=Er(dg),fg=z({},kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bh}),w0=Er(fg),Iu=z({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),cf=Er(Iu),Ru=z({},fn,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Dp=Er(Ru),Uh=z({},Ta,{newState:0,oldState:0}),ku=Er(Uh),Ou=[9,13,27,32],lr=Ji&&"CompositionEvent"in window,Lu=null;Ji&&"documentMode"in document&&(Lu=document.documentMode);var Nu=Ji&&"TextEvent"in window&&!Lu,Pu=Ji&&(!lr||Lu&&8<Lu&&11>=Lu),Hl=" ",pg=!1;function Gh(o,u){switch(o){case"keyup":return Ou.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mg(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Gs=!1;function uf(o,u){switch(o){case"compositionend":return mg(u);case"keypress":return u.which!==32?null:(pg=!0,Hl);case"textInput":return o=u.data,o===Hl&&pg?null:o;default:return null}}function gg(o,u){if(Gs)return o==="compositionend"||!lr&&Gh(o,u)?(o=$l(),Vi=Co=Ha=null,Gs=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Pu&&u.locale!=="ko"?null:u.data;default:return null}}var yg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hf(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!yg[o.type]:u==="textarea"}function df(o,u,y,T){Rr?gr?gr.push(T):gr=[T]:Rr=T,u=dm(u,"onChange"),0<u.length&&(y=new zh("onChange","change",null,y,T),o.push({event:y,listeners:u}))}var Pc=null,zu=null;function _g(o){Tb(o,0)}function $h(o){var u=Eo(o);if(Ep(u))return o}function Wl(o,u){if(o==="change")return u}var Ip=!1;if(Ji){var Zh;if(Ji){var Xl="oninput"in document;if(!Xl){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),Xl=typeof Rp.oninput=="function"}Zh=Xl}else Zh=!1;Ip=Zh&&(!document.documentMode||9<document.documentMode)}function qh(){Pc&&(Pc.detachEvent("onpropertychange",vg),zu=Pc=null)}function vg(o){if(o.propertyName==="value"&&$h(zu)){var u=[];df(u,zu,o,Ph(o)),mi(_g,u)}}function T0(o,u,y){o==="focusin"?(qh(),Pc=u,zu=y,Pc.attachEvent("onpropertychange",vg)):o==="focusout"&&qh()}function bg(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return $h(zu)}function Yh(o,u){if(o==="click")return $h(u)}function xg(o,u){if(o==="input"||o==="change")return $h(u)}function kp(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Ia=typeof Object.is=="function"?Object.is:kp;function Ql(o,u){if(Ia(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var y=Object.keys(o),T=Object.keys(u);if(y.length!==T.length)return!1;for(T=0;T<y.length;T++){var R=y[T];if(!qa.call(u,R)||!Ia(o[R],u[R]))return!1}return!0}function _s(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Hh(o,u){var y=_s(o);o=0;for(var T;y;){if(y.nodeType===3){if(T=o+y.textContent.length,o<=u&&T>=u)return{node:y,offset:u-o};o=T}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=_s(y)}}function ff(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?ff(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function pf(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Oh(o.document);u instanceof o.HTMLIFrameElement;){try{var y=typeof u.contentWindow.location.href=="string"}catch{y=!1}if(y)o=u.contentWindow;else break;u=Oh(o.document)}return u}function Wh(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var mf=Ji&&"documentMode"in document&&11>=document.documentMode,vs=null,Xh=null,Qh=null,gf=!1;function wg(o,u,y){var T=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;gf||vs==null||vs!==Oh(T)||(T=vs,"selectionStart"in T&&Wh(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),Qh&&Ql(Qh,T)||(Qh=T,T=dm(Xh,"onSelect"),0<T.length&&(u=new zh("onSelect","select",null,u,y),o.push({event:u,listeners:T}),u.target=vs)))}function zc(o,u){var y={};return y[o.toLowerCase()]=u.toLowerCase(),y["Webkit"+o]="webkit"+u,y["Moz"+o]="moz"+u,y}var Fc={animationend:zc("Animation","AnimationEnd"),animationiteration:zc("Animation","AnimationIteration"),animationstart:zc("Animation","AnimationStart"),transitionrun:zc("Transition","TransitionRun"),transitionstart:zc("Transition","TransitionStart"),transitioncancel:zc("Transition","TransitionCancel"),transitionend:zc("Transition","TransitionEnd")},Op={},Yn={};Ji&&(Yn=document.createElement("div").style,"AnimationEvent"in window||(delete Fc.animationend.animation,delete Fc.animationiteration.animation,delete Fc.animationstart.animation),"TransitionEvent"in window||delete Fc.transitionend.transition);function Io(o){if(Op[o])return Op[o];if(!Fc[o])return o;var u=Fc[o],y;for(y in u)if(u.hasOwnProperty(y)&&y in Yn)return Op[o]=u[y];return o}var Kh=Io("animationend"),Jh=Io("animationiteration"),yf=Io("animationstart"),jc=Io("transitionrun"),ed=Io("transitionstart"),Fu=Io("transitioncancel"),Xa=Io("transitionend"),Lp=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function Qa(o,u){Lp.set(o,u),zn(u,[o])}var Ro=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Ea=[],hl=0,Bc=0;function Vc(){for(var o=hl,u=Bc=hl=0;u<o;){var y=Ea[u];Ea[u++]=null;var T=Ea[u];Ea[u++]=null;var R=Ea[u];Ea[u++]=null;var N=Ea[u];if(Ea[u++]=null,T!==null&&R!==null){var H=T.pending;H===null?R.next=R:(R.next=H.next,H.next=R),T.pending=R}N!==0&&Np(y,R,N)}}function td(o,u,y,T){Ea[hl++]=o,Ea[hl++]=u,Ea[hl++]=y,Ea[hl++]=T,Bc|=T,o.lanes|=T,o=o.alternate,o!==null&&(o.lanes|=T)}function Kl(o,u,y,T){return td(o,u,y,T),ju(o)}function bs(o,u){return td(o,null,null,u),ju(o)}function Np(o,u,y){o.lanes|=y;var T=o.alternate;T!==null&&(T.lanes|=y);for(var R=!1,N=o.return;N!==null;)N.childLanes|=y,T=N.alternate,T!==null&&(T.childLanes|=y),N.tag===22&&(o=N.stateNode,o===null||o._visibility&1||(R=!0)),o=N,N=N.return;return o.tag===3?(N=o.stateNode,R&&u!==null&&(R=31-ht(y),o=N.hiddenUpdates,T=o[R],T===null?o[R]=[u]:T.push(u),u.lane=y|536870912),N):null}function ju(o){if(50<om)throw om=0,V0=null,Error(h(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var mn={};function vf(o,u,y,T){this.tag=o,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ka(o,u,y,T){return new vf(o,u,y,T)}function bf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Ja(o,u){var y=o.alternate;return y===null?(y=Ka(o.tag,u,o.key,o.mode),y.elementType=o.elementType,y.type=o.type,y.stateNode=o.stateNode,y.alternate=o,o.alternate=y):(y.pendingProps=u,y.type=o.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=o.flags&65011712,y.childLanes=o.childLanes,y.lanes=o.lanes,y.child=o.child,y.memoizedProps=o.memoizedProps,y.memoizedState=o.memoizedState,y.updateQueue=o.updateQueue,u=o.dependencies,y.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},y.sibling=o.sibling,y.index=o.index,y.ref=o.ref,y.refCleanup=o.refCleanup,y}function Tg(o,u){o.flags&=65011714;var y=o.alternate;return y===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=y.childLanes,o.lanes=y.lanes,o.child=y.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=y.memoizedProps,o.memoizedState=y.memoizedState,o.updateQueue=y.updateQueue,o.type=y.type,u=y.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function xf(o,u,y,T,R,N){var H=0;if(T=o,typeof o=="function")bf(o)&&(H=1);else if(typeof o=="string")H=gy(o,y,St.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case Te:return o=Ka(31,y,u,R),o.elementType=Te,o.lanes=N,o;case ie:return Jl(y.children,R,N,u);case q:H=8,R|=24;break;case fe:return o=Ka(12,y,u,R|2),o.elementType=fe,o.lanes=N,o;case Ce:return o=Ka(13,y,u,R),o.elementType=Ce,o.lanes=N,o;case Re:return o=Ka(19,y,u,R),o.elementType=Re,o.lanes=N,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case we:H=10;break e;case Ee:H=9;break e;case ze:H=11;break e;case Ne:H=14;break e;case at:H=16,T=null;break e}H=29,y=Error(h(130,o===null?"null":typeof o,"")),T=null}return u=Ka(H,y,u,R),u.elementType=o,u.type=T,u.lanes=N,u}function Jl(o,u,y,T){return o=Ka(7,o,T,u),o.lanes=y,o}function Pp(o,u,y){return o=Ka(6,o,null,u),o.lanes=y,o}function wf(o){var u=Ka(18,null,null,0);return u.stateNode=o,u}function ec(o,u,y){return u=Ka(4,o.children!==null?o.children:[],o.key,u),u.lanes=y,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Bu=new WeakMap;function Aa(o,u){if(typeof o=="object"&&o!==null){var y=Bu.get(o);return y!==void 0?y:(u={value:o,source:u,stack:Za(u)},Bu.set(o,u),u)}return{value:o,source:u,stack:Za(u)}}var tc=[],nc=0,Uc=null,ic=0,Or=[],Vr=0,ko=null,Oo=1,Ra="";function dl(o,u){tc[nc++]=ic,tc[nc++]=Uc,Uc=o,ic=u}function zp(o,u,y){Or[Vr++]=Oo,Or[Vr++]=Ra,Or[Vr++]=ko,ko=o;var T=Oo;o=Ra;var R=32-ht(T)-1;T&=~(1<<R),y+=1;var N=32-ht(u)+R;if(30<N){var H=R-R%5;N=(T&(1<<H)-1).toString(32),T>>=H,R-=H,Oo=1<<32-ht(u)+R|y<<R|T,Ra=N+o}else Oo=1<<N|y<<R|T,Ra=o}function Gc(o){o.return!==null&&(dl(o,1),zp(o,1,0))}function Vu(o){for(;o===Uc;)Uc=tc[--nc],tc[nc]=null,ic=tc[--nc],tc[nc]=null;for(;o===ko;)ko=Or[--Vr],Or[Vr]=null,Ra=Or[--Vr],Or[Vr]=null,Oo=Or[--Vr],Or[Vr]=null}function Fp(o,u){Or[Vr++]=Oo,Or[Vr++]=Ra,Or[Vr++]=ko,Oo=u.id,Ra=u.overflow,ko=o}var Ur=null,gi=null,Ln=!1,fl=null,es=!1,Yi=Error(h(519));function ka(o){var u=Error(h(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(Aa(u,o)),Yi}function Oa(o){var u=o.stateNode,y=o.type,T=o.memoizedProps;switch(u[wi]=o,u[Ct]=T,y){case"dialog":Gn("cancel",u),Gn("close",u);break;case"iframe":case"object":case"embed":Gn("load",u);break;case"video":case"audio":for(y=0;y<nh.length;y++)Gn(nh[y],u);break;case"source":Gn("error",u);break;case"img":case"image":case"link":Gn("error",u),Gn("load",u);break;case"details":Gn("toggle",u);break;case"input":Gn("invalid",u),sf(u,T.value,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name,!0);break;case"select":Gn("invalid",u);break;case"textarea":Gn("invalid",u),Cu(u,T.value,T.defaultValue,T.children)}y=T.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||u.textContent===""+y||T.suppressHydrationWarning===!0||t_(u.textContent,y)?(T.popover!=null&&(Gn("beforetoggle",u),Gn("toggle",u)),T.onScroll!=null&&Gn("scroll",u),T.onScrollEnd!=null&&Gn("scrollend",u),T.onClick!=null&&(u.onclick=Us),u=!0):u=!1,u||ka(o,!0)}function nd(o){for(Ur=o.return;Ur;)switch(Ur.tag){case 5:case 31:case 13:es=!1;return;case 27:case 3:es=!0;return;default:Ur=Ur.return}}function Lo(o){if(o!==Ur)return!1;if(!Ln)return nd(o),Ln=!0,!1;var u=o.tag,y;if((y=u!==3&&u!==27)&&((y=u===5)&&(y=o.type,y=!(y!=="form"&&y!=="button")||cy(o.type,o.memoizedProps)),y=!y),y&&gi&&ka(o),nd(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(h(317));gi=Xr(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(h(317));gi=Xr(o)}else u===27?(u=gi,ah(o.type)?(o=ls,ls=null,gi=o):gi=u):gi=Ur?to(o.stateNode.nextSibling):null;return!0}function No(){gi=Ur=null,Ln=!1}function Po(){var o=fl;return o!==null&&(Is===null?Is=o:Is.push.apply(Is,o),fl=null),o}function pl(o){fl===null?fl=[o]:fl.push(o)}var ml=Le(null),xs=null,zo=null;function gl(o,u,y){xt(ml,u._currentValue),u._currentValue=y}function Fo(o){o._currentValue=ml.current,tt(ml)}function Tf(o,u,y){for(;o!==null;){var T=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,T!==null&&(T.childLanes|=u)):T!==null&&(T.childLanes&u)!==u&&(T.childLanes|=u),o===y)break;o=o.return}}function Sf(o,u,y,T){var R=o.child;for(R!==null&&(R.return=o);R!==null;){var N=R.dependencies;if(N!==null){var H=R.child;N=N.firstContext;e:for(;N!==null;){var ue=N;N=R;for(var Oe=0;Oe<u.length;Oe++)if(ue.context===u[Oe]){N.lanes|=y,ue=N.alternate,ue!==null&&(ue.lanes|=y),Tf(N.return,y,o),T||(H=null);break e}N=ue.next}}else if(R.tag===18){if(H=R.return,H===null)throw Error(h(341));H.lanes|=y,N=H.alternate,N!==null&&(N.lanes|=y),Tf(H,y,o),H=null}else H=R.child;if(H!==null)H.return=R;else for(H=R;H!==null;){if(H===o){H=null;break}if(R=H.sibling,R!==null){R.return=H.return,H=R;break}H=H.return}R=H}}function ts(o,u,y,T){o=null;for(var R=u,N=!1;R!==null;){if(!N){if((R.flags&524288)!==0)N=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var H=R.alternate;if(H===null)throw Error(h(387));if(H=H.memoizedProps,H!==null){var ue=R.type;Ia(R.pendingProps.value,H.value)||(o!==null?o.push(ue):o=[ue])}}else if(R===Jt.current){if(H=R.alternate,H===null)throw Error(h(387));H.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(o!==null?o.push(ep):o=[ep])}R=R.return}o!==null&&Sf(u,o,y,T),u.flags|=262144}function Uu(o){for(o=o.firstContext;o!==null;){if(!Ia(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function yl(o){xs=o,zo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function yr(o){return Ef(xs,o)}function id(o,u){return xs===null&&yl(o),Ef(o,u)}function Ef(o,u){var y=u._currentValue;if(u={context:u,memoizedValue:y,next:null},zo===null){if(o===null)throw Error(h(308));zo=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else zo=zo.next=u;return y}var jp=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(y,T){o.push(T)}};this.abort=function(){u.aborted=!0,o.forEach(function(y){return y()})}},Sg=i.unstable_scheduleCallback,Bp=i.unstable_NormalPriority,cr={$$typeof:we,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jo(){return{controller:new jp,data:new Map,refCount:0}}function Gu(o){o.refCount--,o.refCount===0&&Sg(Bp,function(){o.controller.abort()})}var da=null,ns=0,$c=0,fa=null;function S0(o,u){if(da===null){var y=da=[];ns=0,$c=X0(),fa={status:"pending",value:void 0,then:function(T){y.push(T)}}}return ns++,u.then($u,$u),u}function $u(){if(--ns===0&&da!==null){fa!==null&&(fa.status="fulfilled");var o=da;da=null,$c=0,fa=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function rd(o,u){var y=[],T={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return o.then(function(){T.status="fulfilled",T.value=u;for(var R=0;R<y.length;R++)(0,y[R])(u)},function(R){for(T.status="rejected",T.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),T}var Lr=Ve.S;Ve.S=function(o,u){sb=ji(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&S0(o,u),Lr!==null&&Lr(o,u)};var $s=Le(null);function Af(){var o=$s.current;return o!==null?o:Zi.pooledCache}function Mf(o,u){u===null?xt($s,$s.current):xt($s,u.pool)}function Eg(){var o=Af();return o===null?null:{parent:cr._currentValue,pool:o}}var Zs=Error(h(460)),rc=Error(h(474)),La=Error(h(542)),Pt={then:function(){}};function ad(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Cf(o,u,y){switch(y=o[y],y===void 0?o.push(u):y!==u&&(u.then(Us,Us),u=y),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Df(o),o;default:if(typeof u.status=="string")u.then(Us,Us);else{if(o=Zi,o!==null&&100<o.shellSuspendCounter)throw Error(h(482));o=u,o.status="pending",o.then(function(T){if(u.status==="pending"){var R=u;R.status="fulfilled",R.value=T}},function(T){if(u.status==="pending"){var R=u;R.status="rejected",R.reason=T}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Df(o),o}throw qs=u,Zs}}function ws(o){try{var u=o._init;return u(o._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(qs=y,Zs):y}}var qs=null;function Zu(){if(qs===null)throw Error(h(459));var o=qs;return qs=null,o}function Df(o){if(o===Zs||o===La)throw Error(h(483))}var Bo=null,Zc=0;function sd(o){var u=Zc;return Zc+=1,Bo===null&&(Bo=[]),Cf(Bo,o,u)}function Vo(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function If(o,u){throw u.$$typeof===V?Error(h(525)):(o=Object.prototype.toString.call(u),Error(h(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function od(o){function u(Ge,Be){if(o){var Ke=Ge.deletions;Ke===null?(Ge.deletions=[Be],Ge.flags|=16):Ke.push(Be)}}function y(Ge,Be){if(!o)return null;for(;Be!==null;)u(Ge,Be),Be=Be.sibling;return null}function T(Ge){for(var Be=new Map;Ge!==null;)Ge.key!==null?Be.set(Ge.key,Ge):Be.set(Ge.index,Ge),Ge=Ge.sibling;return Be}function R(Ge,Be){return Ge=Ja(Ge,Be),Ge.index=0,Ge.sibling=null,Ge}function N(Ge,Be,Ke){return Ge.index=Ke,o?(Ke=Ge.alternate,Ke!==null?(Ke=Ke.index,Ke<Be?(Ge.flags|=67108866,Be):Ke):(Ge.flags|=67108866,Be)):(Ge.flags|=1048576,Be)}function H(Ge){return o&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function ue(Ge,Be,Ke,yt){return Be===null||Be.tag!==6?(Be=Pp(Ke,Ge.mode,yt),Be.return=Ge,Be):(Be=R(Be,Ke),Be.return=Ge,Be)}function Oe(Ge,Be,Ke,yt){var rn=Ke.type;return rn===ie?ft(Ge,Be,Ke.props.children,yt,Ke.key):Be!==null&&(Be.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===at&&ws(rn)===Be.type)?(Be=R(Be,Ke.props),Vo(Be,Ke),Be.return=Ge,Be):(Be=xf(Ke.type,Ke.key,Ke.props,null,Ge.mode,yt),Vo(Be,Ke),Be.return=Ge,Be)}function et(Ge,Be,Ke,yt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Ke.containerInfo||Be.stateNode.implementation!==Ke.implementation?(Be=ec(Ke,Ge.mode,yt),Be.return=Ge,Be):(Be=R(Be,Ke.children||[]),Be.return=Ge,Be)}function ft(Ge,Be,Ke,yt,rn){return Be===null||Be.tag!==7?(Be=Jl(Ke,Ge.mode,yt,rn),Be.return=Ge,Be):(Be=R(Be,Ke),Be.return=Ge,Be)}function bt(Ge,Be,Ke){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Be=Pp(""+Be,Ge.mode,Ke),Be.return=Ge,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case Y:return Ke=xf(Be.type,Be.key,Be.props,null,Ge.mode,Ke),Vo(Ke,Be),Ke.return=Ge,Ke;case ee:return Be=ec(Be,Ge.mode,Ke),Be.return=Ge,Be;case at:return Be=ws(Be),bt(Ge,Be,Ke)}if(Yt(Be)||Mt(Be))return Be=Jl(Be,Ge.mode,Ke,null),Be.return=Ge,Be;if(typeof Be.then=="function")return bt(Ge,sd(Be),Ke);if(Be.$$typeof===we)return bt(Ge,id(Ge,Be),Ke);If(Ge,Be)}return null}function nt(Ge,Be,Ke,yt){var rn=Be!==null?Be.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return rn!==null?null:ue(Ge,Be,""+Ke,yt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case Y:return Ke.key===rn?Oe(Ge,Be,Ke,yt):null;case ee:return Ke.key===rn?et(Ge,Be,Ke,yt):null;case at:return Ke=ws(Ke),nt(Ge,Be,Ke,yt)}if(Yt(Ke)||Mt(Ke))return rn!==null?null:ft(Ge,Be,Ke,yt,null);if(typeof Ke.then=="function")return nt(Ge,Be,sd(Ke),yt);if(Ke.$$typeof===we)return nt(Ge,Be,id(Ge,Ke),yt);If(Ge,Ke)}return null}function st(Ge,Be,Ke,yt,rn){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return Ge=Ge.get(Ke)||null,ue(Be,Ge,""+yt,rn);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case Y:return Ge=Ge.get(yt.key===null?Ke:yt.key)||null,Oe(Be,Ge,yt,rn);case ee:return Ge=Ge.get(yt.key===null?Ke:yt.key)||null,et(Be,Ge,yt,rn);case at:return yt=ws(yt),st(Ge,Be,Ke,yt,rn)}if(Yt(yt)||Mt(yt))return Ge=Ge.get(Ke)||null,ft(Be,Ge,yt,rn,null);if(typeof yt.then=="function")return st(Ge,Be,Ke,sd(yt),rn);if(yt.$$typeof===we)return st(Ge,Be,Ke,id(Be,yt),rn);If(Be,yt)}return null}function Wt(Ge,Be,Ke,yt){for(var rn=null,ui=null,Xt=Be,en=Be=0,jn=null;Xt!==null&&en<Ke.length;en++){Xt.index>en?(jn=Xt,Xt=null):jn=Xt.sibling;var ri=nt(Ge,Xt,Ke[en],yt);if(ri===null){Xt===null&&(Xt=jn);break}o&&Xt&&ri.alternate===null&&u(Ge,Xt),Be=N(ri,Be,en),ui===null?rn=ri:ui.sibling=ri,ui=ri,Xt=jn}if(en===Ke.length)return y(Ge,Xt),Ln&&dl(Ge,en),rn;if(Xt===null){for(;en<Ke.length;en++)Xt=bt(Ge,Ke[en],yt),Xt!==null&&(Be=N(Xt,Be,en),ui===null?rn=Xt:ui.sibling=Xt,ui=Xt);return Ln&&dl(Ge,en),rn}for(Xt=T(Xt);en<Ke.length;en++)jn=st(Xt,Ge,en,Ke[en],yt),jn!==null&&(o&&jn.alternate!==null&&Xt.delete(jn.key===null?en:jn.key),Be=N(jn,Be,en),ui===null?rn=jn:ui.sibling=jn,ui=jn);return o&&Xt.forEach(function(du){return u(Ge,du)}),Ln&&dl(Ge,en),rn}function sn(Ge,Be,Ke,yt){if(Ke==null)throw Error(h(151));for(var rn=null,ui=null,Xt=Be,en=Be=0,jn=null,ri=Ke.next();Xt!==null&&!ri.done;en++,ri=Ke.next()){Xt.index>en?(jn=Xt,Xt=null):jn=Xt.sibling;var du=nt(Ge,Xt,ri.value,yt);if(du===null){Xt===null&&(Xt=jn);break}o&&Xt&&du.alternate===null&&u(Ge,Xt),Be=N(du,Be,en),ui===null?rn=du:ui.sibling=du,ui=du,Xt=jn}if(ri.done)return y(Ge,Xt),Ln&&dl(Ge,en),rn;if(Xt===null){for(;!ri.done;en++,ri=Ke.next())ri=bt(Ge,ri.value,yt),ri!==null&&(Be=N(ri,Be,en),ui===null?rn=ri:ui.sibling=ri,ui=ri);return Ln&&dl(Ge,en),rn}for(Xt=T(Xt);!ri.done;en++,ri=Ke.next())ri=st(Xt,Ge,en,ri.value,yt),ri!==null&&(o&&ri.alternate!==null&&Xt.delete(ri.key===null?en:ri.key),Be=N(ri,Be,en),ui===null?rn=ri:ui.sibling=ri,ui=ri);return o&&Xt.forEach(function(T_){return u(Ge,T_)}),Ln&&dl(Ge,en),rn}function Ei(Ge,Be,Ke,yt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===ie&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case Y:e:{for(var rn=Ke.key;Be!==null;){if(Be.key===rn){if(rn=Ke.type,rn===ie){if(Be.tag===7){y(Ge,Be.sibling),yt=R(Be,Ke.props.children),yt.return=Ge,Ge=yt;break e}}else if(Be.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===at&&ws(rn)===Be.type){y(Ge,Be.sibling),yt=R(Be,Ke.props),Vo(yt,Ke),yt.return=Ge,Ge=yt;break e}y(Ge,Be);break}else u(Ge,Be);Be=Be.sibling}Ke.type===ie?(yt=Jl(Ke.props.children,Ge.mode,yt,Ke.key),yt.return=Ge,Ge=yt):(yt=xf(Ke.type,Ke.key,Ke.props,null,Ge.mode,yt),Vo(yt,Ke),yt.return=Ge,Ge=yt)}return H(Ge);case ee:e:{for(rn=Ke.key;Be!==null;){if(Be.key===rn)if(Be.tag===4&&Be.stateNode.containerInfo===Ke.containerInfo&&Be.stateNode.implementation===Ke.implementation){y(Ge,Be.sibling),yt=R(Be,Ke.children||[]),yt.return=Ge,Ge=yt;break e}else{y(Ge,Be);break}else u(Ge,Be);Be=Be.sibling}yt=ec(Ke,Ge.mode,yt),yt.return=Ge,Ge=yt}return H(Ge);case at:return Ke=ws(Ke),Ei(Ge,Be,Ke,yt)}if(Yt(Ke))return Wt(Ge,Be,Ke,yt);if(Mt(Ke)){if(rn=Mt(Ke),typeof rn!="function")throw Error(h(150));return Ke=rn.call(Ke),sn(Ge,Be,Ke,yt)}if(typeof Ke.then=="function")return Ei(Ge,Be,sd(Ke),yt);if(Ke.$$typeof===we)return Ei(Ge,Be,id(Ge,Ke),yt);If(Ge,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Be!==null&&Be.tag===6?(y(Ge,Be.sibling),yt=R(Be,Ke),yt.return=Ge,Ge=yt):(y(Ge,Be),yt=Pp(Ke,Ge.mode,yt),yt.return=Ge,Ge=yt),H(Ge)):y(Ge,Be)}return function(Ge,Be,Ke,yt){try{Zc=0;var rn=Ei(Ge,Be,Ke,yt);return Bo=null,rn}catch(Xt){if(Xt===Zs||Xt===La)throw Xt;var ui=Ka(29,Xt,null,Ge.mode);return ui.lanes=yt,ui.return=Ge,ui}}}var Uo=od(!0),Vp=od(!1),Go=!1;function Rf(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ld(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function $o(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function _l(o,u,y){var T=o.updateQueue;if(T===null)return null;if(T=T.shared,(vi&2)!==0){var R=T.pending;return R===null?u.next=u:(u.next=R.next,R.next=u),T.pending=u,u=ju(o),Np(o,null,y),u}return td(o,T,u,y),ju(o)}function Ts(o,u,y){if(u=u.updateQueue,u!==null&&(u=u.shared,(y&4194048)!==0)){var T=u.lanes;T&=o.pendingLanes,y|=T,u.lanes=y,mr(o,y)}}function ni(o,u){var y=o.updateQueue,T=o.alternate;if(T!==null&&(T=T.updateQueue,y===T)){var R=null,N=null;if(y=y.firstBaseUpdate,y!==null){do{var H={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};N===null?R=N=H:N=N.next=H,y=y.next}while(y!==null);N===null?R=N=u:N=N.next=u}else R=N=u;y={baseState:T.baseState,firstBaseUpdate:R,lastBaseUpdate:N,shared:T.shared,callbacks:T.callbacks},o.updateQueue=y;return}o=y.lastBaseUpdate,o===null?y.firstBaseUpdate=u:o.next=u,y.lastBaseUpdate=u}var Up=!1;function vl(){if(Up){var o=fa;if(o!==null)throw o}}function ac(o,u,y,T){Up=!1;var R=o.updateQueue;Go=!1;var N=R.firstBaseUpdate,H=R.lastBaseUpdate,ue=R.shared.pending;if(ue!==null){R.shared.pending=null;var Oe=ue,et=Oe.next;Oe.next=null,H===null?N=et:H.next=et,H=Oe;var ft=o.alternate;ft!==null&&(ft=ft.updateQueue,ue=ft.lastBaseUpdate,ue!==H&&(ue===null?ft.firstBaseUpdate=et:ue.next=et,ft.lastBaseUpdate=Oe))}if(N!==null){var bt=R.baseState;H=0,ft=et=Oe=null,ue=N;do{var nt=ue.lane&-536870913,st=nt!==ue.lane;if(st?(Un&nt)===nt:(T&nt)===nt){nt!==0&&nt===$c&&(Up=!0),ft!==null&&(ft=ft.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var Wt=o,sn=ue;nt=u;var Ei=y;switch(sn.tag){case 1:if(Wt=sn.payload,typeof Wt=="function"){bt=Wt.call(Ei,bt,nt);break e}bt=Wt;break e;case 3:Wt.flags=Wt.flags&-65537|128;case 0:if(Wt=sn.payload,nt=typeof Wt=="function"?Wt.call(Ei,bt,nt):Wt,nt==null)break e;bt=z({},bt,nt);break e;case 2:Go=!0}}nt=ue.callback,nt!==null&&(o.flags|=64,st&&(o.flags|=8192),st=R.callbacks,st===null?R.callbacks=[nt]:st.push(nt))}else st={lane:nt,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},ft===null?(et=ft=st,Oe=bt):ft=ft.next=st,H|=nt;if(ue=ue.next,ue===null){if(ue=R.shared.pending,ue===null)break;st=ue,ue=st.next,st.next=null,R.lastBaseUpdate=st,R.shared.pending=null}}while(!0);ft===null&&(Oe=bt),R.baseState=Oe,R.firstBaseUpdate=et,R.lastBaseUpdate=ft,N===null&&(R.shared.lanes=0),au|=H,o.lanes=H,o.memoizedState=bt}}function cd(o,u){if(typeof o!="function")throw Error(h(191,o));o.call(u)}function kf(o,u){var y=o.callbacks;if(y!==null)for(o.callbacks=null,o=0;o<y.length;o++)cd(y[o],u)}var qc=Le(null),ud=Le(0);function Gp(o,u){o=ru,xt(ud,o),xt(qc,u),ru=o|u.baseLanes}function is(){xt(ud,ru),xt(qc,qc.current)}function Yc(){ru=ud.current,tt(qc),tt(ud)}var jt=Le(null),Gt=null;function Ss(o){var u=o.alternate;xt(tr,tr.current&1),xt(jt,o),Gt===null&&(u===null||qc.current!==null||u.memoizedState!==null)&&(Gt=o)}function qu(o){xt(tr,tr.current),xt(jt,o),Gt===null&&(Gt=o)}function hd(o){o.tag===22?(xt(tr,tr.current),xt(jt,o),Gt===null&&(Gt=o)):ur()}function ur(){xt(tr,tr.current),xt(jt,jt.current)}function Hi(o){tt(jt),Gt===o&&(Gt=null),tt(tr)}var tr=Le(0);function dd(o){for(var u=o;u!==null;){if(u.tag===13){var y=u.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Fa(y)||Mr(y)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var bl=0,En=null,Kn=null,xn=null,Gi=!1,Es=!1,Ys=!1,Hc=0,Wc=0,xl=null,$p=0;function ki(){throw Error(h(321))}function Hs(o,u){if(u===null)return!1;for(var y=0;y<u.length&&y<o.length;y++)if(!Ia(o[y],u[y]))return!1;return!0}function Yu(o,u,y,T,R,N){return bl=N,En=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Ve.H=o===null||o.memoizedState===null?_i:_r,Ys=!1,N=y(T,R),Ys=!1,Es&&(N=fd(u,y,T,R)),Hu(o),N}function Hu(o){Ve.H=ii;var u=Kn!==null&&Kn.next!==null;if(bl=0,xn=Kn=En=null,Gi=!1,Wc=0,xl=null,u)throw Error(h(300));o===null||Zr||(o=o.dependencies,o!==null&&Uu(o)&&(Zr=!0))}function fd(o,u,y,T){En=o;var R=0;do{if(Es&&(xl=null),Wc=0,Es=!1,25<=R)throw Error(h(301));if(R+=1,xn=Kn=null,o.updateQueue!=null){var N=o.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Ve.H=Ar,N=u(y,T)}while(Es);return N}function pd(){var o=Ve.H,u=o.useState()[0];return u=typeof u.then=="function"?Xc(u):u,o=o.useState()[0],(Kn!==null?Kn.memoizedState:null)!==o&&(En.flags|=1024),u}function md(){var o=Hc!==0;return Hc=0,o}function sc(o,u,y){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~y}function wl(o){if(Gi){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Gi=!1}bl=0,xn=Kn=En=null,Es=!1,Wc=Hc=0,xl=null}function ia(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?En.memoizedState=xn=o:xn=xn.next=o,xn}function $i(){if(Kn===null){var o=En.alternate;o=o!==null?o.memoizedState:null}else o=Kn.next;var u=xn===null?En.memoizedState:xn.next;if(u!==null)xn=u,Kn=o;else{if(o===null)throw En.alternate===null?Error(h(467)):Error(h(310));Kn=o,o={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},xn===null?En.memoizedState=xn=o:xn=xn.next=o}return xn}function Zo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xc(o){var u=Wc;return Wc+=1,xl===null&&(xl=[]),o=Cf(xl,o,u),u=En,(xn===null?u.memoizedState:xn.next)===null&&(u=u.alternate,Ve.H=u===null||u.memoizedState===null?_i:_r),o}function Qc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Xc(o);if(o.$$typeof===we)return yr(o)}throw Error(h(438,String(o)))}function Wu(o){var u=null,y=En.updateQueue;if(y!==null&&(u=y.memoCache),u==null){var T=En.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(u={data:T.data.map(function(R){return R.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),y===null&&(y=Zo(),En.updateQueue=y),y.memoCache=u,y=u.data[u.index],y===void 0)for(y=u.data[u.index]=Array(o),T=0;T<o;T++)y[T]=it;return u.index++,y}function Ws(o,u){return typeof u=="function"?u(o):u}function w(o){var u=$i();return t(u,Kn,o)}function t(o,u,y){var T=o.queue;if(T===null)throw Error(h(311));T.lastRenderedReducer=y;var R=o.baseQueue,N=T.pending;if(N!==null){if(R!==null){var H=R.next;R.next=N.next,N.next=H}u.baseQueue=R=N,T.pending=null}if(N=o.baseState,R===null)o.memoizedState=N;else{u=R.next;var ue=H=null,Oe=null,et=u,ft=!1;do{var bt=et.lane&-536870913;if(bt!==et.lane?(Un&bt)===bt:(bl&bt)===bt){var nt=et.revertLane;if(nt===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,gesture:null,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),bt===$c&&(ft=!0);else if((bl&nt)===nt){et=et.next,nt===$c&&(ft=!0);continue}else bt={lane:0,revertLane:et.revertLane,gesture:null,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Oe===null?(ue=Oe=bt,H=N):Oe=Oe.next=bt,En.lanes|=nt,au|=nt;bt=et.action,Ys&&y(N,bt),N=et.hasEagerState?et.eagerState:y(N,bt)}else nt={lane:bt,revertLane:et.revertLane,gesture:et.gesture,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Oe===null?(ue=Oe=nt,H=N):Oe=Oe.next=nt,En.lanes|=bt,au|=bt;et=et.next}while(et!==null&&et!==u);if(Oe===null?H=N:Oe.next=ue,!Ia(N,o.memoizedState)&&(Zr=!0,ft&&(y=fa,y!==null)))throw y;o.memoizedState=N,o.baseState=H,o.baseQueue=Oe,T.lastRenderedState=N}return R===null&&(T.lanes=0),[o.memoizedState,T.dispatch]}function l(o){var u=$i(),y=u.queue;if(y===null)throw Error(h(311));y.lastRenderedReducer=o;var T=y.dispatch,R=y.pending,N=u.memoizedState;if(R!==null){y.pending=null;var H=R=R.next;do N=o(N,H.action),H=H.next;while(H!==R);Ia(N,u.memoizedState)||(Zr=!0),u.memoizedState=N,u.baseQueue===null&&(u.baseState=N),y.lastRenderedState=N}return[N,T]}function p(o,u,y){var T=En,R=$i(),N=Ln;if(N){if(y===void 0)throw Error(h(407));y=y()}else y=u();var H=!Ia((Kn||R).memoizedState,y);if(H&&(R.memoizedState=y,Zr=!0),R=R.queue,Xe(M.bind(null,T,R,o),[o]),R.getSnapshot!==u||H||xn!==null&&xn.memoizedState.tag&1){if(T.flags|=2048,be(9,{destroy:void 0},S.bind(null,T,R,y,u),null),Zi===null)throw Error(h(349));N||(bl&127)!==0||v(T,u,y)}return y}function v(o,u,y){o.flags|=16384,o={getSnapshot:u,value:y},u=En.updateQueue,u===null?(u=Zo(),En.updateQueue=u,u.stores=[o]):(y=u.stores,y===null?u.stores=[o]:y.push(o))}function S(o,u,y,T){u.value=y,u.getSnapshot=T,I(u)&&L(o)}function M(o,u,y){return y(function(){I(u)&&L(o)})}function I(o){var u=o.getSnapshot;o=o.value;try{var y=u();return!Ia(o,y)}catch{return!0}}function L(o){var u=bs(o,2);u!==null&&ks(u,o,2)}function F(o){var u=ia();if(typeof o=="function"){var y=o;if(o=y(),Ys){He(!0);try{y()}finally{He(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:o},u}function B(o,u,y,T){return o.baseState=y,t(o,Kn,typeof T=="function"?T:Ws)}function Z(o,u,y,T,R){if(rs(o))throw Error(h(485));if(o=u.action,o!==null){var N={payload:R,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){N.listeners.push(H)}};Ve.T!==null?y(!0):N.isTransition=!1,T(N),y=u.pending,y===null?(N.next=u.pending=N,$(u,N)):(N.next=y.next,u.pending=y.next=N)}}function $(o,u){var y=u.action,T=u.payload,R=o.state;if(u.isTransition){var N=Ve.T,H={};Ve.T=H;try{var ue=y(R,T),Oe=Ve.S;Oe!==null&&Oe(H,ue),K(o,u,ue)}catch(et){pe(o,u,et)}finally{N!==null&&H.types!==null&&(N.types=H.types),Ve.T=N}}else try{N=y(R,T),K(o,u,N)}catch(et){pe(o,u,et)}}function K(o,u,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(T){se(o,u,T)},function(T){return pe(o,u,T)}):se(o,u,y)}function se(o,u,y){u.status="fulfilled",u.value=y,ge(u),o.state=y,u=o.pending,u!==null&&(y=u.next,y===u?o.pending=null:(y=y.next,u.next=y,$(o,y)))}function pe(o,u,y){var T=o.pending;if(o.pending=null,T!==null){T=T.next;do u.status="rejected",u.reason=y,ge(u),u=u.next;while(u!==T)}o.action=null}function ge(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function me(o,u){return u}function _e(o,u){if(Ln){var y=Zi.formState;if(y!==null){e:{var T=En;if(Ln){if(gi){t:{for(var R=gi,N=es;R.nodeType!==8;){if(!N){R=null;break t}if(R=to(R.nextSibling),R===null){R=null;break t}}N=R.data,R=N==="F!"||N==="F"?R:null}if(R){gi=to(R.nextSibling),T=R.data==="F!";break e}}ka(T)}T=!1}T&&(u=y[0])}}return y=ia(),y.memoizedState=y.baseState=u,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:me,lastRenderedState:u},y.queue=T,y=Xu.bind(null,En,T),T.dispatch=y,T=F(!1),N=Pa.bind(null,En,!1,T.queue),T=ia(),R={state:u,dispatch:null,action:o,pending:null},T.queue=R,y=Z.bind(null,En,R,N,y),R.dispatch=y,T.memoizedState=o,[u,y,!1]}function Ae(o){var u=$i();return ye(u,Kn,o)}function ye(o,u,y){if(u=t(o,u,me)[0],o=w(Ws)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var T=Xc(u)}catch(H){throw H===Zs?La:H}else T=u;u=$i();var R=u.queue,N=R.dispatch;return y!==u.memoizedState&&(En.flags|=2048,be(9,{destroy:void 0},Se.bind(null,R,y),null)),[T,N,o]}function Se(o,u){o.action=u}function Ie(o){var u=$i(),y=Kn;if(y!==null)return ye(u,y,o);$i(),u=u.memoizedState,y=$i();var T=y.queue.dispatch;return y.memoizedState=o,[u,T,!1]}function be(o,u,y,T){return o={tag:o,create:y,deps:T,inst:u,next:null},u=En.updateQueue,u===null&&(u=Zo(),En.updateQueue=u),y=u.lastEffect,y===null?u.lastEffect=o.next=o:(T=y.next,y.next=o,o.next=T,u.lastEffect=o),o}function je(){return $i().memoizedState}function Qe(o,u,y,T){var R=ia();En.flags|=o,R.memoizedState=be(1|u,{destroy:void 0},y,T===void 0?null:T)}function Ze(o,u,y,T){var R=$i();T=T===void 0?null:T;var N=R.memoizedState.inst;Kn!==null&&T!==null&&Hs(T,Kn.memoizedState.deps)?R.memoizedState=be(u,N,y,T):(En.flags|=o,R.memoizedState=be(1|u,N,y,T))}function We(o,u){Qe(8390656,8,o,u)}function Xe(o,u){Ze(2048,8,o,u)}function Et(o){En.flags|=4;var u=En.updateQueue;if(u===null)u=Zo(),En.updateQueue=u,u.events=[o];else{var y=u.events;y===null?u.events=[o]:y.push(o)}}function At(o){var u=$i().memoizedState;return Et({ref:u,nextImpl:o}),function(){if((vi&2)!==0)throw Error(h(440));return u.impl.apply(void 0,arguments)}}function pt(o,u){return Ze(4,2,o,u)}function It(o,u){return Ze(4,4,o,u)}function cn(o,u){if(typeof u=="function"){o=o();var y=u(o);return function(){typeof y=="function"?y():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Jn(o,u,y){y=y!=null?y.concat([o]):null,Ze(4,4,cn.bind(null,u,o),y)}function Ti(){}function yi(o,u){var y=$i();u=u===void 0?null:u;var T=y.memoizedState;return u!==null&&Hs(u,T[1])?T[0]:(y.memoizedState=[o,u],o)}function Oi(o,u){var y=$i();u=u===void 0?null:u;var T=y.memoizedState;if(u!==null&&Hs(u,T[1]))return T[0];if(T=o(),Ys){He(!0);try{o()}finally{He(!1)}}return y.memoizedState=[T,u],T}function li(o,u,y){return y===void 0||(bl&1073741824)!==0&&(Un&261930)===0?o.memoizedState=u:(o.memoizedState=y,o=lb(),En.lanes|=o,au|=o,y)}function Wi(o,u,y,T){return Ia(y,u)?y:qc.current!==null?(o=li(o,y,T),Ia(o,u)||(Zr=!0),o):(bl&42)===0||(bl&1073741824)!==0&&(Un&261930)===0?(Zr=!0,o.memoizedState=y):(o=lb(),En.lanes|=o,au|=o,u)}function Li(o,u,y,T,R){var N=ut.p;ut.p=N!==0&&8>N?N:8;var H=Ve.T,ue={};Ve.T=ue,Pa(o,!1,u,y);try{var Oe=R(),et=Ve.S;if(et!==null&&et(ue,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var ft=rd(Oe,T);Qs(o,u,ft,Rs(o))}else Qs(o,u,T,Rs(o))}catch(bt){Qs(o,u,{then:function(){},status:"rejected",reason:bt},Rs())}finally{ut.p=N,H!==null&&ue.types!==null&&(H.types=ue.types),Ve.T=H}}function Gr(){}function nr(o,u,y,T){if(o.tag!==5)throw Error(h(476));var R=ir(o).queue;Li(o,R,u,Tt,y===null?Gr:function(){return $r(o),y(T)})}function ir(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:Tt,baseState:Tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:Tt},next:null};var y={};return u.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:y},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function $r(o){var u=ir(o);u.next===null&&(u=o.alternate.memoizedState),Qs(o,u.next.queue,{},Rs())}function qo(){return yr(ep)}function Yo(){return $i().memoizedState}function Xs(){return $i().memoizedState}function Na(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var y=Rs();o=$o(y);var T=_l(u,o,y);T!==null&&(ks(T,u,y),Ts(T,u,y)),u={cache:jo()},o.payload=u;return}u=u.return}}function Kc(o,u,y){var T=Rs();y={lane:T,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},rs(o)?As(u,y):(y=Kl(o,u,y,T),y!==null&&(ks(y,o,T),Ms(y,u,T)))}function Xu(o,u,y){var T=Rs();Qs(o,u,y,T)}function Qs(o,u,y,T){var R={lane:T,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(rs(o))As(u,R);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=u.lastRenderedReducer,N!==null))try{var H=u.lastRenderedState,ue=N(H,y);if(R.hasEagerState=!0,R.eagerState=ue,Ia(ue,H))return td(o,u,R,0),Zi===null&&Vc(),!1}catch{}if(y=Kl(o,u,R,T),y!==null)return ks(y,o,T),Ms(y,u,T),!0}return!1}function Pa(o,u,y,T){if(T={lane:2,revertLane:X0(),gesture:null,action:T,hasEagerState:!1,eagerState:null,next:null},rs(o)){if(u)throw Error(h(479))}else u=Kl(o,y,T,2),u!==null&&ks(u,o,2)}function rs(o){var u=o.alternate;return o===En||u!==null&&u===En}function As(o,u){Es=Gi=!0;var y=o.pending;y===null?u.next=u:(u.next=y.next,y.next=u),o.pending=u}function Ms(o,u,y){if((y&4194048)!==0){var T=u.lanes;T&=o.pendingLanes,y|=T,u.lanes=y,mr(o,y)}}var ii={readContext:yr,use:Qc,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useLayoutEffect:ki,useInsertionEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useSyncExternalStore:ki,useId:ki,useHostTransitionStatus:ki,useFormState:ki,useActionState:ki,useOptimistic:ki,useMemoCache:ki,useCacheRefresh:ki};ii.useEffectEvent=ki;var _i={readContext:yr,use:Qc,useCallback:function(o,u){return ia().memoizedState=[o,u===void 0?null:u],o},useContext:yr,useEffect:We,useImperativeHandle:function(o,u,y){y=y!=null?y.concat([o]):null,Qe(4194308,4,cn.bind(null,u,o),y)},useLayoutEffect:function(o,u){return Qe(4194308,4,o,u)},useInsertionEffect:function(o,u){Qe(4,2,o,u)},useMemo:function(o,u){var y=ia();u=u===void 0?null:u;var T=o();if(Ys){He(!0);try{o()}finally{He(!1)}}return y.memoizedState=[T,u],T},useReducer:function(o,u,y){var T=ia();if(y!==void 0){var R=y(u);if(Ys){He(!0);try{y(u)}finally{He(!1)}}}else R=u;return T.memoizedState=T.baseState=R,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:R},T.queue=o,o=o.dispatch=Kc.bind(null,En,o),[T.memoizedState,o]},useRef:function(o){var u=ia();return o={current:o},u.memoizedState=o},useState:function(o){o=F(o);var u=o.queue,y=Xu.bind(null,En,u);return u.dispatch=y,[o.memoizedState,y]},useDebugValue:Ti,useDeferredValue:function(o,u){var y=ia();return li(y,o,u)},useTransition:function(){var o=F(!1);return o=Li.bind(null,En,o.queue,!0,!1),ia().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,y){var T=En,R=ia();if(Ln){if(y===void 0)throw Error(h(407));y=y()}else{if(y=u(),Zi===null)throw Error(h(349));(Un&127)!==0||v(T,u,y)}R.memoizedState=y;var N={value:y,getSnapshot:u};return R.queue=N,We(M.bind(null,T,N,o),[o]),T.flags|=2048,be(9,{destroy:void 0},S.bind(null,T,N,y,u),null),y},useId:function(){var o=ia(),u=Zi.identifierPrefix;if(Ln){var y=Ra,T=Oo;y=(T&~(1<<32-ht(T)-1)).toString(32)+y,u="_"+u+"R_"+y,y=Hc++,0<y&&(u+="H"+y.toString(32)),u+="_"}else y=$p++,u="_"+u+"r_"+y.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:qo,useFormState:_e,useActionState:_e,useOptimistic:function(o){var u=ia();u.memoizedState=u.baseState=o;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=y,u=Pa.bind(null,En,!0,y),y.dispatch=u,[o,u]},useMemoCache:Wu,useCacheRefresh:function(){return ia().memoizedState=Na.bind(null,En)},useEffectEvent:function(o){var u=ia(),y={impl:o};return u.memoizedState=y,function(){if((vi&2)!==0)throw Error(h(440));return y.impl.apply(void 0,arguments)}}},_r={readContext:yr,use:Qc,useCallback:yi,useContext:yr,useEffect:Xe,useImperativeHandle:Jn,useInsertionEffect:pt,useLayoutEffect:It,useMemo:Oi,useReducer:w,useRef:je,useState:function(){return w(Ws)},useDebugValue:Ti,useDeferredValue:function(o,u){var y=$i();return Wi(y,Kn.memoizedState,o,u)},useTransition:function(){var o=w(Ws)[0],u=$i().memoizedState;return[typeof o=="boolean"?o:Xc(o),u]},useSyncExternalStore:p,useId:Yo,useHostTransitionStatus:qo,useFormState:Ae,useActionState:Ae,useOptimistic:function(o,u){var y=$i();return B(y,Kn,o,u)},useMemoCache:Wu,useCacheRefresh:Xs};_r.useEffectEvent=At;var Ar={readContext:yr,use:Qc,useCallback:yi,useContext:yr,useEffect:Xe,useImperativeHandle:Jn,useInsertionEffect:pt,useLayoutEffect:It,useMemo:Oi,useReducer:l,useRef:je,useState:function(){return l(Ws)},useDebugValue:Ti,useDeferredValue:function(o,u){var y=$i();return Kn===null?li(y,o,u):Wi(y,Kn.memoizedState,o,u)},useTransition:function(){var o=l(Ws)[0],u=$i().memoizedState;return[typeof o=="boolean"?o:Xc(o),u]},useSyncExternalStore:p,useId:Yo,useHostTransitionStatus:qo,useFormState:Ie,useActionState:Ie,useOptimistic:function(o,u){var y=$i();return Kn!==null?B(y,Kn,o,u):(y.baseState=o,[o,y.queue.dispatch])},useMemoCache:Wu,useCacheRefresh:Xs};Ar.useEffectEvent=At;function Of(o,u,y,T){u=o.memoizedState,y=y(T,u),y=y==null?u:z({},u,y),o.memoizedState=y,o.lanes===0&&(o.updateQueue.baseState=y)}var Lf={enqueueSetState:function(o,u,y){o=o._reactInternals;var T=Rs(),R=$o(T);R.payload=u,y!=null&&(R.callback=y),u=_l(o,R,T),u!==null&&(ks(u,o,T),Ts(u,o,T))},enqueueReplaceState:function(o,u,y){o=o._reactInternals;var T=Rs(),R=$o(T);R.tag=1,R.payload=u,y!=null&&(R.callback=y),u=_l(o,R,T),u!==null&&(ks(u,o,T),Ts(u,o,T))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var y=Rs(),T=$o(y);T.tag=2,u!=null&&(T.callback=u),u=_l(o,T,y),u!==null&&(ks(u,o,y),Ts(u,o,y))}};function oc(o,u,y,T,R,N,H){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(T,N,H):u.prototype&&u.prototype.isPureReactComponent?!Ql(y,T)||!Ql(R,N):!0}function Ag(o,u,y,T){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(y,T),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(y,T),u.state!==o&&Lf.enqueueReplaceState(u,u.state,null)}function lc(o,u){var y=u;if("ref"in u){y={};for(var T in u)T!=="ref"&&(y[T]=u[T])}if(o=o.defaultProps){y===u&&(y=z({},y));for(var R in o)y[R]===void 0&&(y[R]=o[R])}return y}function Nf(o){Ro(o)}function Tl(o){console.error(o)}function Sl(o){Ro(o)}function Ks(o,u){try{var y=o.onUncaughtError;y(u.value,{componentStack:u.stack})}catch(T){setTimeout(function(){throw T})}}function Pf(o,u,y){try{var T=o.onCaughtError;T(y.value,{componentStack:y.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function gd(o,u,y){return y=$o(y),y.tag=3,y.payload={element:null},y.callback=function(){Ks(o,u)},y}function yd(o){return o=$o(o),o.tag=3,o}function _d(o,u,y,T){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var N=T.value;o.payload=function(){return R(N)},o.callback=function(){Pf(u,y,T)}}var H=y.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(o.callback=function(){Pf(u,y,T),typeof R!="function"&&(su===null?su=new Set([this]):su.add(this));var ue=T.stack;this.componentDidCatch(T.value,{componentStack:ue!==null?ue:""})})}function Mg(o,u,y,T,R){if(y.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(u=y.alternate,u!==null&&ts(u,y,R,!0),y=jt.current,y!==null){switch(y.tag){case 31:case 13:return Gt===null?cm():y.alternate===null&&vr===0&&(vr=3),y.flags&=-257,y.flags|=65536,y.lanes=R,T===Pt?y.flags|=16384:(u=y.updateQueue,u===null?y.updateQueue=new Set([T]):u.add(T),Kg(o,T,R)),!1;case 22:return y.flags|=65536,T===Pt?y.flags|=16384:(u=y.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([T])},y.updateQueue=u):(y=u.retryQueue,y===null?u.retryQueue=new Set([T]):y.add(T)),Kg(o,T,R)),!1}throw Error(h(435,y.tag))}return Kg(o,T,R),cm(),!1}if(Ln)return u=jt.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=R,T!==Yi&&(o=Error(h(422),{cause:T}),pl(Aa(o,y)))):(T!==Yi&&(u=Error(h(423),{cause:T}),pl(Aa(u,y))),o=o.current.alternate,o.flags|=65536,R&=-R,o.lanes|=R,T=Aa(T,y),R=gd(o.stateNode,T,R),ni(o,R),vr!==4&&(vr=2)),!1;var N=Error(h(520),{cause:T});if(N=Aa(N,y),am===null?am=[N]:am.push(N),vr!==4&&(vr=2),u===null)return!0;T=Aa(T,y),y=u;do{switch(y.tag){case 3:return y.flags|=65536,o=R&-R,y.lanes|=o,o=gd(y.stateNode,T,o),ni(y,o),!1;case 1:if(u=y.type,N=y.stateNode,(y.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(su===null||!su.has(N))))return y.flags|=65536,R&=-R,y.lanes|=R,R=yd(R),_d(R,o,y,T),ni(y,R),!1}y=y.return}while(y!==null);return!1}var Cg=Error(h(461)),Zr=!1;function ra(o,u,y,T){u.child=o===null?Vp(u,null,y,T):Uo(u,o.child,y,T)}function Zv(o,u,y,T,R){y=y.render;var N=u.ref;if("ref"in T){var H={};for(var ue in T)ue!=="ref"&&(H[ue]=T[ue])}else H=T;return yl(u),T=Yu(o,u,y,H,N,R),ue=md(),o!==null&&!Zr?(sc(o,u,R),uc(o,u,R)):(Ln&&ue&&Gc(u),u.flags|=1,ra(o,u,T,R),u.child)}function Dg(o,u,y,T,R){if(o===null){var N=y.type;return typeof N=="function"&&!bf(N)&&N.defaultProps===void 0&&y.compare===null?(u.tag=15,u.type=N,E0(o,u,N,T,R)):(o=xf(y.type,null,T,u,u.mode,R),o.ref=u.ref,o.return=u,u.child=o)}if(N=o.child,!Yp(o,R)){var H=N.memoizedProps;if(y=y.compare,y=y!==null?y:Ql,y(H,T)&&o.ref===u.ref)return uc(o,u,R)}return u.flags|=1,o=Ja(N,T),o.ref=u.ref,o.return=u,u.child=o}function E0(o,u,y,T,R){if(o!==null){var N=o.memoizedProps;if(Ql(N,T)&&o.ref===u.ref)if(Zr=!1,u.pendingProps=T=N,Yp(o,R))(o.flags&131072)!==0&&(Zr=!0);else return u.lanes=o.lanes,uc(o,u,R)}return M0(o,u,y,T,R)}function A0(o,u,y,T){var R=T.children,N=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),T.mode==="hidden"){if((u.flags&128)!==0){if(N=N!==null?N.baseLanes|y:y,o!==null){for(T=u.child=o.child,R=0;T!==null;)R=R|T.lanes|T.childLanes,T=T.sibling;T=R&~N}else T=0,u.child=null;return qv(o,u,N,y,T)}if((y&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Mf(u,N!==null?N.cachePool:null),N!==null?Gp(u,N):is(),hd(u);else return T=u.lanes=536870912,qv(o,u,N!==null?N.baseLanes|y:y,y,T)}else N!==null?(Mf(u,N.cachePool),Gp(u,N),ur(),u.memoizedState=null):(o!==null&&Mf(u,null),is(),ur());return ra(o,u,R,y),u.child}function cc(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function qv(o,u,y,T,R){var N=Af();return N=N===null?null:{parent:cr._currentValue,pool:N},u.memoizedState={baseLanes:y,cachePool:N},o!==null&&Mf(u,null),is(),hd(u),o!==null&&ts(o,u,T,!0),u.childLanes=R,null}function Jc(o,u){return u=Lg({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function Zp(o,u,y){return Uo(u,o.child,null,y),o=Jc(u,u.pendingProps),o.flags|=2,Hi(u),u.memoizedState=null,o}function Ig(o,u,y){var T=u.pendingProps,R=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Ln){if(T.mode==="hidden")return o=Jc(u,T),u.lanes=536870912,cc(null,o);if(qu(u),(o=gi)?(o=sh(o,es),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:ko!==null?{id:Oo,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},y=wf(o),y.return=u,u.child=y,Ur=u,gi=null)):o=null,o===null)throw ka(u);return u.lanes=536870912,null}return Jc(u,T)}var N=o.memoizedState;if(N!==null){var H=N.dehydrated;if(qu(u),R)if(u.flags&256)u.flags&=-257,u=Zp(o,u,y);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(h(558));else if(Zr||ts(o,u,y,!1),R=(y&o.childLanes)!==0,Zr||R){if(T=Zi,T!==null&&(H=Su(T,y),H!==0&&H!==N.retryLane))throw N.retryLane=H,bs(o,H),ks(T,o,H),Cg;cm(),u=Zp(o,u,y)}else o=N.treeContext,gi=to(H.nextSibling),Ur=u,Ln=!0,fl=null,es=!1,o!==null&&Fp(u,o),u=Jc(u,T),u.flags|=4096;return u}return o=Ja(o.child,{mode:T.mode,children:T.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Rg(o,u){var y=u.ref;if(y===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(h(284));(o===null||o.ref!==y)&&(u.flags|=4194816)}}function M0(o,u,y,T,R){return yl(u),y=Yu(o,u,y,T,void 0,R),T=md(),o!==null&&!Zr?(sc(o,u,R),uc(o,u,R)):(Ln&&T&&Gc(u),u.flags|=1,ra(o,u,y,R),u.child)}function Yv(o,u,y,T,R,N){return yl(u),u.updateQueue=null,y=fd(u,T,y,R),Hu(o),T=md(),o!==null&&!Zr?(sc(o,u,N),uc(o,u,N)):(Ln&&T&&Gc(u),u.flags|=1,ra(o,u,y,N),u.child)}function Hv(o,u,y,T,R){if(yl(u),u.stateNode===null){var N=mn,H=y.contextType;typeof H=="object"&&H!==null&&(N=yr(H)),N=new y(T,N),u.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Lf,u.stateNode=N,N._reactInternals=u,N=u.stateNode,N.props=T,N.state=u.memoizedState,N.refs={},Rf(u),H=y.contextType,N.context=typeof H=="object"&&H!==null?yr(H):mn,N.state=u.memoizedState,H=y.getDerivedStateFromProps,typeof H=="function"&&(Of(u,y,H,T),N.state=u.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(H=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),H!==N.state&&Lf.enqueueReplaceState(N,N.state,null),ac(u,T,N,R),vl(),N.state=u.memoizedState),typeof N.componentDidMount=="function"&&(u.flags|=4194308),T=!0}else if(o===null){N=u.stateNode;var ue=u.memoizedProps,Oe=lc(y,ue);N.props=Oe;var et=N.context,ft=y.contextType;H=mn,typeof ft=="object"&&ft!==null&&(H=yr(ft));var bt=y.getDerivedStateFromProps;ft=typeof bt=="function"||typeof N.getSnapshotBeforeUpdate=="function",ue=u.pendingProps!==ue,ft||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(ue||et!==H)&&Ag(u,N,T,H),Go=!1;var nt=u.memoizedState;N.state=nt,ac(u,T,N,R),vl(),et=u.memoizedState,ue||nt!==et||Go?(typeof bt=="function"&&(Of(u,y,bt,T),et=u.memoizedState),(Oe=Go||oc(u,y,Oe,T,nt,et,H))?(ft||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(u.flags|=4194308)):(typeof N.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=T,u.memoizedState=et),N.props=T,N.state=et,N.context=H,T=Oe):(typeof N.componentDidMount=="function"&&(u.flags|=4194308),T=!1)}else{N=u.stateNode,ld(o,u),H=u.memoizedProps,ft=lc(y,H),N.props=ft,bt=u.pendingProps,nt=N.context,et=y.contextType,Oe=mn,typeof et=="object"&&et!==null&&(Oe=yr(et)),ue=y.getDerivedStateFromProps,(et=typeof ue=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(H!==bt||nt!==Oe)&&Ag(u,N,T,Oe),Go=!1,nt=u.memoizedState,N.state=nt,ac(u,T,N,R),vl();var st=u.memoizedState;H!==bt||nt!==st||Go||o!==null&&o.dependencies!==null&&Uu(o.dependencies)?(typeof ue=="function"&&(Of(u,y,ue,T),st=u.memoizedState),(ft=Go||oc(u,y,ft,T,nt,st,Oe)||o!==null&&o.dependencies!==null&&Uu(o.dependencies))?(et||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(T,st,Oe),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(T,st,Oe)),typeof N.componentDidUpdate=="function"&&(u.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof N.componentDidUpdate!="function"||H===o.memoizedProps&&nt===o.memoizedState||(u.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&nt===o.memoizedState||(u.flags|=1024),u.memoizedProps=T,u.memoizedState=st),N.props=T,N.state=st,N.context=Oe,T=ft):(typeof N.componentDidUpdate!="function"||H===o.memoizedProps&&nt===o.memoizedState||(u.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&nt===o.memoizedState||(u.flags|=1024),T=!1)}return N=T,Rg(o,u),T=(u.flags&128)!==0,N||T?(N=u.stateNode,y=T&&typeof y.getDerivedStateFromError!="function"?null:N.render(),u.flags|=1,o!==null&&T?(u.child=Uo(u,o.child,null,R),u.child=Uo(u,null,y,R)):ra(o,u,y,R),u.memoizedState=N.state,o=u.child):o=uc(o,u,R),o}function Wv(o,u,y,T){return No(),u.flags|=256,ra(o,u,y,T),u.child}var kg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qp(o){return{baseLanes:o,cachePool:Eg()}}function Og(o,u,y){return o=o!==null?o.childLanes&~y:0,u&&(o|=Ma),o}function C0(o,u,y){var T=u.pendingProps,R=!1,N=(u.flags&128)!==0,H;if((H=N)||(H=o!==null&&o.memoizedState===null?!1:(tr.current&2)!==0),H&&(R=!0,u.flags&=-129),H=(u.flags&32)!==0,u.flags&=-33,o===null){if(Ln){if(R?Ss(u):ur(),(o=gi)?(o=sh(o,es),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:ko!==null?{id:Oo,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},y=wf(o),y.return=u,u.child=y,Ur=u,gi=null)):o=null,o===null)throw ka(u);return Mr(o)?u.lanes=32:u.lanes=536870912,null}var ue=T.children;return T=T.fallback,R?(ur(),R=u.mode,ue=Lg({mode:"hidden",children:ue},R),T=Jl(T,R,y,null),ue.return=u,T.return=u,ue.sibling=T,u.child=ue,T=u.child,T.memoizedState=qp(y),T.childLanes=Og(o,H,y),u.memoizedState=kg,cc(null,T)):(Ss(u),D0(u,ue))}var Oe=o.memoizedState;if(Oe!==null&&(ue=Oe.dehydrated,ue!==null)){if(N)u.flags&256?(Ss(u),u.flags&=-257,u=Ng(o,u,y)):u.memoizedState!==null?(ur(),u.child=o.child,u.flags|=128,u=null):(ur(),ue=T.fallback,R=u.mode,T=Lg({mode:"visible",children:T.children},R),ue=Jl(ue,R,y,null),ue.flags|=2,T.return=u,ue.return=u,T.sibling=ue,u.child=T,Uo(u,o.child,null,y),T=u.child,T.memoizedState=qp(y),T.childLanes=Og(o,H,y),u.memoizedState=kg,u=cc(null,T));else if(Ss(u),Mr(ue)){if(H=ue.nextSibling&&ue.nextSibling.dataset,H)var et=H.dgst;H=et,T=Error(h(419)),T.stack="",T.digest=H,pl({value:T,source:null,stack:null}),u=Ng(o,u,y)}else if(Zr||ts(o,u,y,!1),H=(y&o.childLanes)!==0,Zr||H){if(H=Zi,H!==null&&(T=Su(H,y),T!==0&&T!==Oe.retryLane))throw Oe.retryLane=T,bs(o,T),ks(H,o,T),Cg;Fa(ue)||cm(),u=Ng(o,u,y)}else Fa(ue)?(u.flags|=192,u.child=o.child,u=null):(o=Oe.treeContext,gi=to(ue.nextSibling),Ur=u,Ln=!0,fl=null,es=!1,o!==null&&Fp(u,o),u=D0(u,T.children),u.flags|=4096);return u}return R?(ur(),ue=T.fallback,R=u.mode,Oe=o.child,et=Oe.sibling,T=Ja(Oe,{mode:"hidden",children:T.children}),T.subtreeFlags=Oe.subtreeFlags&65011712,et!==null?ue=Ja(et,ue):(ue=Jl(ue,R,y,null),ue.flags|=2),ue.return=u,T.return=u,T.sibling=ue,u.child=T,cc(null,T),T=u.child,ue=o.child.memoizedState,ue===null?ue=qp(y):(R=ue.cachePool,R!==null?(Oe=cr._currentValue,R=R.parent!==Oe?{parent:Oe,pool:Oe}:R):R=Eg(),ue={baseLanes:ue.baseLanes|y,cachePool:R}),T.memoizedState=ue,T.childLanes=Og(o,H,y),u.memoizedState=kg,cc(o.child,T)):(Ss(u),y=o.child,o=y.sibling,y=Ja(y,{mode:"visible",children:T.children}),y.return=u,y.sibling=null,o!==null&&(H=u.deletions,H===null?(u.deletions=[o],u.flags|=16):H.push(o)),u.child=y,u.memoizedState=null,y)}function D0(o,u){return u=Lg({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Lg(o,u){return o=Ka(22,o,null,u),o.lanes=0,o}function Ng(o,u,y){return Uo(u,o.child,null,y),o=D0(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function I0(o,u,y){o.lanes|=u;var T=o.alternate;T!==null&&(T.lanes|=u),Tf(o.return,u,y)}function R0(o,u,y,T,R,N){var H=o.memoizedState;H===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:T,tail:y,tailMode:R,treeForkCount:N}:(H.isBackwards=u,H.rendering=null,H.renderingStartTime=0,H.last=T,H.tail=y,H.tailMode=R,H.treeForkCount=N)}function Pg(o,u,y){var T=u.pendingProps,R=T.revealOrder,N=T.tail;T=T.children;var H=tr.current,ue=(H&2)!==0;if(ue?(H=H&1|2,u.flags|=128):H&=1,xt(tr,H),ra(o,u,T,y),T=Ln?ic:0,!ue&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&I0(o,y,u);else if(o.tag===19)I0(o,y,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(R){case"forwards":for(y=u.child,R=null;y!==null;)o=y.alternate,o!==null&&dd(o)===null&&(R=y),y=y.sibling;y=R,y===null?(R=u.child,u.child=null):(R=y.sibling,y.sibling=null),R0(u,!1,R,y,N,T);break;case"backwards":case"unstable_legacy-backwards":for(y=null,R=u.child,u.child=null;R!==null;){if(o=R.alternate,o!==null&&dd(o)===null){u.child=R;break}o=R.sibling,R.sibling=y,y=R,R=o}R0(u,!0,y,null,N,T);break;case"together":R0(u,!1,null,null,void 0,T);break;default:u.memoizedState=null}return u.child}function uc(o,u,y){if(o!==null&&(u.dependencies=o.dependencies),au|=u.lanes,(y&u.childLanes)===0)if(o!==null){if(ts(o,u,y,!1),(y&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(h(153));if(u.child!==null){for(o=u.child,y=Ja(o,o.pendingProps),u.child=y,y.return=u;o.sibling!==null;)o=o.sibling,y=y.sibling=Ja(o,o.pendingProps),y.return=u;y.sibling=null}return u.child}function Yp(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Uu(o)))}function Hp(o,u,y){switch(u.tag){case 3:on(u,u.stateNode.containerInfo),gl(u,cr,o.memoizedState.cache),No();break;case 27:case 5:Ri(u);break;case 4:on(u,u.stateNode.containerInfo);break;case 10:gl(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,qu(u),null;break;case 13:var T=u.memoizedState;if(T!==null)return T.dehydrated!==null?(Ss(u),u.flags|=128,null):(y&u.child.childLanes)!==0?C0(o,u,y):(Ss(u),o=uc(o,u,y),o!==null?o.sibling:null);Ss(u);break;case 19:var R=(o.flags&128)!==0;if(T=(y&u.childLanes)!==0,T||(ts(o,u,y,!1),T=(y&u.childLanes)!==0),R){if(T)return Pg(o,u,y);u.flags|=128}if(R=u.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),xt(tr,tr.current),T)break;return null;case 22:return u.lanes=0,A0(o,u,y,u.pendingProps);case 24:gl(u,cr,o.memoizedState.cache)}return uc(o,u,y)}function za(o,u,y){if(o!==null)if(o.memoizedProps!==u.pendingProps)Zr=!0;else{if(!Yp(o,y)&&(u.flags&128)===0)return Zr=!1,Hp(o,u,y);Zr=(o.flags&131072)!==0}else Zr=!1,Ln&&(u.flags&1048576)!==0&&zp(u,ic,u.index);switch(u.lanes=0,u.tag){case 16:e:{var T=u.pendingProps;if(o=ws(u.elementType),u.type=o,typeof o=="function")bf(o)?(T=lc(o,T),u.tag=1,u=Hv(null,u,o,T,y)):(u.tag=0,u=M0(null,u,o,T,y));else{if(o!=null){var R=o.$$typeof;if(R===ze){u.tag=11,u=Zv(null,u,o,T,y);break e}else if(R===Ne){u.tag=14,u=Dg(null,u,o,T,y);break e}}throw u=Ht(o)||o,Error(h(306,u,""))}}return u;case 0:return M0(o,u,u.type,u.pendingProps,y);case 1:return T=u.type,R=lc(T,u.pendingProps),Hv(o,u,T,R,y);case 3:e:{if(on(u,u.stateNode.containerInfo),o===null)throw Error(h(387));T=u.pendingProps;var N=u.memoizedState;R=N.element,ld(o,u),ac(u,T,null,y);var H=u.memoizedState;if(T=H.cache,gl(u,cr,T),T!==N.cache&&Sf(u,[cr],y,!0),vl(),T=H.element,N.isDehydrated)if(N={element:T,isDehydrated:!1,cache:H.cache},u.updateQueue.baseState=N,u.memoizedState=N,u.flags&256){u=Wv(o,u,T,y);break e}else if(T!==R){R=Aa(Error(h(424)),u),pl(R),u=Wv(o,u,T,y);break e}else for(o=u.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,gi=to(o.firstChild),Ur=u,Ln=!0,fl=null,es=!0,y=Vp(u,null,T,y),u.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(No(),T===R){u=uc(o,u,y);break e}ra(o,u,T,y)}u=u.child}return u;case 26:return Rg(o,u),o===null?(y=h_(u.type,null,u.pendingProps,null))?u.memoizedState=y:Ln||(y=u.type,o=u.pendingProps,T=mm(Zt.current).createElement(y),T[wi]=u,T[Ct]=o,sa(T,y,o),Ki(T),u.stateNode=T):u.memoizedState=h_(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Ri(u),o===null&&Ln&&(T=u.stateNode=Db(u.type,u.pendingProps,Zt.current),Ur=u,es=!0,R=gi,ah(u.type)?(ls=R,gi=to(T.firstChild)):gi=R),ra(o,u,u.pendingProps.children,y),Rg(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Ln&&((R=T=gi)&&(T=pa(T,u.type,u.pendingProps,es),T!==null?(u.stateNode=T,Ur=u,gi=to(T.firstChild),es=!1,R=!0):R=!1),R||ka(u)),Ri(u),R=u.type,N=u.pendingProps,H=o!==null?o.memoizedProps:null,T=N.children,cy(R,N)?T=null:H!==null&&cy(R,H)&&(u.flags|=32),u.memoizedState!==null&&(R=Yu(o,u,pd,null,null,y),ep._currentValue=R),Rg(o,u),ra(o,u,T,y),u.child;case 6:return o===null&&Ln&&((o=y=gi)&&(y=Dl(y,u.pendingProps,es),y!==null?(u.stateNode=y,Ur=u,gi=null,o=!0):o=!1),o||ka(u)),null;case 13:return C0(o,u,y);case 4:return on(u,u.stateNode.containerInfo),T=u.pendingProps,o===null?u.child=Uo(u,null,T,y):ra(o,u,T,y),u.child;case 11:return Zv(o,u,u.type,u.pendingProps,y);case 7:return ra(o,u,u.pendingProps,y),u.child;case 8:return ra(o,u,u.pendingProps.children,y),u.child;case 12:return ra(o,u,u.pendingProps.children,y),u.child;case 10:return T=u.pendingProps,gl(u,u.type,T.value),ra(o,u,T.children,y),u.child;case 9:return R=u.type._context,T=u.pendingProps.children,yl(u),R=yr(R),T=T(R),u.flags|=1,ra(o,u,T,y),u.child;case 14:return Dg(o,u,u.type,u.pendingProps,y);case 15:return E0(o,u,u.type,u.pendingProps,y);case 19:return Pg(o,u,y);case 31:return Ig(o,u,y);case 22:return A0(o,u,y,u.pendingProps);case 24:return yl(u),T=yr(cr),o===null?(R=Af(),R===null&&(R=Zi,N=jo(),R.pooledCache=N,N.refCount++,N!==null&&(R.pooledCacheLanes|=y),R=N),u.memoizedState={parent:T,cache:R},Rf(u),gl(u,cr,R)):((o.lanes&y)!==0&&(ld(o,u),ac(u,null,null,y),vl()),R=o.memoizedState,N=u.memoizedState,R.parent!==T?(R={parent:T,cache:T},u.memoizedState=R,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=R),gl(u,cr,T)):(T=N.cache,gl(u,cr,T),T!==R.cache&&Sf(u,[cr],y,!0))),ra(o,u,u.pendingProps.children,y),u.child;case 29:throw u.pendingProps}throw Error(h(156,u.tag))}function hc(o){o.flags|=4}function Wp(o,u,y,T,R){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(R&335544128)===R)if(o.stateNode.complete)o.flags|=8192;else if(G0())o.flags|=8192;else throw qs=Pt,rc}else o.flags&=-16777217}function Xv(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!vm(u))if(G0())o.flags|=8192;else throw qs=Pt,rc}function Xp(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?ti():536870912,o.lanes|=u,Td|=u)}function Qp(o,u){if(!Ln)switch(o.tailMode){case"hidden":u=o.tail;for(var y=null;u!==null;)u.alternate!==null&&(y=u),u=u.sibling;y===null?o.tail=null:y.sibling=null;break;case"collapsed":y=o.tail;for(var T=null;y!==null;)y.alternate!==null&&(T=y),y=y.sibling;T===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:T.sibling=null}}function rr(o){var u=o.alternate!==null&&o.alternate.child===o.child,y=0,T=0;if(u)for(var R=o.child;R!==null;)y|=R.lanes|R.childLanes,T|=R.subtreeFlags&65011712,T|=R.flags&65011712,R.return=o,R=R.sibling;else for(R=o.child;R!==null;)y|=R.lanes|R.childLanes,T|=R.subtreeFlags,T|=R.flags,R.return=o,R=R.sibling;return o.subtreeFlags|=T,o.childLanes=y,u}function Qv(o,u,y){var T=u.pendingProps;switch(Vu(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(u),null;case 1:return rr(u),null;case 3:return y=u.stateNode,T=null,o!==null&&(T=o.memoizedState.cache),u.memoizedState.cache!==T&&(u.flags|=2048),Fo(cr),Sn(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(Lo(u)?hc(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Po())),rr(u),null;case 26:var R=u.type,N=u.memoizedState;return o===null?(hc(u),N!==null?(rr(u),Xv(u,N)):(rr(u),Wp(u,R,null,T,y))):N?N!==o.memoizedState?(hc(u),rr(u),Xv(u,N)):(rr(u),u.flags&=-16777217):(o=o.memoizedProps,o!==T&&hc(u),rr(u),Wp(u,R,o,T,y)),null;case 27:if(Tr(u),y=Zt.current,R=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==T&&hc(u);else{if(!T){if(u.stateNode===null)throw Error(h(166));return rr(u),null}o=St.current,Lo(u)?Oa(u):(o=Db(R,T,y),u.stateNode=o,hc(u))}return rr(u),null;case 5:if(Tr(u),R=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==T&&hc(u);else{if(!T){if(u.stateNode===null)throw Error(h(166));return rr(u),null}if(N=St.current,Lo(u))Oa(u);else{var H=mm(Zt.current);switch(N){case 1:N=H.createElementNS("http://www.w3.org/2000/svg",R);break;case 2:N=H.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;default:switch(R){case"svg":N=H.createElementNS("http://www.w3.org/2000/svg",R);break;case"math":N=H.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;case"script":N=H.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof T.is=="string"?H.createElement("select",{is:T.is}):H.createElement("select"),T.multiple?N.multiple=!0:T.size&&(N.size=T.size);break;default:N=typeof T.is=="string"?H.createElement(R,{is:T.is}):H.createElement(R)}}N[wi]=u,N[Ct]=T;e:for(H=u.child;H!==null;){if(H.tag===5||H.tag===6)N.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===u)break e;for(;H.sibling===null;){if(H.return===null||H.return===u)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}u.stateNode=N;e:switch(sa(N,R,T),R){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}T&&hc(u)}}return rr(u),Wp(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,y),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==T&&hc(u);else{if(typeof T!="string"&&u.stateNode===null)throw Error(h(166));if(o=Zt.current,Lo(u)){if(o=u.stateNode,y=u.memoizedProps,T=null,R=Ur,R!==null)switch(R.tag){case 27:case 5:T=R.memoizedProps}o[wi]=u,o=!!(o.nodeValue===y||T!==null&&T.suppressHydrationWarning===!0||t_(o.nodeValue,y)),o||ka(u,!0)}else o=mm(o).createTextNode(T),o[wi]=u,u.stateNode=o}return rr(u),null;case 31:if(y=u.memoizedState,o===null||o.memoizedState!==null){if(T=Lo(u),y!==null){if(o===null){if(!T)throw Error(h(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(h(557));o[wi]=u}else No(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;rr(u),o=!1}else y=Po(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),o=!0;if(!o)return u.flags&256?(Hi(u),u):(Hi(u),null);if((u.flags&128)!==0)throw Error(h(558))}return rr(u),null;case 13:if(T=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(R=Lo(u),T!==null&&T.dehydrated!==null){if(o===null){if(!R)throw Error(h(318));if(R=u.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(h(317));R[wi]=u}else No(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;rr(u),R=!1}else R=Po(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=R),R=!0;if(!R)return u.flags&256?(Hi(u),u):(Hi(u),null)}return Hi(u),(u.flags&128)!==0?(u.lanes=y,u):(y=T!==null,o=o!==null&&o.memoizedState!==null,y&&(T=u.child,R=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(R=T.alternate.memoizedState.cachePool.pool),N=null,T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(N=T.memoizedState.cachePool.pool),N!==R&&(T.flags|=2048)),y!==o&&y&&(u.child.flags|=8192),Xp(u,u.updateQueue),rr(u),null);case 4:return Sn(),o===null&&J0(u.stateNode.containerInfo),rr(u),null;case 10:return Fo(u.type),rr(u),null;case 19:if(tt(tr),T=u.memoizedState,T===null)return rr(u),null;if(R=(u.flags&128)!==0,N=T.rendering,N===null)if(R)Qp(T,!1);else{if(vr!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(N=dd(o),N!==null){for(u.flags|=128,Qp(T,!1),o=N.updateQueue,u.updateQueue=o,Xp(u,o),u.subtreeFlags=0,o=y,y=u.child;y!==null;)Tg(y,o),y=y.sibling;return xt(tr,tr.current&1|2),Ln&&dl(u,T.treeForkCount),u.child}o=o.sibling}T.tail!==null&&ji()>sm&&(u.flags|=128,R=!0,Qp(T,!1),u.lanes=4194304)}else{if(!R)if(o=dd(N),o!==null){if(u.flags|=128,R=!0,o=o.updateQueue,u.updateQueue=o,Xp(u,o),Qp(T,!0),T.tail===null&&T.tailMode==="hidden"&&!N.alternate&&!Ln)return rr(u),null}else 2*ji()-T.renderingStartTime>sm&&y!==536870912&&(u.flags|=128,R=!0,Qp(T,!1),u.lanes=4194304);T.isBackwards?(N.sibling=u.child,u.child=N):(o=T.last,o!==null?o.sibling=N:u.child=N,T.last=N)}return T.tail!==null?(o=T.tail,T.rendering=o,T.tail=o.sibling,T.renderingStartTime=ji(),o.sibling=null,y=tr.current,xt(tr,R?y&1|2:y&1),Ln&&dl(u,T.treeForkCount),o):(rr(u),null);case 22:case 23:return Hi(u),Yc(),T=u.memoizedState!==null,o!==null?o.memoizedState!==null!==T&&(u.flags|=8192):T&&(u.flags|=8192),T?(y&536870912)!==0&&(u.flags&128)===0&&(rr(u),u.subtreeFlags&6&&(u.flags|=8192)):rr(u),y=u.updateQueue,y!==null&&Xp(u,y.retryQueue),y=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),T=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(T=u.memoizedState.cachePool.pool),T!==y&&(u.flags|=2048),o!==null&&tt($s),null;case 24:return y=null,o!==null&&(y=o.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Fo(cr),rr(u),null;case 25:return null;case 30:return null}throw Error(h(156,u.tag))}function x1(o,u){switch(Vu(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Fo(cr),Sn(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Tr(u),null;case 31:if(u.memoizedState!==null){if(Hi(u),u.alternate===null)throw Error(h(340));No()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Hi(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(h(340));No()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return tt(tr),null;case 4:return Sn(),null;case 10:return Fo(u.type),null;case 22:case 23:return Hi(u),Yc(),o!==null&&tt($s),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Fo(cr),null;case 25:return null;default:return null}}function zg(o,u){switch(Vu(u),u.tag){case 3:Fo(cr),Sn();break;case 26:case 27:case 5:Tr(u);break;case 4:Sn();break;case 31:u.memoizedState!==null&&Hi(u);break;case 13:Hi(u);break;case 19:tt(tr);break;case 10:Fo(u.type);break;case 22:case 23:Hi(u),Yc(),o!==null&&tt($s);break;case 24:Fo(cr)}}function zf(o,u){try{var y=u.updateQueue,T=y!==null?y.lastEffect:null;if(T!==null){var R=T.next;y=R;do{if((y.tag&o)===o){T=void 0;var N=y.create,H=y.inst;T=N(),H.destroy=T}y=y.next}while(y!==R)}}catch(ue){bi(u,u.return,ue)}}function eu(o,u,y){try{var T=u.updateQueue,R=T!==null?T.lastEffect:null;if(R!==null){var N=R.next;T=N;do{if((T.tag&o)===o){var H=T.inst,ue=H.destroy;if(ue!==void 0){H.destroy=void 0,R=u;var Oe=y,et=ue;try{et()}catch(ft){bi(R,Oe,ft)}}}T=T.next}while(T!==N)}}catch(ft){bi(u,u.return,ft)}}function Kv(o){var u=o.updateQueue;if(u!==null){var y=o.stateNode;try{kf(u,y)}catch(T){bi(o,o.return,T)}}}function Jv(o,u,y){y.props=lc(o.type,o.memoizedProps),y.state=o.memoizedState;try{y.componentWillUnmount()}catch(T){bi(o,u,T)}}function Kp(o,u){try{var y=o.ref;if(y!==null){switch(o.tag){case 26:case 27:case 5:var T=o.stateNode;break;case 30:T=o.stateNode;break;default:T=o.stateNode}typeof y=="function"?o.refCleanup=y(T):y.current=T}}catch(R){bi(o,u,R)}}function Js(o,u){var y=o.ref,T=o.refCleanup;if(y!==null)if(typeof T=="function")try{T()}catch(R){bi(o,u,R)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){bi(o,u,R)}else y.current=null}function Fg(o){var u=o.type,y=o.memoizedProps,T=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":y.autoFocus&&T.focus();break e;case"img":y.src?T.src=y.src:y.srcSet&&(T.srcset=y.srcSet)}}catch(R){bi(o,o.return,R)}}function jg(o,u,y){try{var T=o.stateNode;Mb(T,o.type,y,u),T[Ct]=u}catch(R){bi(o,o.return,R)}}function Qu(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&ah(o.type)||o.tag===4}function vd(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Qu(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&ah(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function k0(o,u,y){var T=o.tag;if(T===5||T===6)o=o.stateNode,u?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(o,u):(u=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,u.appendChild(o),y=y._reactRootContainer,y!=null||u.onclick!==null||(u.onclick=Us));else if(T!==4&&(T===27&&ah(o.type)&&(y=o.stateNode,u=null),o=o.child,o!==null))for(k0(o,u,y),o=o.sibling;o!==null;)k0(o,u,y),o=o.sibling}function Bg(o,u,y){var T=o.tag;if(T===5||T===6)o=o.stateNode,u?y.insertBefore(o,u):y.appendChild(o);else if(T!==4&&(T===27&&ah(o.type)&&(y=o.stateNode),o=o.child,o!==null))for(Bg(o,u,y),o=o.sibling;o!==null;)Bg(o,u,y),o=o.sibling}function eb(o){var u=o.stateNode,y=o.memoizedProps;try{for(var T=o.type,R=u.attributes;R.length;)u.removeAttributeNode(R[0]);sa(u,T,y),u[wi]=o,u[Ct]=y}catch(N){bi(o,o.return,N)}}var tu=!1,qr=!1,O0=!1,tb=typeof WeakSet=="function"?WeakSet:Set,Yr=null;function w1(o,u){if(o=o.containerInfo,pm=Sm,o=pf(o),Wh(o)){if("selectionStart"in o)var y={start:o.selectionStart,end:o.selectionEnd};else e:{y=(y=o.ownerDocument)&&y.defaultView||window;var T=y.getSelection&&y.getSelection();if(T&&T.rangeCount!==0){y=T.anchorNode;var R=T.anchorOffset,N=T.focusNode;T=T.focusOffset;try{y.nodeType,N.nodeType}catch{y=null;break e}var H=0,ue=-1,Oe=-1,et=0,ft=0,bt=o,nt=null;t:for(;;){for(var st;bt!==y||R!==0&&bt.nodeType!==3||(ue=H+R),bt!==N||T!==0&&bt.nodeType!==3||(Oe=H+T),bt.nodeType===3&&(H+=bt.nodeValue.length),(st=bt.firstChild)!==null;)nt=bt,bt=st;for(;;){if(bt===o)break t;if(nt===y&&++et===R&&(ue=H),nt===N&&++ft===T&&(Oe=H),(st=bt.nextSibling)!==null)break;bt=nt,nt=bt.parentNode}bt=st}y=ue===-1||Oe===-1?null:{start:ue,end:Oe}}else y=null}y=y||{start:0,end:0}}else y=null;for(n_={focusedElem:o,selectionRange:y},Sm=!1,Yr=u;Yr!==null;)if(u=Yr,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Yr=o;else for(;Yr!==null;){switch(u=Yr,N=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(y=0;y<o.length;y++)R=o[y],R.ref.impl=R.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&N!==null){o=void 0,y=u,R=N.memoizedProps,N=N.memoizedState,T=y.stateNode;try{var Wt=lc(y.type,R);o=T.getSnapshotBeforeUpdate(Wt,N),T.__reactInternalSnapshotBeforeUpdate=o}catch(sn){bi(y,y.return,sn)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,y=o.nodeType,y===9)Cl(o);else if(y===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Cl(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(h(163))}if(o=u.sibling,o!==null){o.return=u.return,Yr=o;break}Yr=u.return}}function L0(o,u,y){var T=y.flags;switch(y.tag){case 0:case 11:case 15:Ds(o,y),T&4&&zf(5,y);break;case 1:if(Ds(o,y),T&4)if(o=y.stateNode,u===null)try{o.componentDidMount()}catch(H){bi(y,y.return,H)}else{var R=lc(y.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(R,u,o.__reactInternalSnapshotBeforeUpdate)}catch(H){bi(y,y.return,H)}}T&64&&Kv(y),T&512&&Kp(y,y.return);break;case 3:if(Ds(o,y),T&64&&(o=y.updateQueue,o!==null)){if(u=null,y.child!==null)switch(y.child.tag){case 27:case 5:u=y.child.stateNode;break;case 1:u=y.child.stateNode}try{kf(o,u)}catch(H){bi(y,y.return,H)}}break;case 27:u===null&&T&4&&eb(y);case 26:case 5:Ds(o,y),u===null&&T&4&&Fg(y),T&512&&Kp(y,y.return);break;case 12:Ds(o,y);break;case 31:Ds(o,y),T&4&&Jp(o,y);break;case 13:Ds(o,y),T&4&&em(o,y),T&64&&(o=y.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(y=Z0.bind(null,y),Wr(o,y))));break;case 22:if(T=y.memoizedState!==null||tu,!T){u=u!==null&&u.memoizedState!==null||qr,R=tu;var N=qr;tu=T,(qr=u)&&!N?nu(o,y,(y.subtreeFlags&8772)!==0):Ds(o,y),tu=R,qr=N}break;case 30:break;default:Ds(o,y)}}function Ff(o){var u=o.alternate;u!==null&&(o.alternate=null,Ff(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Mc(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var hr=null,Hn=!1;function Cs(o,u,y){for(y=y.child;y!==null;)N0(o,u,y),y=y.sibling}function N0(o,u,y){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(Ue,y)}catch{}switch(y.tag){case 26:qr||Js(y,u),Cs(o,u,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:qr||Js(y,u);var T=hr,R=Hn;ah(y.type)&&(hr=y.stateNode,Hn=!1),Cs(o,u,y),Qf(y.stateNode),hr=T,Hn=R;break;case 5:qr||Js(y,u);case 6:if(T=hr,R=Hn,hr=null,Cs(o,u,y),hr=T,Hn=R,hr!==null)if(Hn)try{(hr.nodeType===9?hr.body:hr.nodeName==="HTML"?hr.ownerDocument.body:hr).removeChild(y.stateNode)}catch(N){bi(y,u,N)}else try{hr.removeChild(y.stateNode)}catch(N){bi(y,u,N)}break;case 18:hr!==null&&(Hn?(o=hr,Cb(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,y.stateNode),hh(o)):Cb(hr,y.stateNode));break;case 4:T=hr,R=Hn,hr=y.stateNode.containerInfo,Hn=!0,Cs(o,u,y),hr=T,Hn=R;break;case 0:case 11:case 14:case 15:eu(2,y,u),qr||eu(4,y,u),Cs(o,u,y);break;case 1:qr||(Js(y,u),T=y.stateNode,typeof T.componentWillUnmount=="function"&&Jv(y,u,T)),Cs(o,u,y);break;case 21:Cs(o,u,y);break;case 22:qr=(T=qr)||y.memoizedState!==null,Cs(o,u,y),qr=T;break;default:Cs(o,u,y)}}function Jp(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{hh(o)}catch(y){bi(u,u.return,y)}}}function em(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{hh(o)}catch(y){bi(u,u.return,y)}}function tm(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new tb),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new tb),u;default:throw Error(h(435,o.tag))}}function nm(o,u){var y=tm(o);u.forEach(function(T){if(!y.has(T)){y.add(T);var R=E1.bind(null,o,T);T.then(R,R)}})}function as(o,u){var y=u.deletions;if(y!==null)for(var T=0;T<y.length;T++){var R=y[T],N=o,H=u,ue=H;e:for(;ue!==null;){switch(ue.tag){case 27:if(ah(ue.type)){hr=ue.stateNode,Hn=!1;break e}break;case 5:hr=ue.stateNode,Hn=!1;break e;case 3:case 4:hr=ue.stateNode.containerInfo,Hn=!0;break e}ue=ue.return}if(hr===null)throw Error(h(160));N0(N,H,R),hr=null,Hn=!1,N=R.alternate,N!==null&&(N.return=null),R.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Vg(u,o),u=u.sibling}var ss=null;function Vg(o,u){var y=o.alternate,T=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:as(u,o),aa(o),T&4&&(eu(3,o,o.return),zf(3,o),eu(5,o,o.return));break;case 1:as(u,o),aa(o),T&512&&(qr||y===null||Js(y,y.return)),T&64&&tu&&(o=o.updateQueue,o!==null&&(T=o.callbacks,T!==null&&(y=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=y===null?T:y.concat(T))));break;case 26:var R=ss;if(as(u,o),aa(o),T&512&&(qr||y===null||Js(y,y.return)),T&4){var N=y!==null?y.memoizedState:null;if(T=o.memoizedState,y===null)if(T===null)if(o.stateNode===null){e:{T=o.type,y=o.memoizedProps,R=R.ownerDocument||R;t:switch(T){case"title":N=R.getElementsByTagName("title")[0],(!N||N[hn]||N[wi]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=R.createElement(T),R.head.insertBefore(N,R.querySelector("head > title"))),sa(N,T,y),N[wi]=o,Ki(N),T=N;break e;case"link":var H=m_("link","href",R).get(T+(y.href||""));if(H){for(var ue=0;ue<H.length;ue++)if(N=H[ue],N.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&N.getAttribute("rel")===(y.rel==null?null:y.rel)&&N.getAttribute("title")===(y.title==null?null:y.title)&&N.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){H.splice(ue,1);break t}}N=R.createElement(T),sa(N,T,y),R.head.appendChild(N);break;case"meta":if(H=m_("meta","content",R).get(T+(y.content||""))){for(ue=0;ue<H.length;ue++)if(N=H[ue],N.getAttribute("content")===(y.content==null?null:""+y.content)&&N.getAttribute("name")===(y.name==null?null:y.name)&&N.getAttribute("property")===(y.property==null?null:y.property)&&N.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&N.getAttribute("charset")===(y.charSet==null?null:y.charSet)){H.splice(ue,1);break t}}N=R.createElement(T),sa(N,T,y),R.head.appendChild(N);break;default:throw Error(h(468,T))}N[wi]=o,Ki(N),T=N}o.stateNode=T}else _m(R,o.type,o.stateNode);else o.stateNode=p_(R,T,o.memoizedProps);else N!==T?(N===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):N.count--,T===null?_m(R,o.type,o.stateNode):p_(R,T,o.memoizedProps)):T===null&&o.stateNode!==null&&jg(o,o.memoizedProps,y.memoizedProps)}break;case 27:as(u,o),aa(o),T&512&&(qr||y===null||Js(y,y.return)),y!==null&&T&4&&jg(o,o.memoizedProps,y.memoizedProps);break;case 5:if(as(u,o),aa(o),T&512&&(qr||y===null||Js(y,y.return)),o.flags&32){R=o.stateNode;try{ul(R,"")}catch(Wt){bi(o,o.return,Wt)}}T&4&&o.stateNode!=null&&(R=o.memoizedProps,jg(o,R,y!==null?y.memoizedProps:R)),T&1024&&(O0=!0);break;case 6:if(as(u,o),aa(o),T&4){if(o.stateNode===null)throw Error(h(162));T=o.memoizedProps,y=o.stateNode;try{y.nodeValue=T}catch(Wt){bi(o,o.return,Wt)}}break;case 3:if(my=null,R=ss,ss=dy(u.containerInfo),as(u,o),ss=R,aa(o),T&4&&y!==null&&y.memoizedState.isDehydrated)try{hh(u.containerInfo)}catch(Wt){bi(o,o.return,Wt)}O0&&(O0=!1,im(o));break;case 4:T=ss,ss=dy(o.stateNode.containerInfo),as(u,o),aa(o),ss=T;break;case 12:as(u,o),aa(o);break;case 31:as(u,o),aa(o),T&4&&(T=o.updateQueue,T!==null&&(o.updateQueue=null,nm(o,T)));break;case 13:as(u,o),aa(o),o.child.flags&8192&&o.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&($g=ji()),T&4&&(T=o.updateQueue,T!==null&&(o.updateQueue=null,nm(o,T)));break;case 22:R=o.memoizedState!==null;var Oe=y!==null&&y.memoizedState!==null,et=tu,ft=qr;if(tu=et||R,qr=ft||Oe,as(u,o),qr=ft,tu=et,aa(o),T&8192)e:for(u=o.stateNode,u._visibility=R?u._visibility&-2:u._visibility|1,R&&(y===null||Oe||tu||qr||El(o)),y=null,u=o;;){if(u.tag===5||u.tag===26){if(y===null){Oe=y=u;try{if(N=Oe.stateNode,R)H=N.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{ue=Oe.stateNode;var bt=Oe.memoizedProps.style,nt=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;ue.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(Wt){bi(Oe,Oe.return,Wt)}}}else if(u.tag===6){if(y===null){Oe=u;try{Oe.stateNode.nodeValue=R?"":Oe.memoizedProps}catch(Wt){bi(Oe,Oe.return,Wt)}}}else if(u.tag===18){if(y===null){Oe=u;try{var st=Oe.stateNode;R?Cn(st,!0):Cn(Oe.stateNode,!1)}catch(Wt){bi(Oe,Oe.return,Wt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;y===u&&(y=null),u=u.return}y===u&&(y=null),u.sibling.return=u.return,u=u.sibling}T&4&&(T=o.updateQueue,T!==null&&(y=T.retryQueue,y!==null&&(T.retryQueue=null,nm(o,y))));break;case 19:as(u,o),aa(o),T&4&&(T=o.updateQueue,T!==null&&(o.updateQueue=null,nm(o,T)));break;case 30:break;case 21:break;default:as(u,o),aa(o)}}function aa(o){var u=o.flags;if(u&2){try{for(var y,T=o.return;T!==null;){if(Qu(T)){y=T;break}T=T.return}if(y==null)throw Error(h(160));switch(y.tag){case 27:var R=y.stateNode,N=vd(o);Bg(o,N,R);break;case 5:var H=y.stateNode;y.flags&32&&(ul(H,""),y.flags&=-33);var ue=vd(o);Bg(o,ue,H);break;case 3:case 4:var Oe=y.stateNode.containerInfo,et=vd(o);k0(o,et,Oe);break;default:throw Error(h(161))}}catch(ft){bi(o,o.return,ft)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function im(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;im(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Ds(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)L0(o,u.alternate,u),u=u.sibling}function El(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:eu(4,u,u.return),El(u);break;case 1:Js(u,u.return);var y=u.stateNode;typeof y.componentWillUnmount=="function"&&Jv(u,u.return,y),El(u);break;case 27:Qf(u.stateNode);case 26:case 5:Js(u,u.return),El(u);break;case 22:u.memoizedState===null&&El(u);break;case 30:El(u);break;default:El(u)}o=o.sibling}}function nu(o,u,y){for(y=y&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var T=u.alternate,R=o,N=u,H=N.flags;switch(N.tag){case 0:case 11:case 15:nu(R,N,y),zf(4,N);break;case 1:if(nu(R,N,y),T=N,R=T.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(et){bi(T,T.return,et)}if(T=N,R=T.updateQueue,R!==null){var ue=T.stateNode;try{var Oe=R.shared.hiddenCallbacks;if(Oe!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Oe.length;R++)cd(Oe[R],ue)}catch(et){bi(T,T.return,et)}}y&&H&64&&Kv(N),Kp(N,N.return);break;case 27:eb(N);case 26:case 5:nu(R,N,y),y&&T===null&&H&4&&Fg(N),Kp(N,N.return);break;case 12:nu(R,N,y);break;case 31:nu(R,N,y),y&&H&4&&Jp(R,N);break;case 13:nu(R,N,y),y&&H&4&&em(R,N);break;case 22:N.memoizedState===null&&nu(R,N,y),Kp(N,N.return);break;case 30:break;default:nu(R,N,y)}u=u.sibling}}function Ug(o,u){var y=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==y&&(o!=null&&o.refCount++,y!=null&&Gu(y))}function iu(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Gu(o))}function Al(o,u,y,T){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)P0(o,u,y,T),u=u.sibling}function P0(o,u,y,T){var R=u.flags;switch(u.tag){case 0:case 11:case 15:Al(o,u,y,T),R&2048&&zf(9,u);break;case 1:Al(o,u,y,T);break;case 3:Al(o,u,y,T),R&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Gu(o)));break;case 12:if(R&2048){Al(o,u,y,T),o=u.stateNode;try{var N=u.memoizedProps,H=N.id,ue=N.onPostCommit;typeof ue=="function"&&ue(H,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Oe){bi(u,u.return,Oe)}}else Al(o,u,y,T);break;case 31:Al(o,u,y,T);break;case 13:Al(o,u,y,T);break;case 23:break;case 22:N=u.stateNode,H=u.alternate,u.memoizedState!==null?N._visibility&2?Al(o,u,y,T):bd(o,u):N._visibility&2?Al(o,u,y,T):(N._visibility|=2,dc(o,u,y,T,(u.subtreeFlags&10256)!==0||!1)),R&2048&&Ug(H,u);break;case 24:Al(o,u,y,T),R&2048&&iu(u.alternate,u);break;default:Al(o,u,y,T)}}function dc(o,u,y,T,R){for(R=R&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var N=o,H=u,ue=y,Oe=T,et=H.flags;switch(H.tag){case 0:case 11:case 15:dc(N,H,ue,Oe,R),zf(8,H);break;case 23:break;case 22:var ft=H.stateNode;H.memoizedState!==null?ft._visibility&2?dc(N,H,ue,Oe,R):bd(N,H):(ft._visibility|=2,dc(N,H,ue,Oe,R)),R&&et&2048&&Ug(H.alternate,H);break;case 24:dc(N,H,ue,Oe,R),R&&et&2048&&iu(H.alternate,H);break;default:dc(N,H,ue,Oe,R)}u=u.sibling}}function bd(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var y=o,T=u,R=T.flags;switch(T.tag){case 22:bd(y,T),R&2048&&Ug(T.alternate,T);break;case 24:bd(y,T),R&2048&&iu(T.alternate,T);break;default:bd(y,T)}u=u.sibling}}var jf=8192;function xd(o,u,y){if(o.subtreeFlags&jf)for(o=o.child;o!==null;)nb(o,u,y),o=o.sibling}function nb(o,u,y){switch(o.tag){case 26:xd(o,u,y),o.flags&jf&&o.memoizedState!==null&&g_(y,ss,o.memoizedState,o.memoizedProps);break;case 5:xd(o,u,y);break;case 3:case 4:var T=ss;ss=dy(o.stateNode.containerInfo),xd(o,u,y),ss=T;break;case 22:o.memoizedState===null&&(T=o.alternate,T!==null&&T.memoizedState!==null?(T=jf,jf=16777216,xd(o,u,y),jf=T):xd(o,u,y));break;default:xd(o,u,y)}}function ib(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function rm(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var y=0;y<u.length;y++){var T=u[y];Yr=T,Bf(T,o)}ib(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)rb(o),o=o.sibling}function rb(o){switch(o.tag){case 0:case 11:case 15:rm(o),o.flags&2048&&eu(9,o,o.return);break;case 3:rm(o);break;case 12:rm(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Gg(o)):rm(o);break;default:rm(o)}}function Gg(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var y=0;y<u.length;y++){var T=u[y];Yr=T,Bf(T,o)}ib(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:eu(8,u,u.return),Gg(u);break;case 22:y=u.stateNode,y._visibility&2&&(y._visibility&=-3,Gg(u));break;default:Gg(u)}o=o.sibling}}function Bf(o,u){for(;Yr!==null;){var y=Yr;switch(y.tag){case 0:case 11:case 15:eu(8,y,u);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var T=y.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:Gu(y.memoizedState.cache)}if(T=y.child,T!==null)T.return=y,Yr=T;else e:for(y=o;Yr!==null;){T=Yr;var R=T.sibling,N=T.return;if(Ff(T),T===y){Yr=null;break e}if(R!==null){R.return=N,Yr=R;break e}Yr=N}}}var T1={getCacheForType:function(o){var u=yr(cr),y=u.data.get(o);return y===void 0&&(y=o(),u.data.set(o,y)),y},cacheSignal:function(){return yr(cr).controller.signal}},ab=typeof WeakMap=="function"?WeakMap:Map,vi=0,Zi=null,Vn=null,Un=0,Si=0,os=null,Ho=!1,Ku=!1,z0=!1,ru=0,vr=0,au=0,wd=0,F0=0,Ma=0,Td=0,am=null,Is=null,j0=!1,$g=0,sb=0,sm=1/0,Vf=null,su=null,Hr=0,ou=null,Uf=null,Wo=0,B0=0,Zg=null,ob=null,om=0,V0=null;function Rs(){return(vi&2)!==0&&Un!==0?Un&-Un:Ve.T!==null?X0():ca()}function lb(){if(Ma===0)if((Un&536870912)===0||Ln){var o=Qn;Qn<<=1,(Qn&3932160)===0&&(Qn=262144),Ma=o}else Ma=536870912;return o=jt.current,o!==null&&(o.flags|=32),Ma}function ks(o,u,y){(o===Zi&&(Si===2||Si===9)||o.cancelPendingCommit!==null)&&($f(o,0),Ju(o,Un,Ma,!1)),si(o,y),((vi&2)===0||o!==Zi)&&(o===Zi&&((vi&2)===0&&(wd|=y),vr===4&&Ju(o,Un,Ma,!1)),Ml(o))}function Nr(o,u,y){if((vi&6)!==0)throw Error(h(327));var T=!y&&(u&127)===0&&(u&o.expiredLanes)===0||pr(o,u),R=T?Zf(o,u):Hg(o,u,!0),N=T;do{if(R===0){Ku&&!T&&Ju(o,u,0,!1);break}else{if(y=o.current.alternate,N&&!S1(y)){R=Hg(o,u,!1),N=!1;continue}if(R===2){if(N=u,o.errorRecoveryDisabledLanes&N)var H=0;else H=o.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){u=H;e:{var ue=o;R=am;var Oe=ue.current.memoizedState.isDehydrated;if(Oe&&($f(ue,H).flags|=256),H=Hg(ue,H,!1),H!==2){if(z0&&!Oe){ue.errorRecoveryDisabledLanes|=N,wd|=N,R=4;break e}N=Is,Is=R,N!==null&&(Is===null?Is=N:Is.push.apply(Is,N))}R=H}if(N=!1,R!==2)continue}}if(R===1){$f(o,0),Ju(o,u,0,!0);break}e:{switch(T=o,N=R,N){case 0:case 1:throw Error(h(345));case 4:if((u&4194048)!==u)break;case 6:Ju(T,u,Ma,!Ho);break e;case 2:Is=null;break;case 3:case 5:break;default:throw Error(h(329))}if((u&62914560)===u&&(R=$g+300-ji(),10<R)){if(Ju(T,u,Ma,!Ho),ei(T,0,!0)!==0)break e;Wo=u,T.timeoutHandle=hy(Gf.bind(null,T,y,Is,Vf,j0,u,Ma,wd,Td,Ho,N,"Throttled",-0,0),R);break e}Gf(T,y,Is,Vf,j0,u,Ma,wd,Td,Ho,N,null,-0,0)}}break}while(!0);Ml(o)}function Gf(o,u,y,T,R,N,H,ue,Oe,et,ft,bt,nt,st){if(o.timeoutHandle=-1,bt=u.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Us},nb(u,N,bt);var Wt=(N&62914560)===N?$g-ji():(N&4194048)===N?sb-ji():0;if(Wt=y_(bt,Wt),Wt!==null){Wo=N,o.cancelPendingCommit=Wt(fb.bind(null,o,u,N,y,T,R,H,ue,Oe,ft,bt,null,nt,st)),Ju(o,N,H,!et);return}}fb(o,u,N,y,T,R,H,ue,Oe)}function S1(o){for(var u=o;;){var y=u.tag;if((y===0||y===11||y===15)&&u.flags&16384&&(y=u.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var T=0;T<y.length;T++){var R=y[T],N=R.getSnapshot;R=R.value;try{if(!Ia(N(),R))return!1}catch{return!1}}if(y=u.child,u.subtreeFlags&16384&&y!==null)y.return=u,u=y;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ju(o,u,y,T){u&=~F0,u&=~wd,o.suspendedLanes|=u,o.pingedLanes&=~u,T&&(o.warmLanes|=u),T=o.expirationTimes;for(var R=u;0<R;){var N=31-ht(R),H=1<<N;T[N]=-1,R&=~H}y!==0&&pi(o,y,u)}function lm(){return(vi&6)===0?(eo(0),!1):!0}function qg(){if(Vn!==null){if(Si===0)var o=Vn.return;else o=Vn,zo=xs=null,wl(o),Bo=null,Zc=0,o=Vn;for(;o!==null;)zg(o.alternate,o),o=o.return;Vn=null}}function $f(o,u){var y=o.timeoutHandle;y!==-1&&(o.timeoutHandle=-1,r_(y)),y=o.cancelPendingCommit,y!==null&&(o.cancelPendingCommit=null,y()),Wo=0,qg(),Zi=o,Vn=y=Ja(o.current,null),Un=u,Si=0,os=null,Ho=!1,Ku=pr(o,u),z0=!1,Td=Ma=F0=wd=au=vr=0,Is=am=null,j0=!1,(u&8)!==0&&(u|=u&32);var T=o.entangledLanes;if(T!==0)for(o=o.entanglements,T&=u;0<T;){var R=31-ht(T),N=1<<R;u|=o[R],T&=~N}return ru=u,Vc(),y}function U0(o,u){En=null,Ve.H=ii,u===Zs||u===La?(u=Zu(),Si=3):u===rc?(u=Zu(),Si=4):Si=u===Cg?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,os=u,Vn===null&&(vr=1,Ks(o,Aa(u,o.current)))}function G0(){var o=jt.current;return o===null?!0:(Un&4194048)===Un?Gt===null:(Un&62914560)===Un||(Un&536870912)!==0?o===Gt:!1}function Sd(){var o=Ve.H;return Ve.H=ii,o===null?ii:o}function Yg(){var o=Ve.A;return Ve.A=T1,o}function cm(){vr=4,Ho||(Un&4194048)!==Un&&jt.current!==null||(Ku=!0),(au&134217727)===0&&(wd&134217727)===0||Zi===null||Ju(Zi,Un,Ma,!1)}function Hg(o,u,y){var T=vi;vi|=2;var R=Sd(),N=Yg();(Zi!==o||Un!==u)&&(Vf=null,$f(o,u)),u=!1;var H=vr;e:do try{if(Si!==0&&Vn!==null){var ue=Vn,Oe=os;switch(Si){case 8:qg(),H=6;break e;case 3:case 2:case 9:case 6:jt.current===null&&(u=!0);var et=Si;if(Si=0,os=null,qf(o,ue,Oe,et),y&&Ku){H=0;break e}break;default:et=Si,Si=0,os=null,qf(o,ue,Oe,et)}}Wg(),H=vr;break}catch(ft){U0(o,ft)}while(!0);return u&&o.shellSuspendCounter++,zo=xs=null,vi=T,Ve.H=R,Ve.A=N,Vn===null&&(Zi=null,Un=0,Vc()),H}function Wg(){for(;Vn!==null;)ub(Vn)}function Zf(o,u){var y=vi;vi|=2;var T=Sd(),R=Yg();Zi!==o||Un!==u?(Vf=null,sm=ji()+500,$f(o,u)):Ku=pr(o,u);e:do try{if(Si!==0&&Vn!==null){u=Vn;var N=os;t:switch(Si){case 1:Si=0,os=null,qf(o,u,N,1);break;case 2:case 9:if(ad(N)){Si=0,os=null,hb(u);break}u=function(){Si!==2&&Si!==9||Zi!==o||(Si=7),Ml(o)},N.then(u,u);break e;case 3:Si=7;break e;case 4:Si=5;break e;case 7:ad(N)?(Si=0,os=null,hb(u)):(Si=0,os=null,qf(o,u,N,7));break;case 5:var H=null;switch(Vn.tag){case 26:H=Vn.memoizedState;case 5:case 27:var ue=Vn;if(H?vm(H):ue.stateNode.complete){Si=0,os=null;var Oe=ue.sibling;if(Oe!==null)Vn=Oe;else{var et=ue.return;et!==null?(Vn=et,Xg(et)):Vn=null}break t}}Si=0,os=null,qf(o,u,N,5);break;case 6:Si=0,os=null,qf(o,u,N,6);break;case 8:qg(),vr=6;break e;default:throw Error(h(462))}}cb();break}catch(ft){U0(o,ft)}while(!0);return zo=xs=null,Ve.H=T,Ve.A=R,vi=y,Vn!==null?0:(Zi=null,Un=0,Vc(),vr)}function cb(){for(;Vn!==null&&!la();)ub(Vn)}function ub(o){var u=za(o.alternate,o,ru);o.memoizedProps=o.pendingProps,u===null?Xg(o):Vn=u}function hb(o){var u=o,y=u.alternate;switch(u.tag){case 15:case 0:u=Yv(y,u,u.pendingProps,u.type,void 0,Un);break;case 11:u=Yv(y,u,u.pendingProps,u.type.render,u.ref,Un);break;case 5:wl(u);default:zg(y,u),u=Vn=Tg(u,ru),u=za(y,u,ru)}o.memoizedProps=o.pendingProps,u===null?Xg(o):Vn=u}function qf(o,u,y,T){zo=xs=null,wl(u),Bo=null,Zc=0;var R=u.return;try{if(Mg(o,R,u,y,Un)){vr=1,Ks(o,Aa(y,o.current)),Vn=null;return}}catch(N){if(R!==null)throw Vn=R,N;vr=1,Ks(o,Aa(y,o.current)),Vn=null;return}u.flags&32768?(Ln||T===1?o=!0:Ku||(Un&536870912)!==0?o=!1:(Ho=o=!0,(T===2||T===9||T===3||T===6)&&(T=jt.current,T!==null&&T.tag===13&&(T.flags|=16384))),db(u,o)):Xg(u)}function Xg(o){var u=o;do{if((u.flags&32768)!==0){db(u,Ho);return}o=u.return;var y=Qv(u.alternate,u,ru);if(y!==null){Vn=y;return}if(u=u.sibling,u!==null){Vn=u;return}Vn=u=o}while(u!==null);vr===0&&(vr=5)}function db(o,u){do{var y=x1(o.alternate,o);if(y!==null){y.flags&=32767,Vn=y;return}if(y=o.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!u&&(o=o.sibling,o!==null)){Vn=o;return}Vn=o=y}while(o!==null);vr=6,Vn=null}function fb(o,u,y,T,R,N,H,ue,Oe){o.cancelPendingCommit=null;do Qg();while(Hr!==0);if((vi&6)!==0)throw Error(h(327));if(u!==null){if(u===o.current)throw Error(h(177));if(N=u.lanes|u.childLanes,N|=Bc,Qi(o,y,N,H,ue,Oe),o===Zi&&(Vn=Zi=null,Un=0),Uf=u,ou=o,Wo=y,B0=N,Zg=R,ob=T,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,vb(ae,function(){return _b(),null})):(o.callbackNode=null,o.callbackPriority=0),T=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||T){T=Ve.T,Ve.T=null,R=ut.p,ut.p=2,H=vi,vi|=4;try{w1(o,u,y)}finally{vi=H,ut.p=R,Ve.T=T}}Hr=1,pb(),mb(),gb()}}function pb(){if(Hr===1){Hr=0;var o=ou,u=Uf,y=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||y){y=Ve.T,Ve.T=null;var T=ut.p;ut.p=2;var R=vi;vi|=4;try{Vg(u,o);var N=n_,H=pf(o.containerInfo),ue=N.focusedElem,Oe=N.selectionRange;if(H!==ue&&ue&&ue.ownerDocument&&ff(ue.ownerDocument.documentElement,ue)){if(Oe!==null&&Wh(ue)){var et=Oe.start,ft=Oe.end;if(ft===void 0&&(ft=et),"selectionStart"in ue)ue.selectionStart=et,ue.selectionEnd=Math.min(ft,ue.value.length);else{var bt=ue.ownerDocument||document,nt=bt&&bt.defaultView||window;if(nt.getSelection){var st=nt.getSelection(),Wt=ue.textContent.length,sn=Math.min(Oe.start,Wt),Ei=Oe.end===void 0?sn:Math.min(Oe.end,Wt);!st.extend&&sn>Ei&&(H=Ei,Ei=sn,sn=H);var Ge=Hh(ue,sn),Be=Hh(ue,Ei);if(Ge&&Be&&(st.rangeCount!==1||st.anchorNode!==Ge.node||st.anchorOffset!==Ge.offset||st.focusNode!==Be.node||st.focusOffset!==Be.offset)){var Ke=bt.createRange();Ke.setStart(Ge.node,Ge.offset),st.removeAllRanges(),sn>Ei?(st.addRange(Ke),st.extend(Be.node,Be.offset)):(Ke.setEnd(Be.node,Be.offset),st.addRange(Ke))}}}}for(bt=[],st=ue;st=st.parentNode;)st.nodeType===1&&bt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof ue.focus=="function"&&ue.focus(),ue=0;ue<bt.length;ue++){var yt=bt[ue];yt.element.scrollLeft=yt.left,yt.element.scrollTop=yt.top}}Sm=!!pm,n_=pm=null}finally{vi=R,ut.p=T,Ve.T=y}}o.current=u,Hr=2}}function mb(){if(Hr===2){Hr=0;var o=ou,u=Uf,y=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||y){y=Ve.T,Ve.T=null;var T=ut.p;ut.p=2;var R=vi;vi|=4;try{L0(o,u.alternate,u)}finally{vi=R,ut.p=T,Ve.T=y}}Hr=3}}function gb(){if(Hr===4||Hr===3){Hr=0,js();var o=ou,u=Uf,y=Wo,T=ob;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Hr=5:(Hr=0,Uf=ou=null,yb(o,o.pendingLanes));var R=o.pendingLanes;if(R===0&&(su=null),wt(y),u=u.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(Ue,u,void 0,(u.current.flags&128)===128)}catch{}if(T!==null){u=Ve.T,R=ut.p,ut.p=2,Ve.T=null;try{for(var N=o.onRecoverableError,H=0;H<T.length;H++){var ue=T[H];N(ue.value,{componentStack:ue.stack})}}finally{Ve.T=u,ut.p=R}}(Wo&3)!==0&&Qg(),Ml(o),R=o.pendingLanes,(y&261930)!==0&&(R&42)!==0?o===V0?om++:(om=0,V0=o):om=0,eo(0)}}function yb(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Gu(u)))}function Qg(){return pb(),mb(),gb(),_b()}function _b(){if(Hr!==5)return!1;var o=ou,u=B0;B0=0;var y=wt(Wo),T=Ve.T,R=ut.p;try{ut.p=32>y?32:y,Ve.T=null,y=Zg,Zg=null;var N=ou,H=Wo;if(Hr=0,Uf=ou=null,Wo=0,(vi&6)!==0)throw Error(h(331));var ue=vi;if(vi|=4,rb(N.current),P0(N,N.current,H,y),vi=ue,eo(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(Ue,N)}catch{}return!0}finally{ut.p=R,Ve.T=T,yb(o,u)}}function $0(o,u,y){u=Aa(y,u),u=gd(o.stateNode,u,2),o=_l(o,u,2),o!==null&&(si(o,2),Ml(o))}function bi(o,u,y){if(o.tag===3)$0(o,o,y);else for(;u!==null;){if(u.tag===3){$0(u,o,y);break}else if(u.tag===1){var T=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(su===null||!su.has(T))){o=Aa(y,o),y=yd(2),T=_l(u,y,2),T!==null&&(_d(y,T,u,o),si(T,2),Ml(T));break}}u=u.return}}function Kg(o,u,y){var T=o.pingCache;if(T===null){T=o.pingCache=new ab;var R=new Set;T.set(u,R)}else R=T.get(u),R===void 0&&(R=new Set,T.set(u,R));R.has(y)||(z0=!0,R.add(y),o=eh.bind(null,o,u,y),u.then(o,o))}function eh(o,u,y){var T=o.pingCache;T!==null&&T.delete(u),o.pingedLanes|=o.suspendedLanes&y,o.warmLanes&=~y,Zi===o&&(Un&y)===y&&(vr===4||vr===3&&(Un&62914560)===Un&&300>ji()-$g?(vi&2)===0&&$f(o,0):F0|=y,Td===Un&&(Td=0)),Ml(o)}function um(o,u){u===0&&(u=ti()),o=bs(o,u),o!==null&&(si(o,u),Ml(o))}function Z0(o){var u=o.memoizedState,y=0;u!==null&&(y=u.retryLane),um(o,y)}function E1(o,u){var y=0;switch(o.tag){case 31:case 13:var T=o.stateNode,R=o.memoizedState;R!==null&&(y=R.retryLane);break;case 19:T=o.stateNode;break;case 22:T=o.stateNode._retryCache;break;default:throw Error(h(314))}T!==null&&T.delete(u),um(o,y)}function vb(o,u){return Br(o,u)}var Jg=null,Yf=null,q0=!1,ey=!1,Y0=!1,lu=0;function Ml(o){o!==Yf&&o.next===null&&(Yf===null?Jg=Yf=o:Yf=Yf.next=o),ey=!0,q0||(q0=!0,W0())}function eo(o,u){if(!Y0&&ey){Y0=!0;do for(var y=!1,T=Jg;T!==null;){if(o!==0){var R=T.pendingLanes;if(R===0)var N=0;else{var H=T.suspendedLanes,ue=T.pingedLanes;N=(1<<31-ht(42|o)+1)-1,N&=R&~(H&~ue),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(y=!0,hm(T,N))}else N=Un,N=ei(T,T===Zi?N:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),(N&3)===0||pr(T,N)||(y=!0,hm(T,N));T=T.next}while(y);Y0=!1}}function th(){H0()}function H0(){ey=q0=!1;var o=0;lu!==0&&uy()&&(o=lu);for(var u=ji(),y=null,T=Jg;T!==null;){var R=T.next,N=ty(T,u);N===0?(T.next=null,y===null?Jg=R:y.next=R,R===null&&(Yf=y)):(y=T,(o!==0||(N&3)!==0)&&(ey=!0)),T=R}Hr!==0&&Hr!==5||eo(o),lu!==0&&(lu=0)}function ty(o,u){for(var y=o.suspendedLanes,T=o.pingedLanes,R=o.expirationTimes,N=o.pendingLanes&-62914561;0<N;){var H=31-ht(N),ue=1<<H,Oe=R[H];Oe===-1?((ue&y)===0||(ue&T)!==0)&&(R[H]=un(ue,u)):Oe<=u&&(o.expiredLanes|=ue),N&=~ue}if(u=Zi,y=Un,y=ei(o,o===u?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),T=o.callbackNode,y===0||o===u&&(Si===2||Si===9)||o.cancelPendingCommit!==null)return T!==null&&T!==null&&na(T),o.callbackNode=null,o.callbackPriority=0;if((y&3)===0||pr(o,y)){if(u=y&-y,u===o.callbackPriority)return u;switch(T!==null&&na(T),wt(y)){case 2:case 8:y=re;break;case 32:y=ae;break;case 268435456:y=De;break;default:y=ae}return T=bb.bind(null,o),y=Br(y,T),o.callbackPriority=u,o.callbackNode=y,u}return T!==null&&T!==null&&na(T),o.callbackPriority=2,o.callbackNode=null,2}function bb(o,u){if(Hr!==0&&Hr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var y=o.callbackNode;if(Qg()&&o.callbackNode!==y)return null;var T=Un;return T=ei(o,o===Zi?T:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),T===0?null:(Nr(o,T,u),ty(o,ji()),o.callbackNode!=null&&o.callbackNode===y?bb.bind(null,o):null)}function hm(o,u){if(Qg())return null;Nr(o,u,!0)}function W0(){s_(function(){(vi&6)!==0?Br(Fe,th):H0()})}function X0(){if(lu===0){var o=$c;o===0&&(o=an,an<<=1,(an&261888)===0&&(an=256)),lu=o}return lu}function ny(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:_n(""+o)}function iy(o,u){var y=u.ownerDocument.createElement("input");return y.name=u.name,y.value=u.value,o.id&&y.setAttribute("form",o.id),u.parentNode.insertBefore(y,u),o=new FormData(o),y.parentNode.removeChild(y),o}function Hf(o,u,y,T,R){if(u==="submit"&&y&&y.stateNode===R){var N=ny((R[Ct]||null).action),H=T.submitter;H&&(u=(u=H[Ct]||null)?ny(u.formAction):H.getAttribute("formAction"),u!==null&&(N=u,H=null));var ue=new zh("action","action",null,T,R);o.push({event:ue,listeners:[{instance:null,listener:function(){if(T.defaultPrevented){if(lu!==0){var Oe=H?iy(R,H):new FormData(R);nr(y,{pending:!0,data:Oe,method:R.method,action:N},null,Oe)}}else typeof N=="function"&&(ue.preventDefault(),Oe=H?iy(R,H):new FormData(R),nr(y,{pending:!0,data:Oe,method:R.method,action:N},N,Oe))},currentTarget:R}]})}}for(var ry=0;ry<_f.length;ry++){var ay=_f[ry],Q0=ay.toLowerCase(),xb=ay[0].toUpperCase()+ay.slice(1);Qa(Q0,"on"+xb)}Qa(Kh,"onAnimationEnd"),Qa(Jh,"onAnimationIteration"),Qa(yf,"onAnimationStart"),Qa("dblclick","onDoubleClick"),Qa("focusin","onFocus"),Qa("focusout","onBlur"),Qa(jc,"onTransitionRun"),Qa(ed,"onTransitionStart"),Qa(Fu,"onTransitionCancel"),Qa(Xa,"onTransitionEnd"),cl("onMouseEnter",["mouseout","mouseover"]),cl("onMouseLeave",["mouseout","mouseover"]),cl("onPointerEnter",["pointerout","pointerover"]),cl("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nh));function Tb(o,u){u=(u&4)!==0;for(var y=0;y<o.length;y++){var T=o[y],R=T.event;T=T.listeners;e:{var N=void 0;if(u)for(var H=T.length-1;0<=H;H--){var ue=T[H],Oe=ue.instance,et=ue.currentTarget;if(ue=ue.listener,Oe!==N&&R.isPropagationStopped())break e;N=ue,R.currentTarget=et;try{N(R)}catch(ft){Ro(ft)}R.currentTarget=null,N=Oe}else for(H=0;H<T.length;H++){if(ue=T[H],Oe=ue.instance,et=ue.currentTarget,ue=ue.listener,Oe!==N&&R.isPropagationStopped())break e;N=ue,R.currentTarget=et;try{N(R)}catch(ft){Ro(ft)}R.currentTarget=null,N=Oe}}}}function Gn(o,u){var y=u[vn];y===void 0&&(y=u[vn]=new Set);var T=o+"__bubble";y.has(T)||(oy(u,o,2,!1),y.add(T))}function K0(o,u,y){var T=0;u&&(T|=4),oy(y,o,T,u)}var sy="_reactListening"+Math.random().toString(36).slice(2);function J0(o){if(!o[sy]){o[sy]=!0,Eu.forEach(function(y){y!=="selectionchange"&&(wb.has(y)||K0(y,!1,o),K0(y,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[sy]||(u[sy]=!0,K0("selectionchange",!1,u))}}function oy(o,u,y,T){switch(Md(u)){case 2:var R=Em;break;case 8:R=zb;break;default:R=v_}y=R.bind(null,u,y,o),R=void 0,!xa||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(R=!0),T?R!==void 0?o.addEventListener(u,y,{capture:!0,passive:R}):o.addEventListener(u,y,!0):R!==void 0?o.addEventListener(u,y,{passive:R}):o.addEventListener(u,y,!1)}function fc(o,u,y,T,R){var N=T;if((u&1)===0&&(u&2)===0&&T!==null)e:for(;;){if(T===null)return;var H=T.tag;if(H===3||H===4){var ue=T.stateNode.containerInfo;if(ue===R)break;if(H===4)for(H=T.return;H!==null;){var Oe=H.tag;if((Oe===3||Oe===4)&&H.stateNode.containerInfo===R)return;H=H.return}for(;ue!==null;){if(H=So(ue),H===null)return;if(Oe=H.tag,Oe===5||Oe===6||Oe===26||Oe===27){T=N=H;continue e}ue=ue.parentNode}}T=T.return}mi(function(){var et=N,ft=Ph(y),bt=[];e:{var nt=Lp.get(o);if(nt!==void 0){var st=zh,Wt=o;switch(o){case"keypress":if(Wa(y)===0)break e;case"keydown":case"keyup":st=er;break;case"focusin":Wt="focus",st=ql;break;case"focusout":Wt="blur",st=ql;break;case"beforeblur":case"afterblur":st=ql;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=w0;break;case Kh:case Jh:case yf:st=hg;break;case Xa:st=cf;break;case"scroll":case"scrollend":st=Oc;break;case"wheel":st=Dp;break;case"copy":case"cut":case"paste":st=Mp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=lf;break;case"toggle":case"beforetoggle":st=ku}var sn=(u&4)!==0,Ei=!sn&&(o==="scroll"||o==="scrollend"),Ge=sn?nt!==null?nt+"Capture":null:nt;sn=[];for(var Be=et,Ke;Be!==null;){var yt=Be;if(Ke=yt.stateNode,yt=yt.tag,yt!==5&&yt!==26&&yt!==27||Ke===null||Ge===null||(yt=gs(Be,Ge),yt!=null&&sn.push(Wf(Be,yt,Ke))),Ei)break;Be=Be.return}0<sn.length&&(nt=new st(nt,Wt,null,y,ft),bt.push({event:nt,listeners:sn}))}}if((u&7)===0){e:{if(nt=o==="mouseover"||o==="pointerover",st=o==="mouseout"||o==="pointerout",nt&&y!==Ap&&(Wt=y.relatedTarget||y.fromElement)&&(So(Wt)||Wt[dn]))break e;if((st||nt)&&(nt=ft.window===ft?ft:(nt=ft.ownerDocument)?nt.defaultView||nt.parentWindow:window,st?(Wt=y.relatedTarget||y.toElement,st=et,Wt=Wt?So(Wt):null,Wt!==null&&(Ei=g(Wt),sn=Wt.tag,Wt!==Ei||sn!==5&&sn!==27&&sn!==6)&&(Wt=null)):(st=null,Wt=et),st!==Wt)){if(sn=Lc,yt="onMouseLeave",Ge="onMouseEnter",Be="mouse",(o==="pointerout"||o==="pointerover")&&(sn=lf,yt="onPointerLeave",Ge="onPointerEnter",Be="pointer"),Ei=st==null?nt:Eo(st),Ke=Wt==null?nt:Eo(Wt),nt=new sn(yt,Be+"leave",st,y,ft),nt.target=Ei,nt.relatedTarget=Ke,yt=null,So(ft)===et&&(sn=new sn(Ge,Be+"enter",Wt,y,ft),sn.target=Ke,sn.relatedTarget=Ei,yt=sn),Ei=yt,st&&Wt)t:{for(sn=Sb,Ge=st,Be=Wt,Ke=0,yt=Ge;yt;yt=sn(yt))Ke++;yt=0;for(var rn=Be;rn;rn=sn(rn))yt++;for(;0<Ke-yt;)Ge=sn(Ge),Ke--;for(;0<yt-Ke;)Be=sn(Be),yt--;for(;Ke--;){if(Ge===Be||Be!==null&&Ge===Be.alternate){sn=Ge;break t}Ge=sn(Ge),Be=sn(Be)}sn=null}else sn=null;st!==null&&e_(bt,nt,st,sn,!1),Wt!==null&&Ei!==null&&e_(bt,Ei,Wt,sn,!0)}}e:{if(nt=et?Eo(et):window,st=nt.nodeName&&nt.nodeName.toLowerCase(),st==="select"||st==="input"&&nt.type==="file")var ui=Wl;else if(hf(nt))if(Ip)ui=xg;else{ui=bg;var Xt=T0}else st=nt.nodeName,!st||st.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?et&&Ic(et.elementType)&&(ui=Wl):ui=Yh;if(ui&&(ui=ui(o,et))){df(bt,ui,y,ft);break e}Xt&&Xt(o,nt,et),o==="focusout"&&et&&nt.type==="number"&&et.memoizedProps.value!=null&&Nh(nt,"number",nt.value)}switch(Xt=et?Eo(et):window,o){case"focusin":(hf(Xt)||Xt.contentEditable==="true")&&(vs=Xt,Xh=et,Qh=null);break;case"focusout":Qh=Xh=vs=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,wg(bt,y,ft);break;case"selectionchange":if(mf)break;case"keydown":case"keyup":wg(bt,y,ft)}var en;if(lr)e:{switch(o){case"compositionstart":var jn="onCompositionStart";break e;case"compositionend":jn="onCompositionEnd";break e;case"compositionupdate":jn="onCompositionUpdate";break e}jn=void 0}else Gs?Gh(o,y)&&(jn="onCompositionEnd"):o==="keydown"&&y.keyCode===229&&(jn="onCompositionStart");jn&&(Pu&&y.locale!=="ko"&&(Gs||jn!=="onCompositionStart"?jn==="onCompositionEnd"&&Gs&&(en=$l()):(Ha=ft,Co="value"in Ha?Ha.value:Ha.textContent,Gs=!0)),Xt=dm(et,jn),0<Xt.length&&(jn=new Cp(jn,o,null,y,ft),bt.push({event:jn,listeners:Xt}),en?jn.data=en:(en=mg(y),en!==null&&(jn.data=en)))),(en=Nu?uf(o,y):gg(o,y))&&(jn=dm(et,"onBeforeInput"),0<jn.length&&(Xt=new Cp("onBeforeInput","beforeinput",null,y,ft),bt.push({event:Xt,listeners:jn}),Xt.data=en)),Hf(bt,o,et,y,ft)}Tb(bt,u)})}function Wf(o,u,y){return{instance:o,listener:u,currentTarget:y}}function dm(o,u){for(var y=u+"Capture",T=[];o!==null;){var R=o,N=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||N===null||(R=gs(o,y),R!=null&&T.unshift(Wf(o,R,N)),R=gs(o,u),R!=null&&T.push(Wf(o,R,N))),o.tag===3)return T;o=o.return}return[]}function Sb(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function e_(o,u,y,T,R){for(var N=u._reactName,H=[];y!==null&&y!==T;){var ue=y,Oe=ue.alternate,et=ue.stateNode;if(ue=ue.tag,Oe!==null&&Oe===T)break;ue!==5&&ue!==26&&ue!==27||et===null||(Oe=et,R?(et=gs(y,N),et!=null&&H.unshift(Wf(y,et,Oe))):R||(et=gs(y,N),et!=null&&H.push(Wf(y,et,Oe)))),y=y.return}H.length!==0&&o.push({event:u,listeners:H})}var Eb=/\r\n?/g,Ab=/\u0000|\uFFFD/g;function fm(o){return(typeof o=="string"?o:""+o).replace(Eb,`
`).replace(Ab,"")}function t_(o,u){return u=fm(u),fm(o)===u}function ci(o,u,y,T,R,N){switch(y){case"children":typeof T=="string"?u==="body"||u==="textarea"&&T===""||ul(o,T):(typeof T=="number"||typeof T=="bigint")&&u!=="body"&&ul(o,""+T);break;case"className":Mo(o,"class",T);break;case"tabIndex":Mo(o,"tabindex",T);break;case"dir":case"role":case"viewBox":case"width":case"height":Mo(o,y,T);break;case"style":of(o,T,N);break;case"data":if(u!=="object"){Mo(o,"data",T);break}case"src":case"href":if(T===""&&(u!=="a"||y!=="href")){o.removeAttribute(y);break}if(T==null||typeof T=="function"||typeof T=="symbol"||typeof T=="boolean"){o.removeAttribute(y);break}T=_n(""+T),o.setAttribute(y,T);break;case"action":case"formAction":if(typeof T=="function"){o.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(y==="formAction"?(u!=="input"&&ci(o,u,"name",R.name,R,null),ci(o,u,"formEncType",R.formEncType,R,null),ci(o,u,"formMethod",R.formMethod,R,null),ci(o,u,"formTarget",R.formTarget,R,null)):(ci(o,u,"encType",R.encType,R,null),ci(o,u,"method",R.method,R,null),ci(o,u,"target",R.target,R,null)));if(T==null||typeof T=="symbol"||typeof T=="boolean"){o.removeAttribute(y);break}T=_n(""+T),o.setAttribute(y,T);break;case"onClick":T!=null&&(o.onclick=Us);break;case"onScroll":T!=null&&Gn("scroll",o);break;case"onScrollEnd":T!=null&&Gn("scrollend",o);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(h(61));if(y=T.__html,y!=null){if(R.children!=null)throw Error(h(60));o.innerHTML=y}}break;case"multiple":o.multiple=T&&typeof T!="function"&&typeof T!="symbol";break;case"muted":o.muted=T&&typeof T!="function"&&typeof T!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(T==null||typeof T=="function"||typeof T=="boolean"||typeof T=="symbol"){o.removeAttribute("xlink:href");break}y=_n(""+T),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":T!=null&&typeof T!="function"&&typeof T!="symbol"?o.setAttribute(y,""+T):o.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":T&&typeof T!="function"&&typeof T!="symbol"?o.setAttribute(y,""):o.removeAttribute(y);break;case"capture":case"download":T===!0?o.setAttribute(y,""):T!==!1&&T!=null&&typeof T!="function"&&typeof T!="symbol"?o.setAttribute(y,T):o.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":T!=null&&typeof T!="function"&&typeof T!="symbol"&&!isNaN(T)&&1<=T?o.setAttribute(y,T):o.removeAttribute(y);break;case"rowSpan":case"start":T==null||typeof T=="function"||typeof T=="symbol"||isNaN(T)?o.removeAttribute(y):o.setAttribute(y,T);break;case"popover":Gn("beforetoggle",o),Gn("toggle",o),kh(o,"popover",T);break;case"xlinkActuate":ms(o,"http://www.w3.org/1999/xlink","xlink:actuate",T);break;case"xlinkArcrole":ms(o,"http://www.w3.org/1999/xlink","xlink:arcrole",T);break;case"xlinkRole":ms(o,"http://www.w3.org/1999/xlink","xlink:role",T);break;case"xlinkShow":ms(o,"http://www.w3.org/1999/xlink","xlink:show",T);break;case"xlinkTitle":ms(o,"http://www.w3.org/1999/xlink","xlink:title",T);break;case"xlinkType":ms(o,"http://www.w3.org/1999/xlink","xlink:type",T);break;case"xmlBase":ms(o,"http://www.w3.org/XML/1998/namespace","xml:base",T);break;case"xmlLang":ms(o,"http://www.w3.org/XML/1998/namespace","xml:lang",T);break;case"xmlSpace":ms(o,"http://www.w3.org/XML/1998/namespace","xml:space",T);break;case"is":kh(o,"is",T);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Gl.get(y)||y,kh(o,y,T))}}function ly(o,u,y,T,R,N){switch(y){case"style":of(o,T,N);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(h(61));if(y=T.__html,y!=null){if(R.children!=null)throw Error(h(60));o.innerHTML=y}}break;case"children":typeof T=="string"?ul(o,T):(typeof T=="number"||typeof T=="bigint")&&ul(o,""+T);break;case"onScroll":T!=null&&Gn("scroll",o);break;case"onScrollEnd":T!=null&&Gn("scrollend",o);break;case"onClick":T!=null&&(o.onclick=Us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ha.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(R=y.endsWith("Capture"),u=y.slice(2,R?y.length-7:void 0),N=o[Ct]||null,N=N!=null?N[y]:null,typeof N=="function"&&o.removeEventListener(u,N,R),typeof T=="function")){typeof N!="function"&&N!==null&&(y in o?o[y]=null:o.hasAttribute(y)&&o.removeAttribute(y)),o.addEventListener(u,T,R);break e}y in o?o[y]=T:T===!0?o.setAttribute(y,""):kh(o,y,T)}}}function sa(o,u,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gn("error",o),Gn("load",o);var T=!1,R=!1,N;for(N in y)if(y.hasOwnProperty(N)){var H=y[N];if(H!=null)switch(N){case"src":T=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(h(137,u));default:ci(o,u,N,H,y,null)}}R&&ci(o,u,"srcSet",y.srcSet,y,null),T&&ci(o,u,"src",y.src,y,null);return;case"input":Gn("invalid",o);var ue=N=H=R=null,Oe=null,et=null;for(T in y)if(y.hasOwnProperty(T)){var ft=y[T];if(ft!=null)switch(T){case"name":R=ft;break;case"type":H=ft;break;case"checked":Oe=ft;break;case"defaultChecked":et=ft;break;case"value":N=ft;break;case"defaultValue":ue=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(h(137,u));break;default:ci(o,u,T,ft,y,null)}}sf(o,N,ue,Oe,et,H,R,!1);return;case"select":Gn("invalid",o),T=H=N=null;for(R in y)if(y.hasOwnProperty(R)&&(ue=y[R],ue!=null))switch(R){case"value":N=ue;break;case"defaultValue":H=ue;break;case"multiple":T=ue;default:ci(o,u,R,ue,y,null)}u=N,y=H,o.multiple=!!T,u!=null?Ul(o,!!T,u,!1):y!=null&&Ul(o,!!T,y,!0);return;case"textarea":Gn("invalid",o),N=R=T=null;for(H in y)if(y.hasOwnProperty(H)&&(ue=y[H],ue!=null))switch(H){case"value":T=ue;break;case"defaultValue":R=ue;break;case"children":N=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(h(91));break;default:ci(o,u,H,ue,y,null)}Cu(o,T,R,N);return;case"option":for(Oe in y)y.hasOwnProperty(Oe)&&(T=y[Oe],T!=null)&&(Oe==="selected"?o.selected=T&&typeof T!="function"&&typeof T!="symbol":ci(o,u,Oe,T,y,null));return;case"dialog":Gn("beforetoggle",o),Gn("toggle",o),Gn("cancel",o),Gn("close",o);break;case"iframe":case"object":Gn("load",o);break;case"video":case"audio":for(T=0;T<nh.length;T++)Gn(nh[T],o);break;case"image":Gn("error",o),Gn("load",o);break;case"details":Gn("toggle",o);break;case"embed":case"source":case"link":Gn("error",o),Gn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in y)if(y.hasOwnProperty(et)&&(T=y[et],T!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(h(137,u));default:ci(o,u,et,T,y,null)}return;default:if(Ic(u)){for(ft in y)y.hasOwnProperty(ft)&&(T=y[ft],T!==void 0&&ly(o,u,ft,T,y,void 0));return}}for(ue in y)y.hasOwnProperty(ue)&&(T=y[ue],T!=null&&ci(o,u,ue,T,y,null))}function Mb(o,u,y,T){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,N=null,H=null,ue=null,Oe=null,et=null,ft=null;for(st in y){var bt=y[st];if(y.hasOwnProperty(st)&&bt!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":Oe=bt;default:T.hasOwnProperty(st)||ci(o,u,st,null,T,bt)}}for(var nt in T){var st=T[nt];if(bt=y[nt],T.hasOwnProperty(nt)&&(st!=null||bt!=null))switch(nt){case"type":N=st;break;case"name":R=st;break;case"checked":et=st;break;case"defaultChecked":ft=st;break;case"value":H=st;break;case"defaultValue":ue=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(h(137,u));break;default:st!==bt&&ci(o,u,nt,st,T,bt)}}Lh(o,H,ue,Oe,et,ft,N,R);return;case"select":st=H=ue=nt=null;for(N in y)if(Oe=y[N],y.hasOwnProperty(N)&&Oe!=null)switch(N){case"value":break;case"multiple":st=Oe;default:T.hasOwnProperty(N)||ci(o,u,N,null,T,Oe)}for(R in T)if(N=T[R],Oe=y[R],T.hasOwnProperty(R)&&(N!=null||Oe!=null))switch(R){case"value":nt=N;break;case"defaultValue":ue=N;break;case"multiple":H=N;default:N!==Oe&&ci(o,u,R,N,T,Oe)}u=ue,y=H,T=st,nt!=null?Ul(o,!!y,nt,!1):!!T!=!!y&&(u!=null?Ul(o,!!y,u,!0):Ul(o,!!y,y?[]:"",!1));return;case"textarea":st=nt=null;for(ue in y)if(R=y[ue],y.hasOwnProperty(ue)&&R!=null&&!T.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:ci(o,u,ue,null,T,R)}for(H in T)if(R=T[H],N=y[H],T.hasOwnProperty(H)&&(R!=null||N!=null))switch(H){case"value":nt=R;break;case"defaultValue":st=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(h(91));break;default:R!==N&&ci(o,u,H,R,T,N)}cg(o,nt,st);return;case"option":for(var Wt in y)nt=y[Wt],y.hasOwnProperty(Wt)&&nt!=null&&!T.hasOwnProperty(Wt)&&(Wt==="selected"?o.selected=!1:ci(o,u,Wt,null,T,nt));for(Oe in T)nt=T[Oe],st=y[Oe],T.hasOwnProperty(Oe)&&nt!==st&&(nt!=null||st!=null)&&(Oe==="selected"?o.selected=nt&&typeof nt!="function"&&typeof nt!="symbol":ci(o,u,Oe,nt,T,st));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var sn in y)nt=y[sn],y.hasOwnProperty(sn)&&nt!=null&&!T.hasOwnProperty(sn)&&ci(o,u,sn,null,T,nt);for(et in T)if(nt=T[et],st=y[et],T.hasOwnProperty(et)&&nt!==st&&(nt!=null||st!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(h(137,u));break;default:ci(o,u,et,nt,T,st)}return;default:if(Ic(u)){for(var Ei in y)nt=y[Ei],y.hasOwnProperty(Ei)&&nt!==void 0&&!T.hasOwnProperty(Ei)&&ly(o,u,Ei,void 0,T,nt);for(ft in T)nt=T[ft],st=y[ft],!T.hasOwnProperty(ft)||nt===st||nt===void 0&&st===void 0||ly(o,u,ft,nt,T,st);return}}for(var Ge in y)nt=y[Ge],y.hasOwnProperty(Ge)&&nt!=null&&!T.hasOwnProperty(Ge)&&ci(o,u,Ge,null,T,nt);for(bt in T)nt=T[bt],st=y[bt],!T.hasOwnProperty(bt)||nt===st||nt==null&&st==null||ci(o,u,bt,nt,T,st)}function Os(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xf(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,y=performance.getEntriesByType("resource"),T=0;T<y.length;T++){var R=y[T],N=R.transferSize,H=R.initiatorType,ue=R.duration;if(N&&ue&&Os(H)){for(H=0,ue=R.responseEnd,T+=1;T<y.length;T++){var Oe=y[T],et=Oe.startTime;if(et>ue)break;var ft=Oe.transferSize,bt=Oe.initiatorType;ft&&Os(bt)&&(Oe=Oe.responseEnd,H+=ft*(Oe<ue?1:(ue-et)/(Oe-et)))}if(--T,u+=8*(N+H)/(R.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var pm=null,n_=null;function mm(o){return o.nodeType===9?o:o.ownerDocument}function ih(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function i_(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function cy(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var rh=null;function uy(){var o=window.event;return o&&o.type==="popstate"?o===rh?!1:(rh=o,!0):(rh=null,!1)}var hy=typeof setTimeout=="function"?setTimeout:void 0,r_=typeof clearTimeout=="function"?clearTimeout:void 0,a_=typeof Promise=="function"?Promise:void 0,s_=typeof queueMicrotask=="function"?queueMicrotask:typeof a_<"u"?function(o){return a_.resolve(null).then(o).catch(o_)}:hy;function o_(o){setTimeout(function(){throw o})}function ah(o){return o==="head"}function Cb(o,u){var y=u,T=0;do{var R=y.nextSibling;if(o.removeChild(y),R&&R.nodeType===8)if(y=R.data,y==="/$"||y==="/&"){if(T===0){o.removeChild(R),hh(u);return}T--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")T++;else if(y==="html")Qf(o.ownerDocument.documentElement);else if(y==="head"){y=o.ownerDocument.head,Qf(y);for(var N=y.firstChild;N;){var H=N.nextSibling,ue=N.nodeName;N[hn]||ue==="SCRIPT"||ue==="STYLE"||ue==="LINK"&&N.rel.toLowerCase()==="stylesheet"||y.removeChild(N),N=H}}else y==="body"&&Qf(o.ownerDocument.body);y=R}while(y);hh(u)}function Cn(o,u){var y=o;o=0;do{var T=y.nextSibling;if(y.nodeType===1?u?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(u?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),T&&T.nodeType===8)if(y=T.data,y==="/$"){if(o===0)break;o--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||o++;y=T}while(y)}function Cl(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var y=u;switch(u=u.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":Cl(y),Mc(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}o.removeChild(y)}}function pa(o,u,y,T){for(;o.nodeType===1;){var R=y;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!T&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(T){if(!o[hn])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(N=o.getAttribute("rel"),N==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(N!==R.rel||o.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||o.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||o.getAttribute("title")!==(R.title==null?null:R.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(N=o.getAttribute("src"),(N!==(R.src==null?null:R.src)||o.getAttribute("type")!==(R.type==null?null:R.type)||o.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&N&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var N=R.name==null?null:""+R.name;if(R.type==="hidden"&&o.getAttribute("name")===N)return o}else return o;if(o=to(o.nextSibling),o===null)break}return null}function Dl(o,u,y){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!y||(o=to(o.nextSibling),o===null))return null;return o}function sh(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=to(o.nextSibling),o===null))return null;return o}function Fa(o){return o.data==="$?"||o.data==="$~"}function Mr(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function Wr(o,u){var y=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||y.readyState!=="loading")u();else{var T=function(){u(),y.removeEventListener("DOMContentLoaded",T)};y.addEventListener("DOMContentLoaded",T),o._reactRetry=T}}function to(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var ls=null;function Xr(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var y=o.data;if(y==="/$"||y==="/&"){if(u===0)return to(o.nextSibling);u--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||u++}o=o.nextSibling}return null}function gm(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var y=o.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(u===0)return o;u--}else y!=="/$"&&y!=="/&"||u++}o=o.previousSibling}return null}function Db(o,u,y){switch(u=mm(y),o){case"html":if(o=u.documentElement,!o)throw Error(h(452));return o;case"head":if(o=u.head,!o)throw Error(h(453));return o;case"body":if(o=u.body,!o)throw Error(h(454));return o;default:throw Error(h(451))}}function Qf(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Mc(o)}var ma=new Map,Ed=new Set;function dy(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var pc=ut.d;ut.d={f:Ib,r:Rb,D:c_,C:ja,L:Il,m:Ba,X:fy,S:lh,M:u_};function Ib(){var o=pc.f(),u=lm();return o||u}function Rb(o){var u=ll(o);u!==null&&u.tag===5&&u.type==="form"?$r(u):pc.r(o)}var oh=typeof document>"u"?null:document;function l_(o,u,y){var T=oh;if(T&&typeof u=="string"&&u){var R=ba(u);R='link[rel="'+o+'"][href="'+R+'"]',typeof y=="string"&&(R+='[crossorigin="'+y+'"]'),Ed.has(R)||(Ed.add(R),o={rel:o,crossOrigin:y,href:u},T.querySelector(R)===null&&(u=T.createElement("link"),sa(u,"link",o),Ki(u),T.head.appendChild(u)))}}function c_(o){pc.D(o),l_("dns-prefetch",o,null)}function ja(o,u){pc.C(o,u),l_("preconnect",o,u)}function Il(o,u,y){pc.L(o,u,y);var T=oh;if(T&&o&&u){var R='link[rel="preload"][as="'+ba(u)+'"]';u==="image"&&y&&y.imageSrcSet?(R+='[imagesrcset="'+ba(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(R+='[imagesizes="'+ba(y.imageSizes)+'"]')):R+='[href="'+ba(o)+'"]';var N=R;switch(u){case"style":N=Ad(o);break;case"script":N=cu(o)}ma.has(N)||(o=z({rel:"preload",href:u==="image"&&y&&y.imageSrcSet?void 0:o,as:u},y),ma.set(N,o),T.querySelector(R)!==null||u==="style"&&T.querySelector(Kf(N))||u==="script"&&T.querySelector(Jf(N))||(u=T.createElement("link"),sa(u,"link",o),Ki(u),T.head.appendChild(u)))}}function Ba(o,u){pc.m(o,u);var y=oh;if(y&&o){var T=u&&typeof u.as=="string"?u.as:"script",R='link[rel="modulepreload"][as="'+ba(T)+'"][href="'+ba(o)+'"]',N=R;switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=cu(o)}if(!ma.has(N)&&(o=z({rel:"modulepreload",href:o},u),ma.set(N,o),y.querySelector(R)===null)){switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Jf(N)))return}T=y.createElement("link"),sa(T,"link",o),Ki(T),y.head.appendChild(T)}}}function lh(o,u,y){pc.S(o,u,y);var T=oh;if(T&&o){var R=Ao(T).hoistableStyles,N=Ad(o);u=u||"default";var H=R.get(N);if(!H){var ue={loading:0,preload:null};if(H=T.querySelector(Kf(N)))ue.loading=5;else{o=z({rel:"stylesheet",href:o,"data-precedence":u},y),(y=ma.get(N))&&ym(o,y);var Oe=H=T.createElement("link");Ki(Oe),sa(Oe,"link",o),Oe._p=new Promise(function(et,ft){Oe.onload=et,Oe.onerror=ft}),Oe.addEventListener("load",function(){ue.loading|=1}),Oe.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,uu(H,u,T)}H={type:"stylesheet",instance:H,count:1,state:ue},R.set(N,H)}}}function fy(o,u){pc.X(o,u);var y=oh;if(y&&o){var T=Ao(y).hoistableScripts,R=cu(o),N=T.get(R);N||(N=y.querySelector(Jf(R)),N||(o=z({src:o,async:!0},u),(u=ma.get(R))&&py(o,u),N=y.createElement("script"),Ki(N),sa(N,"link",o),y.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},T.set(R,N))}}function u_(o,u){pc.M(o,u);var y=oh;if(y&&o){var T=Ao(y).hoistableScripts,R=cu(o),N=T.get(R);N||(N=y.querySelector(Jf(R)),N||(o=z({src:o,async:!0,type:"module"},u),(u=ma.get(R))&&py(o,u),N=y.createElement("script"),Ki(N),sa(N,"link",o),y.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},T.set(R,N))}}function h_(o,u,y,T){var R=(R=Zt.current)?dy(R):null;if(!R)throw Error(h(446));switch(o){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(u=Ad(y.href),y=Ao(R).hoistableStyles,T=y.get(u),T||(T={type:"style",instance:null,count:0,state:null},y.set(u,T)),T):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){o=Ad(y.href);var N=Ao(R).hoistableStyles,H=N.get(o);if(H||(R=R.ownerDocument||R,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(o,H),(N=R.querySelector(Kf(o)))&&!N._p&&(H.instance=N,H.state.loading=5),ma.has(o)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},ma.set(o,y),N||f_(R,o,y,H.state))),u&&T===null)throw Error(h(528,""));return H}if(u&&T!==null)throw Error(h(529,""));return null;case"script":return u=y.async,y=y.src,typeof y=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=cu(y),y=Ao(R).hoistableScripts,T=y.get(u),T||(T={type:"script",instance:null,count:0,state:null},y.set(u,T)),T):{type:"void",instance:null,count:0,state:null};default:throw Error(h(444,o))}}function Ad(o){return'href="'+ba(o)+'"'}function Kf(o){return'link[rel="stylesheet"]['+o+"]"}function d_(o){return z({},o,{"data-precedence":o.precedence,precedence:null})}function f_(o,u,y,T){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?T.loading=1:(u=o.createElement("link"),T.preload=u,u.addEventListener("load",function(){return T.loading|=1}),u.addEventListener("error",function(){return T.loading|=2}),sa(u,"link",y),Ki(u),o.head.appendChild(u))}function cu(o){return'[src="'+ba(o)+'"]'}function Jf(o){return"script[async]"+o}function p_(o,u,y){if(u.count++,u.instance===null)switch(u.type){case"style":var T=o.querySelector('style[data-href~="'+ba(y.href)+'"]');if(T)return u.instance=T,Ki(T),T;var R=z({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return T=(o.ownerDocument||o).createElement("style"),Ki(T),sa(T,"style",R),uu(T,y.precedence,o),u.instance=T;case"stylesheet":R=Ad(y.href);var N=o.querySelector(Kf(R));if(N)return u.state.loading|=4,u.instance=N,Ki(N),N;T=d_(y),(R=ma.get(R))&&ym(T,R),N=(o.ownerDocument||o).createElement("link"),Ki(N);var H=N;return H._p=new Promise(function(ue,Oe){H.onload=ue,H.onerror=Oe}),sa(N,"link",T),u.state.loading|=4,uu(N,y.precedence,o),u.instance=N;case"script":return N=cu(y.src),(R=o.querySelector(Jf(N)))?(u.instance=R,Ki(R),R):(T=y,(R=ma.get(N))&&(T=z({},y),py(T,R)),o=o.ownerDocument||o,R=o.createElement("script"),Ki(R),sa(R,"link",T),o.head.appendChild(R),u.instance=R);case"void":return null;default:throw Error(h(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(T=u.instance,u.state.loading|=4,uu(T,y.precedence,o));return u.instance}function uu(o,u,y){for(var T=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=T.length?T[T.length-1]:null,N=R,H=0;H<T.length;H++){var ue=T[H];if(ue.dataset.precedence===u)N=ue;else if(N!==R)break}N?N.parentNode.insertBefore(o,N.nextSibling):(u=y.nodeType===9?y.head:y,u.insertBefore(o,u.firstChild))}function ym(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function py(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var my=null;function m_(o,u,y){if(my===null){var T=new Map,R=my=new Map;R.set(y,T)}else R=my,T=R.get(y),T||(T=new Map,R.set(y,T));if(T.has(o))return T;for(T.set(o,null),y=y.getElementsByTagName(o),R=0;R<y.length;R++){var N=y[R];if(!(N[hn]||N[wi]||o==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var H=N.getAttribute(u)||"";H=o+H;var ue=T.get(H);ue?ue.push(N):T.set(H,[N])}}return T}function _m(o,u,y){o=o.ownerDocument||o,o.head.insertBefore(y,u==="title"?o.querySelector("head > title"):null)}function gy(o,u,y){if(y===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(o=u.disabled,typeof u.precedence=="string"&&o==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function vm(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function g_(o,u,y,T){if(y.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var R=Ad(T.href),N=u.querySelector(Kf(R));if(N){u=N._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=xm.bind(o),u.then(o,o)),y.state.loading|=4,y.instance=N,Ki(N);return}N=u.ownerDocument||u,T=d_(T),(R=ma.get(R))&&ym(T,R),N=N.createElement("link"),Ki(N);var H=N;H._p=new Promise(function(ue,Oe){H.onload=ue,H.onerror=Oe}),sa(N,"link",T),y.instance=N}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(y,u),(u=y.state.preload)&&(y.state.loading&3)===0&&(o.count++,y=xm.bind(o),u.addEventListener("load",y),u.addEventListener("error",y))}}var bm=0;function y_(o,u){return o.stylesheets&&o.count===0&&Tm(o,o.stylesheets),0<o.count||0<o.imgCount?function(y){var T=setTimeout(function(){if(o.stylesheets&&Tm(o,o.stylesheets),o.unsuspend){var N=o.unsuspend;o.unsuspend=null,N()}},6e4+u);0<o.imgBytes&&bm===0&&(bm=62500*Xf());var R=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Tm(o,o.stylesheets),o.unsuspend)){var N=o.unsuspend;o.unsuspend=null,N()}},(o.imgBytes>bm?50:800)+u);return o.unsuspend=y,function(){o.unsuspend=null,clearTimeout(T),clearTimeout(R)}}:null}function xm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Tm(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var wm=null;function Tm(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,wm=new Map,u.forEach(kb,o),wm=null,xm.call(o))}function kb(o,u){if(!(u.state.loading&4)){var y=wm.get(o);if(y)var T=y.get(null);else{y=new Map,wm.set(o,y);for(var R=o.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<R.length;N++){var H=R[N];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(y.set(H.dataset.precedence,H),T=H)}T&&y.set(null,T)}R=u.instance,H=R.getAttribute("data-precedence"),N=y.get(H)||T,N===T&&y.set(null,R),y.set(H,R),this.count++,T=xm.bind(this),R.addEventListener("load",T),R.addEventListener("error",T),N?N.parentNode.insertBefore(R,N.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(R,o.firstChild)),u.state.loading|=4}}var ep={$$typeof:we,Provider:null,Consumer:null,_currentValue:Tt,_currentValue2:Tt,_threadCount:0};function A1(o,u,y,T,R,N,H,ue,Oe){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ir(0),this.hiddenUpdates=Ir(null),this.identifierPrefix=T,this.onUncaughtError=R,this.onCaughtError=N,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Oe,this.incompleteTransitions=new Map}function __(o,u,y,T,R,N,H,ue,Oe,et,ft,bt){return o=new A1(o,u,y,H,Oe,et,ft,bt,ue),u=1,N===!0&&(u|=24),N=Ka(3,null,null,u),o.current=N,N.stateNode=o,u=jo(),u.refCount++,o.pooledCache=u,u.refCount++,N.memoizedState={element:T,isDehydrated:y,cache:u},Rf(N),o}function Ob(o){return o?(o=mn,o):mn}function Lb(o,u,y,T,R,N){R=Ob(R),T.context===null?T.context=R:T.pendingContext=R,T=$o(u),T.payload={element:y},N=N===void 0?null:N,N!==null&&(T.callback=N),y=_l(o,T,u),y!==null&&(ks(y,o,u),Ts(y,o,u))}function yy(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var y=o.retryLane;o.retryLane=y!==0&&y<u?y:u}}function _y(o,u){yy(o,u),(o=o.alternate)&&yy(o,u)}function Nb(o){if(o.tag===13||o.tag===31){var u=bs(o,67108864);u!==null&&ks(u,o,67108864),_y(o,67108864)}}function Pb(o){if(o.tag===13||o.tag===31){var u=Rs();u=Ac(u);var y=bs(o,u);y!==null&&ks(y,o,u),_y(o,u)}}var Sm=!0;function Em(o,u,y,T){var R=Ve.T;Ve.T=null;var N=ut.p;try{ut.p=2,v_(o,u,y,T)}finally{ut.p=N,Ve.T=R}}function zb(o,u,y,T){var R=Ve.T;Ve.T=null;var N=ut.p;try{ut.p=8,v_(o,u,y,T)}finally{ut.p=N,Ve.T=R}}function v_(o,u,y,T){if(Sm){var R=Am(T);if(R===null)fc(o,u,T,tp,y),Fb(o,T);else if(C1(R,o,u,y,T))T.stopPropagation();else if(Fb(o,T),u&4&&-1<M1.indexOf(o)){for(;R!==null;){var N=ll(R);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var H=$e(N.pendingLanes);if(H!==0){var ue=N;for(ue.pendingLanes|=2,ue.entangledLanes|=2;H;){var Oe=1<<31-ht(H);ue.entanglements[1]|=Oe,H&=~Oe}Ml(N),(vi&6)===0&&(sm=ji()+500,eo(0))}}break;case 31:case 13:ue=bs(N,2),ue!==null&&ks(ue,N,2),lm(),_y(N,2)}if(N=Am(T),N===null&&fc(o,u,T,tp,y),N===R)break;R=N}R!==null&&T.stopPropagation()}else fc(o,u,T,null,y)}}function Am(o){return o=Ph(o),vy(o)}var tp=null;function vy(o){if(tp=null,o=So(o),o!==null){var u=g(o);if(u===null)o=null;else{var y=u.tag;if(y===13){if(o=_(u),o!==null)return o;o=null}else if(y===31){if(o=c(u),o!==null)return o;o=null}else if(y===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return tp=o,null}function Md(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dr()){case Fe:return 2;case re:return 8;case ae:case he:return 32;case De:return 268435456;default:return 32}default:return 32}}var by=!1,ch=null,Xo=null,uh=null,Mm=new Map,np=new Map,hu=[],M1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fb(o,u){switch(o){case"focusin":case"focusout":ch=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":uh=null;break;case"pointerover":case"pointerout":Mm.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":np.delete(u.pointerId)}}function Cm(o,u,y,T,R,N){return o===null||o.nativeEvent!==N?(o={blockedOn:u,domEventName:y,eventSystemFlags:T,nativeEvent:N,targetContainers:[R]},u!==null&&(u=ll(u),u!==null&&Nb(u)),o):(o.eventSystemFlags|=T,u=o.targetContainers,R!==null&&u.indexOf(R)===-1&&u.push(R),o)}function C1(o,u,y,T,R){switch(u){case"focusin":return ch=Cm(ch,o,u,y,T,R),!0;case"dragenter":return Xo=Cm(Xo,o,u,y,T,R),!0;case"mouseover":return uh=Cm(uh,o,u,y,T,R),!0;case"pointerover":var N=R.pointerId;return Mm.set(N,Cm(Mm.get(N)||null,o,u,y,T,R)),!0;case"gotpointercapture":return N=R.pointerId,np.set(N,Cm(np.get(N)||null,o,u,y,T,R)),!0}return!1}function jb(o){var u=So(o.target);if(u!==null){var y=g(u);if(y!==null){if(u=y.tag,u===13){if(u=_(y),u!==null){o.blockedOn=u,ua(o.priority,function(){Pb(y)});return}}else if(u===31){if(u=c(y),u!==null){o.blockedOn=u,ua(o.priority,function(){Pb(y)});return}}else if(u===3&&y.stateNode.current.memoizedState.isDehydrated){o.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Dm(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var y=Am(o.nativeEvent);if(y===null){y=o.nativeEvent;var T=new y.constructor(y.type,y);Ap=T,y.target.dispatchEvent(T),Ap=null}else return u=ll(y),u!==null&&Nb(u),o.blockedOn=y,!1;u.shift()}return!0}function Bb(o,u,y){Dm(o)&&y.delete(u)}function Im(){by=!1,ch!==null&&Dm(ch)&&(ch=null),Xo!==null&&Dm(Xo)&&(Xo=null),uh!==null&&Dm(uh)&&(uh=null),Mm.forEach(Bb),np.forEach(Bb)}function xy(o,u){o.blockedOn===u&&(o.blockedOn=null,by||(by=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Im)))}var wy=null;function Vb(o){wy!==o&&(wy=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){wy===o&&(wy=null);for(var u=0;u<o.length;u+=3){var y=o[u],T=o[u+1],R=o[u+2];if(typeof T!="function"){if(vy(T||y)===null)continue;break}var N=ll(y);N!==null&&(o.splice(u,3),u-=3,nr(N,{pending:!0,data:R,method:y.method,action:T},T,R))}}))}function hh(o){function u(Oe){return xy(Oe,o)}ch!==null&&xy(ch,o),Xo!==null&&xy(Xo,o),uh!==null&&xy(uh,o),Mm.forEach(u),np.forEach(u);for(var y=0;y<hu.length;y++){var T=hu[y];T.blockedOn===o&&(T.blockedOn=null)}for(;0<hu.length&&(y=hu[0],y.blockedOn===null);)jb(y),y.blockedOn===null&&hu.shift();if(y=(o.ownerDocument||o).$$reactFormReplay,y!=null)for(T=0;T<y.length;T+=3){var R=y[T],N=y[T+1],H=R[Ct]||null;if(typeof N=="function")H||Vb(y);else if(H){var ue=null;if(N&&N.hasAttribute("formAction")){if(R=N,H=N[Ct]||null)ue=H.formAction;else if(vy(R)!==null)continue}else ue=H.action;typeof ue=="function"?y[T+1]=ue:(y.splice(T,3),T-=3),Vb(y)}}}function b_(){function o(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(H){return R=H})},focusReset:"manual",scroll:"manual"})}function u(){R!==null&&(R(),R=null),T||setTimeout(y,20)}function y(){if(!T&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var T=!1,R=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(y,100),function(){T=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),R!==null&&(R(),R=null)}}}function x_(o){this._internalRoot=o}Ty.prototype.render=x_.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(h(409));var y=u.current,T=Rs();Lb(y,T,o,u,null,null)},Ty.prototype.unmount=x_.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;Lb(o.current,2,null,o,null,null),lm(),u[dn]=null}};function Ty(o){this._internalRoot=o}Ty.prototype.unstable_scheduleHydration=function(o){if(o){var u=ca();o={blockedOn:null,target:o,priority:u};for(var y=0;y<hu.length&&u!==0&&u<hu[y].priority;y++);hu.splice(y,0,o),y===0&&jb(o)}};var w_=n.version;if(w_!=="19.2.3")throw Error(h(527,w_,"19.2.3"));ut.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(h(188)):(o=Object.keys(o).join(","),Error(h(268,o)));return o=D(u),o=o!==null?O(o):null,o=o===null?null:o.stateNode,o};var Ub={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Ve,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sy.isDisabled&&Sy.supportsFiber)try{Ue=Sy.inject(Ub),Pe=Sy}catch{}}return C_.createRoot=function(o,u){if(!f(o))throw Error(h(299));var y=!1,T="",R=Nf,N=Tl,H=Sl;return u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(T=u.identifierPrefix),u.onUncaughtError!==void 0&&(R=u.onUncaughtError),u.onCaughtError!==void 0&&(N=u.onCaughtError),u.onRecoverableError!==void 0&&(H=u.onRecoverableError)),u=__(o,1,!1,null,null,y,T,null,R,N,H,b_),o[dn]=u.current,J0(o),new x_(u)},C_.hydrateRoot=function(o,u,y){if(!f(o))throw Error(h(299));var T=!1,R="",N=Nf,H=Tl,ue=Sl,Oe=null;return y!=null&&(y.unstable_strictMode===!0&&(T=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onUncaughtError!==void 0&&(N=y.onUncaughtError),y.onCaughtError!==void 0&&(H=y.onCaughtError),y.onRecoverableError!==void 0&&(ue=y.onRecoverableError),y.formState!==void 0&&(Oe=y.formState)),u=__(o,1,!0,u,y??null,T,R,Oe,N,H,ue,b_),u.context=Ob(null),y=u.current,T=Rs(),T=Ac(T),R=$o(T),R.callback=null,_l(y,R,T),y=T,u.current.lanes=y,si(u,y),Ml(u),o[dn]=u.current,J0(o),new Ty(u)},C_.version="19.2.3",C_}var HT;function qI(){if(HT)return B1.exports;HT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),B1.exports=ZI(),B1.exports}var YI=qI();const HI=eg(YI),WI="modulepreload",XI=function(i){return"https://www.opentripplanner.org/debug-client-assets/2026/01/2026-01-16T10:08/"+i},WT={},SA=function(n,a,h){let f=Promise.resolve();if(a&&a.length>0){let D=function(O){return Promise.all(O.map(z=>Promise.resolve(z).then(V=>({status:"fulfilled",value:V}),V=>({status:"rejected",reason:V}))))};var _=D;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),A=c?.nonce||c?.getAttribute("nonce");f=D(a.map(O=>{if(O=XI(O),O in WT)return;WT[O]=!0;const z=O.endsWith(".css"),V=z?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${O}"]${V}`))return;const Y=document.createElement("link");if(Y.rel=z?"stylesheet":WI,z||(Y.as="script"),Y.crossOrigin="",Y.href=O,A&&Y.setAttribute("nonce",A),document.head.appendChild(Y),z)return new Promise((ee,ie)=>{Y.addEventListener("load",ee),Y.addEventListener("error",()=>ie(new Error(`Unable to preload CSS for ${O}`)))})}))}function g(c){const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=c,window.dispatchEvent(A),!A.defaultPrevented)throw c}return f.then(c=>{for(const A of c||[])A.status==="rejected"&&g(A.reason);return n().catch(g)})},QI=te.createContext(null);function KI(i,n){const a=Array.isArray(i)?i[0]:i?i.x:0,h=Array.isArray(i)?i[1]:i?i.y:0,f=Array.isArray(n)?n[0]:n?n.x:0,g=Array.isArray(n)?n[1]:n?n.y:0;return a===f&&h===g}function Ko(i,n){if(i===n)return!0;if(!i||!n)return!1;if(Array.isArray(i)){if(!Array.isArray(n)||i.length!==n.length)return!1;for(let a=0;a<i.length;a++)if(!Ko(i[a],n[a]))return!1;return!0}else if(Array.isArray(n))return!1;if(typeof i=="object"&&typeof n=="object"){const a=Object.keys(i),h=Object.keys(n);if(a.length!==h.length)return!1;for(const f of a)if(!n.hasOwnProperty(f)||!Ko(i[f],n[f]))return!1;return!0}return!1}function XT(i){return{longitude:i.center.lng,latitude:i.center.lat,zoom:i.zoom,pitch:i.pitch,bearing:i.bearing,padding:i.padding}}function QT(i,n){const a=n.viewState||n,h={};if("longitude"in a&&"latitude"in a&&(a.longitude!==i.center.lng||a.latitude!==i.center.lat)){const f=i.center.constructor;h.center=new f(a.longitude,a.latitude)}return"zoom"in a&&a.zoom!==i.zoom&&(h.zoom=a.zoom),"bearing"in a&&a.bearing!==i.bearing&&(h.bearing=a.bearing),"pitch"in a&&a.pitch!==i.pitch&&(h.pitch=a.pitch),a.padding&&i.padding&&!Ko(a.padding,i.padding)&&(h.padding=a.padding),h}const JI=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function KT(i){if(!i)return null;if(typeof i=="string"||("toJS"in i&&(i=i.toJS()),!i.layers))return i;const n={};for(const h of i.layers)n[h.id]=h;const a=i.layers.map(h=>{let f=null;"interactive"in h&&(f=Object.assign({},h),delete f.interactive);const g=n[h.ref];if(g){f=f||Object.assign({},h),delete f.ref;for(const _ of JI)_ in g&&(f[_]=g[_])}return f||h});return{...i,layers:a}}const JT={version:8,sources:{},layers:[]},eS={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},tS={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},nS={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},eR=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],tR=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class $y{constructor(n,a,h){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=f=>{const g=this.props[nS[f.type]];g?g(f):f.type==="error"&&console.error(f.error)},this._onCameraEvent=f=>{if(this._internalUpdate)return;f.viewState=this._propsedCameraUpdate||XT(this._map.transform);const g=this.props[tS[f.type]];g&&g(f)},this._onCameraUpdate=f=>this._internalUpdate?f:(this._propsedCameraUpdate=XT(f),QT(f,this.props)),this._onPointerEvent=f=>{(f.type==="mousemove"||f.type==="mouseout")&&this._updateHover(f);const g=this.props[eS[f.type]];g&&(this.props.interactiveLayerIds&&f.type!=="mouseover"&&f.type!=="mouseout"&&(f.features=this._hoveredFeatures||this._queryRenderedFeatures(f.point)),g(f),delete f.features)},this._MapClass=n,this.props=a,this._initialize(h)}get map(){return this._map}setProps(n){const a=this.props;this.props=n;const h=this._updateSettings(n,a),f=this._updateSize(n),g=this._updateViewState(n);this._updateStyle(n,a),this._updateStyleComponents(n),this._updateHandlers(n,a),(h||f||g&&!this._map.isMoving())&&this.redraw()}static reuse(n,a){const h=$y.savedMaps.pop();if(!h)return null;const f=h.map,g=f.getContainer();for(a.className=g.className;g.childNodes.length>0;)a.appendChild(g.childNodes[0]);f._container=a;const _=f._resizeObserver;_&&(_.disconnect(),_.observe(a)),h.setProps({...n,styleDiffing:!1}),f.resize();const{initialViewState:c}=n;return c&&(c.bounds?f.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):h._updateViewState(c)),f.isStyleLoaded()?f.fire("load"):f.once("style.load",()=>f.fire("load")),f._update(),h}_initialize(n){const{props:a}=this,{mapStyle:h=JT}=a,f={...a,...a.initialViewState,container:n,style:KT(h)},g=f.initialViewState||f.viewState||f;if(Object.assign(f,{center:[g.longitude||0,g.latitude||0],zoom:g.zoom||0,pitch:g.pitch||0,bearing:g.bearing||0}),a.gl){const c=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=c,a.gl)}const _=new this._MapClass(f);g.padding&&_.setPadding(g.padding),a.cursor&&(_.getCanvas().style.cursor=a.cursor),_.transformCameraUpdate=this._onCameraUpdate,_.on("style.load",()=>{this._styleComponents={light:_.getLight(),sky:_.getSky(),projection:_.getProjection?.(),terrain:_.getTerrain()},this._updateStyleComponents(this.props)}),_.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const c in eS)_.on(c,this._onPointerEvent);for(const c in tS)_.on(c,this._onCameraEvent);for(const c in nS)_.on(c,this._onEvent);this._map=_}recycle(){this.map.getContainer().querySelector("[mapboxgl-children]")?.remove(),$y.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const n=this._map;n.style&&(n._frame&&(n._frame.cancel(),n._frame=null),n._render())}_updateSize(n){const{viewState:a}=n;if(a){const h=this._map;if(a.width!==h.transform.width||a.height!==h.transform.height)return h.resize(),!0}return!1}_updateViewState(n){const a=this._map,h=a.transform;if(!a.isMoving()){const g=QT(h,n);if(Object.keys(g).length>0)return this._internalUpdate=!0,a.jumpTo(g),this._internalUpdate=!1,!0}return!1}_updateSettings(n,a){const h=this._map;let f=!1;for(const g of eR)g in n&&!Ko(n[g],a[g])&&(f=!0,h[`set${g[0].toUpperCase()}${g.slice(1)}`]?.call(h,n[g]));return f}_updateStyle(n,a){if(n.cursor!==a.cursor&&(this._map.getCanvas().style.cursor=n.cursor||""),n.mapStyle!==a.mapStyle){const{mapStyle:h=JT,styleDiffing:f=!0}=n,g={diff:f};"localIdeographFontFamily"in n&&(g.localIdeographFontFamily=n.localIdeographFontFamily),this._map.setStyle(KT(h),g)}}_updateStyleComponents({light:n,projection:a,sky:h,terrain:f}){const g=this._map,_=this._styleComponents;g.style._loaded&&(n&&!Ko(n,_.light)&&(_.light=n,g.setLight(n)),a&&!Ko(a,_.projection)&&a!==_.projection?.type&&(_.projection=typeof a=="string"?{type:a}:a,g.setProjection?.(_.projection)),h&&!Ko(h,_.sky)&&(_.sky=h,g.setSky(h)),f!==void 0&&!Ko(f,_.terrain)&&(!f||g.getSource(f.source))&&(_.terrain=f,g.setTerrain(f)))}_updateHandlers(n,a){const h=this._map;for(const f of tR){const g=n[f]??!0,_=a[f]??!0;Ko(g,_)||(g?h[f].enable(g):h[f].disable())}}_queryRenderedFeatures(n){const a=this._map,{interactiveLayerIds:h=[]}=this.props;try{return a.queryRenderedFeatures(n,{layers:h.filter(a.getLayer.bind(a))})}catch{return[]}}_updateHover(n){const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const f=n.type,g=this._hoveredFeatures?.length>0,_=this._queryRenderedFeatures(n.point),c=_.length>0;!c&&g&&(n.type="mouseleave",this._onPointerEvent(n)),this._hoveredFeatures=_,c&&!g&&(n.type="mouseenter",this._onPointerEvent(n)),n.type=f}else this._hoveredFeatures=null}}$y.savedMaps=[];const nR=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function iR(i){if(!i)return null;const n=i.map,a={getMap:()=>n};for(const h of rR(n))!(h in a)&&!nR.includes(h)&&(a[h]=n[h].bind(n));return a}function rR(i){const n=new Set;let a=i;for(;a;){for(const h of Object.getOwnPropertyNames(a))h[0]!=="_"&&typeof i[h]=="function"&&h!=="fire"&&h!=="setEventedParent"&&n.add(h);a=Object.getPrototypeOf(a)}return Array.from(n)}const aR=typeof document<"u"?te.useLayoutEffect:te.useEffect;function sR(i,n){const{RTLTextPlugin:a,maxParallelImageRequests:h,workerCount:f,workerUrl:g}=n;if(a&&i.getRTLTextPluginStatus&&i.getRTLTextPluginStatus()==="unavailable"){const{pluginUrl:_,lazy:c=!0}=typeof a=="string"?{pluginUrl:a}:a;i.setRTLTextPlugin(_,A=>{A&&console.error(A)},c)}h!==void 0&&i.setMaxParallelImageRequests(h),f!==void 0&&i.setWorkerCount(f),g!==void 0&&i.setWorkerUrl(g)}const s0=te.createContext(null);function oR(i,n){const a=te.useContext(QI),[h,f]=te.useState(null),g=te.useRef(),{current:_}=te.useRef({mapLib:null,map:null});te.useEffect(()=>{const D=i.mapLib;let O=!0,z;return Promise.resolve(D||SA(()=>Promise.resolve().then(()=>DA),void 0)).then(V=>{if(!O)return;if(!V)throw new Error("Invalid mapLib");const Y="Map"in V?V:V.default;if(!Y.Map)throw new Error("Invalid mapLib");sR(Y,i),i.reuseMaps&&(z=$y.reuse(i,g.current)),z||(z=new $y(Y.Map,i,g.current)),_.map=iR(z),_.mapLib=Y,f(z),a?.onMapMount(_.map,i.id)}).catch(V=>{const{onError:Y}=i;Y?Y({type:"error",target:null,originalEvent:null,error:V}):console.error(V)}),()=>{O=!1,z&&(a?.onMapUnmount(i.id),i.reuseMaps?z.recycle():z.destroy())}},[]),aR(()=>{h&&h.setProps(i)}),te.useImperativeHandle(n,()=>_.map,[h]);const c=te.useMemo(()=>({position:"relative",width:"100%",height:"100%",...i.style}),[i.style]),A={height:"100%"};return te.createElement("div",{id:i.id,ref:g,style:c},h&&te.createElement(s0.Provider,{value:_},te.createElement("div",{"mapboxgl-children":"",style:A},i.children)))}const lR=te.forwardRef(oR);var Gx=TA();const Pm=eg(Gx),cR=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Jd(i,n){if(!i||!n)return;const a=i.style;for(const h in n){const f=n[h];Number.isFinite(f)&&!cR.test(h)?a[h]=`${f}px`:a[h]=f}}function EA(i,n){if(i===n)return null;const a=iS(i),h=iS(n),f=[];for(const g of h)a.has(g)||f.push(g);for(const g of a)h.has(g)||f.push(g);return f.length===0?null:f}function iS(i){return new Set(i?i.trim().split(/\s+/):[])}const rS=te.memo(te.forwardRef((i,n)=>{const{map:a,mapLib:h}=te.useContext(s0),f=te.useRef({props:i}),g=te.useMemo(()=>{let fe=!1;te.Children.forEach(i.children,ze=>{ze&&(fe=!0)});const Ee={...i,element:fe?document.createElement("div"):void 0},we=new h.Marker(Ee);return we.setLngLat([i.longitude,i.latitude]),we.getElement().addEventListener("click",ze=>{f.current.props.onClick?.({type:"click",target:we,originalEvent:ze})}),we.on("dragstart",ze=>{const Ce=ze;Ce.lngLat=g.getLngLat(),f.current.props.onDragStart?.(Ce)}),we.on("drag",ze=>{const Ce=ze;Ce.lngLat=g.getLngLat(),f.current.props.onDrag?.(Ce)}),we.on("dragend",ze=>{const Ce=ze;Ce.lngLat=g.getLngLat(),f.current.props.onDragEnd?.(Ce)}),we},[]);te.useEffect(()=>(g.addTo(a.getMap()),()=>{g.remove()}),[]);const{longitude:_,latitude:c,offset:A,style:D,draggable:O=!1,popup:z=null,rotation:V=0,rotationAlignment:Y="auto",pitchAlignment:ee="auto"}=i;te.useEffect(()=>{Jd(g.getElement(),D)},[D]),te.useImperativeHandle(n,()=>g,[]);const ie=f.current.props;(g.getLngLat().lng!==_||g.getLngLat().lat!==c)&&g.setLngLat([_,c]),A&&!KI(g.getOffset(),A)&&g.setOffset(A),g.isDraggable()!==O&&g.setDraggable(O),g.getRotation()!==V&&g.setRotation(V),g.getRotationAlignment()!==Y&&g.setRotationAlignment(Y),g.getPitchAlignment()!==ee&&g.setPitchAlignment(ee),g.getPopup()!==z&&g.setPopup(z);const q=EA(ie.className,i.className);if(q)for(const fe of q)g.toggleClassName(fe);return f.current.props=i,Gx.createPortal(i.children,g.getElement())})),m2=te.memo(te.forwardRef((i,n)=>{const{map:a,mapLib:h}=te.useContext(s0),f=te.useMemo(()=>document.createElement("div"),[]),g=te.useRef({props:i}),_=te.useMemo(()=>{const c={...i},A=new h.Popup(c);return A.setLngLat([i.longitude,i.latitude]),A.once("open",D=>{g.current.props.onOpen?.(D)}),A},[]);if(te.useEffect(()=>{const c=A=>{g.current.props.onClose?.(A)};return _.on("close",c),_.setDOMContent(f).addTo(a.getMap()),()=>{_.off("close",c),_.isOpen()&&_.remove()}},[]),te.useEffect(()=>{Jd(_.getElement(),i.style)},[i.style]),te.useImperativeHandle(n,()=>_,[]),_.isOpen()){const c=g.current.props;(_.getLngLat().lng!==i.longitude||_.getLngLat().lat!==i.latitude)&&_.setLngLat([i.longitude,i.latitude]),i.offset&&!Ko(c.offset,i.offset)&&_.setOffset(i.offset),(c.anchor!==i.anchor||c.maxWidth!==i.maxWidth)&&(_.options.anchor=i.anchor,_.setMaxWidth(i.maxWidth));const A=EA(c.className,i.className);if(A)for(const D of A)_.toggleClassName(D);g.current.props=i}return Gx.createPortal(i.children,f)}));function tg(i,n,a,h){const f=te.useContext(s0),g=te.useMemo(()=>i(f),[]);return te.useEffect(()=>{const _=n,c=null,A=typeof n=="function"?n:null,{map:D}=f;return D.hasControl(g)||(D.addControl(g,_?.position),c&&c(f)),()=>{A&&A(f),D.hasControl(g)&&D.removeControl(g)}},[]),g}function uR(i){const n=tg(({mapLib:a})=>new a.AttributionControl(i),{position:i.position});return te.useEffect(()=>{Jd(n._container,i.style)},[i.style]),null}te.memo(uR);function hR(i){const n=tg(({mapLib:a})=>new a.FullscreenControl({container:i.containerId&&document.getElementById(i.containerId)}),{position:i.position});return te.useEffect(()=>{Jd(n._controlContainer,i.style)},[i.style]),null}te.memo(hR);function dR(i,n){const a=te.useRef({props:i}),h=tg(({mapLib:f})=>{const g=new f.GeolocateControl(i),_=g._setupUI;return g._setupUI=()=>{g._container.hasChildNodes()||_()},g.on("geolocate",c=>{a.current.props.onGeolocate?.(c)}),g.on("error",c=>{a.current.props.onError?.(c)}),g.on("outofmaxbounds",c=>{a.current.props.onOutOfMaxBounds?.(c)}),g.on("trackuserlocationstart",c=>{a.current.props.onTrackUserLocationStart?.(c)}),g.on("trackuserlocationend",c=>{a.current.props.onTrackUserLocationEnd?.(c)}),g},{position:i.position});return a.current.props=i,te.useImperativeHandle(n,()=>h,[]),te.useEffect(()=>{Jd(h._container,i.style)},[i.style]),null}te.memo(te.forwardRef(dR));function fR(i){const n=tg(({mapLib:a})=>new a.NavigationControl(i),{position:i.position});return te.useEffect(()=>{Jd(n._container,i.style)},[i.style]),null}const pR=te.memo(fR);function mR(i){const n=tg(({mapLib:g})=>new g.ScaleControl(i),{position:i.position}),a=te.useRef(i),h=a.current;a.current=i;const{style:f}=i;return i.maxWidth!==void 0&&i.maxWidth!==h.maxWidth&&(n.options.maxWidth=i.maxWidth),i.unit!==void 0&&i.unit!==h.unit&&n.setUnit(i.unit),te.useEffect(()=>{Jd(n._container,f)},[f]),null}te.memo(mR);function gR(i){const n=tg(({mapLib:a})=>new a.TerrainControl(i),{position:i.position});return te.useEffect(()=>{Jd(n._container,i.style)},[i.style]),null}te.memo(gR);function yR(i){const n=tg(({mapLib:a})=>new a.LogoControl(i),{position:i.position});return te.useEffect(()=>{Jd(n._container,i.style)},[i.style]),null}te.memo(yR);function yx(i,n){if(!i)throw new Error(n)}let _R=0;function vR(i,n,a){if(i.style&&i.style._loaded){const h={...a};return delete h.id,delete h.children,i.addSource(n,h),i.getSource(n)}return null}function bR(i,n,a){yx(n.id===a.id,"source id changed"),yx(n.type===a.type,"source type changed");let h="",f=0;for(const _ in n)_!=="children"&&_!=="id"&&!Ko(a[_],n[_])&&(h=_,f++);if(!f)return;const g=n.type;if(g==="geojson")i.setData(n.data);else if(g==="image")i.updateImage({url:n.url,coordinates:n.coordinates});else switch(h){case"coordinates":i.setCoordinates?.(n.coordinates);break;case"url":i.setUrl?.(n.url);break;case"tiles":i.setTiles?.(n.tiles);break;default:console.warn(`Unable to update <Source> prop: ${h}`)}}function xR(i){const n=te.useContext(s0).map.getMap(),a=te.useRef(i),[,h]=te.useState(0),f=te.useMemo(()=>i.id||`jsx-source-${_R++}`,[]);te.useEffect(()=>{if(n){const _=()=>setTimeout(()=>h(c=>c+1),0);return n.on("styledata",_),_(),()=>{if(n.off("styledata",_),n.style&&n.style._loaded&&n.getSource(f)){const c=n.getStyle()?.layers;if(c)for(const A of c)A.source===f&&n.removeLayer(A.id);n.removeSource(f)}}}},[n]);let g=n&&n.style&&n.getSource(f);return g?bR(g,i,a.current):g=vR(n,f,i),a.current=i,g&&te.Children.map(i.children,_=>_&&te.cloneElement(_,{source:f}))||null}function wR(i,n,a,h){if(yx(a.id===h.id,"layer id changed"),yx(a.type===h.type,"layer type changed"),a.type==="custom"||h.type==="custom")return;const{layout:f={},paint:g={},filter:_,minzoom:c,maxzoom:A,beforeId:D}=a;if(D!==h.beforeId&&i.moveLayer(n,D),f!==h.layout){const O=h.layout||{};for(const z in f)Ko(f[z],O[z])||i.setLayoutProperty(n,z,f[z]);for(const z in O)f.hasOwnProperty(z)||i.setLayoutProperty(n,z,void 0)}if(g!==h.paint){const O=h.paint||{};for(const z in g)Ko(g[z],O[z])||i.setPaintProperty(n,z,g[z]);for(const z in O)g.hasOwnProperty(z)||i.setPaintProperty(n,z,void 0)}Ko(_,h.filter)||i.setFilter(n,_),(c!==h.minzoom||A!==h.maxzoom)&&i.setLayerZoomRange(n,c,A)}function TR(i,n,a){if(i.style&&i.style._loaded&&(!("source"in a)||i.getSource(a.source))){const h={...a,id:n};delete h.beforeId,i.addLayer(h,a.beforeId)}}let SR=0;function aS(i){const n=te.useContext(s0).map.getMap(),a=te.useRef(i),[,h]=te.useState(0),f=te.useMemo(()=>i.id||`jsx-layer-${SR++}`,[]);if(te.useEffect(()=>{if(n){const _=()=>h(c=>c+1);return n.on("styledata",_),_(),()=>{n.off("styledata",_),n.style&&n.style._loaded&&n.getLayer(f)&&n.removeLayer(f)}}},[n]),n&&n.style&&n.getLayer(f))try{wR(n,f,i,a.current)}catch(_){console.warn(_)}else TR(n,f,i);return a.current=i,null}var sx={exports:{}};var ER=sx.exports,sS;function AR(){return sS||(sS=1,(function(i,n){(function(a,h){i.exports=h()})(ER,(function(){var a={},h={};function f(_,c,A){if(h[_]=A,_==="index"){var D="var sharedModule = {}; ("+h.shared+")(sharedModule); ("+h.worker+")(sharedModule);",O={};return h.shared(O),h.index(a,O),typeof window<"u"&&a.setWorkerUrl(window.URL.createObjectURL(new Blob([D],{type:"text/javascript"}))),a}}f("shared",["exports"],(function(_){function c(s,e,r,d){return new(r||(r=Promise))((function(m,b){function x(k){try{C(d.next(k))}catch(P){b(P)}}function E(k){try{C(d.throw(k))}catch(P){b(P)}}function C(k){var P;k.done?m(k.value):(P=k.value,P instanceof r?P:new r((function(j){j(P)}))).then(x,E)}C((d=d.apply(s,e||[])).next())}))}function A(s,e){this.x=s,this.y=e}function D(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var O,z;typeof SuppressedError=="function"&&SuppressedError,A.prototype={clone(){return new A(this.x,this.y)},add(s){return this.clone()._add(s)},sub(s){return this.clone()._sub(s)},multByPoint(s){return this.clone()._multByPoint(s)},divByPoint(s){return this.clone()._divByPoint(s)},mult(s){return this.clone()._mult(s)},div(s){return this.clone()._div(s)},rotate(s){return this.clone()._rotate(s)},rotateAround(s,e){return this.clone()._rotateAround(s,e)},matMult(s){return this.clone()._matMult(s)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(s){return this.x===s.x&&this.y===s.y},dist(s){return Math.sqrt(this.distSqr(s))},distSqr(s){const e=s.x-this.x,r=s.y-this.y;return e*e+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith(s){return this.angleWithSep(s.x,s.y)},angleWithSep(s,e){return Math.atan2(this.x*e-this.y*s,this.x*s+this.y*e)},_matMult(s){const e=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=e,this},_add(s){return this.x+=s.x,this.y+=s.y,this},_sub(s){return this.x-=s.x,this.y-=s.y,this},_mult(s){return this.x*=s,this.y*=s,this},_div(s){return this.x/=s,this.y/=s,this},_multByPoint(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint(s){return this.x/=s.x,this.y/=s.y,this},_unit(){return this._div(this.mag()),this},_perp(){const s=this.y;return this.y=this.x,this.x=-s,this},_rotate(s){const e=Math.cos(s),r=Math.sin(s),d=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=d,this},_rotateAround(s,e){const r=Math.cos(s),d=Math.sin(s),m=e.y+d*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-d*(this.y-e.y),this.y=m,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:A},A.convert=function(s){if(s instanceof A)return s;if(Array.isArray(s))return new A(+s[0],+s[1]);if(s.x!==void 0&&s.y!==void 0)return new A(+s.x,+s.y);throw new Error("Expected [x, y] or {x, y} point format")};var V=(function(){if(z)return O;function s(e,r,d,m){this.cx=3*e,this.bx=3*(d-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(m-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=d,this.p2y=m}return z=1,O=s,s.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,r){if(r===void 0&&(r=1e-6),e<0)return 0;if(e>1)return 1;for(var d=e,m=0;m<8;m++){var b=this.sampleCurveX(d)-e;if(Math.abs(b)<r)return d;var x=this.sampleCurveDerivativeX(d);if(Math.abs(x)<1e-6)break;d-=b/x}var E=0,C=1;for(d=e,m=0;m<20&&(b=this.sampleCurveX(d),!(Math.abs(b-e)<r));m++)e>b?E=d:C=d,d=.5*(C-E)+E;return d},solve:function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))}},O})(),Y=D(V);let ee,ie;function q(){return ee==null&&(ee=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ee}function fe(){if(ie==null&&(ie=!1,q())){const e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let d=0;d<25;d++){const m=4*d;e.fillStyle=`rgb(${m},${m+1},${m+2})`,e.fillRect(d%5,Math.floor(d/5),1,1)}const r=e.getImageData(0,0,5,5).data;for(let d=0;d<100;d++)if(d%4!=3&&r[d]!==d){ie=!0;break}}}return ie||!1}var Ee=1e-6,we=typeof Float32Array<"u"?Float32Array:Array;function ze(){var s=new we(9);return we!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function Ce(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Re(){var s=new we(3);return we!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function Ne(s){var e=s[0],r=s[1],d=s[2];return Math.sqrt(e*e+r*r+d*d)}function at(s,e,r){var d=new we(3);return d[0]=s,d[1]=e,d[2]=r,d}function Te(s,e,r){return s[0]=e[0]+r[0],s[1]=e[1]+r[1],s[2]=e[2]+r[2],s}function it(s,e,r){return s[0]=e[0]*r,s[1]=e[1]*r,s[2]=e[2]*r,s}function Dt(s,e,r){var d=e[0],m=e[1],b=e[2],x=r[0],E=r[1],C=r[2];return s[0]=m*C-b*E,s[1]=b*x-d*C,s[2]=d*E-m*x,s}var Mt,Ut=Ne;function Ht(s,e,r){var d=e[0],m=e[1],b=e[2],x=e[3];return s[0]=r[0]*d+r[4]*m+r[8]*b+r[12]*x,s[1]=r[1]*d+r[5]*m+r[9]*b+r[13]*x,s[2]=r[2]*d+r[6]*m+r[10]*b+r[14]*x,s[3]=r[3]*d+r[7]*m+r[11]*b+r[15]*x,s}function Yt(){var s=new we(4);return we!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function Ve(s,e,r,d){var m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",b=Math.PI/360;e*=b,d*=b,r*=b;var x=Math.sin(e),E=Math.cos(e),C=Math.sin(r),k=Math.cos(r),P=Math.sin(d),j=Math.cos(d);switch(m){case"xyz":s[0]=x*k*j+E*C*P,s[1]=E*C*j-x*k*P,s[2]=E*k*P+x*C*j,s[3]=E*k*j-x*C*P;break;case"xzy":s[0]=x*k*j-E*C*P,s[1]=E*C*j-x*k*P,s[2]=E*k*P+x*C*j,s[3]=E*k*j+x*C*P;break;case"yxz":s[0]=x*k*j+E*C*P,s[1]=E*C*j-x*k*P,s[2]=E*k*P-x*C*j,s[3]=E*k*j+x*C*P;break;case"yzx":s[0]=x*k*j+E*C*P,s[1]=E*C*j+x*k*P,s[2]=E*k*P-x*C*j,s[3]=E*k*j-x*C*P;break;case"zxy":s[0]=x*k*j-E*C*P,s[1]=E*C*j+x*k*P,s[2]=E*k*P+x*C*j,s[3]=E*k*j-x*C*P;break;case"zyx":s[0]=x*k*j-E*C*P,s[1]=E*C*j+x*k*P,s[2]=E*k*P-x*C*j,s[3]=E*k*j+x*C*P;break;default:throw new Error("Unknown angle order "+m)}return s}function ut(){var s=new we(2);return we!=Float32Array&&(s[0]=0,s[1]=0),s}function Tt(s,e){var r=new we(2);return r[0]=s,r[1]=e,r}Re(),Mt=new we(4),we!=Float32Array&&(Mt[0]=0,Mt[1]=0,Mt[2]=0,Mt[3]=0),Re(),at(1,0,0),at(0,1,0),Yt(),Yt(),ze(),ut();const gt=8192;function $t(s,e,r){return e*(gt/(s.tileSize*Math.pow(2,r-s.tileID.overscaledZ)))}function Le(s,e){return(s%e+e)%e}function tt(s,e,r){return s*(1-r)+e*r}function xt(s){if(s<=0)return 0;if(s>=1)return 1;const e=s*s,r=e*s;return 4*(s<.5?r:3*(s-e)+r-.75)}function St(s,e,r,d){const m=new Y(s,e,r,d);return b=>m.solve(b)}const Nt=St(.25,.1,.25,1);function Zt(s,e,r){return Math.min(r,Math.max(e,s))}function Jt(s,e,r){const d=r-e,m=((s-e)%d+d)%d+e;return m===e?r:m}function on(s,...e){for(const r of e)for(const d in r)s[d]=r[d];return s}let Sn=1;function Ri(s,e,r){const d={};for(const m in s)d[m]=e.call(this,s[m],m,s);return d}function Tr(s,e,r){const d={};for(const m in s)e.call(this,s[m],m,s)&&(d[m]=s[m]);return d}function Fi(s){return Array.isArray(s)?s.map(Fi):typeof s=="object"&&s?Ri(s,Fi):s}const ta={};function Nn(s){ta[s]||(typeof console<"u"&&console.warn(s),ta[s]=!0)}function bn(s,e,r){return(r.y-s.y)*(e.x-s.x)>(e.y-s.y)*(r.x-s.x)}function Sr(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Xn=null;function Za(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const qa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Br(s,e,r,d,m){return c(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const b=new VideoFrame(s,{timestamp:0});try{const x=b?.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const E=x.startsWith("BGR"),C=new Uint8ClampedArray(d*m*4);if(yield b.copyTo(C,(function(k,P,j,U,G){const W=4*Math.max(-P,0),X=(Math.max(0,j)-j)*U*4+W,J=4*U,le=Math.max(0,P),ve=Math.max(0,j);return{rect:{x:le,y:ve,width:Math.min(k.width,P+U)-le,height:Math.min(k.height,j+G)-ve},layout:[{offset:X,stride:J}]}})(s,e,r,d,m)),E)for(let k=0;k<C.length;k+=4){const P=C[k];C[k]=C[k+2],C[k+2]=P}return C}finally{b.close()}}))}let na,la;function js(s,e,r,d){return s.addEventListener(e,r,d),{unsubscribe:()=>{s.removeEventListener(e,r,d)}}}function ji(s){return s*Math.PI/180}function Dr(s){return s/Math.PI*180}const Fe={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},re={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ae="AbortError";class he extends Error{constructor(e=ae){super(e instanceof Error?e.message:e),this.name=ae,e instanceof Error&&e.stack&&(this.stack=e.stack)}}function De(s){return s.name===ae}const ke={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ye(s){return ke.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const Ue="global-dispatcher";class Pe extends Error{constructor(e,r,d,m){super(`AJAXError: ${r} (${e}): ${d}`),this.status=e,this.statusText=r,this.url=d,this.body=m}}const He=()=>Sr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ht=function(s,e){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const d=Ye(s.url);if(d)return d(s,e);if(Sr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:Ue},e)}if(!(/^file:/.test(r=s.url)||/^file:/.test(He())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(d,m){return c(this,void 0,void 0,(function*(){const b=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:He(),signal:m.signal});let x,E;d.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");try{x=yield fetch(b)}catch(k){throw De(k)?k:new Pe(0,k.message,d.url,new Blob)}if(!x.ok){const k=yield x.blob();throw new Pe(x.status,x.statusText,d.url,k)}E=d.type==="arrayBuffer"||d.type==="image"?x.arrayBuffer():d.type==="json"?x.json():x.text();const C=yield E;return m.signal.throwIfAborted(),{data:C,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}}))})(s,e);if(Sr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:Ue},e)}var r;return(function(d,m){return new Promise(((b,x)=>{var E;const C=new XMLHttpRequest;C.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(C.responseType="arraybuffer");for(const k in d.headers)C.setRequestHeader(k,d.headers[k]);d.type==="json"&&(C.responseType="text",!((E=d.headers)===null||E===void 0)&&E.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=d.credentials==="include",C.onerror=()=>{x(new Error(C.statusText))},C.onload=()=>{if(!m.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let k=C.response;if(d.type==="json")try{k=JSON.parse(C.response)}catch(P){return void x(P)}b({data:k,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const k=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});x(new Pe(C.status,C.statusText,d.url,k))}},m.signal.addEventListener("abort",(()=>{C.abort(),x(new he(m.signal.reason))})),C.send(d.body)}))})(s,e)};function dt(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const e=new URL(s),r=window.location;return e.protocol===r.protocol&&e.host===r.host}function Ft(s,e,r){r[s]&&r[s].indexOf(e)!==-1||(r[s]=r[s]||[],r[s].push(e))}function qt(s,e,r){if(r&&r[s]){const d=r[s].indexOf(e);d!==-1&&r[s].splice(d,1)}}class an{constructor(e,r={}){on(this,r),this.type=e}}class Qn extends an{constructor(e,r={}){super("error",on({error:e},r))}}class Pn{on(e,r){return this._listeners=this._listeners||{},Ft(e,r,this._listeners),{unsubscribe:()=>{this.off(e,r)}}}off(e,r){return qt(e,r,this._listeners),qt(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Ft(e,r,this._oneTimeListeners),this):new Promise((d=>this.once(e,d)))}fire(e,r){typeof e=="string"&&(e=new an(e,r||{}));const d=e.type;if(this.listens(d)){e.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const E of m)E.call(this,e);const b=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const E of b)qt(d,E,this._oneTimeListeners),E.call(this,e);const x=this._eventedParent;x&&(on(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(e))}else e instanceof Qn&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var $e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const ei=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function pr(s,e){const r={};for(const d in s)d!=="ref"&&(r[d]=s[d]);return ei.forEach((d=>{d in e&&(r[d]=e[d])})),r}function un(s,e){if(Array.isArray(s)){if(!Array.isArray(e)||s.length!==e.length)return!1;for(let r=0;r<s.length;r++)if(!un(s[r],e[r]))return!1;return!0}if(typeof s=="object"&&s!==null&&e!==null){if(typeof e!="object"||Object.keys(s).length!==Object.keys(e).length)return!1;for(const r in s)if(!un(s[r],e[r]))return!1;return!0}return s===e}function ti(s,e){s.push(e)}function Ir(s,e,r){ti(r,{command:"addSource",args:[s,e[s]]})}function si(s,e,r){ti(e,{command:"removeSource",args:[s]}),r[s]=!0}function Qi(s,e,r,d){si(s,r,d),Ir(s,e,r)}function pi(s,e,r){let d;for(d in s[r])if(Object.prototype.hasOwnProperty.call(s[r],d)&&d!=="data"&&!un(s[r][d],e[r][d]))return!1;for(d in e[r])if(Object.prototype.hasOwnProperty.call(e[r],d)&&d!=="data"&&!un(s[r][d],e[r][d]))return!1;return!0}function mr(s,e,r,d,m,b){s=s||{},e=e||{};for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&(un(s[x],e[x])||r.push({command:b,args:[d,x,e[x],m]}));for(const x in e)Object.prototype.hasOwnProperty.call(e,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(un(s[x],e[x])||r.push({command:b,args:[d,x,e[x],m]}))}function Su(s){return s.id}function Ac(s,e){return s[e.id]=e,s}class wt{constructor(e,r,d,m){this.message=(e?`${e}: `:"")+d,m&&(this.identifier=m),r!=null&&r.__line__&&(this.line=r.__line__)}}function ca(s,...e){for(const r of e)for(const d in r)s[d]=r[d];return s}class ua extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}class Bs{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[d,m]of r)this.bindings[d]=m}concat(e){return new Bs(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const wi={kind:"null"},Ct={kind:"number"},dn={kind:"string"},vn={kind:"boolean"},Ya={kind:"color"},af={kind:"projectionDefinition"},To={kind:"object"},hn={kind:"value"},Mc={kind:"collator"},So={kind:"formatted"},ll={kind:"padding"},Eo={kind:"colorArray"},Ao={kind:"numberArray"},Ki={kind:"resolvedImage"},Eu={kind:"variableAnchorOffsetCollection"};function ha(s,e){return{kind:"array",itemType:s,N:e}}function zn(s){if(s.kind==="array"){const e=zn(s.itemType);return typeof s.N=="number"?`array<${e}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${e}>`}return s.kind}const cl=[wi,Ct,dn,vn,Ya,af,So,To,ha(hn),ll,Ao,Eo,Ki,Eu];function Au(s,e){if(e.kind==="error")return null;if(s.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Au(s.itemType,e.itemType))&&(typeof s.N!="number"||s.N===e.N))return null}else{if(s.kind===e.kind)return null;if(s.kind==="value"){for(const r of cl)if(!Au(r,e))return null}}return`Expected ${zn(s)} but found ${zn(e)} instead.`}function Mu(s,e){return e.some((r=>r.kind===s.kind))}function Vl(s,e){return e.some((r=>r==="null"?s===null:r==="array"?Array.isArray(s):r==="object"?s&&!Array.isArray(s)&&typeof s=="object":r===typeof s))}function Vs(s,e){return s.kind==="array"&&e.kind==="array"?s.itemType.kind===e.itemType.kind&&typeof s.N=="number":s.kind===e.kind}const kh=.96422,Mo=.82521,ms=4/29,qn=6/29,Sp=3*qn*qn,og=qn*qn*qn,Cc=Math.PI/180,Ep=180/Math.PI;function Oh(s){return(s%=360)<0&&(s+=360),s}function lg([s,e,r,d]){let m,b;const x=Lh((.2225045*(s=ba(s))+.7168786*(e=ba(e))+.0606169*(r=ba(r)))/1);s===e&&e===r?m=b=x:(m=Lh((.4360747*s+.3850649*e+.1430804*r)/kh),b=Lh((.0139322*s+.0971045*e+.7141733*r)/Mo));const E=116*x-16;return[E<0?0:E,500*(m-x),200*(x-b),d]}function ba(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Lh(s){return s>og?Math.pow(s,1/3):s/Sp+ms}function sf([s,e,r,d]){let m=(s+16)/116,b=isNaN(e)?m:m+e/500,x=isNaN(r)?m:m-r/200;return m=1*Ul(m),b=kh*Ul(b),x=Mo*Ul(x),[Nh(3.1338561*b-1.6168667*m-.4906146*x),Nh(-.9787684*b+1.9161415*m+.033454*x),Nh(.0719453*b-.2289914*m+1.4052427*x),d]}function Nh(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Ul(s){return s>qn?s*s*s:Sp*(s-ms)}const cg=Object.hasOwn||function(s,e){return Object.prototype.hasOwnProperty.call(s,e)};function Cu(s,e){return cg(s,e)?s[e]:void 0}function ul(s){return parseInt(s.padEnd(2,s),16)/255}function ug(s,e){return Dc(e?s/100:s,0,1)}function Dc(s,e,r){return Math.min(Math.max(e,s),r)}function of(s){return!s.some(Number.isNaN)}const Ic={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Gl(s,e,r){return s+r*(e-s)}function Du(s,e,r){return s.map(((d,m)=>Gl(d,e[m],r)))}class _n{constructor(e,r,d,m=1,b=!0){this.r=e,this.g=r,this.b=d,this.a=m,b||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[e,r,d,m]))}static parse(e){if(e instanceof _n)return e;if(typeof e!="string")return;const r=(function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Cu(Ic,d);if(m){const[x,E,C]=m;return[x/255,E/255,C/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const x=d.length<6?1:2;let E=1;return[ul(d.slice(E,E+=x)),ul(d.slice(E,E+=x)),ul(d.slice(E,E+=x)),ul(d.slice(E,E+x)||"ff")]}if(d.startsWith("rgb")){const x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[E,C,k,P,j,U,G,W,X,J,le,ve]=x,ce=[P||" ",G||" ",J].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){const de=[k,U,X].join(""),xe=de==="%%%"?100:de===""?255:0;if(xe){const Me=[Dc(+C/xe,0,1),Dc(+j/xe,0,1),Dc(+W/xe,0,1),le?ug(+le,ve):1];if(of(Me))return Me}}return}}const b=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[x,E,C,k,P,j,U,G,W]=b,X=[C||" ",P||" ",U].join("");if(X==="  "||X==="  /"||X===",,"||X===",,,"){const J=[+E,Dc(+k,0,100),Dc(+j,0,100),G?ug(+G,W):1];if(of(J))return(function([le,ve,ce,de]){function xe(Me){const qe=(Me+le/30)%12,ct=ve*Math.min(ce,1-ce);return ce-ct*Math.max(-1,Math.min(qe-3,9-qe,1))}return le=Oh(le),ve/=100,ce/=100,[xe(0),xe(8),xe(4),de]})(J)}}})(e);return r?new _n(...r,!1):void 0}get rgb(){const{r:e,g:r,b:d,a:m}=this,b=m||1/0;return this.overwriteGetter("rgb",[e/b,r/b,d/b,m])}get hcl(){return this.overwriteGetter("hcl",(function(e){const[r,d,m,b]=lg(e),x=Math.sqrt(d*d+m*m);return[Math.round(1e4*x)?Oh(Math.atan2(m,d)*Ep):NaN,x,r,b]})(this.rgb))}get lab(){return this.overwriteGetter("lab",lg(this.rgb))}overwriteGetter(e,r){return Object.defineProperty(this,e,{value:r}),r}toString(){const[e,r,d,m]=this.rgb;return`rgba(${[e,r,d].map((b=>Math.round(255*b))).join(",")},${m})`}static interpolate(e,r,d,m="rgb"){switch(m){case"rgb":{const[b,x,E,C]=Du(e.rgb,r.rgb,d);return new _n(b,x,E,C,!1)}case"hcl":{const[b,x,E,C]=e.hcl,[k,P,j,U]=r.hcl;let G,W;if(isNaN(b)||isNaN(k))isNaN(b)?isNaN(k)?G=NaN:(G=k,E!==1&&E!==0||(W=P)):(G=b,j!==1&&j!==0||(W=x));else{let ce=k-b;k>b&&ce>180?ce-=360:k<b&&b-k>180&&(ce+=360),G=b+d*ce}const[X,J,le,ve]=(function([ce,de,xe,Me]){return ce=isNaN(ce)?0:ce*Cc,sf([xe,Math.cos(ce)*de,Math.sin(ce)*de,Me])})([G,W??Gl(x,P,d),Gl(E,j,d),Gl(C,U,d)]);return new _n(X,J,le,ve,!1)}case"lab":{const[b,x,E,C]=sf(Du(e.lab,r.lab,d));return new _n(b,x,E,C,!1)}}}}_n.black=new _n(0,0,0,1),_n.white=new _n(1,1,1,1),_n.transparent=new _n(0,0,0,0),_n.red=new _n(1,0,0,1);class Us{constructor(e,r,d){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ap=["bottom","center","top"];class Ph{constructor(e,r,d,m,b,x){this.text=e,this.image=r,this.scale=d,this.fontStack=m,this.textColor=b,this.verticalAlign=x}}class Rr{constructor(e){this.sections=e}static fromString(e){return new Rr([new Ph(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((e=>e.text.length!==0||e.image&&e.image.name.length!==0))}static factory(e){return e instanceof Rr?e:Rr.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map((e=>e.text)).join("")}}class gr{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof gr)return e;if(typeof e=="number")return new gr([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const r of e)if(typeof r!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new gr(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,d){return new gr(Du(e.values,r.values,d))}}class Bi{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Bi)return e;if(typeof e=="number")return new Bi([e]);if(Array.isArray(e)){for(const r of e)if(typeof r!="number")return;return new Bi(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,d){return new Bi(Du(e.values,r.values,d))}}class tn{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof tn)return e;if(typeof e=="string"){const d=_n.parse(e);return d?new tn([d]):void 0}if(!Array.isArray(e))return;const r=[];for(const d of e){if(typeof d!="string")return;const m=_n.parse(d);if(!m)return;r.push(m)}return new tn(r)}toString(){return JSON.stringify(this.values)}static interpolate(e,r,d,m="rgb"){const b=[];if(e.values.length!=r.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${r.values.length}), cannot interpolate.`);for(let x=0;x<e.values.length;x++)b.push(_n.interpolate(e.values[x],r.values[x],d,m));return new tn(b)}}class mi extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const gs=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ji{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ji)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let r=0;r<e.length;r+=2){const d=e[r],m=e[r+1];if(typeof d!="string"||!gs.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Ji(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,d){const m=e.values,b=r.values;if(m.length!==b.length)throw new mi(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${r.toString()}`);const x=[];for(let E=0;E<m.length;E+=2){if(m[E]!==b[E])throw new mi(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${m[E]}, to[${E}]: ${b[E]}`);x.push(m[E]);const[C,k]=m[E+1],[P,j]=b[E+1];x.push([Gl(C,P,d),Gl(k,j,d)])}return new Ji(x)}}class xa{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new xa({name:e,available:!1}):null}}class kr{constructor(e,r,d){this.from=e,this.to=r,this.transition=d}static interpolate(e,r,d){return new kr(e,r,d)}static parse(e){return e instanceof kr?e:Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"?new kr(e[0],e[1],e[2]):typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number"?new kr(e.from,e.to,e.transition):typeof e=="string"?new kr(e,e,1):void 0}}function Ha(s,e,r,d){return typeof s=="number"&&s>=0&&s<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[s,e,r,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[s,e,r,d]:[s,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Co(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof kr||s instanceof _n||s instanceof Us||s instanceof Rr||s instanceof gr||s instanceof Bi||s instanceof tn||s instanceof Ji||s instanceof xa)return!0;if(Array.isArray(s)){for(const e of s)if(!Co(e))return!1;return!0}if(typeof s=="object"){for(const e in s)if(!Co(s[e]))return!1;return!0}return!1}function Vi(s){if(s===null)return wi;if(typeof s=="string")return dn;if(typeof s=="boolean")return vn;if(typeof s=="number")return Ct;if(s instanceof _n)return Ya;if(s instanceof kr)return af;if(s instanceof Us)return Mc;if(s instanceof Rr)return So;if(s instanceof gr)return ll;if(s instanceof Bi)return Ao;if(s instanceof tn)return Eo;if(s instanceof Ji)return Eu;if(s instanceof xa)return Ki;if(Array.isArray(s)){const e=s.length;let r;for(const d of s){const m=Vi(d);if(r){if(r===m)continue;r=hn;break}r=m}return ha(r||hn,e)}return To}function $l(s){const e=typeof s;return s===null?"":e==="string"||e==="number"||e==="boolean"?String(s):s instanceof _n||s instanceof kr||s instanceof Rr||s instanceof gr||s instanceof Bi||s instanceof tn||s instanceof Ji||s instanceof xa?s.toString():JSON.stringify(s)}class Wa{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Co(e[1]))return r.error("invalid value");const d=e[1];let m=Vi(d);const b=r.expectedType;return m.kind!=="array"||m.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(m=b),new Wa(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Rc={string:dn,number:Ct,boolean:vn,object:To};class wa{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let d,m=1;const b=e[0];if(b==="array"){let E,C;if(e.length>2){const k=e[1];if(typeof k!="string"||!(k in Rc)||k==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);E=Rc[k],m++}else E=hn;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);C=e[2],m++}d=ha(E,C)}else{if(!Rc[b])throw new Error(`Types doesn't contain name = ${b}`);d=Rc[b]}const x=[];for(;m<e.length;m++){const E=r.parse(e[m],m,hn);if(!E)return null;x.push(E)}return new wa(d,x)}evaluate(e){for(let r=0;r<this.args.length;r++){const d=this.args[r].evaluate(e);if(!Au(this.type,Vi(d)))return d;if(r===this.args.length-1)throw new mi(`Expected value to be of type ${zn(this.type)}, but found ${zn(Vi(d))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Er={"to-boolean":vn,"to-color":Ya,"to-number":Ct,"to-string":dn};class Ta{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const d=e[0];if(!Er[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&e.length!==2)return r.error("Expected one argument.");const m=Er[d],b=[];for(let x=1;x<e.length;x++){const E=r.parse(e[x],x,hn);if(!E)return null;b.push(E)}return new Ta(m,b)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let r,d;for(const m of this.args){if(r=m.evaluate(e),d=null,r instanceof _n)return r;if(typeof r=="string"){const b=e.parseColor(r);if(b)return b}else if(Array.isArray(r)&&(d=r.length<3||r.length>4?`Invalid rgba value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:Ha(r[0],r[1],r[2],r[3]),!d))return new _n(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new mi(d||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const d of this.args){r=d.evaluate(e);const m=gr.parse(r);if(m)return m}throw new mi(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"numberArray":{let r;for(const d of this.args){r=d.evaluate(e);const m=Bi.parse(r);if(m)return m}throw new mi(`Could not parse numberArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"colorArray":{let r;for(const d of this.args){r=d.evaluate(e);const m=tn.parse(r);if(m)return m}throw new mi(`Could not parse colorArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const d of this.args){r=d.evaluate(e);const m=Ji.parse(r);if(m)return m}throw new mi(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const d of this.args){if(r=d.evaluate(e),r===null)return 0;const m=Number(r);if(!isNaN(m))return m}throw new mi(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Rr.fromString($l(this.args[0].evaluate(e)));case"resolvedImage":return xa.fromString($l(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return $l(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const zh=["Unknown","Point","LineString","Polygon"];class kc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?zh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let r=this._parseColorCache.get(e);return r||(r=_n.parse(e),this._parseColorCache.set(e,r)),r}}class Oc{constructor(e,r,d=[],m,b=new Bs,x=[]){this.registry=e,this.path=d,this.key=d.map((E=>`[${E}]`)).join(""),this.scope=b,this.errors=x,this.expectedType=m,this._isConstant=r}parse(e,r,d,m,b={}){return r?this.concat(r,d,m)._parse(e,b):this._parse(e,b)}_parse(e,r){function d(m,b,x){return x==="assert"?new wa(b,[m]):x==="coerce"?new Ta(b,[m]):m}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=e[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[m];if(b){let x=b.parse(e,this);if(!x)return null;if(this.expectedType){const E=this.expectedType,C=x.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||C.kind!=="value"){if(E.kind==="projectionDefinition"&&["string","array"].includes(C.kind)||["color","formatted","resolvedImage"].includes(E.kind)&&["value","string"].includes(C.kind)||["padding","numberArray"].includes(E.kind)&&["value","number","array"].includes(C.kind)||E.kind==="colorArray"&&["value","string","array"].includes(C.kind)||E.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(C.kind))x=d(x,E,r.typeAnnotation||"coerce");else if(this.checkSubtype(E,C))return null}else x=d(x,E,r.typeAnnotation||"assert")}if(!(x instanceof Wa)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const E=new kc;try{x=new Wa(x.type,x.evaluate(E))}catch(C){return this.error(C.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,d){const m=typeof e=="number"?this.path.concat(e):this.path,b=d?this.scope.concat(d):this.scope;return new Oc(this.registry,this._isConstant,m,r||null,b,this.errors)}error(e,...r){const d=`${this.key}${r.map((m=>`[${m}]`)).join("")}`;this.errors.push(new ua(d,e))}checkSubtype(e,r){const d=Au(e,r);return d&&this.error(d),d}}class oi{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const d=[];for(let b=1;b<e.length-1;b+=2){const x=e[b];if(typeof x!="string")return r.error(`Expected string, but found ${typeof x} instead.`,b);if(/[^a-zA-Z0-9_]/.test(x))return r.error("Variable names must contain only alphanumeric characters or '_'.",b);const E=r.parse(e[b+1],b+1);if(!E)return null;d.push([x,E])}const m=r.parse(e[e.length-1],e.length-1,r.expectedType,d);return m?new oi(d,m):null}outputDefined(){return this.result.outputDefined()}}class Zl{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const d=e[1];return r.scope.has(d)?new Zl(d,r.scope.get(d)):r.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Mn{constructor(e,r,d){this.type=e,this.index=r,this.input=d}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const d=r.parse(e[1],1,Ct),m=r.parse(e[2],2,ha(r.expectedType||hn));return d&&m?new Mn(m.type.itemType,d,m):null}evaluate(e){const r=this.index.evaluate(e),d=this.input.evaluate(e);if(r<0)throw new mi(`Array index out of bounds: ${r} < 0.`);if(r>=d.length)throw new mi(`Array index out of bounds: ${r} > ${d.length-1}.`);if(r!==Math.floor(r))throw new mi(`Array index must be an integer, but found ${r} instead.`);return d[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class fn{constructor(e,r){this.type=vn,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const d=r.parse(e[1],1,hn),m=r.parse(e[2],2,hn);return d&&m?Mu(d.type,[vn,dn,Ct,wi,hn])?new fn(d,m):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${zn(d.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),d=this.haystack.evaluate(e);if(!d)return!1;if(!Vl(r,["boolean","string","number","null"]))throw new mi(`Expected first argument to be of type boolean, string, number or null, but found ${zn(Vi(r))} instead.`);if(!Vl(d,["string","array"]))throw new mi(`Expected second argument to be of type array or string, but found ${zn(Vi(d))} instead.`);return d.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Lc{constructor(e,r,d){this.type=Ct,this.needle=e,this.haystack=r,this.fromIndex=d}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const d=r.parse(e[1],1,hn),m=r.parse(e[2],2,hn);if(!d||!m)return null;if(!Mu(d.type,[vn,dn,Ct,wi,hn]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${zn(d.type)} instead`);if(e.length===4){const b=r.parse(e[3],3,Ct);return b?new Lc(d,m,b):null}return new Lc(d,m)}evaluate(e){const r=this.needle.evaluate(e),d=this.haystack.evaluate(e);if(!Vl(r,["boolean","string","number","null"]))throw new mi(`Expected first argument to be of type boolean, string, number or null, but found ${zn(Vi(r))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(e)),Vl(d,["string"])){const b=d.indexOf(r,m);return b===-1?-1:[...d.slice(0,b)].length}if(Vl(d,["array"]))return d.indexOf(r,m);throw new mi(`Expected second argument to be of type array or string, but found ${zn(Vi(d))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Fn{constructor(e,r,d,m,b,x){this.inputType=e,this.type=r,this.input=d,this.cases=m,this.outputs=b,this.otherwise=x}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let d,m;r.expectedType&&r.expectedType.kind!=="value"&&(m=r.expectedType);const b={},x=[];for(let k=2;k<e.length-1;k+=2){let P=e[k];const j=e[k+1];Array.isArray(P)||(P=[P]);const U=r.concat(k);if(P.length===0)return U.error("Expected at least one branch label.");for(const W of P){if(typeof W!="number"&&typeof W!="string")return U.error("Branch labels must be numbers or strings.");if(typeof W=="number"&&Math.abs(W)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof W=="number"&&Math.floor(W)!==W)return U.error("Numeric branch labels must be integer values.");if(d){if(U.checkSubtype(d,Vi(W)))return null}else d=Vi(W);if(b[String(W)]!==void 0)return U.error("Branch labels must be unique.");b[String(W)]=x.length}const G=r.parse(j,k,m);if(!G)return null;m=m||G.type,x.push(G)}const E=r.parse(e[1],1,hn);if(!E)return null;const C=r.parse(e[e.length-1],e.length-1,m);return C?E.type.kind!=="value"&&r.concat(1).checkSubtype(d,E.type)?null:new Fn(d,m,E,b,x,C):null}evaluate(e){const r=this.input.evaluate(e);return(Vi(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class Fh{constructor(e,r,d){this.type=e,this.branches=r,this.otherwise=d}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let d;r.expectedType&&r.expectedType.kind!=="value"&&(d=r.expectedType);const m=[];for(let x=1;x<e.length-1;x+=2){const E=r.parse(e[x],x,vn);if(!E)return null;const C=r.parse(e[x+1],x+1,d);if(!C)return null;m.push([E,C]),d=d||C.type}const b=r.parse(e[e.length-1],e.length-1,d);if(!b)return null;if(!d)throw new Error("Can't infer output type");return new Fh(d,m,b)}evaluate(e){for(const[r,d]of this.branches)if(r.evaluate(e))return d.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,d]of this.branches)e(r),e(d);e(this.otherwise)}outputDefined(){return this.branches.every((([e,r])=>r.outputDefined()))&&this.otherwise.outputDefined()}}class ys{constructor(e,r,d,m){this.type=e,this.input=r,this.beginIndex=d,this.endIndex=m}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const d=r.parse(e[1],1,hn),m=r.parse(e[2],2,Ct);if(!d||!m)return null;if(!Mu(d.type,[ha(hn),dn,hn]))return r.error(`Expected first argument to be of type array or string, but found ${zn(d.type)} instead`);if(e.length===4){const b=r.parse(e[3],3,Ct);return b?new ys(d.type,d,m,b):null}return new ys(d.type,d,m)}evaluate(e){const r=this.input.evaluate(e),d=this.beginIndex.evaluate(e);let m;if(this.endIndex&&(m=this.endIndex.evaluate(e)),Vl(r,["string"]))return[...r].slice(d,m).join("");if(Vl(r,["array"]))return r.slice(d,m);throw new mi(`Expected first argument to be of type array or string, but found ${zn(Vi(r))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function ql(s,e){const r=s.length-1;let d,m,b=0,x=r,E=0;for(;b<=x;)if(E=Math.floor((b+x)/2),d=s[E],m=s[E+1],d<=e){if(E===r||e<m)return E;b=E+1}else{if(!(d>e))throw new mi("Input is not a number.");x=E-1}return 0}class Yl{constructor(e,r,d){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[m,b]of d)this.labels.push(m),this.outputs.push(b)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const d=r.parse(e[1],1,Ct);if(!d)return null;const m=[];let b=null;r.expectedType&&r.expectedType.kind!=="value"&&(b=r.expectedType);for(let x=1;x<e.length;x+=2){const E=x===1?-1/0:e[x],C=e[x+1],k=x,P=x+1;if(typeof E!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(m.length&&m[m.length-1][0]>=E)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const j=r.parse(C,P,b);if(!j)return null;b=b||j.type,m.push([E,j])}return new Yl(b,d,m)}evaluate(e){const r=this.labels,d=this.outputs;if(r.length===1)return d[0].evaluate(e);const m=this.input.evaluate(e);if(m<=r[0])return d[0].evaluate(e);const b=r.length;return m>=r[b-1]?d[b-1].evaluate(e):d[ql(r,m)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function hg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jh,Mp,x0=(function(){if(Mp)return jh;function s(e,r,d,m){this.cx=3*e,this.bx=3*(d-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(m-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=d,this.p2y=m}return Mp=1,jh=s,s.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,r){if(r===void 0&&(r=1e-6),e<0)return 0;if(e>1)return 1;for(var d=e,m=0;m<8;m++){var b=this.sampleCurveX(d)-e;if(Math.abs(b)<r)return d;var x=this.sampleCurveDerivativeX(d);if(Math.abs(x)<1e-6)break;d-=b/x}var E=0,C=1;for(d=e,m=0;m<20&&(b=this.sampleCurveX(d),!(Math.abs(b-e)<r));m++)e>b?E=d:C=d,d=.5*(C-E)+E;return d},solve:function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))}},jh})(),Cp=hg(x0);class Sa{constructor(e,r,d,m,b){this.type=e,this.operator=r,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[x,E]of b)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(e,r,d,m){let b=0;if(e.name==="exponential")b=Do(r,e.base,d,m);else if(e.name==="linear")b=Do(r,1,d,m);else if(e.name==="cubic-bezier"){const x=e.controlPoints;b=new Cp(x[0],x[1],x[2],x[3]).solve(Do(r,1,d,m))}return b}static parse(e,r){let[d,m,b,...x]=e;if(!Array.isArray(m)||m.length===0)return r.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const k=m[1];if(typeof k!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:k}}else{if(m[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const k=m.slice(1);if(k.length!==4||k.some((P=>typeof P!="number"||P<0||P>1)))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:k}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(b=r.parse(b,2,Ct),!b)return null;const E=[];let C=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||r.expectedType==Eo?r.expectedType&&r.expectedType.kind!=="value"&&(C=r.expectedType):C=Ya;for(let k=0;k<x.length;k+=2){const P=x[k],j=x[k+1],U=k+3,G=k+4;if(typeof P!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(E.length&&E[E.length-1][0]>=P)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const W=r.parse(j,G,C);if(!W)return null;C=C||W.type,E.push([P,W])}return Vs(C,Ct)||Vs(C,af)||Vs(C,Ya)||Vs(C,ll)||Vs(C,Ao)||Vs(C,Eo)||Vs(C,Eu)||Vs(C,ha(Ct))?new Sa(C,d,m,b,E):r.error(`Type ${zn(C)} is not interpolatable.`)}evaluate(e){const r=this.labels,d=this.outputs;if(r.length===1)return d[0].evaluate(e);const m=this.input.evaluate(e);if(m<=r[0])return d[0].evaluate(e);const b=r.length;if(m>=r[b-1])return d[b-1].evaluate(e);const x=ql(r,m),E=Sa.interpolationFactor(this.interpolation,m,r[x],r[x+1]),C=d[x].evaluate(e),k=d[x+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Gl(C,k,E);case"color":return _n.interpolate(C,k,E);case"padding":return gr.interpolate(C,k,E);case"colorArray":return tn.interpolate(C,k,E);case"numberArray":return Bi.interpolate(C,k,E);case"variableAnchorOffsetCollection":return Ji.interpolate(C,k,E);case"array":return Du(C,k,E);case"projectionDefinition":return kr.interpolate(C,k,E)}case"interpolate-hcl":switch(this.type.kind){case"color":return _n.interpolate(C,k,E,"hcl");case"colorArray":return tn.interpolate(C,k,E,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return _n.interpolate(C,k,E,"lab");case"colorArray":return tn.interpolate(C,k,E,"lab")}}}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Do(s,e,r,d){const m=d-r,b=s-r;return m===0?0:e===1?b/m:(Math.pow(e,b)-1)/(Math.pow(e,m)-1)}const Ui={color:_n.interpolate,number:Gl,padding:gr.interpolate,numberArray:Bi.interpolate,colorArray:tn.interpolate,variableAnchorOffsetCollection:Ji.interpolate,array:Du};class Nc{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let d=null;const m=r.expectedType;m&&m.kind!=="value"&&(d=m);const b=[];for(const E of e.slice(1)){const C=r.parse(E,1+b.length,d,void 0,{typeAnnotation:"omit"});if(!C)return null;d=d||C.type,b.push(C)}if(!d)throw new Error("No output type");const x=m&&b.some((E=>Au(m,E.type)));return new Nc(x?hn:d,b)}evaluate(e){let r,d=null,m=0;for(const b of this.args)if(m++,d=b.evaluate(e),d&&d instanceof xa&&!d.available&&(r||(r=d.name),d=null,m===this.args.length&&(d=r)),d!==null)break;return d}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function Bh(s,e){return s==="=="||s==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Vh(s,e,r,d){return d.compare(e,r)===0}function er(s,e,r){const d=s!=="=="&&s!=="!=";return class AA{constructor(b,x,E){this.type=vn,this.lhs=b,this.rhs=x,this.collator=E,this.hasUntypedArgument=b.type.kind==="value"||x.type.kind==="value"}static parse(b,x){if(b.length!==3&&b.length!==4)return x.error("Expected two or three arguments.");const E=b[0];let C=x.parse(b[1],1,hn);if(!C)return null;if(!Bh(E,C.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${zn(C.type)}'.`);let k=x.parse(b[2],2,hn);if(!k)return null;if(!Bh(E,k.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${zn(k.type)}'.`);if(C.type.kind!==k.type.kind&&C.type.kind!=="value"&&k.type.kind!=="value")return x.error(`Cannot compare types '${zn(C.type)}' and '${zn(k.type)}'.`);d&&(C.type.kind==="value"&&k.type.kind!=="value"?C=new wa(k.type,[C]):C.type.kind!=="value"&&k.type.kind==="value"&&(k=new wa(C.type,[k])));let P=null;if(b.length===4){if(C.type.kind!=="string"&&k.type.kind!=="string"&&C.type.kind!=="value"&&k.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(P=x.parse(b[3],3,Mc),!P)return null}return new AA(C,k,P)}evaluate(b){const x=this.lhs.evaluate(b),E=this.rhs.evaluate(b);if(d&&this.hasUntypedArgument){const C=Vi(x),k=Vi(E);if(C.kind!==k.kind||C.kind!=="string"&&C.kind!=="number")throw new mi(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${C.kind}, ${k.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const C=Vi(x),k=Vi(E);if(C.kind!=="string"||k.kind!=="string")return e(b,x,E)}return this.collator?r(b,x,E,this.collator.evaluate(b)):e(b,x,E)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}const dg=er("==",(function(s,e,r){return e===r}),Vh),lf=er("!=",(function(s,e,r){return e!==r}),(function(s,e,r,d){return!Vh(0,e,r,d)})),fg=er("<",(function(s,e,r){return e<r}),(function(s,e,r,d){return d.compare(e,r)<0})),w0=er(">",(function(s,e,r){return e>r}),(function(s,e,r,d){return d.compare(e,r)>0})),Iu=er("<=",(function(s,e,r){return e<=r}),(function(s,e,r,d){return d.compare(e,r)<=0})),cf=er(">=",(function(s,e,r){return e>=r}),(function(s,e,r,d){return d.compare(e,r)>=0}));class Ru{constructor(e,r,d){this.type=Mc,this.locale=d,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const d=e[1];if(typeof d!="object"||Array.isArray(d))return r.error("Collator options argument must be an object.");const m=r.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,vn);if(!m)return null;const b=r.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,vn);if(!b)return null;let x=null;return d.locale&&(x=r.parse(d.locale,1,dn),!x)?null:new Ru(m,b,x)}evaluate(e){return new Us(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class Dp{constructor(e,r,d,m,b){this.type=dn,this.number=e,this.locale=r,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=b}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const d=r.parse(e[1],1,Ct);if(!d)return null;const m=e[2];if(typeof m!="object"||Array.isArray(m))return r.error("NumberFormat options argument must be an object.");let b=null;if(m.locale&&(b=r.parse(m.locale,1,dn),!b))return null;let x=null;if(m.currency&&(x=r.parse(m.currency,1,dn),!x))return null;let E=null;if(m["min-fraction-digits"]&&(E=r.parse(m["min-fraction-digits"],1,Ct),!E))return null;let C=null;return m["max-fraction-digits"]&&(C=r.parse(m["max-fraction-digits"],1,Ct),!C)?null:new Dp(d,b,x,E,C)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Uh{constructor(e){this.type=So,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const d=e[1];if(!Array.isArray(d)&&typeof d=="object")return r.error("First argument must be an image or text section.");const m=[];let b=!1;for(let x=1;x<=e.length-1;++x){const E=e[x];if(b&&typeof E=="object"&&!Array.isArray(E)){b=!1;let C=null;if(E["font-scale"]&&(C=r.parse(E["font-scale"],1,Ct),!C))return null;let k=null;if(E["text-font"]&&(k=r.parse(E["text-font"],1,ha(dn)),!k))return null;let P=null;if(E["text-color"]&&(P=r.parse(E["text-color"],1,Ya),!P))return null;let j=null;if(E["vertical-align"]){if(typeof E["vertical-align"]=="string"&&!Ap.includes(E["vertical-align"]))return r.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${E["vertical-align"]}' instead.`);if(j=r.parse(E["vertical-align"],1,dn),!j)return null}const U=m[m.length-1];U.scale=C,U.font=k,U.textColor=P,U.verticalAlign=j}else{const C=r.parse(e[x],1,hn);if(!C)return null;const k=C.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,m.push({content:C,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Uh(m)}evaluate(e){return new Rr(this.sections.map((r=>{const d=r.content.evaluate(e);return Vi(d)===Ki?new Ph("",d,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new Ph($l(d),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)})))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor),r.verticalAlign&&e(r.verticalAlign)}outputDefined(){return!1}}class ku{constructor(e){this.type=Ki,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const d=r.parse(e[1],1,dn);return d?new ku(d):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),d=xa.fromString(r);return d&&e.availableImages&&(d.available=e.availableImages.indexOf(r)>-1),d}eachChild(e){e(this.input)}outputDefined(){return!1}}class Ou{constructor(e){this.type=Ct,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const d=r.parse(e[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${zn(d.type)} instead.`):new Ou(d):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new mi(`Expected value to be of type string or array, but found ${zn(Vi(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const lr=8192;function Lu(s,e){const r=(180+s[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,m=Math.pow(2,e.z);return[Math.round(r*m*lr),Math.round(d*m*lr)]}function Nu(s,e){const r=Math.pow(2,e.z);return[(m=(s[0]/lr+e.x)/r,360*m-180),(d=(s[1]/lr+e.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,m}function Pu(s,e){s[0]=Math.min(s[0],e[0]),s[1]=Math.min(s[1],e[1]),s[2]=Math.max(s[2],e[0]),s[3]=Math.max(s[3],e[1])}function Hl(s,e){return!(s[0]<=e[0]||s[2]>=e[2]||s[1]<=e[1]||s[3]>=e[3])}function pg(s,e,r){const d=s[0]-e[0],m=s[1]-e[1],b=s[0]-r[0],x=s[1]-r[1];return d*x-b*m==0&&d*b<=0&&m*x<=0}function Gh(s,e,r,d){return(m=[d[0]-r[0],d[1]-r[1]])[0]*(b=[e[0]-s[0],e[1]-s[1]])[1]-m[1]*b[0]!=0&&!(!hf(s,e,r,d)||!hf(r,d,s,e));var m,b}function mg(s,e,r){for(const d of r)for(let m=0;m<d.length-1;++m)if(Gh(s,e,d[m],d[m+1]))return!0;return!1}function Gs(s,e,r=!1){let d=!1;for(const E of e)for(let C=0;C<E.length-1;C++){if(pg(s,E[C],E[C+1]))return r;(b=E[C])[1]>(m=s)[1]!=(x=E[C+1])[1]>m[1]&&m[0]<(x[0]-b[0])*(m[1]-b[1])/(x[1]-b[1])+b[0]&&(d=!d)}var m,b,x;return d}function uf(s,e){for(const r of e)if(Gs(s,r))return!0;return!1}function gg(s,e){for(const r of s)if(!Gs(r,e))return!1;for(let r=0;r<s.length-1;++r)if(mg(s[r],s[r+1],e))return!1;return!0}function yg(s,e){for(const r of e)if(gg(s,r))return!0;return!1}function hf(s,e,r,d){const m=d[0]-r[0],b=d[1]-r[1],x=(s[0]-r[0])*b-m*(s[1]-r[1]),E=(e[0]-r[0])*b-m*(e[1]-r[1]);return x>0&&E<0||x<0&&E>0}function df(s,e,r){const d=[];for(let m=0;m<s.length;m++){const b=[];for(let x=0;x<s[m].length;x++){const E=Lu(s[m][x],r);Pu(e,E),b.push(E)}d.push(b)}return d}function Pc(s,e,r){const d=[];for(let m=0;m<s.length;m++){const b=df(s[m],e,r);d.push(b)}return d}function zu(s,e,r,d){if(s[0]<r[0]||s[0]>r[2]){const m=.5*d;let b=s[0]-r[0]>m?-d:r[0]-s[0]>m?d:0;b===0&&(b=s[0]-r[2]>m?-d:r[2]-s[0]>m?d:0),s[0]+=b}Pu(e,s)}function _g(s,e,r,d){const m=Math.pow(2,d.z)*lr,b=[d.x*lr,d.y*lr],x=[];for(const E of s)for(const C of E){const k=[C.x+b[0],C.y+b[1]];zu(k,e,r,m),x.push(k)}return x}function $h(s,e,r,d){const m=Math.pow(2,d.z)*lr,b=[d.x*lr,d.y*lr],x=[];for(const C of s){const k=[];for(const P of C){const j=[P.x+b[0],P.y+b[1]];Pu(e,j),k.push(j)}x.push(k)}if(e[2]-e[0]<=m/2){(E=e)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const C of x)for(const k of C)zu(k,e,r,m)}var E;return x}class Wl{constructor(e,r){this.type=vn,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Co(e[1])){const d=e[1];if(d.type==="FeatureCollection"){const m=[];for(const b of d.features){const{type:x,coordinates:E}=b.geometry;x==="Polygon"&&m.push(E),x==="MultiPolygon"&&m.push(...E)}if(m.length)return new Wl(d,{type:"MultiPolygon",coordinates:m})}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Wl(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Wl(d,d)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(r,d){const m=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(d.type==="Polygon"){const E=df(d.coordinates,b,x),C=_g(r.geometry(),m,b,x);if(!Hl(m,b))return!1;for(const k of C)if(!Gs(k,E))return!1}if(d.type==="MultiPolygon"){const E=Pc(d.coordinates,b,x),C=_g(r.geometry(),m,b,x);if(!Hl(m,b))return!1;for(const k of C)if(!uf(k,E))return!1}return!0})(e,this.geometries);if(e.geometryType()==="LineString")return(function(r,d){const m=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(d.type==="Polygon"){const E=df(d.coordinates,b,x),C=$h(r.geometry(),m,b,x);if(!Hl(m,b))return!1;for(const k of C)if(!gg(k,E))return!1}if(d.type==="MultiPolygon"){const E=Pc(d.coordinates,b,x),C=$h(r.geometry(),m,b,x);if(!Hl(m,b))return!1;for(const k of C)if(!yg(k,E))return!1}return!0})(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ip=class{constructor(s=[],e=(r,d)=>r<d?-1:r>d?1:0){if(this.data=s,this.length=this.data.length,this.compare=e,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:e,compare:r}=this,d=e[s];for(;s>0;){const m=s-1>>1,b=e[m];if(r(d,b)>=0)break;e[s]=b,s=m}e[s]=d}_down(s){const{data:e,compare:r}=this,d=this.length>>1,m=e[s];for(;s<d;){let b=1+(s<<1);const x=b+1;if(x<this.length&&r(e[x],e[b])<0&&(b=x),r(e[b],m)>=0)break;e[s]=e[b],s=b}e[s]=m}};function Zh(s,e,r=0,d=s.length-1,m=Rp){for(;d>r;){if(d-r>600){const C=d-r+1,k=e-r+1,P=Math.log(C),j=.5*Math.exp(2*P/3),U=.5*Math.sqrt(P*j*(C-j)/C)*(k-C/2<0?-1:1);Zh(s,e,Math.max(r,Math.floor(e-k*j/C+U)),Math.min(d,Math.floor(e+(C-k)*j/C+U)),m)}const b=s[e];let x=r,E=d;for(Xl(s,r,e),m(s[d],b)>0&&Xl(s,r,d);x<E;){for(Xl(s,x,E),x++,E--;m(s[x],b)<0;)x++;for(;m(s[E],b)>0;)E--}m(s[r],b)===0?Xl(s,r,E):(E++,Xl(s,E,d)),E<=e&&(r=E+1),e<=E&&(d=E-1)}}function Xl(s,e,r){const d=s[e];s[e]=s[r],s[r]=d}function Rp(s,e){return s<e?-1:s>e?1:0}function qh(s,e){if(s.length<=1)return[s];const r=[];let d,m;for(const b of s){const x=T0(b);x!==0&&(b.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(d&&r.push(d),d=[b]):d.push(b))}if(d&&r.push(d),e>1)for(let b=0;b<r.length;b++)r[b].length<=e||(Zh(r[b],e,1,r[b].length-1,vg),r[b]=r[b].slice(0,e));return r}function vg(s,e){return e.area-s.area}function T0(s){let e=0;for(let r,d,m=0,b=s.length,x=b-1;m<b;x=m++)r=s[m],d=s[x],e+=(d.x-r.x)*(r.y+d.y);return e}const bg=1/298.257223563,Yh=bg*(2-bg),xg=Math.PI/180;class kp{constructor(e){const r=6378.137*xg*1e3,d=Math.cos(e*xg),m=1/(1-Yh*(1-d*d)),b=Math.sqrt(m);this.kx=r*b*d,this.ky=r*b*m*(1-Yh)}distance(e,r){const d=this.wrap(e[0]-r[0])*this.kx,m=(e[1]-r[1])*this.ky;return Math.sqrt(d*d+m*m)}pointOnLine(e,r){let d,m,b,x,E=1/0;for(let C=0;C<e.length-1;C++){let k=e[C][0],P=e[C][1],j=this.wrap(e[C+1][0]-k)*this.kx,U=(e[C+1][1]-P)*this.ky,G=0;j===0&&U===0||(G=(this.wrap(r[0]-k)*this.kx*j+(r[1]-P)*this.ky*U)/(j*j+U*U),G>1?(k=e[C+1][0],P=e[C+1][1]):G>0&&(k+=j/this.kx*G,P+=U/this.ky*G)),j=this.wrap(r[0]-k)*this.kx,U=(r[1]-P)*this.ky;const W=j*j+U*U;W<E&&(E=W,d=k,m=P,b=C,x=G)}return{point:[d,m],index:b,t:Math.max(0,Math.min(1,x))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function Ia(s,e){return e[0]-s[0]}function Ql(s){return s[1]-s[0]+1}function _s(s,e){return s[1]>=s[0]&&s[1]<e}function Hh(s,e){if(s[0]>s[1])return[null,null];const r=Ql(s);if(e){if(r===2)return[s,null];const m=Math.floor(r/2);return[[s[0],s[0]+m],[s[0]+m,s[1]]]}if(r===1)return[s,null];const d=Math.floor(r/2)-1;return[[s[0],s[0]+d],[s[0]+d+1,s[1]]]}function ff(s,e){if(!_s(e,s.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let d=e[0];d<=e[1];++d)Pu(r,s[d]);return r}function pf(s){const e=[1/0,1/0,-1/0,-1/0];for(const r of s)for(const d of r)Pu(e,d);return e}function Wh(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function mf(s,e,r){if(!Wh(s)||!Wh(e))return NaN;let d=0,m=0;return s[2]<e[0]&&(d=e[0]-s[2]),s[0]>e[2]&&(d=s[0]-e[2]),s[1]>e[3]&&(m=s[1]-e[3]),s[3]<e[1]&&(m=e[1]-s[3]),r.distance([0,0],[d,m])}function vs(s,e,r){const d=r.pointOnLine(e,s);return r.distance(s,d.point)}function Xh(s,e,r,d,m){const b=Math.min(vs(s,[r,d],m),vs(e,[r,d],m)),x=Math.min(vs(r,[s,e],m),vs(d,[s,e],m));return Math.min(b,x)}function Qh(s,e,r,d,m){if(!_s(e,s.length)||!_s(d,r.length))return 1/0;let b=1/0;for(let x=e[0];x<e[1];++x){const E=s[x],C=s[x+1];for(let k=d[0];k<d[1];++k){const P=r[k],j=r[k+1];if(Gh(E,C,P,j))return 0;b=Math.min(b,Xh(E,C,P,j,m))}}return b}function gf(s,e,r,d,m){if(!_s(e,s.length)||!_s(d,r.length))return NaN;let b=1/0;for(let x=e[0];x<=e[1];++x)for(let E=d[0];E<=d[1];++E)if(b=Math.min(b,m.distance(s[x],r[E])),b===0)return b;return b}function wg(s,e,r){if(Gs(s,e,!0))return 0;let d=1/0;for(const m of e){const b=m[0],x=m[m.length-1];if(b!==x&&(d=Math.min(d,vs(s,[x,b],r)),d===0))return d;const E=r.pointOnLine(m,s);if(d=Math.min(d,r.distance(s,E.point)),d===0)return d}return d}function zc(s,e,r,d){if(!_s(e,s.length))return NaN;for(let b=e[0];b<=e[1];++b)if(Gs(s[b],r,!0))return 0;let m=1/0;for(let b=e[0];b<e[1];++b){const x=s[b],E=s[b+1];for(const C of r)for(let k=0,P=C.length,j=P-1;k<P;j=k++){const U=C[j],G=C[k];if(Gh(x,E,U,G))return 0;m=Math.min(m,Xh(x,E,U,G,d))}}return m}function Fc(s,e){for(const r of s)for(const d of r)if(Gs(d,e,!0))return!0;return!1}function Op(s,e,r,d=1/0){const m=pf(s),b=pf(e);if(d!==1/0&&mf(m,b,r)>=d)return d;if(Hl(m,b)){if(Fc(s,e))return 0}else if(Fc(e,s))return 0;let x=1/0;for(const E of s)for(let C=0,k=E.length,P=k-1;C<k;P=C++){const j=E[P],U=E[C];for(const G of e)for(let W=0,X=G.length,J=X-1;W<X;J=W++){const le=G[J],ve=G[W];if(Gh(j,U,le,ve))return 0;x=Math.min(x,Xh(j,U,le,ve,r))}}return x}function Yn(s,e,r,d,m,b){if(!b)return;const x=mf(ff(d,b),m,r);x<e&&s.push([x,b,[0,0]])}function Io(s,e,r,d,m,b,x){if(!b||!x)return;const E=mf(ff(d,b),ff(m,x),r);E<e&&s.push([E,b,x])}function Kh(s,e,r,d,m=1/0){let b=Math.min(d.distance(s[0],r[0][0]),m);if(b===0)return b;const x=new Ip([[0,[0,s.length-1],[0,0]]],Ia),E=pf(r);for(;x.length>0;){const C=x.pop();if(C[0]>=b)continue;const k=C[1],P=e?50:100;if(Ql(k)<=P){if(!_s(k,s.length))return NaN;if(e){const j=zc(s,k,r,d);if(isNaN(j)||j===0)return j;b=Math.min(b,j)}else for(let j=k[0];j<=k[1];++j){const U=wg(s[j],r,d);if(b=Math.min(b,U),b===0)return 0}}else{const j=Hh(k,e);Yn(x,b,d,s,E,j[0]),Yn(x,b,d,s,E,j[1])}}return b}function Jh(s,e,r,d,m,b=1/0){let x=Math.min(b,m.distance(s[0],r[0]));if(x===0)return x;const E=new Ip([[0,[0,s.length-1],[0,r.length-1]]],Ia);for(;E.length>0;){const C=E.pop();if(C[0]>=x)continue;const k=C[1],P=C[2],j=e?50:100,U=d?50:100;if(Ql(k)<=j&&Ql(P)<=U){if(!_s(k,s.length)&&_s(P,r.length))return NaN;let G;if(e&&d)G=Qh(s,k,r,P,m),x=Math.min(x,G);else if(e&&!d){const W=s.slice(k[0],k[1]+1);for(let X=P[0];X<=P[1];++X)if(G=vs(r[X],W,m),x=Math.min(x,G),x===0)return x}else if(!e&&d){const W=r.slice(P[0],P[1]+1);for(let X=k[0];X<=k[1];++X)if(G=vs(s[X],W,m),x=Math.min(x,G),x===0)return x}else G=gf(s,k,r,P,m),x=Math.min(x,G)}else{const G=Hh(k,e),W=Hh(P,d);Io(E,x,m,s,r,G[0],W[0]),Io(E,x,m,s,r,G[0],W[1]),Io(E,x,m,s,r,G[1],W[0]),Io(E,x,m,s,r,G[1],W[1])}}return x}function yf(s){return s.type==="MultiPolygon"?s.coordinates.map((e=>({type:"Polygon",coordinates:e}))):s.type==="MultiLineString"?s.coordinates.map((e=>({type:"LineString",coordinates:e}))):s.type==="MultiPoint"?s.coordinates.map((e=>({type:"Point",coordinates:e}))):[s]}class jc{constructor(e,r){this.type=Ct,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Co(e[1])){const d=e[1];if(d.type==="FeatureCollection")return new jc(d,d.features.map((m=>yf(m.geometry))).flat());if(d.type==="Feature")return new jc(d,yf(d.geometry));if("type"in d&&"coordinates"in d)return new jc(d,yf(d))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(r,d){const m=r.geometry(),b=m.flat().map((C=>Nu([C.x,C.y],r.canonical)));if(m.length===0)return NaN;const x=new kp(b[0][1]);let E=1/0;for(const C of d){switch(C.type){case"Point":E=Math.min(E,Jh(b,!1,[C.coordinates],!1,x,E));break;case"LineString":E=Math.min(E,Jh(b,!1,C.coordinates,!0,x,E));break;case"Polygon":E=Math.min(E,Kh(b,!1,C.coordinates,x,E))}if(E===0)return E}return E})(e,this.geometries);if(e.geometryType()==="LineString")return(function(r,d){const m=r.geometry(),b=m.flat().map((C=>Nu([C.x,C.y],r.canonical)));if(m.length===0)return NaN;const x=new kp(b[0][1]);let E=1/0;for(const C of d){switch(C.type){case"Point":E=Math.min(E,Jh(b,!0,[C.coordinates],!1,x,E));break;case"LineString":E=Math.min(E,Jh(b,!0,C.coordinates,!0,x,E));break;case"Polygon":E=Math.min(E,Kh(b,!0,C.coordinates,x,E))}if(E===0)return E}return E})(e,this.geometries);if(e.geometryType()==="Polygon")return(function(r,d){const m=r.geometry();if(m.length===0||m[0].length===0)return NaN;const b=qh(m,0).map((C=>C.map((k=>k.map((P=>Nu([P.x,P.y],r.canonical))))))),x=new kp(b[0][0][0][1]);let E=1/0;for(const C of d)for(const k of b){switch(C.type){case"Point":E=Math.min(E,Kh([C.coordinates],!1,k,x,E));break;case"LineString":E=Math.min(E,Kh(C.coordinates,!0,k,x,E));break;case"Polygon":E=Math.min(E,Op(k,C.coordinates,x,E))}if(E===0)return E}return E})(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class ed{constructor(e){this.type=hn,this.key=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const d=e[1];return d==null?r.error("Global state property must be defined."):typeof d!="string"?r.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new ed(d)}evaluate(e){var r;const d=(r=e.globals)===null||r===void 0?void 0:r.globalState;return d&&Object.keys(d).length!==0?Cu(d,this.key):null}eachChild(){}outputDefined(){return!1}}const Fu={"==":dg,"!=":lf,">":w0,"<":fg,">=":cf,"<=":Iu,array:wa,at:Mn,boolean:wa,case:Fh,coalesce:Nc,collator:Ru,format:Uh,image:ku,in:fn,"index-of":Lc,interpolate:Sa,"interpolate-hcl":Sa,"interpolate-lab":Sa,length:Ou,let:oi,literal:Wa,match:Fn,number:wa,"number-format":Dp,object:wa,slice:ys,step:Yl,string:wa,"to-boolean":Ta,"to-color":Ta,"to-number":Ta,"to-string":Ta,var:Zl,within:Wl,distance:jc,"global-state":ed};class Xa{constructor(e,r,d,m){this.name=e,this.type=r,this._evaluate=d,this.args=m}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,r){const d=e[0],m=Xa.definitions[d];if(!m)return r.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,E=x.filter((([k])=>!Array.isArray(k)||k.length===e.length-1));let C=null;for(const[k,P]of E){C=new Oc(r.registry,Ea,r.path,null,r.scope);const j=[];let U=!1;for(let G=1;G<e.length;G++){const W=e[G],X=Array.isArray(k)?k[G-1]:k.type,J=C.parse(W,1+j.length,X);if(!J){U=!0;break}j.push(J)}if(!U)if(Array.isArray(k)&&k.length!==j.length)C.error(`Expected ${k.length} arguments, but found ${j.length} instead.`);else{for(let G=0;G<j.length;G++){const W=Array.isArray(k)?k[G]:k.type,X=j[G];C.concat(G+1).checkSubtype(W,X.type)}if(C.errors.length===0)return new Xa(d,b,P,j)}}if(E.length===1)r.errors.push(...C.errors);else{const k=(E.length?E:x).map((([j])=>{return U=j,Array.isArray(U)?`(${U.map(zn).join(", ")})`:`(${zn(U.type)}...)`;var U})).join(" | "),P=[];for(let j=1;j<e.length;j++){const U=r.parse(e[j],1+P.length);if(!U)return null;P.push(zn(U.type))}r.error(`Expected arguments of type ${k}, but found (${P.join(", ")}) instead.`)}return null}static register(e,r){Xa.definitions=r;for(const d in r)e[d]=Xa}}function Lp(s,[e,r,d,m]){e=e.evaluate(s),r=r.evaluate(s),d=d.evaluate(s);const b=m?m.evaluate(s):1,x=Ha(e,r,d,b);if(x)throw new mi(x);return new _n(e/255,r/255,d/255,b,!1)}function _f(s,e){return s in e}function Qa(s,e){const r=e[s];return r===void 0?null:r}function Ro(s){return{type:s}}function Ea(s){if(s instanceof Zl)return Ea(s.boundExpression);if(s instanceof Xa&&s.name==="error"||s instanceof Ru||s instanceof Wl||s instanceof jc||s instanceof ed)return!1;const e=s instanceof Ta||s instanceof wa;let r=!0;return s.eachChild((d=>{r=e?r&&Ea(d):r&&d instanceof Wa})),!!r&&hl(s)&&Vc(s,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function hl(s){if(s instanceof Xa&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Wl||s instanceof jc)return!1;let e=!0;return s.eachChild((r=>{e&&!hl(r)&&(e=!1)})),e}function Bc(s){if(s instanceof Xa&&s.name==="feature-state")return!1;let e=!0;return s.eachChild((r=>{e&&!Bc(r)&&(e=!1)})),e}function Vc(s,e){if(s instanceof Xa&&e.indexOf(s.name)>=0)return!1;let r=!0;return s.eachChild((d=>{r&&!Vc(d,e)&&(r=!1)})),r}function td(s){return{result:"success",value:s}}function Kl(s){return{result:"error",value:s}}function bs(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Np(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function ju(s){return!!s.expression&&s.expression.interpolated}function mn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function vf(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&Vi(s)===To}function Ka(s){return s}function bf(s,e){const r=s.stops&&typeof s.stops[0][0]=="object",d=r||!(r||s.property!==void 0),m=s.type||(ju(e)?"exponential":"interval"),b=(function(P){switch(P.type){case"color":return _n.parse;case"padding":return gr.parse;case"numberArray":return Bi.parse;case"colorArray":return tn.parse;default:return null}})(e);if(b&&((s=ca({},s)).stops&&(s.stops=s.stops.map((P=>[P[0],b(P[1])]))),s.default=b(s.default?s.default:e.default)),s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;const E=(function(P){switch(P){case"exponential":return Jl;case"interval":return xf;case"categorical":return Tg;case"identity":return Pp;default:throw new Error(`Unknown function type "${P}"`)}})(m);let C,k;if(m==="categorical"){C=Object.create(null);for(const P of s.stops)C[P[0]]=P[1];k=typeof s.stops[0][0]}if(r){const P={},j=[];for(let W=0;W<s.stops.length;W++){const X=s.stops[W],J=X[0].zoom;P[J]===void 0&&(P[J]={zoom:J,type:s.type,property:s.property,default:s.default,stops:[]},j.push(J)),P[J].stops.push([X[0].value,X[1]])}const U=[];for(const W of j)U.push([P[W].zoom,bf(P[W],e)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:Sa.interpolationFactor.bind(void 0,G),zoomStops:U.map((W=>W[0])),evaluate:({zoom:W},X)=>Jl({stops:U,base:s.base},e,W).evaluate(W,X)}}if(d){const P=m==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Sa.interpolationFactor.bind(void 0,P),zoomStops:s.stops.map((j=>j[0])),evaluate:({zoom:j})=>E(s,e,j,C,k)}}return{kind:"source",evaluate(P,j){const U=j&&j.properties?j.properties[s.property]:void 0;return U===void 0?Ja(s.default,e.default):E(s,e,U,C,k)}}}function Ja(s,e,r){return s!==void 0?s:e!==void 0?e:r!==void 0?r:void 0}function Tg(s,e,r,d,m){return Ja(typeof r===m?d[r]:void 0,s.default,e.default)}function xf(s,e,r){if(mn(r)!=="number")return Ja(s.default,e.default);const d=s.stops.length;if(d===1||r<=s.stops[0][0])return s.stops[0][1];if(r>=s.stops[d-1][0])return s.stops[d-1][1];const m=ql(s.stops.map((b=>b[0])),r);return s.stops[m][1]}function Jl(s,e,r){const d=s.base!==void 0?s.base:1;if(mn(r)!=="number")return Ja(s.default,e.default);const m=s.stops.length;if(m===1||r<=s.stops[0][0])return s.stops[0][1];if(r>=s.stops[m-1][0])return s.stops[m-1][1];const b=ql(s.stops.map((P=>P[0])),r),x=(function(P,j,U,G){const W=G-U,X=P-U;return W===0?0:j===1?X/W:(Math.pow(j,X)-1)/(Math.pow(j,W)-1)})(r,d,s.stops[b][0],s.stops[b+1][0]),E=s.stops[b][1],C=s.stops[b+1][1],k=Ui[e.type]||Ka;return typeof E.evaluate=="function"?{evaluate(...P){const j=E.evaluate.apply(void 0,P),U=C.evaluate.apply(void 0,P);if(j!==void 0&&U!==void 0)return k(j,U,x,s.colorSpace)}}:k(E,C,x,s.colorSpace)}function Pp(s,e,r){switch(e.type){case"color":r=_n.parse(r);break;case"formatted":r=Rr.fromString(r.toString());break;case"resolvedImage":r=xa.fromString(r.toString());break;case"padding":r=gr.parse(r);break;case"colorArray":r=tn.parse(r);break;case"numberArray":r=Bi.parse(r);break;default:mn(r)===e.type||e.type==="enum"&&e.values[r]||(r=void 0)}return Ja(r,s.default,e.default)}Xa.register(Fu,{error:[{kind:"error"},[dn],(s,[e])=>{throw new mi(e.evaluate(s))}],typeof:[dn,[hn],(s,[e])=>zn(Vi(e.evaluate(s)))],"to-rgba":[ha(Ct,4),[Ya],(s,[e])=>{const[r,d,m,b]=e.evaluate(s).rgb;return[255*r,255*d,255*m,b]}],rgb:[Ya,[Ct,Ct,Ct],Lp],rgba:[Ya,[Ct,Ct,Ct,Ct],Lp],has:{type:vn,overloads:[[[dn],(s,[e])=>_f(e.evaluate(s),s.properties())],[[dn,To],(s,[e,r])=>_f(e.evaluate(s),r.evaluate(s))]]},get:{type:hn,overloads:[[[dn],(s,[e])=>Qa(e.evaluate(s),s.properties())],[[dn,To],(s,[e,r])=>Qa(e.evaluate(s),r.evaluate(s))]]},"feature-state":[hn,[dn],(s,[e])=>Qa(e.evaluate(s),s.featureState||{})],properties:[To,[],s=>s.properties()],"geometry-type":[dn,[],s=>s.geometryType()],id:[hn,[],s=>s.id()],zoom:[Ct,[],s=>s.globals.zoom],"heatmap-density":[Ct,[],s=>s.globals.heatmapDensity||0],elevation:[Ct,[],s=>s.globals.elevation||0],"line-progress":[Ct,[],s=>s.globals.lineProgress||0],accumulated:[hn,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Ct,Ro(Ct),(s,e)=>{let r=0;for(const d of e)r+=d.evaluate(s);return r}],"*":[Ct,Ro(Ct),(s,e)=>{let r=1;for(const d of e)r*=d.evaluate(s);return r}],"-":{type:Ct,overloads:[[[Ct,Ct],(s,[e,r])=>e.evaluate(s)-r.evaluate(s)],[[Ct],(s,[e])=>-e.evaluate(s)]]},"/":[Ct,[Ct,Ct],(s,[e,r])=>e.evaluate(s)/r.evaluate(s)],"%":[Ct,[Ct,Ct],(s,[e,r])=>e.evaluate(s)%r.evaluate(s)],ln2:[Ct,[],()=>Math.LN2],pi:[Ct,[],()=>Math.PI],e:[Ct,[],()=>Math.E],"^":[Ct,[Ct,Ct],(s,[e,r])=>Math.pow(e.evaluate(s),r.evaluate(s))],sqrt:[Ct,[Ct],(s,[e])=>Math.sqrt(e.evaluate(s))],log10:[Ct,[Ct],(s,[e])=>Math.log(e.evaluate(s))/Math.LN10],ln:[Ct,[Ct],(s,[e])=>Math.log(e.evaluate(s))],log2:[Ct,[Ct],(s,[e])=>Math.log(e.evaluate(s))/Math.LN2],sin:[Ct,[Ct],(s,[e])=>Math.sin(e.evaluate(s))],cos:[Ct,[Ct],(s,[e])=>Math.cos(e.evaluate(s))],tan:[Ct,[Ct],(s,[e])=>Math.tan(e.evaluate(s))],asin:[Ct,[Ct],(s,[e])=>Math.asin(e.evaluate(s))],acos:[Ct,[Ct],(s,[e])=>Math.acos(e.evaluate(s))],atan:[Ct,[Ct],(s,[e])=>Math.atan(e.evaluate(s))],min:[Ct,Ro(Ct),(s,e)=>Math.min(...e.map((r=>r.evaluate(s))))],max:[Ct,Ro(Ct),(s,e)=>Math.max(...e.map((r=>r.evaluate(s))))],abs:[Ct,[Ct],(s,[e])=>Math.abs(e.evaluate(s))],round:[Ct,[Ct],(s,[e])=>{const r=e.evaluate(s);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ct,[Ct],(s,[e])=>Math.floor(e.evaluate(s))],ceil:[Ct,[Ct],(s,[e])=>Math.ceil(e.evaluate(s))],"filter-==":[vn,[dn,hn],(s,[e,r])=>s.properties()[e.value]===r.value],"filter-id-==":[vn,[hn],(s,[e])=>s.id()===e.value],"filter-type-==":[vn,[dn],(s,[e])=>s.geometryType()===e.value],"filter-<":[vn,[dn,hn],(s,[e,r])=>{const d=s.properties()[e.value],m=r.value;return typeof d==typeof m&&d<m}],"filter-id-<":[vn,[hn],(s,[e])=>{const r=s.id(),d=e.value;return typeof r==typeof d&&r<d}],"filter->":[vn,[dn,hn],(s,[e,r])=>{const d=s.properties()[e.value],m=r.value;return typeof d==typeof m&&d>m}],"filter-id->":[vn,[hn],(s,[e])=>{const r=s.id(),d=e.value;return typeof r==typeof d&&r>d}],"filter-<=":[vn,[dn,hn],(s,[e,r])=>{const d=s.properties()[e.value],m=r.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[vn,[hn],(s,[e])=>{const r=s.id(),d=e.value;return typeof r==typeof d&&r<=d}],"filter->=":[vn,[dn,hn],(s,[e,r])=>{const d=s.properties()[e.value],m=r.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[vn,[hn],(s,[e])=>{const r=s.id(),d=e.value;return typeof r==typeof d&&r>=d}],"filter-has":[vn,[hn],(s,[e])=>e.value in s.properties()],"filter-has-id":[vn,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[vn,[ha(dn)],(s,[e])=>e.value.indexOf(s.geometryType())>=0],"filter-id-in":[vn,[ha(hn)],(s,[e])=>e.value.indexOf(s.id())>=0],"filter-in-small":[vn,[dn,ha(hn)],(s,[e,r])=>r.value.indexOf(s.properties()[e.value])>=0],"filter-in-large":[vn,[dn,ha(hn)],(s,[e,r])=>(function(d,m,b,x){for(;b<=x;){const E=b+x>>1;if(m[E]===d)return!0;m[E]>d?x=E-1:b=E+1}return!1})(s.properties()[e.value],r.value,0,r.value.length-1)],all:{type:vn,overloads:[[[vn,vn],(s,[e,r])=>e.evaluate(s)&&r.evaluate(s)],[Ro(vn),(s,e)=>{for(const r of e)if(!r.evaluate(s))return!1;return!0}]]},any:{type:vn,overloads:[[[vn,vn],(s,[e,r])=>e.evaluate(s)||r.evaluate(s)],[Ro(vn),(s,e)=>{for(const r of e)if(r.evaluate(s))return!0;return!1}]]},"!":[vn,[vn],(s,[e])=>!e.evaluate(s)],"is-supported-script":[vn,[dn],(s,[e])=>{const r=s.globals&&s.globals.isSupportedScript;return!r||r(e.evaluate(s))}],upcase:[dn,[dn],(s,[e])=>e.evaluate(s).toUpperCase()],downcase:[dn,[dn],(s,[e])=>e.evaluate(s).toLowerCase()],concat:[dn,Ro(hn),(s,e)=>e.map((r=>$l(r.evaluate(s)))).join("")],"resolved-locale":[dn,[Mc],(s,[e])=>e.evaluate(s).resolvedLocale()]});class wf{constructor(e,r,d){this.expression=e,this._warningHistory={},this._evaluator=new kc,this._defaultValue=r?(function(m){if(m.type==="color"&&vf(m.default))return new _n(0,0,0,0);switch(m.type){case"color":return _n.parse(m.default)||null;case"padding":return gr.parse(m.default)||null;case"numberArray":return Bi.parse(m.default)||null;case"colorArray":return tn.parse(m.default)||null;case"variableAnchorOffsetCollection":return Ji.parse(m.default)||null;case"projectionDefinition":return kr.parse(m.default)||null;default:return m.default===void 0?null:m.default}})(r):null,this._enumValues=r&&r.type==="enum"?r.values:null,this._globalState=d}evaluateWithoutErrorHandling(e,r,d,m,b,x){return this._globalState&&(e=Vr(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(e,r,d,m,b,x){this._globalState&&(e=Vr(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=x||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new mi(`Expected value to be one of ${Object.keys(this._enumValues).map((C=>JSON.stringify(C))).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function ec(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Fu}function Bu(s,e,r){const d=new Oc(Fu,Ea,[],e?(function(b){const x={color:Ya,string:dn,number:Ct,enum:dn,boolean:vn,formatted:So,padding:ll,numberArray:Ao,colorArray:Eo,projectionDefinition:af,resolvedImage:Ki,variableAnchorOffsetCollection:Eu};return b.type==="array"?ha(x[b.value]||hn,b.length):x[b.type]})(e):void 0),m=d.parse(s,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?td(new wf(m,e,r)):Kl(d.errors)}class Aa{constructor(e,r,d){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Bc(r.expression),this.globalStateRefs=Or(r.expression),this._globalState=d}evaluateWithoutErrorHandling(e,r,d,m,b,x){return this._globalState&&(e=Vr(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,r,d,m,b,x)}evaluate(e,r,d,m,b,x){return this._globalState&&(e=Vr(e,this._globalState)),this._styleExpression.evaluate(e,r,d,m,b,x)}}class tc{constructor(e,r,d,m,b){this.kind=e,this.zoomStops=d,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Bc(r.expression),this.globalStateRefs=Or(r.expression),this.interpolationType=m,this._globalState=b}evaluateWithoutErrorHandling(e,r,d,m,b,x){return this._globalState&&(e=Vr(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,r,d,m,b,x)}evaluate(e,r,d,m,b,x){return this._globalState&&(e=Vr(e,this._globalState)),this._styleExpression.evaluate(e,r,d,m,b,x)}interpolationFactor(e,r,d){return this.interpolationType?Sa.interpolationFactor(this.interpolationType,e,r,d):0}}function nc(s,e,r){const d=Bu(s,e,r);if(d.result==="error")return d;const m=d.value.expression,b=hl(m);if(!b&&!bs(e))return Kl([new ua("","data expressions not supported")]);const x=Vc(m,["zoom"]);if(!x&&!Np(e))return Kl([new ua("","zoom expressions not supported")]);const E=ic(m);return E||x?E instanceof ua?Kl([E]):E instanceof Sa&&!ju(e)?Kl([new ua("",'"interpolate" expressions cannot be used with this property')]):td(E?new tc(b?"camera":"composite",d.value,E.labels,E instanceof Sa?E.interpolation:void 0,r):new Aa(b?"constant":"source",d.value,r)):Kl([new ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Uc{constructor(e,r){this._parameters=e,this._specification=r,ca(this,bf(this._parameters,this._specification))}static deserialize(e){return new Uc(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ic(s){let e=null;if(s instanceof oi)e=ic(s.result);else if(s instanceof Nc){for(const r of s.args)if(e=ic(r),e)break}else(s instanceof Yl||s instanceof Sa)&&s.input instanceof Xa&&s.input.name==="zoom"&&(e=s);return e instanceof ua||s.eachChild((r=>{const d=ic(r);d instanceof ua?e=d:!e&&d?e=new ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&d&&e!==d&&(e=new ua("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Or(s,e=new Set){return s instanceof ed&&e.add(s.key),s.eachChild((r=>{Or(r,e)})),e}function Vr(s,e){const{zoom:r,heatmapDensity:d,elevation:m,lineProgress:b,isSupportedScript:x,accumulated:E}=s??{};return{zoom:r,heatmapDensity:d,elevation:m,lineProgress:b,isSupportedScript:x,accumulated:E,globalState:e}}function ko(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const e of s.slice(1))if(!ko(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const Oo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ra(s,e){if(s==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};ko(s)||(s=Gc(s));const r=Bu(s,Oo,e);if(r.result==="error")throw new Error(r.value.map((d=>`${d.key}: ${d.message}`)).join(", "));return{filter:(d,m,b)=>r.value.evaluate(d,m,{},b),needGeometry:zp(s),getGlobalStateRefs:()=>Or(r.value.expression)}}function dl(s,e){return s<e?-1:s>e?1:0}function zp(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let e=1;e<s.length;e++)if(zp(s[e]))return!0;return!1}function Gc(s){if(!s)return!0;const e=s[0];return s.length<=1?e!=="any":e==="=="?Vu(s[1],s[2],"=="):e==="!="?gi(Vu(s[1],s[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Vu(s[1],s[2],e):e==="any"?(r=s.slice(1),["any"].concat(r.map(Gc))):e==="all"?["all"].concat(s.slice(1).map(Gc)):e==="none"?["all"].concat(s.slice(1).map(Gc).map(gi)):e==="in"?Fp(s[1],s.slice(2)):e==="!in"?gi(Fp(s[1],s.slice(2))):e==="has"?Ur(s[1]):e!=="!has"||gi(Ur(s[1]));var r}function Vu(s,e,r){switch(s){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,s,e]}}function Fp(s,e){if(e.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((r=>typeof r!=typeof e[0]))?["filter-in-large",s,["literal",e.sort(dl)]]:["filter-in-small",s,["literal",e]]}}function Ur(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function gi(s){return["!",s]}function Ln(s){const e=typeof s;if(e==="number"||e==="boolean"||e==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let m="[";for(const b of s)m+=`${Ln(b)},`;return`${m}]`}const r=Object.keys(s).sort();let d="{";for(let m=0;m<r.length;m++)d+=`${JSON.stringify(r[m])}:${Ln(s[r[m]])},`;return`${d}}`}function fl(s){let e="";for(const r of ei)e+=`/${Ln(s[r])}`;return e}function es(s){const e=s.value;return e?[new wt(s.key,e,"constants have been deprecated as of v8")]:[]}function Yi(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function ka(s){if(Array.isArray(s))return s.map(ka);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const e={};for(const r in s)e[r]=ka(s[r]);return e}return Yi(s)}function Oa(s){const e=s.key,r=s.value,d=s.valueSpec||{},m=s.objectElementValidators||{},b=s.style,x=s.styleSpec,E=s.validateSpec;let C=[];const k=mn(r);if(k!=="object")return[new wt(e,r,`object expected, ${k} found`)];for(const P in r){const j=P.split(".")[0],U=Cu(d,j)||d["*"];let G;if(Cu(m,j))G=m[j];else if(Cu(d,j)){if(r[P]===void 0)continue;G=E}else if(m["*"])G=m["*"];else{if(!d["*"]){C.push(new wt(e,r[P],`unknown property "${P}"`));continue}G=E}C=C.concat(G({key:(e&&`${e}.`)+P,value:r[P],valueSpec:U,style:b,styleSpec:x,object:r,objectKey:P,validateSpec:E},r))}for(const P in d)m[P]||d[P].required&&d[P].default===void 0&&r[P]===void 0&&C.push(new wt(e,r,`missing required property "${P}"`));return C}function nd(s){const e=s.value,r=s.valueSpec,d=s.style,m=s.styleSpec,b=s.key,x=s.arrayElementValidator||s.validateSpec;if(mn(e)!=="array")return[new wt(b,e,`array expected, ${mn(e)} found`)];if(r.length&&e.length!==r.length)return[new wt(b,e,`array length ${r.length} expected, length ${e.length} found`)];let E={type:r.value,values:r.values};m.$version<7&&(E.function=r.function),mn(r.value)==="object"&&(E=r.value);let C=[];for(let k=0;k<e.length;k++)C=C.concat(x({array:e,arrayIndex:k,value:e[k],valueSpec:E,validateSpec:s.validateSpec,style:d,styleSpec:m,key:`${b}[${k}]`}));return C}function Lo(s){const e=s.key,r=s.value,d=s.valueSpec;let m=mn(r);return m==="number"&&r!=r&&(m="NaN"),m!=="number"?[new wt(e,r,`number expected, ${m} found`)]:"minimum"in d&&r<d.minimum?[new wt(e,r,`${r} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&r>d.maximum?[new wt(e,r,`${r} is greater than the maximum value ${d.maximum}`)]:[]}function No(s){const e=s.valueSpec,r=Yi(s.value.type);let d,m,b,x={};const E=r!=="categorical"&&s.value.property===void 0,C=!E,k=mn(s.value.stops)==="array"&&mn(s.value.stops[0])==="array"&&mn(s.value.stops[0][0])==="object",P=Oa({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(G){if(r==="identity")return[new wt(G.key,G.value,'identity function may not have a "stops" property')];let W=[];const X=G.value;return W=W.concat(nd({key:G.key,value:X,valueSpec:G.valueSpec,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:j})),mn(X)==="array"&&X.length===0&&W.push(new wt(G.key,X,"array must have at least one stop")),W},default:function(G){return G.validateSpec({key:G.key,value:G.value,valueSpec:e,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec})}}});return r==="identity"&&E&&P.push(new wt(s.key,s.value,'missing required property "property"')),r==="identity"||s.value.stops||P.push(new wt(s.key,s.value,'missing required property "stops"')),r==="exponential"&&s.valueSpec.expression&&!ju(s.valueSpec)&&P.push(new wt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(C&&!bs(s.valueSpec)?P.push(new wt(s.key,s.value,"property functions not supported")):E&&!Np(s.valueSpec)&&P.push(new wt(s.key,s.value,"zoom functions not supported"))),r!=="categorical"&&!k||s.value.property!==void 0||P.push(new wt(s.key,s.value,'"property" property is required')),P;function j(G){let W=[];const X=G.value,J=G.key;if(mn(X)!=="array")return[new wt(J,X,`array expected, ${mn(X)} found`)];if(X.length!==2)return[new wt(J,X,`array length 2 expected, length ${X.length} found`)];if(k){if(mn(X[0])!=="object")return[new wt(J,X,`object expected, ${mn(X[0])} found`)];if(X[0].zoom===void 0)return[new wt(J,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new wt(J,X,"object stop key must have value")];if(b&&b>Yi(X[0].zoom))return[new wt(J,X[0].zoom,"stop zoom values must appear in ascending order")];Yi(X[0].zoom)!==b&&(b=Yi(X[0].zoom),m=void 0,x={}),W=W.concat(Oa({key:`${J}[0]`,value:X[0],valueSpec:{zoom:{}},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:Lo,value:U}}))}else W=W.concat(U({key:`${J}[0]`,value:X[0],validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec},X));return ec(ka(X[1]))?W.concat([new wt(`${J}[1]`,X[1],"expressions are not allowed in function stops.")]):W.concat(G.validateSpec({key:`${J}[1]`,value:X[1],valueSpec:e,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec}))}function U(G,W){const X=mn(G.value),J=Yi(G.value),le=G.value!==null?G.value:W;if(d){if(X!==d)return[new wt(G.key,le,`${X} stop domain type must match previous stop domain type ${d}`)]}else d=X;if(X!=="number"&&X!=="string"&&X!=="boolean")return[new wt(G.key,le,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&r!=="categorical"){let ve=`number expected, ${X} found`;return bs(e)&&r===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wt(G.key,le,ve)]}return r!=="categorical"||X!=="number"||isFinite(J)&&Math.floor(J)===J?r!=="categorical"&&X==="number"&&m!==void 0&&J<m?[new wt(G.key,le,"stop domain values must appear in ascending order")]:(m=J,r==="categorical"&&J in x?[new wt(G.key,le,"stop domain values must be unique")]:(x[J]=!0,[])):[new wt(G.key,le,`integer expected, found ${J}`)]}}function Po(s){const e=(s.expressionContext==="property"?nc:Bu)(ka(s.value),s.valueSpec);if(e.result==="error")return e.value.map((d=>new wt(`${s.key}${d.key}`,s.value,d.message)));const r=e.value.expression||e.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!r.outputDefined())return[new wt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Bc(r))return[new wt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!Bc(r))return[new wt(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Vc(r,["zoom","feature-state"]))return[new wt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!hl(r))return[new wt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pl(s){const e=s.key,r=s.value,d=mn(r);return d!=="string"?[new wt(e,r,`color expected, ${d} found`)]:_n.parse(String(r))?[]:[new wt(e,r,`color expected, "${r}" found`)]}function ml(s){const e=s.key,r=s.value,d=s.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(Yi(r))===-1&&m.push(new wt(e,r,`expected one of [${d.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(d.values).indexOf(Yi(r))===-1&&m.push(new wt(e,r,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(r)} found`)),m}function xs(s){return ko(ka(s.value))?Po(ca({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zo(s)}function zo(s){const e=s.value,r=s.key;if(mn(e)!=="array")return[new wt(r,e,`array expected, ${mn(e)} found`)];const d=s.styleSpec;let m,b=[];if(e.length<1)return[new wt(r,e,"filter array must have at least 1 element")];switch(b=b.concat(ml({key:`${r}[0]`,value:e[0],valueSpec:d.filter_operator,style:s.style,styleSpec:s.styleSpec})),Yi(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Yi(e[1])==="$type"&&b.push(new wt(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&b.push(new wt(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(m=mn(e[1]),m!=="string"&&b.push(new wt(`${r}[1]`,e[1],`string expected, ${m} found`)));for(let x=2;x<e.length;x++)m=mn(e[x]),Yi(e[1])==="$type"?b=b.concat(ml({key:`${r}[${x}]`,value:e[x],valueSpec:d.geometry_type,style:s.style,styleSpec:s.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&b.push(new wt(`${r}[${x}]`,e[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<e.length;x++)b=b.concat(zo({key:`${r}[${x}]`,value:e[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":m=mn(e[1]),e.length!==2?b.push(new wt(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):m!=="string"&&b.push(new wt(`${r}[1]`,e[1],`string expected, ${m} found`))}return b}function gl(s,e){const r=s.key,d=s.validateSpec,m=s.style,b=s.styleSpec,x=s.value,E=s.objectKey,C=b[`${e}_${s.layerType}`];if(!C)return[];const k=E.match(/^(.*)-transition$/);if(e==="paint"&&k&&C[k[1]]&&C[k[1]].transition)return d({key:r,value:x,valueSpec:b.transition,style:m,styleSpec:b});const P=s.valueSpec||C[E];if(!P)return[new wt(r,x,`unknown property "${E}"`)];let j;if(mn(x)==="string"&&bs(P)&&!P.tokens&&(j=/^{([^}]+)}$/.exec(x)))return[new wt(r,x,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const U=[];return s.layerType==="symbol"&&E==="text-font"&&vf(ka(x))&&Yi(x.type)==="identity"&&U.push(new wt(r,x,'"text-font" does not support identity functions')),U.concat(d({key:s.key,value:x,valueSpec:P,style:m,styleSpec:b,expressionContext:"property",propertyType:e,propertyKey:E}))}function Fo(s){return gl(s,"paint")}function Tf(s){return gl(s,"layout")}function Sf(s){let e=[];const r=s.value,d=s.key,m=s.style,b=s.styleSpec;if(mn(r)!=="object")return[new wt(d,r,`object expected, ${mn(r)} found`)];r.type||r.ref||e.push(new wt(d,r,'either "type" or "ref" is required'));let x=Yi(r.type);const E=Yi(r.ref);if(r.id){const C=Yi(r.id);for(let k=0;k<s.arrayIndex;k++){const P=m.layers[k];Yi(P.id)===C&&e.push(new wt(d,r.id,`duplicate layer id "${r.id}", previously used at line ${P.id.__line__}`))}}if("ref"in r){let C;["type","source","source-layer","filter","layout"].forEach((k=>{k in r&&e.push(new wt(d,r[k],`"${k}" is prohibited for ref layers`))})),m.layers.forEach((k=>{Yi(k.id)===E&&(C=k)})),C?C.ref?e.push(new wt(d,r.ref,"ref cannot reference another ref layer")):x=Yi(C.type):e.push(new wt(d,r.ref,`ref layer "${E}" not found`))}else if(x!=="background")if(r.source){const C=m.sources&&m.sources[r.source],k=C&&Yi(C.type);C?k==="vector"&&x==="raster"?e.push(new wt(d,r.source,`layer "${r.id}" requires a raster source`)):k!=="raster-dem"&&x==="hillshade"||k!=="raster-dem"&&x==="color-relief"?e.push(new wt(d,r.source,`layer "${r.id}" requires a raster-dem source`)):k==="raster"&&x!=="raster"?e.push(new wt(d,r.source,`layer "${r.id}" requires a vector source`)):k!=="vector"||r["source-layer"]?k==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?e.push(new wt(d,r.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!r.paint||!r.paint["line-gradient"]||k==="geojson"&&C.lineMetrics||e.push(new wt(d,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new wt(d,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new wt(d,r.source,`source "${r.source}" not found`))}else e.push(new wt(d,r,'missing required property "source"'));return e=e.concat(Oa({key:d,value:r,valueSpec:b.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${d}.type`,value:r.type,valueSpec:b.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:r,objectKey:"type"}),filter:xs,layout:C=>Oa({layer:r,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":k=>Tf(ca({layerType:x},k))}}),paint:C=>Oa({layer:r,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":k=>Fo(ca({layerType:x},k))}})}})),e}function ts(s){const e=s.value,r=s.key,d=mn(e);return d!=="string"?[new wt(r,e,`string expected, ${d} found`)]:[]}const Uu={promoteId:function({key:s,value:e}){if(mn(e)==="string")return ts({key:s,value:e});{const r=[];for(const d in e)r.push(...ts({key:`${s}.${d}`,value:e[d]}));return r}}};function yl(s){const e=s.value,r=s.key,d=s.styleSpec,m=s.style,b=s.validateSpec;if(!e.type)return[new wt(r,e,'"type" is required')];const x=Yi(e.type);let E;switch(x){case"vector":case"raster":return E=Oa({key:r,value:e,valueSpec:d[`source_${x.replace("-","_")}`],style:s.style,styleSpec:d,objectElementValidators:Uu,validateSpec:b}),E;case"raster-dem":return E=(function(C){var k;const P=(k=C.sourceName)!==null&&k!==void 0?k:"",j=C.value,U=C.styleSpec,G=U.source_raster_dem,W=C.style;let X=[];const J=mn(j);if(j===void 0)return X;if(J!=="object")return X.push(new wt("source_raster_dem",j,`object expected, ${J} found`)),X;const le=Yi(j.encoding)==="custom",ve=["redFactor","greenFactor","blueFactor","baseShift"],ce=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const de in j)!le&&ve.includes(de)?X.push(new wt(de,j[de],`In "${P}": "${de}" is only valid when "encoding" is set to "custom". ${ce} encoding found`)):G[de]?X=X.concat(C.validateSpec({key:de,value:j[de],valueSpec:G[de],validateSpec:C.validateSpec,style:W,styleSpec:U})):X.push(new wt(de,j[de],`unknown property "${de}"`));return X})({sourceName:r,value:e,style:s.style,styleSpec:d,validateSpec:b}),E;case"geojson":if(E=Oa({key:r,value:e,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:b,objectElementValidators:Uu}),e.cluster)for(const C in e.clusterProperties){const[k,P]=e.clusterProperties[C],j=typeof k=="string"?[k,["accumulated"],["get",C]]:k;E.push(...Po({key:`${r}.${C}.map`,value:P,expressionContext:"cluster-map"})),E.push(...Po({key:`${r}.${C}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return E;case"video":return Oa({key:r,value:e,valueSpec:d.source_video,style:m,validateSpec:b,styleSpec:d});case"image":return Oa({key:r,value:e,valueSpec:d.source_image,style:m,validateSpec:b,styleSpec:d});case"canvas":return[new wt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ml({key:`${r}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function yr(s){const e=s.value,r=s.styleSpec,d=r.light,m=s.style;let b=[];const x=mn(e);if(e===void 0)return b;if(x!=="object")return b=b.concat([new wt("light",e,`object expected, ${x} found`)]),b;for(const E in e){const C=E.match(/^(.*)-transition$/);b=b.concat(C&&d[C[1]]&&d[C[1]].transition?s.validateSpec({key:E,value:e[E],valueSpec:r.transition,validateSpec:s.validateSpec,style:m,styleSpec:r}):d[E]?s.validateSpec({key:E,value:e[E],valueSpec:d[E],validateSpec:s.validateSpec,style:m,styleSpec:r}):[new wt(E,e[E],`unknown property "${E}"`)])}return b}function id(s){const e=s.value,r=s.styleSpec,d=r.sky,m=s.style,b=mn(e);if(e===void 0)return[];if(b!=="object")return[new wt("sky",e,`object expected, ${b} found`)];let x=[];for(const E in e)x=x.concat(d[E]?s.validateSpec({key:E,value:e[E],valueSpec:d[E],style:m,styleSpec:r}):[new wt(E,e[E],`unknown property "${E}"`)]);return x}function Ef(s){const e=s.value,r=s.styleSpec,d=r.terrain,m=s.style;let b=[];const x=mn(e);if(e===void 0)return b;if(x!=="object")return b=b.concat([new wt("terrain",e,`object expected, ${x} found`)]),b;for(const E in e)b=b.concat(d[E]?s.validateSpec({key:E,value:e[E],valueSpec:d[E],validateSpec:s.validateSpec,style:m,styleSpec:r}):[new wt(E,e[E],`unknown property "${E}"`)]);return b}function jp(s){let e=[];const r=s.value,d=s.key;if(Array.isArray(r)){const m=[],b=[];for(const x in r)r[x].id&&m.includes(r[x].id)&&e.push(new wt(d,r,`all the sprites' ids must be unique, but ${r[x].id} is duplicated`)),m.push(r[x].id),r[x].url&&b.includes(r[x].url)&&e.push(new wt(d,r,`all the sprites' URLs must be unique, but ${r[x].url} is duplicated`)),b.push(r[x].url),e=e.concat(Oa({key:`${d}[${x}]`,value:r[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return e}return ts({key:d,value:r})}function Sg(s){return!!s&&s.constructor===Object}function Bp(s){return Sg(s.value)?[]:[new wt(s.key,s.value,`object expected, ${mn(s.value)} found`)]}const cr={"*":()=>[],array:nd,boolean:function(s){const e=s.value,r=s.key,d=mn(e);return d!=="boolean"?[new wt(r,e,`boolean expected, ${d} found`)]:[]},number:Lo,color:pl,constants:es,enum:ml,filter:xs,function:No,layer:Sf,object:Oa,source:yl,light:yr,sky:id,terrain:Ef,projection:function(s){const e=s.value,r=s.styleSpec,d=r.projection,m=s.style,b=mn(e);if(e===void 0)return[];if(b!=="object")return[new wt("projection",e,`object expected, ${b} found`)];let x=[];for(const E in e)x=x.concat(d[E]?s.validateSpec({key:E,value:e[E],valueSpec:d[E],style:m,styleSpec:r}):[new wt(E,e[E],`unknown property "${E}"`)]);return x},projectionDefinition:function(s){const e=s.key;let r=s.value;r=r instanceof String?r.valueOf():r;const d=mn(r);return d!=="array"||(function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"})(r)||(function(m){return!!["interpolate","step","literal"].includes(m[0])})(r)?["array","string"].includes(d)?[]:[new wt(e,r,`projection expected, invalid type "${d}" found`)]:[new wt(e,r,`projection expected, invalid array ${JSON.stringify(r)} found`)]},string:ts,formatted:function(s){return ts(s).length===0?[]:Po(s)},resolvedImage:function(s){return ts(s).length===0?[]:Po(s)},padding:function(s){const e=s.key,r=s.value;if(mn(r)==="array"){if(r.length<1||r.length>4)return[new wt(e,r,`padding requires 1 to 4 values; ${r.length} values found`)];const d={type:"number"};let m=[];for(let b=0;b<r.length;b++)m=m.concat(s.validateSpec({key:`${e}[${b}]`,value:r[b],validateSpec:s.validateSpec,valueSpec:d}));return m}return Lo({key:e,value:r,valueSpec:{}})},numberArray:function(s){const e=s.key,r=s.value;if(mn(r)==="array"){const d={type:"number"};if(r.length<1)return[new wt(e,r,"array length at least 1 expected, length 0 found")];let m=[];for(let b=0;b<r.length;b++)m=m.concat(s.validateSpec({key:`${e}[${b}]`,value:r[b],validateSpec:s.validateSpec,valueSpec:d}));return m}return Lo({key:e,value:r,valueSpec:{}})},colorArray:function(s){const e=s.key,r=s.value;if(mn(r)==="array"){if(r.length<1)return[new wt(e,r,"array length at least 1 expected, length 0 found")];let d=[];for(let m=0;m<r.length;m++)d=d.concat(pl({key:`${e}[${m}]`,value:r[m]}));return d}return pl({key:e,value:r})},variableAnchorOffsetCollection:function(s){const e=s.key,r=s.value,d=mn(r),m=s.styleSpec;if(d!=="array"||r.length<1||r.length%2!=0)return[new wt(e,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let x=0;x<r.length;x+=2)b=b.concat(ml({key:`${e}[${x}]`,value:r[x],valueSpec:m.layout_symbol["text-anchor"]})),b=b.concat(nd({key:`${e}[${x+1}]`,value:r[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:m}));return b},sprite:jp,state:Bp,fontFaces:function(s){const e=s.key,r=s.value,d=s.validateSpec,m=s.styleSpec,b=s.style;if(!Sg(r))return[new wt(e,r,`object expected, ${mn(r)} found`)];const x=[];for(const E in r){const C=r[E],k=mn(C);if(k==="string")x.push(...ts({key:`${e}.${E}`,value:C}));else if(k==="array"){const P={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[j,U]of C.entries())x.push(...Oa({key:`${e}.${E}[${j}]`,value:U,valueSpec:P,styleSpec:m,style:b,validateSpec:d}))}else x.push(new wt(`${e}.${E}`,C,`string or array expected, ${k} found`))}return x}};function jo(s){const e=s.value,r=s.valueSpec,d=s.styleSpec;return s.validateSpec=jo,r.expression&&vf(Yi(e))?No(s):r.expression&&ec(ka(e))?Po(s):r.type&&cr[r.type]?cr[r.type](s):Oa(ca({},s,{valueSpec:r.type?d[r.type]:r}))}function Gu(s){const e=s.value,r=s.key,d=ts(s);return d.length||(e.indexOf("{fontstack}")===-1&&d.push(new wt(r,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&d.push(new wt(r,e,'"glyphs" url must include a "{range}" token'))),d}function da(s,e=$e){let r=[];return r=r.concat(jo({key:"",value:s,valueSpec:e.$root,styleSpec:e,style:s,validateSpec:jo,objectElementValidators:{glyphs:Gu,"*":()=>[]}})),s.constants&&(r=r.concat(es({key:"constants",value:s.constants}))),$c(r)}function ns(s){return function(e){return s(Object.assign({},e,{validateSpec:jo}))}}function $c(s){return[].concat(s).sort(((e,r)=>e.line-r.line))}function fa(s){return function(...e){return $c(s.apply(this,e))}}da.source=fa(ns(yl)),da.sprite=fa(ns(jp)),da.glyphs=fa(ns(Gu)),da.light=fa(ns(yr)),da.sky=fa(ns(id)),da.terrain=fa(ns(Ef)),da.state=fa(ns(Bp)),da.layer=fa(ns(Sf)),da.filter=fa(ns(xs)),da.paintProperty=fa(ns(Fo)),da.layoutProperty=fa(ns(Tf));const S0={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class $u{constructor(e,r){this._globalState=r,this.setValue(e)}evaluate(){var e;return(e=this._literalValue)!==null&&e!==void 0?e:this._compiledValue.evaluate({})}setValue(e){if(e==null||e==="visible"||e==="none")return this._literalValue=e==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const r=Bu(e,S0,this._globalState);if(r.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(r.value.map((d=>`${d.key}: ${d.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=r.value,this._globalStateRefs=Or(r.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const rd=$e,Lr=da,$s=Lr.light,Af=Lr.sky,Mf=Lr.paintProperty,Eg=Lr.layoutProperty;function Zs(s,e){let r=!1;if(e&&e.length)for(const d of e)s.fire(new Qn(new Error(d.message))),r=!0;return r}class rc{constructor(e,r,d){const m=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const x=new Int32Array(this.arrayBuffer);e=x[0],this.d=(r=x[1])+2*(d=x[2]);for(let C=0;C<this.d*this.d;C++){const k=x[3+C],P=x[3+C+1];m.push(k===P?null:x.subarray(k,P))}const E=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],E),this.bboxes=x.subarray(E),this.insert=this._insertReadonly}else{this.d=r+2*d;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=e,this.padding=d,this.scale=r/e,this.uid=0;const b=d/r*e;this.min=-b,this.max=e+b}insert(e,r,d,m,b){this._forEachCell(r,d,m,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(r),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,r,d,m,b,x){this.cells[b].push(x)}query(e,r,d,m,b){const x=this.min,E=this.max;if(e<=x&&r<=x&&E<=d&&E<=m&&!b)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(e,r,d,m,this._queryCell,C,{},b),C}}_queryCell(e,r,d,m,b,x,E,C){const k=this.cells[b];if(k!==null){const P=this.keys,j=this.bboxes;for(let U=0;U<k.length;U++){const G=k[U];if(E[G]===void 0){const W=4*G;(C?C(j[W+0],j[W+1],j[W+2],j[W+3]):e<=j[W+2]&&r<=j[W+3]&&d>=j[W+0]&&m>=j[W+1])?(E[G]=!0,x.push(P[G])):E[G]=!1}}}}_forEachCell(e,r,d,m,b,x,E,C){const k=this._convertToCellCoord(e),P=this._convertToCellCoord(r),j=this._convertToCellCoord(d),U=this._convertToCellCoord(m);for(let G=k;G<=j;G++)for(let W=P;W<=U;W++){const X=this.d*W+G;if((!C||C(this._convertFromCellCoord(G),this._convertFromCellCoord(W),this._convertFromCellCoord(G+1),this._convertFromCellCoord(W+1)))&&b.call(this,e,r,d,m,X,x,E,C))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,r=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const m=new Int32Array(r+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let b=r;for(let x=0;x<e.length;x++){const E=e[x];m[3+x]=b,m.set(E,b),b+=E.length}return m[3+e.length]=b,m.set(this.keys,b),b+=this.keys.length,m[3+e.length+1]=b,m.set(this.bboxes,b),b+=this.bboxes.length,m.buffer}static serialize(e,r){const d=e.toArrayBuffer();return r&&r.push(d),{buffer:d}}static deserialize(e){return new rc(e.buffer)}}const La={};function Pt(s,e,r={}){if(La[s])throw new Error(`${s} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:s,writeable:!1}),La[s]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}Pt("Object",Object),Pt("Set",Set),Pt("TransferableGridIndex",rc),Pt("Color",_n),Pt("Error",Error),Pt("AJAXError",Pe),Pt("ResolvedImage",xa),Pt("StylePropertyFunction",Uc),Pt("StyleExpression",wf,{omit:["_evaluator"]}),Pt("ZoomDependentExpression",tc),Pt("ZoomConstantExpression",Aa),Pt("CompoundExpression",Xa,{omit:["_evaluate"]});for(const s in Fu)Fu[s]._classRegistryKey||Pt(`Expression_${s}`,Fu[s]);function ad(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Cf(s){return s.$name||s.constructor._classRegistryKey}function ws(s){return!(function(e){if(e===null||typeof e!="object")return!1;const r=Cf(e);return!(!r||r==="Object")})(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||ad(s)||Za(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function qs(s,e){if(ws(s))return(ad(s)||Za(s))&&e&&e.push(s),ArrayBuffer.isView(s)&&e&&e.push(s.buffer),s instanceof ImageData&&e&&e.push(s.data.buffer),s;if(Array.isArray(s)){const b=[];for(const x of s)b.push(qs(x,e));return b}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const r=Cf(s);if(!r)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!La[r])throw new Error(`${r} is not registered.`);const{klass:d}=La[r],m=d.serialize?d.serialize(s,e):{};if(d.serialize){if(e&&m===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const b in s){if(!s.hasOwnProperty(b)||La[r].omit.indexOf(b)>=0)continue;const x=s[b];m[b]=La[r].shallow.indexOf(b)>=0?x:qs(x,e)}s instanceof Error&&(m.message=s.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(m.$name=r),m}function Zu(s){if(ws(s))return s;if(Array.isArray(s))return s.map(Zu);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const e=Cf(s)||"Object";if(!La[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:r}=La[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(s);const d=Object.create(r.prototype);for(const m of Object.keys(s)){if(m==="$name")continue;const b=s[m];d[m]=La[e].shallow.indexOf(m)>=0?b:Zu(b)}return d}class Df{constructor(){this.first=!0}update(e,r){const d=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=r),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=d,!0))}}function Bo(s){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function Zc(s){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function sd(s){return/\s/u.test(String.fromCodePoint(s))}function Vo(s){for(const e of s)if(Zc(e.codePointAt(0)))return!0;return!1}function If(s){for(const e of s)if(!Vp(e.codePointAt(0)))return!1;return!0}function od(s){const e=s.map((r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}})).filter((r=>r));return new RegExp(e.join("|"),"u")}const Uo=od(["Arab","Dupl","Mong","Ougr","Syrc"]);function Vp(s){return!Uo.test(String.fromCodePoint(s))}function Go(s){return!(Zc(s)||(e=s,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(e))));var e}const Rf=od(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function ld(s){return Rf.test(String.fromCodePoint(s))}function $o(s,e){return!(!e&&ld(s)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(s)))}function _l(s){for(const e of s)if(ld(e.codePointAt(0)))return!0;return!1}const Ts=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(Ts.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,e){return c(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;const r=s.pluginURL,d=new Promise((b=>{this.loadScriptResolve=b}));e(r);const m=new Promise((b=>setTimeout((()=>b()),this.TIMEOUT)));if(yield Promise.race([d,m]),this.isParsed()){const b={pluginStatus:"loaded",pluginURL:r};return this.setState(b),b}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${r}`)}))}};class ni{constructor(e,r){this.isSupportedScript=Up,this.zoom=e,r?(this.now=r.now||0,this.fadeDuration=r.fadeDuration||0,this.zoomHistory=r.zoomHistory||new Df,this.transition=r.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Df,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,r=e-Math.floor(e),d=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*r}}}function Up(s){return(function(e,r){for(const d of e)if(!$o(d.codePointAt(0),r))return!1;return!0})(s,Ts.getRTLTextPluginStatus()==="loaded")}const vl="-transition";class ac{constructor(e,r,d){this.property=e,this.value=r,this.expression=(function(m,b,x){if(vf(m))return new Uc(m,b);if(ec(m)){const E=nc(m,b,x);if(E.result==="error")throw new Error(E.value.map((C=>`${C.key}: ${C.message}`)).join(", "));return E.value}{let E=m;return b.type==="color"&&typeof m=="string"?E=_n.parse(m):b.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?b.type!=="numberArray"||typeof m!="number"&&!Array.isArray(m)?b.type!=="colorArray"||typeof m!="string"&&!Array.isArray(m)?b.type==="variableAnchorOffsetCollection"&&Array.isArray(m)?E=Ji.parse(m):b.type==="projectionDefinition"&&typeof m=="string"&&(E=kr.parse(m)):E=tn.parse(m):E=Bi.parse(m):E=gr.parse(m),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>E}}})(r===void 0?e.specification.default:r,e.specification,d)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,r,d){return this.property.possiblyEvaluate(this,e,r,d)}}class cd{constructor(e,r){this.property=e,this.value=new ac(e,void 0,r)}transitioned(e,r){return new qc(this.property,this.value,r,on({},e.transition,this.transition),e.now)}untransitioned(){return new qc(this.property,this.value,null,{},0)}}class kf{constructor(e,r){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._globalState=r}getValue(e){return Fi(this._values[e].value.value)}setValue(e,r){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new cd(this._values[e].property,this._globalState)),this._values[e].value=new ac(this._values[e].property,r===null?void 0:Fi(r),this._globalState)}getTransition(e){return Fi(this._values[e].transition)}setTransition(e,r){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new cd(this._values[e].property,this._globalState)),this._values[e].transition=Fi(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const d=this.getValue(r);d!==void 0&&(e[r]=d);const m=this.getTransition(r);m!==void 0&&(e[`${r}${vl}`]=m)}return e}transitioned(e,r){const d=new ud(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(e,r._values[m]);return d}untransitioned(){const e=new ud(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class qc{constructor(e,r,d,m,b){this.property=e,this.value=r,this.begin=b+m.delay||0,this.end=this.begin+m.duration||0,e.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(e,r,d){const m=e.now||0,b=this.value.possiblyEvaluate(e,r,d),x=this.prior;if(x){if(m>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(m<this.begin)return x.possiblyEvaluate(e,r,d);{const E=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(e,r,d),b,xt(E))}}return b}}class ud{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,d){const m=new Yc(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].possiblyEvaluate(e,r,d);return m}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Gp{constructor(e,r){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._globalState=r}hasValue(e){return this._values[e].value!==void 0}getValue(e){return Fi(this._values[e].value)}setValue(e,r){this._values[e]=new ac(this._values[e].property,r===null?void 0:Fi(r),this._globalState)}serialize(){const e={};for(const r of Object.keys(this._values)){const d=this.getValue(r);d!==void 0&&(e[r]=d)}return e}possiblyEvaluate(e,r,d){const m=new Yc(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].possiblyEvaluate(e,r,d);return m}}class is{constructor(e,r,d){this.property=e,this.value=r,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,d,m){return this.property.evaluate(this.value,this.parameters,e,r,d,m)}}class Yc{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class jt{constructor(e){this.specification=e}possiblyEvaluate(e,r){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(r)}interpolate(e,r,d){const m=Ui[this.specification.type];return m?m(e,r,d):e}}class Gt{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,d,m){return new is(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},d,m)}:e.expression,r)}interpolate(e,r,d){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new is(this,{kind:"constant",value:void 0},e.parameters);const m=Ui[this.specification.type];if(m){const b=m(e.value.value,r.value.value,d);return new is(this,{kind:"constant",value:b},e.parameters)}return e}evaluate(e,r,d,m,b,x){return e.kind==="constant"?e.value:e.evaluate(r,d,m,b,x)}}class Ss extends Gt{possiblyEvaluate(e,r,d,m){if(e.value===void 0)return new is(this,{kind:"constant",value:void 0},r);if(e.expression.kind==="constant"){const b=e.expression.evaluate(r,null,{},d,m),x=e.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,E=this._calculate(x,x,x,r);return new is(this,{kind:"constant",value:E},r)}if(e.expression.kind==="camera"){const b=this._calculate(e.expression.evaluate({zoom:r.zoom-1}),e.expression.evaluate({zoom:r.zoom}),e.expression.evaluate({zoom:r.zoom+1}),r);return new is(this,{kind:"constant",value:b},r)}return new is(this,e.expression,r)}evaluate(e,r,d,m,b,x){if(e.kind==="source"){const E=e.evaluate(r,d,m,b,x);return this._calculate(E,E,E,r)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(r.zoom)-1},d,m),e.evaluate({zoom:Math.floor(r.zoom)},d,m),e.evaluate({zoom:Math.floor(r.zoom)+1},d,m),r):e.value}_calculate(e,r,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:d,to:r}}interpolate(e){return e}}class qu{constructor(e){this.specification=e}possiblyEvaluate(e,r,d,m){if(e.value!==void 0){if(e.expression.kind==="constant"){const b=e.expression.evaluate(r,null,{},d,m);return this._calculate(b,b,b,r)}return this._calculate(e.expression.evaluate(new ni(Math.floor(r.zoom-1),r)),e.expression.evaluate(new ni(Math.floor(r.zoom),r)),e.expression.evaluate(new ni(Math.floor(r.zoom+1),r)),r)}}_calculate(e,r,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:d,to:r}}interpolate(e){return e}}class hd{constructor(e){this.specification=e}possiblyEvaluate(e,r,d,m){return!!e.expression.evaluate(r,null,{},d,m)}interpolate(){return!1}}class ur{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in e){const d=e[r];d.specification.overridable&&this.overridableProperties.push(r);const m=this.defaultPropertyValues[r]=new ac(d,void 0,void 0),b=this.defaultTransitionablePropertyValues[r]=new cd(d,void 0);this.defaultTransitioningPropertyValues[r]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=m.possiblyEvaluate({})}}}Pt("DataDrivenProperty",Gt),Pt("DataConstantProperty",jt),Pt("CrossFadedDataDrivenProperty",Ss),Pt("CrossFadedProperty",qu),Pt("ColorRampProperty",hd);class Hi extends Pn{constructor(e,r,d){if(super(),this.id=e.id,this.type=e.type,this._globalState=d,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this._visibilityExpression=(function(m,b){return new $u(m,b)})(this.visibility,d),e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=Ra(e.filter,d)),r.layout&&(this._unevaluatedLayout=new Gp(r.layout,d)),r.paint)){this._transitionablePaint=new kf(r.paint,d);for(const m in e.paint)this.setPaintProperty(m,e.paint[m],{validate:!1});for(const m in e.layout)this.setLayoutProperty(m,e.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yc(r.paint)}}setFilter(e){this.filter=e,this._featureFilter=Ra(e,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){const e=new Set;for(const r of this._visibilityExpression.getGlobalStateRefs())e.add(r);if(this._unevaluatedLayout)for(const r in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[r];for(const m of d.getGlobalStateRefs())e.add(m)}for(const r of this._featureFilter.getGlobalStateRefs())e.add(r);return e}getPaintAffectingGlobalStateRefs(){var e;const r=new globalThis.Map;if(this._transitionablePaint)for(const d in this._transitionablePaint._values){const m=this._transitionablePaint._values[d].value;for(const b of m.getGlobalStateRefs()){const x=(e=r.get(b))!==null&&e!==void 0?e:[];x.push({name:d,value:m.value}),r.set(b,x)}}return r}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(e,r,d={}){if(r==null||!this._validate(Eg,`layers.${this.id}.layout.${e}`,e,r,d))return e==="visibility"?(this.visibility=r,this._visibilityExpression.setValue(r),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(e,r)}getPaintProperty(e){return e.endsWith(vl)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,d={}){if(r!=null&&this._validate(Mf,`layers.${this.id}.paint.${e}`,e,r,d))return!1;if(e.endsWith(vl))return this._transitionablePaint.setTransition(e.slice(0,-11),r||void 0),!1;{const m=this._transitionablePaint._values[e],b=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),E=m.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);const C=this._transitionablePaint._values[e].value;return C.isDataDriven()||x||b||this._handleOverridablePaintPropertyUpdate(e,E,C)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,r,d){return!1}isHidden(e=this.minzoom,r=!1){return!!(this.minzoom&&e<(r?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&e>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(e,r){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Tr(e,((r,d)=>!(r===void 0||d==="layout"&&!Object.keys(r).length||d==="paint"&&!Object.keys(r).length)))}_validate(e,r,d,m,b={}){return(!b||b.validate!==!1)&&Zs(this,e.call(Lr,{key:r,layerType:this.type,objectKey:d,value:m,styleSpec:$e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof is&&bs(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}}let tr;var dd={get paint(){return tr=tr||new ur({"raster-opacity":new jt($e.paint_raster["raster-opacity"]),"raster-hue-rotate":new jt($e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jt($e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jt($e.paint_raster["raster-brightness-max"]),"raster-saturation":new jt($e.paint_raster["raster-saturation"]),"raster-contrast":new jt($e.paint_raster["raster-contrast"]),"raster-resampling":new jt($e.paint_raster["raster-resampling"]),"raster-fade-duration":new jt($e.paint_raster["raster-fade-duration"])})}};class bl extends Hi{constructor(e,r){super(e,dd,r)}}const En={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Kn{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class xn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Gi(s,e=1){let r=0,d=0;return{members:s.map((m=>{const b=En[m.type].BYTES_PER_ELEMENT,x=r=Es(r,Math.max(e,b)),E=m.components||1;return d=Math.max(d,b),r+=b*E,{name:m.name,type:m.type,components:E,offset:x}})),size:Es(r,Math.max(d,e)),alignment:e}}function Es(s,e){return Math.ceil(s/e)*e}class Ys extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const d=this.length;return this.resize(d+1),this.emplace(d,e,r)}emplace(e,r,d){const m=2*e;return this.int16[m+0]=r,this.int16[m+1]=d,e}}Ys.prototype.bytesPerElement=4,Pt("StructArrayLayout2i4",Ys);class Hc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,d)}emplace(e,r,d,m){const b=3*e;return this.int16[b+0]=r,this.int16[b+1]=d,this.int16[b+2]=m,e}}Hc.prototype.bytesPerElement=6,Pt("StructArrayLayout3i6",Hc);class Wc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,d,m){const b=this.length;return this.resize(b+1),this.emplace(b,e,r,d,m)}emplace(e,r,d,m,b){const x=4*e;return this.int16[x+0]=r,this.int16[x+1]=d,this.int16[x+2]=m,this.int16[x+3]=b,e}}Wc.prototype.bytesPerElement=8,Pt("StructArrayLayout4i8",Wc);class xl extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b,x){const E=this.length;return this.resize(E+1),this.emplace(E,e,r,d,m,b,x)}emplace(e,r,d,m,b,x,E){const C=6*e;return this.int16[C+0]=r,this.int16[C+1]=d,this.int16[C+2]=m,this.int16[C+3]=b,this.int16[C+4]=x,this.int16[C+5]=E,e}}xl.prototype.bytesPerElement=12,Pt("StructArrayLayout2i4i12",xl);class $p extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b,x){const E=this.length;return this.resize(E+1),this.emplace(E,e,r,d,m,b,x)}emplace(e,r,d,m,b,x,E){const C=4*e,k=8*e;return this.int16[C+0]=r,this.int16[C+1]=d,this.uint8[k+4]=m,this.uint8[k+5]=b,this.uint8[k+6]=x,this.uint8[k+7]=E,e}}$p.prototype.bytesPerElement=8,Pt("StructArrayLayout2i4ub8",$p);class ki extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const d=this.length;return this.resize(d+1),this.emplace(d,e,r)}emplace(e,r,d){const m=2*e;return this.float32[m+0]=r,this.float32[m+1]=d,e}}ki.prototype.bytesPerElement=8,Pt("StructArrayLayout2f8",ki);class Hs extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b,x,E,C,k,P){const j=this.length;return this.resize(j+1),this.emplace(j,e,r,d,m,b,x,E,C,k,P)}emplace(e,r,d,m,b,x,E,C,k,P,j){const U=10*e;return this.uint16[U+0]=r,this.uint16[U+1]=d,this.uint16[U+2]=m,this.uint16[U+3]=b,this.uint16[U+4]=x,this.uint16[U+5]=E,this.uint16[U+6]=C,this.uint16[U+7]=k,this.uint16[U+8]=P,this.uint16[U+9]=j,e}}Hs.prototype.bytesPerElement=20,Pt("StructArrayLayout10ui20",Hs);class Yu extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b,x,E,C){const k=this.length;return this.resize(k+1),this.emplace(k,e,r,d,m,b,x,E,C)}emplace(e,r,d,m,b,x,E,C,k){const P=8*e;return this.uint16[P+0]=r,this.uint16[P+1]=d,this.uint16[P+2]=m,this.uint16[P+3]=b,this.uint16[P+4]=x,this.uint16[P+5]=E,this.uint16[P+6]=C,this.uint16[P+7]=k,e}}Yu.prototype.bytesPerElement=16,Pt("StructArrayLayout8ui16",Yu);class Hu extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b,x,E,C,k,P,j,U){const G=this.length;return this.resize(G+1),this.emplace(G,e,r,d,m,b,x,E,C,k,P,j,U)}emplace(e,r,d,m,b,x,E,C,k,P,j,U,G){const W=12*e;return this.int16[W+0]=r,this.int16[W+1]=d,this.int16[W+2]=m,this.int16[W+3]=b,this.uint16[W+4]=x,this.uint16[W+5]=E,this.uint16[W+6]=C,this.uint16[W+7]=k,this.int16[W+8]=P,this.int16[W+9]=j,this.int16[W+10]=U,this.int16[W+11]=G,e}}Hu.prototype.bytesPerElement=24,Pt("StructArrayLayout4i4ui4i24",Hu);class fd extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,d)}emplace(e,r,d,m){const b=3*e;return this.float32[b+0]=r,this.float32[b+1]=d,this.float32[b+2]=m,e}}fd.prototype.bytesPerElement=12,Pt("StructArrayLayout3f12",fd);class pd extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}pd.prototype.bytesPerElement=4,Pt("StructArrayLayout1ul4",pd);class md extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b,x,E,C,k){const P=this.length;return this.resize(P+1),this.emplace(P,e,r,d,m,b,x,E,C,k)}emplace(e,r,d,m,b,x,E,C,k,P){const j=10*e,U=5*e;return this.int16[j+0]=r,this.int16[j+1]=d,this.int16[j+2]=m,this.int16[j+3]=b,this.int16[j+4]=x,this.int16[j+5]=E,this.uint32[U+3]=C,this.uint16[j+8]=k,this.uint16[j+9]=P,e}}md.prototype.bytesPerElement=20,Pt("StructArrayLayout6i1ul2ui20",md);class sc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b,x){const E=this.length;return this.resize(E+1),this.emplace(E,e,r,d,m,b,x)}emplace(e,r,d,m,b,x,E){const C=6*e;return this.int16[C+0]=r,this.int16[C+1]=d,this.int16[C+2]=m,this.int16[C+3]=b,this.int16[C+4]=x,this.int16[C+5]=E,e}}sc.prototype.bytesPerElement=12,Pt("StructArrayLayout2i2i2i12",sc);class wl extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b){const x=this.length;return this.resize(x+1),this.emplace(x,e,r,d,m,b)}emplace(e,r,d,m,b,x){const E=4*e,C=8*e;return this.float32[E+0]=r,this.float32[E+1]=d,this.float32[E+2]=m,this.int16[C+6]=b,this.int16[C+7]=x,e}}wl.prototype.bytesPerElement=16,Pt("StructArrayLayout2f1f2i16",wl);class ia extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b,x){const E=this.length;return this.resize(E+1),this.emplace(E,e,r,d,m,b,x)}emplace(e,r,d,m,b,x,E){const C=16*e,k=4*e,P=8*e;return this.uint8[C+0]=r,this.uint8[C+1]=d,this.float32[k+1]=m,this.float32[k+2]=b,this.int16[P+6]=x,this.int16[P+7]=E,e}}ia.prototype.bytesPerElement=16,Pt("StructArrayLayout2ub2f2i16",ia);class $i extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,d)}emplace(e,r,d,m){const b=3*e;return this.uint16[b+0]=r,this.uint16[b+1]=d,this.uint16[b+2]=m,e}}$i.prototype.bytesPerElement=6,Pt("StructArrayLayout3ui6",$i);class Zo extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b,x,E,C,k,P,j,U,G,W,X,J,le){const ve=this.length;return this.resize(ve+1),this.emplace(ve,e,r,d,m,b,x,E,C,k,P,j,U,G,W,X,J,le)}emplace(e,r,d,m,b,x,E,C,k,P,j,U,G,W,X,J,le,ve){const ce=24*e,de=12*e,xe=48*e;return this.int16[ce+0]=r,this.int16[ce+1]=d,this.uint16[ce+2]=m,this.uint16[ce+3]=b,this.uint32[de+2]=x,this.uint32[de+3]=E,this.uint32[de+4]=C,this.uint16[ce+10]=k,this.uint16[ce+11]=P,this.uint16[ce+12]=j,this.float32[de+7]=U,this.float32[de+8]=G,this.uint8[xe+36]=W,this.uint8[xe+37]=X,this.uint8[xe+38]=J,this.uint32[de+10]=le,this.int16[ce+22]=ve,e}}Zo.prototype.bytesPerElement=48,Pt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Zo);class Xc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,d,m,b,x,E,C,k,P,j,U,G,W,X,J,le,ve,ce,de,xe,Me,qe,ct,rt,mt,Rt,_t){const ot=this.length;return this.resize(ot+1),this.emplace(ot,e,r,d,m,b,x,E,C,k,P,j,U,G,W,X,J,le,ve,ce,de,xe,Me,qe,ct,rt,mt,Rt,_t)}emplace(e,r,d,m,b,x,E,C,k,P,j,U,G,W,X,J,le,ve,ce,de,xe,Me,qe,ct,rt,mt,Rt,_t,ot){const Je=32*e,Bt=16*e;return this.int16[Je+0]=r,this.int16[Je+1]=d,this.int16[Je+2]=m,this.int16[Je+3]=b,this.int16[Je+4]=x,this.int16[Je+5]=E,this.int16[Je+6]=C,this.int16[Je+7]=k,this.uint16[Je+8]=P,this.uint16[Je+9]=j,this.uint16[Je+10]=U,this.uint16[Je+11]=G,this.uint16[Je+12]=W,this.uint16[Je+13]=X,this.uint16[Je+14]=J,this.uint16[Je+15]=le,this.uint16[Je+16]=ve,this.uint16[Je+17]=ce,this.uint16[Je+18]=de,this.uint16[Je+19]=xe,this.uint16[Je+20]=Me,this.uint16[Je+21]=qe,this.uint16[Je+22]=ct,this.uint32[Bt+12]=rt,this.float32[Bt+13]=mt,this.float32[Bt+14]=Rt,this.uint16[Je+30]=_t,this.uint16[Je+31]=ot,e}}Xc.prototype.bytesPerElement=64,Pt("StructArrayLayout8i15ui1ul2f2ui64",Xc);class Qc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}Qc.prototype.bytesPerElement=4,Pt("StructArrayLayout1f4",Qc);class Wu extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,d)}emplace(e,r,d,m){const b=3*e;return this.uint16[6*e+0]=r,this.float32[b+1]=d,this.float32[b+2]=m,e}}Wu.prototype.bytesPerElement=12,Pt("StructArrayLayout1ui2f12",Wu);class Ws extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,d)}emplace(e,r,d,m){const b=4*e;return this.uint32[2*e+0]=r,this.uint16[b+2]=d,this.uint16[b+3]=m,e}}Ws.prototype.bytesPerElement=8,Pt("StructArrayLayout1ul2ui8",Ws);class w extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const d=this.length;return this.resize(d+1),this.emplace(d,e,r)}emplace(e,r,d){const m=2*e;return this.uint16[m+0]=r,this.uint16[m+1]=d,e}}w.prototype.bytesPerElement=4,Pt("StructArrayLayout2ui4",w);class t extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}t.prototype.bytesPerElement=2,Pt("StructArrayLayout1ui2",t);class l extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,d,m){const b=this.length;return this.resize(b+1),this.emplace(b,e,r,d,m)}emplace(e,r,d,m,b){const x=4*e;return this.float32[x+0]=r,this.float32[x+1]=d,this.float32[x+2]=m,this.float32[x+3]=b,e}}l.prototype.bytesPerElement=16,Pt("StructArrayLayout4f16",l);class p extends Kn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}p.prototype.size=20;class v extends md{get(e){return new p(this,e)}}Pt("CollisionBoxArray",v);class S extends Kn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}S.prototype.size=48;class M extends Zo{get(e){return new S(this,e)}}Pt("PlacedSymbolArray",M);class I extends Kn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}I.prototype.size=64;class L extends Xc{get(e){return new I(this,e)}}Pt("SymbolInstanceArray",L);class F extends Qc{getoffsetX(e){return this.float32[1*e+0]}}Pt("GlyphOffsetArray",F);class B extends Hc{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Pt("SymbolLineVertexArray",B);class Z extends Kn{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Z.prototype.size=12;class $ extends Wu{get(e){return new Z(this,e)}}Pt("TextAnchorOffsetArray",$);class K extends Kn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}K.prototype.size=8;class se extends Ws{get(e){return new K(this,e)}}Pt("FeatureIndexArray",se);class pe extends Ys{}class ge extends Ys{}class me extends Ys{}class _e extends xl{}class Ae extends $p{}class ye extends ki{}class Se extends Hs{}class Ie extends Yu{}class be extends Hu{}class je extends fd{}class Qe extends pd{}class Ze extends sc{}class We extends ia{}class Xe extends $i{}class Et extends w{}const At=Gi([{name:"a_pos",components:2,type:"Int16"}],4),{members:pt}=At;class It{constructor(e=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,r,d,m){const b=this.segments[this.segments.length-1];return e>It.MAX_VERTEX_ARRAY_LENGTH&&Nn(`Max vertices per segment is ${It.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${It.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!b||b.vertexLength+e>It.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==m?this.createNewSegment(r,d,m):b}createNewSegment(e,r,d){const m={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(m.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(e,r,d){return this.prepareSegment(0,e,r,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,d,m){return new It([{vertexOffset:e,primitiveOffset:r,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function cn(s,e){return 256*(s=Zt(Math.floor(s),0,255))+Zt(Math.floor(e),0,255)}It.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pt("SegmentVector",It);const Jn=Gi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ti=Gi([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var yi,Oi,li,Wi={exports:{}},Li={exports:{}},Gr={exports:{}},nr=(function(){if(li)return Wi.exports;li=1;var s=(yi||(yi=1,Li.exports=function(r,d){var m,b,x,E,C,k,P,j;for(b=r.length-(m=3&r.length),x=d,C=3432918353,k=461845907,j=0;j<b;)P=255&r.charCodeAt(j)|(255&r.charCodeAt(++j))<<8|(255&r.charCodeAt(++j))<<16|(255&r.charCodeAt(++j))<<24,++j,x=27492+(65535&(E=5*(65535&(x=(x^=P=(65535&(P=(P=(65535&P)*C+(((P>>>16)*C&65535)<<16)&4294967295)<<15|P>>>17))*k+(((P>>>16)*k&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(P=0,m){case 3:P^=(255&r.charCodeAt(j+2))<<16;case 2:P^=(255&r.charCodeAt(j+1))<<8;case 1:x^=P=(65535&(P=(P=(65535&(P^=255&r.charCodeAt(j)))*C+(((P>>>16)*C&65535)<<16)&4294967295)<<15|P>>>17))*k+(((P>>>16)*k&65535)<<16)&4294967295}return x^=r.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),Li.exports),e=(Oi||(Oi=1,Gr.exports=function(r,d){for(var m,b=r.length,x=d^b,E=0;b>=4;)m=1540483477*(65535&(m=255&r.charCodeAt(E)|(255&r.charCodeAt(++E))<<8|(255&r.charCodeAt(++E))<<16|(255&r.charCodeAt(++E))<<24))+((1540483477*(m>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),b-=4,++E;switch(b){case 3:x^=(255&r.charCodeAt(E+2))<<16;case 2:x^=(255&r.charCodeAt(E+1))<<8;case 1:x=1540483477*(65535&(x^=255&r.charCodeAt(E)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),Gr.exports);return Wi.exports=s,Wi.exports.murmur3=s,Wi.exports.murmur2=e,Wi.exports})(),ir=D(nr);class $r{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,d,m){this.ids.push(qo(e)),this.positions.push(r,d,m)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const r=qo(e);let d=0,m=this.ids.length-1;for(;d<m;){const x=d+m>>1;this.ids[x]>=r?m=x:d=x+1}const b=[];for(;this.ids[d]===r;)b.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return b}static serialize(e,r){const d=new Float64Array(e.ids),m=new Uint32Array(e.positions);return Yo(d,m,0,d.length-1),r&&r.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(e){const r=new $r;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}}function qo(s){const e=+s;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:ir(String(s))}function Yo(s,e,r,d){for(;r<d;){const m=s[r+d>>1];let b=r-1,x=d+1;for(;;){do b++;while(s[b]<m);do x--;while(s[x]>m);if(b>=x)break;Xs(s,b,x),Xs(e,3*b,3*x),Xs(e,3*b+1,3*x+1),Xs(e,3*b+2,3*x+2)}x-r<d-x?(Yo(s,e,r,x),r=x+1):(Yo(s,e,x+1,d),d=x)}}function Xs(s,e,r){const d=s[e];s[e]=s[r],s[r]=d}Pt("FeaturePositionMap",$r);class Na{constructor(e,r){this.gl=e.gl,this.location=r}}class Kc extends Na{constructor(e,r){super(e,r),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Xu extends Na{constructor(e,r){super(e,r),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Qs extends Na{constructor(e,r){super(e,r),this.current=_n.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Pa=new Float32Array(16);function rs(s){return[cn(255*s.r,255*s.g),cn(255*s.b,255*s.a)]}class As{constructor(e,r,d){this.value=e,this.uniformNames=r.map((m=>`u_${m}`)),this.type=d}setUniform(e,r,d){e.set(d.constantOr(this.value))}getBinding(e,r,d){return this.type==="color"?new Qs(e,r):new Kc(e,r)}}class Ms{constructor(e,r){this.uniformNames=r.map((d=>`u_${d}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=e.tlbr}setConstantDashPositions(e,r){this.dashTo=[0,e.y,e.height,e.width],this.dashFrom=[0,r.y,r.height,r.width]}setUniform(e,r,d,m){let b=null;m==="u_pattern_to"?b=this.patternTo:m==="u_pattern_from"?b=this.patternFrom:m==="u_dasharray_to"?b=this.dashTo:m==="u_dasharray_from"?b=this.dashFrom:m==="u_pixel_ratio_to"?b=this.pixelRatioTo:m==="u_pixel_ratio_from"&&(b=this.pixelRatioFrom),b!==null&&e.set(b)}getBinding(e,r,d){return d.substr(0,9)==="u_pattern"||d.substr(0,12)==="u_dasharray_"?new Xu(e,r):new Kc(e,r)}}class ii{constructor(e,r,d,m){this.expression=e,this.type=d,this.maxValue=0,this.paintVertexAttributes=r.map((b=>({name:`a_${b}`,type:"Float32",components:d==="color"?2:1,offset:0}))),this.paintVertexArray=new m}populatePaintArray(e,r,d){const m=this.paintVertexArray.length,b=this.expression.evaluate(new ni(0,d),r,{},d.canonical,[],d.formattedSection);this.paintVertexArray.resize(e),this._setPaintValue(m,e,b)}updatePaintArray(e,r,d,m,b){const x=this.expression.evaluate(new ni(0,b),d,m);this._setPaintValue(e,r,x)}_setPaintValue(e,r,d){if(this.type==="color"){const m=rs(d);for(let b=e;b<r;b++)this.paintVertexArray.emplace(b,m[0],m[1])}else{for(let m=e;m<r;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _i{constructor(e,r,d,m,b,x){this.expression=e,this.uniformNames=r.map((E=>`u_${E}_t`)),this.type=d,this.useIntegerZoom=m,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=r.map((E=>({name:`a_${E}`,type:"Float32",components:d==="color"?4:2,offset:0}))),this.paintVertexArray=new x}populatePaintArray(e,r,d){const m=this.expression.evaluate(new ni(this.zoom,d),r,{},d.canonical,[],d.formattedSection),b=this.expression.evaluate(new ni(this.zoom+1,d),r,{},d.canonical,[],d.formattedSection),x=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(x,e,m,b)}updatePaintArray(e,r,d,m,b){const x=this.expression.evaluate(new ni(this.zoom,b),d,m),E=this.expression.evaluate(new ni(this.zoom+1,b),d,m);this._setPaintValue(e,r,x,E)}_setPaintValue(e,r,d,m){if(this.type==="color"){const b=rs(d),x=rs(m);for(let E=e;E<r;E++)this.paintVertexArray.emplace(E,b[0],b[1],x[0],x[1])}else{for(let b=e;b<r;b++)this.paintVertexArray.emplace(b,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r){const d=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,m=Zt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);e.set(m)}getBinding(e,r,d){return new Kc(e,r)}}class _r{constructor(e,r,d,m,b,x){this.expression=e,this.type=r,this.useIntegerZoom=d,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(e,r,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(m,e,this.getPositionIds(r),d)}updatePaintArray(e,r,d,m,b){this._setPaintValues(e,r,this.getPositionIds(d),b)}_setPaintValues(e,r,d,m){const b=this.getPositions(m);if(!b||!d)return;const x=b[d.min],E=b[d.mid],C=b[d.max];if(x&&E&&C)for(let k=e;k<r;k++)this.emplace(this.zoomInPaintVertexArray,k,E,x),this.emplace(this.zoomOutPaintVertexArray,k,E,C)}upload(e){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const r=this.getVertexAttributes();this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,r,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,r,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ar extends _r{getPositions(e){return e.imagePositions}getPositionIds(e){return e.patterns&&e.patterns[this.layerId]}getVertexAttributes(){return Jn.members}emplace(e,r,d,m){e.emplace(r,d.tlbr[0],d.tlbr[1],d.tlbr[2],d.tlbr[3],m.tlbr[0],m.tlbr[1],m.tlbr[2],m.tlbr[3],d.pixelRatio,m.pixelRatio)}}class Of extends _r{getPositions(e){return e.dashPositions}getPositionIds(e){return e.dashes&&e.dashes[this.layerId]}getVertexAttributes(){return Ti.members}emplace(e,r,d,m){e.emplace(r,0,d.y,d.height,d.width,0,m.y,m.height,m.width)}}class Lf{constructor(e,r,d){this.binders={},this._buffers=[];const m=[];for(const b in e.paint._values){if(!d(b))continue;const x=e.paint.get(b);if(!(x instanceof is&&bs(x.property.specification)))continue;const E=Ag(b,e.type),C=x.value,k=x.property.specification.type,P=x.property.useIntegerZoom,j=x.property.specification["property-type"],U=j==="cross-faded"||j==="cross-faded-data-driven";if(C.kind==="constant")this.binders[b]=U?new Ms(C.value,E):new As(C.value,E,k),m.push(`/u_${b}`);else if(C.kind==="source"||U){const G=lc(b,k,"source");this.binders[b]=U?b==="line-dasharray"?new Of(C,k,P,r,G,e.id):new Ar(C,k,P,r,G,e.id):new ii(C,E,k,G),m.push(`/a_${b}`)}else{const G=lc(b,k,"composite");this.binders[b]=new _i(C,E,k,P,r,G),m.push(`/z_${b}`)}}this.cacheKey=m.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof ii||r instanceof _i?r.maxValue:0}populatePaintArrays(e,r,d){for(const m in this.binders){const b=this.binders[m];(b instanceof ii||b instanceof _i||b instanceof _r)&&b.populatePaintArray(e,r,d)}}setConstantPatternPositions(e,r){for(const d in this.binders){const m=this.binders[d];m instanceof Ms&&m.setConstantPatternPositions(e,r)}}setConstantDashPositions(e,r){for(const d in this.binders){const m=this.binders[d];m instanceof Ms&&m.setConstantDashPositions(e,r)}}updatePaintArrays(e,r,d,m,b){let x=!1;for(const E in e){const C=r.getPositions(E);for(const k of C){const P=d.feature(k.index);for(const j in this.binders){const U=this.binders[j];if((U instanceof ii||U instanceof _i||U instanceof _r)&&U.expression.isStateDependent===!0){const G=m.paint.get(j);U.expression=G.value,U.updatePaintArray(k.start,k.end,P,e[E],b),x=!0}}}}return x}defines(){const e=[];for(const r in this.binders){const d=this.binders[r];(d instanceof As||d instanceof Ms)&&e.push(...d.uniformNames.map((m=>`#define HAS_UNIFORM_${m}`)))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const d=this.binders[r];if(d instanceof ii||d instanceof _i)for(let m=0;m<d.paintVertexAttributes.length;m++)e.push(d.paintVertexAttributes[m].name);else if(d instanceof _r){const m=d.getVertexAttributes();for(const b of m)e.push(b.name)}}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const d=this.binders[r];if(d instanceof As||d instanceof Ms||d instanceof _i)for(const m of d.uniformNames)e.push(m)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,r){const d=[];for(const m in this.binders){const b=this.binders[m];if(b instanceof As||b instanceof Ms||b instanceof _i){for(const x of b.uniformNames)if(r[x]){const E=b.getBinding(e,r[x],x);d.push({name:x,property:m,binding:E})}}}return d}setUniforms(e,r,d,m){for(const{name:b,property:x,binding:E}of r)this.binders[x].setUniform(E,m,d.get(x),b)}updatePaintBuffers(e){this._buffers=[];for(const r in this.binders){const d=this.binders[r];if(e&&d instanceof _r){const m=e.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof ii||d instanceof _i)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(e){for(const r in this.binders){const d=this.binders[r];(d instanceof ii||d instanceof _i||d instanceof _r)&&d.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof ii||r instanceof _i||r instanceof _r)&&r.destroy()}}}class oc{constructor(e,r,d=()=>!0){this.programConfigurations={};for(const m of e)this.programConfigurations[m.id]=new Lf(m,r,d);this.needsUpload=!1,this._featureMap=new $r,this._bufferOffset=0}populatePaintArrays(e,r,d,m){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(e,r,m);r.id!==void 0&&this._featureMap.add(r.id,d,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,d,m){for(const b of d)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(e,this._featureMap,r,b,m)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Ag(s,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${e}-`,"").replace(/-/g,"_")]}function lc(s,e,r){const d={color:{source:ki,composite:l},number:{source:Qc,composite:ki}},m=(function(b){return{"line-pattern":{source:Se,composite:Se},"fill-pattern":{source:Se,composite:Se},"fill-extrusion-pattern":{source:Se,composite:Se},"line-dasharray":{source:Ie,composite:Ie}}[b]})(s);return m&&m[r]||d[e][r]}Pt("ConstantBinder",As),Pt("CrossFadedConstantBinder",Ms),Pt("SourceExpressionBinder",ii),Pt("CrossFadedPatternBinder",Ar),Pt("CrossFadedDasharrayBinder",Of),Pt("CompositeExpressionBinder",_i),Pt("ProgramConfiguration",Lf,{omit:["_buffers"]}),Pt("ProgramConfigurationSet",oc);const Nf=Math.pow(2,14)-1,Tl=-Nf-1;function Sl(s){const e=gt/s.extent,r=s.loadGeometry();for(let d=0;d<r.length;d++){const m=r[d];for(let b=0;b<m.length;b++){const x=m[b],E=Math.round(x.x*e),C=Math.round(x.y*e);x.x=Zt(E,Tl,Nf),x.y=Zt(C,Tl,Nf),(E<x.x||E>x.x+1||C<x.y||C>x.y+1)&&Nn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function Ks(s,e){return{type:s.type,id:s.id,properties:s.properties,geometry:e?Sl(s):[]}}const Pf=-32768;function gd(s,e,r,d,m){s.emplaceBack(Pf+8*e+d,Pf+8*r+m)}class yd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new ge,this.indexArray=new Xe,this.segments=new It,this.programConfigurations=new oc(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(e,r,d){const m=this.layers[0],b=[];let x=null,E=!1,C=m.type==="heatmap";if(m.type==="circle"){const P=m;x=P.layout.get("circle-sort-key"),E=!x.isConstant(),C=C||P.paint.get("circle-pitch-alignment")==="map"}const k=C?r.subdivisionGranularity.circle:1;for(const{feature:P,id:j,index:U,sourceLayerIndex:G}of e){const W=this.layers[0]._featureFilter.needGeometry,X=Ks(P,W);if(!this.layers[0]._featureFilter.filter(new ni(this.zoom),X,d))continue;const J=E?x.evaluate(X,{},d):void 0,le={id:j,properties:P.properties,type:P.type,sourceLayerIndex:G,index:U,geometry:W?X.geometry:Sl(P),patterns:{},sortKey:J};b.push(le)}E&&b.sort(((P,j)=>P.sortKey-j.sortKey));for(const P of b){const{geometry:j,index:U,sourceLayerIndex:G}=P,W=e[U].feature;this.addFeature(P,j,U,d,k),r.featureIndex.insert(W,j,U,G,this.index)}}update(e,r,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pt),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,d,m,b=1){let x;switch(b){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${b}; valid values are 1, 3, 5, 7.`)}const E=x.length;for(const C of r)for(const k of C){const P=k.x,j=k.y;if(P<0||P>=gt||j<0||j>=gt)continue;const U=this.segments.prepareSegment(E*E,this.layoutVertexArray,this.indexArray,e.sortKey),G=U.vertexLength;for(let W=0;W<E;W++)for(let X=0;X<E;X++)gd(this.layoutVertexArray,P,j,x[X],x[W]);for(let W=0;W<E-1;W++)for(let X=0;X<E-1;X++){const J=G+W*E+X,le=G+(W+1)*E+X;this.indexArray.emplaceBack(J,le+1,J+1),this.indexArray.emplaceBack(J,le,le+1)}U.vertexLength+=E*E,U.primitiveLength+=(E-1)*(E-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,{imagePositions:{},canonical:m})}}function _d(s,e){for(let r=0;r<s.length;r++)if(cc(e,s[r]))return!0;for(let r=0;r<e.length;r++)if(cc(s,e[r]))return!0;return!!ra(s,e)}function Mg(s,e,r){return!!cc(s,e)||!!Dg(e,s,r)}function Cg(s,e){if(s.length===1)return A0(e,s[0]);for(let r=0;r<e.length;r++){const d=e[r];for(let m=0;m<d.length;m++)if(cc(s,d[m]))return!0}for(let r=0;r<s.length;r++)if(A0(e,s[r]))return!0;for(let r=0;r<e.length;r++)if(ra(s,e[r]))return!0;return!1}function Zr(s,e,r){if(s.length>1){if(ra(s,e))return!0;for(let d=0;d<e.length;d++)if(Dg(e[d],s,r))return!0}for(let d=0;d<s.length;d++)if(Dg(s[d],e,r))return!0;return!1}function ra(s,e){if(s.length===0||e.length===0)return!1;for(let r=0;r<s.length-1;r++){const d=s[r],m=s[r+1];for(let b=0;b<e.length-1;b++)if(Zv(d,m,e[b],e[b+1]))return!0}return!1}function Zv(s,e,r,d){return bn(s,r,d)!==bn(e,r,d)&&bn(s,e,r)!==bn(s,e,d)}function Dg(s,e,r){const d=r*r;if(e.length===1)return s.distSqr(e[0])<d;for(let m=1;m<e.length;m++)if(E0(s,e[m-1],e[m])<d)return!0;return!1}function E0(s,e,r){const d=e.distSqr(r);if(d===0)return s.distSqr(e);const m=((s.x-e.x)*(r.x-e.x)+(s.y-e.y)*(r.y-e.y))/d;return s.distSqr(m<0?e:m>1?r:r.sub(e)._mult(m)._add(e))}function A0(s,e){let r,d,m,b=!1;for(let x=0;x<s.length;x++){r=s[x];for(let E=0,C=r.length-1;E<r.length;C=E++)d=r[E],m=r[C],d.y>e.y!=m.y>e.y&&e.x<(m.x-d.x)*(e.y-d.y)/(m.y-d.y)+d.x&&(b=!b)}return b}function cc(s,e){let r=!1;for(let d=0,m=s.length-1;d<s.length;m=d++){const b=s[d],x=s[m];b.y>e.y!=x.y>e.y&&e.x<(x.x-b.x)*(e.y-b.y)/(x.y-b.y)+b.x&&(r=!r)}return r}function qv(s,e,r){const d=r[0],m=r[2];if(s.x<d.x&&e.x<d.x||s.x>m.x&&e.x>m.x||s.y<d.y&&e.y<d.y||s.y>m.y&&e.y>m.y)return!1;const b=bn(s,e,r[0]);return b!==bn(s,e,r[1])||b!==bn(s,e,r[2])||b!==bn(s,e,r[3])}function Jc(s,e,r){const d=e.paint.get(s).value;return d.kind==="constant"?d.value:r.programConfigurations.get(e.id).getMaxValue(s)}function Zp(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Ig(s,e,r,d,m){if(!e[0]&&!e[1])return s;const b=A.convert(e)._mult(m);r==="viewport"&&b._rotate(-d);const x=[];for(let E=0;E<s.length;E++)x.push(s[E].sub(b));return x}function Rg(s){const e=[];for(let r=0;r<s.length;r++){const d=s[r],m=e.at(-1);(r===0||m&&!d.equals(m))&&e.push(d)}return e}function M0({queryGeometry:s,size:e},r){return Mg(s,r,e)}function Yv({queryGeometry:s,size:e,transform:r,unwrappedTileID:d,getElevation:m},b){return Mg(s,b,e*(r.projectTileCoordinates(b.x,b.y,d,m).signedDistanceFromCamera/r.cameraToCenterDistance))}function Hv({queryGeometry:s,size:e,transform:r,unwrappedTileID:d,getElevation:m},b){const x=r.projectTileCoordinates(b.x,b.y,d,m).signedDistanceFromCamera,E=e*(r.cameraToCenterDistance/x);return Mg(s,qp(b,r,d,m),E)}function Wv({queryGeometry:s,size:e,transform:r,unwrappedTileID:d,getElevation:m},b){return Mg(s,qp(b,r,d,m),e)}function kg({queryGeometry:s,size:e,transform:r,unwrappedTileID:d,getElevation:m,pitchAlignment:b="map",pitchScale:x="map"},E){const C=b==="map"?x==="map"?M0:Yv:x==="map"?Hv:Wv,k={queryGeometry:s,size:e,transform:r,unwrappedTileID:d,getElevation:m};for(const P of E)for(const j of P)if(C(k,j))return!0;return!1}function qp(s,e,r,d){const m=e.projectTileCoordinates(s.x,s.y,r,d).point;return new A((.5*m.x+.5)*e.width,(.5*-m.y+.5)*e.height)}let Og,C0;Pt("CircleBucket",yd,{omit:["layers"]});var D0={get paint(){return C0=C0||new ur({"circle-radius":new Gt($e.paint_circle["circle-radius"]),"circle-color":new Gt($e.paint_circle["circle-color"]),"circle-blur":new Gt($e.paint_circle["circle-blur"]),"circle-opacity":new Gt($e.paint_circle["circle-opacity"]),"circle-translate":new jt($e.paint_circle["circle-translate"]),"circle-translate-anchor":new jt($e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jt($e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jt($e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gt($e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gt($e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gt($e.paint_circle["circle-stroke-opacity"])})},get layout(){return Og=Og||new ur({"circle-sort-key":new Gt($e.layout_circle["circle-sort-key"])})}};class Lg extends Hi{constructor(e,r){super(e,D0,r)}createBucket(e){return new yd(e)}queryRadius(e){const r=e;return Jc("circle-radius",this,r)+Jc("circle-stroke-width",this,r)+Zp(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:d,geometry:m,transform:b,pixelsToTileUnits:x,unwrappedTileID:E,getElevation:C}){const k=Ig(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-b.bearingInRadians,x),P=this.paint.get("circle-radius").evaluate(r,d)+this.paint.get("circle-stroke-width").evaluate(r,d),j=this.paint.get("circle-pitch-scale"),U=this.paint.get("circle-pitch-alignment");let G,W;return U==="map"?(G=k,W=P*x):(G=(function(X,J,le,ve){return X.map((ce=>qp(ce,J,le,ve)))})(k,b,E,C),W=P),kg({queryGeometry:G,size:W,transform:b,unwrappedTileID:E,getElevation:C,pitchAlignment:U,pitchScale:j},m)}}class Ng extends yd{}let I0;Pt("HeatmapBucket",Ng,{omit:["layers"]});var R0={get paint(){return I0=I0||new ur({"heatmap-radius":new Gt($e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gt($e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jt($e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new hd($e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jt($e.paint_heatmap["heatmap-opacity"])})}};function Pg(s,{width:e,height:r},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==e*r*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${e*r*d}`)}else m=new Uint8Array(e*r*d);return s.width=e,s.height=r,s.data=m,s}function uc(s,{width:e,height:r},d){if(e===s.width&&r===s.height)return;const m=Pg({},{width:e,height:r},d);Yp(s,m,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,e),height:Math.min(s.height,r)},d),s.width=e,s.height=r,s.data=m.data}function Yp(s,e,r,d,m,b){if(m.width===0||m.height===0)return e;if(m.width>s.width||m.height>s.height||r.x>s.width-m.width||r.y>s.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>e.width||m.height>e.height||d.x>e.width-m.width||d.y>e.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,E=e.data;if(x===E)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<m.height;C++){const k=((r.y+C)*s.width+r.x)*b,P=((d.y+C)*e.width+d.x)*b;for(let j=0;j<m.width*b;j++)E[P+j]=x[k+j]}return e}class Hp{constructor(e,r){Pg(this,e,1,r)}resize(e){uc(this,e,1)}clone(){return new Hp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,d,m,b){Yp(e,r,d,m,b,1)}}class za{constructor(e,r){Pg(this,e,4,r)}resize(e){uc(this,e,4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new za({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,d,m,b){Yp(e,r,d,m,b,4)}setPixel(e,r,d){const m=4*(e*this.width+r);this.data[m+0]=Math.round(255*d.r/d.a),this.data[m+1]=Math.round(255*d.g/d.a),this.data[m+2]=Math.round(255*d.b/d.a),this.data[m+3]=Math.round(255*d.a)}}function hc(s){const e={},r=s.resolution||256,d=s.clips?s.clips.length:1,m=s.image||new za({width:r,height:d});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const b=(x,E,C)=>{e[s.evaluationKey]=C;const k=s.expression.evaluate(e);m.setPixel(x/4/r,E/4,k)};if(s.clips)for(let x=0,E=0;x<d;++x,E+=4*r)for(let C=0,k=0;C<r;C++,k+=4){const P=C/(r-1),{start:j,end:U}=s.clips[x];b(E,k,j*(1-P)+U*P)}else for(let x=0,E=0;x<r;x++,E+=4)b(0,E,x/(r-1));return m}Pt("AlphaImage",Hp),Pt("RGBAImage",za);const Wp="big-fb";class Xv extends Hi{createBucket(e){return new Ng(e)}constructor(e,r){super(e,R0,r),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Wp)&&this.heatmapFbos.delete(Wp)}queryRadius(e){return Jc("heatmap-radius",this,e)}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:d,geometry:m,transform:b,pixelsToTileUnits:x,unwrappedTileID:E,getElevation:C}){return kg({queryGeometry:e,size:this.paint.get("heatmap-radius").evaluate(r,d)*x,transform:b,unwrappedTileID:E,getElevation:C},m)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let Xp;var Qp={get paint(){return Xp=Xp||new ur({"hillshade-illumination-direction":new jt($e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new jt($e.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new jt($e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jt($e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jt($e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jt($e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jt($e.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new jt($e.paint_hillshade["hillshade-method"])})}};class rr extends Hi{constructor(e,r){super(e,Qp,r),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,r=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,m=this.paint.get("hillshade-shadow-color").values;const b=Math.max(e.length,r.length,d.length,m.length);e=e.concat(Array(b-e.length).fill(e.at(-1))),r=r.concat(Array(b-r.length).fill(r.at(-1))),d=d.concat(Array(b-d.length).fill(d.at(-1))),m=m.concat(Array(b-m.length).fill(m.at(-1)));const x=r.map(ji);return{directionRadians:e.map(ji),altitudeRadians:x,shadowColor:m,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let Qv;var x1={get paint(){return Qv=Qv||new ur({"color-relief-opacity":new jt($e["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new hd($e["paint_color-relief"]["color-relief-color"])})}};class zg{constructor(e,r,d,m){this.context=e,this.format=d,this.texture=e.gl.createTexture(),this.update(r,m)}update(e,r,d){const{width:m,height:b}=e,x=!(this.size&&this.size[0]===m&&this.size[1]===b||d),{context:E}=this,{gl:C}=E;if(this.useMipmap=!!(r&&r.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!r||r.premultiply!==!1)),x)this.size=[m,b],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||Za(e)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,e):C.texImage2D(C.TEXTURE_2D,0,this.format,m,b,0,this.format,C.UNSIGNED_BYTE,e.data);else{const{x:k,y:P}=d||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||Za(e)?C.texSubImage2D(C.TEXTURE_2D,0,k,P,C.RGBA,C.UNSIGNED_BYTE,e):C.texSubImage2D(C.TEXTURE_2D,0,k,P,m,b,C.RGBA,C.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,r,d){const{context:m}=this,{gl:b}=m;b.bindTexture(b.TEXTURE_2D,this.texture),d!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=b.LINEAR),e!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,e),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d||e),this.filter=e),r!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,r),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class zf{constructor(e,r,d,m=1,b=1,x=1,E=0){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Nn(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=r.height;const C=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=b,this.blueFactor=x,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<C;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(C,k)]=this.data[this._idx(C-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,C)]=this.data[this._idx(k,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<C;k++)for(let P=0;P<C;P++){const j=this.get(k,P);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(e,r){const d=new Uint8Array(this.data.buffer),m=4*this._idx(e,r);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${e}, y: ${r}, dim: ${this.dim}`);return(r+1)*this.stride+(e+1)}unpack(e,r,d){return e*this.redFactor+r*this.greenFactor+d*this.blueFactor-this.baseShift}pack(e){return eu(e,this.getUnpackVector())}getPixels(){return new za({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,r,d){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let m=r*this.dim,b=r*this.dim+this.dim,x=d*this.dim,E=d*this.dim+this.dim;switch(r){case-1:m=b-1;break;case 1:b=m+1}switch(d){case-1:x=E-1;break;case 1:E=x+1}const C=-r*this.dim,k=-d*this.dim;for(let P=x;P<E;P++)for(let j=m;j<b;j++)this.data[this._idx(j,P)]=e.data[this._idx(j+C,P+k)]}}function eu(s,e){const r=e[0],d=e[1],m=e[2],b=e[3],x=Math.min(r,d,m),E=Math.round((s+b)/x);return{r:Math.floor(E*x/r)%256,g:Math.floor(E*x/d)%256,b:Math.floor(E*x/m)%256}}Pt("DEMData",zf);class Kv extends Hi{constructor(e,r){super(e,x1,r)}_createColorRamp(e){const r={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof Aa&&d._styleExpression.expression instanceof Sa){this.colorRampExpression=d;const x=d._styleExpression.expression;r.elevationStops=x.labels,r.colorStops=[];for(const E of r.elevationStops)r.colorStops.push(x.evaluate({globals:{elevation:E}}))}if(r.elevationStops.length<1&&(r.elevationStops=[0],r.colorStops=[_n.transparent]),r.elevationStops.length<2&&(r.elevationStops.push(r.elevationStops[0]+1),r.colorStops.push(r.colorStops[0])),r.elevationStops.length<=e)return r;const m={elevationStops:[],colorStops:[]},b=(r.elevationStops.length-1)/(e-1);for(let x=0;x<r.elevationStops.length-.5;x+=b)m.elevationStops.push(r.elevationStops[Math.round(x)]),m.colorStops.push(r.colorStops[Math.round(x)]);return Nn(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${e}, provided: ${r.elevationStops.length}`),m}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,r,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const m=this._createColorRamp(r),b=new za({width:m.colorStops.length,height:1}),x=new za({width:m.colorStops.length,height:1});for(let E=0;E<m.elevationStops.length;E++){const C=eu(m.elevationStops[E],d);x.setPixel(0,E,new _n(C.r/255,C.g/255,C.b/255,1)),b.setPixel(0,E,m.colorStops[E])}return this.colorRampTextures={elevationTexture:new zg(e,x,e.gl.RGBA),colorTexture:new zg(e,b,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const Jv=Gi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Kp}=Jv;function Js(s,e,r){const d=r.patternDependencies;let m=!1;for(const b of e){const x=b.paint.get(`${s}-pattern`);x.isConstant()||(m=!0);const E=x.constantOr(null);E&&(m=!0,d[E.to]=!0,d[E.from]=!0)}return m}function Fg(s,e,r,d,m){const{zoom:b}=d,x=m.patternDependencies;for(const E of e){const C=E.paint.get(`${s}-pattern`).value;if(C.kind!=="constant"){let k=C.evaluate({zoom:b-1},r,{},m.availableImages),P=C.evaluate({zoom:b},r,{},m.availableImages),j=C.evaluate({zoom:b+1},r,{},m.availableImages);k=k&&k.name?k.name:k,P=P&&P.name?P.name:P,j=j&&j.name?j.name:j,x[k]=!0,x[P]=!0,x[j]=!0,r.patterns[E.id]={min:k,mid:P,max:j}}}return r}function jg(s,e,r,d,m){let b;if(m===(function(x,E,C,k){let P=0;for(let j=E,U=C-k;j<C;j+=k)P+=(x[U]-x[j])*(x[j+1]+x[U+1]),U=j;return P})(s,e,r,d)>0)for(let x=e;x<r;x+=d)b=as(x/d|0,s[x],s[x+1],b);else for(let x=r-d;x>=e;x-=d)b=as(x/d|0,s[x],s[x+1],b);return b&&Cs(b,b.next)&&(ss(b),b=b.next),b}function Qu(s,e){if(!s)return s;e||(e=s);let r,d=s;do if(r=!1,d.steiner||!Cs(d,d.next)&&Hn(d.prev,d,d.next)!==0)d=d.next;else{if(ss(d),d=e=d.prev,d===d.next)break;r=!0}while(r||d!==e);return e}function vd(s,e,r,d,m,b,x){if(!s)return;!x&&b&&(function(C,k,P,j){let U=C;do U.z===0&&(U.z=Yr(U.x,U.y,k,P,j)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==C);U.prevZ.nextZ=null,U.prevZ=null,(function(G){let W,X=1;do{let J,le=G;G=null;let ve=null;for(W=0;le;){W++;let ce=le,de=0;for(let Me=0;Me<X&&(de++,ce=ce.nextZ,ce);Me++);let xe=X;for(;de>0||xe>0&&ce;)de!==0&&(xe===0||!ce||le.z<=ce.z)?(J=le,le=le.nextZ,de--):(J=ce,ce=ce.nextZ,xe--),ve?ve.nextZ=J:G=J,J.prevZ=ve,ve=J;le=ce}ve.nextZ=null,X*=2}while(W>1)})(U)})(s,d,m,b);let E=s;for(;s.prev!==s.next;){const C=s.prev,k=s.next;if(b?Bg(s,d,m,b):k0(s))e.push(C.i,s.i,k.i),ss(s),s=k.next,E=k.next;else if((s=k)===E){x?x===1?vd(s=eb(Qu(s),e),e,r,d,m,b,2):x===2&&tu(s,e,r,d,m,b):vd(Qu(s),e,r,d,m,b,1);break}}}function k0(s){const e=s.prev,r=s,d=s.next;if(Hn(e,r,d)>=0)return!1;const m=e.x,b=r.x,x=d.x,E=e.y,C=r.y,k=d.y,P=Math.min(m,b,x),j=Math.min(E,C,k),U=Math.max(m,b,x),G=Math.max(E,C,k);let W=d.next;for(;W!==e;){if(W.x>=P&&W.x<=U&&W.y>=j&&W.y<=G&&Ff(m,E,b,C,x,k,W.x,W.y)&&Hn(W.prev,W,W.next)>=0)return!1;W=W.next}return!0}function Bg(s,e,r,d){const m=s.prev,b=s,x=s.next;if(Hn(m,b,x)>=0)return!1;const E=m.x,C=b.x,k=x.x,P=m.y,j=b.y,U=x.y,G=Math.min(E,C,k),W=Math.min(P,j,U),X=Math.max(E,C,k),J=Math.max(P,j,U),le=Yr(G,W,e,r,d),ve=Yr(X,J,e,r,d);let ce=s.prevZ,de=s.nextZ;for(;ce&&ce.z>=le&&de&&de.z<=ve;){if(ce.x>=G&&ce.x<=X&&ce.y>=W&&ce.y<=J&&ce!==m&&ce!==x&&Ff(E,P,C,j,k,U,ce.x,ce.y)&&Hn(ce.prev,ce,ce.next)>=0||(ce=ce.prevZ,de.x>=G&&de.x<=X&&de.y>=W&&de.y<=J&&de!==m&&de!==x&&Ff(E,P,C,j,k,U,de.x,de.y)&&Hn(de.prev,de,de.next)>=0))return!1;de=de.nextZ}for(;ce&&ce.z>=le;){if(ce.x>=G&&ce.x<=X&&ce.y>=W&&ce.y<=J&&ce!==m&&ce!==x&&Ff(E,P,C,j,k,U,ce.x,ce.y)&&Hn(ce.prev,ce,ce.next)>=0)return!1;ce=ce.prevZ}for(;de&&de.z<=ve;){if(de.x>=G&&de.x<=X&&de.y>=W&&de.y<=J&&de!==m&&de!==x&&Ff(E,P,C,j,k,U,de.x,de.y)&&Hn(de.prev,de,de.next)>=0)return!1;de=de.nextZ}return!0}function eb(s,e){let r=s;do{const d=r.prev,m=r.next.next;!Cs(d,m)&&N0(d,r,r.next,m)&&tm(d,m)&&tm(m,d)&&(e.push(d.i,r.i,m.i),ss(r),ss(r.next),r=s=m),r=r.next}while(r!==s);return Qu(r)}function tu(s,e,r,d,m,b){let x=s;do{let E=x.next.next;for(;E!==x.prev;){if(x.i!==E.i&&hr(x,E)){let C=nm(x,E);return x=Qu(x,x.next),C=Qu(C,C.next),vd(x,e,r,d,m,b,0),void vd(C,e,r,d,m,b,0)}E=E.next}x=x.next}while(x!==s)}function qr(s,e){let r=s.x-e.x;return r===0&&(r=s.y-e.y,r===0)&&(r=(s.next.y-s.y)/(s.next.x-s.x)-(e.next.y-e.y)/(e.next.x-e.x)),r}function O0(s,e){const r=(function(m,b){let x=b;const E=m.x,C=m.y;let k,P=-1/0;if(Cs(m,x))return x;do{if(Cs(m,x.next))return x.next;if(C<=x.y&&C>=x.next.y&&x.next.y!==x.y){const X=x.x+(C-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(X<=E&&X>P&&(P=X,k=x.x<x.next.x?x:x.next,X===E))return k}x=x.next}while(x!==b);if(!k)return null;const j=k,U=k.x,G=k.y;let W=1/0;x=k;do{if(E>=x.x&&x.x>=U&&E!==x.x&&L0(C<G?E:P,C,U,G,C<G?P:E,C,x.x,x.y)){const X=Math.abs(C-x.y)/(E-x.x);tm(x,m)&&(X<W||X===W&&(x.x>k.x||x.x===k.x&&tb(k,x)))&&(k=x,W=X)}x=x.next}while(x!==j);return k})(s,e);if(!r)return e;const d=nm(r,s);return Qu(d,d.next),Qu(r,r.next)}function tb(s,e){return Hn(s.prev,s,e.prev)<0&&Hn(e.next,s,s.next)<0}function Yr(s,e,r,d,m){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-r)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-d)*m|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function w1(s){let e=s,r=s;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==s);return r}function L0(s,e,r,d,m,b,x,E){return(m-x)*(e-E)>=(s-x)*(b-E)&&(s-x)*(d-E)>=(r-x)*(e-E)&&(r-x)*(b-E)>=(m-x)*(d-E)}function Ff(s,e,r,d,m,b,x,E){return!(s===x&&e===E)&&L0(s,e,r,d,m,b,x,E)}function hr(s,e){return s.next.i!==e.i&&s.prev.i!==e.i&&!(function(r,d){let m=r;do{if(m.i!==r.i&&m.next.i!==r.i&&m.i!==d.i&&m.next.i!==d.i&&N0(m,m.next,r,d))return!0;m=m.next}while(m!==r);return!1})(s,e)&&(tm(s,e)&&tm(e,s)&&(function(r,d){let m=r,b=!1;const x=(r.x+d.x)/2,E=(r.y+d.y)/2;do m.y>E!=m.next.y>E&&m.next.y!==m.y&&x<(m.next.x-m.x)*(E-m.y)/(m.next.y-m.y)+m.x&&(b=!b),m=m.next;while(m!==r);return b})(s,e)&&(Hn(s.prev,s,e.prev)||Hn(s,e.prev,e))||Cs(s,e)&&Hn(s.prev,s,s.next)>0&&Hn(e.prev,e,e.next)>0)}function Hn(s,e,r){return(e.y-s.y)*(r.x-e.x)-(e.x-s.x)*(r.y-e.y)}function Cs(s,e){return s.x===e.x&&s.y===e.y}function N0(s,e,r,d){const m=em(Hn(s,e,r)),b=em(Hn(s,e,d)),x=em(Hn(r,d,s)),E=em(Hn(r,d,e));return m!==b&&x!==E||!(m!==0||!Jp(s,r,e))||!(b!==0||!Jp(s,d,e))||!(x!==0||!Jp(r,s,d))||!(E!==0||!Jp(r,e,d))}function Jp(s,e,r){return e.x<=Math.max(s.x,r.x)&&e.x>=Math.min(s.x,r.x)&&e.y<=Math.max(s.y,r.y)&&e.y>=Math.min(s.y,r.y)}function em(s){return s>0?1:s<0?-1:0}function tm(s,e){return Hn(s.prev,s,s.next)<0?Hn(s,e,s.next)>=0&&Hn(s,s.prev,e)>=0:Hn(s,e,s.prev)<0||Hn(s,s.next,e)<0}function nm(s,e){const r=Vg(s.i,s.x,s.y),d=Vg(e.i,e.x,e.y),m=s.next,b=e.prev;return s.next=e,e.prev=s,r.next=m,m.prev=r,d.next=r,r.prev=d,b.next=d,d.prev=b,d}function as(s,e,r,d){const m=Vg(s,e,r);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function ss(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Vg(s,e,r){return{i:s,x:e,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class aa{constructor(e,r){if(r>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=r}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class im{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}im.noSubdivision=new im({fill:new aa(0,0),line:new aa(0,0),tile:new aa(0,0),stencil:new aa(0,0),circle:1}),Pt("SubdivisionGranularityExpression",aa),Pt("SubdivisionGranularitySetting",im);const Ds=-32768,El=32767;class nu{constructor(e,r){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=gt/e,this._canonical=r}_getKey(e,r){return(e+=32768)<<16|r+32768}_vertexToIndex(e,r){if(e<-32768||r<-32768||e>32767||r>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(e),m=0|Math.round(r),b=this._getKey(d,m);if(this._vertexDictionary.has(b))return this._vertexDictionary.get(b);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(b,x),this._vertexBuffer.push(d,m),x}_subdivideTrianglesScanline(e){if(this._granularity<2)return(function(m,b){const x=[];for(let E=0;E<b.length;E+=3){const C=b[E],k=b[E+1],P=b[E+2],j=m[2*C],U=m[2*C+1];(m[2*k]-j)*(m[2*P+1]-U)-(m[2*k+1]-U)*(m[2*P]-j)>0?(x.push(C),x.push(P),x.push(k)):(x.push(C),x.push(k),x.push(P))}return x})(this._vertexBuffer,e);const r=[],d=e.length;for(let m=0;m<d;m+=3){const b=[e[m+0],e[m+1],e[m+2]],x=[this._vertexBuffer[2*e[m+0]+0],this._vertexBuffer[2*e[m+0]+1],this._vertexBuffer[2*e[m+1]+0],this._vertexBuffer[2*e[m+1]+1],this._vertexBuffer[2*e[m+2]+0],this._vertexBuffer[2*e[m+2]+1]];let E=1/0,C=1/0,k=-1/0,P=-1/0;for(let X=0;X<3;X++){const J=x[2*X],le=x[2*X+1];E=Math.min(E,J),k=Math.max(k,J),C=Math.min(C,le),P=Math.max(P,le)}if(E===k||C===P)continue;const j=Math.floor(E/this._granularityCellSize),U=Math.ceil(k/this._granularityCellSize),G=Math.floor(C/this._granularityCellSize),W=Math.ceil(P/this._granularityCellSize);if(j!==U||G!==W)for(let X=G;X<W;X++){const J=this._scanlineGenerateVertexRingForCellRow(X,x,b);Al(this._vertexBuffer,J,r)}else r.push(...b)}return r}_scanlineGenerateVertexRingForCellRow(e,r,d){const m=e*this._granularityCellSize,b=m+this._granularityCellSize,x=[];for(let E=0;E<3;E++){const C=r[2*E],k=r[2*E+1],P=r[2*(E+1)%6],j=r[(2*(E+1)+1)%6],U=r[2*(E+2)%6],G=r[(2*(E+2)+1)%6],W=P-C,X=j-k,J=W===0,le=X===0,ve=(m-k)/X,ce=(b-k)/X,de=Math.min(ve,ce),xe=Math.max(ve,ce);if(!le&&(de>=1||xe<=0)||le&&(k<m||k>b)){j>=m&&j<=b&&x.push(d[(E+1)%3]);continue}!le&&de>0&&x.push(this._vertexToIndex(C+W*de,k+X*de));const Me=C+W*Math.max(de,0),qe=C+W*Math.min(xe,1);J||this._generateIntraEdgeVertices(x,C,k,P,j,Me,qe),!le&&xe<1&&x.push(this._vertexToIndex(C+W*xe,k+X*xe)),(le||j>=m&&j<=b)&&x.push(d[(E+1)%3]),!le&&(j<=m||j>=b)&&this._generateInterEdgeVertices(x,C,k,P,j,U,G,qe,m,b)}return x}_generateIntraEdgeVertices(e,r,d,m,b,x,E){const C=m-r,k=b-d,P=k===0,j=P?Math.min(r,m):Math.min(x,E),U=P?Math.max(r,m):Math.max(x,E),G=Math.floor(j/this._granularityCellSize)+1,W=Math.ceil(U/this._granularityCellSize)-1;if(P?r<m:x<E)for(let X=G;X<=W;X++){const J=X*this._granularityCellSize;e.push(this._vertexToIndex(J,d+k*(J-r)/C))}else for(let X=W;X>=G;X--){const J=X*this._granularityCellSize;e.push(this._vertexToIndex(J,d+k*(J-r)/C))}}_generateInterEdgeVertices(e,r,d,m,b,x,E,C,k,P){const j=b-d,U=x-m,G=E-b,W=(k-b)/G,X=(P-b)/G,J=Math.min(W,X),le=Math.max(W,X),ve=m+U*J;let ce=Math.floor(Math.min(ve,C)/this._granularityCellSize)+1,de=Math.ceil(Math.max(ve,C)/this._granularityCellSize)-1,xe=C<ve;const Me=G===0;if(Me&&(E===k||E===P))return;if(Me||J>=1||le<=0){const ct=d-E,rt=x+(r-x)*Math.min((k-E)/ct,(P-E)/ct);ce=Math.floor(Math.min(rt,C)/this._granularityCellSize)+1,de=Math.ceil(Math.max(rt,C)/this._granularityCellSize)-1,xe=C<rt}const qe=j>0?P:k;if(xe)for(let ct=ce;ct<=de;ct++)e.push(this._vertexToIndex(ct*this._granularityCellSize,qe));else for(let ct=de;ct>=ce;ct--)e.push(this._vertexToIndex(ct*this._granularityCellSize,qe))}_generateOutline(e){const r=[];for(const d of e){const m=iu(d,this._granularity,!0),b=this._pointArrayToIndices(m),x=[];for(let E=1;E<b.length;E++)x.push(b[E-1]),x.push(b[E]);r.push(x)}return r}_handlePoles(e){let r=!1,d=!1;this._canonical&&(this._canonical.y===0&&(r=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(r||d)&&this._fillPoles(e,r,d)}_ensureNoPoleVertices(){const e=this._vertexBuffer;for(let r=0;r<e.length;r+=2){const d=e[r+1];d===Ds&&(e[r+1]=-32767),d===El&&(e[r+1]=32766)}}_generatePoleQuad(e,r,d,m,b,x){m>b!=(x===Ds)?(e.push(r),e.push(d),e.push(this._vertexToIndex(m,x)),e.push(d),e.push(this._vertexToIndex(b,x)),e.push(this._vertexToIndex(m,x))):(e.push(d),e.push(r),e.push(this._vertexToIndex(m,x)),e.push(this._vertexToIndex(b,x)),e.push(d),e.push(this._vertexToIndex(m,x)))}_fillPoles(e,r,d){const m=this._vertexBuffer,b=gt,x=e.length;for(let E=2;E<x;E+=3){const C=e[E-2],k=e[E-1],P=e[E],j=m[2*C],U=m[2*C+1],G=m[2*k],W=m[2*k+1],X=m[2*P],J=m[2*P+1];r&&(U===0&&W===0&&this._generatePoleQuad(e,C,k,j,G,Ds),W===0&&J===0&&this._generatePoleQuad(e,k,P,G,X,Ds),J===0&&U===0&&this._generatePoleQuad(e,P,C,X,j,Ds)),d&&(U===b&&W===b&&this._generatePoleQuad(e,C,k,j,G,El),W===b&&J===b&&this._generatePoleQuad(e,k,P,G,X,El),J===b&&U===b&&this._generatePoleQuad(e,P,C,X,j,El))}}_initializeVertices(e){for(let r=0;r<e.length;r+=2)this._vertexToIndex(e[r],e[r+1])}subdividePolygonInternal(e,r){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:m}=(function(E){const C=[],k=[];for(const P of E)if(P.length!==0){P!==E[0]&&C.push(k.length/2);for(let j=0;j<P.length;j++)k.push(P[j].x),k.push(P[j].y)}return{flattened:k,holeIndices:C}})(e);let b;this._initializeVertices(d);try{const E=(function(k,P,j=2){const U=P&&P.length,G=U?P[0]*j:k.length;let W=jg(k,0,G,j,!0);const X=[];if(!W||W.next===W.prev)return X;let J,le,ve;if(U&&(W=(function(ce,de,xe,Me){const qe=[];for(let ct=0,rt=de.length;ct<rt;ct++){const mt=jg(ce,de[ct]*Me,ct<rt-1?de[ct+1]*Me:ce.length,Me,!1);mt===mt.next&&(mt.steiner=!0),qe.push(w1(mt))}qe.sort(qr);for(let ct=0;ct<qe.length;ct++)xe=O0(qe[ct],xe);return xe})(k,P,W,j)),k.length>80*j){J=k[0],le=k[1];let ce=J,de=le;for(let xe=j;xe<G;xe+=j){const Me=k[xe],qe=k[xe+1];Me<J&&(J=Me),qe<le&&(le=qe),Me>ce&&(ce=Me),qe>de&&(de=qe)}ve=Math.max(ce-J,de-le),ve=ve!==0?32767/ve:0}return vd(W,X,j,J,le,ve,0),X})(d,m),C=this._convertIndices(d,E);b=this._subdivideTrianglesScanline(C)}catch(E){console.error(E)}let x=[];return r&&(x=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(b),{verticesFlattened:this._vertexBuffer,indicesTriangles:b,indicesLineList:x}}_convertIndices(e,r){const d=[];for(let m=0;m<r.length;m++)d.push(this._vertexToIndex(e[2*r[m]],e[2*r[m]+1]));return d}_pointArrayToIndices(e){const r=[];for(let d=0;d<e.length;d++){const m=e[d];r.push(this._vertexToIndex(m.x,m.y))}return r}}function Ug(s,e,r,d=!0){return new nu(r,e).subdividePolygonInternal(s,d)}function iu(s,e,r=!1){if(!s||s.length<1)return[];if(s.length<2)return[];const d=s[0],m=s[s.length-1],b=r&&(d.x!==m.x||d.y!==m.y);if(e<2)return b?[...s,s[0]]:[...s];const x=Math.floor(gt/e),E=[];E.push(new A(s[0].x,s[0].y));const C=s.length,k=b?C:C-1;for(let P=0;P<k;P++){const j=s[P],U=P<C-1?s[P+1]:s[0],G=j.x,W=j.y,X=U.x,J=U.y,le=G!==X,ve=W!==J;if(!le&&!ve)continue;const ce=X-G,de=J-W,xe=Math.abs(ce),Me=Math.abs(de);let qe=G,ct=W;for(;;){const mt=ce>0?(Math.floor(qe/x)+1)*x:(Math.ceil(qe/x)-1)*x,Rt=de>0?(Math.floor(ct/x)+1)*x:(Math.ceil(ct/x)-1)*x,_t=Math.abs(qe-mt),ot=Math.abs(ct-Rt),Je=Math.abs(qe-X),Bt=Math.abs(ct-J),zt=le?_t/xe:Number.POSITIVE_INFINITY,Vt=ve?ot/Me:Number.POSITIVE_INFINITY;if((Je<=_t||!le)&&(Bt<=ot||!ve))break;if(zt<Vt&&le||!ve){qe=mt,ct+=de*zt;const Ot=new A(qe,Math.round(ct));E[E.length-1].x===Ot.x&&E[E.length-1].y===Ot.y||E.push(Ot)}else{qe+=ce*Vt,ct=Rt;const Ot=new A(Math.round(qe),ct);E[E.length-1].x===Ot.x&&E[E.length-1].y===Ot.y||E.push(Ot)}}const rt=new A(X,J);E[E.length-1].x===rt.x&&E[E.length-1].y===rt.y||E.push(rt)}return E}function Al(s,e,r){if(e.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,m=s[2*e[0]];for(let C=1;C<e.length;C++){const k=s[2*e[C]];k<m&&(m=k,d=C)}const b=e.length;let x=d,E=(x+1)%b;for(;;){const C=x-1>=0?x-1:b-1,k=(E+1)%b,P=s[2*e[C]],j=s[2*e[k]],U=s[2*e[x]],G=s[2*e[x]+1],W=s[2*e[E]+1];let X=!1;if(P<j)X=!0;else if(P>j)X=!1;else{const J=W-G,le=-(s[2*e[E]]-U),ve=G<W?1:-1;((P-U)*J+(s[2*e[C]+1]-G)*le)*ve>((j-U)*J+(s[2*e[k]+1]-G)*le)*ve&&(X=!0)}if(X){const J=e[C],le=e[x],ve=e[E];J!==le&&J!==ve&&le!==ve&&r.push(ve,le,J),x--,x<0&&(x=b-1)}else{const J=e[k],le=e[x],ve=e[E];J!==le&&J!==ve&&le!==ve&&r.push(ve,le,J),E++,E>=b&&(E=0)}if(C===k)break}}function P0(s,e,r,d,m,b,x,E,C){const k=m.length/2,P=x&&E&&C;if(k<It.MAX_VERTEX_ARRAY_LENGTH){const j=e.prepareSegment(k,r,d),U=j.vertexLength;for(let X=0;X<b.length;X+=3)d.emplaceBack(U+b[X],U+b[X+1],U+b[X+2]);let G,W;j.vertexLength+=k,j.primitiveLength+=b.length/3,P&&(W=x.prepareSegment(k,r,E),G=W.vertexLength,W.vertexLength+=k);for(let X=0;X<m.length;X+=2)s(m[X],m[X+1]);if(P)for(let X=0;X<C.length;X++){const J=C[X];for(let le=1;le<J.length;le+=2)E.emplaceBack(G+J[le-1],G+J[le]);W.primitiveLength+=J.length/2}}else(function(j,U,G,W,X,J){const le=[];for(let Me=0;Me<W.length/2;Me++)le.push(-1);const ve={count:0};let ce=0,de=j.getOrCreateLatestSegment(U,G),xe=de.vertexLength;for(let Me=2;Me<X.length;Me+=3){const qe=X[Me-2],ct=X[Me-1],rt=X[Me];let mt=le[qe]<ce,Rt=le[ct]<ce,_t=le[rt]<ce;de.vertexLength+((mt?1:0)+(Rt?1:0)+(_t?1:0))>It.MAX_VERTEX_ARRAY_LENGTH&&(de=j.createNewSegment(U,G),ce=ve.count,mt=!0,Rt=!0,_t=!0,xe=0);const ot=dc(le,W,J,ve,qe,mt,de),Je=dc(le,W,J,ve,ct,Rt,de),Bt=dc(le,W,J,ve,rt,_t,de);G.emplaceBack(xe+ot-ce,xe+Je-ce,xe+Bt-ce),de.primitiveLength++}})(e,r,d,m,b,s),P&&(function(j,U,G,W,X,J){const le=[];for(let Me=0;Me<W.length/2;Me++)le.push(-1);const ve={count:0};let ce=0,de=j.getOrCreateLatestSegment(U,G),xe=de.vertexLength;for(let Me=0;Me<X.length;Me++){const qe=X[Me];for(let ct=1;ct<X[Me].length;ct+=2){const rt=qe[ct-1],mt=qe[ct];let Rt=le[rt]<ce,_t=le[mt]<ce;de.vertexLength+((Rt?1:0)+(_t?1:0))>It.MAX_VERTEX_ARRAY_LENGTH&&(de=j.createNewSegment(U,G),ce=ve.count,Rt=!0,_t=!0,xe=0);const ot=dc(le,W,J,ve,rt,Rt,de),Je=dc(le,W,J,ve,mt,_t,de);G.emplaceBack(xe+ot-ce,xe+Je-ce),de.primitiveLength++}}})(x,r,E,m,C,s),e.forceNewSegmentOnNextPrepare(),x?.forceNewSegmentOnNextPrepare()}function dc(s,e,r,d,m,b,x){if(b){const E=d.count;return r(e[2*m],e[2*m+1]),s[m]=d.count,d.count++,x.vertexLength++,E}return s[m]}class bd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new me,this.indexArray=new Xe,this.indexArray2=new Et,this.programConfigurations=new oc(e.layers,e.zoom),this.segments=new It,this.segments2=new It,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(e,r,d){this.hasDependencies=Js("fill",this.layers,r);const m=this.layers[0].layout.get("fill-sort-key"),b=!m.isConstant(),x=[];for(const{feature:E,id:C,index:k,sourceLayerIndex:P}of e){const j=this.layers[0]._featureFilter.needGeometry,U=Ks(E,j);if(!this.layers[0]._featureFilter.filter(new ni(this.zoom),U,d))continue;const G=b?m.evaluate(U,{},d,r.availableImages):void 0,W={id:C,properties:E.properties,type:E.type,sourceLayerIndex:P,index:k,geometry:j?U.geometry:Sl(E),patterns:{},sortKey:G};x.push(W)}b&&x.sort(((E,C)=>E.sortKey-C.sortKey));for(const E of x){const{geometry:C,index:k,sourceLayerIndex:P}=E;if(this.hasDependencies){const j=Fg("fill",this.layers,E,{zoom:this.zoom},r);this.patternFeatures.push(j)}else this.addFeature(E,C,k,d,{},r.subdivisionGranularity);r.featureIndex.insert(e[k].feature,C,k,P,this.index)}}update(e,r,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:d})}addFeatures(e,r,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,r,d,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Kp),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,d,m,b,x){for(const E of qh(r,500)){const C=Ug(E,m,x.fill.getGranularityForZoomLevel(m.z)),k=this.layoutVertexArray;P0(((P,j)=>{k.emplaceBack(P,j)}),this.segments,this.layoutVertexArray,this.indexArray,C.verticesFlattened,C.indicesTriangles,this.segments2,this.indexArray2,C.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,{imagePositions:b,canonical:m})}}let jf,xd;Pt("FillBucket",bd,{omit:["layers","patternFeatures"]});var nb={get paint(){return xd=xd||new ur({"fill-antialias":new jt($e.paint_fill["fill-antialias"]),"fill-opacity":new Gt($e.paint_fill["fill-opacity"]),"fill-color":new Gt($e.paint_fill["fill-color"]),"fill-outline-color":new Gt($e.paint_fill["fill-outline-color"]),"fill-translate":new jt($e.paint_fill["fill-translate"]),"fill-translate-anchor":new jt($e.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ss($e.paint_fill["fill-pattern"])})},get layout(){return jf=jf||new ur({"fill-sort-key":new Gt($e.layout_fill["fill-sort-key"])})}};class ib extends Hi{constructor(e,r){super(e,nb,r)}recalculate(e,r){super.recalculate(e,r);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new bd(e)}queryRadius(){return Zp(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:e,geometry:r,transform:d,pixelsToTileUnits:m}){return Cg(Ig(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,m),r)}isTileClipped(){return!0}}const rm=Gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),rb=Gi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Gg}=rm;class Bf{constructor(e,r,d,m,b){this.properties={},this.extent=d,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=m,this._values=b,e.readFields(T1,this,r)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const r=e.readVarint()+e.pos,d=[];let m,b=1,x=0,E=0,C=0;for(;e.pos<r;){if(x<=0){const k=e.readVarint();b=7&k,x=k>>3}if(x--,b===1||b===2)E+=e.readSVarint(),C+=e.readSVarint(),b===1&&(m&&d.push(m),m=[]),m&&m.push(new A(E,C));else{if(b!==7)throw new Error(`unknown command ${b}`);m&&m.push(m[0].clone())}}return m&&d.push(m),d}bbox(){const e=this._pbf;e.pos=this._geometry;const r=e.readVarint()+e.pos;let d=1,m=0,b=0,x=0,E=1/0,C=-1/0,k=1/0,P=-1/0;for(;e.pos<r;){if(m<=0){const j=e.readVarint();d=7&j,m=j>>3}if(m--,d===1||d===2)b+=e.readSVarint(),x+=e.readSVarint(),b<E&&(E=b),b>C&&(C=b),x<k&&(k=x),x>P&&(P=x);else if(d!==7)throw new Error(`unknown command ${d}`)}return[E,k,C,P]}toGeoJSON(e,r,d){const m=this.extent*Math.pow(2,d),b=this.extent*e,x=this.extent*r,E=this.loadGeometry();function C(U){return[360*(U.x+b)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*(U.y+x)/m)*Math.PI))-90]}function k(U){return U.map(C)}let P;if(this.type===1){const U=[];for(const W of E)U.push(W[0]);const G=k(U);P=U.length===1?{type:"Point",coordinates:G[0]}:{type:"MultiPoint",coordinates:G}}else if(this.type===2){const U=E.map(k);P=U.length===1?{type:"LineString",coordinates:U[0]}:{type:"MultiLineString",coordinates:U}}else{if(this.type!==3)throw new Error("unknown feature type");{const U=ab(E),G=[];for(const W of U)G.push(W.map(k));P=G.length===1?{type:"Polygon",coordinates:G[0]}:{type:"MultiPolygon",coordinates:G}}}const j={type:"Feature",geometry:P,properties:this.properties};return this.id!=null&&(j.id=this.id),j}}function T1(s,e,r){s===1?e.id=r.readVarint():s===2?(function(d,m){const b=d.readVarint()+d.pos;for(;d.pos<b;){const x=m._keys[d.readVarint()],E=m._values[d.readVarint()];m.properties[x]=E}})(r,e):s===3?e.type=r.readVarint():s===4&&(e._geometry=r.pos)}function ab(s){const e=s.length;if(e<=1)return[s];const r=[];let d,m;for(let b=0;b<e;b++){const x=vi(s[b]);x!==0&&(m===void 0&&(m=x<0),m===x<0?(d&&r.push(d),d=[s[b]]):d&&d.push(s[b]))}return d&&r.push(d),r}function vi(s){let e=0;for(let r,d,m=0,b=s.length,x=b-1;m<b;x=m++)r=s[m],d=s[x],e+=(d.x-r.x)*(r.y+d.y);return e}Bf.types=["Unknown","Point","LineString","Polygon"];class Zi{constructor(e,r){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Vn,this,r),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const r=this._pbf.readVarint()+this._pbf.pos;return new Bf(this._pbf,r,this.extent,this._keys,this._values)}}function Vn(s,e,r){s===15?e.version=r.readVarint():s===1?e.name=r.readString():s===5?e.extent=r.readVarint():s===2?e._features.push(r.pos):s===3?e._keys.push(r.readString()):s===4&&e._values.push((function(d){let m=null;const b=d.readVarint()+d.pos;for(;d.pos<b;){const x=d.readVarint()>>3;m=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}if(m==null)throw new Error("unknown feature value");return m})(r))}class Un{constructor(e,r){this.layers=e.readFields(Si,{},r)}}function Si(s,e,r){if(s===3){const d=new Zi(r,r.readVarint()+r.pos);d.length&&(e[d.name]=d)}}const os=Math.pow(2,13);function Ho(s,e,r,d,m,b,x,E){s.emplaceBack(e,r,2*Math.floor(d*os)+x,m*os*2,b*os*2,Math.round(E))}class Ku{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new _e,this.centroidVertexArray=new pe,this.indexArray=new Xe,this.programConfigurations=new oc(e.layers,e.zoom),this.segments=new It,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(e,r,d){this.features=[],this.hasDependencies=Js("fill-extrusion",this.layers,r);for(const{feature:m,id:b,index:x,sourceLayerIndex:E}of e){const C=this.layers[0]._featureFilter.needGeometry,k=Ks(m,C);if(!this.layers[0]._featureFilter.filter(new ni(this.zoom),k,d))continue;const P={id:b,sourceLayerIndex:E,index:x,geometry:C?k.geometry:Sl(m),properties:m.properties,type:m.type,patterns:{}};this.hasDependencies?this.features.push(Fg("fill-extrusion",this.layers,P,{zoom:this.zoom},r)):this.addFeature(P,P.geometry,x,d,{},r.subdivisionGranularity),r.featureIndex.insert(m,P.geometry,x,E,this.index,!0)}}addFeatures(e,r,d){for(const m of this.features){const{geometry:b}=m;this.addFeature(m,b,m.index,r,d,e.subdivisionGranularity)}}update(e,r,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:d})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Gg),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,rb.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,r,d,m,b,x){for(const E of qh(r,500)){const C={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(C,m,e,E,x);const P=this.layoutVertexArray.length-k,j=Math.floor(C.x/C.sampleCount),U=Math.floor(C.y/C.sampleCount);for(let G=0;G<P;G++)this.centroidVertexArray.emplaceBack(j,U)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,{imagePositions:b,canonical:m})}processPolygon(e,r,d,m,b){if(m.length<1||vr(m[0]))return;for(const j of m)j.length!==0&&z0(e,j);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},E=b.fill.getGranularityForZoomLevel(r.z),C=Bf.types[d.type]==="Polygon";for(const j of m){if(j.length===0||vr(j))continue;const U=iu(j,E,C);this._generateSideFaces(U,x)}if(!C)return;const k=Ug(m,r,E,!1),P=this.layoutVertexArray;P0(((j,U)=>{Ho(P,j,U,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(e,r){let d=0;for(let m=1;m<e.length;m++){const b=e[m],x=e[m-1];if(ru(b,x))continue;r.segment.vertexLength+4>It.MAX_VERTEX_ARRAY_LENGTH&&(r.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const E=b.sub(x)._perp()._unit(),C=x.dist(b);d+C>32768&&(d=0),Ho(this.layoutVertexArray,b.x,b.y,E.x,E.y,0,0,d),Ho(this.layoutVertexArray,b.x,b.y,E.x,E.y,0,1,d),d+=C,Ho(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,d),Ho(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,d);const k=r.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),r.segment.vertexLength+=4,r.segment.primitiveLength+=2}}}function z0(s,e){for(let r=0;r<e.length;r++){const d=e[r];r===e.length-1&&e[0].x===d.x&&e[0].y===d.y||(s.x+=d.x,s.y+=d.y,s.sampleCount++)}}function ru(s,e){return s.x===e.x&&(s.x<0||s.x>gt)||s.y===e.y&&(s.y<0||s.y>gt)}function vr(s){return s.every((e=>e.x<0))||s.every((e=>e.x>gt))||s.every((e=>e.y<0))||s.every((e=>e.y>gt))}let au;Pt("FillExtrusionBucket",Ku,{omit:["layers","features"]});var wd={get paint(){return au=au||new ur({"fill-extrusion-opacity":new jt($e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gt($e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jt($e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jt($e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ss($e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gt($e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gt($e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jt($e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class F0 extends Hi{constructor(e,r){super(e,wd,r)}createBucket(e){return new Ku(e)}queryRadius(){return Zp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:d,geometry:m,transform:b,pixelsToTileUnits:x,pixelPosMatrix:E}){const C=Ig(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-b.bearingInRadians,x),k=this.paint.get("fill-extrusion-height").evaluate(r,d),P=this.paint.get("fill-extrusion-base").evaluate(r,d),j=(function(G,W){const X=[];for(const J of G){const le=[J.x,J.y,0,1];Ht(le,le,W),X.push(new A(le[0]/le[3],le[1]/le[3]))}return X})(C,E),U=(function(G,W,X,J){const le=[],ve=[],ce=J[8]*W,de=J[9]*W,xe=J[10]*W,Me=J[11]*W,qe=J[8]*X,ct=J[9]*X,rt=J[10]*X,mt=J[11]*X;for(const Rt of G){const _t=[],ot=[];for(const Je of Rt){const Bt=Je.x,zt=Je.y,Vt=J[0]*Bt+J[4]*zt+J[12],Ot=J[1]*Bt+J[5]*zt+J[13],Qt=J[2]*Bt+J[6]*zt+J[14],Wn=J[3]*Bt+J[7]*zt+J[15],On=Qt+xe,ar=Wn+Me,Va=Vt+qe,Qr=Ot+ct,sr=Qt+rt,Xi=Wn+mt,hi=new A((Vt+ce)/ar,(Ot+de)/ar);hi.z=On/ar,_t.push(hi);const br=new A(Va/Xi,Qr/Xi);br.z=sr/Xi,ot.push(br)}le.push(_t),ve.push(ot)}return[le,ve]})(m,P,k,E);return(function(G,W,X){let J=1/0;Cg(X,W)&&(J=Td(X,W[0]));for(let le=0;le<W.length;le++){const ve=W[le],ce=G[le];for(let de=0;de<ve.length-1;de++){const xe=ve[de],Me=[xe,ve[de+1],ce[de+1],ce[de],xe];_d(X,Me)&&(J=Math.min(J,Td(X,Me)))}}return J!==1/0&&J})(U[0],U[1],j)}}function Ma(s,e){return s.x*e.x+s.y*e.y}function Td(s,e){if(s.length===1){let r=0;const d=e[r++];let m;for(;!m||d.equals(m);)if(m=e[r++],!m)return 1/0;for(;r<e.length;r++){const b=e[r],x=s[0],E=m.sub(d),C=b.sub(d),k=x.sub(d),P=Ma(E,E),j=Ma(E,C),U=Ma(C,C),G=Ma(k,E),W=Ma(k,C),X=P*U-j*j,J=(U*G-j*W)/X,le=(P*W-j*G)/X,ve=d.z*(1-J-le)+m.z*J+b.z*le;if(isFinite(ve))return ve}return 1/0}{let r=1/0;for(const d of e)r=Math.min(r,d.z);return r}}const am=Gi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Is}=am,j0=Gi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:$g}=j0,sb=Math.cos(Math.PI/180*37.5),sm=Math.pow(2,14)/.5;class Vf{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((r=>{this.gradients[r.id]={}})),this.layoutVertexArray=new Ae,this.layoutVertexArray2=new ye,this.indexArray=new Xe,this.programConfigurations=new oc(e.layers,e.zoom),this.segments=new It,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(e,r,d){this.hasDependencies=Js("line",this.layers,r)||this.hasLineDasharray(this.layers);const m=this.layers[0].layout.get("line-sort-key"),b=!m.isConstant(),x=[];for(const{feature:E,id:C,index:k,sourceLayerIndex:P}of e){const j=this.layers[0]._featureFilter.needGeometry,U=Ks(E,j);if(!this.layers[0]._featureFilter.filter(new ni(this.zoom),U,d))continue;const G=b?m.evaluate(U,{},d):void 0,W={id:C,properties:E.properties,type:E.type,sourceLayerIndex:P,index:k,geometry:j?U.geometry:Sl(E),patterns:{},dashes:{},sortKey:G};x.push(W)}b&&x.sort(((E,C)=>E.sortKey-C.sortKey));for(const E of x){const{geometry:C,index:k,sourceLayerIndex:P}=E;this.hasDependencies?(Js("line",this.layers,r)?Fg("line",this.layers,E,{zoom:this.zoom},r):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,E,this.zoom,r),this.patternFeatures.push(E)):this.addFeature(E,C,k,d,{},{},r.subdivisionGranularity),r.featureIndex.insert(e[k].feature,C,k,P,this.index)}}update(e,r,d,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:d,dashPositions:m})}addFeatures(e,r,d,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,r,d,m,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,$g)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Is),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,d,m,b,x,E){const C=this.layers[0].layout,k=C.get("line-join").evaluate(e,{}),P=C.get("line-cap"),j=C.get("line-miter-limit"),U=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const G of r)this.addLine(G,e,k,P,j,U,m,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,d,{imagePositions:b,dashPositions:x,canonical:m})}addLine(e,r,d,m,b,x,E,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=iu(e,E?C.line.getGranularityForZoomLevel(E.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ce=0;ce<e.length-1;ce++)this.totalDistance+=e[ce].dist(e[ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=Bf.types[r.type]==="Polygon";let P=e.length;for(;P>=2&&e[P-1].equals(e[P-2]);)P--;let j=0;for(;j<P-1&&e[j].equals(e[j+1]);)j++;if(P<(k?3:2))return;d==="bevel"&&(b=1.05);const U=this.overscaling<=16?122880/(512*this.overscaling):0,G=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let W,X,J,le,ve;this.e1=this.e2=-1,k&&(W=e[P-2],ve=e[j].sub(W)._unit()._perp());for(let ce=j;ce<P;ce++){if(J=ce===P-1?k?e[j+1]:void 0:e[ce+1],J&&e[ce].equals(J))continue;ve&&(le=ve),W&&(X=W),W=e[ce],ve=J?J.sub(W)._unit()._perp():le,le=le||ve;let de=le.add(ve);de.x===0&&de.y===0||de._unit();const xe=le.x*ve.x+le.y*ve.y,Me=de.x*ve.x+de.y*ve.y,qe=Me!==0?1/Me:1/0,ct=2*Math.sqrt(2-2*Me),rt=Me<sb&&X&&J,mt=le.x*ve.y-le.y*ve.x>0;if(rt&&ce>j){const ot=W.dist(X);if(ot>2*U){const Je=W.sub(W.sub(X)._mult(U/ot)._round());this.updateDistance(X,Je),this.addCurrentVertex(Je,le,0,0,G),X=Je}}const Rt=X&&J;let _t=Rt?d:k?"butt":m;if(Rt&&_t==="round"&&(qe<x?_t="miter":qe<=2&&(_t="fakeround")),_t==="miter"&&qe>b&&(_t="bevel"),_t==="bevel"&&(qe>2&&(_t="flipbevel"),qe<b&&(_t="miter")),X&&this.updateDistance(X,W),_t==="miter")de._mult(qe),this.addCurrentVertex(W,de,0,0,G);else if(_t==="flipbevel"){if(qe>100)de=ve.mult(-1);else{const ot=qe*le.add(ve).mag()/le.sub(ve).mag();de._perp()._mult(ot*(mt?-1:1))}this.addCurrentVertex(W,de,0,0,G),this.addCurrentVertex(W,de.mult(-1),0,0,G)}else if(_t==="bevel"||_t==="fakeround"){const ot=-Math.sqrt(qe*qe-1),Je=mt?ot:0,Bt=mt?0:ot;if(X&&this.addCurrentVertex(W,le,Je,Bt,G),_t==="fakeround"){const zt=Math.round(180*ct/Math.PI/20);for(let Vt=1;Vt<zt;Vt++){let Ot=Vt/zt;if(Ot!==.5){const Wn=Ot-.5;Ot+=Ot*Wn*(Ot-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Wn*Wn+(.848013+xe*(.215638*xe-1.06021)))}const Qt=ve.sub(le)._mult(Ot)._add(le)._unit()._mult(mt?-1:1);this.addHalfVertex(W,Qt.x,Qt.y,!1,mt,0,G)}}J&&this.addCurrentVertex(W,ve,-Je,-Bt,G)}else if(_t==="butt")this.addCurrentVertex(W,de,0,0,G);else if(_t==="square"){const ot=X?1:-1;this.addCurrentVertex(W,de,ot,ot,G)}else _t==="round"&&(X&&(this.addCurrentVertex(W,le,0,0,G),this.addCurrentVertex(W,le,1,1,G,!0)),J&&(this.addCurrentVertex(W,ve,-1,-1,G,!0),this.addCurrentVertex(W,ve,0,0,G)));if(rt&&ce<P-1){const ot=W.dist(J);if(ot>2*U){const Je=W.add(J.sub(W)._mult(U/ot)._round());this.updateDistance(W,Je),this.addCurrentVertex(Je,ve,0,0,G),W=Je}}}}addCurrentVertex(e,r,d,m,b,x=!1){const E=r.y*m-r.x,C=-r.y-r.x*m;this.addHalfVertex(e,r.x+r.y*d,r.y-r.x*d,x,!1,d,b),this.addHalfVertex(e,E,C,x,!0,-m,b),this.distance>sm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,r,d,m,b,x))}addHalfVertex({x:e,y:r},d,m,b,x,E,C){const k=.5*(this.lineClips?this.scaledDistance*(sm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(b?1:0),(r<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(E===0?0:E<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const P=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,P,this.e2),C.primitiveLength++),x?this.e2=P:this.e1=P}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}hasLineDasharray(e){for(const r of e){const d=r.paint.get("line-dasharray");if(d&&!d.isConstant())return!0}return!1}addLineDashDependencies(e,r,d,m){for(const b of e){const x=b.paint.get("line-dasharray");if(!x||x.value.kind==="constant")continue;const E=b.layout.get("line-cap")==="round",C={dasharray:x.value.evaluate({zoom:d-1},r,{}),round:E},k={dasharray:x.value.evaluate({zoom:d},r,{}),round:E},P={dasharray:x.value.evaluate({zoom:d+1},r,{}),round:E},j=`${C.dasharray.join(",")},${C.round}`,U=`${k.dasharray.join(",")},${k.round}`,G=`${P.dasharray.join(",")},${P.round}`;m.dashDependencies[j]=C,m.dashDependencies[U]=k,m.dashDependencies[G]=P,r.dashes[b.id]={min:j,mid:U,max:G}}}}let su,Hr;Pt("LineBucket",Vf,{omit:["layers","patternFeatures"]});var ou={get paint(){return Hr=Hr||new ur({"line-opacity":new Gt($e.paint_line["line-opacity"]),"line-color":new Gt($e.paint_line["line-color"]),"line-translate":new jt($e.paint_line["line-translate"]),"line-translate-anchor":new jt($e.paint_line["line-translate-anchor"]),"line-width":new Gt($e.paint_line["line-width"]),"line-gap-width":new Gt($e.paint_line["line-gap-width"]),"line-offset":new Gt($e.paint_line["line-offset"]),"line-blur":new Gt($e.paint_line["line-blur"]),"line-dasharray":new Ss($e.paint_line["line-dasharray"]),"line-pattern":new Ss($e.paint_line["line-pattern"]),"line-gradient":new hd($e.paint_line["line-gradient"])})},get layout(){return su=su||new ur({"line-cap":new jt($e.layout_line["line-cap"]),"line-join":new Gt($e.layout_line["line-join"]),"line-miter-limit":new jt($e.layout_line["line-miter-limit"]),"line-round-limit":new jt($e.layout_line["line-round-limit"]),"line-sort-key":new Gt($e.layout_line["line-sort-key"])})}};class Uf extends Gt{possiblyEvaluate(e,r){return r=new ni(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(e,r)}evaluate(e,r,d,m){return r=on({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(e,r,d,m)}}let Wo;class B0 extends Hi{constructor(e,r){super(e,ou,r),this.gradientVersion=0,Wo||(Wo=new Uf(ou.paint.properties["line-width"].specification),Wo.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){const r=this.gradientExpression();this.stepInterpolant=!!(function(d){return d._styleExpression!==void 0})(r)&&r._styleExpression.expression instanceof Yl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,r){super.recalculate(e,r),this.paint._values["line-floorwidth"]=Wo.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Vf(e)}queryRadius(e){const r=e,d=Zg(Jc("line-width",this,r),Jc("line-gap-width",this,r)),m=Jc("line-offset",this,r);return d/2+Math.abs(m)+Zp(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:d,geometry:m,transform:b,pixelsToTileUnits:x}){const E=Ig(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-b.bearingInRadians,x),C=x/2*Zg(this.paint.get("line-width").evaluate(r,d),this.paint.get("line-gap-width").evaluate(r,d)),k=this.paint.get("line-offset").evaluate(r,d);return k&&(m=(function(P,j){const U=[];for(let G=0;G<P.length;G++){const W=Rg(P[G]),X=[];for(let J=0;J<W.length;J++){const le=W[J],ve=W[J-1],ce=W[J+1],de=J===0?new A(0,0):le.sub(ve)._unit()._perp(),xe=J===W.length-1?new A(0,0):ce.sub(le)._unit()._perp(),Me=de._add(xe)._unit(),qe=Me.x*xe.x+Me.y*xe.y;qe!==0&&Me._mult(1/qe),X.push(Me._mult(j)._add(le))}U.push(X)}return U})(m,k*x)),(function(P,j,U){for(let G=0;G<j.length;G++){const W=j[G];if(P.length>=3){for(let X=0;X<W.length;X++)if(cc(P,W[X]))return!0}if(Zr(P,W,U))return!0}return!1})(E,m,C)}isTileClipped(){return!0}}function Zg(s,e){return e>0?e+2*s:s}const ob=Gi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),om=Gi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Gi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const V0=Gi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Gi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Rs=Gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),lb=Gi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ks(s,e,r){return s.sections.forEach((d=>{d.text=(function(m,b,x){const E=b.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?m=m.toLocaleUpperCase():E==="lowercase"&&(m=m.toLocaleLowerCase()),Ts.applyArabicShaping&&(m=Ts.applyArabicShaping(m)),m})(d.text,e,r)})),s}Gi([{name:"triangle",components:3,type:"Uint16"}]),Gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Gi([{type:"Float32",name:"offsetX"}]),Gi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Gi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Nr=24;const Gf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},S1={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Ju={40:!0};function lm(s,e,r,d,m,b){if("fontStack"in e){const x=r[e.fontStack],E=x&&x[s];return E?E.metrics.advance*e.scale+m:0}{const x=d[e.imageName];return x?x.displaySize[0]*e.scale*Nr/b+m:0}}function qg(s,e,r,d){const m=Math.pow(s-e,2);return d?s<e?m/2:2*m:m+Math.abs(r)*r}function $f(s,e,r){let d=0;return s===10&&(d-=1e4),r&&(d+=150),s!==40&&s!==65288||(d+=50),e!==41&&e!==65289||(d+=50),d}function U0(s,e,r,d,m,b){let x=null,E=qg(e,r,m,b);for(const C of d){const k=qg(e-C.x,r,m,b)+C.badness;k<=E&&(x=C,E=k)}return{index:s,x:e,priorBreak:x,badness:E}}function G0(s){return s?G0(s.priorBreak).concat(s.index):[]}class Sd{constructor(e="",r=[],d=[]){this.text=e,this.sections=r,this.sectionIndex=d,this.imageSectionID=null}static fromFeature(e,r){const d=new Sd;for(let m=0;m<e.sections.length;m++){const b=e.sections[m];b.image?d.addImageSection(b):d.addTextSection(b,r)}return d}length(){return[...this.text].length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}verticalizePunctuation(){this.text=(function(e){let r="",d={premature:!0,value:void 0};const m=e[Symbol.iterator]();let b=m.next();const x=e[Symbol.iterator]();x.next();let E=x.next();for(;!b.done;)r+=!E.done&&Go(E.value.codePointAt(0))&&!Gf[E.value]||!d.premature&&Go(d.value.codePointAt(0))&&!Gf[d.value]||!Gf[b.value]?b.value:Gf[b.value],d={value:b.value,premature:!1},b=m.next(),E=x.next();return r})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const e=this.text.match(/^\s*/),r=e?e[0].length:0,d=this.text.match(/\S\s*$/),m=d?d[0].length-1:0;this.text=this.text.substring(r,this.text.length-m),this.sectionIndex=this.sectionIndex.slice(r,this.sectionIndex.length-m)}substring(e,r){const d=[...this.text].slice(e,r).join(""),m=this.sectionIndex.slice(e,r);return new Sd(d,this.sections,m)}toCodeUnitIndex(e){return[...this.text].slice(0,e).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,r)=>Math.max(e,this.sections[r].scale)),0)}getMaxImageSize(e){let r=0,d=0;for(let m=0;m<this.length();m++){const b=this.getSection(m);if("imageName"in b){const x=e[b.imageName];if(!x)continue;const E=x.displaySize;r=Math.max(r,E[0]),d=Math.max(d,E[1])}}return{maxImageWidth:r,maxImageHeight:d}}addTextSection(e,r){this.text+=e.text,this.sections.push({scale:e.scale||1,verticalAlign:e.verticalAlign||"bottom",fontStack:e.fontStack||r});const d=this.sections.length-1;this.sectionIndex.push(...[...e.text].map((()=>d)))}addImageSection(e){const r=e.image?e.image.name:"";if(r.length===0)return void Nn("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push({scale:1,verticalAlign:e.verticalAlign||"bottom",imageName:r}),this.sectionIndex.push(this.sections.length-1)):Nn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(e,r,d,m,b){const x=[],E=this.determineAverageLineWidth(e,r,d,m,b),C=this.hasZeroWidthSpaces();let k=0,P=0;const j=this.text[Symbol.iterator]();let U=j.next();const G=this.text[Symbol.iterator]();G.next();let W=G.next();const X=this.text[Symbol.iterator]();X.next(),X.next();let J=X.next();for(;!U.done;){const le=this.getSection(P),ve=U.value.codePointAt(0);if(sd(ve)||(k+=lm(ve,le,d,m,e,b)),!W.done){const ce=Bo(ve),de=W.value.codePointAt(0);(S1[ve]||ce||"imageName"in le||!J.done&&Ju[de])&&x.push(U0(P+1,k,E,x,$f(ve,de,ce&&C),!1))}P++,U=j.next(),W=G.next(),J=X.next()}return G0(U0(this.length(),k,E,x,0,!0))}determineAverageLineWidth(e,r,d,m,b){let x=0,E=0;for(const C of this.text){const k=this.getSection(E);x+=lm(C.codePointAt(0),k,d,m,e,b),E++}return x/Math.max(1,Math.ceil(x/r))}}const Yg=4294967296,cm=1/Yg,Hg=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Wg{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,r,d=this.length){for(;this.pos<d;){const m=this.readVarint(),b=m>>3,x=this.pos;this.type=7&m,e(b,r,this),this.pos===x&&this.skip(m)}return r}readMessage(e,r){return this.readFields(e,r,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Yg;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Yg;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const r=this.buf;let d,m;return m=r[this.pos++],d=127&m,m<128?d:(m=r[this.pos++],d|=(127&m)<<7,m<128?d:(m=r[this.pos++],d|=(127&m)<<14,m<128?d:(m=r[this.pos++],d|=(127&m)<<21,m<128?d:(m=r[this.pos],d|=(15&m)<<28,(function(b,x,E){const C=E.buf;let k,P;if(P=C[E.pos++],k=(112&P)>>4,P<128||(P=C[E.pos++],k|=(127&P)<<3,P<128)||(P=C[E.pos++],k|=(127&P)<<10,P<128)||(P=C[E.pos++],k|=(127&P)<<17,P<128)||(P=C[E.pos++],k|=(127&P)<<24,P<128)||(P=C[E.pos++],k|=(1&P)<<31,P<128))return Zf(b,k,x);throw new Error("Expected varint not more than 10 bytes")})(d,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=12&&Hg?Hg.decode(this.buf.subarray(r,e)):(function(d,m,b){let x="",E=m;for(;E<b;){const C=d[E];let k,P,j,U=null,G=C>239?4:C>223?3:C>191?2:1;if(E+G>b)break;G===1?C<128&&(U=C):G===2?(k=d[E+1],(192&k)==128&&(U=(31&C)<<6|63&k,U<=127&&(U=null))):G===3?(k=d[E+1],P=d[E+2],(192&k)==128&&(192&P)==128&&(U=(15&C)<<12|(63&k)<<6|63&P,(U<=2047||U>=55296&&U<=57343)&&(U=null))):G===4&&(k=d[E+1],P=d[E+2],j=d[E+3],(192&k)==128&&(192&P)==128&&(192&j)==128&&(U=(15&C)<<18|(63&k)<<12|(63&P)<<6|63&j,(U<=65535||U>=1114112)&&(U=null))),U===null?(U=65533,G=1):U>65535&&(U-=65536,x+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),x+=String.fromCharCode(U),E+=G}return x})(this.buf,r,e)}readBytes(){const e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r}readPackedVarint(e=[],r){const d=this.readPackedEnd();for(;this.pos<d;)e.push(this.readVarint(r));return e}readPackedSVarint(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){const r=7&e;if(r===0)for(;this.buf[this.pos++]>127;);else if(r===2)this.pos=this.readVarint()+this.pos;else if(r===5)this.pos+=4;else{if(r!==1)throw new Error(`Unimplemented type: ${r}`);this.pos+=8}}writeTag(e,r){this.writeVarint(e<<3|r)}realloc(e){let r=this.length||16;for(;r<this.pos+e;)r*=2;if(r!==this.length){const d=new Uint8Array(r);d.set(this.buf),this.buf=d,this.dataView=new DataView(d.buffer),this.length=r}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*cm),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*cm),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?(function(r,d){let m,b;if(r>=0?(m=r%4294967296|0,b=r/4294967296|0):(m=~(-r%4294967296),b=~(-r/4294967296),4294967295^m?m=m+1|0:(m=0,b=b+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(x,E,C){C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,C.buf[C.pos]=127&(x>>>=7)})(m,0,d),(function(x,E){const C=(7&x)<<4;E.buf[E.pos++]|=C|((x>>>=3)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x)))))})(b,d)})(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const r=this.pos;this.pos=(function(m,b,x){for(let E,C,k=0;k<b.length;k++){if(E=b.charCodeAt(k),E>55295&&E<57344){if(!C){E>56319||k+1===b.length?(m[x++]=239,m[x++]=191,m[x++]=189):C=E;continue}if(E<56320){m[x++]=239,m[x++]=191,m[x++]=189,C=E;continue}E=C-55296<<10|E-56320|65536,C=null}else C&&(m[x++]=239,m[x++]=191,m[x++]=189,C=null);E<128?m[x++]=E:(E<2048?m[x++]=E>>6|192:(E<65536?m[x++]=E>>12|224:(m[x++]=E>>18|240,m[x++]=E>>12&63|128),m[x++]=E>>6&63|128),m[x++]=63&E|128)}return x})(this.buf,e,this.pos);const d=this.pos-r;d>=128&&cb(r,d,this),this.pos=r-1,this.writeVarint(d),this.pos+=d}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const r=e.length;this.writeVarint(r),this.realloc(r);for(let d=0;d<r;d++)this.buf[this.pos++]=e[d]}writeRawMessage(e,r){this.pos++;const d=this.pos;e(r,this);const m=this.pos-d;m>=128&&cb(d,m,this),this.pos=d-1,this.writeVarint(m),this.pos+=m}writeMessage(e,r,d){this.writeTag(e,2),this.writeRawMessage(r,d)}writePackedVarint(e,r){r.length&&this.writeMessage(e,ub,r)}writePackedSVarint(e,r){r.length&&this.writeMessage(e,hb,r)}writePackedBoolean(e,r){r.length&&this.writeMessage(e,db,r)}writePackedFloat(e,r){r.length&&this.writeMessage(e,qf,r)}writePackedDouble(e,r){r.length&&this.writeMessage(e,Xg,r)}writePackedFixed32(e,r){r.length&&this.writeMessage(e,fb,r)}writePackedSFixed32(e,r){r.length&&this.writeMessage(e,pb,r)}writePackedFixed64(e,r){r.length&&this.writeMessage(e,mb,r)}writePackedSFixed64(e,r){r.length&&this.writeMessage(e,gb,r)}writeBytesField(e,r){this.writeTag(e,2),this.writeBytes(r)}writeFixed32Field(e,r){this.writeTag(e,5),this.writeFixed32(r)}writeSFixed32Field(e,r){this.writeTag(e,5),this.writeSFixed32(r)}writeFixed64Field(e,r){this.writeTag(e,1),this.writeFixed64(r)}writeSFixed64Field(e,r){this.writeTag(e,1),this.writeSFixed64(r)}writeVarintField(e,r){this.writeTag(e,0),this.writeVarint(r)}writeSVarintField(e,r){this.writeTag(e,0),this.writeSVarint(r)}writeStringField(e,r){this.writeTag(e,2),this.writeString(r)}writeFloatField(e,r){this.writeTag(e,5),this.writeFloat(r)}writeDoubleField(e,r){this.writeTag(e,1),this.writeDouble(r)}writeBooleanField(e,r){this.writeVarintField(e,+r)}}function Zf(s,e,r){return r?4294967296*e+(s>>>0):4294967296*(e>>>0)+(s>>>0)}function cb(s,e,r){const d=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(d);for(let m=r.pos-1;m>=s;m--)r.buf[m+d]=r.buf[m]}function ub(s,e){for(let r=0;r<s.length;r++)e.writeVarint(s[r])}function hb(s,e){for(let r=0;r<s.length;r++)e.writeSVarint(s[r])}function qf(s,e){for(let r=0;r<s.length;r++)e.writeFloat(s[r])}function Xg(s,e){for(let r=0;r<s.length;r++)e.writeDouble(s[r])}function db(s,e){for(let r=0;r<s.length;r++)e.writeBoolean(s[r])}function fb(s,e){for(let r=0;r<s.length;r++)e.writeFixed32(s[r])}function pb(s,e){for(let r=0;r<s.length;r++)e.writeSFixed32(s[r])}function mb(s,e){for(let r=0;r<s.length;r++)e.writeFixed64(s[r])}function gb(s,e){for(let r=0;r<s.length;r++)e.writeSFixed64(s[r])}function yb(s,e,r){s===1&&r.readMessage(Qg,e)}function Qg(s,e,r){if(s===3){const{id:d,bitmap:m,width:b,height:x,left:E,top:C,advance:k}=r.readMessage(_b,{});e.push({id:d,bitmap:new Hp({width:b+6,height:x+6},m),metrics:{width:b,height:x,left:E,top:C,advance:k}})}}function _b(s,e,r){s===1?e.id=r.readVarint():s===2?e.bitmap=r.readBytes():s===3?e.width=r.readVarint():s===4?e.height=r.readVarint():s===5?e.left=r.readSVarint():s===6?e.top=r.readSVarint():s===7&&(e.advance=r.readVarint())}function $0(s){let e=0,r=0;for(const x of s)e+=x.w*x.h,r=Math.max(r,x.w);s.sort(((x,E)=>E.h-x.h));const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let m=0,b=0;for(const x of s)for(let E=d.length-1;E>=0;E--){const C=d[E];if(!(x.w>C.w||x.h>C.h)){if(x.x=C.x,x.y=C.y,b=Math.max(b,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===C.w&&x.h===C.h){const k=d.pop();k&&E<d.length&&(d[E]=k)}else x.h===C.h?(C.x+=x.w,C.w-=x.w):x.w===C.w?(C.y+=x.h,C.h-=x.h):(d.push({x:C.x+x.w,y:C.y,w:C.w-x.w,h:x.h}),C.y+=x.h,C.h-=x.h);break}}return{w:m,h:b,fill:e/(m*b)||0}}class bi{constructor(e,{pixelRatio:r,version:d,stretchX:m,stretchY:b,content:x,textFitWidth:E,textFitHeight:C}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=m,this.stretchY=b,this.content=x,this.version=d,this.textFitWidth=E,this.textFitHeight=C}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Kg{constructor(e,r){const d={},m={};this.haveRenderCallbacks=[];const b=[];this.addImages(e,d,b),this.addImages(r,m,b);const{w:x,h:E}=$0(b),C=new za({width:x||1,height:E||1});for(const k in e){const P=e[k],j=d[k].paddedRect;za.copy(P.data,C,{x:0,y:0},{x:j.x+1,y:j.y+1},P.data)}for(const k in r){const P=r[k],j=m[k].paddedRect,U=j.x+1,G=j.y+1,W=P.data.width,X=P.data.height;za.copy(P.data,C,{x:0,y:0},{x:U,y:G},P.data),za.copy(P.data,C,{x:0,y:X-1},{x:U,y:G-1},{width:W,height:1}),za.copy(P.data,C,{x:0,y:0},{x:U,y:G+X},{width:W,height:1}),za.copy(P.data,C,{x:W-1,y:0},{x:U-1,y:G},{width:1,height:X}),za.copy(P.data,C,{x:0,y:0},{x:U+W,y:G},{width:1,height:X})}this.image=C,this.iconPositions=d,this.patternPositions=m}addImages(e,r,d){for(const m in e){const b=e[m],x={x:0,y:0,w:b.data.width+2,h:b.data.height+2};d.push(x),r[m]=new bi(x,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(e,r){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in e.updatedImages)this.patchUpdatedImage(this.iconPositions[d],e.getImage(d),r),this.patchUpdatedImage(this.patternPositions[d],e.getImage(d),r)}patchUpdatedImage(e,r,d){if(!e||!r||e.version===r.version)return;e.version=r.version;const[m,b]=e.tl;d.update(r.data,void 0,{x:m,y:b})}}var eh;function um(s,e,r,d,m,b,x,E,C,k,P,j,U,G,W){const X=Sd.fromFeature(s,m);let J;j===_.az.vertical&&X.verticalizePunctuation();let le=X.determineLineBreaks(k,b,e,d,G);const{processBidirectionalText:ve,processStyledBidirectionalText:ce}=Ts;if(ve&&X.sections.length===1){J=[],le=le.map((qe=>X.toCodeUnitIndex(qe)));const Me=ve(X.toString(),le);for(const qe of Me){const ct=[...qe].map((()=>0));J.push(new Sd(qe,X.sections,ct))}}else if(ce){J=[],le=le.map((rt=>X.toCodeUnitIndex(rt)));let Me=0;const qe=[];for(const rt of X.text)qe.push(...Array(rt.length).fill(X.sectionIndex[Me])),Me++;const ct=ce(X.text,qe,le);for(const rt of ct){const mt=[];let Rt="";for(const _t of rt[0])mt.push(rt[1][Rt.length]),Rt+=_t;J.push(new Sd(rt[0],X.sections,mt))}}else J=(function(Me,qe){const ct=[];let rt=0;for(const mt of qe)ct.push(Me.substring(rt,mt)),rt=mt;return rt<Me.length()&&ct.push(Me.substring(rt,Me.length())),ct})(X,le);const de=[],xe={positionedLines:de,text:X.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:j,iconsInText:!1,verticalizable:!1};return(function(Me,qe,ct,rt,mt,Rt,_t,ot,Je,Bt,zt,Vt){let Ot=0,Qt=0,Wn=0,On=0;const ar=ot==="right"?1:ot==="left"?0:.5,Va=Nr/Vt;let Qr=0;for(const hi of mt){hi.trim();const br=hi.getMaxScale(),Cr={positionedGlyphs:[],lineOffset:0};Me.positionedLines[Qr]=Cr;const qi=Cr.positionedGlyphs;let no=0;if(!hi.length()){Qt+=Rt,++Qr;continue}const Ua=E1(rt,hi,Va);let io=0;for(const ga of hi.text){const dr=hi.getSection(io),Kr=ga.codePointAt(0),xr=Jg(Je,zt,Kr),ya={glyph:Kr,imageName:null,x:Ot,y:Qt+-17,vertical:xr,scale:1,fontStack:"",sectionIndex:hi.getSectionIndex(io),metrics:null,rect:null};let Cd;if("fontStack"in dr){if(Cd=Yf(dr,Kr,xr,Ua,qe,ct),!Cd)continue;ya.fontStack=dr.fontStack}else{if(Me.iconsInText=!0,dr.scale*=Va,Cd=q0(dr,xr,br,Ua,rt),!Cd)continue;no=Math.max(no,Cd.imageOffset),ya.imageName=dr.imageName}const{rect:fu,metrics:A_,baselineOffset:ip}=Cd;ya.y+=ip,ya.scale=dr.scale,ya.metrics=A_,ya.rect=fu,qi.push(ya),xr?(Me.verticalizable=!0,Ot+=("imageName"in dr?A_.advance:Nr)*dr.scale+Bt):Ot+=A_.advance*dr.scale+Bt,io++}qi.length!==0&&(Wn=Math.max(Ot-Bt,Wn),ey(qi,0,qi.length-1,ar)),Ot=0,Cr.lineOffset=Math.max(no,(br-1)*Nr);const mc=Rt*br+no;Qt+=mc,On=Math.max(mc,On),++Qr}const{horizontalAlign:sr,verticalAlign:Xi}=Z0(_t);(function(hi,br,Cr,qi,no,Ua,io,mc,ga){const dr=(br-Cr)*no;let Kr=0;Kr=Ua!==io?-mc*qi- -17:-qi*ga*io+.5*io;for(const xr of hi)for(const ya of xr.positionedGlyphs)ya.x+=dr,ya.y+=Kr})(Me.positionedLines,ar,sr,Xi,Wn,On,Rt,Qt,mt.length),Me.top+=-Xi*Qt,Me.bottom=Me.top+Qt,Me.left+=-sr*Wn,Me.right=Me.left+Wn})(xe,e,r,d,J,x,E,C,j,k,U,W),!(function(Me){for(const qe of Me)if(qe.positionedGlyphs.length!==0)return!1;return!0})(de)&&xe}function Z0(s){let e=.5,r=.5;switch(s){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function E1(s,e,r){const d=e.getMaxScale()*Nr,{maxImageWidth:m,maxImageHeight:b}=e.getMaxImageSize(s),x=Math.max(d,b*r);return{verticalLineContentWidth:Math.max(d,m*r),horizontalLineContentHeight:x}}function vb(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function Jg(s,e,r){return!(s===_.az.horizontal||!e&&!Zc(r)||e&&(sd(r)||(d=r,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function Yf(s,e,r,d,m,b){const x=b[s.fontStack],E=(function(k,P,j,U){if(k&&k.rect)return k;const G=P[j.fontStack],W=G&&G[U];return W?{rect:null,metrics:W.metrics}:null})(x&&x[e],m,s,e);if(E===null)return null;let C;if(r)C=d.verticalLineContentWidth-s.scale*Nr;else{const k=vb(s.verticalAlign);C=(d.horizontalLineContentHeight-s.scale*Nr)*k}return{rect:E.rect,metrics:E.metrics,baselineOffset:C}}function q0(s,e,r,d,m){const b=m[s.imageName];if(!b)return null;const x=b.paddedRect,E=b.displaySize,C={width:E[0],height:E[1],left:1,top:-3,advance:e?E[1]:E[0]};let k;if(e)k=d.verticalLineContentWidth-E[1]*s.scale;else{const P=vb(s.verticalAlign);k=(d.horizontalLineContentHeight-E[1]*s.scale)*P}return{rect:x,metrics:C,baselineOffset:k,imageOffset:(e?E[0]:E[1])*s.scale-Nr*r}}function ey(s,e,r,d){if(d===0)return;const m=s[r],b=(s[r].x+m.metrics.advance*m.scale)*d;for(let x=e;x<=r;x++)s[x].x-=b}function Y0(s,e,r){const{horizontalAlign:d,verticalAlign:m}=Z0(r),b=e[0]-s.displaySize[0]*d,x=e[1]-s.displaySize[1]*m;return{image:s,top:x,bottom:x+s.displaySize[1],left:b,right:b+s.displaySize[0]}}function lu(s){var e,r;let d=s.left,m=s.top,b=s.right-d,x=s.bottom-m;const E=(e=s.image.textFitWidth)!==null&&e!==void 0?e:"stretchOrShrink",C=(r=s.image.textFitHeight)!==null&&r!==void 0?r:"stretchOrShrink",k=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(C==="proportional"){if(E==="stretchOnly"&&b/x<k||E==="proportional"){const P=Math.ceil(x*k);d*=P/b,b=P}}else if(E==="proportional"&&C==="stretchOnly"&&k!==0&&b/x>k){const P=Math.ceil(b/k);m*=P/x,x=P}return{x1:d,y1:m,x2:d+b,y2:m+x}}function Ml(s,e,r,d,m,b){const x=s.image;let E;if(x.content){const J=x.content,le=x.pixelRatio||1;E=[J[0]/le,J[1]/le,x.displaySize[0]-J[2]/le,x.displaySize[1]-J[3]/le]}const C=e.left*b,k=e.right*b;let P,j,U,G;r==="width"||r==="both"?(G=m[0]+C-d[3],j=m[0]+k+d[1]):(G=m[0]+(C+k-x.displaySize[0])/2,j=G+x.displaySize[0]);const W=e.top*b,X=e.bottom*b;return r==="height"||r==="both"?(P=m[1]+W-d[0],U=m[1]+X+d[2]):(P=m[1]+(W+X-x.displaySize[1])/2,U=P+x.displaySize[1]),{image:x,top:P,right:j,bottom:U,left:G,collisionPadding:E}}Pt("ImagePosition",bi),Pt("ImageAtlas",Kg),_.az=void 0,(eh=_.az||(_.az={}))[eh.none=0]="none",eh[eh.horizontal=1]="horizontal",eh[eh.vertical=2]="vertical",eh[eh.horizontalOnly=3]="horizontalOnly";const eo=128,th=32640;function H0(s,e){const{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new ni(s+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=r;let b=0;for(;b<d.length&&d[b]<=s;)b++;b=Math.max(0,b-1);let x=b;for(;x<d.length&&d[x]<s+1;)x++;x=Math.min(d.length-1,x);const E=d[b],C=d[x];return r.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:C,interpolationType:m}:{kind:"camera",minZoom:E,maxZoom:C,minSize:r.evaluate(new ni(E)),maxSize:r.evaluate(new ni(C)),interpolationType:m}}}function ty(s,e,r){let d="never";const m=s.get(e);return m?d=m:s.get(r)&&(d="always"),d}const bb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hm(s,e,r,d,m,b,x,E,C,k,P,j,U){const G=E?Math.min(th,Math.round(E[0])):0,W=E?Math.min(th,Math.round(E[1])):0;s.emplaceBack(e,r,Math.round(32*d),Math.round(32*m),b,x,(G<<1)+(C?1:0),W,16*k,16*P,256*j,256*U)}function W0(s,e,r){s.emplaceBack(e.x,e.y,r),s.emplaceBack(e.x,e.y,r),s.emplaceBack(e.x,e.y,r),s.emplaceBack(e.x,e.y,r)}function X0(s){for(const e of s.sections)if(_l(e.text))return!0;return!1}class ny{constructor(e){this.layoutVertexArray=new be,this.indexArray=new Xe,this.programConfigurations=e,this.segments=new It,this.dynamicLayoutVertexArray=new je,this.opacityVertexArray=new Qe,this.hasVisibleVertices=!1,this.placedSymbolArray=new M}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,r,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ob.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,om.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,bb,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pt("SymbolBuffers",ny);class iy{constructor(e,r,d){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new d,this.segments=new It,this.collisionVertexArray=new We}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,V0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pt("CollisionBuffers",iy);class Hf{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((x=>x.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=H0(this.zoom,r["text-size"]),this.iconSizeData=H0(this.zoom,r["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),b=d.get("symbol-z-order");this.canOverlap=ty(d,"text-overlap","text-allow-overlap")!=="never"||ty(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map((x=>_.az[x]))),this.stateDependentLayerIds=this.layers.filter((x=>x.isStateDependent())).map((x=>x.id)),this.sourceID=e.sourceID}createArrays(){this.text=new ny(new oc(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new ny(new oc(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new F,this.lineVertexArray=new B,this.symbolInstances=new L,this.textAnchorOffsets=new $}calculateGlyphDependencies(e,r,d,m,b){for(const x of e)if(r[x.codePointAt(0)]=!0,(d||m)&&b){const E=Gf[x];E&&(r[E.codePointAt(0)]=!0)}}populate(e,r,d){const m=this.layers[0],b=m.layout,x=b.get("text-font"),E=b.get("text-field"),C=b.get("icon-image"),k=(E.value.kind!=="constant"||E.value.value instanceof Rr&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),P=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,j=b.get("symbol-sort-key");if(this.features=[],!k&&!P)return;const U=r.iconDependencies,G=r.glyphDependencies,W=r.availableImages,X=new ni(this.zoom);for(const{feature:J,id:le,index:ve,sourceLayerIndex:ce}of e){const de=m._featureFilter.needGeometry,xe=Ks(J,de);if(!m._featureFilter.filter(X,xe,d))continue;let Me,qe;if(de||(xe.geometry=Sl(J)),k){const rt=m.getValueAndResolveTokens("text-field",xe,d,W),mt=Rr.factory(rt),Rt=this.hasRTLText=this.hasRTLText||X0(mt);(!Rt||Ts.getRTLTextPluginStatus()==="unavailable"||Rt&&Ts.isParsed())&&(Me=ks(mt,m,xe))}if(P){const rt=m.getValueAndResolveTokens("icon-image",xe,d,W);qe=rt instanceof xa?rt:xa.fromString(rt)}if(!Me&&!qe)continue;const ct=this.sortFeaturesByKey?j.evaluate(xe,{},d):void 0;if(this.features.push({id:le,text:Me,icon:qe,index:ve,sourceLayerIndex:ce,geometry:xe.geometry,properties:J.properties,type:Bf.types[J.type],sortKey:ct}),qe&&(U[qe.name]=!0),Me){const rt=x.evaluate(xe,{},d).join(","),mt=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_.az.vertical)>=0;for(const Rt of Me.sections)if(Rt.image)U[Rt.image.name]=!0;else{const _t=Vo(Me.toString()),ot=Rt.fontStack||rt,Je=G[ot]=G[ot]||{};this.calculateGlyphDependencies(Rt.text,Je,mt,this.allowVerticalPlacement,_t)}}}b.get("symbol-placement")==="line"&&(this.features=(function(J){const le={},ve={},ce=[];let de=0;function xe(rt){ce.push(J[rt]),de++}function Me(rt,mt,Rt){const _t=ve[rt];return delete ve[rt],ve[mt]=_t,ce[_t].geometry[0].pop(),ce[_t].geometry[0]=ce[_t].geometry[0].concat(Rt[0]),_t}function qe(rt,mt,Rt){const _t=le[mt];return delete le[mt],le[rt]=_t,ce[_t].geometry[0].shift(),ce[_t].geometry[0]=Rt[0].concat(ce[_t].geometry[0]),_t}function ct(rt,mt,Rt){const _t=Rt?mt[0][mt[0].length-1]:mt[0][0];return`${rt}:${_t.x}:${_t.y}`}for(let rt=0;rt<J.length;rt++){const mt=J[rt],Rt=mt.geometry,_t=mt.text?mt.text.toString():null;if(!_t){xe(rt);continue}const ot=ct(_t,Rt),Je=ct(_t,Rt,!0);if(ot in ve&&Je in le&&ve[ot]!==le[Je]){const Bt=qe(ot,Je,Rt),zt=Me(ot,Je,ce[Bt].geometry);delete le[ot],delete ve[Je],ve[ct(_t,ce[zt].geometry,!0)]=zt,ce[Bt].geometry=null}else ot in ve?Me(ot,Je,Rt):Je in le?qe(ot,Je,Rt):(xe(rt),le[ot]=de-1,ve[Je]=de-1)}return ce.filter((rt=>rt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((J,le)=>J.sortKey-le.sortKey))}update(e,r,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,{imagePositions:d}),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,{imagePositions:d}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const d=this.lineVertexArray.length;if(e.segment!==void 0){let m=e.dist(r[e.segment+1]),b=e.dist(r[e.segment]);const x={};for(let E=e.segment+1;E<r.length;E++)x[E]={x:r[E].x,y:r[E].y,tileUnitDistanceFromAnchor:m},E<r.length-1&&(m+=r[E+1].dist(r[E]));for(let E=e.segment||0;E>=0;E--)x[E]={x:r[E].x,y:r[E].y,tileUnitDistanceFromAnchor:b},E>0&&(b+=r[E-1].dist(r[E]));for(let E=0;E<r.length;E++){const C=x[E];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(e,r,d,m,b,x,E,C,k,P,j,U){const G=e.indexArray,W=e.layoutVertexArray,X=e.segments.prepareSegment(4*r.length,W,G,this.canOverlap?x.sortKey:void 0),J=this.glyphOffsetArray.length,le=X.vertexLength,ve=this.allowVerticalPlacement&&E===_.az.vertical?Math.PI/2:0,ce=x.text&&x.text.sections;for(let de=0;de<r.length;de++){const{tl:xe,tr:Me,bl:qe,br:ct,tex:rt,pixelOffsetTL:mt,pixelOffsetBR:Rt,minFontScaleX:_t,minFontScaleY:ot,glyphOffset:Je,isSDF:Bt,sectionIndex:zt}=r[de],Vt=X.vertexLength,Ot=Je[1];hm(W,C.x,C.y,xe.x,Ot+xe.y,rt.x,rt.y,d,Bt,mt.x,mt.y,_t,ot),hm(W,C.x,C.y,Me.x,Ot+Me.y,rt.x+rt.w,rt.y,d,Bt,Rt.x,mt.y,_t,ot),hm(W,C.x,C.y,qe.x,Ot+qe.y,rt.x,rt.y+rt.h,d,Bt,mt.x,Rt.y,_t,ot),hm(W,C.x,C.y,ct.x,Ot+ct.y,rt.x+rt.w,rt.y+rt.h,d,Bt,Rt.x,Rt.y,_t,ot),W0(e.dynamicLayoutVertexArray,C,ve),G.emplaceBack(Vt,Vt+2,Vt+1),G.emplaceBack(Vt+1,Vt+2,Vt+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Je[0]),de!==r.length-1&&zt===r[de+1].sectionIndex||e.programConfigurations.populatePaintArrays(W.length,x,x.index,{imagePositions:{},canonical:U,formattedSection:ce&&ce[zt]})}e.placedSymbolArray.emplaceBack(C.x,C.y,J,this.glyphOffsetArray.length-J,le,k,P,C.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],E,0,!1,0,j)}_addCollisionDebugVertex(e,r,d,m,b,x){return r.emplaceBack(0,0),e.emplaceBack(d.x,d.y,m,b,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(e,r,d,m,b,x,E){const C=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),k=C.vertexLength,P=b.layoutVertexArray,j=b.collisionVertexArray,U=E.anchorX,G=E.anchorY;this._addCollisionDebugVertex(P,j,x,U,G,new A(e,r)),this._addCollisionDebugVertex(P,j,x,U,G,new A(d,r)),this._addCollisionDebugVertex(P,j,x,U,G,new A(d,m)),this._addCollisionDebugVertex(P,j,x,U,G,new A(e,m)),C.vertexLength+=4;const W=b.indexArray;W.emplaceBack(k,k+1),W.emplaceBack(k+1,k+2),W.emplaceBack(k+2,k+3),W.emplaceBack(k+3,k),C.primitiveLength+=4}addDebugCollisionBoxes(e,r,d,m){for(let b=e;b<r;b++){const x=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new iy(Ze,Rs.members,Et),this.iconCollisionBox=new iy(Ze,Rs.members,Et);for(let e=0;e<this.symbolInstances.length;e++){const r=this.symbolInstances.get(e);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(e,r,d,m,b,x,E,C,k){const P={};for(let j=r;j<d;j++){const U=e.get(j);P.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},P.textFeatureIndex=U.featureIndex;break}for(let j=m;j<b;j++){const U=e.get(j);P.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},P.verticalTextFeatureIndex=U.featureIndex;break}for(let j=x;j<E;j++){const U=e.get(j);P.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},P.iconFeatureIndex=U.featureIndex;break}for(let j=C;j<k;j++){const U=e.get(j);P.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},P.verticalIconFeatureIndex=U.featureIndex;break}return P}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const d=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){const d=e.placedSymbolArray.get(r),m=d.vertexStartIndex+4*d.numGlyphs;for(let b=d.vertexStartIndex;b<m;b+=4)e.indexArray.emplaceBack(b,b+2,b+1),e.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(e),d=Math.cos(e),m=[],b=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const C=this.symbolInstances.get(E);m.push(0|Math.round(r*C.anchorX+d*C.anchorY)),b.push(C.featureIndex)}return x.sort(((E,C)=>m[E]-m[C]||b[C]-b[E])),x}addToSortKeyRanges(e,r){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===r?d.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const d=this.symbolInstances.get(r);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach(((m,b,x)=>{m>=0&&x.indexOf(m)===b&&this.addIndicesForPlacedSymbol(this.text,m)})),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ry,ay;Pt("SymbolBucket",Hf,{omit:["layers","collisionBoxArray","features","compareText"]}),Hf.MAX_GLYPHS=65535,Hf.addDynamicAttributes=W0;var Q0={get paint(){return ay=ay||new ur({"icon-opacity":new Gt($e.paint_symbol["icon-opacity"]),"icon-color":new Gt($e.paint_symbol["icon-color"]),"icon-halo-color":new Gt($e.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gt($e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gt($e.paint_symbol["icon-halo-blur"]),"icon-translate":new jt($e.paint_symbol["icon-translate"]),"icon-translate-anchor":new jt($e.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gt($e.paint_symbol["text-opacity"]),"text-color":new Gt($e.paint_symbol["text-color"],{runtimeType:Ya,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Gt($e.paint_symbol["text-halo-color"]),"text-halo-width":new Gt($e.paint_symbol["text-halo-width"]),"text-halo-blur":new Gt($e.paint_symbol["text-halo-blur"]),"text-translate":new jt($e.paint_symbol["text-translate"]),"text-translate-anchor":new jt($e.paint_symbol["text-translate-anchor"])})},get layout(){return ry=ry||new ur({"symbol-placement":new jt($e.layout_symbol["symbol-placement"]),"symbol-spacing":new jt($e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jt($e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Gt($e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jt($e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jt($e.layout_symbol["icon-allow-overlap"]),"icon-overlap":new jt($e.layout_symbol["icon-overlap"]),"icon-ignore-placement":new jt($e.layout_symbol["icon-ignore-placement"]),"icon-optional":new jt($e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jt($e.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gt($e.layout_symbol["icon-size"]),"icon-text-fit":new jt($e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jt($e.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gt($e.layout_symbol["icon-image"]),"icon-rotate":new Gt($e.layout_symbol["icon-rotate"]),"icon-padding":new Gt($e.layout_symbol["icon-padding"]),"icon-keep-upright":new jt($e.layout_symbol["icon-keep-upright"]),"icon-offset":new Gt($e.layout_symbol["icon-offset"]),"icon-anchor":new Gt($e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jt($e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jt($e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jt($e.layout_symbol["text-rotation-alignment"]),"text-field":new Gt($e.layout_symbol["text-field"]),"text-font":new Gt($e.layout_symbol["text-font"]),"text-size":new Gt($e.layout_symbol["text-size"]),"text-max-width":new Gt($e.layout_symbol["text-max-width"]),"text-line-height":new jt($e.layout_symbol["text-line-height"]),"text-letter-spacing":new Gt($e.layout_symbol["text-letter-spacing"]),"text-justify":new Gt($e.layout_symbol["text-justify"]),"text-radial-offset":new Gt($e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jt($e.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Gt($e.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Gt($e.layout_symbol["text-anchor"]),"text-max-angle":new jt($e.layout_symbol["text-max-angle"]),"text-writing-mode":new jt($e.layout_symbol["text-writing-mode"]),"text-rotate":new Gt($e.layout_symbol["text-rotate"]),"text-padding":new jt($e.layout_symbol["text-padding"]),"text-keep-upright":new jt($e.layout_symbol["text-keep-upright"]),"text-transform":new Gt($e.layout_symbol["text-transform"]),"text-offset":new Gt($e.layout_symbol["text-offset"]),"text-allow-overlap":new jt($e.layout_symbol["text-allow-overlap"]),"text-overlap":new jt($e.layout_symbol["text-overlap"]),"text-ignore-placement":new jt($e.layout_symbol["text-ignore-placement"]),"text-optional":new jt($e.layout_symbol["text-optional"])})}};class xb{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:wi,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pt("FormatSectionOverride",xb,{omit:["defaultValue"]});class nh extends Hi{constructor(e,r){super(e,Q0,r)}recalculate(e,r){if(super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const b of d)m.indexOf(b)<0&&m.push(b);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,r,d,m){const b=this.layout.get(e).evaluate(r,{},d,m),x=this._unevaluatedLayout._values[e];return x.isDataDriven()||ec(x.value)||!b?b:(function(E,C){return C.replace(/{([^{}]+)}/g,((k,P)=>E&&P in E?String(E[P]):""))})(r.properties,b)}createBucket(e){return new Hf(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Q0.paint.overridableProperties){if(!nh.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),d=new xb(r),m=new wf(d,r.property.specification);let b=null;b=r.value.kind==="constant"||r.value.kind==="source"?new Aa("source",m):new tc("composite",m,r.value.zoomStops),this.paint._values[e]=new is(r.property,b,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,d){return!(!this.layout||r.isDataDriven()||d.isDataDriven())&&nh.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const d=e.get("text-field"),m=Q0.paint.properties[r];let b=!1;const x=E=>{for(const C of E)if(m.overrides&&m.overrides.hasOverride(C))return void(b=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Rr)x(d.value.value.sections);else if(d.value.kind==="source"||d.value.kind==="composite"){const E=k=>{b||(k instanceof Wa&&Vi(k.value)===So?x(k.value.sections):k instanceof Uh?x(k.sections):k.eachChild(E))},C=d.value;C._styleExpression&&E(C._styleExpression.expression)}return b}}let wb;var Tb={get paint(){return wb=wb||new ur({"background-color":new jt($e.paint_background["background-color"]),"background-pattern":new qu($e.paint_background["background-pattern"]),"background-opacity":new jt($e.paint_background["background-opacity"])})}};class Gn extends Hi{constructor(e,r){super(e,Tb,r)}}class K0 extends Hi{constructor(e,r){super(e,{},r),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class sy{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const J0={once:!0},oy=63710088e-1;class fc{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new fc(Jt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,d=this.lat*r,m=e.lat*r,b=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((e.lng-this.lng)*r);return oy*Math.acos(Math.min(b,1))}static convert(e){if(e instanceof fc)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new fc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new fc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Wf=2*Math.PI*oy;function dm(s){return Wf*Math.cos(s*Math.PI/180)}function Sb(s){return(180+s)/360}function e_(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Eb(s,e){return s/dm(e)}function Ab(s){return 360*s-180}function fm(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function t_(s,e){return s*dm(fm(e))}class ci{constructor(e,r,d=0){this.x=+e,this.y=+r,this.z=+d}static fromLngLat(e,r=0){const d=fc.convert(e);return new ci(Sb(d.lng),e_(d.lat),Eb(r,d.lat))}toLngLat(){return new fc(Ab(this.x),fm(this.y))}toAltitude(){return t_(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Wf*(e=fm(this.y),1/Math.cos(e*Math.PI/180));var e}}function ly(s,e,r){var d=2*Math.PI*6378137/256/Math.pow(2,r);return[s*d-2*Math.PI*6378137/2,e*d-2*Math.PI*6378137/2]}class sa{constructor(e,r,d){if(!(function(m,b,x){return!(m<0||m>25||x<0||x>=Math.pow(2,m)||b<0||b>=Math.pow(2,m))})(e,r,d))throw new Error(`x=${r}, y=${d}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=r,this.y=d,this.key=Xf(0,e,e,r,d)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r,d){const m=(function(x,E,C){var k=ly(256*x,256*(E=Math.pow(2,C)-E-1),C),P=ly(256*(x+1),256*(E+1),C);return k[0]+","+k[1]+","+P[0]+","+P[1]})(this.x,this.y,this.z),b=(function(x,E,C){let k,P="";for(let j=x;j>0;j--)k=1<<j-1,P+=(E&k?1:0)+(C&k?2:0);return P})(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,b).replace(/{bbox-epsg-3857}/g,m)}isChildOf(e){const r=this.z-e.z;return r>0&&e.x===this.x>>r&&e.y===this.y>>r}getTilePoint(e){const r=Math.pow(2,this.z);return new A((e.x*r-this.x)*gt,(e.y*r-this.y)*gt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Mb{constructor(e,r){this.wrap=e,this.canonical=r,this.key=Xf(e,r.z,r.z,r.x,r.y)}}class Os{constructor(e,r,d,m,b){if(this.terrainRttPosMatrix32f=null,e<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${d}`);this.overscaledZ=e,this.wrap=r,this.canonical=new sa(d,+m,+b),this.key=Xf(r,e,d,m,b)}clone(){return new Os(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-e;return e>this.canonical.z?new Os(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Os(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(e,r){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-e;return e>this.canonical.z?Xf(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y):Xf(this.wrap*+r,e,e,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(e){if(e.wrap!==this.wrap||this.overscaledZ-e.overscaledZ<=0)return!1;if(e.overscaledZ===0)return this.overscaledZ>0;const r=this.canonical.z-e.canonical.z;return!(r<0)&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new Os(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new Os(r,this.wrap,r,d,m),new Os(r,this.wrap,r,d+1,m),new Os(r,this.wrap,r,d,m+1),new Os(r,this.wrap,r,d+1,m+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Os(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Os(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Mb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new ci(e.x-this.wrap,e.y))}}function Xf(s,e,r,d,m){(s*=2)<0&&(s=-1*s-1);const b=1<<r;return(b*b*s+b*m+d).toString(36)+r.toString(36)+e.toString(36)}function pm(s,e){return e?s.properties[e]:s.id}function n_(s,e){const r={id:s.id};if(e.removeAllProperties&&(delete s.removeProperties,delete s.addOrUpdateProperties,delete e.removeProperties),e.removeProperties)for(const d of e.removeProperties){const m=s.addOrUpdateProperties.findIndex((b=>b.key===d));m>-1&&s.addOrUpdateProperties.splice(m,1)}return(s.removeAllProperties||e.removeAllProperties)&&(r.removeAllProperties=!0),(s.removeProperties||e.removeProperties)&&(r.removeProperties=[...s.removeProperties||[],...e.removeProperties||[]]),(s.addOrUpdateProperties||e.addOrUpdateProperties)&&(r.addOrUpdateProperties=[...s.addOrUpdateProperties||[],...e.addOrUpdateProperties||[]]),(s.newGeometry||e.newGeometry)&&(r.newGeometry=e.newGeometry||s.newGeometry),r}function mm(s){var e,r;if(!s)return{};const d={};return d.removeAll=s.removeAll,d.remove=new Set(s.remove||[]),d.add=new Map((e=s.add)===null||e===void 0?void 0:e.map((m=>[m.id,m]))),d.update=new Map((r=s.update)===null||r===void 0?void 0:r.map((m=>[m.id,m]))),d}Pt("CanonicalTileID",sa),Pt("OverscaledTileID",Os,{omit:["terrainRttPosMatrix32f"]});class ih{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){const r=new ih;return r.extend(e(new A(this.minX,this.minY))),r.extend(e(new A(this.maxX,this.minY))),r.extend(e(new A(this.minX,this.maxY))),r.extend(e(new A(this.maxX,this.maxY))),r}static fromPoints(e){const r=new ih;for(const d of e)r.extend(d);return r}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}class i_{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const d=e[r];this._stringToNumber[d]=r,this._numberToString[r]=d}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class cy{constructor(e,r,d,m,b){this.type="Feature",this._vectorTileFeature=e,this._x=d,this._y=m,this._z=r,this.properties=e.properties,this.id=b}projectPoint(e,r,d,m){return[360*(e.x+r)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+d)/m)*Math.PI))-90]}projectLine(e,r,d,m){return e.map((b=>this.projectPoint(b,r,d,m)))}get geometry(){if(this._geometry)return this._geometry;const e=this._vectorTileFeature,r=e.extent*Math.pow(2,this._z),d=e.extent*this._x,m=e.extent*this._y,b=e.loadGeometry();switch(e.type){case 1:{const x=[];for(const C of b)x.push(C[0]);const E=this.projectLine(x,d,m,r);this._geometry=x.length===1?{type:"Point",coordinates:E[0]}:{type:"MultiPoint",coordinates:E};break}case 2:{const x=b.map((E=>this.projectLine(E,d,m,r)));this._geometry=x.length===1?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x};break}case 3:{const x=ab(b),E=[];for(const C of x)E.push(C.map((k=>this.projectLine(k,d,m,r))));this._geometry=E.length===1?{type:"Polygon",coordinates:E[0]}:{type:"MultiPolygon",coordinates:E};break}default:throw new Error(`unknown feature type: ${e.type}`)}return this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&r!=="_x"&&r!=="_y"&&r!=="_z"&&(e[r]=this[r]);return e}}class rh{_name;dataBuffer;nullabilityBuffer;_size;constructor(e,r,d){this._name=e,this.dataBuffer=r,typeof d=="number"?this._size=d:(this.nullabilityBuffer=d,this._size=d.size())}getValue(e){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(e)?null:this.getValueFromBuffer(e)}has(e){return this.nullabilityBuffer&&this.nullabilityBuffer.get(e)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class uy extends rh{}class hy extends uy{getValueFromBuffer(e){return this.dataBuffer[e]}}class r_ extends uy{getValueFromBuffer(e){return this.dataBuffer[e]}}class a_ extends rh{delta;constructor(e,r,d,m){super(e,r,m),this.delta=d}}class s_ extends a_{constructor(e,r,d,m){super(e,Int32Array.of(r),d,m)}getValueFromBuffer(e){return this.dataBuffer[0]+e*this.delta}}class o_ extends rh{constructor(e,r,d){super(e,Int32Array.of(r),d)}getValueFromBuffer(e){return this.dataBuffer[0]}}class ah{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(e,r,d,m,b=4096){this._name=e,this._geometryVector=r,this._idVector=d,this._propertyVectors=m,this._extent=b}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(e){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((r=>[r.name,r])))),this.propertyVectorsMap.get(e)}*[Symbol.iterator](){const e=this.geometryVector[Symbol.iterator]();let r=0;for(;r<this.numFeatures;){let d;this.idVector&&(d=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(r)):this.idVector.getValue(r));const m=e?.next().value,b={};for(const x of this.propertyVectors){if(!x)continue;const E=x.name,C=x.getValue(r);C!==null&&(b[E]=C)}r++,yield{id:d,geometry:m,properties:b}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const e=[],r=this.geometryVector.getGeometries();for(let d=0;d<this.numFeatures;d++){let m;this.idVector&&(m=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(d)):this.idVector.getValue(d));const b={coordinates:r[d],type:this.geometryVector.geometryType(d)},x={};for(const E of this.propertyVectors){if(!E)continue;const C=E.name,k=E.getValue(d);k!==null&&(x[C]=k)}e.push({id:m,geometry:b,properties:x})}return e}containsMaxSaveIntegerValues(e){return e instanceof hy||e instanceof o_&&e instanceof s_||e instanceof r_}}class Cb{value;constructor(e){this.value=e}get(){return this.value}set(e){this.value=e}increment(){return this.value++}add(e){this.value+=e}}var Cn,Cl,pa,Dl,sh,Fa,Mr,Wr,to,ls;function Xr(s,e,r){const d=new Int32Array(r);let m=0,b=e.get();for(let x=0;x<d.length;x++){let E=s[b++],C=127&E;E<128||(E=s[b++],C|=(127&E)<<7,E<128||(E=s[b++],C|=(127&E)<<14,E<128||(E=s[b++],C|=(127&E)<<21,E<128||(E=s[b++],C|=(15&E)<<28)))),d[m++]=C}return e.set(b),d}function gm(s,e,r){const d=new BigInt64Array(r);for(let m=0;m<d.length;m++)d[m]=dy(s,e);return d}function Db(s,e){let r,d;return d=s[e.get()],e.increment(),r=127&d,d<128?r:(d=s[e.get()],e.increment(),r|=(127&d)<<7,d<128?r:(d=s[e.get()],e.increment(),r|=(127&d)<<14,d<128?r:(d=s[e.get()],e.increment(),r|=(127&d)<<21,d<128?r:(d=s[e.get()],r|=(15&d)<<28,(function(m,b,x){let E,C;if(C=b[x.get()],x.increment(),E=(112&C)>>4,C<128||(C=b[x.get()],x.increment(),E|=(127&C)<<3,C<128)||(C=b[x.get()],x.increment(),E|=(127&C)<<10,C<128)||(C=b[x.get()],x.increment(),E|=(127&C)<<17,C<128)||(C=b[x.get()],x.increment(),E|=(127&C)<<24,C<128)||(C=b[x.get()],x.increment(),E|=(1&C)<<31,C<128))return 4294967296*E+(m>>>0);throw new Error("Expected varint not more than 10 bytes")})(r,s,e)))))}function Qf(s,e,r,d){throw new Error("FastPFor is not implemented yet.")}function ma(s){return s>>>1^-(1&s)}function Ed(s){return s>>1n^-(1n&s)}function dy(s,e){let r=0n,d=0,m=e.get();for(;m<s.length;){const b=s[m++];if(r|=BigInt(127&b)<<BigInt(d),!(128&b))break;if(d+=7,d>=64)throw new Error("Varint too long")}return e.set(m),r}function pc(s,e,r){const d=new Int32Array(r);let m=0;for(let b=0;b<e;b++){const x=s[b];d.fill(s[b+e],m,m+x),m+=x}return d}function Ib(s,e,r){const d=new BigInt64Array(r);let m=0;for(let b=0;b<e;b++){const x=Number(s[b]);d.fill(s[b+e],m,m+x),m+=x}return d}function Rb(s,e,r){const d=new Float64Array(r);let m=0;for(let b=0;b<e;b++){const x=s[b];d.fill(s[b+e],m,m+x),m+=x}return d}function oh(s){const e=s.length/4*4;let r=1;if(e>=4)for(let d=s[0];r<e-4;r+=4)d=s[r]+=d,d=s[r+1]+=d,d=s[r+2]+=d,d=s[r+3]+=d;for(;r!=s.length;)s[r]+=s[r-1],++r}function l_(s){s[0]=s[0]>>>1^-(1&s[0]),s[1]=s[1]>>>1^-(1&s[1]);const e=s.length/4*4;let r=2;if(e>=4)for(;r<e-4;r+=4){const d=s[r],m=s[r+1],b=s[r+2],x=s[r+3];s[r]=(d>>>1^-(1&d))+s[r-2],s[r+1]=(m>>>1^-(1&m))+s[r-1],s[r+2]=(b>>>1^-(1&b))+s[r],s[r+3]=(x>>>1^-(1&x))+s[r+1]}for(;r!=s.length;r+=2)s[r]=(s[r]>>>1^-(1&s[r]))+s[r-2],s[r+1]=(s[r+1]>>>1^-(1&s[r+1]))+s[r-1]}(function(s){s.NONE="NONE",s.DELTA="DELTA",s.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",s.RLE="RLE",s.MORTON="MORTON",s.PDE="PDE"})(Cn||(Cn={})),(function(s){s.NONE="NONE",s.FAST_PFOR="FAST_PFOR",s.VARINT="VARINT",s.ALP="ALP"})(Cl||(Cl={})),(function(s){s.PRESENT="PRESENT",s.DATA="DATA",s.OFFSET="OFFSET",s.LENGTH="LENGTH"})(pa||(pa={}));class c_{_dictionaryType;_offsetType;_lengthType;constructor(e,r,d){this._dictionaryType=e,this._offsetType=r,this._lengthType=d}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function ja(s,e){const r=(function(d,m){const b=d[m.get()],x=Object.values(pa)[b>>4];let E=null;switch(x){case pa.DATA:E=new c_(Object.values(Dl)[15&b]);break;case pa.OFFSET:E=new c_(null,Object.values(sh)[15&b]);break;case pa.LENGTH:E=new c_(null,null,Object.values(Fa)[15&b])}m.increment();const C=d[m.get()],k=Object.values(Cn)[C>>5],P=Object.values(Cn)[C>>2&7],j=Object.values(Cl)[3&C];m.increment();const U=Xr(d,m,2),G=U[0];return{physicalStreamType:x,logicalStreamType:E,logicalLevelTechnique1:k,logicalLevelTechnique2:P,physicalLevelTechnique:j,numValues:G,byteLength:U[1],decompressedCount:G}})(s,e);return r.logicalLevelTechnique1===Cn.MORTON?(function(d,m,b){const x=Xr(m,b,2);return{physicalStreamType:d.physicalStreamType,logicalStreamType:d.logicalStreamType,logicalLevelTechnique1:d.logicalLevelTechnique1,logicalLevelTechnique2:d.logicalLevelTechnique2,physicalLevelTechnique:d.physicalLevelTechnique,numValues:d.numValues,byteLength:d.byteLength,decompressedCount:d.decompressedCount,numBits:x[0],coordinateShift:x[1]}})(r,s,e):Cn.RLE!==r.logicalLevelTechnique1&&Cn.RLE!==r.logicalLevelTechnique2||Cl.NONE===r.physicalLevelTechnique?r:(function(d,m,b){const x=Xr(m,b,2);return{physicalStreamType:d.physicalStreamType,logicalStreamType:d.logicalStreamType,logicalLevelTechnique1:d.logicalLevelTechnique1,logicalLevelTechnique2:d.logicalLevelTechnique2,physicalLevelTechnique:d.physicalLevelTechnique,numValues:d.numValues,byteLength:d.byteLength,decompressedCount:x[1],runs:x[0],numRleValues:x[1]}})(r,s,e)}(function(s){s.NONE="NONE",s.SINGLE="SINGLE",s.SHARED="SHARED",s.VERTEX="VERTEX",s.MORTON="MORTON",s.FSST="FSST"})(Dl||(Dl={})),(function(s){s.VERTEX="VERTEX",s.INDEX="INDEX",s.STRING="STRING",s.KEY="KEY"})(sh||(sh={})),(function(s){s.VAR_BINARY="VAR_BINARY",s.GEOMETRIES="GEOMETRIES",s.PARTS="PARTS",s.RINGS="RINGS",s.TRIANGLES="TRIANGLES",s.SYMBOL="SYMBOL",s.DICTIONARY="DICTIONARY"})(Fa||(Fa={})),(function(s){s[s.FLAT=0]="FLAT",s[s.CONST=1]="CONST",s[s.SEQUENCE=2]="SEQUENCE",s[s.DICTIONARY=3]="DICTIONARY",s[s.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Mr||(Mr={}));class Il{values;_size;constructor(e,r){this.values=e,this._size=r}get(e){const r=Math.floor(e/8);return(this.values[r]>>e%8&1)==1}set(e,r){const d=Math.floor(e/8);this.values[d]=this.values[d]|(r?1:0)<<e%8}getInt(e){const r=Math.floor(e/8);return this.values[r]>>e%8&1}size(){return this._size}getBuffer(){return this.values}}function Ba(s,e,r,d,m){return(function(b,x,E){switch(x.logicalLevelTechnique1){case Cn.DELTA:return x.logicalLevelTechnique2===Cn.RLE?(function(C,k,P){const j=new Int32Array(P);let U=0,G=0;for(let W=0;W<k;W++){const X=C[W],J=ma(C[W+k]);for(let le=0;le<X;le++)G+=J,j[U++]=G}return j})(b,x.runs,x.numRleValues):((function(C){C[0]=C[0]>>>1^-(1&C[0]);const k=C.length/4*4;let P=1;if(k>=4)for(;P<k-4;P+=4){const j=C[P],U=C[P+1],G=C[P+2],W=C[P+3];C[P]=(j>>>1^-(1&j))+C[P-1],C[P+1]=(U>>>1^-(1&U))+C[P],C[P+2]=(G>>>1^-(1&G))+C[P+1],C[P+3]=(W>>>1^-(1&W))+C[P+2]}for(;P!=C.length;++P)C[P]=(C[P]>>>1^-(1&C[P]))+C[P-1]})(b),b);case Cn.RLE:return(function(C,k,P){return P?(function(j,U,G){const W=new Int32Array(G);let X=0;for(let J=0;J<U;J++){const le=j[J];let ve=j[J+U];ve=ve>>>1^-(1&ve),W.fill(ve,X,X+le),X+=le}return W})(C,k.runs,k.numRleValues):pc(C,k.runs,k.numRleValues)})(b,x,E);case Cn.MORTON:return oh(b),b;case Cn.COMPONENTWISE_DELTA:return l_(b),b;case Cn.NONE:return E&&(function(C){for(let k=0;k<C.length;k++){const P=C[k];C[k]=P>>>1^-(1&P)}})(b),b;default:throw new Error(`The specified Logical level technique is not supported: ${x.logicalLevelTechnique1}`)}})(fy(s,e,r),r,d)}function lh(s,e,r){return(function(d,m){if(m.logicalLevelTechnique1===Cn.DELTA&&m.logicalLevelTechnique2===Cn.NONE)return(function(x){const E=new Int32Array(x.length+1);E[0]=0,E[1]=ma(x[0]);let C=E[1],k=2;for(;k!=E.length;++k){const P=x[k-1];C+=P>>>1^-(1&P),E[k]=E[k-1]+C}return E})(d);if(m.logicalLevelTechnique1===Cn.RLE&&m.logicalLevelTechnique2===Cn.NONE)return(function(x,E,C){const k=new Int32Array(C+1);k[0]=0;let P=1,j=k[0];for(let U=0;U<E;U++){const G=x[U],W=x[U+E];for(let X=P;X<P+G;X++)k[X]=W+j,j=k[X];P+=G}return k})(d,m.runs,m.numRleValues);if(m.logicalLevelTechnique1===Cn.NONE&&m.logicalLevelTechnique2===Cn.NONE){(function(x){let E=0;for(let C=0;C<x.length;C++)x[C]+=E,E=x[C]})(d);const b=new Int32Array(m.numValues+1);return b[0]=0,b.set(d,1),b}if(m.logicalLevelTechnique1===Cn.DELTA&&m.logicalLevelTechnique2===Cn.RLE){const b=(function(x,E,C){const k=new Int32Array(C+1);k[0]=0;let P=1,j=k[0];for(let U=0;U<E;U++){const G=x[U];let W=x[U+E];W=W>>>1^-(1&W);for(let X=P;X<P+G;X++)k[X]=W+j,j=k[X];P+=G}return k})(d,m.runs,m.numRleValues);return oh(b),b}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(fy(s,e,r),r)}function fy(s,e,r){const d=r.physicalLevelTechnique;if(d===Cl.FAST_PFOR)return Qf();if(d===Cl.VARINT)return Xr(s,e,r.numValues);if(d===Cl.NONE){const m=e.get();e.add(r.byteLength);const b=s.subarray(m,e.get());return new Int32Array(b)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function u_(s,e,r,d){const m=fy(s,e,r);if(m.length===1){const b=m[0];return d?ma(b):b}return d?(function(b){return ma(b[1])})(m):(function(b){return b[1]})(m)}function h_(s,e,r){return(function(d){if(d.length==2){const m=ma(d[1]);return[m,m]}return[ma(d[2]),ma(d[3])]})(fy(s,e,r))}function Ad(s,e,r){return(function(d){if(d.length==2){const m=Ed(d[1]);return[m,m]}return[Ed(d[2]),Ed(d[3])]})(gm(s,e,r.numValues))}function Kf(s,e,r,d){return(function(m,b,x){switch(b.logicalLevelTechnique1){case Cn.DELTA:return b.logicalLevelTechnique2===Cn.RLE?(function(E,C,k){const P=new BigInt64Array(k);let j=0,U=0n;for(let G=0;G<C;G++){const W=Number(E[G]),X=Ed(E[G+C]);for(let J=0;J<W;J++)U+=X,P[j++]=U}return P})(m,b.runs,b.numRleValues):((function(E){E[0]=E[0]>>1n^-(1n&E[0]);const C=E.length/4*4;let k=1;if(C>=4)for(;k<C-4;k+=4){const P=E[k],j=E[k+1],U=E[k+2],G=E[k+3];E[k]=(P>>1n^-(1n&P))+E[k-1],E[k+1]=(j>>1n^-(1n&j))+E[k],E[k+2]=(U>>1n^-(1n&U))+E[k+1],E[k+3]=(G>>1n^-(1n&G))+E[k+2]}for(;k!=E.length;++k)E[k]=(E[k]>>1n^-(1n&E[k]))+E[k-1]})(m),m);case Cn.RLE:return(function(E,C,k){return k?(function(P,j,U){const G=new BigInt64Array(U);let W=0;for(let X=0;X<j;X++){const J=Number(P[X]);let le=P[X+j];le=le>>1n^-(1n&le),G.fill(le,W,W+J),W+=J}return G})(E,C.runs,C.numRleValues):Ib(E,C.runs,C.numRleValues)})(m,b,x);case Cn.NONE:return x&&(function(E){for(let C=0;C<E.length;C++){const k=E[C];E[C]=k>>1n^-(1n&k)}})(m),m;default:throw new Error(`The specified Logical level technique is not supported: ${b.logicalLevelTechnique1}`)}})(gm(s,e,r.numValues),r,d)}function d_(s,e,r,d){const m=gm(s,e,r.numValues);if(m.length===1){const b=m[0];return d?Ed(b):b}return d?(function(b){return Ed(b[1])})(m):(function(b){return b[1]})(m)}function f_(s,e,r,d,m){return(function(b,x,E,C){switch(x.logicalLevelTechnique1){case Cn.DELTA:return x.logicalLevelTechnique2===Cn.RLE&&(b=pc(b,x.runs,x.numRleValues)),(function(k,P){const j=new Int32Array(k.size());let U=0;k.get(0)?(j[0]=k.get(0)?P[0]>>>1^-(1&P[0]):0,U=1):j[0]=0;let G=1;for(;G!=j.length;++G)j[G]=k.get(G)?j[G-1]+(P[U]>>>1^-(1&P[U++])):j[G-1];return j})(C,b);case Cn.RLE:return(function(k,P,j,U){const G=P;return j?(function(W,X,J){const le=new Int32Array(W.size());let ve=0;for(let ce=0;ce<J;ce++){const de=X[ce];let xe=X[ce+J];xe=xe>>>1^-(1&xe);for(let Me=ve;Me<ve+de;Me++)W.get(Me)?le[Me]=xe:(le[Me]=0,ve++);ve+=de}return le})(U,k,G.runs):(function(W,X,J){const le=new Int32Array(W.size());let ve=0;for(let ce=0;ce<J;ce++){const de=X[ce],xe=X[ce+J];for(let Me=ve;Me<ve+de;Me++)W.get(Me)?le[Me]=xe:(le[Me]=0,ve++);ve+=de}return le})(U,k,G.runs)})(b,x,E,C);case Cn.MORTON:return oh(b),b;case Cn.COMPONENTWISE_DELTA:return l_(b),b;case Cn.NONE:return b=E?(function(k,P){const j=new Int32Array(k.size());let U=0,G=0;for(;G!=j.length;++G)if(k.get(G)){const W=P[U++];j[G]=W>>>1^-(1&W)}else j[G]=0;return j})(C,b):(function(k,P){const j=new Int32Array(k.size());let U=0,G=0;for(;G!=j.length;++G)j[G]=k.get(G)?P[U++]:0;return j})(C,b),b;default:throw new Error("The specified Logical level technique is not supported")}})(r.physicalLevelTechnique===Cl.FAST_PFOR?Qf():Xr(s,e,r.numValues),r,d,m)}function cu(s,e,r,d){const m=s.logicalLevelTechnique1;if(m===Cn.RLE)return s.runs===1?Mr.CONST:Mr.FLAT;const b=e instanceof Il?e.size():e;if(m===Cn.DELTA&&s.logicalLevelTechnique2===Cn.RLE){const x=s.runs,E=2;if(s.numRleValues!==b)return Mr.FLAT;if(x===1)return Mr.SEQUENCE;if(x===2){const C=d.get();let k;if(s.physicalLevelTechnique===Cl.VARINT)k=Xr(r,d,4);else{const P=d.get();k=new Int32Array(r.buffer,r.byteOffset+P,4)}if(d.set(C),k[2]===E&&k[3]===E)return Mr.SEQUENCE}}return s.numValues===1?Mr.CONST:Mr.FLAT}class Jf extends uy{getValueFromBuffer(e){return this.dataBuffer[e]}}class p_ extends a_{constructor(e,r,d,m){super(e,BigInt64Array.of(r),d,m)}getValueFromBuffer(e){return this.dataBuffer[0]+BigInt(e)*this.delta}}class uu{_geometryOffsets;_partOffsets;_ringOffsets;constructor(e,r,d){this._geometryOffsets=e,this._partOffsets=r,this._ringOffsets=d}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function ym(s,e,r){return{x:py(s,e)-r,y:py(s>>1,e)-r}}function py(s,e){let r=0;for(let d=0;d<e;d++)r|=(s&1<<2*d)>>d;return r}(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON",s[s.MULTIPOINT=3]="MULTIPOINT",s[s.MULTILINESTRING=4]="MULTILINESTRING",s[s.MULTIPOLYGON=5]="MULTIPOLYGON"})(Wr||(Wr={})),(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON"})(to||(to={})),(function(s){s[s.MORTON=0]="MORTON",s[s.VEC_2=1]="VEC_2",s[s.VEC_3=2]="VEC_3"})(ls||(ls={}));class my{createPoint(e){return[[e]]}createMultiPoint(e){return e.map((r=>[r]))}createLineString(e){return[e]}createMultiLineString(e){return e}createPolygon(e,r){return[e].concat(r)}createMultiPolygon(e){return e.flat()}}function m_(s){const e=new Array(s.numGeometries);let r=1,d=1,m=1,b=0;const x=new my;let E=0,C=0;const k=s.mortonSettings,P=s.topologyVector,j=P.geometryOffsets,U=P.partOffsets,G=P.ringOffsets,W=s.vertexOffsets,X=s.containsPolygonGeometry(),J=s.vertexBuffer;for(let le=0;le<s.numGeometries;le++){const ve=s.geometryType(le);if(ve===Wr.POINT){if(W&&W.length!==0)if(s.vertexBufferType===ls.VEC_2){const ce=2*W[C++],de=new A(J[ce],J[ce+1]);e[b++]=x.createPoint(de)}else{const ce=ym(J[W[C++]],k.numBits,k.coordinateShift),de=new A(ce.x,ce.y);e[b++]=x.createPoint(de)}else{const ce=new A(J[E++],J[E++]);e[b++]=x.createPoint(ce)}j&&m++,U&&r++,G&&d++}else if(ve===Wr.MULTIPOINT){const ce=j[m]-j[m-1];m++;const de=new Array(ce);if(W&&W.length!==0){for(let xe=0;xe<ce;xe++){const Me=2*W[C++];de[xe]=new A(J[Me],J[Me+1])}e[b++]=x.createMultiPoint(de)}else{for(let xe=0;xe<ce;xe++){const Me=J[E++],qe=J[E++];de[xe]=new A(Me,qe)}e[b++]=x.createMultiPoint(de)}}else if(ve===Wr.LINESTRING){let ce,de=0;X?(de=G[d]-G[d-1],d++):de=U[r]-U[r-1],r++,W&&W.length!==0?(ce=s.vertexBufferType===ls.VEC_2?bm(J,W,C,de,!1):y_(J,W,C,de,!1,k),C+=de):(ce=g_(J,E,de,!1),E+=2*de),e[b++]=x.createLineString(ce),j&&m++}else if(ve===Wr.POLYGON){const ce=U[r]-U[r-1];r++;const de=new Array(ce-1);let xe=G[d]-G[d-1];if(d++,W&&W.length!==0){const Me=s.vertexBufferType===ls.VEC_2?gy(J,W,C,xe):vm(J,W,C,xe,0,k);C+=xe;for(let qe=0;qe<de.length;qe++)xe=G[d]-G[d-1],d++,de[qe]=s.vertexBufferType===ls.VEC_2?gy(J,W,C,xe):vm(J,W,C,xe,0,k),C+=xe;e[b++]=x.createPolygon(Me,de)}else{const Me=_m(J,E,xe);E+=2*xe;for(let qe=0;qe<de.length;qe++)xe=G[d]-G[d-1],d++,de[qe]=_m(J,E,xe),E+=2*xe;e[b++]=x.createPolygon(Me,de)}j&&m++}else if(ve===Wr.MULTILINESTRING){const ce=j[m]-j[m-1];m++;const de=new Array(ce);if(W&&W.length!==0){for(let xe=0;xe<ce;xe++){let Me=0;X?(Me=G[d]-G[d-1],d++):Me=U[r]-U[r-1],r++;const qe=s.vertexBufferType===ls.VEC_2?bm(J,W,C,Me,!1):y_(J,W,C,Me,!1,k);de[xe]=qe,C+=Me}e[b++]=x.createMultiLineString(de)}else{for(let xe=0;xe<ce;xe++){let Me=0;X?(Me=G[d]-G[d-1],d++):Me=U[r]-U[r-1],r++,de[xe]=g_(J,E,Me,!1),E+=2*Me}e[b++]=x.createMultiLineString(de)}}else{if(ve!==Wr.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const ce=j[m]-j[m-1];m++;const de=new Array(ce);let xe=0;if(W&&W.length!==0){for(let Me=0;Me<ce;Me++){const qe=U[r]-U[r-1];r++;const ct=new Array(qe-1);xe=G[d]-G[d-1],d++;const rt=s.vertexBufferType===ls.VEC_2?gy(J,W,C,xe):vm(J,W,C,xe,0,k);C+=xe;for(let mt=0;mt<ct.length;mt++)xe=G[d]-G[d-1],d++,ct[mt]=s.vertexBufferType===ls.VEC_2?gy(J,W,C,xe):vm(J,W,C,xe,0,k),C+=xe;de[Me]=x.createPolygon(rt,ct)}e[b++]=x.createMultiPolygon(de)}else{for(let Me=0;Me<ce;Me++){const qe=U[r]-U[r-1];r++;const ct=new Array(qe-1);xe=G[d]-G[d-1],d++;const rt=_m(J,E,xe);E+=2*xe;for(let mt=0;mt<ct.length;mt++){const Rt=G[d]-G[d-1];d++,ct[mt]=_m(J,E,Rt),E+=2*Rt}de[Me]=x.createPolygon(rt,ct)}e[b++]=x.createMultiPolygon(de)}}}}return e}function _m(s,e,r){return g_(s,e,r,!0)}function gy(s,e,r,d){return bm(s,e,r,d,!0)}function vm(s,e,r,d,m,b){return y_(s,e,r,d,!0,b)}function g_(s,e,r,d){const m=new Array(d?r+1:r);for(let b=0;b<2*r;b+=2)m[b/2]=new A(s[e+b],s[e+b+1]);return d&&(m[m.length-1]=m[0]),m}function bm(s,e,r,d,m){const b=new Array(m?d+1:d);for(let x=0;x<2*d;x+=2){const E=2*e[r+x/2];b[x/2]=new A(s[E],s[E+1])}return m&&(b[b.length-1]=b[0]),b}function y_(s,e,r,d,m,b){const x=new Array(m?d+1:d);for(let E=0;E<d;E++){const C=ym(s[e[r+E]],b.numBits,b.coordinateShift);x[E]=new A(C.x,C.y)}return m&&(x[x.length-1]=x[0]),x}class xm{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(e,r,d,m,b){this._vertexBufferType=e,this._topologyVector=r,this._vertexOffsets=d,this._vertexBuffer=m,this._mortonSettings=b}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const e=m_(this);let r=0;for(;r<this.numGeometries;)yield{coordinates:e[r],type:this.geometryType(r)},r++}getSimpleEncodedVertex(e){const r=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[r],this.vertexBuffer[r+1]]}getVertex(e){if(this.vertexOffsets&&this.mortonSettings){const d=ym(this.vertexBuffer[this.vertexOffsets[e]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[d.x,d.y]}const r=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[r],this.vertexBuffer[r+1]]}getGeometries(){return m_(this)}get mortonSettings(){return this._mortonSettings}}class wm extends xm{_numGeometries;_geometryType;constructor(e,r,d,m,b,x,E){super(d,m,b,x,E),this._numGeometries=e,this._geometryType=r}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Wr.POLYGON||this._geometryType===Wr.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Tm extends xm{_geometryTypes;constructor(e,r,d,m,b,x){super(e,d,m,b,x),this._geometryTypes=r}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let e=0;e<this.numGeometries;e++)if(this.geometryType(e)===Wr.POLYGON||this.geometryType(e)===Wr.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class kb{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(e,r,d,m){this._triangleOffsets=e,this._indexBuffer=r,this._vertexBuffer=d,this._topologyVector=m}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const e=new Array(this.numGeometries),r=this._topologyVector,d=r.partOffsets,m=r.ringOffsets,b=r.geometryOffsets;let x=0,E=1,C=1,k=1;for(let P=0;P<this.numGeometries;P++)switch(this.geometryType(P)){case Wr.POLYGON:{const j=d[E]-d[E-1];E++;const U=[];for(let G=0;G<j;G++){const W=m[C]-m[C-1];C++;const X=[];for(let J=0;J<W;J++){const le=this._vertexBuffer[x++],ve=this._vertexBuffer[x++];X.push(new A(le,ve))}X.length>0&&X.push(X[0]),U.push(X)}e[P]=U,b&&k++}break;case Wr.MULTIPOLYGON:{const j=b[k]-b[k-1];k++;const U=[];for(let G=0;G<j;G++){const W=d[E]-d[E-1];E++;for(let X=0;X<W;X++){const J=m[C]-m[C-1];C++;const le=[];for(let ve=0;ve<J;ve++){const ce=this._vertexBuffer[x++],de=this._vertexBuffer[x++];le.push(new A(ce,de))}le.length>0&&le.push(le[0]),U.push(le)}}e[P]=U}}return e}[Symbol.iterator](){return null}}function ep(s,e,r,d,m,b){return new A1(s,e,r,d,m,b)}class A1 extends kb{_numGeometries;_geometryType;constructor(e,r,d,m,b,x){super(d,m,b,x),this._numGeometries=e,this._geometryType=r}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function __(s,e,r,d,m){return new Ob(s,e,r,d,m)}class Ob extends kb{_geometryTypes;constructor(e,r,d,m,b){super(r,d,m,b),this._geometryTypes=e}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function Lb(s,e,r,d,m){const b=ja(s,r);let x=null,E=null,C=null,k=null,P=null,j=null,U=null,G=null;if(cu(b,d,s,r)===Mr.CONST){const X=u_(s,r,b,!1);for(let J=0;J<e-1;J++){const le=ja(s,r);switch(le.physicalStreamType){case pa.LENGTH:switch(le.logicalStreamType.lengthType){case Fa.GEOMETRIES:x=lh(s,r,le);break;case Fa.PARTS:E=lh(s,r,le);break;case Fa.RINGS:C=lh(s,r,le);break;case Fa.TRIANGLES:U=lh(s,r,le)}break;case pa.OFFSET:switch(le.logicalStreamType.offsetType){case sh.VERTEX:k=Ba(s,r,le,!1);break;case sh.INDEX:G=Ba(s,r,le,!1)}break;case pa.DATA:Dl.VERTEX===le.logicalStreamType.dictionaryType?P=Ba(s,r,le,!0):(j={numBits:le.numBits,coordinateShift:le.coordinateShift},P=Ba(s,r,le,!1))}}return G!==null?x!=null||E!=null?ep(d,X,U,G,P,new uu(x,E,C)):ep(d,X,U,G,P):j===null?(function(J,le,ve,ce,de){return new wm(J,le,ls.VEC_2,ve,ce,de)})(d,X,new uu(x,E,C),k,P):(function(J,le,ve,ce,de,xe){return new wm(J,le,ls.MORTON,ve,ce,de,xe)})(d,X,new uu(x,E,C),k,P,j)}const W=Ba(s,r,b,!1);for(let X=0;X<e-1;X++){const J=ja(s,r);switch(J.physicalStreamType){case pa.LENGTH:switch(J.logicalStreamType.lengthType){case Fa.GEOMETRIES:x=Ba(s,r,J,!1);break;case Fa.PARTS:E=Ba(s,r,J,!1);break;case Fa.RINGS:C=Ba(s,r,J,!1);break;case Fa.TRIANGLES:U=lh(s,r,J)}break;case pa.OFFSET:switch(J.logicalStreamType.offsetType){case sh.VERTEX:k=Ba(s,r,J,!1);break;case sh.INDEX:G=Ba(s,r,J,!1)}break;case pa.DATA:Dl.VERTEX===J.logicalStreamType.dictionaryType?P=Ba(s,r,J,!0):(j={numBits:J.numBits,coordinateShift:J.coordinateShift},P=Ba(s,r,J,!1))}}return G!==null&&E===null?__(W,U,G,P):(x!==null?(x=yy(W,x,2),E!==null&&C!==null?(E=_y(W,x,E,!1),C=(function(X,J,le,ve){const ce=new Int32Array(le[le.length-1]+1);let de=0;ce[0]=de;let xe=1,Me=1,qe=0;for(let ct=0;ct<X.length;ct++){const rt=X[ct],mt=J[ct+1]-J[ct];if(rt!==0&&rt!==3)for(let Rt=0;Rt<mt;Rt++){const _t=le[xe]-le[xe-1];xe++;for(let ot=0;ot<_t;ot++)de=ce[Me++]=de+ve[qe++]}else for(let Rt=0;Rt<mt;Rt++)ce[Me++]=++de,xe++}return ce})(W,x,E,C)):E!==null&&(E=(function(X,J,le){const ve=new Int32Array(J[J.length-1]+1);let ce=0;ve[0]=ce;let de=1,xe=0;for(let Me=0;Me<X.length;Me++){const qe=X[Me],ct=J[Me+1]-J[Me];if(qe===4||qe===1)for(let rt=0;rt<ct;rt++)ce=ve[de++]=ce+le[xe++];else for(let rt=0;rt<ct;rt++)ve[de++]=++ce}return ve})(W,x,E))):E!==null&&C!==null?(E=yy(W,E,1),C=_y(W,E,C,!0)):E!==null&&(E=yy(W,E,0)),G!==null?__(W,U,G,P,new uu(x,E,C)):j===null?(function(X,J,le,ve){return new Tm(ls.VEC_2,X,J,le,ve)})(W,new uu(x,E,C),k,P):(function(X,J,le,ve,ce){return new Tm(ls.MORTON,X,J,le,ve,ce)})(W,new uu(x,E,C),k,P,j))}function yy(s,e,r){const d=new Int32Array(s.length+1);let m=0;d[0]=m;let b=0;for(let x=0;x<s.length;x++)m=d[x+1]=m+(s[x]>r?e[b++]:1);return d}function _y(s,e,r,d){const m=new Int32Array(e[e.length-1]+1);let b=0;m[0]=b;let x=1,E=0;for(let C=0;C<s.length;C++){const k=s[C],P=e[C+1]-e[C];if(k===5||k===2||d&&(k===4||k===1))for(let j=0;j<P;j++)b=m[x++]=b+r[E++];else for(let j=0;j<P;j++)m[x++]=++b}return m}class Nb extends rh{dataVector;constructor(e,r,d){super(e,r.getBuffer(),d),this.dataVector=r}getValueFromBuffer(e){return this.dataVector.get(e)}}class Pb extends uy{getValueFromBuffer(e){return this.dataBuffer[e]}}class Sm extends rh{constructor(e,r,d){super(e,BigInt64Array.of(r),d)}getValueFromBuffer(e){return this.dataBuffer[0]}}function Em(s,e,r){return zb(s,Math.ceil(e/8),r)}function zb(s,e,r){const d=new Uint8Array(e);let m=0;for(;m<e;){const b=s[r.increment()];if(b<=127){const x=b+3,E=s[r.increment()],C=m+x;d.fill(E,m,C),m=C}else{const x=256-b;for(let E=0;E<x;E++)d[m++]=s[r.increment()]}}return d}const v_=new TextDecoder;function Am(s,e,r){return r-e>=12?v_.decode(s.subarray(e,r)):(function(d,m,b){let x="",E=m;for(;E<b;){const C=d[E];let k,P,j,U=null,G=C>239?4:C>223?3:C>191?2:1;if(E+G>b)break;G===1?C<128&&(U=C):G===2?(k=d[E+1],(192&k)==128&&(U=(31&C)<<6|63&k,U<=127&&(U=null))):G===3?(k=d[E+1],P=d[E+2],(192&k)==128&&(192&P)==128&&(U=(15&C)<<12|(63&k)<<6|63&P,(U<=2047||U>=55296&&U<=57343)&&(U=null))):G===4&&(k=d[E+1],P=d[E+2],j=d[E+3],(192&k)==128&&(192&P)==128&&(192&j)==128&&(U=(15&C)<<18|(63&k)<<12|(63&P)<<6|63&j,(U<=65535||U>=1114112)&&(U=null))),U===null?(U=65533,G=1):U>65535&&(U-=65536,x+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),x+=String.fromCharCode(U),E+=G}return x})(s,e,r)}class tp extends rh{offsetBuffer;constructor(e,r,d,m){super(e,d,m),this.offsetBuffer=r}}class vy extends tp{textEncoder;constructor(e,r,d,m){super(e,r,d,m??r.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(e){return Am(this.dataBuffer,this.offsetBuffer[e],this.offsetBuffer[e+1])}}class Md extends tp{indexBuffer;textEncoder;constructor(e,r,d,m,b){super(e,d,m,b??r.length),this.indexBuffer=r,this.indexBuffer=r,this.textEncoder=new TextEncoder}getValueFromBuffer(e){const r=this.indexBuffer[e];return Am(this.dataBuffer,this.offsetBuffer[r],this.offsetBuffer[r+1])}}class by extends tp{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(e,r,d,m,b,x,E){super(e,d,m,E),this.indexBuffer=r,this.symbolOffsetBuffer=b,this.symbolTableBuffer=x,this.textEncoder=new TextEncoder}getValueFromBuffer(e){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(d,m,b){const x=[],E=new Array(m.length).fill(0);for(let C=1;C<m.length;C++)E[C]=E[C-1]+m[C-1];for(let C=0;C<b.length;C++)if(b[C]===255)x.push(b[++C]);else{const k=m[b[C]],P=E[b[C]];for(let j=0;j<k;j++)x.push(d[P+j])}return new Uint8Array(x)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const r=this.indexBuffer[e];return Am(this.decodedDictionary,this.offsetBuffer[r],this.offsetBuffer[r+1])}offsetToLengthBuffer(e){const r=new Uint32Array(e.length-1);let d=e[0];for(let m=1;m<e.length;m++){const b=e[m];r[m-1]=b-d,d=b}return r}}function ch(s,e,r,d,m,b){return r.type==="scalarType"?(function(x,E,C,k,P,j){let U=null,G=0;if(x===0)return null;if(j.nullable){const X=ja(E,C);G=X.numValues;const J=C.get(),le=Em(E,G,C);C.set(J+X.byteLength),U=new Il(le,X.numValues)}const W=U??k;switch(P.physicalType){case 4:case 3:return(function(X,J,le,ve,ce){const de=ja(X,J),xe=cu(de,ce,X,J),Me=ve.physicalType===3;if(xe===Mr.FLAT){const qe=Xo(ce)?f_(X,J,de,Me,ce):Ba(X,J,de,Me);return new hy(le.name,qe,ce)}if(xe===Mr.SEQUENCE){const qe=h_(X,J,de);return new s_(le.name,qe[0],qe[1],de.numRleValues)}{const qe=u_(X,J,de,Me);return new o_(le.name,qe,ce)}})(E,C,j,P,W);case 9:return(function(X,J,le,ve,ce){let de=null,xe=null,Me=null,qe=null,ct=null,rt=null,mt=null,Rt=null;for(let _t=0;_t<ve;_t++){const ot=ja(J,le);if(ot.byteLength!==0)switch(ot.physicalStreamType){case pa.PRESENT:{const Je=Em(J,ot.numValues,le);rt=new Il(Je,ot.numValues);break}case pa.OFFSET:xe=ce!=null||rt!=null?f_(J,le,ot,!1,ce??rt):Ba(J,le,ot,!1);break;case pa.LENGTH:{const Je=lh(J,le,ot);Fa.DICTIONARY===ot.logicalStreamType.lengthType?de=Je:Fa.SYMBOL===ot.logicalStreamType.lengthType?qe=Je:mt=Je;break}case pa.DATA:{const Je=J.subarray(le.get(),le.get()+ot.byteLength);le.add(ot.byteLength);const Bt=ot.logicalStreamType.dictionaryType;Dl.FSST===Bt?ct=Je:Dl.SINGLE===Bt||Dl.SHARED===Bt?Me=Je:Dl.NONE===Bt&&(Rt=Je);break}}}return(function(_t,ot,Je,Bt,zt,Vt,Ot){return ot?new by(_t,Je,Bt,zt,Vt,ot,Ot):null})(X,ct,xe,de,Me,qe,ce??rt)??(function(_t,ot,Je,Bt,zt){return ot?zt?new Md(_t,Je,Bt,ot,zt):new Md(_t,Je,Bt,ot):null})(X,Me,xe,de,ce??rt)??(function(_t,ot,Je,Bt,zt){if(!ot||!Je)return null;if(Bt)return zt?new Md(_t,Bt,ot,Je,zt):new Md(_t,Bt,ot,Je);if(zt&&zt.size()!==ot.length-1){const Vt=new Int32Array(zt.size());let Ot=0;for(let Qt=0;Qt<zt.size();Qt++)Vt[Qt]=zt.get(Qt)?Ot++:0;return new Md(_t,Vt,ot,Je,zt)}return zt?new vy(_t,ot,Je,zt):new vy(_t,ot,Je)})(X,mt,Rt,xe,ce??rt)})(j.name,E,C,j.nullable?x-1:x,U);case 0:return(function(X,J,le,ve,ce){const de=ja(X,J),xe=de.numValues,Me=J.get(),qe=Xo(ce)?(function(rt,mt,Rt,_t){const ot=zb(rt,Math.ceil(mt/8),Rt),Je=new Il(ot,mt),Bt=_t.size(),zt=new Il(new Uint8Array(Bt),Bt);let Vt=0;for(let Ot=0;Ot<_t.size();Ot++){const Qt=!!_t.get(Ot)&&Je.get(Vt++);zt.set(Ot,Qt)}return zt.getBuffer()})(X,xe,J,ce):Em(X,xe,J);J.set(Me+de.byteLength);const ct=new Il(qe,xe);return new Nb(le.name,ct,ce)})(E,C,j,0,W);case 6:case 5:return(function(X,J,le,ve,ce){const de=ja(X,J),xe=cu(de,ve,X,J),Me=ce.physicalType===5;if(xe===Mr.FLAT){const qe=Xo(ve)?(function(ct,rt,mt,Rt,_t){return(function(ot,Je,Bt,zt){switch(Je.logicalLevelTechnique1){case Cn.DELTA:return Je.logicalLevelTechnique2===Cn.RLE&&(ot=Ib(ot,Je.runs,Je.numRleValues)),(function(Vt,Ot){const Qt=new BigInt64Array(Vt.size());let Wn=0;Vt.get(0)?(Qt[0]=Vt.get(0)?Ot[0]>>1n^-(1n&Ot[0]):0n,Wn=1):Qt[0]=0n;let On=1;for(;On!=Qt.length;++On)Qt[On]=Vt.get(On)?Qt[On-1]+(Ot[Wn]>>1n^-(1n&Ot[Wn++])):Qt[On-1];return Qt})(zt,ot);case Cn.RLE:return(function(Vt,Ot,Qt,Wn){const On=Ot;return Qt?(function(ar,Va,Qr){const sr=new BigInt64Array(ar.size());let Xi=0;for(let hi=0;hi<Qr;hi++){const br=Number(Va[hi]);let Cr=Va[hi+Qr];Cr=Cr>>1n^-(1n&Cr);for(let qi=Xi;qi<Xi+br;qi++)ar.get(qi)?sr[qi]=Cr:(sr[qi]=0n,Xi++);Xi+=br}return sr})(Wn,Vt,On.runs):(function(ar,Va,Qr){const sr=new BigInt64Array(ar.size());let Xi=0;for(let hi=0;hi<Qr;hi++){const br=Number(Va[hi]),Cr=Va[hi+Qr];for(let qi=Xi;qi<Xi+br;qi++)ar.get(qi)?sr[qi]=Cr:(sr[qi]=0n,Xi++);Xi+=br}return sr})(Wn,Vt,On.runs)})(ot,Je,Bt,zt);case Cn.NONE:return ot=Bt?(function(Vt,Ot){const Qt=new BigInt64Array(Vt.size());let Wn=0,On=0;for(;On!=Qt.length;++On)if(Vt.get(On)){const ar=Ot[Wn++];Qt[On]=ar>>1n^-(1n&ar)}else Qt[On]=0n;return Qt})(zt,ot):(function(Vt,Ot){const Qt=new BigInt64Array(Vt.size());let Wn=0,On=0;for(;On!=Qt.length;++On)Qt[On]=Vt.get(On)?Ot[Wn++]:0n;return Qt})(zt,ot),ot;default:throw new Error("The specified Logical level technique is not supported")}})(gm(ct,rt,mt.numValues),mt,Rt,_t)})(X,J,de,Me,ve):Kf(X,J,de,Me);return new Jf(le.name,qe,ve)}if(xe===Mr.SEQUENCE){const qe=Ad(X,J,de);return new p_(le.name,qe[0],qe[1],de.numRleValues)}{const qe=d_(X,J,de,Me);return new Sm(le.name,qe,ve)}})(E,C,j,W,P);case 7:return(function(X,J,le,ve){const ce=ja(X,J),de=Xo(ve)?(function(xe,Me,qe,ct){const rt=Me.get(),mt=rt+ct*Float32Array.BYTES_PER_ELEMENT,Rt=new Uint8Array(xe.subarray(rt,mt)).buffer,_t=new Float32Array(Rt);Me.set(mt);const ot=qe.size(),Je=new Float32Array(ot);let Bt=0;for(let zt=0;zt<ot;zt++)Je[zt]=qe.get(zt)?_t[Bt++]:0;return Je})(X,J,ve,ce.numValues):(function(xe,Me,qe){const ct=Me.get(),rt=ct+qe*Float32Array.BYTES_PER_ELEMENT,mt=new Uint8Array(xe.subarray(ct,rt)).buffer,Rt=new Float32Array(mt);return Me.set(rt),Rt})(X,J,ce.numValues);return new Pb(le.name,de,ve)})(E,C,j,W);case 8:return(function(X,J,le,ve){const ce=ja(X,J),de=Xo(ve)?(function(xe,Me,qe,ct){const rt=Me.get(),mt=rt+ct*Float64Array.BYTES_PER_ELEMENT,Rt=new Uint8Array(xe.subarray(rt,mt)).buffer,_t=new Float64Array(Rt);Me.set(mt);const ot=qe.size(),Je=new Float64Array(ot);let Bt=0;for(let zt=0;zt<ot;zt++)Je[zt]=qe.get(zt)?_t[Bt++]:0;return Je})(X,J,ve,ce.numValues):(function(xe,Me,qe){const ct=Me.get(),rt=ct+qe*Float64Array.BYTES_PER_ELEMENT,mt=new Uint8Array(xe.subarray(ct,rt)).buffer,Rt=new Float64Array(mt);return Me.set(rt),Rt})(X,J,ce.numValues);return new r_(le.name,de,ve)})(E,C,j,W);default:throw new Error(`The specified data type for the field is currently not supported: ${P}`)}})(d,s,e,m,r.scalarType,r):d!=1?null:(function(x,E,C,k){let P=null,j=null,U=null,G=null,W=!1;for(;!W;){const ve=ja(x,E);switch(ve.physicalStreamType){case pa.LENGTH:Fa.DICTIONARY===ve.logicalStreamType.lengthType?P=lh(x,E,ve):U=lh(x,E,ve);break;case pa.DATA:Dl.SINGLE===ve.logicalStreamType.dictionaryType||Dl.SHARED===ve.logicalStreamType.dictionaryType?(j=x.subarray(E.get(),E.get()+ve.byteLength),W=!0):G=x.subarray(E.get(),E.get()+ve.byteLength),E.add(ve.byteLength)}}const X=C.complexType.children,J=[];let le=0;for(const ve of X){const ce=Xr(x,E,1)[0];if(ce==0)continue;const de=`${C.name}${ve.name==="default"?"":":"+ve.name}`;if(ce!==2||ve.type!=="scalarField"||ve.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const xe=ja(x,E),Me=Em(x,xe.numValues,E),qe=ja(x,E),ct=qe.decompressedCount!==k?f_(x,E,qe,!1,new Il(Me,xe.numValues)):Ba(x,E,qe,!1);J[le++]=G?new by(de,ct,P,j,U,G,new Il(Me,xe.numValues)):new Md(de,ct,P,j,new Il(Me,xe.numValues))}return J})(s,e,r,m)}function Xo(s){return s instanceof Il}function uh(s){if(s.name==="id")return!1;if(s.type==="scalarType"){const e=s.scalarType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(e.type==="logicalType")return!1}else if(s.type==="complexType"){const e=s.complexType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",s),!1}const Mm=new TextDecoder;function np(s,e){const r=Xr(s,e,1)[0];if(r===0)return"";const d=e.get(),m=s.subarray(d,d+r);return e.add(r),Mm.decode(m)}function hu(s,e){const r=Xr(s,e,1)[0]>>>0,d=!!(4&r),m=!!(2&r),b=Xr(s,e,1)[0]>>>0,x={};if(1&r&&(x.nullable=!0),m){const E={};if(d?(E.type="logicalType",E.logicalType=b):(E.type="physicalType",E.physicalType=b),8&r){const C=Xr(s,e,1)[0]>>>0;E.children=new Array(C);for(let k=0;k<C;k++)E.children[k]=hu(s,e)}x.type="complexField",x.complexField=E}else{const E={};d?(E.type="logicalType",E.logicalType=b):(E.type="physicalType",E.physicalType=b),x.type="scalarField",x.scalarField=E}return x}function M1(s,e){const r=Xr(s,e,1)[0]>>>0,d=(function(m){switch(m){case 0:case 1:case 2:case 3:{const b={};b.nullable=!!(1&m),b.columnScope=0;const x={};return x.physicalType=m>1?6:4,x.type="physicalType",b.scalarType=x,b.type="scalarType",b}case 4:{const b={nullable:!1,columnScope:0},x={type:"physicalType",physicalType:0};return b.type="complexType",b.complexType=x,b}case 30:{const b={nullable:!1,columnScope:0},x={type:"physicalType",physicalType:1};return b.type="complexType",b.complexType=x,b}default:return(function(b){let x=null;switch(b){case 10:case 11:x=0;break;case 12:case 13:x=1;break;case 14:case 15:x=2;break;case 16:case 17:x=3;break;case 18:case 19:x=4;break;case 20:case 21:x=5;break;case 22:case 23:x=6;break;case 24:case 25:x=7;break;case 26:case 27:x=8;break;case 28:case 29:x=9;break;default:return null}const E={};E.nullable=!!(1&b),E.columnScope=0;const C={type:"physicalType"};return C.physicalType=x,E.type="scalarType",E.scalarType=C,E})(m)}})(r);if(!d)throw new Error(`Unsupported column type code: ${r}`);if((function(m){return m>=10})(r)?d.name=np(s,e):r>=0&&r<=3?d.name="id":r===4&&(d.name="geometry"),(function(m){return m===30})(r)){const m=Xr(s,e,1)[0]>>>0,b=d.complexType;b.children=new Array(m);for(let x=0;x<m;x++)b.children[x]=hu(s,e)}return d}function Fb(s,e){const r={featureTables:[]},d={};d.name=np(s,e);const m=Xr(s,e,1)[0]>>>0,b=Xr(s,e,1)[0]>>>0;d.columns=new Array(b);for(let x=0;x<b;x++)d.columns[x]=M1(s,e);return r.featureTables.push(d),[r,m]}function Cm(s,e,r,d,m,b,x=!1){const E=e.scalarType.physicalType,C=cu(m,b,s,r);if(E===4)switch(C){case Mr.FLAT:{const k=Ba(s,r,m,!1);return new hy(d,k,b)}case Mr.SEQUENCE:{const k=h_(s,r,m);return new s_(d,k[0],k[1],m.numRleValues)}case Mr.CONST:{const k=u_(s,r,m,!1);return new o_(d,k,b)}}else switch(C){case Mr.FLAT:{if(x){const P=(function(j,U,G,W){const X=(function(J,le,ve){const ce=new Float64Array(le);for(let de=0;de<le;de++)ce[de]=Db(J,ve);return ce})(j,G.numValues,U);return(function(J,le,ve){switch(le.logicalLevelTechnique1){case Cn.DELTA:return le.logicalLevelTechnique2===Cn.RLE&&(J=Rb(J,le.runs,le.numRleValues)),(function(ce){ce[0]=ce[0]%2==1?(ce[0]+1)/-2:ce[0]/2;const de=ce.length/4*4;let xe=1;if(de>=4)for(;xe<de-4;xe+=4){const Me=ce[xe],qe=ce[xe+1],ct=ce[xe+2],rt=ce[xe+3];ce[xe]=(Me%2==1?(Me+1)/-2:Me/2)+ce[xe-1],ce[xe+1]=(qe%2==1?(qe+1)/-2:qe/2)+ce[xe],ce[xe+2]=(ct%2==1?(ct+1)/-2:ct/2)+ce[xe+1],ce[xe+3]=(rt%2==1?(rt+1)/-2:rt/2)+ce[xe+2]}for(;xe!=ce.length;++xe)ce[xe]=(ce[xe]%2==1?(ce[xe]+1)/-2:ce[xe]/2)+ce[xe-1]})(J),J;case Cn.RLE:return(function(ce,de,xe){return Rb(ce,de.runs,de.numRleValues)})(J,le);case Cn.NONE:return J;default:throw new Error(`The specified Logical level technique is not supported: ${le.logicalLevelTechnique1}`)}})(X,G)})(s,r,m);return new r_(d,P,b)}const k=Kf(s,r,m,!1);return new Jf(d,k,b)}case Mr.SEQUENCE:{const k=Ad(s,r,m);return new p_(d,k[0],k[1],m.numRleValues)}case Mr.CONST:{const k=d_(s,r,m,!1);return new Sm(d,k,b)}}throw new Error("Vector type not supported for id column.")}class C1{constructor(e,r){var d;switch(this._featureData=e,this.properties=this._featureData.properties||{},(d=this._featureData.geometry)===null||d===void 0?void 0:d.type){case Wr.POINT:case Wr.MULTIPOINT:this.type=1;break;case Wr.LINESTRING:case Wr.MULTILINESTRING:this.type=2;break;case Wr.POLYGON:case Wr.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=r,this.id=Number(this._featureData.id)}loadGeometry(){const e=[];for(const r of this._featureData.geometry.coordinates){const d=[];for(const m of r)d.push(new A(m.x,m.y));e.push(d)}return e}}class jb{constructor(e){this.features=[],this.featureTable=e,this.name=e.name,this.extent=e.extent,this.version=2,this.features=e.getFeatures(),this.length=this.features.length}feature(e){return new C1(this.features[e],this.extent)}}class Dm{constructor(e){this.layers={};const r=(function(d,m,b=!0){const x=new Cb(0),E=[];for(;x.get()<d.length;){const C=Xr(d,x,1)[0]>>>0,k=x.get()+C;if(k>d.length)throw new Error(`Block overruns tile: ${k} > ${d.length}`);if(Xr(d,x,1)[0]>>>0!=1){x.set(k);continue}const P=Fb(d,x),j=P[1],U=P[0].featureTables[0];let G=null,W=null;const X=[];let J=0;for(const ve of U.columns){const ce=ve.name;if(ce==="id"){let de=null;if(ve.nullable){const Me=ja(d,x),qe=x.get(),ct=Em(d,Me.numValues,x);x.set(qe+Me.byteLength),de=new Il(ct,Me.numValues)}const xe=ja(d,x);J=xe.decompressedCount,G=Cm(d,ve,x,ce,xe,de??J,b)}else if(ce==="geometry"){const de=Xr(d,x,1)[0];if(J===0){const xe=x.get();J=ja(d,x).decompressedCount,x.set(xe)}W=Lb(d,de,x,J)}else{const de=uh(ve)?Xr(d,x,1)[0]:1;if(de===0&&ve.type==="scalarType")continue;const xe=ch(d,x,ve,de,J);if(xe)if(Array.isArray(xe))for(const Me of xe)X.push(Me);else X.push(xe)}}const le=new ah(U.name,W,G,X,j);E.push(le),x.set(k)}return E})(new Uint8Array(e));this.layers=r.reduce(((d,m)=>Object.assign(Object.assign({},d),{[m.name]:new jb(m)})),{})}}class Bb{constructor(e,r){this.feature=e,this.type=e.type,this.properties=e.tags?e.tags:{},this.extent=r,"id"in e&&(typeof e.id=="string"?this.id=parseInt(e.id,10):typeof e.id!="number"||isNaN(e.id)||(this.id=e.id))}loadGeometry(){const e=[],r=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const d of r){const m=[];for(const b of d)m.push(new A(b[0],b[1]));e.push(m)}return e}}const Im="_geojsonTileLayer";function xy(s,e){e.writeVarintField(15,s.version||1),e.writeStringField(1,s.name||""),e.writeVarintField(5,s.extent||4096);const r={keys:[],values:[],keycache:{},valuecache:{}};for(let b=0;b<s.length;b++)r.feature=s.feature(b),e.writeMessage(2,wy,r);const d=r.keys;for(const b of d)e.writeStringField(3,b);const m=r.values;for(const b of m)e.writeMessage(4,Ty,b)}function wy(s,e){if(!s.feature)return;const r=s.feature;r.id!==void 0&&e.writeVarintField(1,r.id),e.writeMessage(2,Vb,s),e.writeVarintField(3,r.type),e.writeMessage(4,x_,r)}function Vb(s,e){for(const r in s.feature?.properties){let d=s.feature.properties[r],m=s.keycache[r];if(d==null)continue;m===void 0&&(s.keys.push(r),m=s.keys.length-1,s.keycache[r]=m),e.writeVarint(m),typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"&&(d=JSON.stringify(d));const b=typeof d+":"+d;let x=s.valuecache[b];x===void 0&&(s.values.push(d),x=s.values.length-1,s.valuecache[b]=x),e.writeVarint(x)}}function hh(s,e){return(e<<3)+(7&s)}function b_(s){return s<<1^s>>31}function x_(s,e){const r=s.loadGeometry(),d=s.type;let m=0,b=0;for(const x of r){let E=1;d===1&&(E=x.length),e.writeVarint(hh(1,E));const C=d===3?x.length-1:x.length;for(let k=0;k<C;k++){k===1&&d!==1&&e.writeVarint(hh(2,C-1));const P=x[k].x-m,j=x[k].y-b;e.writeVarint(b_(P)),e.writeVarint(b_(j)),m+=P,b+=j}s.type===3&&e.writeVarint(hh(7,1))}}function Ty(s,e){const r=typeof s;r==="string"?e.writeStringField(1,s):r==="boolean"?e.writeBooleanField(7,s):r==="number"&&(s%1!=0?e.writeDoubleField(3,s):s<0?e.writeSVarintField(6,s):e.writeVarintField(5,s))}class w_{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new rc(gt,16,0),this.grid3D=new rc(gt,16,0),this.featureIndexArray=new se,this.promoteId=r}insert(e,r,d,m,b,x){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,b);const C=x?this.grid3D:this.grid;for(let k=0;k<r.length;k++){const P=r[k],j=[1/0,1/0,-1/0,-1/0];for(let U=0;U<P.length;U++){const G=P[U];j[0]=Math.min(j[0],G.x),j[1]=Math.min(j[1],G.y),j[2]=Math.max(j[2],G.x),j[3]=Math.max(j[3],G.y)}j[0]<gt&&j[1]<gt&&j[2]>=0&&j[3]>=0&&C.insert(E,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new Un(new Wg(this.rawTileData)).layers:new Dm(this.rawTileData).layers,this.sourceLayerCoder=new i_(this.vtLayers?Object.keys(this.vtLayers).sort():[Im])),this.vtLayers}query(e,r,d,m){this.loadVTLayers();const b=e.params,x=gt/e.tileSize/e.scale,E=Ra(b.filter,b.globalState),C=e.queryGeometry,k=e.queryPadding*x,P=ih.fromPoints(C),j=this.grid.query(P.minX-k,P.minY-k,P.maxX+k,P.maxY+k),U=ih.fromPoints(e.cameraQueryGeometry).expandBy(k),G=this.grid3D.query(U.minX,U.minY,U.maxX,U.maxY,((J,le,ve,ce)=>(function(de,xe,Me,qe,ct){for(const mt of de)if(xe<=mt.x&&Me<=mt.y&&qe>=mt.x&&ct>=mt.y)return!0;const rt=[new A(xe,Me),new A(xe,ct),new A(qe,ct),new A(qe,Me)];if(de.length>2){for(const mt of rt)if(cc(de,mt))return!0}for(let mt=0;mt<de.length-1;mt++)if(qv(de[mt],de[mt+1],rt))return!0;return!1})(e.cameraQueryGeometry,J-k,le-k,ve+k,ce+k)));for(const J of G)j.push(J);j.sort(Sy);const W={};let X;for(let J=0;J<j.length;J++){const le=j[J];if(le===X)continue;X=le;const ve=this.featureIndexArray.get(le);let ce=null;this.loadMatchingFeature(W,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,E,b.layers,b.availableImages,r,d,m,((de,xe,Me)=>(ce||(ce=Sl(de)),xe.queryIntersectsFeature({queryGeometry:C,feature:de,featureState:Me,geometry:ce,zoom:this.z,transform:e.transform,pixelsToTileUnits:x,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation}))))}return W}loadMatchingFeature(e,r,d,m,b,x,E,C,k,P,j){const U=this.bucketLayerIDs[r];if(x&&!U.some((J=>x.has(J))))return;const G=this.sourceLayerCoder.decode(d),W=this.vtLayers[G].feature(m);if(b.needGeometry){const J=Ks(W,!0);if(!b.filter(new ni(this.tileID.overscaledZ),J,this.tileID.canonical))return}else if(!b.filter(new ni(this.tileID.overscaledZ),W))return;const X=this.getId(W,G);for(let J=0;J<U.length;J++){const le=U[J];if(x&&!x.has(le))continue;const ve=C[le];if(!ve)continue;let ce={};X&&P&&(ce=P.getState(ve.sourceLayer||Im,X));const de=on({},k[le]);de.paint=Ub(de.paint,ve.paint,W,ce,E),de.layout=Ub(de.layout,ve.layout,W,ce,E);const xe=!j||j(W,ve,ce);if(!xe)continue;const Me=new cy(W,this.z,this.x,this.y,X);Me.layer=de;let qe=e[le];qe===void 0&&(qe=e[le]=[]),qe.push({featureIndex:m,feature:Me,intersectionZ:xe})}}lookupSymbolFeatures(e,r,d,m,b,x,E,C){const k={};this.loadVTLayers();const P=Ra(b.filterSpec,b.globalState);for(const j of e)this.loadMatchingFeature(k,d,m,j,P,x,E,C,r);return k}hasLayer(e){for(const r of this.bucketLayerIDs)for(const d of r)if(e===d)return!0;return!1}getId(e,r){var d;let m=e.id;return this.promoteId&&(m=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((d=e.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(m=Number(e.properties.cluster_id))),m}}function Ub(s,e,r,d,m){return Ri(s,((b,x)=>{const E=e instanceof Yc?e.get(x):null;return E&&E.evaluate?E.evaluate(r,d,m):E}))}function Sy(s,e){return e-s}function o(s,e,r,d,m){const b=[];for(let x=0;x<s.length;x++){const E=s[x];let C;for(let k=0;k<E.length-1;k++){let P=E[k],j=E[k+1];P.x<e&&j.x<e||(P.x<e?P=new A(e,P.y+(e-P.x)/(j.x-P.x)*(j.y-P.y))._round():j.x<e&&(j=new A(e,P.y+(e-P.x)/(j.x-P.x)*(j.y-P.y))._round()),P.y<r&&j.y<r||(P.y<r?P=new A(P.x+(r-P.y)/(j.y-P.y)*(j.x-P.x),r)._round():j.y<r&&(j=new A(P.x+(r-P.y)/(j.y-P.y)*(j.x-P.x),r)._round()),P.x>=d&&j.x>=d||(P.x>=d?P=new A(d,P.y+(d-P.x)/(j.x-P.x)*(j.y-P.y))._round():j.x>=d&&(j=new A(d,P.y+(d-P.x)/(j.x-P.x)*(j.y-P.y))._round()),P.y>=m&&j.y>=m||(P.y>=m?P=new A(P.x+(m-P.y)/(j.y-P.y)*(j.x-P.x),m)._round():j.y>=m&&(j=new A(P.x+(m-P.y)/(j.y-P.y)*(j.x-P.x),m)._round()),C&&P.equals(C[C.length-1])||(C=[P],b.push(C)),C.push(j)))))}}return b}function u(s,e,r,d,m){switch(e){case 1:return(function(b,x,E,C){const k=[];for(const P of b)for(const j of P){const U=C===0?j.x:j.y;U>=x&&U<=E&&k.push([j])}return k})(s,r,d,m);case 2:return T(s,r,d,m,!1);case 3:return T(s,r,d,m,!0)}return[]}function y(s,e,r,d,m){const b=d===0?R:N;let x=[];const E=[];for(let P=0;P<s.length-1;P++){const j=s[P],U=s[P+1],G=d===0?j.x:j.y,W=d===0?U.x:U.y;let X=!1;G<e?W>e&&x.push(b(j,U,e)):G>r?W<r&&x.push(b(j,U,r)):x.push(j),W<e&&G>=e&&(x.push(b(j,U,e)),X=!0),W>r&&G<=r&&(x.push(b(j,U,r)),X=!0),!m&&X&&(E.push(x),x=[])}const C=s.length-1,k=d===0?s[C].x:s[C].y;return k>=e&&k<=r&&x.push(s[C]),m&&x.length>0&&!x[0].equals(x[x.length-1])&&x.push(new A(x[0].x,x[0].y)),x.length>0&&E.push(x),E}function T(s,e,r,d,m){const b=[];for(const x of s){const E=y(x,e,r,d,m);E.length>0&&b.push(...E)}return b}function R(s,e,r){return new A(r,s.y+(r-s.x)/(e.x-s.x)*(e.y-s.y))}function N(s,e,r){return new A(s.x+(r-s.y)/(e.y-s.y)*(e.x-s.x),r)}Pt("FeatureIndex",w_,{omit:["rawTileData","sourceLayerCoder"]});class H extends A{constructor(e,r,d,m){super(e,r),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new H(this.x,this.y,this.angle,this.segment)}}function ue(s,e,r,d,m){if(e.segment===void 0||r===0)return!0;let b=e,x=e.segment+1,E=0;for(;E>-r/2;){if(x--,x<0)return!1;E-=s[x].dist(b),b=s[x]}E+=s[x].dist(s[x+1]),x++;const C=[];let k=0;for(;E<r/2;){const P=s[x],j=s[x+1];if(!j)return!1;let U=s[x-1].angleTo(P)-P.angleTo(j);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:E,angleDelta:U}),k+=U;E-C[0].distance>d;)k-=C.shift().angleDelta;if(k>m)return!1;x++,E+=P.dist(j)}return!0}function Oe(s){let e=0;for(let r=0;r<s.length-1;r++)e+=s[r].dist(s[r+1]);return e}function et(s,e,r){return s?.6*e*r:0}function ft(s,e){return Math.max(s?s.right-s.left:0,e?e.right-e.left:0)}function bt(s,e,r,d,m,b){const x=et(r,m,b),E=ft(r,d)*b;let C=0;const k=Oe(s)/2;for(let P=0;P<s.length-1;P++){const j=s[P],U=s[P+1],G=j.dist(U);if(C+G>k){const W=(k-C)/G,X=Ui.number(j.x,U.x,W),J=Ui.number(j.y,U.y,W),le=new H(X,J,U.angleTo(j),P);return le._round(),!x||ue(s,le,E,x,e)?le:void 0}C+=G}}function nt(s,e,r,d,m,b,x,E,C){const k=et(d,b,x),P=ft(d,m),j=P*x,U=s[0].x===0||s[0].x===C||s[0].y===0||s[0].y===C;return e-j<e/4&&(e=j+e/4),st(s,U?e/2*E%e:(P/2+2*b)*x*E%e,e,k,r,j,U,!1,C)}function st(s,e,r,d,m,b,x,E,C){const k=b/2,P=Oe(s);let j=0,U=e-r,G=[];for(let W=0;W<s.length-1;W++){const X=s[W],J=s[W+1],le=X.dist(J),ve=J.angleTo(X);for(;U+r<j+le;){U+=r;const ce=(U-j)/le,de=Ui.number(X.x,J.x,ce),xe=Ui.number(X.y,J.y,ce);if(de>=0&&de<C&&xe>=0&&xe<C&&U-k>=0&&U+k<=P){const Me=new H(de,xe,ve,W);Me._round(),d&&!ue(s,Me,b,d,m)||G.push(Me)}}j+=le}return E||G.length||x||(G=st(s,j/2,r,d,m,b,x,!0,C)),G}function Wt(s,e,r,d){const m=[],b=s.image,x=b.pixelRatio,E=b.paddedRect.w-2,C=b.paddedRect.h-2;let k={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const P=b.stretchX||[[0,E]],j=b.stretchY||[[0,C]],U=(Je,Bt)=>Je+Bt[1]-Bt[0],G=P.reduce(U,0),W=j.reduce(U,0),X=E-G,J=C-W;let le=0,ve=G,ce=0,de=W,xe=0,Me=X,qe=0,ct=J;if(b.content&&d){const Je=b.content,Bt=Je[2]-Je[0],zt=Je[3]-Je[1];(b.textFitWidth||b.textFitHeight)&&(k=lu(s)),le=sn(P,0,Je[0]),ce=sn(j,0,Je[1]),ve=sn(P,Je[0],Je[2]),de=sn(j,Je[1],Je[3]),xe=Je[0]-le,qe=Je[1]-ce,Me=Bt-ve,ct=zt-de}const rt=k.x1,mt=k.y1,Rt=k.x2-rt,_t=k.y2-mt,ot=(Je,Bt,zt,Vt)=>{const Ot=Ge(Je.stretch-le,ve,Rt,rt),Qt=Be(Je.fixed-xe,Me,Je.stretch,G),Wn=Ge(Bt.stretch-ce,de,_t,mt),On=Be(Bt.fixed-qe,ct,Bt.stretch,W),ar=Ge(zt.stretch-le,ve,Rt,rt),Va=Be(zt.fixed-xe,Me,zt.stretch,G),Qr=Ge(Vt.stretch-ce,de,_t,mt),sr=Be(Vt.fixed-qe,ct,Vt.stretch,W),Xi=new A(Ot,Wn),hi=new A(ar,Wn),br=new A(ar,Qr),Cr=new A(Ot,Qr),qi=new A(Qt/x,On/x),no=new A(Va/x,sr/x),Ua=e*Math.PI/180;if(Ua){const ga=Math.sin(Ua),dr=Math.cos(Ua),Kr=[dr,-ga,ga,dr];Xi._matMult(Kr),hi._matMult(Kr),Cr._matMult(Kr),br._matMult(Kr)}const io=Je.stretch+Je.fixed,mc=Bt.stretch+Bt.fixed;return{tl:Xi,tr:hi,bl:Cr,br,tex:{x:b.paddedRect.x+1+io,y:b.paddedRect.y+1+mc,w:zt.stretch+zt.fixed-io,h:Vt.stretch+Vt.fixed-mc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:qi,pixelOffsetBR:no,minFontScaleX:Me/x/Rt,minFontScaleY:ct/x/_t,isSDF:r}};if(d&&(b.stretchX||b.stretchY)){const Je=Ei(P,X,G),Bt=Ei(j,J,W);for(let zt=0;zt<Je.length-1;zt++){const Vt=Je[zt],Ot=Je[zt+1];for(let Qt=0;Qt<Bt.length-1;Qt++)m.push(ot(Vt,Bt[Qt],Ot,Bt[Qt+1]))}}else m.push(ot({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:C+1}));return m}function sn(s,e,r){let d=0;for(const m of s)d+=Math.max(e,Math.min(r,m[1]))-Math.max(e,Math.min(r,m[0]));return d}function Ei(s,e,r){const d=[{fixed:-1,stretch:0}];for(const[m,b]of s){const x=d[d.length-1];d.push({fixed:m-x.stretch,stretch:x.stretch}),d.push({fixed:m-x.stretch,stretch:x.stretch+(b-m)})}return d.push({fixed:e+1,stretch:r}),d}function Ge(s,e,r,d){return s/e*r+d}function Be(s,e,r,d){return s-e*r/d}Pt("Anchor",H);class Ke{constructor(e,r,d,m,b,x,E,C,k,P){var j;if(this.boxStartIndex=e.length,k){let U=x.top,G=x.bottom;const W=x.collisionPadding;W&&(U-=W[1],G+=W[3]);let X=G-U;X>0&&(X=Math.max(10,X),this.circleDiameter=X)}else{const U=!((j=x.image)===null||j===void 0)&&j.content&&(x.image.textFitWidth||x.image.textFitHeight)?lu(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};U.y1=U.y1*E-C[0],U.y2=U.y2*E+C[2],U.x1=U.x1*E-C[3],U.x2=U.x2*E+C[1];const G=x.collisionPadding;if(G&&(U.x1-=G[0]*E,U.y1-=G[1]*E,U.x2+=G[2]*E,U.y2+=G[3]*E),P){const W=new A(U.x1,U.y1),X=new A(U.x2,U.y1),J=new A(U.x1,U.y2),le=new A(U.x2,U.y2),ve=P*Math.PI/180;W._rotate(ve),X._rotate(ve),J._rotate(ve),le._rotate(ve),U.x1=Math.min(W.x,X.x,J.x,le.x),U.x2=Math.max(W.x,X.x,J.x,le.x),U.y1=Math.min(W.y,X.y,J.y,le.y),U.y2=Math.max(W.y,X.y,J.y,le.y)}e.emplaceBack(r.x,r.y,U.x1,U.y1,U.x2,U.y2,d,m,b)}this.boxEndIndex=e.length}}class yt{constructor(e=[],r=(d,m)=>d<m?-1:d>m?1:0){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:d}=this,m=r[e];for(;e>0;){const b=e-1>>1,x=r[b];if(d(m,x)>=0)break;r[e]=x,e=b}r[e]=m}_down(e){const{data:r,compare:d}=this,m=this.length>>1,b=r[e];for(;e<m;){let x=1+(e<<1);const E=x+1;if(E<this.length&&d(r[E],r[x])<0&&(x=E),d(r[x],b)>=0)break;r[e]=r[x],e=x}r[e]=b}}function rn(s,e=1,r=!1){const d=ih.fromPoints(s[0]),m=Math.min(d.width(),d.height());let b=m/2;const x=new yt([],ui),{minX:E,minY:C,maxX:k,maxY:P}=d;if(m===0)return new A(E,C);for(let G=E;G<k;G+=m)for(let W=C;W<P;W+=m)x.push(new Xt(G+b,W+b,b,s));let j=(function(G){let W=0,X=0,J=0;const le=G[0];for(let ve=0,ce=le.length,de=ce-1;ve<ce;de=ve++){const xe=le[ve],Me=le[de],qe=xe.x*Me.y-Me.x*xe.y;X+=(xe.x+Me.x)*qe,J+=(xe.y+Me.y)*qe,W+=3*qe}return new Xt(X/W,J/W,0,G)})(s),U=x.length;for(;x.length;){const G=x.pop();(G.d>j.d||!j.d)&&(j=G,r&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,U)),G.max-j.d<=e||(b=G.h/2,x.push(new Xt(G.p.x-b,G.p.y-b,b,s)),x.push(new Xt(G.p.x+b,G.p.y-b,b,s)),x.push(new Xt(G.p.x-b,G.p.y+b,b,s)),x.push(new Xt(G.p.x+b,G.p.y+b,b,s)),U+=4)}return r&&(console.log(`num probes: ${U}`),console.log(`best distance: ${j.d}`)),j.p}function ui(s,e){return e.max-s.max}function Xt(s,e,r,d){this.p=new A(s,e),this.h=r,this.d=(function(m,b){let x=!1,E=1/0;for(let C=0;C<b.length;C++){const k=b[C];for(let P=0,j=k.length,U=j-1;P<j;U=P++){const G=k[P],W=k[U];G.y>m.y!=W.y>m.y&&m.x<(W.x-G.x)*(m.y-G.y)/(W.y-G.y)+G.x&&(x=!x),E=Math.min(E,E0(m,G,W))}}return(x?1:-1)*Math.sqrt(E)})(this.p,d),this.max=this.d+this.h*Math.SQRT2}var en;_.aP=void 0,(en=_.aP||(_.aP={}))[en.center=1]="center",en[en.left=2]="left",en[en.right=3]="right",en[en.top=4]="top",en[en.bottom=5]="bottom",en[en["top-left"]=6]="top-left",en[en["top-right"]=7]="top-right",en[en["bottom-left"]=8]="bottom-left",en[en["bottom-right"]=9]="bottom-right";const jn=Number.POSITIVE_INFINITY;function ri(s,e){return e[1]!==jn?(function(r,d,m){let b=0,x=0;switch(d=Math.abs(d),m=Math.abs(m),r){case"top-right":case"top-left":case"top":x=m-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-m}switch(r){case"top-right":case"bottom-right":case"right":b=-d;break;case"top-left":case"bottom-left":case"left":b=d}return[b,x]})(s,e[0],e[1]):(function(r,d){let m=0,b=0;d<0&&(d=0);const x=d/Math.SQRT2;switch(r){case"top-right":case"top-left":b=x-7;break;case"bottom-right":case"bottom-left":b=7-x;break;case"bottom":b=7-d;break;case"top":b=d-7}switch(r){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=d;break;case"right":m=-d}return[m,b]})(s,e[0])}function du(s,e,r){var d;const m=s.layout,b=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(e,{},r);if(b){const E=b.values,C=[];for(let k=0;k<E.length;k+=2){const P=C[k]=E[k],j=E[k+1].map((U=>U*Nr));P.startsWith("top")?j[1]-=7:P.startsWith("bottom")&&(j[1]+=7),C[k+1]=j}return new Ji(C)}const x=m.get("text-variable-anchor");if(x){let E;E=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(e,{},r)*Nr,jn]:m.get("text-offset").evaluate(e,{},r).map((k=>k*Nr));const C=[];for(const k of x)C.push(k,ri(k,E));return new Ji(C)}return null}function T_(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function EI(s,e,r,d,m,b,x,E,C,k,P,j){let U=b.textMaxSize.evaluate(e,{});U===void 0&&(U=x);const G=s.layers[0].layout,W=G.get("icon-offset").evaluate(e,{},P),X=MT(r.horizontal),J=x/24,le=s.tilePixelRatio*J,ve=s.tilePixelRatio*U/24,ce=s.tilePixelRatio*E,de=s.tilePixelRatio*G.get("symbol-spacing"),xe=G.get("text-padding")*s.tilePixelRatio,Me=(function(zt,Vt,Ot,Qt=1){const Wn=zt.get("icon-padding").evaluate(Vt,{},Ot),On=Wn&&Wn.values;return[On[0]*Qt,On[1]*Qt,On[2]*Qt,On[3]*Qt]})(G,e,P,s.tilePixelRatio),qe=G.get("text-max-angle")/180*Math.PI,ct=G.get("text-rotation-alignment")!=="viewport"&&G.get("symbol-placement")!=="point",rt=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",mt=G.get("symbol-placement"),Rt=de/2,_t=G.get("icon-text-fit");let ot;d&&_t!=="none"&&(s.allowVerticalPlacement&&r.vertical&&(ot=Ml(d,r.vertical,_t,G.get("icon-text-fit-padding"),W,J)),X&&(d=Ml(d,X,_t,G.get("icon-text-fit-padding"),W,J)));const Je=P?j.line.getGranularityForZoomLevel(P.z):1,Bt=(zt,Vt)=>{Vt.x<0||Vt.x>=gt||Vt.y<0||Vt.y>=gt||(function(Ot,Qt,Wn,On,ar,Va,Qr,sr,Xi,hi,br,Cr,qi,no,Ua,io,mc,ga,dr,Kr,xr,ya,Cd,fu,A_){const ip=Ot.addToLineVertexArray(Qt,Wn);let Rm,Ey,Ay,My,RT=0,kT=0,OT=0,LT=0,P1=-1,z1=-1;const Dd={};let NT=ir("");if(Ot.allowVerticalPlacement&&On.vertical){const cs=sr.layout.get("text-rotate").evaluate(xr,{},fu)+90;Ay=new Ke(Xi,Qt,hi,br,Cr,On.vertical,qi,no,Ua,cs),Qr&&(My=new Ke(Xi,Qt,hi,br,Cr,Qr,mc,ga,Ua,cs))}if(ar){const cs=sr.layout.get("icon-rotate").evaluate(xr,{}),Rl=sr.layout.get("icon-text-fit")!=="none",km=Wt(ar,cs,Cd,Rl),mu=Qr?Wt(Qr,cs,Cd,Rl):void 0;Ey=new Ke(Xi,Qt,hi,br,Cr,ar,mc,ga,!1,cs),RT=4*km.length;const Om=Ot.iconSizeData;let dh=null;Om.kind==="source"?(dh=[eo*sr.layout.get("icon-size").evaluate(xr,{})],dh[0]>th&&Nn(`${Ot.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Om.kind==="composite"&&(dh=[eo*ya.compositeIconSizes[0].evaluate(xr,{},fu),eo*ya.compositeIconSizes[1].evaluate(xr,{},fu)],(dh[0]>th||dh[1]>th)&&Nn(`${Ot.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ot.addSymbols(Ot.icon,km,dh,Kr,dr,xr,_.az.none,Qt,ip.lineStartIndex,ip.lineLength,-1,fu),P1=Ot.icon.placedSymbolArray.length-1,mu&&(kT=4*mu.length,Ot.addSymbols(Ot.icon,mu,dh,Kr,dr,xr,_.az.vertical,Qt,ip.lineStartIndex,ip.lineLength,-1,fu),z1=Ot.icon.placedSymbolArray.length-1)}const PT=Object.keys(On.horizontal);for(const cs of PT){const Rl=On.horizontal[cs];if(!Rm){NT=ir(Rl.text);const mu=sr.layout.get("text-rotate").evaluate(xr,{},fu);Rm=new Ke(Xi,Qt,hi,br,Cr,Rl,qi,no,Ua,mu)}const km=Rl.positionedLines.length===1;if(OT+=AT(Ot,Qt,Rl,Va,sr,Ua,xr,io,ip,On.vertical?_.az.horizontal:_.az.horizontalOnly,km?PT:[cs],Dd,P1,ya,fu),km)break}On.vertical&&(LT+=AT(Ot,Qt,On.vertical,Va,sr,Ua,xr,io,ip,_.az.vertical,["vertical"],Dd,z1,ya,fu));const CI=Rm?Rm.boxStartIndex:Ot.collisionBoxArray.length,DI=Rm?Rm.boxEndIndex:Ot.collisionBoxArray.length,II=Ay?Ay.boxStartIndex:Ot.collisionBoxArray.length,RI=Ay?Ay.boxEndIndex:Ot.collisionBoxArray.length,kI=Ey?Ey.boxStartIndex:Ot.collisionBoxArray.length,OI=Ey?Ey.boxEndIndex:Ot.collisionBoxArray.length,LI=My?My.boxStartIndex:Ot.collisionBoxArray.length,NI=My?My.boxEndIndex:Ot.collisionBoxArray.length;let pu=-1;const $b=(cs,Rl)=>cs&&cs.circleDiameter?Math.max(cs.circleDiameter,Rl):Rl;pu=$b(Rm,pu),pu=$b(Ay,pu),pu=$b(Ey,pu),pu=$b(My,pu);const zT=pu>-1?1:0;zT&&(pu*=A_/Nr),Ot.glyphOffsetArray.length>=Hf.MAX_GLYPHS&&Nn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),xr.sortKey!==void 0&&Ot.addToSortKeyRanges(Ot.symbolInstances.length,xr.sortKey);const PI=du(sr,xr,fu),[zI,FI]=(function(cs,Rl){const km=cs.length,mu=Rl?.values;if(mu?.length>0)for(let Om=0;Om<mu.length;Om+=2){const dh=mu[Om+1];cs.emplaceBack(_.aP[mu[Om]],dh[0],dh[1])}return[km,cs.length]})(Ot.textAnchorOffsets,PI);Ot.symbolInstances.emplaceBack(Qt.x,Qt.y,Dd.right>=0?Dd.right:-1,Dd.center>=0?Dd.center:-1,Dd.left>=0?Dd.left:-1,Dd.vertical||-1,P1,z1,NT,CI,DI,II,RI,kI,OI,LI,NI,hi,OT,LT,RT,kT,zT,0,qi,pu,zI,FI)})(s,Vt,zt,r,d,m,ot,s.layers[0],s.collisionBoxArray,e.index,e.sourceLayerIndex,s.index,le,[xe,xe,xe,xe],ct,C,ce,Me,rt,W,e,b,k,P,x)};if(mt==="line")for(const zt of o(e.geometry,0,0,gt,gt)){const Vt=iu(zt,Je),Ot=nt(Vt,de,qe,r.vertical||X,d,24,ve,s.overscaling,gt);for(const Qt of Ot)X&&AI(s,X.text,Rt,Qt)||Bt(Vt,Qt)}else if(mt==="line-center"){for(const zt of e.geometry)if(zt.length>1){const Vt=iu(zt,Je),Ot=bt(Vt,qe,r.vertical||X,d,24,ve);Ot&&Bt(Vt,Ot)}}else if(e.type==="Polygon")for(const zt of qh(e.geometry,0)){const Vt=rn(zt,16);Bt(iu(zt[0],Je,!0),new H(Vt.x,Vt.y,0))}else if(e.type==="LineString")for(const zt of e.geometry){const Vt=iu(zt,Je);Bt(Vt,new H(Vt[0].x,Vt[0].y,0))}else if(e.type==="Point")for(const zt of e.geometry)for(const Vt of zt)Bt([Vt],new H(Vt.x,Vt.y,0))}function AT(s,e,r,d,m,b,x,E,C,k,P,j,U,G,W){const X=(function(ve,ce,de,xe,Me,qe,ct,rt){const mt=xe.layout.get("text-rotate").evaluate(qe,{})*Math.PI/180,Rt=[];for(const _t of ce.positionedLines)for(const ot of _t.positionedGlyphs){if(!ot.rect)continue;const Je=ot.rect||{};let Bt=4,zt=!0,Vt=1,Ot=0;const Qt=(Me||rt)&&ot.vertical,Wn=ot.metrics.advance*ot.scale/2;if(rt&&ce.verticalizable&&(Ot=_t.lineOffset/2-(ot.imageName?-(Nr-ot.metrics.width*ot.scale)/2:(ot.scale-1)*Nr)),ot.imageName){const ga=ct[ot.imageName];zt=ga.sdf,Vt=ga.pixelRatio,Bt=1/Vt}const On=Me?[ot.x+Wn,ot.y]:[0,0];let ar=Me?[0,0]:[ot.x+Wn+de[0],ot.y+de[1]-Ot],Va=[0,0];Qt&&(Va=ar,ar=[0,0]);const Qr=ot.metrics.isDoubleResolution?2:1,sr=(ot.metrics.left-Bt)*ot.scale-Wn+ar[0],Xi=(-ot.metrics.top-Bt)*ot.scale+ar[1],hi=sr+Je.w/Qr*ot.scale/Vt,br=Xi+Je.h/Qr*ot.scale/Vt,Cr=new A(sr,Xi),qi=new A(hi,Xi),no=new A(sr,br),Ua=new A(hi,br);if(Qt){const ga=new A(-Wn,Wn- -17),dr=-Math.PI/2,Kr=12-Wn,xr=new A(22-Kr,-(ot.imageName?Kr:0)),ya=new A(...Va);Cr._rotateAround(dr,ga)._add(xr)._add(ya),qi._rotateAround(dr,ga)._add(xr)._add(ya),no._rotateAround(dr,ga)._add(xr)._add(ya),Ua._rotateAround(dr,ga)._add(xr)._add(ya)}if(mt){const ga=Math.sin(mt),dr=Math.cos(mt),Kr=[dr,-ga,ga,dr];Cr._matMult(Kr),qi._matMult(Kr),no._matMult(Kr),Ua._matMult(Kr)}const io=new A(0,0),mc=new A(0,0);Rt.push({tl:Cr,tr:qi,bl:no,br:Ua,tex:Je,writingMode:ce.writingMode,glyphOffset:On,sectionIndex:ot.sectionIndex,isSDF:zt,pixelOffsetTL:io,pixelOffsetBR:mc,minFontScaleX:0,minFontScaleY:0})}return Rt})(0,r,E,m,b,x,d,s.allowVerticalPlacement),J=s.textSizeData;let le=null;J.kind==="source"?(le=[eo*m.layout.get("text-size").evaluate(x,{})],le[0]>th&&Nn(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):J.kind==="composite"&&(le=[eo*G.compositeTextSizes[0].evaluate(x,{},W),eo*G.compositeTextSizes[1].evaluate(x,{},W)],(le[0]>th||le[1]>th)&&Nn(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,X,le,E,b,x,k,e,C.lineStartIndex,C.lineLength,U,W);for(const ve of P)j[ve]=s.text.placedSymbolArray.length-1;return 4*X.length}function MT(s){for(const e in s)return s[e];return null}function AI(s,e,r,d){const m=s.compareText;if(e in m){const b=m[e];for(let x=b.length-1;x>=0;x--)if(d.dist(b[x])<r)return!0}else m[e]=[];return m[e].push(d),!1}const CT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class D1{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,d]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const b=CT[15&d];if(!b)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(e,2,1),[E]=new Uint32Array(e,4,1);return new D1(E,x,b,e)}constructor(e,r=64,d=Float64Array,m){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=d,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const b=CT.indexOf(this.ArrayType),x=2*e*this.ArrayType.BYTES_PER_ELEMENT,E=e*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-E%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+E+C,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+x+E+C),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+E+C,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=e,this.coords[this._pos++]=r,d}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return I1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:x,nodeSize:E}=this,C=[0,b.length-1,0],k=[];for(;C.length;){const P=C.pop()||0,j=C.pop()||0,U=C.pop()||0;if(j-U<=E){for(let J=U;J<=j;J++){const le=x[2*J],ve=x[2*J+1];le>=e&&le<=d&&ve>=r&&ve<=m&&k.push(b[J])}continue}const G=U+j>>1,W=x[2*G],X=x[2*G+1];W>=e&&W<=d&&X>=r&&X<=m&&k.push(b[G]),(P===0?e<=W:r<=X)&&(C.push(U),C.push(G-1),C.push(1-P)),(P===0?d>=W:m>=X)&&(C.push(G+1),C.push(j),C.push(1-P))}return k}within(e,r,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:b,nodeSize:x}=this,E=[0,m.length-1,0],C=[],k=d*d;for(;E.length;){const P=E.pop()||0,j=E.pop()||0,U=E.pop()||0;if(j-U<=x){for(let J=U;J<=j;J++)IT(b[2*J],b[2*J+1],e,r)<=k&&C.push(m[J]);continue}const G=U+j>>1,W=b[2*G],X=b[2*G+1];IT(W,X,e,r)<=k&&C.push(m[G]),(P===0?e-d<=W:r-d<=X)&&(E.push(U),E.push(G-1),E.push(1-P)),(P===0?e+d>=W:r+d>=X)&&(E.push(G+1),E.push(j),E.push(1-P))}return C}}function I1(s,e,r,d,m,b){if(m-d<=r)return;const x=d+m>>1;DT(s,e,x,d,m,b),I1(s,e,r,d,x-1,1-b),I1(s,e,r,x+1,m,1-b)}function DT(s,e,r,d,m,b){for(;m>d;){if(m-d>600){const k=m-d+1,P=r-d+1,j=Math.log(k),U=.5*Math.exp(2*j/3),G=.5*Math.sqrt(j*U*(k-U)/k)*(P-k/2<0?-1:1);DT(s,e,r,Math.max(d,Math.floor(r-P*U/k+G)),Math.min(m,Math.floor(r+(k-P)*U/k+G)),b)}const x=e[2*r+b];let E=d,C=m;for(S_(s,e,d,r),e[2*m+b]>x&&S_(s,e,d,m);E<C;){for(S_(s,e,E,C),E++,C--;e[2*E+b]<x;)E++;for(;e[2*C+b]>x;)C--}e[2*d+b]===x?S_(s,e,d,C):(C++,S_(s,e,C,m)),C<=r&&(d=C+1),r<=C&&(m=C-1)}}function S_(s,e,r,d){R1(s,r,d),R1(e,2*r,2*d),R1(e,2*r+1,2*d+1)}function R1(s,e,r){const d=s[e];s[e]=s[r],s[r]=d}function IT(s,e,r,d){const m=s-r,b=e-d;return m*m+b*b}var k1;_.cH=void 0,(k1=_.cH||(_.cH={})).create="create",k1.load="load",k1.fullLoad="fullLoad";let Gb=null,E_=[];const O1=1e3/60,L1="loadTime",N1="fullLoadTime",MI={mark(s){performance.mark(s)},frame(s){const e=s;Gb!=null&&E_.push(e-Gb),Gb=e},clearMetrics(){Gb=null,E_=[],performance.clearMeasures(L1),performance.clearMeasures(N1);for(const s in _.cH)performance.clearMarks(_.cH[s])},getPerformanceMetrics(){performance.measure(L1,_.cH.create,_.cH.load),performance.measure(N1,_.cH.create,_.cH.fullLoad);const s=performance.getEntriesByName(L1)[0].duration,e=performance.getEntriesByName(N1)[0].duration,r=E_.length,d=1/(E_.reduce(((b,x)=>b+x),0)/r/1e3),m=E_.filter((b=>b>O1)).reduce(((b,x)=>b+(x-O1)/O1),0);return{loadTime:s,fullLoadTime:e,fps:d,percentDroppedFrames:m/(r+m)*100,totalFrames:r}}};_.$=q,_.A=we,_.B=Zs,_.C=Lr,_.D=jt,_.E=Pn,_.F=function([s,e,r]){return e+=90,e*=Math.PI/180,r*=Math.PI/180,{x:s*Math.cos(e)*Math.sin(r),y:s*Math.sin(e)*Math.sin(r),z:s*Math.cos(r)}},_.G=Ui,_.H=ni,_.I=bi,_.J=Af,_.K=function(s){if(Xn==null){const e=s.navigator?s.navigator.userAgent:null;Xn=!!s.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Xn},_.L=class{constructor(s,e){this.target=s,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new sy((()=>this.process())),this.subscription=js(this.target,"message",(r=>this.receive(r)),!1),this.globalScope=Sr(self)?s:window}registerMessageHandler(s,e){this.messageHandlers[s]=e}unregisterMessageHandler(s){delete this.messageHandlers[s]}sendAsync(s,e){return new Promise(((r,d)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),b=e?js(e.signal,"abort",(()=>{b?.unsubscribe(),delete this.resolveRejects[m];const C={id:m,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)}),J0):null;this.resolveRejects[m]={resolve:C=>{b?.unsubscribe(),r(C)},reject:C=>{b?.unsubscribe(),d(C)}};const x=[],E=Object.assign(Object.assign({},s),{id:m,sourceMapId:this.mapId,origin:location.origin,data:qs(s.data,x)});this.target.postMessage(E,{transfer:x})}))}receive(s){const e=s.data,r=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!=="resource://android"&&location.origin!=="resource://android"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[r];const d=this.abortControllers[r];return delete this.abortControllers[r],void(d&&d.abort())}if(Sr(self)||e.mustQueue)return this.tasks[r]=e,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,e)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),e=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(s,e)}processTask(s,e){return c(this,void 0,void 0,(function*(){if(e.type==="<response>"){const m=this.resolveRejects[s];return delete this.resolveRejects[s],m?void(e.error?m.reject(Zu(e.error)):m.resolve(Zu(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const r=Zu(e.data),d=new AbortController;this.abortControllers[s]=d;try{const m=yield this.messageHandlers[e.type](e.sourceMapId,r,d);this.completeTask(s,null,m)}catch(m){this.completeTask(s,m)}}))}completeTask(s,e,r){const d=[];delete this.abortControllers[s];const m={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?qs(e):null,data:qs(r,d)};this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},_.M=Ue,_.N=function(){var s=new we(16);return we!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},_.O=function(s,e,r){var d,m,b,x,E,C,k,P,j,U,G,W,X=r[0],J=r[1],le=r[2];return e===s?(s[12]=e[0]*X+e[4]*J+e[8]*le+e[12],s[13]=e[1]*X+e[5]*J+e[9]*le+e[13],s[14]=e[2]*X+e[6]*J+e[10]*le+e[14],s[15]=e[3]*X+e[7]*J+e[11]*le+e[15]):(m=e[1],b=e[2],x=e[3],E=e[4],C=e[5],k=e[6],P=e[7],j=e[8],U=e[9],G=e[10],W=e[11],s[0]=d=e[0],s[1]=m,s[2]=b,s[3]=x,s[4]=E,s[5]=C,s[6]=k,s[7]=P,s[8]=j,s[9]=U,s[10]=G,s[11]=W,s[12]=d*X+E*J+j*le+e[12],s[13]=m*X+C*J+U*le+e[13],s[14]=b*X+k*J+G*le+e[14],s[15]=x*X+P*J+W*le+e[15]),s},_.P=A,_.Q=function(s,e,r){var d=r[0],m=r[1],b=r[2];return s[0]=e[0]*d,s[1]=e[1]*d,s[2]=e[2]*d,s[3]=e[3]*d,s[4]=e[4]*m,s[5]=e[5]*m,s[6]=e[6]*m,s[7]=e[7]*m,s[8]=e[8]*b,s[9]=e[9]*b,s[10]=e[10]*b,s[11]=e[11]*b,s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s},_.R=za,_.S=function(s,e,r){var d=e[0],m=e[1],b=e[2],x=e[3],E=e[4],C=e[5],k=e[6],P=e[7],j=e[8],U=e[9],G=e[10],W=e[11],X=e[12],J=e[13],le=e[14],ve=e[15],ce=r[0],de=r[1],xe=r[2],Me=r[3];return s[0]=ce*d+de*E+xe*j+Me*X,s[1]=ce*m+de*C+xe*U+Me*J,s[2]=ce*b+de*k+xe*G+Me*le,s[3]=ce*x+de*P+xe*W+Me*ve,s[4]=(ce=r[4])*d+(de=r[5])*E+(xe=r[6])*j+(Me=r[7])*X,s[5]=ce*m+de*C+xe*U+Me*J,s[6]=ce*b+de*k+xe*G+Me*le,s[7]=ce*x+de*P+xe*W+Me*ve,s[8]=(ce=r[8])*d+(de=r[9])*E+(xe=r[10])*j+(Me=r[11])*X,s[9]=ce*m+de*C+xe*U+Me*J,s[10]=ce*b+de*k+xe*G+Me*le,s[11]=ce*x+de*P+xe*W+Me*ve,s[12]=(ce=r[12])*d+(de=r[13])*E+(xe=r[14])*j+(Me=r[15])*X,s[13]=ce*m+de*C+xe*U+Me*J,s[14]=ce*b+de*k+xe*G+Me*le,s[15]=ce*x+de*P+xe*W+Me*ve,s},_.T=zg,_.U=function(s,e){const r={};for(let d=0;d<e.length;d++){const m=e[d];m in s&&(r[m]=s[m])}return r},_.V=fc,_.W=Jt,_.X=e_,_.Y=Sb,_.Z=De,_._=c,_.a=he,_.a$=it,_.a0=fe,_.a1=Br,_.a2=Os,_.a3=Ab,_.a4=fm,_.a5=gt,_.a6=function(s,e,r){if(!s)return e||{};if(!e)return s||{};const d=mm(s),m=mm(e);(function(x,E){E.removeAll&&(x.add.clear(),x.update.clear(),x.remove.clear(),E.remove.clear());for(const C of E.remove)x.add.delete(C),x.update.delete(C);for(const[C,k]of E.update){const P=x.update.get(C);P&&(E.update.set(C,n_(P,k)),x.update.delete(C))}})(d,m);const b={};if((d.removeAll||m.removeAll)&&(b.removeAll=!0),b.remove=new Set([...d.remove,...m.remove]),b.add=new Map([...d.add,...m.add]),b.update=new Map([...d.update,...m.update]),b.remove.size&&b.add.size)for(const x of b.add.keys())b.remove.delete(x);return(function(x){const E={};return x.removeAll&&(E.removeAll=x.removeAll),x.remove&&(E.remove=Array.from(x.remove)),x.add&&(E.add=Array.from(x.add.values())),x.update&&(E.update=Array.from(x.update.values())),E})(b)},_.a7=function(s,e){const r=new Map;if(s==null||s.type==null)return r;if(s.type==="Feature"){const d=pm(s,e);return d==null?void 0:(r.set(d,s),r)}if(s.type==="FeatureCollection"){const d=new Set;for(const m of s.features){const b=pm(m,e);if(b==null||d.has(b))return;d.add(b),r.set(b,m)}return r}},_.a8=function(s,e,r){var d,m;const b=[];if(e.removeAll)s.clear();else if(e.remove)for(const x of e.remove){const E=s.get(x);E&&(b.push(E.geometry),s.delete(x))}if(e.add)for(const x of e.add){const E=pm(x,r);if(E==null)continue;const C=s.get(E);C&&b.push(C.geometry),b.push(x.geometry),s.set(E,x)}if(e.update)for(const x of e.update){const E=s.get(x.id);if(!E)continue;const C=!!x.newGeometry,k=x.removeAllProperties||((d=x.removeProperties)===null||d===void 0?void 0:d.length)>0||((m=x.addOrUpdateProperties)===null||m===void 0?void 0:m.length)>0;if(!C&&!k)continue;b.push(E.geometry);const P=Object.assign({},E);if(s.set(x.id,P),C&&(b.push(x.newGeometry),P.geometry=x.newGeometry),k){if(P.properties=x.removeAllProperties?{}:Object.assign({},P.properties||{}),x.removeProperties)for(const j of x.removeProperties)delete P.properties[j];if(x.addOrUpdateProperties)for(const{key:j,value:U}of x.addOrUpdateProperties)P.properties[j]=U}}return b},_.a9=ci,_.aA=function(s,{uSize:e,uSizeT:r},{lowerSize:d,upperSize:m}){return s.kind==="source"?d/eo:s.kind==="composite"?Ui.number(d/eo,m/eo,r):e},_.aB=function(s,e){var r=e[0],d=e[1],m=e[2],b=e[3],x=e[4],E=e[5],C=e[6],k=e[7],P=e[8],j=e[9],U=e[10],G=e[11],W=e[12],X=e[13],J=e[14],le=e[15],ve=r*E-d*x,ce=r*C-m*x,de=r*k-b*x,xe=d*C-m*E,Me=d*k-b*E,qe=m*k-b*C,ct=P*X-j*W,rt=P*J-U*W,mt=P*le-G*W,Rt=j*J-U*X,_t=j*le-G*X,ot=U*le-G*J,Je=ve*ot-ce*_t+de*Rt+xe*mt-Me*rt+qe*ct;return Je?(s[0]=(E*ot-C*_t+k*Rt)*(Je=1/Je),s[1]=(m*_t-d*ot-b*Rt)*Je,s[2]=(X*qe-J*Me+le*xe)*Je,s[3]=(U*Me-j*qe-G*xe)*Je,s[4]=(C*mt-x*ot-k*rt)*Je,s[5]=(r*ot-m*mt+b*rt)*Je,s[6]=(J*de-W*qe-le*ce)*Je,s[7]=(P*qe-U*de+G*ce)*Je,s[8]=(x*_t-E*mt+k*ct)*Je,s[9]=(d*mt-r*_t-b*ct)*Je,s[10]=(W*Me-X*de+le*ve)*Je,s[11]=(j*de-P*Me-G*ve)*Je,s[12]=(E*rt-x*Rt-C*ct)*Je,s[13]=(r*Rt-d*rt+m*ct)*Je,s[14]=(X*ce-W*xe-J*ve)*Je,s[15]=(P*xe-j*ce+U*ve)*Je,s):null},_.aC=ut,_.aD=function(s){var e=s[0],r=s[1];return Math.sqrt(e*e+r*r)},_.aE=function(s){return s[0]=0,s[1]=0,s},_.aF=function(s,e,r){return s[0]=e[0]*r,s[1]=e[1]*r,s},_.aG=W0,_.aH=Ht,_.aI=function(s,e,r,d){const m=e.y-s.y,b=e.x-s.x,x=d.y-r.y,E=d.x-r.x,C=x*b-E*m;if(C===0)return null;const k=(E*(s.y-r.y)-x*(s.x-r.x))/C;return new A(s.x+k*b,s.y+k*m)},_.aJ=o,_.aK=_d,_.aL=function(s){let e=1/0,r=1/0,d=-1/0,m=-1/0;for(const b of s)e=Math.min(e,b.x),r=Math.min(r,b.y),d=Math.max(d,b.x),m=Math.max(m,b.y);return[e,r,d,m]},_.aM=Nr,_.aN=$t,_.aO=function(s,e,r,d,m=!1){if(!r[0]&&!r[1])return[0,0];const b=m?d==="map"?-s.bearingInRadians:0:d==="viewport"?s.bearingInRadians:0;if(b){const x=Math.sin(b),E=Math.cos(b);r=[r[0]*E-r[1]*x,r[0]*x+r[1]*E]}return[m?r[0]:$t(e,r[0],s.zoom),m?r[1]:$t(e,r[1],s.zoom)]},_.aQ=ty,_.aR=T_,_.aS=Z0,_.aT=D1,_.aU=Gi,_.aV=im,_.aW=pe,_.aX=It,_.aY=Xe,_.aZ=Dr,_.a_=t_,_.aa=ih,_.ab=25,_.ac=sa,_.ad=s=>{const e=window.document.createElement("video");return e.muted=!0,new Promise((r=>{e.onloadstart=()=>{r(e)};for(const d of s){const m=window.document.createElement("source");dt(d)||(e.crossOrigin="Anonymous"),m.src=d,e.appendChild(m)}}))},_.ae=wt,_.af=function(){return Sn++},_.ag=v,_.ah=Hf,_.ai=Im,_.aj=Ra,_.ak=Ks,_.al=cy,_.am=function(s){const e={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((r,d,m,b)=>{const x=m||b;return e[d]=!x||x.toLowerCase(),""})),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e},_.an=Zt,_.ao=85.051129,_.ap=ji,_.aq=function(s){return Math.pow(2,s)},_.ar=Ce,_.as=Eb,_.at=function(s){return Math.log(s)/Math.LN2},_.au=function(s){var e=s[0],r=s[1];return e*e+r*r},_.av=function(s){if(!s.length)return new Set;const e=Math.max(...s.map((C=>C.canonical.z)));let r=1/0,d=-1/0,m=1/0,b=-1/0;const x=[];for(const C of s){const{x:k,y:P,z:j}=C.canonical,U=Math.pow(2,e-j),G=k*U,W=P*U;x.push({id:C,x:G,y:W}),G<r&&(r=G),G>d&&(d=G),W<m&&(m=W),W>b&&(b=W)}const E=new Set;for(const C of x)C.x!==r&&C.x!==d&&C.y!==m&&C.y!==b||E.add(C.id);return E},_.aw=function(s,e){const r=Math.abs(2*s.wrap)-+(s.wrap<0),d=Math.abs(2*e.wrap)-+(e.wrap<0);return s.overscaledZ-e.overscaledZ||d-r||e.canonical.y-s.canonical.y||e.canonical.x-s.canonical.x},_.ax=class{constructor(s,e){this.max=s,this.onRemove=e,this.reset()}reset(){for(const s in this.data)for(const e of this.data[s])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(s,e,r){const d=s.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const m={value:e,timeout:void 0};if(r!==void 0&&(m.timeout=setTimeout((()=>{this.remove(s,m)}),r)),this.data[d].push(m),this.order.push(d),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const e=this.data[s].shift();return e.timeout&&clearTimeout(e.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),e.value}getByKey(s){const e=this.data[s];return e?e[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,e){if(!this.has(s))return this;const r=s.wrapped().key,d=e===void 0?0:this.data[r].indexOf(e),m=this.data[r][d];return this.data[r].splice(d,1),m.timeout&&clearTimeout(m.timeout),this.data[r].length===0&&delete this.data[r],this.onRemove(m.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(s){const e=[];for(const r in this.data)for(const d of this.data[r])s(d.value)||e.push(d);for(const r of e)this.remove(r.value.tileID,r)}},_.ay=function(s,e){let r=0,d=0;if(s.kind==="constant")d=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:m,minZoom:b,maxZoom:x}=s,E=m?Zt(Sa.interpolationFactor(m,e,b,x),0,1):0;s.kind==="camera"?d=Ui.number(s.minSize,s.maxSize,E):r=E}return{uSizeT:r,uSize:d}},_.b=Za,_.b$=Qs,_.b0=Te,_.b1=function(s){var e=new we(3);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e},_.b2=function(s,e,r){return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],s},_.b3=function(s,e){var r=e[0],d=e[1],m=e[2],b=r*r+d*d+m*m;return b>0&&(b=1/Math.sqrt(b)),s[0]=e[0]*b,s[1]=e[1]*b,s[2]=e[2]*b,s},_.b4=Dt,_.b5=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]},_.b6=function(s,e,r){return s[0]=e[0]*r[0],s[1]=e[1]*r[1],s[2]=e[2]*r[2],s[3]=e[3]*r[3],s},_.b7=Ne,_.b8=function(s,e,r){const d=e[0]*r[0]+e[1]*r[1]+e[2]*r[2];return d===0?null:(-(s[0]*r[0]+s[1]*r[1]+s[2]*r[2])-r[3])/d},_.b9=Ut,_.bA=function(s,e,r,d){return s[0]=e[0]+r[0]*d,s[1]=e[1]+r[1]*d,s[2]=e[2]+r[2]*d,s},_.bB=Ve,_.bC=function(s,e,r){var d=r[0],m=r[1],b=r[2],x=r[3],E=e[0],C=e[1],k=e[2],P=m*k-b*C,j=b*E-d*k,U=d*C-m*E;return s[0]=E+x*(P+=P)+m*(U+=U)-b*(j+=j),s[1]=C+x*j+b*P-d*U,s[2]=k+x*U+d*j-m*P,s},_.bD=function(s,e,r){const d=(function(C){var k=C[3],P=C[4],j=C[5],U=C[6],G=C[7],W=C[8];return C[0]*(W*P-j*G)+C[1]*(-W*k+j*U)+C[2]*(G*k-P*U)})([s[0],s[1],s[2],e[0],e[1],e[2],r[0],r[1],r[2]]);if(d===0)return null;const m=Dt([],[e[0],e[1],e[2]],[r[0],r[1],r[2]]),b=Dt([],[r[0],r[1],r[2]],[s[0],s[1],s[2]]),x=Dt([],[s[0],s[1],s[2]],[e[0],e[1],e[2]]),E=it([],m,-s[3]);return Te(E,E,it([],b,-e[3])),Te(E,E,it([],x,-r[3])),it(E,E,1/d),E},_.bE=oy,_.bF=function(){return new Float64Array(4)},_.bG=function(s,e,r,d){var m=[],b=[];return m[0]=e[0]-r[0],m[1]=e[1]-r[1],m[2]=e[2]-r[2],b[0]=m[0]*Math.cos(d)-m[1]*Math.sin(d),b[1]=m[0]*Math.sin(d)+m[1]*Math.cos(d),b[2]=m[2],s[0]=b[0]+r[0],s[1]=b[1]+r[1],s[2]=b[2]+r[2],s},_.bH=function(s,e,r,d){var m=[],b=[];return m[0]=e[0]-r[0],m[1]=e[1]-r[1],m[2]=e[2]-r[2],b[0]=m[0],b[1]=m[1]*Math.cos(d)-m[2]*Math.sin(d),b[2]=m[1]*Math.sin(d)+m[2]*Math.cos(d),s[0]=b[0]+r[0],s[1]=b[1]+r[1],s[2]=b[2]+r[2],s},_.bI=function(s,e,r,d){var m=[],b=[];return m[0]=e[0]-r[0],m[1]=e[1]-r[1],m[2]=e[2]-r[2],b[0]=m[2]*Math.sin(d)+m[0]*Math.cos(d),b[1]=m[1],b[2]=m[2]*Math.cos(d)-m[0]*Math.sin(d),s[0]=b[0]+r[0],s[1]=b[1]+r[1],s[2]=b[2]+r[2],s},_.bJ=function(s,e,r){var d=Math.sin(r),m=Math.cos(r),b=e[0],x=e[1],E=e[2],C=e[3],k=e[8],P=e[9],j=e[10],U=e[11];return e!==s&&(s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=b*m-k*d,s[1]=x*m-P*d,s[2]=E*m-j*d,s[3]=C*m-U*d,s[8]=b*d+k*m,s[9]=x*d+P*m,s[10]=E*d+j*m,s[11]=C*d+U*m,s},_.bK=function(s,e){const r=Le(s,360),d=Le(e,360),m=d-r,b=d>r?m-360:m+360;return Math.abs(m)<Math.abs(b)?m:b},_.bL=function(s){return s[0]=0,s[1]=0,s[2]=0,s},_.bM=function(s,e,r,d){const m=Math.sqrt(s*s+e*e),b=Math.sqrt(r*r+d*d);s/=m,e/=m,r/=b,d/=b;const x=Math.acos(s*r+e*d);return-e*r+s*d>0?x:-x},_.bN=function(s,e){const r=Le(s,2*Math.PI),d=Le(e,2*Math.PI);return Math.min(Math.abs(r-d),Math.abs(r-d+2*Math.PI),Math.abs(r-d-2*Math.PI))},_.bO=function(){const s={},e=$e.$version;for(const r in $e.$root){const d=$e.$root[r];if(d.required){let m=null;m=r==="version"?e:d.type==="array"?[]:{},m!=null&&(s[r]=m)}}return s},_.bP=He,_.bQ=Df,_.bR=function s(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(let d=0;d<e.length;d++)if(!s(e[d],r[d]))return!1;return!0}if(typeof e=="object"&&e!==null&&r!==null){if(typeof r!="object"||Object.keys(e).length!==Object.keys(r).length)return!1;for(const d in e)if(!s(e[d],r[d]))return!1;return!0}return e===r},_.bS=function(s){s=s.slice();const e=Object.create(null);for(let r=0;r<s.length;r++)e[s[r].id]=s[r];for(let r=0;r<s.length;r++)"ref"in s[r]&&(s[r]=pr(s[r],e[s[r].ref]));return s},_.bT=function(s,e){if(s.type==="custom")return new K0(s,e);switch(s.type){case"background":return new Gn(s,e);case"circle":return new Lg(s,e);case"color-relief":return new Kv(s,e);case"fill":return new ib(s,e);case"fill-extrusion":return new F0(s,e);case"heatmap":return new Xv(s,e);case"hillshade":return new rr(s,e);case"line":return new B0(s,e);case"raster":return new bl(s,e);case"symbol":return new nh(s,e)}},_.bU=s=>s.type==="raster",_.bV=Fi,_.bW=function(s,e){if(!s)return[{command:"setStyle",args:[e]}];let r=[];try{if(!un(s.version,e.version))return[{command:"setStyle",args:[e]}];un(s.center,e.center)||r.push({command:"setCenter",args:[e.center]}),un(s.state,e.state)||r.push({command:"setGlobalState",args:[e.state]}),un(s.centerAltitude,e.centerAltitude)||r.push({command:"setCenterAltitude",args:[e.centerAltitude]}),un(s.zoom,e.zoom)||r.push({command:"setZoom",args:[e.zoom]}),un(s.bearing,e.bearing)||r.push({command:"setBearing",args:[e.bearing]}),un(s.pitch,e.pitch)||r.push({command:"setPitch",args:[e.pitch]}),un(s.roll,e.roll)||r.push({command:"setRoll",args:[e.roll]}),un(s.sprite,e.sprite)||r.push({command:"setSprite",args:[e.sprite]}),un(s.glyphs,e.glyphs)||r.push({command:"setGlyphs",args:[e.glyphs]}),un(s.transition,e.transition)||r.push({command:"setTransition",args:[e.transition]}),un(s.light,e.light)||r.push({command:"setLight",args:[e.light]}),un(s.terrain,e.terrain)||r.push({command:"setTerrain",args:[e.terrain]}),un(s.sky,e.sky)||r.push({command:"setSky",args:[e.sky]}),un(s.projection,e.projection)||r.push({command:"setProjection",args:[e.projection]});const d={},m=[];(function(x,E,C,k){let P;for(P in E=E||{},x=x||{})Object.prototype.hasOwnProperty.call(x,P)&&(Object.prototype.hasOwnProperty.call(E,P)||si(P,C,k));for(P in E)Object.prototype.hasOwnProperty.call(E,P)&&(Object.prototype.hasOwnProperty.call(x,P)?un(x[P],E[P])||(x[P].type==="geojson"&&E[P].type==="geojson"&&pi(x,E,P)?ti(C,{command:"setGeoJSONSourceData",args:[P,E[P].data]}):Qi(P,E,C,k)):Ir(P,E,C))})(s.sources,e.sources,m,d);const b=[];s.layers&&s.layers.forEach((x=>{"source"in x&&d[x.source]?r.push({command:"removeLayer",args:[x.id]}):b.push(x)})),r=r.concat(m),(function(x,E,C){E=E||[];const k=(x=x||[]).map(Su),P=E.map(Su),j=x.reduce(Ac,{}),U=E.reduce(Ac,{}),G=k.slice(),W=Object.create(null);let X,J,le,ve,ce;for(let de=0,xe=0;de<k.length;de++)X=k[de],Object.prototype.hasOwnProperty.call(U,X)?xe++:(ti(C,{command:"removeLayer",args:[X]}),G.splice(G.indexOf(X,xe),1));for(let de=0,xe=0;de<P.length;de++)X=P[P.length-1-de],G[G.length-1-de]!==X&&(Object.prototype.hasOwnProperty.call(j,X)?(ti(C,{command:"removeLayer",args:[X]}),G.splice(G.lastIndexOf(X,G.length-xe),1)):xe++,ve=G[G.length-de],ti(C,{command:"addLayer",args:[U[X],ve]}),G.splice(G.length-de,0,X),W[X]=!0);for(let de=0;de<P.length;de++)if(X=P[de],J=j[X],le=U[X],!W[X]&&!un(J,le))if(un(J.source,le.source)&&un(J["source-layer"],le["source-layer"])&&un(J.type,le.type)){for(ce in mr(J.layout,le.layout,C,X,null,"setLayoutProperty"),mr(J.paint,le.paint,C,X,null,"setPaintProperty"),un(J.filter,le.filter)||ti(C,{command:"setFilter",args:[X,le.filter]}),un(J.minzoom,le.minzoom)&&un(J.maxzoom,le.maxzoom)||ti(C,{command:"setLayerZoomRange",args:[X,le.minzoom,le.maxzoom]}),J)Object.prototype.hasOwnProperty.call(J,ce)&&ce!=="layout"&&ce!=="paint"&&ce!=="filter"&&ce!=="metadata"&&ce!=="minzoom"&&ce!=="maxzoom"&&(ce.indexOf("paint.")===0?mr(J[ce],le[ce],C,X,ce.slice(6),"setPaintProperty"):un(J[ce],le[ce])||ti(C,{command:"setLayerProperty",args:[X,ce,le[ce]]}));for(ce in le)Object.prototype.hasOwnProperty.call(le,ce)&&!Object.prototype.hasOwnProperty.call(J,ce)&&ce!=="layout"&&ce!=="paint"&&ce!=="filter"&&ce!=="metadata"&&ce!=="minzoom"&&ce!=="maxzoom"&&(ce.indexOf("paint.")===0?mr(J[ce],le[ce],C,X,ce.slice(6),"setPaintProperty"):un(J[ce],le[ce])||ti(C,{command:"setLayerProperty",args:[X,ce,le[ce]]}))}else ti(C,{command:"removeLayer",args:[X]}),ve=G[G.lastIndexOf(X)+1],ti(C,{command:"addLayer",args:[le,ve]})})(b,e.layers,r)}catch(d){console.warn("Unable to compute style diff:",d),r=[{command:"setStyle",args:[e]}]}return r},_.bX=function(s){const e=[],r=s.id;return r===void 0&&e.push({message:`layers.${r}: missing required property "id"`}),s.render===void 0&&e.push({message:`layers.${r}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},_.bY=Ri,_.bZ=Tr,_.b_=class extends Na{constructor(s,e){super(s,e),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},_.ba=function(s,e,r){return s[0]=e[0]*r,s[1]=e[1]*r,s[2]=e[2]*r,s[3]=e[3]*r,s},_.bb=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]+s[3]},_.bc=Mb,_.bd=Xf,_.be=function(s,e,r,d,m){var b=1/Math.tan(e/2);if(s[0]=b/r,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=b,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,m!=null&&m!==1/0){var x=1/(d-m);s[10]=(m+d)*x,s[14]=2*m*d*x}else s[10]=-1,s[14]=-2*d;return s},_.bf=function(s){var e=new we(16);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],e},_.bg=function(s,e,r){var d=Math.sin(r),m=Math.cos(r),b=e[0],x=e[1],E=e[2],C=e[3],k=e[4],P=e[5],j=e[6],U=e[7];return e!==s&&(s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=b*m+k*d,s[1]=x*m+P*d,s[2]=E*m+j*d,s[3]=C*m+U*d,s[4]=k*m-b*d,s[5]=P*m-x*d,s[6]=j*m-E*d,s[7]=U*m-C*d,s},_.bh=function(s,e,r){var d=Math.sin(r),m=Math.cos(r),b=e[4],x=e[5],E=e[6],C=e[7],k=e[8],P=e[9],j=e[10],U=e[11];return e!==s&&(s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[4]=b*m+k*d,s[5]=x*m+P*d,s[6]=E*m+j*d,s[7]=C*m+U*d,s[8]=k*m-b*d,s[9]=P*m-x*d,s[10]=j*m-E*d,s[11]=U*m-C*d,s},_.bi=function(){const s=new Float32Array(16);return Ce(s),s},_.bj=function(){const s=new Float64Array(16);return Ce(s),s},_.bk=function(){return new Float64Array(16)},_.bl=function(s,e,r){const d=new Float64Array(4);return Ve(d,s,e-90,r),d},_.bm=function(s,e,r,d){var m,b,x,E,C,k=e[0],P=e[1],j=e[2],U=e[3],G=r[0],W=r[1],X=r[2],J=r[3];return(b=k*G+P*W+j*X+U*J)<0&&(b=-b,G=-G,W=-W,X=-X,J=-J),1-b>Ee?(m=Math.acos(b),x=Math.sin(m),E=Math.sin((1-d)*m)/x,C=Math.sin(d*m)/x):(E=1-d,C=d),s[0]=E*k+C*G,s[1]=E*P+C*W,s[2]=E*j+C*X,s[3]=E*U+C*J,s},_.bn=function(s){const e=new Float64Array(9);(function(b,x){var E=x[0],C=x[1],k=x[2],P=x[3],j=E+E,U=C+C,G=k+k,W=E*j,X=C*j,J=C*U,le=k*j,ve=k*U,ce=k*G,de=P*j,xe=P*U,Me=P*G;b[0]=1-J-ce,b[3]=X-Me,b[6]=le+xe,b[1]=X+Me,b[4]=1-W-ce,b[7]=ve-de,b[2]=le-xe,b[5]=ve+de,b[8]=1-W-J})(e,s);const r=Dr(-Math.asin(Zt(e[2],-1,1)));let d,m;return Math.hypot(e[5],e[8])<.001?(d=0,m=-Dr(Math.atan2(e[3],e[4]))):(d=Dr(e[5]===0&&e[8]===0?0:Math.atan2(e[5],e[8])),m=Dr(e[1]===0&&e[0]===0?0:Math.atan2(e[1],e[0]))),{roll:d,pitch:r+90,bearing:m}},_.bo=function(s,e){return s.roll==e.roll&&s.pitch==e.pitch&&s.bearing==e.bearing},_.bp=_n,_.bq=Kc,_.br=Ds,_.bs=El,_.bt=aa,_.bu=tt,_.bv=xt,_.bw=kr,_.bx=function(s,e,r,d,m){return tt(d,m,Zt((s-e)/(r-e),0,1))},_.by=Le,_.bz=function(){return new Float64Array(3)},_.c=ke,_.c$=function(s,e,r,d,m){return c(this,void 0,void 0,(function*(){if(fe())try{return yield Br(s,e,r,d,m)}catch{}return(function(b,x,E,C,k){const P=b.width,j=b.height;na&&la||(na=new OffscreenCanvas(P,j),la=na.getContext("2d",{willReadFrequently:!0})),na.width=P,na.height=j,la.drawImage(b,0,0,P,j);const U=la.getImageData(x,E,C,k);return la.clearRect(0,0,P,j),U.data})(s,e,r,d,m)}))},_.c0=class extends Na{constructor(s,e){super(s,e),this.current=Pa}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let e=1;e<16;e++)if(s[e]!==this.current[e]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},_.c1=Xu,_.c2=class extends Na{constructor(s,e){super(s,e),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},_.c3=class extends Na{constructor(s,e){super(s,e),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},_.c4=ze,_.c5=function(s,e){var r=Math.sin(e),d=Math.cos(e);return s[0]=d,s[1]=r,s[2]=0,s[3]=-r,s[4]=d,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},_.c6=function(s,e,r){var d=e[0],m=e[1],b=e[2];return s[0]=d*r[0]+m*r[3]+b*r[6],s[1]=d*r[1]+m*r[4]+b*r[7],s[2]=d*r[2]+m*r[5]+b*r[8],s},_.c7=function(s,e,r,d,m,b,x){var E=1/(e-r),C=1/(d-m),k=1/(b-x);return s[0]=-2*E,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*C,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*k,s[11]=0,s[12]=(e+r)*E,s[13]=(m+d)*C,s[14]=(x+b)*k,s[15]=1,s},_.c8=class extends Na{constructor(s,e){super(s,e),this.current=new Array}set(s){if(s!=this.current){this.current=s;const e=new Float32Array(4*s.length);for(let r=0;r<s.length;r++)e[4*r]=s[r].r,e[4*r+1]=s[r].g,e[4*r+2]=s[r].b,e[4*r+3]=s[r].a;this.gl.uniform4fv(this.location,e)}}},_.c9=class extends Na{constructor(s,e){super(s,e),this.current=new Array}set(s){if(s!=this.current){this.current=s;const e=new Float32Array(s);this.gl.uniform1fv(this.location,e)}}},_.cA=function(s,e){return Fe[e]&&"touches"in s},_.cB=function(s){return Fe[s]||re[s]},_.cC=function(s,e,r){var d=e[0],m=e[1];return s[0]=r[0]*d+r[4]*m+r[12],s[1]=r[1]*d+r[5]*m+r[13],s},_.cD=function(s,e){const{x:r,y:d}=ci.fromLngLat(e);return!(s<0||s>25||d<0||d>=1||r<0||r>=1)},_.cE=function(s,e){return s[0]=e[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=e[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=e[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},_.cF=class extends Hc{},_.cG=MI,_.cI=Pe,_.cJ=function(s,e){ke.REGISTERED_PROTOCOLS[s]=e},_.cK=function(s){delete ke.REGISTERED_PROTOCOLS[s]},_.cL=function(s,e){const r={};for(let m=0;m<s.length;m++){const b=e&&e[s[m].id]||fl(s[m]);e&&(e[s[m].id]=b);let x=r[b];x||(x=r[b]=[]),x.push(s[m])}const d=[];for(const m in r)d.push(r[m]);return d},_.cM=Pt,_.cN=i_,_.cO=w_,_.cP=Kg,_.cQ=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=gt/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const e=s.bucket.layers[0],r=e.layout,d=e._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new ni(s.bucket.zoom+1),s.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new ni(s.bucket.zoom+1),s.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new ni(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:P}=s.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new ni(k),s.canonical),d["text-size"].possiblyEvaluate(new ni(P),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:P}=s.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new ni(k),s.canonical),d["icon-size"].possiblyEvaluate(new ni(P),s.canonical)]}const b=r.get("text-line-height")*Nr,x=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",E=r.get("text-keep-upright"),C=r.get("text-size");for(const k of s.bucket.features){const P=r.get("text-font").evaluate(k,{},s.canonical).join(","),j=C.evaluate(k,{},s.canonical),U=m.layoutTextSize.evaluate(k,{},s.canonical),G=m.layoutIconSize.evaluate(k,{},s.canonical),W={horizontal:{},vertical:void 0},X=k.text;let J,le=[0,0];if(X){const de=X.toString(),xe=r.get("text-letter-spacing").evaluate(k,{},s.canonical)*Nr,Me=If(de)?xe:0,qe=r.get("text-anchor").evaluate(k,{},s.canonical),ct=du(e,k,s.canonical);if(!ct){const _t=r.get("text-radial-offset").evaluate(k,{},s.canonical);le=_t?ri(qe,[_t*Nr,jn]):r.get("text-offset").evaluate(k,{},s.canonical).map((ot=>ot*Nr))}let rt=x?"center":r.get("text-justify").evaluate(k,{},s.canonical);const mt=r.get("symbol-placement")==="point"?r.get("text-max-width").evaluate(k,{},s.canonical)*Nr:1/0,Rt=()=>{s.bucket.allowVerticalPlacement&&Vo(de)&&(W.vertical=um(X,s.glyphMap,s.glyphPositions,s.imagePositions,P,mt,b,qe,"left",Me,le,_.az.vertical,!0,U,j))};if(!x&&ct){const _t=new Set;if(rt==="auto")for(let Je=0;Je<ct.values.length;Je+=2)_t.add(T_(ct.values[Je]));else _t.add(rt);let ot=!1;for(const Je of _t)if(!W.horizontal[Je])if(ot)W.horizontal[Je]=W.horizontal[0];else{const Bt=um(X,s.glyphMap,s.glyphPositions,s.imagePositions,P,mt,b,"center",Je,Me,le,_.az.horizontal,!1,U,j);Bt&&(W.horizontal[Je]=Bt,ot=Bt.positionedLines.length===1)}Rt()}else{rt==="auto"&&(rt=T_(qe));const _t=um(X,s.glyphMap,s.glyphPositions,s.imagePositions,P,mt,b,qe,rt,Me,le,_.az.horizontal,!1,U,j);_t&&(W.horizontal[rt]=_t),Rt(),Vo(de)&&x&&E&&(W.vertical=um(X,s.glyphMap,s.glyphPositions,s.imagePositions,P,mt,b,qe,rt,Me,le,_.az.vertical,!1,U,j))}}let ve=!1;if(k.icon&&k.icon.name){const de=s.imageMap[k.icon.name];de&&(J=Y0(s.imagePositions[k.icon.name],r.get("icon-offset").evaluate(k,{},s.canonical),r.get("icon-anchor").evaluate(k,{},s.canonical)),ve=!!de.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=ve:s.bucket.sdfIcons!==ve&&Nn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(de.pixelRatio!==s.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const ce=MT(W.horizontal)||W.vertical;s.bucket.iconsInText=!!ce&&ce.iconsInText,(ce||J)&&EI(s.bucket,k,W,J,s.imageMap,m,U,G,le,ve,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},_.cR=bd,_.cS=Ku,_.cT=Vf,_.cU=function(s){const e=new Wg;return(function(r,d){for(const m in r.layers)d.writeMessage(3,xy,r.layers[m])})(s,e),e.finish()},_.cV=function(s,e,r,d,m,b){let x=u(s,e,r,m,0);return x=u(x,e,d,b,1),x},_.cW=class{constructor(s){this.maxEntries=s,this.map=new Map}get(s){const e=this.map.get(s);return e!==void 0&&(this.map.delete(s),this.map.set(s,e)),e}set(s,e){if(this.map.has(s))this.map.delete(s);else if(this.map.size>=this.maxEntries){const r=this.map.keys().next().value;this.map.delete(r)}this.map.set(s,e)}clear(){this.map.clear()}},_.cX=Un,_.cY=Wg,_.cZ=Dm,_.c_=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},_.ca=class extends wl{},_.cb=lb,_.cc=class extends $i{},_.cd=Wp,_.ce=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},_.cf=hc,_.cg=function(s,e,r){var d=e[0],m=e[1],b=e[2],x=r[3]*d+r[7]*m+r[11]*b+r[15];return s[0]=(r[0]*d+r[4]*m+r[8]*b+r[12])/(x=x||1),s[1]=(r[1]*d+r[5]*m+r[9]*b+r[13])/x,s[2]=(r[2]*d+r[6]*m+r[10]*b+r[14])/x,s},_.ch=class extends Wc{},_.ci=class extends t{},_.cj=function(s,e){return s[0]===e[0]&&s[1]===e[1]&&s[2]===e[2]&&s[3]===e[3]&&s[4]===e[4]&&s[5]===e[5]&&s[6]===e[6]&&s[7]===e[7]&&s[8]===e[8]&&s[9]===e[9]&&s[10]===e[10]&&s[11]===e[11]&&s[12]===e[12]&&s[13]===e[13]&&s[14]===e[14]&&s[15]===e[15]},_.ck=function(s,e){var r=s[0],d=s[1],m=s[2],b=s[3],x=s[4],E=s[5],C=s[6],k=s[7],P=s[8],j=s[9],U=s[10],G=s[11],W=s[12],X=s[13],J=s[14],le=s[15],ve=e[0],ce=e[1],de=e[2],xe=e[3],Me=e[4],qe=e[5],ct=e[6],rt=e[7],mt=e[8],Rt=e[9],_t=e[10],ot=e[11],Je=e[12],Bt=e[13],zt=e[14],Vt=e[15];return Math.abs(r-ve)<=Ee*Math.max(1,Math.abs(r),Math.abs(ve))&&Math.abs(d-ce)<=Ee*Math.max(1,Math.abs(d),Math.abs(ce))&&Math.abs(m-de)<=Ee*Math.max(1,Math.abs(m),Math.abs(de))&&Math.abs(b-xe)<=Ee*Math.max(1,Math.abs(b),Math.abs(xe))&&Math.abs(x-Me)<=Ee*Math.max(1,Math.abs(x),Math.abs(Me))&&Math.abs(E-qe)<=Ee*Math.max(1,Math.abs(E),Math.abs(qe))&&Math.abs(C-ct)<=Ee*Math.max(1,Math.abs(C),Math.abs(ct))&&Math.abs(k-rt)<=Ee*Math.max(1,Math.abs(k),Math.abs(rt))&&Math.abs(P-mt)<=Ee*Math.max(1,Math.abs(P),Math.abs(mt))&&Math.abs(j-Rt)<=Ee*Math.max(1,Math.abs(j),Math.abs(Rt))&&Math.abs(U-_t)<=Ee*Math.max(1,Math.abs(U),Math.abs(_t))&&Math.abs(G-ot)<=Ee*Math.max(1,Math.abs(G),Math.abs(ot))&&Math.abs(W-Je)<=Ee*Math.max(1,Math.abs(W),Math.abs(Je))&&Math.abs(X-Bt)<=Ee*Math.max(1,Math.abs(X),Math.abs(Bt))&&Math.abs(J-zt)<=Ee*Math.max(1,Math.abs(J),Math.abs(zt))&&Math.abs(le-Vt)<=Ee*Math.max(1,Math.abs(le),Math.abs(Vt))},_.cl=function(s,e){return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s},_.cm=s=>s.type==="symbol",_.cn=s=>s.type==="circle",_.co=s=>s.type==="heatmap",_.cp=s=>s.type==="line",_.cq=s=>s.type==="fill",_.cr=s=>s.type==="fill-extrusion",_.cs=s=>s.type==="hillshade",_.ct=s=>s.type==="color-relief",_.cu=s=>s.type==="background",_.cv=s=>s.type==="custom",_.cw=St,_.cx=function(s,e,r){const d=Tt(e.x-r.x,e.y-r.y),m=Tt(s.x-r.x,s.y-r.y),b=Math.atan2(d[0]*m[1]-d[1]*m[0],(function(x,E){return x[0]*E[0]+x[1]*E[1]})(d,m));return Dr(b)},_.cy=Nt,_.cz=function(s,e){return re[e]&&(s instanceof MouseEvent||s instanceof WheelEvent)},_.d=dt,_.d0=zf,_.d1=D,_.d2=class{constructor(s,e){this.layers={[Im]:this},this.name=Im,this.version=e?e.version:1,this.extent=e?e.extent:4096,this.length=s.length,this.features=s}feature(s){return new Bb(this.features[s],this.extent)}},_.d3=Bu,_.d4=Ts,_.e=on,_.f=s=>c(void 0,void 0,void 0,(function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(e)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),_.g=Ye,_.h=s=>new Promise(((e,r)=>{const d=new Image;d.onload=()=>{e(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame((()=>{d.src=qa}))},d.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(s)],{type:"image/png"});d.src=s.byteLength?URL.createObjectURL(m):qa})),_.i=Sr,_.j=(s,e)=>ht(on(s,{type:"json"}),e),_.k=Qn,_.l=an,_.m=ht,_.n=(s,e)=>ht(on(s,{type:"arrayBuffer"}),e),_.o=function(s){return new Wg(s).readFields(yb,[])},_.p=$0,_.q=function(s){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))},_.r=Hp,_.s=js,_.t=ur,_.u=$e,_.v=rd,_.w=Nn,_.x=kf,_.y=$s,_.z=vl})),f("worker",["./shared"],(function(_){class c{constructor(re,ae){this.keyCache={},re&&this.replace(re,ae)}replace(re,ae){this._layerConfigs={},this._layers={},this.update(re,[],ae)}update(re,ae,he){for(const ke of re){this._layerConfigs[ke.id]=ke;const Ye=this._layers[ke.id]=_.bT(ke,he);Ye._featureFilter=_.aj(Ye.filter,he),this.keyCache[ke.id]&&delete this.keyCache[ke.id]}for(const ke of ae)delete this.keyCache[ke],delete this._layerConfigs[ke],delete this._layers[ke];this.familiesBySource={};const De=_.cL(Object.values(this._layerConfigs),this.keyCache);for(const ke of De){const Ye=ke.map((Ft=>this._layers[Ft.id])),Ue=Ye[0];if(Ue.isHidden())continue;const Pe=Ue.source||"";let He=this.familiesBySource[Pe];He||(He=this.familiesBySource[Pe]={});const ht=Ue.sourceLayer||_.ai;let dt=He[ht];dt||(dt=He[ht]=[]),dt.push(Ye)}}}class A{constructor(re){const ae={},he=[];for(const Ue in re){const Pe=re[Ue],He=ae[Ue]={};for(const ht in Pe){const dt=Pe[+ht];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const Ft={x:0,y:0,w:dt.bitmap.width+2,h:dt.bitmap.height+2};he.push(Ft),He[ht]={rect:Ft,metrics:dt.metrics}}}const{w:De,h:ke}=_.p(he),Ye=new _.r({width:De||1,height:ke||1});for(const Ue in re){const Pe=re[Ue];for(const He in Pe){const ht=Pe[+He];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const dt=ae[Ue][He].rect;_.r.copy(ht.bitmap,Ye,{x:0,y:0},{x:dt.x+1,y:dt.y+1},ht.bitmap)}}this.image=Ye,this.positions=ae}}_.cM("GlyphAtlas",A);class D{constructor(re){this.tileID=new _.a2(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId,this.inFlightDependencies=[]}parse(re,ae,he,De,ke){return _._(this,void 0,void 0,(function*(){this.status="parsing",this.data=re,this.collisionBoxArray=new _.ag;const Ye=new _.cN(Object.keys(re.layers).sort()),Ue=new _.cO(this.tileID,this.promoteId);Ue.bucketLayerIDs=[];const Pe={},He={featureIndex:Ue,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:he,subdivisionGranularity:ke},ht=ae.familiesBySource[this.source];for(const pi in ht){const mr=re.layers[pi];if(!mr)continue;mr.version===1&&_.w(`Vector tile source "${this.source}" layer "${pi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Su=Ye.encode(pi),Ac=[];for(let wt=0;wt<mr.length;wt++){const ca=mr.feature(wt),ua=Ue.getId(ca,pi);Ac.push({feature:ca,id:ua,index:wt,sourceLayerIndex:Su})}for(const wt of ht[pi]){const ca=wt[0];ca.source!==this.source&&_.w(`layer.source = ${ca.source} does not equal this.source = ${this.source}`),ca.isHidden(this.zoom,!0)||(O(wt,this.zoom,he),(Pe[ca.id]=ca.createBucket({index:Ue.bucketLayerIDs.length,layers:wt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Su,sourceID:this.source})).populate(Ac,He,this.tileID.canonical),Ue.bucketLayerIDs.push(wt.map((ua=>ua.id))))}}const dt=_.bY(He.glyphDependencies,(pi=>Object.keys(pi).map(Number)));this.inFlightDependencies.forEach((pi=>pi?.abort())),this.inFlightDependencies=[];let Ft=Promise.resolve({});if(Object.keys(dt).length){const pi=new AbortController;this.inFlightDependencies.push(pi),Ft=De.sendAsync({type:"GG",data:{stacks:dt,source:this.source,tileID:this.tileID,type:"glyphs"}},pi)}const qt=Object.keys(He.iconDependencies);let an=Promise.resolve({});if(qt.length){const pi=new AbortController;this.inFlightDependencies.push(pi),an=De.sendAsync({type:"GI",data:{icons:qt,source:this.source,tileID:this.tileID,type:"icons"}},pi)}const Qn=Object.keys(He.patternDependencies);let Pn=Promise.resolve({});if(Qn.length){const pi=new AbortController;this.inFlightDependencies.push(pi),Pn=De.sendAsync({type:"GI",data:{icons:Qn,source:this.source,tileID:this.tileID,type:"patterns"}},pi)}const $e=He.dashDependencies;let ei=Promise.resolve({});if(Object.keys($e).length){const pi=new AbortController;this.inFlightDependencies.push(pi),ei=De.sendAsync({type:"GDA",data:{dashes:$e}},pi)}const[pr,un,ti,Ir]=yield Promise.all([Ft,an,Pn,ei]),si=new A(pr),Qi=new _.cP(un,ti);for(const pi in Pe){const mr=Pe[pi];mr instanceof _.ah?(O(mr.layers,this.zoom,he),_.cQ({bucket:mr,glyphMap:pr,glyphPositions:si.positions,imageMap:un,imagePositions:Qi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:He.subdivisionGranularity})):mr.hasDependencies&&(mr instanceof _.cR||mr instanceof _.cS||mr instanceof _.cT)&&(O(mr.layers,this.zoom,he),mr.addFeatures(He,this.tileID.canonical,Qi.patternPositions,Ir))}return this.status="done",{buckets:Object.values(Pe).filter((pi=>!pi.isEmpty())),featureIndex:Ue,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:si.image,imageAtlas:Qi,dashPositions:Ir,glyphMap:this.returnDependencies?pr:null,iconMap:this.returnDependencies?un:null,glyphPositions:this.returnDependencies?si.positions:null}}))}}function O(Fe,re,ae){const he=new _.H(re);for(const De of Fe)De.recalculate(he,ae)}class z{constructor(re,ae,he,De,ke){this.type=re,this.properties=he||{},this.extent=ke,this.pointsArray=ae,this.id=De}loadGeometry(){return this.pointsArray.map((re=>re.map((ae=>new _.P(ae.x,ae.y)))))}}class V{constructor(re,ae,he){this.version=2,this._myFeatures=re,this.name=ae,this.length=re.length,this.extent=he}feature(re){return this._myFeatures[re]}}class Y{constructor(){this.layers={}}addLayer(re){this.layers[re.name]=re}}function ee(Fe){let re=_.cU(Fe);return re.byteOffset===0&&re.byteLength===re.buffer.byteLength||(re=new Uint8Array(re)),{vectorTile:Fe,rawData:re.buffer}}function ie(Fe,re,ae){const{extent:he}=Fe,De=Math.pow(2,ae.z-re.z),ke=(ae.x-re.x*De)*he,Ye=(ae.y-re.y*De)*he,Ue=[];for(let Pe=0;Pe<Fe.length;Pe++){const He=Fe.feature(Pe);let ht=He.loadGeometry();for(const Ft of ht)for(const qt of Ft)qt.x=qt.x*De-ke,qt.y=qt.y*De-Ye;const dt=128;ht=_.cV(ht,He.type,-dt,-dt,he+dt,he+dt),ht.length!==0&&Ue.push(new z(He.type,ht,He.properties,He.id,he))}return new V(Ue,Fe.name,he)}class q{constructor(re,ae,he){this.actor=re,this.layerIndex=ae,this.availableImages=he,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new _.cW(1e3)}loadVectorTile(re,ae){return _._(this,void 0,void 0,(function*(){const he=yield _.n(re.request,ae);try{return{vectorTile:re.encoding!=="mlt"?new _.cX(new _.cY(he.data)):new _.cZ(he.data),rawData:he.data,cacheControl:he.cacheControl,expires:he.expires}}catch(De){const ke=new Uint8Array(he.data);let Ye=`Unable to parse the tile at ${re.request.url}, `;throw Ye+=ke[0]===31&&ke[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${De.message}`,new Error(Ye)}}))}loadTile(re){return _._(this,void 0,void 0,(function*(){const{uid:ae,overzoomParameters:he}=re;he&&(re.request=he.overzoomRequest);const De=!!(re&&re.request&&re.request.collectResourceTiming)&&new _.c_(re.request),ke=new D(re);this.loading[ae]=ke;const Ye=new AbortController;ke.abort=Ye;try{const Ue=yield this.loadVectorTile(re,Ye);if(delete this.loading[ae],!Ue)return null;if(he){const Ft=this._getOverzoomTile(re,Ue.vectorTile);Ue.rawData=Ft.rawData,Ue.vectorTile=Ft.vectorTile}const Pe=Ue.rawData,He={};Ue.expires&&(He.expires=Ue.expires),Ue.cacheControl&&(He.cacheControl=Ue.cacheControl);const ht={};if(De){const Ft=De.finish();Ft&&(ht.resourceTiming=JSON.parse(JSON.stringify(Ft)))}ke.vectorTile=Ue.vectorTile;const dt=ke.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity);this.loaded[ae]=ke,this.fetching[ae]={rawTileData:Pe,cacheControl:He,resourceTiming:ht};try{const Ft=yield dt;return _.e({rawTileData:Pe.slice(0),encoding:re.encoding},Ft,He,ht)}finally{delete this.fetching[ae]}}catch(Ue){throw delete this.loading[ae],ke.status="done",this.loaded[ae]=ke,Ue}}))}_getOverzoomTile(re,ae){const{tileID:he,source:De,overzoomParameters:ke}=re,{maxZoomTileID:Ye}=ke,Ue=`${Ye.key}_${he.key}`,Pe=this.overzoomedTileResultCache.get(Ue);if(Pe)return Pe;const He=new Y,ht=this.layerIndex.familiesBySource[De];for(const Ft in ht){const qt=ae.layers[Ft];if(!qt)continue;const an=ie(qt,Ye,he.canonical);an.length>0&&He.addLayer(an)}const dt=ee(He);return this.overzoomedTileResultCache.set(Ue,dt),dt}reloadTile(re){return _._(this,void 0,void 0,(function*(){const ae=re.uid;if(!this.loaded||!this.loaded[ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const he=this.loaded[ae];if(he.showCollisionBoxes=re.showCollisionBoxes,he.status==="parsing"){const De=yield he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity);let ke;if(this.fetching[ae]){const{rawTileData:Ye,cacheControl:Ue,resourceTiming:Pe}=this.fetching[ae];delete this.fetching[ae],ke=_.e({rawTileData:Ye.slice(0),encoding:re.encoding},De,Ue,Pe)}else ke=De;return ke}if(he.status==="done"&&he.vectorTile)return he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,re.subdivisionGranularity)}))}abortTile(re){return _._(this,void 0,void 0,(function*(){const ae=this.loading,he=re.uid;ae&&ae[he]&&ae[he].abort&&(ae[he].abort.abort(),delete ae[he])}))}removeTile(re){return _._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[re.uid]&&delete this.loaded[re.uid]}))}}class fe{constructor(){this.loaded={}}loadTile(re){return _._(this,void 0,void 0,(function*(){const{uid:ae,encoding:he,rawImageData:De,redFactor:ke,greenFactor:Ye,blueFactor:Ue,baseShift:Pe}=re,He=De.width+2,ht=De.height+2,dt=_.b(De)?new _.R({width:He,height:ht},yield _.c$(De,-1,-1,He,ht)):De,Ft=new _.d0(ae,dt,he,ke,Ye,Ue,Pe);return this.loaded=this.loaded||{},this.loaded[ae]=Ft,Ft}))}removeTile(re){const ae=this.loaded,he=re.uid;ae&&ae[he]&&delete ae[he]}}var Ee,we,ze=(function(){if(we)return Ee;function Fe(ae,he){if(ae.length!==0){re(ae[0],he);for(var De=1;De<ae.length;De++)re(ae[De],!he)}}function re(ae,he){for(var De=0,ke=0,Ye=0,Ue=ae.length,Pe=Ue-1;Ye<Ue;Pe=Ye++){var He=(ae[Ye][0]-ae[Pe][0])*(ae[Pe][1]+ae[Ye][1]),ht=De+He;ke+=Math.abs(De)>=Math.abs(He)?De-ht+He:He-ht+De,De=ht}De+ke>=0!=!!he&&ae.reverse()}return we=1,Ee=function ae(he,De){var ke,Ye=he&&he.type;if(Ye==="FeatureCollection")for(ke=0;ke<he.features.length;ke++)ae(he.features[ke],De);else if(Ye==="GeometryCollection")for(ke=0;ke<he.geometries.length;ke++)ae(he.geometries[ke],De);else if(Ye==="Feature")ae(he.geometry,De);else if(Ye==="Polygon")Fe(he.coordinates,De);else if(Ye==="MultiPolygon")for(ke=0;ke<he.coordinates.length;ke++)Fe(he.coordinates[ke],De);return he}})(),Ce=_.d1(ze);const Re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Fe=>Fe},Ne=Math.fround||(at=new Float32Array(1),Fe=>(at[0]=+Fe,at[0]));var at;class Te{constructor(re){this.options=Object.assign(Object.create(Re),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:ae,minZoom:he,maxZoom:De}=this.options;ae&&console.time("total time");const ke=`prepare ${re.length} points`;ae&&console.time(ke),this.points=re;const Ye=[];for(let Pe=0;Pe<re.length;Pe++){const He=re[Pe];if(!He.geometry)continue;const[ht,dt]=He.geometry.coordinates,Ft=Ne(Mt(ht)),qt=Ne(Ut(dt));Ye.push(Ft,qt,1/0,Pe,-1,1),this.options.reduce&&Ye.push(0)}let Ue=this.trees[De+1]=this._createTree(Ye);ae&&console.timeEnd(ke);for(let Pe=De;Pe>=he;Pe--){const He=+Date.now();Ue=this.trees[Pe]=this._createTree(this._cluster(Ue,Pe)),ae&&console.log("z%d: %d clusters in %dms",Pe,Ue.numItems,+Date.now()-He)}return ae&&console.timeEnd("total time"),this}getClusters(re,ae){let he=((re[0]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,re[1]));let ke=re[2]===180?180:((re[2]+180)%360+360)%360-180;const Ye=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)he=-180,ke=180;else if(he>ke){const dt=this.getClusters([he,De,180,Ye],ae),Ft=this.getClusters([-180,De,ke,Ye],ae);return dt.concat(Ft)}const Ue=this.trees[this._limitZoom(ae)],Pe=Ue.range(Mt(he),Ut(Ye),Mt(ke),Ut(De)),He=Ue.data,ht=[];for(const dt of Pe){const Ft=this.stride*dt;ht.push(He[Ft+5]>1?it(He,Ft,this.clusterProps):this.points[He[Ft+3]])}return ht}getChildren(re){const ae=this._getOriginId(re),he=this._getOriginZoom(re),De="No cluster with the specified id.",ke=this.trees[he];if(!ke)throw new Error(De);const Ye=ke.data;if(ae*this.stride>=Ye.length)throw new Error(De);const Ue=this.options.radius/(this.options.extent*Math.pow(2,he-1)),Pe=ke.within(Ye[ae*this.stride],Ye[ae*this.stride+1],Ue),He=[];for(const ht of Pe){const dt=ht*this.stride;Ye[dt+4]===re&&He.push(Ye[dt+5]>1?it(Ye,dt,this.clusterProps):this.points[Ye[dt+3]])}if(He.length===0)throw new Error(De);return He}getLeaves(re,ae,he){const De=[];return this._appendLeaves(De,re,ae=ae||10,he=he||0,0),De}getTile(re,ae,he){const De=this.trees[this._limitZoom(re)],ke=Math.pow(2,re),{extent:Ye,radius:Ue}=this.options,Pe=Ue/Ye,He=(he-Pe)/ke,ht=(he+1+Pe)/ke,dt={features:[]};return this._addTileFeatures(De.range((ae-Pe)/ke,He,(ae+1+Pe)/ke,ht),De.data,ae,he,ke,dt),ae===0&&this._addTileFeatures(De.range(1-Pe/ke,He,1,ht),De.data,ke,he,ke,dt),ae===ke-1&&this._addTileFeatures(De.range(0,He,Pe/ke,ht),De.data,-1,he,ke,dt),dt.features.length?dt:null}getClusterExpansionZoom(re){let ae=this._getOriginZoom(re)-1;for(;ae<=this.options.maxZoom;){const he=this.getChildren(re);if(ae++,he.length!==1)break;re=he[0].properties.cluster_id}return ae}_appendLeaves(re,ae,he,De,ke){const Ye=this.getChildren(ae);for(const Ue of Ye){const Pe=Ue.properties;if(Pe&&Pe.cluster?ke+Pe.point_count<=De?ke+=Pe.point_count:ke=this._appendLeaves(re,Pe.cluster_id,he,De,ke):ke<De?ke++:re.push(Ue),re.length===he)break}return ke}_createTree(re){const ae=new _.aT(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let he=0;he<re.length;he+=this.stride)ae.add(re[he],re[he+1]);return ae.finish(),ae.data=re,ae}_addTileFeatures(re,ae,he,De,ke,Ye){for(const Ue of re){const Pe=Ue*this.stride,He=ae[Pe+5]>1;let ht,dt,Ft;if(He)ht=Dt(ae,Pe,this.clusterProps),dt=ae[Pe],Ft=ae[Pe+1];else{const Qn=this.points[ae[Pe+3]];ht=Qn.properties;const[Pn,$e]=Qn.geometry.coordinates;dt=Mt(Pn),Ft=Ut($e)}const qt={type:1,geometry:[[Math.round(this.options.extent*(dt*ke-he)),Math.round(this.options.extent*(Ft*ke-De))]],tags:ht};let an;an=He||this.options.generateId?ae[Pe+3]:this.points[ae[Pe+3]].id,an!==void 0&&(qt.id=an),Ye.features.push(qt)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,ae){const{radius:he,extent:De,reduce:ke,minPoints:Ye}=this.options,Ue=he/(De*Math.pow(2,ae)),Pe=re.data,He=[],ht=this.stride;for(let dt=0;dt<Pe.length;dt+=ht){if(Pe[dt+2]<=ae)continue;Pe[dt+2]=ae;const Ft=Pe[dt],qt=Pe[dt+1],an=re.within(Pe[dt],Pe[dt+1],Ue),Qn=Pe[dt+5];let Pn=Qn;for(const $e of an){const ei=$e*ht;Pe[ei+2]>ae&&(Pn+=Pe[ei+5])}if(Pn>Qn&&Pn>=Ye){let $e,ei=Ft*Qn,pr=qt*Qn,un=-1;const ti=(dt/ht<<5)+(ae+1)+this.points.length;for(const Ir of an){const si=Ir*ht;if(Pe[si+2]<=ae)continue;Pe[si+2]=ae;const Qi=Pe[si+5];ei+=Pe[si]*Qi,pr+=Pe[si+1]*Qi,Pe[si+4]=ti,ke&&($e||($e=this._map(Pe,dt,!0),un=this.clusterProps.length,this.clusterProps.push($e)),ke($e,this._map(Pe,si)))}Pe[dt+4]=ti,He.push(ei/Pn,pr/Pn,1/0,ti,-1,Pn),ke&&He.push(un)}else{for(let $e=0;$e<ht;$e++)He.push(Pe[dt+$e]);if(Pn>1)for(const $e of an){const ei=$e*ht;if(!(Pe[ei+2]<=ae)){Pe[ei+2]=ae;for(let pr=0;pr<ht;pr++)He.push(Pe[ei+pr])}}}}return He}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,ae,he){if(re[ae+5]>1){const Ye=this.clusterProps[re[ae+6]];return he?Object.assign({},Ye):Ye}const De=this.points[re[ae+3]].properties,ke=this.options.map(De);return he&&ke===De?Object.assign({},ke):ke}}function it(Fe,re,ae){return{type:"Feature",id:Fe[re+3],properties:Dt(Fe,re,ae),geometry:{type:"Point",coordinates:[(he=Fe[re],360*(he-.5)),Ht(Fe[re+1])]}};var he}function Dt(Fe,re,ae){const he=Fe[re+5],De=he>=1e4?`${Math.round(he/1e3)}k`:he>=1e3?Math.round(he/100)/10+"k":he,ke=Fe[re+6],Ye=ke===-1?{}:Object.assign({},ae[ke]);return Object.assign(Ye,{cluster:!0,cluster_id:Fe[re+3],point_count:he,point_count_abbreviated:De})}function Mt(Fe){return Fe/360+.5}function Ut(Fe){const re=Math.sin(Fe*Math.PI/180),ae=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ae<0?0:ae>1?1:ae}function Ht(Fe){const re=(180-360*Fe)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function Yt(Fe,re,ae,he){let De=he;const ke=re+(ae-re>>1);let Ye,Ue=ae-re;const Pe=Fe[re],He=Fe[re+1],ht=Fe[ae],dt=Fe[ae+1];for(let Ft=re+3;Ft<ae;Ft+=3){const qt=Ve(Fe[Ft],Fe[Ft+1],Pe,He,ht,dt);if(qt>De)Ye=Ft,De=qt;else if(qt===De){const an=Math.abs(Ft-ke);an<Ue&&(Ye=Ft,Ue=an)}}De>he&&(Ye-re>3&&Yt(Fe,re,Ye,he),Fe[Ye+2]=De,ae-Ye>3&&Yt(Fe,Ye,ae,he))}function Ve(Fe,re,ae,he,De,ke){let Ye=De-ae,Ue=ke-he;if(Ye!==0||Ue!==0){const Pe=((Fe-ae)*Ye+(re-he)*Ue)/(Ye*Ye+Ue*Ue);Pe>1?(ae=De,he=ke):Pe>0&&(ae+=Ye*Pe,he+=Ue*Pe)}return Ye=Fe-ae,Ue=re-he,Ye*Ye+Ue*Ue}function ut(Fe,re,ae,he){const De={id:Fe??null,type:re,geometry:ae,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(re==="Point"||re==="MultiPoint"||re==="LineString")Tt(De,ae);else if(re==="Polygon")Tt(De,ae[0]);else if(re==="MultiLineString")for(const ke of ae)Tt(De,ke);else if(re==="MultiPolygon")for(const ke of ae)Tt(De,ke[0]);return De}function Tt(Fe,re){for(let ae=0;ae<re.length;ae+=3)Fe.minX=Math.min(Fe.minX,re[ae]),Fe.minY=Math.min(Fe.minY,re[ae+1]),Fe.maxX=Math.max(Fe.maxX,re[ae]),Fe.maxY=Math.max(Fe.maxY,re[ae+1])}function gt(Fe,re,ae,he){if(!re.geometry)return;const De=re.geometry.coordinates;if(De&&De.length===0)return;const ke=re.geometry.type,Ye=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let Ue=[],Pe=re.id;if(ae.promoteId?Pe=re.properties[ae.promoteId]:ae.generateId&&(Pe=he||0),ke==="Point")$t(De,Ue);else if(ke==="MultiPoint")for(const He of De)$t(He,Ue);else if(ke==="LineString")Le(De,Ue,Ye,!1);else if(ke==="MultiLineString"){if(ae.lineMetrics){for(const He of De)Ue=[],Le(He,Ue,Ye,!1),Fe.push(ut(Pe,"LineString",Ue,re.properties));return}tt(De,Ue,Ye,!1)}else if(ke==="Polygon")tt(De,Ue,Ye,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(const He of re.geometry.geometries)gt(Fe,{id:Pe,geometry:He,properties:re.properties},ae,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const He of De){const ht=[];tt(He,ht,Ye,!0),Ue.push(ht)}}Fe.push(ut(Pe,ke,Ue,re.properties))}function $t(Fe,re){re.push(xt(Fe[0]),St(Fe[1]),0)}function Le(Fe,re,ae,he){let De,ke,Ye=0;for(let Pe=0;Pe<Fe.length;Pe++){const He=xt(Fe[Pe][0]),ht=St(Fe[Pe][1]);re.push(He,ht,0),Pe>0&&(Ye+=he?(De*ht-He*ke)/2:Math.sqrt(Math.pow(He-De,2)+Math.pow(ht-ke,2))),De=He,ke=ht}const Ue=re.length-3;re[2]=1,Yt(re,0,Ue,ae),re[Ue+2]=1,re.size=Math.abs(Ye),re.start=0,re.end=re.size}function tt(Fe,re,ae,he){for(let De=0;De<Fe.length;De++){const ke=[];Le(Fe[De],ke,ae,he),re.push(ke)}}function xt(Fe){return Fe/360+.5}function St(Fe){const re=Math.sin(Fe*Math.PI/180),ae=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ae<0?0:ae>1?1:ae}function Nt(Fe,re,ae,he,De,ke,Ye,Ue){if(he/=re,ke>=(ae/=re)&&Ye<he)return Fe;if(Ye<ae||ke>=he)return null;const Pe=[];for(const He of Fe){const ht=He.geometry;let dt=He.type;const Ft=De===0?He.minX:He.minY,qt=De===0?He.maxX:He.maxY;if(Ft>=ae&&qt<he){Pe.push(He);continue}if(qt<ae||Ft>=he)continue;let an=[];if(dt==="Point"||dt==="MultiPoint")Zt(ht,an,ae,he,De);else if(dt==="LineString")Jt(ht,an,ae,he,De,!1,Ue.lineMetrics);else if(dt==="MultiLineString")Sn(ht,an,ae,he,De,!1);else if(dt==="Polygon")Sn(ht,an,ae,he,De,!0);else if(dt==="MultiPolygon")for(const Qn of ht){const Pn=[];Sn(Qn,Pn,ae,he,De,!0),Pn.length&&an.push(Pn)}if(an.length){if(Ue.lineMetrics&&dt==="LineString"){for(const Qn of an)Pe.push(ut(He.id,dt,Qn,He.tags));continue}dt!=="LineString"&&dt!=="MultiLineString"||(an.length===1?(dt="LineString",an=an[0]):dt="MultiLineString"),dt!=="Point"&&dt!=="MultiPoint"||(dt=an.length===3?"Point":"MultiPoint"),Pe.push(ut(He.id,dt,an,He.tags))}}return Pe.length?Pe:null}function Zt(Fe,re,ae,he,De){for(let ke=0;ke<Fe.length;ke+=3){const Ye=Fe[ke+De];Ye>=ae&&Ye<=he&&Ri(re,Fe[ke],Fe[ke+1],Fe[ke+2])}}function Jt(Fe,re,ae,he,De,ke,Ye){let Ue=on(Fe);const Pe=De===0?Tr:Fi;let He,ht,dt=Fe.start;for(let Pn=0;Pn<Fe.length-3;Pn+=3){const $e=Fe[Pn],ei=Fe[Pn+1],pr=Fe[Pn+2],un=Fe[Pn+3],ti=Fe[Pn+4],Ir=De===0?$e:ei,si=De===0?un:ti;let Qi=!1;Ye&&(He=Math.sqrt(Math.pow($e-un,2)+Math.pow(ei-ti,2))),Ir<ae?si>ae&&(ht=Pe(Ue,$e,ei,un,ti,ae),Ye&&(Ue.start=dt+He*ht)):Ir>he?si<he&&(ht=Pe(Ue,$e,ei,un,ti,he),Ye&&(Ue.start=dt+He*ht)):Ri(Ue,$e,ei,pr),si<ae&&Ir>=ae&&(ht=Pe(Ue,$e,ei,un,ti,ae),Qi=!0),si>he&&Ir<=he&&(ht=Pe(Ue,$e,ei,un,ti,he),Qi=!0),!ke&&Qi&&(Ye&&(Ue.end=dt+He*ht),re.push(Ue),Ue=on(Fe)),Ye&&(dt+=He)}let Ft=Fe.length-3;const qt=Fe[Ft],an=Fe[Ft+1],Qn=De===0?qt:an;Qn>=ae&&Qn<=he&&Ri(Ue,qt,an,Fe[Ft+2]),Ft=Ue.length-3,ke&&Ft>=3&&(Ue[Ft]!==Ue[0]||Ue[Ft+1]!==Ue[1])&&Ri(Ue,Ue[0],Ue[1],Ue[2]),Ue.length&&re.push(Ue)}function on(Fe){const re=[];return re.size=Fe.size,re.start=Fe.start,re.end=Fe.end,re}function Sn(Fe,re,ae,he,De,ke){for(const Ye of Fe)Jt(Ye,re,ae,he,De,ke,!1)}function Ri(Fe,re,ae,he){Fe.push(re,ae,he)}function Tr(Fe,re,ae,he,De,ke){const Ye=(ke-re)/(he-re);return Ri(Fe,ke,ae+(De-ae)*Ye,1),Ye}function Fi(Fe,re,ae,he,De,ke){const Ye=(ke-ae)/(De-ae);return Ri(Fe,re+(he-re)*Ye,ke,1),Ye}function ta(Fe,re){const ae=[];for(let he=0;he<Fe.length;he++){const De=Fe[he],ke=De.type;let Ye;if(ke==="Point"||ke==="MultiPoint"||ke==="LineString")Ye=Nn(De.geometry,re);else if(ke==="MultiLineString"||ke==="Polygon"){Ye=[];for(const Ue of De.geometry)Ye.push(Nn(Ue,re))}else if(ke==="MultiPolygon"){Ye=[];for(const Ue of De.geometry){const Pe=[];for(const He of Ue)Pe.push(Nn(He,re));Ye.push(Pe)}}ae.push(ut(De.id,ke,Ye,De.tags))}return ae}function Nn(Fe,re){const ae=[];ae.size=Fe.size,Fe.start!==void 0&&(ae.start=Fe.start,ae.end=Fe.end);for(let he=0;he<Fe.length;he+=3)ae.push(Fe[he]+re,Fe[he+1],Fe[he+2]);return ae}function bn(Fe,re){if(Fe.transformed)return Fe;const ae=1<<Fe.z,he=Fe.x,De=Fe.y;for(const ke of Fe.features){const Ye=ke.geometry,Ue=ke.type;if(ke.geometry=[],Ue===1)for(let Pe=0;Pe<Ye.length;Pe+=2)ke.geometry.push(Sr(Ye[Pe],Ye[Pe+1],re,ae,he,De));else for(let Pe=0;Pe<Ye.length;Pe++){const He=[];for(let ht=0;ht<Ye[Pe].length;ht+=2)He.push(Sr(Ye[Pe][ht],Ye[Pe][ht+1],re,ae,he,De));ke.geometry.push(He)}}return Fe.transformed=!0,Fe}function Sr(Fe,re,ae,he,De,ke){return[Math.round(ae*(Fe*he-De)),Math.round(ae*(re*he-ke))]}function Xn(Fe,re,ae,he,De){const ke=re===De.maxZoom?0:De.tolerance/((1<<re)*De.extent),Ye={features:[],numPoints:0,numSimplified:0,numFeatures:Fe.length,source:null,x:ae,y:he,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ue of Fe)Za(Ye,Ue,ke,De);return Ye}function Za(Fe,re,ae,he){const De=re.geometry,ke=re.type,Ye=[];if(Fe.minX=Math.min(Fe.minX,re.minX),Fe.minY=Math.min(Fe.minY,re.minY),Fe.maxX=Math.max(Fe.maxX,re.maxX),Fe.maxY=Math.max(Fe.maxY,re.maxY),ke==="Point"||ke==="MultiPoint")for(let Ue=0;Ue<De.length;Ue+=3)Ye.push(De[Ue],De[Ue+1]),Fe.numPoints++,Fe.numSimplified++;else if(ke==="LineString")qa(Ye,De,Fe,ae,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(let Ue=0;Ue<De.length;Ue++)qa(Ye,De[Ue],Fe,ae,ke==="Polygon",Ue===0);else if(ke==="MultiPolygon")for(let Ue=0;Ue<De.length;Ue++){const Pe=De[Ue];for(let He=0;He<Pe.length;He++)qa(Ye,Pe[He],Fe,ae,!0,He===0)}if(Ye.length){let Ue=re.tags||null;if(ke==="LineString"&&he.lineMetrics){Ue={};for(const He in re.tags)Ue[He]=re.tags[He];Ue.mapbox_clip_start=De.start/De.size,Ue.mapbox_clip_end=De.end/De.size}const Pe={geometry:Ye,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:Ue};re.id!==null&&(Pe.id=re.id),Fe.features.push(Pe)}}function qa(Fe,re,ae,he,De,ke){const Ye=he*he;if(he>0&&re.size<(De?Ye:he))return void(ae.numPoints+=re.length/3);const Ue=[];for(let Pe=0;Pe<re.length;Pe+=3)(he===0||re[Pe+2]>Ye)&&(ae.numSimplified++,Ue.push(re[Pe],re[Pe+1])),ae.numPoints++;De&&(function(Pe,He){let ht=0;for(let dt=0,Ft=Pe.length,qt=Ft-2;dt<Ft;qt=dt,dt+=2)ht+=(Pe[dt]-Pe[qt])*(Pe[dt+1]+Pe[qt+1]);if(ht>0===He)for(let dt=0,Ft=Pe.length;dt<Ft/2;dt+=2){const qt=Pe[dt],an=Pe[dt+1];Pe[dt]=Pe[Ft-2-dt],Pe[dt+1]=Pe[Ft-1-dt],Pe[Ft-2-dt]=qt,Pe[Ft-1-dt]=an}})(Ue,ke),Fe.push(Ue)}const Br={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class na{constructor(re,ae){const he=(ae=this.options=(function(ke,Ye){for(const Ue in Ye)ke[Ue]=Ye[Ue];return ke})(Object.create(Br),ae)).debug;if(he&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let De=(function(ke,Ye){const Ue=[];if(ke.type==="FeatureCollection")for(let Pe=0;Pe<ke.features.length;Pe++)gt(Ue,ke.features[Pe],Ye,Pe);else gt(Ue,ke.type==="Feature"?ke:{geometry:ke},Ye);return Ue})(re,ae);this.tiles={},this.tileCoords=[],he&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=(function(ke,Ye){const Ue=Ye.buffer/Ye.extent;let Pe=ke;const He=Nt(ke,1,-1-Ue,Ue,0,-1,2,Ye),ht=Nt(ke,1,1-Ue,2+Ue,0,-1,2,Ye);return(He||ht)&&(Pe=Nt(ke,1,-Ue,1+Ue,0,-1,2,Ye)||[],He&&(Pe=ta(He,1).concat(Pe)),ht&&(Pe=Pe.concat(ta(ht,-1)))),Pe})(De,ae),De.length&&this.splitTile(De,0,0,0),he&&(De.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(re,ae,he,De,ke,Ye,Ue){const Pe=[re,ae,he,De],He=this.options,ht=He.debug;for(;Pe.length;){De=Pe.pop(),he=Pe.pop(),ae=Pe.pop(),re=Pe.pop();const dt=1<<ae,Ft=la(ae,he,De);let qt=this.tiles[Ft];if(!qt&&(ht>1&&console.time("creation"),qt=this.tiles[Ft]=Xn(re,ae,he,De,He),this.tileCoords.push({z:ae,x:he,y:De}),ht)){ht>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,he,De,qt.numFeatures,qt.numPoints,qt.numSimplified),console.timeEnd("creation"));const Qi=`z${ae}`;this.stats[Qi]=(this.stats[Qi]||0)+1,this.total++}if(qt.source=re,ke==null){if(ae===He.indexMaxZoom||qt.numPoints<=He.indexMaxPoints)continue}else{if(ae===He.maxZoom||ae===ke)continue;if(ke!=null){const Qi=ke-ae;if(he!==Ye>>Qi||De!==Ue>>Qi)continue}}if(qt.source=null,re.length===0)continue;ht>1&&console.time("clipping");const an=.5*He.buffer/He.extent,Qn=.5-an,Pn=.5+an,$e=1+an;let ei=null,pr=null,un=null,ti=null,Ir=Nt(re,dt,he-an,he+Pn,0,qt.minX,qt.maxX,He),si=Nt(re,dt,he+Qn,he+$e,0,qt.minX,qt.maxX,He);re=null,Ir&&(ei=Nt(Ir,dt,De-an,De+Pn,1,qt.minY,qt.maxY,He),pr=Nt(Ir,dt,De+Qn,De+$e,1,qt.minY,qt.maxY,He),Ir=null),si&&(un=Nt(si,dt,De-an,De+Pn,1,qt.minY,qt.maxY,He),ti=Nt(si,dt,De+Qn,De+$e,1,qt.minY,qt.maxY,He),si=null),ht>1&&console.timeEnd("clipping"),Pe.push(ei||[],ae+1,2*he,2*De),Pe.push(pr||[],ae+1,2*he,2*De+1),Pe.push(un||[],ae+1,2*he+1,2*De),Pe.push(ti||[],ae+1,2*he+1,2*De+1)}}getTile(re,ae,he){re=+re,ae=+ae,he=+he;const De=this.options,{extent:ke,debug:Ye}=De;if(re<0||re>24)return null;const Ue=1<<re,Pe=la(re,ae=ae+Ue&Ue-1,he);if(this.tiles[Pe])return bn(this.tiles[Pe],ke);Ye>1&&console.log("drilling down to z%d-%d-%d",re,ae,he);let He,ht=re,dt=ae,Ft=he;for(;!He&&ht>0;)ht--,dt>>=1,Ft>>=1,He=this.tiles[la(ht,dt,Ft)];return He&&He.source?(Ye>1&&(console.log("found parent tile z%d-%d-%d",ht,dt,Ft),console.time("drilling down")),this.splitTile(He.source,ht,dt,Ft,re,ae,he),Ye>1&&console.timeEnd("drilling down"),this.tiles[Pe]?bn(this.tiles[Pe],ke):null):null}}function la(Fe,re,ae){return 32*((1<<Fe)*ae+re)+Fe}class js extends q{constructor(re,ae,he,De=ji){super(re,ae,he),this._dataUpdateable=new Map,this._createGeoJSONIndex=De}loadVectorTile(re,ae){return _._(this,void 0,void 0,(function*(){const he=re.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const De=this._geoJSONIndex.getTile(he.z,he.x,he.y);return De?ee(new _.d2(De.features,{version:2,extent:_.a5})):null}))}loadData(re){return _._(this,void 0,void 0,(function*(){var ae;(ae=this._pendingRequest)===null||ae===void 0||ae.abort();const he=this._startPerformance(re);this._pendingRequest=new AbortController;try{(!this._pendingData||re.request||re.data||re.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(re,this._pendingRequest));const De=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(De,re),this.loaded={};const ke={};return re.request&&(ke.data=De),this._finishPerformance(he,re,ke),ke}catch(De){if(delete this._pendingRequest,_.Z(De))return{abandoned:!0};throw De}}))}_startPerformance(re){var ae;if(!((ae=re?.request)===null||ae===void 0)&&ae.collectResourceTiming)return new _.c_(re.request)}_finishPerformance(re,ae,he){if(!re)return;const De=re.finish();De&&(he.resourceTiming={},he.resourceTiming[ae.source]=JSON.parse(JSON.stringify(De)))}getData(){return _._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(re){const ae=this.loaded;return ae&&ae[re.uid]?super.reloadTile(re):this.loadTile(re)}loadAndProcessGeoJSON(re,ae){return _._(this,void 0,void 0,(function*(){let he;if(re.request?he=yield this.loadGeoJSONFromUrl(re.request,re.promoteId,ae):re.data?he=this._loadGeoJSONFromObject(re.data,re.promoteId):re.dataDiff&&(he=this._loadGeoJSONFromDiff(re.dataDiff,re.promoteId,re.source)),delete this._pendingRequest,typeof he!="object")throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);return Ce(he,!0),re.filter&&(he=this._filterGeoJSON(he,re.filter)),he}))}loadGeoJSONFromUrl(re,ae,he){return _._(this,void 0,void 0,(function*(){const De=yield _.j(re,he);return this._dataUpdateable=_.a7(De.data,ae),De.data}))}_loadGeoJSONFromObject(re,ae){return this._dataUpdateable=_.a7(re,ae),re}_loadGeoJSONFromDiff(re,ae,he){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${he}`);_.a8(this._dataUpdateable,re,ae);const De=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(De)}_filterGeoJSON(re,ae){const he=_.d3(ae,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(he.result==="error")throw new Error(he.value.map((ke=>`${ke.key}: ${ke.message}`)).join(", "));const De=re.features.filter((ke=>he.value.evaluate({zoom:0},ke)));return this._toFeatureCollection(De)}_toFeatureCollection(re){return{type:"FeatureCollection",features:re}}removeSource(re){return _._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(re){return this._geoJSONIndex.getClusterExpansionZoom(re.clusterId)}getClusterChildren(re){return this._geoJSONIndex.getChildren(re.clusterId)}getClusterLeaves(re){return this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset)}}function ji(Fe,re){return re.cluster?new Te((function({superclusterOptions:ae,clusterProperties:he}){if(!he||!ae)return ae;const De={},ke={},Ye={accumulated:null,zoom:0},Ue={properties:null},Pe=Object.keys(he);for(const He of Pe){const[ht,dt]=he[He],Ft=_.d3(dt),qt=_.d3(typeof ht=="string"?[ht,["accumulated"],["get",He]]:ht);De[He]=Ft.value,ke[He]=qt.value}return ae.map=He=>{Ue.properties=He;const ht={};for(const dt of Pe)ht[dt]=De[dt].evaluate(Ye,Ue);return ht},ae.reduce=(He,ht)=>{Ue.properties=ht;for(const dt of Pe)Ye.accumulated=He[dt],He[dt]=ke[dt].evaluate(Ye,Ue)},ae})(re)).load(Fe.features):(function(ae,he){return new na(ae,he)})(Fe,re.geojsonVtOptions)}class Dr{constructor(re){this.self=re,this.actor=new _.L(re),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ae,he)=>{if(this.externalWorkerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.externalWorkerSourceTypes[ae]=he},this.self.addProtocol=_.cJ,this.self.removeProtocol=_.cK,this.self.registerRTLTextPlugin=ae=>{_.d4.setMethods(ae)},this.actor.registerMessageHandler("LDT",((ae,he)=>this._getDEMWorkerSource(ae,he.source).loadTile(he))),this.actor.registerMessageHandler("RDT",((ae,he)=>_._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ae,he.source).removeTile(he)})))),this.actor.registerMessageHandler("GCEZ",((ae,he)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterExpansionZoom(he)})))),this.actor.registerMessageHandler("GCC",((ae,he)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterChildren(he)})))),this.actor.registerMessageHandler("GCL",((ae,he)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,he.type,he.source).getClusterLeaves(he)})))),this.actor.registerMessageHandler("LD",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).loadData(he))),this.actor.registerMessageHandler("GD",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).getData())),this.actor.registerMessageHandler("LT",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).loadTile(he))),this.actor.registerMessageHandler("RT",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).reloadTile(he))),this.actor.registerMessageHandler("AT",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).abortTile(he))),this.actor.registerMessageHandler("RMT",((ae,he)=>this._getWorkerSource(ae,he.type,he.source).removeTile(he))),this.actor.registerMessageHandler("RS",((ae,he)=>_._(this,void 0,void 0,(function*(){if(!this.workerSources[ae]||!this.workerSources[ae][he.type]||!this.workerSources[ae][he.type][he.source])return;const De=this.workerSources[ae][he.type][he.source];delete this.workerSources[ae][he.type][he.source],De.removeSource!==void 0&&De.removeSource(he)})))),this.actor.registerMessageHandler("RM",(ae=>_._(this,void 0,void 0,(function*(){delete this.layerIndexes[ae],delete this.availableImages[ae],delete this.workerSources[ae],delete this.demWorkerSources[ae],this.globalStates.delete(ae)})))),this.actor.registerMessageHandler("SR",((ae,he)=>_._(this,void 0,void 0,(function*(){this.referrer=he})))),this.actor.registerMessageHandler("SRPS",((ae,he)=>this._syncRTLPluginState(ae,he))),this.actor.registerMessageHandler("IS",((ae,he)=>_._(this,void 0,void 0,(function*(){this.self.importScripts(he)})))),this.actor.registerMessageHandler("SI",((ae,he)=>this._setImages(ae,he))),this.actor.registerMessageHandler("UL",((ae,he)=>_._(this,void 0,void 0,(function*(){this._getLayerIndex(ae).update(he.layers,he.removedIds,this._getGlobalState(ae))})))),this.actor.registerMessageHandler("UGS",((ae,he)=>_._(this,void 0,void 0,(function*(){const De=this._getGlobalState(ae);for(const ke in he)De[ke]=he[ke]})))),this.actor.registerMessageHandler("SL",((ae,he)=>_._(this,void 0,void 0,(function*(){this._getLayerIndex(ae).replace(he,this._getGlobalState(ae))}))))}_getGlobalState(re){let ae=this.globalStates.get(re);return ae||(ae={},this.globalStates.set(re,ae)),ae}_setImages(re,ae){return _._(this,void 0,void 0,(function*(){this.availableImages[re]=ae;for(const he in this.workerSources[re]){const De=this.workerSources[re][he];for(const ke in De)De[ke].availableImages=ae}}))}_syncRTLPluginState(re,ae){return _._(this,void 0,void 0,(function*(){return yield _.d4.syncState(ae,this.self.importScripts)}))}_getAvailableImages(re){let ae=this.availableImages[re];return ae||(ae=[]),ae}_getLayerIndex(re){let ae=this.layerIndexes[re];return ae||(ae=this.layerIndexes[re]=new c),ae}_getWorkerSource(re,ae,he){if(this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][ae]||(this.workerSources[re][ae]={}),!this.workerSources[re][ae][he]){const De={sendAsync:(ke,Ye)=>(ke.targetMapId=re,this.actor.sendAsync(ke,Ye))};switch(ae){case"vector":this.workerSources[re][ae][he]=new q(De,this._getLayerIndex(re),this._getAvailableImages(re));break;case"geojson":this.workerSources[re][ae][he]=new js(De,this._getLayerIndex(re),this._getAvailableImages(re));break;default:this.workerSources[re][ae][he]=new this.externalWorkerSourceTypes[ae](De,this._getLayerIndex(re),this._getAvailableImages(re))}}return this.workerSources[re][ae][he]}_getDEMWorkerSource(re,ae){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][ae]||(this.demWorkerSources[re][ae]=new fe),this.demWorkerSources[re][ae]}}return _.i(self)&&(self.worker=new Dr(self)),Dr})),f("index",["exports","./shared"],(function(_,c){var A="5.15.0";function D(){var w=new c.A(4);return c.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let O,z,V;const Y={frame(w,t,l){const p=requestAnimationFrame((S=>{v(),t(S)})),{unsubscribe:v}=c.s(w.signal,"abort",(()=>{v(),cancelAnimationFrame(p),l(new c.a(w.signal.reason))}),!1)},frameAsync(w){return new Promise(((t,l)=>{this.frame(w,t,l)}))},getImageData(w,t=0){return this.getImageCanvasContext(w).getImageData(-t,-t,w.width+2*t,w.height+2*t)},getImageCanvasContext(w){const t=window.document.createElement("canvas"),l=t.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return t.width=w.width,t.height=w.height,l.drawImage(w,0,0,w.width,w.height),l},resolveURL:w=>(O||(O=document.createElement("a")),O.href=w,O.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return V!==void 0?V:!!matchMedia&&(z==null&&(z=matchMedia("(prefers-reduced-motion: reduce)")),z.matches)},set prefersReducedMotion(w){V=w}},ee=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function ie(){return ee.getCurrentTime()}class q{static testProp(t){if(!q.docStyle)return t[0];for(let l=0;l<t.length;l++)if(t[l]in q.docStyle)return t[l];return t[0]}static create(t,l,p){const v=window.document.createElement(t);return l!==void 0&&(v.className=l),p&&p.appendChild(v),v}static createNS(t,l){return window.document.createElementNS(t,l)}static disableDrag(){q.docStyle&&q.selectProp&&(q.userSelect=q.docStyle[q.selectProp],q.docStyle[q.selectProp]="none")}static enableDrag(){q.docStyle&&q.selectProp&&(q.docStyle[q.selectProp]=q.userSelect)}static setTransform(t,l){t.style[q.transformProp]=l}static addEventListener(t,l,p,v={}){t.addEventListener(l,p,"passive"in v?v:v.capture)}static removeEventListener(t,l,p,v={}){t.removeEventListener(l,p,"passive"in v?v:v.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",q.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",q.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",q.suppressClickInternal,!0)}),0)}static getScale(t){const l=t.getBoundingClientRect();return{x:l.width/t.offsetWidth||1,y:l.height/t.offsetHeight||1,boundingClientRect:l}}static getPoint(t,l,p){const v=l.boundingClientRect;return new c.P((p.clientX-v.left)/l.x-t.clientLeft,(p.clientY-v.top)/l.y-t.clientTop)}static mousePos(t,l){const p=q.getScale(t);return q.getPoint(t,p,l)}static touchPos(t,l){const p=[],v=q.getScale(t);for(let S=0;S<l.length;S++)p.push(q.getPoint(t,v,l[S]));return p}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const l=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),p=l.querySelectorAll("script");for(const v of p)v.remove();return q.clean(l),l.innerHTML}static isPossiblyDangerous(t,l){const p=l.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!p.includes("javascript:")&&!p.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const l=t.children;for(const p of l)q.removeAttributes(p),q.clean(p)}static removeAttributes(t){for(const{name:l,value:p}of t.attributes)q.isPossiblyDangerous(l,p)&&t.removeAttribute(l)}}q.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,q.selectProp=q.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),q.transformProp=q.testProp(["transform","WebkitTransform"]);const fe={supported:!1,testSupport:function(w){!ze&&we&&(Ce?Re(w):Ee=w)}};let Ee,we,ze=!1,Ce=!1;function Re(w){const t=w.createTexture();w.bindTexture(w.TEXTURE_2D,t);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,we),w.isContextLost())return;fe.supported=!0}catch{}w.deleteTexture(t),ze=!0}var Ne;typeof document<"u"&&(we=document.createElement("img"),we.onload=()=>{Ee&&Re(Ee),Ee=null,Ce=!0},we.onerror=()=>{ze=!0,Ee=null},we.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let t,l,p,v;w.resetRequestQueue=()=>{t=[],l=0,p=0,v={}},w.addThrottleControl=L=>{const F=p++;return v[F]=L,F},w.removeThrottleControl=L=>{delete v[L],M()},w.getImage=(L,F,B=!0)=>new Promise(((Z,$)=>{fe.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),c.e(L,{type:"image"}),t.push({abortController:F,requestParameters:L,supportImageRefresh:B,state:"queued",onError:K=>{$(K)},onSuccess:K=>{Z(K)}}),M()}));const S=L=>c._(this,void 0,void 0,(function*(){L.state="running";const{requestParameters:F,supportImageRefresh:B,onError:Z,onSuccess:$,abortController:K}=L,se=B===!1&&!c.i(self)&&!c.g(F.url)&&(!F.headers||Object.keys(F.headers).reduce(((me,_e)=>me&&_e==="accept"),!0));l++;const pe=se?I(F,K):c.m(F,K);try{const me=yield pe;delete L.abortController,L.state="completed",me.data instanceof HTMLImageElement||c.b(me.data)?$(me):me.data&&$({data:yield(ge=me.data,typeof createImageBitmap=="function"?c.f(ge):c.h(ge)),cacheControl:me.cacheControl,expires:me.expires})}catch(me){delete L.abortController,Z(me)}finally{l--,M()}var ge})),M=()=>{const L=(()=>{for(const F of Object.keys(v))if(v[F]())return!0;return!1})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let F=l;F<L&&t.length>0;F++){const B=t.shift();B.abortController.signal.aborted?F--:S(B)}},I=(L,F)=>new Promise(((B,Z)=>{const $=new Image,K=L.url,se=L.credentials;se&&se==="include"?$.crossOrigin="use-credentials":(se&&se==="same-origin"||!c.d(K))&&($.crossOrigin="anonymous"),F.signal.addEventListener("abort",(()=>{$.src="",Z(new c.a(F.signal.reason))})),$.fetchPriority="high",$.onload=()=>{$.onerror=$.onload=null,B({data:$})},$.onerror=()=>{$.onerror=$.onload=null,F.signal.aborted||Z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},$.src=K}))})(Ne||(Ne={})),Ne.resetRequestQueue();class at{constructor(t){this._transformRequestFn=t??null}transformRequest(t,l){return this._transformRequestFn&&this._transformRequestFn(t,l)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function Te(w){const t=[];if(typeof w=="string")t.push({id:"default",url:w});else if(w&&w.length>0){const l=[];for(const{id:p,url:v}of w){const S=`${p}${v}`;l.indexOf(S)===-1&&(l.push(S),t.push({id:p,url:v}))}}return t}function it(w,t,l){try{const p=new URL(w);return p.pathname+=`${t}${l}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Dt(w){const{userImage:t}=w;return!!(t&&t.render&&t.render())&&(w.data.replace(new Uint8Array(t.data.buffer)),!0)}class Mt extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const t of Object.keys(this.images))this.removeImage(t);this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:l,promiseResolve:p}of this.requestors)p(this._getImagesForIds(l));this.requestors=[]}}getImage(t){const l=this.images[t];if(l&&!l.data&&l.spriteData){const p=l.spriteData;l.data=new c.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),l.spriteData=null}return l}addImage(t,l){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,l)&&(this.images[t]=l)}_validate(t,l){let p=!0;const v=l.data||l.spriteData;return this._validateStretch(l.stretchX,v&&v.width)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "stretchX" value`))),p=!1),this._validateStretch(l.stretchY,v&&v.height)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "stretchY" value`))),p=!1),this._validateContent(l.content,l)||(this.fire(new c.k(new Error(`Image "${t}" has invalid "content" value`))),p=!1),p}_validateStretch(t,l){if(!t)return!0;let p=0;for(const v of t){if(v[0]<p||v[1]<v[0]||l<v[1])return!1;p=v[1]}return!0}_validateContent(t,l){if(!t)return!0;if(t.length!==4)return!1;const p=l.spriteData,v=p&&p.width||l.data.width,S=p&&p.height||l.data.height;return!(t[0]<0||v<t[0]||t[1]<0||S<t[1]||t[2]<0||v<t[2]||t[3]<0||S<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,l,p=!0){const v=this.getImage(t);if(p&&(v.data.width!==l.data.width||v.data.height!==l.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=v.version+1,this.images[t]=l,this.updatedImages[t]=!0}removeImage(t){const l=this.images[t];delete this.images[t],delete this.patterns[t],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((l,p)=>{let v=!0;if(!this.isLoaded())for(const S of t)this.images[S]||(v=!1);this.isLoaded()||v?l(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:l})}))}_getImagesForIds(t){const l={};for(const p of t){let v=this.getImage(p);v||(this.fire(new c.l("styleimagemissing",{id:p})),v=this.getImage(p)),v?l[p]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:c.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:t,height:l}=this.atlasImage;return{width:t,height:l}}getPattern(t){const l=this.patterns[t],p=this.getImage(t);if(!p)return null;if(l&&l.position.version===p.version)return l.position;if(l)l.position.version=p.version;else{const v={w:p.data.width+2,h:p.data.height+2,x:0,y:0},S=new c.I(v,p);this.patterns[t]={bin:v,position:S}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const l=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(t,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const S in this.patterns)t.push(this.patterns[S].bin);const{w:l,h:p}=c.p(t),v=this.atlasImage;v.resize({width:l||1,height:p||1});for(const S in this.patterns){const{bin:M}=this.patterns[S],I=M.x+1,L=M.y+1,F=this.getImage(S).data,B=F.width,Z=F.height;c.R.copy(F,v,{x:0,y:0},{x:I,y:L},{width:B,height:Z}),c.R.copy(F,v,{x:0,y:Z-1},{x:I,y:L-1},{width:B,height:1}),c.R.copy(F,v,{x:0,y:0},{x:I,y:L+Z},{width:B,height:1}),c.R.copy(F,v,{x:B-1,y:0},{x:I-1,y:L},{width:1,height:Z}),c.R.copy(F,v,{x:0,y:0},{x:I+B,y:L},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const l of t){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const p=this.getImage(l);p||c.w(`Image with ID: "${l}" was not found`),Dt(p)&&this.updateImage(l,p)}}cloneImages(){const t={};for(const l in this.images){const p=this.images[l];t[l]=Object.assign(Object.assign({},p),{data:p.data?p.data.clone():null})}return t}}const Ut=1e20;function Ht(w,t,l,p,v,S,M,I,L){for(let F=t;F<t+p;F++)Yt(w,l*S+F,S,v,M,I,L);for(let F=l;F<l+v;F++)Yt(w,F*S+t,1,p,M,I,L)}function Yt(w,t,l,p,v,S,M){S[0]=0,M[0]=-Ut,M[1]=Ut,v[0]=w[t];for(let I=1,L=0,F=0;I<p;I++){v[I]=w[t+I*l];const B=I*I;do{const Z=S[L];F=(v[I]-v[Z]+B-Z*Z)/(I-Z)/2}while(F<=M[L]&&--L>-1);L++,S[L]=I,M[L]=F,M[L+1]=Ut}for(let I=0,L=0;I<p;I++){for(;M[L+1]<I;)L++;const F=S[L],B=I-F;w[t+I*l]=v[F]+B*B}}const Ve=c.v.layout_symbol["text-font"].default.join(",");class ut{constructor(t,l,p){this.requestManager=t,this.localIdeographFontFamily=l,this.entries={},this.lang=p}setURL(t){this.url=t}getGlyphs(t){return c._(this,void 0,void 0,(function*(){const l=[];for(const S in t)for(const M of t[S])l.push(this._getAndCacheGlyphsPromise(S,M));const p=yield Promise.all(l),v={};for(const{stack:S,id:M,glyph:I}of p)v[S]||(v[S]={}),v[S][M]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return v}))}_getAndCacheGlyphsPromise(t,l){return c._(this,void 0,void 0,(function*(){let p=this.entries[t];p||(p=this.entries[t]={glyphs:{},requests:{},ranges:{}});let v=p.glyphs[l];return v!==void 0?{stack:t,id:l,glyph:v}:!this.url||this._charUsesLocalIdeographFontFamily(l)?(v=p.glyphs[l]=this._drawGlyph(p,t,l),{stack:t,id:l,glyph:v}):yield this._downloadAndCacheRangePromise(t,l)}))}_downloadAndCacheRangePromise(t,l){return c._(this,void 0,void 0,(function*(){const p=this.entries[t],v=Math.floor(l/256);if(p.ranges[v])return{stack:t,id:l,glyph:null};if(!p.requests[v]){const S=ut.loadGlyphRange(t,v,this.url,this.requestManager);p.requests[v]=S}try{const S=yield p.requests[v];for(const M in S)p.glyphs[+M]=S[+M];return p.ranges[v]=!0,{stack:t,id:l,glyph:S[l]||null}}catch(S){const M=p.glyphs[l]=this._drawGlyph(p,t,l);return this._warnOnMissingGlyphRange(M,v,l,S),{stack:t,id:l,glyph:M}}}))}_warnOnMissingGlyphRange(t,l,p,v){const S=256*l,M=S+255,I=p.toString(16).padStart(4,"0").toUpperCase();c.w(`Unable to load glyph range ${l}, ${S}-${M}. Rendering codepoint U+${I} locally instead. ${v}`)}_charUsesLocalIdeographFontFamily(t){return!!this.localIdeographFontFamily&&c.q(t)}_drawGlyph(t,l,p){const v=l===Ve&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(p),S=v?"ideographTinySDF":"tinySDF";t[S]||(t[S]=this._createTinySDF(v?this.localIdeographFontFamily:l));const M=t[S].draw(String.fromCodePoint(p));return{id:p,bitmap:new c.r({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(t){const l=t?t.split(","):[];l.push("sans-serif");const p=l.map((v=>/[-\w]+/.test(v)?v:`'${CSS.escape(v)}'`)).join(",");return new ut.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:this._fontWeight(l[0]),fontStyle:this._fontStyle(l[0]),lang:this.lang})}_fontStyle(t){return/italic/i.test(t)?"italic":/oblique/i.test(t)?"oblique":"normal"}_fontWeight(t){const l={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let p;for(const[v,S]of Object.entries(l))new RegExp(`\\b${v}\\b`,"i").test(t)&&(p=`${S}`);return p}destroy(){for(const t in this.entries){const l=this.entries[t];l.tinySDF&&(l.tinySDF=null),l.ideographTinySDF&&(l.ideographTinySDF=null),l.glyphs={},l.requests={},l.ranges={}}this.entries={}}}ut.loadGlyphRange=function(w,t,l,p){return c._(this,void 0,void 0,(function*(){const v=256*t,S=v+255,M=p.transformRequest(l.replace("{fontstack}",w).replace("{range}",`${v}-${S}`),"Glyphs"),I=yield c.n(M,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${t}, ${v}-${S}`);const L={};for(const F of c.o(I.data))L[F.id]=F;return L}))},ut.TinySDF=class{constructor({fontSize:w=24,buffer:t=3,radius:l=8,cutoff:p=.25,fontFamily:v="sans-serif",fontWeight:S="normal",fontStyle:M="normal",lang:I=null}={}){this.buffer=t,this.cutoff=p,this.radius=l,this.lang=I;const L=this.size=w+4*t,F=this._createCanvas(L),B=this.ctx=F.getContext("2d",{willReadFrequently:!0});B.font=`${M} ${S} ${w}px ${v}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(w){const t=document.createElement("canvas");return t.width=t.height=w,t}draw(w){const{width:t,actualBoundingBoxAscent:l,actualBoundingBoxDescent:p,actualBoundingBoxLeft:v,actualBoundingBoxRight:S}=this.ctx.measureText(w),M=Math.ceil(l),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-v))),L=Math.min(this.size-this.buffer,M+Math.ceil(p)),F=I+2*this.buffer,B=L+2*this.buffer,Z=Math.max(F*B,0),$=new Uint8ClampedArray(Z),K={data:$,width:F,height:B,glyphWidth:I,glyphHeight:L,glyphTop:M,glyphLeft:0,glyphAdvance:t};if(I===0||L===0)return K;const{ctx:se,buffer:pe,gridInner:ge,gridOuter:me}=this;this.lang&&(se.lang=this.lang),se.clearRect(pe,pe,I,L),se.fillText(w,pe,pe+M);const _e=se.getImageData(pe,pe,I,L);me.fill(Ut,0,Z),ge.fill(0,0,Z);for(let Ae=0;Ae<L;Ae++)for(let ye=0;ye<I;ye++){const Se=_e.data[4*(Ae*I+ye)+3]/255;if(Se===0)continue;const Ie=(Ae+pe)*F+ye+pe;if(Se===1)me[Ie]=0,ge[Ie]=Ut;else{const be=.5-Se;me[Ie]=be>0?be*be:0,ge[Ie]=be<0?be*be:0}}Ht(me,0,0,F,B,F,this.f,this.v,this.z),Ht(ge,pe,pe,I,L,F,this.f,this.v,this.z);for(let Ae=0;Ae<Z;Ae++){const ye=Math.sqrt(me[Ae])-Math.sqrt(ge[Ae]);$[Ae]=Math.round(255-255*(ye/this.radius+this.cutoff))}return K}};class Tt{constructor(){this.specification=c.u.light.position}possiblyEvaluate(t,l){return c.F(t.expression.evaluate(l))}interpolate(t,l,p){return{x:c.G.number(t.x,l.x,p),y:c.G.number(t.y,l.y,p),z:c.G.number(t.z,l.z,p)}}}let gt;class $t extends c.E{constructor(t){super(),gt=gt||new c.t({anchor:new c.D(c.u.light.anchor),position:new Tt,color:new c.D(c.u.light.color),intensity:new c.D(c.u.light.intensity)}),this._transitionable=new c.x(gt,void 0),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,l={}){if(!this._validate(c.y,t,l))for(const p in t){const v=t[p];p.endsWith(c.z)?this._transitionable.setTransition(p.slice(0,-c.z.length),v):this._transitionable.setValue(p,v)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,l,p){return(!p||p.validate!==!1)&&c.B(this,t.call(c.C,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:c.u}))}}const Le=new c.t({"sky-color":new c.D(c.u.sky["sky-color"]),"horizon-color":new c.D(c.u.sky["horizon-color"]),"fog-color":new c.D(c.u.sky["fog-color"]),"fog-ground-blend":new c.D(c.u.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.u.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.u.sky["atmosphere-blend"])});class tt extends c.E{constructor(t){super(),this._transitionable=new c.x(Le,void 0),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0))}setSky(t,l={}){if(!this._validate(c.J,t,l)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in t){const v=t[p];p.endsWith(c.z)?this._transitionable.setTransition(p.slice(0,-c.z.length),v):this._transitionable.setValue(p,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,l,p={}){return p?.validate!==!1&&c.B(this,t.call(c.C,c.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:c.u})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class xt{constructor(t,l){this.width=t,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,l){const p=t.join(",")+String(l);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(t,l)),this.dashEntry[p]}getDashRanges(t,l,p){const v=[];let S=t.length%2==1?-t[t.length-1]*p:0,M=t[0]*p,I=!0;v.push({left:S,right:M,isDash:I,zeroLength:t[0]===0});let L=t[0];for(let F=1;F<t.length;F++){I=!I;const B=t[F];S=L*p,L+=B,M=L*p,v.push({left:S,right:M,isDash:I,zeroLength:B===0})}return v}addRoundDash(t,l,p){const v=l/2;for(let S=-p;S<=p;S++){const M=this.width*(this.nextRow+p+S);let I=0,L=t[I];for(let F=0;F<this.width;F++){F/L.right>1&&(L=t[++I]);const B=Math.abs(F-L.left),Z=Math.abs(F-L.right),$=Math.min(B,Z);let K;const se=S/p*(v+1);if(L.isDash){const pe=v-Math.abs(se);K=Math.sqrt($*$+pe*pe)}else K=v-Math.sqrt($*$+se*se);this.data[M+F]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(t){for(let I=t.length-1;I>=0;--I){const L=t[I],F=t[I+1];L.zeroLength?t.splice(I,1):F&&F.isDash===L.isDash&&(F.left=L.left,t.splice(I,1))}const l=t[0],p=t[t.length-1];l.isDash===p.isDash&&(l.left=p.left-this.width,p.right=l.right+this.width);const v=this.width*this.nextRow;let S=0,M=t[S];for(let I=0;I<this.width;I++){I/M.right>1&&(M=t[++S]);const L=Math.abs(I-M.left),F=Math.abs(I-M.right),B=Math.min(L,F);this.data[v+I]=Math.max(0,Math.min(255,(M.isDash?B:-B)+128))}}addDash(t,l){const p=l?7:0,v=2*p+1;if(this.nextRow+v>this.height)return c.w("LineAtlas out of space"),null;let S=0;for(let I=0;I<t.length;I++)S+=t[I];if(S!==0){const I=this.width/S,L=this.getDashRanges(t,this.width,I);l?this.addRoundDash(L,I,p):this.addRegularDash(L)}const M={y:this.nextRow+p,height:2*p,width:S};return this.nextRow+=v,this.dirty=!0,M}bind(t){const l=t.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const St="maplibre_preloaded_worker_pool";class Nt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Nt.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach((l=>{l.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[St]}numActive(){return Object.keys(this.active).length}}const Zt=Math.floor(Y.hardwareConcurrency/2);let Jt,on;function Sn(){return Jt||(Jt=new Nt),Jt}Nt.workerCount=c.K(globalThis)?Math.max(Math.min(Zt,3),1):1;class Ri{constructor(t,l){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=l;const p=this.workerPool.acquire(l);for(let v=0;v<p.length;v++){const S=new c.L(p[v],l);S.name=`Worker ${v}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,l){const p=[];for(const v of this.actors)p.push(v.sendAsync({type:t,data:l}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((l=>{l.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,l){for(const p of this.actors)p.registerMessageHandler(t,l)}unregisterMessageHandler(t){for(const l of this.actors)l.unregisterMessageHandler(t)}}function Tr(){return on||(on=new Ri(Sn(),c.M),on.registerMessageHandler("GR",((w,t,l)=>c.m(t,l)))),on}function Fi(w,t){const l=c.N();return c.O(l,l,[1,1,0]),c.Q(l,l,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?c.S(l,l,w.calculatePosMatrix(t.toUnwrapped())):l}function ta(w,t,l,p,v,S,M){var I;const L=(function($,K,se){if($)for(const pe of $){const ge=K[pe];if(ge&&ge.source===se&&ge.type==="fill-extrusion")return!0}else for(const pe in K){const ge=K[pe];if(ge.source===se&&ge.type==="fill-extrusion")return!0}return!1})((I=v?.layers)!==null&&I!==void 0?I:null,t,w.id),F=S.maxPitchScaleFactor(),B=w.tilesIn(p,F,L);B.sort(Nn);const Z=[];for(const $ of B)Z.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(t,l,w.getState(),$.queryGeometry,$.cameraQueryGeometry,$.scale,v,S,F,Fi(S,$.tileID),M?(K,se)=>M($.tileID,K,se):void 0)});return(function($,K){for(const se in $)for(const pe of $[se])bn(pe,K);return $})((function($){const K={},se={};for(const pe of $){const ge=pe.queryResults,me=pe.wrappedTileID,_e=se[me]=se[me]||{};for(const Ae in ge){const ye=ge[Ae],Se=_e[Ae]=_e[Ae]||{},Ie=K[Ae]=K[Ae]||[];for(const be of ye)Se[be.featureIndex]||(Se[be.featureIndex]=!0,Ie.push(be))}}return K})(Z),w)}function Nn(w,t){const l=w.tileID,p=t.tileID;return l.overscaledZ-p.overscaledZ||l.canonical.y-p.canonical.y||l.wrap-p.wrap||l.canonical.x-p.canonical.x}function bn(w,t){const l=w.feature,p=t.getFeatureState(l.layer["source-layer"],l.id);l.source=l.layer.source,l.layer["source-layer"]&&(l.sourceLayer=l.layer["source-layer"]),l.state=p}function Sr(w,t,l){return c._(this,void 0,void 0,(function*(){let p=w;if(w.url?p=(yield c.j(t.transformRequest(w.url,"Source"),l)).data:yield Y.frameAsync(l),!p)return null;const v=c.U(c.e(p,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(v.vectorLayerIds=p.vector_layers.map((S=>S.id))),v}))}class Xn{constructor(t,l){t&&(l?this.setSouthWest(t).setNorthEast(l):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof c.V?new c.V(t.lng,t.lat):c.V.convert(t),this}setSouthWest(t){return this._sw=t instanceof c.V?new c.V(t.lng,t.lat):c.V.convert(t),this}extend(t){const l=this._sw,p=this._ne;let v,S;if(t instanceof c.V)v=t,S=t;else{if(!(t instanceof Xn))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Xn.convert(t)):this.extend(c.V.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(c.V.convert(t)):this;if(v=t._sw,S=t._ne,!v||!S)return this}return l||p?(l.lng=Math.min(v.lng,l.lng),l.lat=Math.min(v.lat,l.lat),p.lng=Math.max(S.lng,p.lng),p.lat=Math.max(S.lat,p.lat)):(this._sw=new c.V(v.lng,v.lat),this._ne=new c.V(S.lng,S.lat)),this}getCenter(){return new c.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.V(this.getWest(),this.getNorth())}getSouthEast(){return new c.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:l,lat:p}=c.V.convert(t);let v=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&v}intersects(t){if(!((t=Xn.convert(t)).getNorth()>=this.getSouth()&&t.getSouth()<=this.getNorth()))return!1;const l=Math.abs(this.getEast()-this.getWest()),p=Math.abs(t.getEast()-t.getWest());if(l>=360||p>=360)return!0;const v=c.W(this.getWest(),-180,180),S=c.W(this.getEast(),-180,180),M=c.W(t.getWest(),-180,180),I=c.W(t.getEast(),-180,180),L=v>=S,F=M>=I;return!(!L||!F)||(L?I>=v||M<=S:F?S>=M||v<=I:M<=S&&I>=v)}static convert(t){return t instanceof Xn?t:t&&new Xn(t)}static fromLngLat(t,l=0){const p=360*l/40075017,v=p/Math.cos(Math.PI/180*t.lat);return new Xn(new c.V(t.lng-v,t.lat-p),new c.V(t.lng+v,t.lat+p))}adjustAntiMeridian(){const t=new c.V(this._sw.lng,this._sw.lat),l=new c.V(this._ne.lng,this._ne.lat);return new Xn(t,t.lng>l.lng?new c.V(l.lng+360,l.lat):l)}}class Za{constructor(t,l,p){this.bounds=Xn.convert(this.validateBounds(t)),this.minzoom=l||0,this.maxzoom=p||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const l=Math.pow(2,t.z),p=Math.floor(c.Y(this.bounds.getWest())*l),v=Math.floor(c.X(this.bounds.getNorth())*l),S=Math.ceil(c.Y(this.bounds.getEast())*l),M=Math.ceil(c.X(this.bounds.getSouth())*l);return t.x>=p&&t.x<S&&t.y>=v&&t.y<M}}class qa extends c.E{constructor(t,l,p,v){if(super(),this.id=t,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.U(l,["url","scheme","tileSize","promoteId","encoding"])),this._options=c.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield Sr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),t&&(c.e(this,t),t.bounds&&(this.tileBounds=new Za(t.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this._loaded=!0,c.Z(t)||this.fire(new c.k(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(t){return c._(this,void 0,void 0,(function*(){const l=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(l,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(t)};p.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise(((S,M)=>{t.reloadPromise={resolve:S,reject:M}}))}else t.actor=this.dispatcher.getActor(),v="LT";t.abortController=new AbortController;try{const S=yield t.actor.sendAsync({type:v,data:p},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,S)}catch(S){if(delete t.abortController,t.aborted)return;if(S&&S.status!==404)throw S;this._afterTileLoadWorkerResponse(t,null)}}))}_getOverzoomParameters(t){if(t.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const l=t.tileID.scaledTo(this.maxzoom).canonical,p=l.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:l,overzoomRequest:this.map._requestManager.transformRequest(p,"Tile")}}_afterTileLoadWorkerResponse(t,l){if(l&&l.resourceTiming&&(t.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&t.setExpiryData(l),t.loadVectorData(l,this.map.painter),t.reloadPromise){const p=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(p.resolve).catch(p.reject)}}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Br extends c.E{constructor(t,l,p,v){super(),this.id=t,this.dispatcher=p,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},l),c.e(this,c.U(l,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,(function*(t=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield Sr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(c.e(this,l),l.bounds&&(this.tileBounds=new Za(l.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(l){this._tileJSONRequest=null,this._loaded=!0,c.Z(l)||this.fire(new c.k(l))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return c.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return c._(this,void 0,void 0,(function*(){const l=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const p=yield Ne.getImage(this.map._requestManager.transformRequest(l,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&t.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const v=this.map.painter.context,S=v.gl,M=p.data;t.texture=this.map.painter.getTileTexture(M.width),t.texture?t.texture.update(M,{useMipmap:!0}):(t.texture=new c.T(v,M,S.RGBA,{useMipmap:!0}),t.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(p){if(delete t.abortController,t.aborted)t.state="unloaded";else if(p)throw t.state="errored",p}}))}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class na extends Br{constructor(t,l,p,v){super(t,l,p,v),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(t){return c._(this,void 0,void 0,(function*(){const l=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(l,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const v=yield Ne.getImage(p,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(v&&v.data){const S=v.data;this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&t.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const M=c.b(S)&&c.$()?S:yield this.readImageNow(S),I={type:this.type,uid:t.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const L=yield t.actor.sendAsync({type:"LDT",data:I});t.dem=L,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(v){if(delete t.abortController,t.aborted)t.state="unloaded";else if(v)throw t.state="errored",v}}))}readImageNow(t){return c._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&c.a0()){const l=t.width+2,p=t.height+2;try{return new c.R({width:l,height:p},yield c.a1(t,-1,-1,l,p))}catch{}}return Y.getImageData(t,1)}))}_getNeighboringTiles(t){const l=t.canonical,p=Math.pow(2,l.z),v=(l.x-1+p)%p,S=l.x===0?t.wrap-1:t.wrap,M=(l.x+1+p)%p,I=l.x+1===p?t.wrap+1:t.wrap,L={};return L[new c.a2(t.overscaledZ,S,l.z,v,l.y).key]={backfilled:!1},L[new c.a2(t.overscaledZ,I,l.z,M,l.y).key]={backfilled:!1},l.y>0&&(L[new c.a2(t.overscaledZ,S,l.z,v,l.y-1).key]={backfilled:!1},L[new c.a2(t.overscaledZ,t.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},L[new c.a2(t.overscaledZ,I,l.z,M,l.y-1).key]={backfilled:!1}),l.y+1<p&&(L[new c.a2(t.overscaledZ,S,l.z,v,l.y+1).key]={backfilled:!1},L[new c.a2(t.overscaledZ,t.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},L[new c.a2(t.overscaledZ,I,l.z,M,l.y+1).key]={backfilled:!1}),L}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}function la(w){return w.type==="GeometryCollection"?w.geometries.map((t=>t.coordinates)).flat(1/0):w.coordinates.flat(1/0)}function js(w){const t=new Xn;let l;switch(w.type){case"FeatureCollection":l=w.features.map((p=>la(p.geometry))).flat(1/0);break;case"Feature":l=la(w.geometry);break;default:l=la(w)}if(l.length==0)return t;for(let p=0;p<l.length-1;p+=2)t.extend([l[p],l[p+1]]);return t}class ji extends c.E{constructor(t,l,p,v){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:l.data},this.actor=p.getActor(),this.setEventedParent(v),this._data=typeof l.data=="string"?{url:l.data}:{geojson:l.data},this._options=c.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId,l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(l.buffer!==void 0?l.buffer:128),tolerance:this._pixelsToTileUnits(l.tolerance!==void 0?l.tolerance:.375),extent:c.a5,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(l.clusterMaxZoom),minPoints:Math.max(2,l.clusterMinPoints||2),extent:c.a5,radius:this._pixelsToTileUnits(l.clusterRadius||50),log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(t){return t*(c.a5/this.tileSize)}_getClusterMaxZoom(t){const l=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${l}"`),l}load(){return c._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t,l){this._data=typeof t=="string"?{url:t}:{geojson:t},this._pendingWorkerUpdate={data:t};const p=this._updateWorkerData();return l?p:this}updateData(t,l){this._pendingWorkerUpdate.diff=c.a6(this._pendingWorkerUpdate.diff,t);const p=this._updateWorkerData();return l?p:this}getData(){return c._(this,void 0,void 0,(function*(){const t=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}getBounds(){return c._(this,void 0,void 0,(function*(){return js(yield this.getData())}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,l,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:l,offset:p}})}_updateWorkerData(){return c._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void c.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:t,diff:l}=this._pendingWorkerUpdate,p=c.e({type:this.type},this.workerOptions);t!==void 0?(typeof t=="string"?(p.request=this.map._requestManager.transformRequest(Y.resolveURL(t),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=t,this._pendingWorkerUpdate.data=void 0):l&&(p.dataDiff=l,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:p});if(this._isUpdatingWorker=!1,this._removed||v.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));v.data&&(this._data={geojson:v.data});const S=this._applyDiffToSource(l),M=this._getShouldReloadTileOptions(S);let I=null;v.resourceTiming&&v.resourceTiming[this.id]&&(I=v.resourceTiming[this.id].slice(0));const L={dataType:"source"};this._collectResourceTiming&&I&&I.length>0&&c.e(L,{resourceTiming:I}),this.fire(new c.l("data",Object.assign(Object.assign({},L),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},L),{sourceDataType:"content",shouldReloadTileOptions:M})))}catch(v){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(v))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(t){if(!t)return;const l=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const v=c.a7(this._data.geojson,l);if(!v)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:v}}if(!this._data.updateable)return;const p=c.a8(this._data.updateable,t,l);return t.removeAll||this._options.cluster?void 0:p}_getShouldReloadTileOptions(t){if(t)return{affectedBounds:t.filter(Boolean).map((l=>js(l)))}}shouldReloadTile(t,{affectedBounds:l}){if(t.state==="loading")return!0;if(t.state==="unloaded")return!1;const{buffer:p,extent:v}=this.workerOptions.geojsonVtOptions,S=(function({x:M,y:I,z:L},F=0){const B=c.a3((M-F)/Math.pow(2,L)),Z=c.a4((I+1+F)/Math.pow(2,L)),$=c.a3((M+1+F)/Math.pow(2,L)),K=c.a4((I-F)/Math.pow(2,L));return new Xn([B,Z],[$,K])})(t.tileID.canonical,p/v);for(const M of l)if(S.intersects(M))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(t){return c._(this,void 0,void 0,(function*(){const l=t.actor?"RT":"LT";t.actor=this.actor;const p={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};t.abortController=new AbortController;const v=yield this.actor.sendAsync({type:l,data:p},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(v,this.map.painter,l==="RT")}))}abortTile(t){return c._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return c._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Dr extends c.E{constructor(t,l,p,v){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=p,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=l}load(t){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield Ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,t&&(this.coordinates=t),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,c.Z(l)||this.fire(new c.k(l))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const l=t.map(c.a9.fromLngLat);var p;return this.tileID=(function(v){const S=c.aa.fromPoints(v),M=S.width(),I=S.height(),L=Math.max(M,I),F=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),B=Math.pow(2,F);return new c.ac(F,Math.floor((S.minX+S.maxX)/2*B),Math.floor((S.minY+S.maxY)/2*B))})(l),this.terrainTileRanges=this._getOverlappingTileRanges(l),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=l.map((v=>this.tileID.getTilePoint(v)._round())),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,l=t.gl;this.texture||(this.texture=new c.T(t,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let p=!1;for(const v in this.tiles){const S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,p=!0)}p&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return c._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){const{minX:l,minY:p,maxX:v,maxY:S}=c.aa.fromPoints(t),M={};for(let I=0;I<=c.ab;I++){const L=Math.pow(2,I),F=Math.floor(l*L),B=Math.floor(p*L),Z=Math.floor(v*L),$=Math.floor(S*L);M[I]={minTileX:F,minTileY:B,maxTileX:Z,maxTileY:$}}return M}}class Fe extends Dr{constructor(t,l,p,v){super(t,l,p,v),this.roundZoom=!0,this.type="video",this.options=l}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const l of t.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield c.ad(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new c.k(l))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const l=this.video.seekable;t<l.start(0)||t>l.end(0)?this.fire(new c.k(new c.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,l=t.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(t,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let p=!1;for(const v in this.tiles){const S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,p=!0)}p&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class re extends Dr{constructor(t,l,p,v){super(t,l,p,v),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some((S=>!Array.isArray(S)||S.length!==2||S.some((M=>typeof M!="number"))))||this.fire(new c.k(new c.ae(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.ae(`sources.${t}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new c.k(new c.ae(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.ae(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.ae(`sources.${t}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,p=l.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new c.T(l,this.canvas,p.RGBA,{premultiply:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let v=!1;for(const S in this.tiles){const M=this.tiles[S];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,v=!0)}v&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const ae={},he=w=>{switch(w){case"geojson":return ji;case"image":return Dr;case"raster":return Br;case"raster-dem":return na;case"vector":return qa;case"video":return Fe;case"canvas":return re}return ae[w]},De="RTLPluginLoaded";class ke extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Tr()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((l=>{throw this.status="error",l}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return c._(this,arguments,void 0,(function*(l,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=Y.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return c._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(De))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ye=null;function Ue(){return Ye||(Ye=new ke),Ye}var Pe,He;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(Pe||(Pe={})),(function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"})(He||(He={}));class ht{constructor(t,l){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=t,this.uid=c.af(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(t){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(t||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:t,fadingDirection:l,fadingParentID:p,fadeEndTime:v}){this.resetFadeLogic(),this.fadingRole=t,this.fadingDirection=l,this.fadingParentID=p,this.fadeEndTime=v}setSelfFadeLogic(t){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=t}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=ie(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,l,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData,this.latestFeatureIndex.encoding=t.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=(function(v,S){const M={};if(!S)return M;for(const I of v){const L=I.layerIds.map((F=>S.getLayer(F))).filter(Boolean);if(L.length!==0){I.layers=L,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map((F=>L.filter((B=>B.id===F))[0])));for(const F of L)M[F.id]=I}}return M})(t.buckets,l?.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const S=this.buckets[v];if(S instanceof c.ah){if(this.hasSymbolBuckets=!0,!p)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const S=this.buckets[v];if(S instanceof c.ah&&S.hasRTLText){this.hasRTLText=!0,Ue().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const S=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(v).queryRadius(S))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),this.dashPositions=t.dashPositions}else this.collisionBoxArray=new c.ag}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const p in this.buckets){const v=this.buckets[p];v.uploadPending()&&v.upload(t)}const l=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(t,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(t,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,l,p,v,S,M,I,L,F,B,Z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:S,scale:M,tileSize:this.tileSize,pixelPosMatrix:B,transform:L,params:I,queryPadding:this.queryPadding*F,getElevation:Z},t,l,p):{}}querySourceFeatures(t,l){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const v=p.loadVTLayers(),S=l&&l.sourceLayer?l.sourceLayer:"",M=v[c.ai]||v[S];if(!M)return;const I=c.aj(l?.filter,l?.globalState),{z:L,x:F,y:B}=this.tileID.canonical,Z={z:L,x:F,y:B};for(let $=0;$<M.length;$++){const K=M.feature($);if(I.needGeometry){const ge=c.ak(K,!0);if(!I.filter(new c.H(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!I.filter(new c.H(this.tileID.overscaledZ),K))continue;const se=p.getId(K,S),pe=new c.al(K,L,F,B,se);pe.tile=Z,t.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const l=this.expirationTime;if(t.cacheControl){const p=c.am(t.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const p=Date.now();let v=!1;if(this.expirationTime>p)v=!1;else if(l)if(this.expirationTime<l)v=!0;else{const S=this.expirationTime-l;S?this.expirationTime=p+Math.max(S,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!l.style.hasLayer(v))continue;const S=this.buckets[v],M=S.layers[0].sourceLayer||c.ai,I=p[M],L=t[M];if(!I||!L||Object.keys(L).length===0)continue;S.update(L,I,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const F=l&&l.style&&l.style.getLayer(v);F&&(this.queryPadding=Math.max(this.queryPadding,F.queryRadius(S)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ie()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(t){this.symbolFadeHoldUntil=ie()+t}setDependencies(t,l){const p={};for(const v of l)p[v]=!0;this.dependencies[t]=p}hasDependency(t,l){for(const p of t){const v=this.dependencies[p];if(v){for(const S of l)if(v[S])return!0}}return!1}}class dt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,l,p){const v=String(l);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][v]=this.stateChanges[t][v]||{},c.e(this.stateChanges[t][v],p),this.deletedStates[t]===null){this.deletedStates[t]={};for(const S in this.state[t])S!==v&&(this.deletedStates[t][S]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][v]===null){this.deletedStates[t][v]={};for(const S in this.state[t][v])p[S]||(this.deletedStates[t][v][S]=null)}else for(const S in p)this.deletedStates[t]&&this.deletedStates[t][v]&&this.deletedStates[t][v][S]===null&&delete this.deletedStates[t][v][S]}removeFeatureState(t,l,p){if(this.deletedStates[t]===null)return;const v=String(l);if(this.deletedStates[t]=this.deletedStates[t]||{},p&&l!==void 0)this.deletedStates[t][v]!==null&&(this.deletedStates[t][v]=this.deletedStates[t][v]||{},this.deletedStates[t][v][p]=null);else if(l!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][v])for(p in this.deletedStates[t][v]={},this.stateChanges[t][v])this.deletedStates[t][v][p]=null;else this.deletedStates[t][v]=null;else this.deletedStates[t]=null}getState(t,l){const p=String(l),v=c.e({},(this.state[t]||{})[p],(this.stateChanges[t]||{})[p]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const S=this.deletedStates[t][l];if(S===null)return{};for(const M in S)delete v[M]}return v}initializeTileState(t,l){t.setFeatureState(this.state,l)}coalesceChanges(t,l){const p={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const S={};for(const M in this.stateChanges[v])this.state[v][M]||(this.state[v][M]={}),c.e(this.state[v][M],this.stateChanges[v][M]),S[M]=this.state[v][M];p[v]=S}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const S={};if(this.deletedStates[v]===null)for(const M in this.state[v])S[M]={},this.state[v][M]={};else for(const M in this.deletedStates[v]){if(this.deletedStates[v][M]===null)this.state[v][M]={};else for(const I of Object.keys(this.deletedStates[v][M]))delete this.state[v][M][I];S[M]=this.state[v][M]}p[v]=p[v]||{},c.e(p[v],S)}this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0&&t.setFeatureState(p,l)}}const Ft=89.25;function qt(w,t){const l=c.an(t.lat,-c.ao,c.ao);return new c.P(c.Y(t.lng)*w,c.X(l)*w)}function an(w,t){return new c.a9(t.x/w,t.y/w).toLngLat()}function Qn(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(c.ap(90-w.pitch)),Math.tan(c.ap(Ft-w.pitch)))}function Pn(w,t){const l=w.canonical,p=t/c.aq(l.z),v=l.x+Math.pow(2,l.z)*w.wrap,S=c.ar(new Float64Array(16));return c.O(S,S,[v*p,l.y*p,0]),c.Q(S,S,[p/c.a5,p/c.a5,1]),S}function $e(w,t,l,p,v){const S=c.a9.fromLngLat(w,t),M=v*c.as(1,w.lat),{x:I,y:L,z:F}=ei(l,p);return new c.a9(S.x+M*-I,S.y+M*-L,S.z+M*-F)}function ei(w,t){const l=c.ap(w),p=c.ap(t),v=Math.cos(-l),S=Math.sin(l);return{x:S*Math.sin(p),y:-S*Math.cos(p),z:v}}function pr(w,t,l){const p=t.intersectsFrustum(w);if(!l||p===0)return p;const v=t.intersectsPlane(l);return v===0?0:p===2&&v===2?2:1}function un(w,t,l){let p=0;const v=(l-t)/10;for(let S=0;S<10;S++)p+=v*Math.pow(Math.cos(t+(S+.5)/10*(l-t)),w);return p}function ti(w,t){return function(l,p,v,S,M){const I=2*((w-1)/c.at(Math.cos(c.ap(Ft-M))/Math.cos(c.ap(Ft)))-1),L=Math.acos(v/S),F=2*un(I-1,0,c.ap(M/2)),B=Math.min(c.ap(Ft),L+c.ap(M/2)),Z=un(I-1,Math.min(B,L-c.ap(M/2)),B),$=Math.atan(p/v),K=Math.hypot(p,v);let se=l;return se+=c.at(S/K/Math.max(.5,Math.cos(c.ap(M/2)))),se+=I*c.at(Math.cos($))/2,se-=c.at(Math.max(1,Z/F/t))/2,se}}const Ir=ti(9.314,3);function si(w,t){const l=(t.roundZoom?Math.round:Math.floor)(w.zoom+c.at(w.tileSize/t.tileSize));return Math.max(0,l)}function Qi(w,t){const l=w.getCameraFrustum(),p=w.getClippingPlane(),v=w.screenPointToMercatorCoordinate(w.getCameraPoint()),S=c.a9.fromLngLat(w.center,w.elevation);v.z=S.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const M=w.getCoveringTilesDetailsProvider(),I=M.allowVariableZoom(w,t),L=si(w,t),F=t.minzoom||0,B=t.maxzoom!==void 0?t.maxzoom:w.maxZoom,Z=Math.min(Math.max(0,L),B),$=Math.pow(2,Z),K=[$*v.x,$*v.y,0],se=[$*S.x,$*S.y,0],pe=Math.hypot(S.x-v.x,S.y-v.y),ge=Math.abs(S.z-v.z),me=Math.hypot(pe,ge),_e=Se=>({zoom:0,x:0,y:0,wrap:Se,fullyVisible:!1}),Ae=[],ye=[];if(w.renderWorldCopies&&M.allowWorldCopies())for(let Se=1;Se<=3;Se++)Ae.push(_e(-Se)),Ae.push(_e(Se));for(Ae.push(_e(0));Ae.length>0;){const Se=Ae.pop(),Ie=Se.x,be=Se.y;let je=Se.fullyVisible;const Qe={x:Ie,y:be,z:Se.zoom},Ze=M.getTileBoundingVolume(Qe,Se.wrap,w.elevation,t);if(!je){const At=pr(l,Ze,p);if(At===0)continue;je=At===2}const We=M.distanceToTile2d(v.x,v.y,Qe,Ze);let Xe=L;I&&(Xe=(t.calculateTileZoom||Ir)(w.zoom+c.at(w.tileSize/t.tileSize),We,ge,me,w.fov)),Xe=(t.roundZoom?Math.round:Math.floor)(Xe),Xe=Math.max(0,Xe);const Et=Math.min(Xe,B);if(Se.wrap=M.getWrap(S,Qe,Se.wrap),Se.zoom>=Et){if(Se.zoom<F)continue;const At=Z-Se.zoom,pt=K[0]-.5-(Ie<<At),It=K[1]-.5-(be<<At),cn=t.reparseOverscaled?Math.max(Se.zoom,Xe):Se.zoom;ye.push({tileID:new c.a2(Se.zoom===B?cn:Se.zoom,Se.wrap,Se.zoom,Ie,be),distanceSq:c.au([se[0]-.5-Ie,se[1]-.5-be]),tileDistanceToCamera:Math.sqrt(pt*pt+It*It)})}else for(let At=0;At<4;At++)Ae.push({zoom:Se.zoom+1,x:(Ie<<1)+At%2,y:(be<<1)+(At>>1),wrap:Se.wrap,fullyVisible:je})}return ye.sort(((Se,Ie)=>Se.distanceSq-Ie.distanceSq)).map((Se=>Se.tileID))}const pi=c.aa.fromPoints([new c.P(0,0),new c.P(c.a5,c.a5)]);function mr(w){return w==="raster"||w==="image"||w==="video"}function Su(w,t,l,p,v,S,M){if(!t.hasData())return!1;const{tileID:I,fadingRole:L,fadingDirection:F,fadingParentID:B}=t;if(L===Pe.Base&&F===He.Incoming&&B)return l[B.key]=B,!0;const Z=Math.max(I.overscaledZ-v,S);for(let $=I.overscaledZ-1;$>=Z;$--){const K=I.scaledTo($),se=w.getLoadedTile(K);if(se)return t.setCrossFadeLogic({fadingRole:Pe.Base,fadingDirection:He.Incoming,fadingParentID:se.tileID,fadeEndTime:p+M}),se.setCrossFadeLogic({fadingRole:Pe.Parent,fadingDirection:He.Departing,fadeEndTime:p+M}),l[K.key]=K,!0}return!1}function Ac(w,t,l,p,v,S){if(!t.hasData())return!1;const M=t.tileID.children(v);let I=wt(w,t,M,l,p,v,S);if(I)return!0;for(const L of M)wt(w,t,L.children(v),l,p,v,S)&&(I=!0);return I}function wt(w,t,l,p,v,S,M){if(l[0].overscaledZ>=S)return!1;let I=!1;for(const L of l){const F=w.getLoadedTile(L);if(!F)continue;const{fadingRole:B,fadingDirection:Z,fadingParentID:$}=F;B===Pe.Base&&Z===He.Departing&&$||(F.setCrossFadeLogic({fadingRole:Pe.Base,fadingDirection:He.Departing,fadingParentID:t.tileID,fadeEndTime:v+M}),t.setCrossFadeLogic({fadingRole:Pe.Parent,fadingDirection:He.Incoming,fadeEndTime:v+M})),p[L.key]=L,I=!0}return I}function ca(w,t,l,p){const v=w.tileID;return!!w.selfFading||!w.hasData()&&!!t.has(v)&&(w.setSelfFadeLogic(l+p),!0)}function ua(w,t){var l;w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let p=t.tileID.canonical.x-w.tileID.canonical.x;const v=t.tileID.canonical.y-w.tileID.canonical.y,S=Math.pow(2,w.tileID.canonical.z),M=t.tileID.key;p===0&&v===0||Math.abs(v)>1||(Math.abs(p)>1&&(Math.abs(p+S)===1?p+=S:Math.abs(p-S)===1&&(p-=S)),t.dem&&w.dem&&(w.dem.backfillBorder(t.dem,p,v),!((l=w.neighboringTiles)===null||l===void 0)&&l[M]&&(w.neighboringTiles[M].backfilled=!0)))}class Bs{constructor(){this._tiles={}}handleWrapJump(t){const l={};for(const p in this._tiles){const v=this._tiles[p];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+t),l[v.tileID.key]=v}this._tiles=l}setFeatureState(t,l){for(const p in this._tiles)this._tiles[p].setFeatureState(t,l)}getAllTiles(){return Object.values(this._tiles)}getAllIds(t=!1){return t?Object.values(this._tiles).map((l=>l.tileID)).sort(c.aw).map((l=>l.key)):Object.keys(this._tiles)}getTileById(t){return this._tiles[t]}setTile(t,l){this._tiles[t]=l}deleteTileById(t){delete this._tiles[t]}getLoadedTile(t){const l=this.getTileById(t.key);return l?.hasData()?l:null}isIdRenderable(t,l=!1){var p;return(p=this.getTileById(t))===null||p===void 0?void 0:p.isRenderable(l)}getRenderableIds(t=0,l){const p=[];for(const v of this.getAllIds())this.isIdRenderable(v,l)&&p.push(this.getTileById(v));return l?p.sort(((v,S)=>{const M=v.tileID,I=S.tileID,L=new c.P(M.canonical.x,M.canonical.y)._rotate(-t),F=new c.P(I.canonical.x,I.canonical.y)._rotate(-t);return M.overscaledZ-I.overscaledZ||F.y-L.y||F.x-L.x})).map((v=>v.tileID.key)):p.map((v=>v.tileID)).sort(c.aw).map((v=>v.key))}}class wi extends c.E{constructor(t,l,p){super(),this.id=t,this.dispatcher=p,this.on("data",(v=>this._dataHandler(v))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((v,S,M,I)=>{const L=new(he(S.type))(v,S,M,I);if(L.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${L.id}`);return L})(t,l,p,this),this._inViewTiles=new Bs,this._outOfViewCache=new c.ax(0,(v=>this._unloadTile(v))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new dt,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){for(const l of this._inViewTiles.getAllTiles())l.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t),this._inViewTiles=new Bs}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,l,p){return c._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,l,p)}catch(v){t.state="errored",v.status!==404?this._source.fire(new c.k(v,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new c.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const l of this._inViewTiles.getAllTiles())l.upload(t),l.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(t){var l;return this._inViewTiles.getRenderableIds((l=this.transform)===null||l===void 0?void 0:l.bearingInRadians,t)}hasRenderableParent(t){const l=t.overscaledZ-1;if(l>=this._source.minzoom){const p=this.getLoadedTile(t.scaledTo(l));if(p)return this._inViewTiles.isIdRenderable(p.tileID.key)}return!1}reload(t,l=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const p of this._inViewTiles.getAllIds()){const v=this._inViewTiles.getTileById(p);l&&!this._source.shouldReloadTile(v,l)||(t?this._reloadTile(p,"expired"):v.state!=="errored"&&this._reloadTile(p,"reloading"))}}}_reloadTile(t,l){return c._(this,void 0,void 0,(function*(){const p=this._inViewTiles.getTileById(t);p&&(p.state!=="loading"&&(p.state=l),yield this._loadTile(p,t,l))}))}_tileLoaded(t,l,p){t.timeAdded=ie(),t.selfFading&&(t.fadeEndTime=t.timeAdded+this._rasterFadeDuration),p==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(l,t),this.getSource().type==="raster-dem"&&t.dem&&(function(v,S){var M,I;const L=S.getRenderableIds();for(const F of L){if(!v.neighboringTiles||!v.neighboringTiles[F])continue;const B=S.getTileById(F);v.neighboringTiles[F].backfilled||ua(v,B),!((I=(M=B.neighboringTiles)===null||M===void 0?void 0:M[v.tileID.key])===null||I===void 0)&&I.backfilled||ua(B,v)}})(t,this._inViewTiles),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:t,coord:t.tileID}))}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._inViewTiles.getTileById(t)}_retainLoadedChildren(t,l){const p=this._getLoadedDescendents(l),v=new Set;for(const S of l){const M=p[S.key];if(!M?.length){v.add(S);continue}const I=S.overscaledZ+wi.maxOverzooming,L=M.filter((Z=>Z.tileID.overscaledZ<=I));if(!L.length){v.add(S);continue}const F=Math.min(...L.map((Z=>Z.tileID.overscaledZ))),B=L.filter((Z=>Z.tileID.overscaledZ===F)).map((Z=>Z.tileID));for(const Z of B)t[Z.key]=Z;this._areDescendentsComplete(B,F,S.overscaledZ)||v.add(S)}return v}_getLoadedDescendents(t){var l;const p={};for(const v of this._inViewTiles.getAllTiles().filter((S=>S.hasData())))for(const S of t)v.tileID.isChildOf(S)&&(p[l=S.key]||(p[l]=[])).push(v);return p}_areDescendentsComplete(t,l,p){return t.length===1&&t[0].isOverscaled()?t[0].overscaledZ===l:Math.pow(4,l-p)===t.length}getLoadedTile(t){return this._inViewTiles.getLoadedTile(t)}updateCacheSize(t){const l=Math.ceil(t.width/this._source.tileSize)+1,p=Math.ceil(t.height/this._source.tileSize)+1,v=Math.floor(l*p*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._outOfViewCache.setMaxSize(S)}handleWrapJump(t){const l=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);this._prevLng=t,l&&(this._inViewTiles.handleWrapJump(l),this._resetTileReloadTimers())}update(t,l){if(!this._sourceLoaded||this._paused)return;let p;this.transform=t,this.terrain=l,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?p=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((L=>new c.a2(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y))):(p=Qi(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?t.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter((L=>this._source.hasTile(L))))):p=[],this.usedForTerrain&&(p=this._addTerrainIdealTiles(p));const v=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,v&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const S=si(t,this._source),M=this._updateRetainedTiles(p,S),I=mr(this._source.type);I&&this._rasterFadeDuration>0&&!l&&(function(L,F,B,Z,$,K,se){const pe=ie(),ge=c.av(F);for(const me of F){const _e=L.getTileById(me.key);_e.fadingDirection!==He.Departing&&_e.fadeOpacity!==0||_e.resetFadeLogic(),Su(L,_e,B,pe,Z,$,se)||Ac(L,_e,B,pe,K,se)||ca(_e,ge,pe,se)||_e.resetFadeLogic()}})(this._inViewTiles,p,M,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),I?this._cleanUpRasterTiles(M):this._cleanUpVectorTiles(M)}_cleanUpRasterTiles(t){for(const l of this._inViewTiles.getAllIds())t[l]||this._removeTile(l)}_cleanUpVectorTiles(t){for(const l of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(l);t[l]?p.clearSymbolFadeHold():p.hasSymbolBuckets?p.holdingForSymbolFade()?p.symbolFadeFinished()&&this._removeTile(l):p.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(l)}}_addTerrainIdealTiles(t){const l=[];for(const p of t)if(p.canonical.z>this._source.minzoom){const v=p.scaledTo(p.canonical.z-1);l.push(v);const S=p.scaledTo(Math.max(this._source.minzoom,Math.min(p.canonical.z,5)));l.push(S)}return t.concat(l)}releaseSymbolFadeTiles(){for(const t of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(t).holdingForSymbolFade()&&this._removeTile(t)}_updateRetainedTiles(t,l){var p;const v=new Set;for(const F of t)this._addTile(F).hasData()||v.add(F);const S=t.reduce(((F,B)=>(F[B.key]=B,F)),{}),M=this._retainLoadedChildren(S,v),I={},L=Math.max(l-wi.maxUnderzooming,this._source.minzoom);for(const F of M){let B=this._inViewTiles.getTileById(F.key),Z=B?.wasRequested();for(let $=F.overscaledZ-1;$>=L;--$){const K=F.scaledTo($);if(I[K.key])break;if(I[K.key]=!0,B=this.getTile(K),!B&&Z&&(B=this._addTile(K)),B){const se=B.hasData();if((se||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||Z)&&(S[K.key]=K),Z=B.wasRequested(),se)break}}}return S}_addTile(t){let l=this._inViewTiles.getTileById(t.key);if(l)return l;l=this._outOfViewCache.getAndRemove(t),l&&(l.resetFadeLogic(),this._setTileReloadTimer(t.key,l),l.tileID=t,this._state.initializeTileState(l,this.map?this.map.painter:null));const p=l;return l||(l=new ht(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(l,t.key,l.state)),l.uses++,this._inViewTiles.setTile(t.key,l),p||this._source.fire(new c.l("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(t,l){this._clearTileReloadTimer(t);const p=l.getExpiryTimeout();p&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),p))}_clearTileReloadTimer(t){const l=this._timers[t];l&&(clearTimeout(l),delete this._timers[t])}_resetTileReloadTimers(){for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t of this._inViewTiles.getAllIds()){const l=this._inViewTiles.getTileById(t);this._setTileReloadTimer(t,l)}}refreshTiles(t){for(const l of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(l);(this._inViewTiles.isIdRenderable(l)||p.state=="errored")&&t.some((v=>v.equals(p.tileID.canonical)))&&this._reloadTile(l,"expired")}}_removeTile(t){const l=this._inViewTiles.getTileById(t);l&&(l.uses--,this._inViewTiles.deleteTileById(t),this._clearTileReloadTimer(t),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._outOfViewCache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(t){t.dataType==="source"&&(t.sourceDataType!=="metadata"?t.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(t.sourceDataChanged,t.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t of this._inViewTiles.getAllIds())this._removeTile(t);this._outOfViewCache.reset()}tilesIn(t,l,p){const v=[],S=this.transform;if(!S)return v;const M=S.getCoveringTilesDetailsProvider().allowWorldCopies(),I=p?S.getCameraQueryGeometry(t):t,L=K=>S.screenPointToMercatorCoordinate(K,this.terrain),F=this.transformBbox(t,L,!M),B=this.transformBbox(I,L,!M),Z=this.getIds(),$=c.aa.fromPoints(B);for(let K=0;K<Z.length;K++){const se=this._inViewTiles.getTileById(Z[K]);if(se.holdingForSymbolFade())continue;const pe=M?[se.tileID]:[se.tileID.unwrapTo(-1),se.tileID.unwrapTo(0)],ge=Math.pow(2,S.zoom-se.tileID.overscaledZ),me=l*se.queryPadding*c.a5/se.tileSize/ge;for(const _e of pe){const Ae=$.map((ye=>_e.getTilePoint(new c.a9(ye.x,ye.y))));if(Ae.expandBy(me),Ae.intersects(pi)){const ye=F.map((Ie=>_e.getTilePoint(Ie))),Se=B.map((Ie=>_e.getTilePoint(Ie)));v.push({tile:se,tileID:M?_e:_e.unwrapTo(0),queryGeometry:ye,cameraQueryGeometry:Se,scale:ge})}}}return v}transformBbox(t,l,p){let v=t.map(l);if(p){const S=c.aa.fromPoints(t);S.shrinkBy(.001*Math.min(S.width(),S.height()));const M=S.map(l);c.aa.fromPoints(v).covers(M)||(v=v.map((I=>I.x>.5?new c.a9(I.x-1,I.y,I.z):I)))}return v}getVisibleCoordinates(t){const l=this.getRenderableIds(t).map((p=>this._inViewTiles.getTileById(p).tileID));return this.transform&&this.transform.populateCache(l),l}hasTransition(){return!!this._source.hasTransition()||!(!mr(this._source.type)||!(function(t,l){if(l<=0)return!1;const p=ie();for(const v of t.getAllTiles())if(v.fadeEndTime>=p)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(t){this._rasterFadeDuration=t}setFeatureState(t,l,p){this._state.updateState(t=t||c.ai,l,p)}removeFeatureState(t,l,p){this._state.removeFeatureState(t=t||c.ai,l,p)}getFeatureState(t,l){return this._state.getState(t=t||c.ai,l)}setDependencies(t,l,p){const v=this._inViewTiles.getTileById(t);v&&v.setDependencies(l,p)}reloadTilesForDependencies(t,l){for(const p of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(p).hasDependency(t,l)&&this._reloadTile(p,"reloading");this._outOfViewCache.filter((p=>!p.hasDependency(t,l)))}areTilesLoaded(){for(const t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}}wi.maxUnderzooming=10,wi.maxOverzooming=3;class Ct{constructor(t,l){this.reset(t,l)}reset(t,l){this.points=t||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=c.an(t,0,1);let l=1,p=this._distances[l];const v=t*this.paddedLength+this.padding;for(;p<v&&l<this._distances.length;)p=this._distances[++l];const S=l-1,M=this._distances[S],I=p-M,L=I>0?(v-M)/I:0;return this.points[S].mult(1-L).add(this.points[l].mult(L))}}function dn(w,t){let l=!0;return w==="always"||w!=="never"&&t!=="never"||(l=!1),l}class vn{constructor(t,l,p){const v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(t/p),this.yCellCount=Math.ceil(l/p);for(let M=0;M<this.xCellCount*this.yCellCount;M++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=l,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,l,p,v,S){this._forEachCell(l,p,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(v),this.bboxes.push(S)}insertCircle(t,l,p,v){this._forEachCell(l-v,p-v,l+v,p+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(l),this.circles.push(p),this.circles.push(v)}_insertBoxCell(t,l,p,v,S,M){this.boxCells[S].push(M)}_insertCircleCell(t,l,p,v,S,M){this.circleCells[S].push(M)}_query(t,l,p,v,S,M,I){if(p<0||t>this.width||v<0||l>this.height)return[];const L=[];if(t<=0&&l<=0&&this.width<=p&&this.height<=v){if(S)return[{key:null,x1:t,y1:l,x2:p,y2:v}];for(let F=0;F<this.boxKeys.length;F++)L.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){const B=this.circles[3*F],Z=this.circles[3*F+1],$=this.circles[3*F+2];L.push({key:this.circleKeys[F],x1:B-$,y1:Z-$,x2:B+$,y2:Z+$})}}else this._forEachCell(t,l,p,v,this._queryCell,L,{hitTest:S,overlapMode:M,seenUids:{box:{},circle:{}}},I);return L}query(t,l,p,v){return this._query(t,l,p,v,!1,null)}hitTest(t,l,p,v,S,M){return this._query(t,l,p,v,!0,S,M).length>0}hitTestCircle(t,l,p,v,S){const M=t-p,I=t+p,L=l-p,F=l+p;if(I<0||M>this.width||F<0||L>this.height)return!1;const B=[];return this._forEachCell(M,L,I,F,this._queryCellCircle,B,{hitTest:!0,overlapMode:v,circle:{x:t,y:l,radius:p},seenUids:{box:{},circle:{}}},S),B.length>0}_queryCell(t,l,p,v,S,M,I,L){const{seenUids:F,hitTest:B,overlapMode:Z}=I,$=this.boxCells[S];if($!==null){const se=this.bboxes;for(const pe of $)if(!F.box[pe]){F.box[pe]=!0;const ge=4*pe,me=this.boxKeys[pe];if(t<=se[ge+2]&&l<=se[ge+3]&&p>=se[ge+0]&&v>=se[ge+1]&&(!L||L(me))&&(!B||!dn(Z,me.overlapMode))&&(M.push({key:me,x1:se[ge],y1:se[ge+1],x2:se[ge+2],y2:se[ge+3]}),B))return!0}}const K=this.circleCells[S];if(K!==null){const se=this.circles;for(const pe of K)if(!F.circle[pe]){F.circle[pe]=!0;const ge=3*pe,me=this.circleKeys[pe];if(this._circleAndRectCollide(se[ge],se[ge+1],se[ge+2],t,l,p,v)&&(!L||L(me))&&(!B||!dn(Z,me.overlapMode))){const _e=se[ge],Ae=se[ge+1],ye=se[ge+2];if(M.push({key:me,x1:_e-ye,y1:Ae-ye,x2:_e+ye,y2:Ae+ye}),B)return!0}}}return!1}_queryCellCircle(t,l,p,v,S,M,I,L){const{circle:F,seenUids:B,overlapMode:Z}=I,$=this.boxCells[S];if($!==null){const se=this.bboxes;for(const pe of $)if(!B.box[pe]){B.box[pe]=!0;const ge=4*pe,me=this.boxKeys[pe];if(this._circleAndRectCollide(F.x,F.y,F.radius,se[ge+0],se[ge+1],se[ge+2],se[ge+3])&&(!L||L(me))&&!dn(Z,me.overlapMode))return M.push(!0),!0}}const K=this.circleCells[S];if(K!==null){const se=this.circles;for(const pe of K)if(!B.circle[pe]){B.circle[pe]=!0;const ge=3*pe,me=this.circleKeys[pe];if(this._circlesCollide(se[ge],se[ge+1],se[ge+2],F.x,F.y,F.radius)&&(!L||L(me))&&!dn(Z,me.overlapMode))return M.push(!0),!0}}}_forEachCell(t,l,p,v,S,M,I,L){const F=this._convertToXCellCoord(t),B=this._convertToYCellCoord(l),Z=this._convertToXCellCoord(p),$=this._convertToYCellCoord(v);for(let K=F;K<=Z;K++)for(let se=B;se<=$;se++)if(S.call(this,t,l,p,v,this.xCellCount*se+K,M,I,L))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,l,p,v,S,M){const I=v-t,L=S-l,F=p+M;return F*F>I*I+L*L}_circleAndRectCollide(t,l,p,v,S,M,I){const L=(M-v)/2,F=Math.abs(t-(v+L));if(F>L+p)return!1;const B=(I-S)/2,Z=Math.abs(l-(S+B));if(Z>B+p)return!1;if(F<=L||Z<=B)return!0;const $=F-L,K=Z-B;return $*$+K*K<=p*p}}function Ya(w,t,l){const p=c.N();if(!w){const{vecSouth:Z,vecEast:$}=To(t),K=D();K[0]=$[0],K[1]=$[1],K[2]=Z[0],K[3]=Z[1],v=K,(B=(M=(S=K)[0])*(F=S[3])-(L=S[2])*(I=S[1]))&&(v[0]=F*(B=1/B),v[1]=-I*B,v[2]=-L*B,v[3]=M*B),p[0]=K[0],p[1]=K[1],p[4]=K[2],p[5]=K[3]}var v,S,M,I,L,F,B;return c.Q(p,p,[1/l,1/l,1]),p}function af(w,t,l,p){if(w){const v=c.N();if(!t){const{vecSouth:S,vecEast:M}=To(l);v[0]=M[0],v[1]=M[1],v[4]=S[0],v[5]=S[1]}return c.Q(v,v,[p,p,1]),v}return l.pixelsToClipSpaceMatrix}function To(w){const t=Math.cos(w.rollInRadians),l=Math.sin(w.rollInRadians),p=Math.cos(w.pitchInRadians),v=Math.cos(w.bearingInRadians),S=Math.sin(w.bearingInRadians),M=c.aC();M[0]=-v*p*l-S*t,M[1]=-S*p*l+v*t;const I=c.aD(M);I<1e-9?c.aE(M):c.aF(M,M,1/I);const L=c.aC();L[0]=v*p*t-S*l,L[1]=S*p*t+v*l;const F=c.aD(L);return F<1e-9?c.aE(L):c.aF(L,L,1/F),{vecEast:L,vecSouth:M}}function hn(w,t,l,p){let v;p?(v=[w,t,p(w,t),1],c.aH(v,v,l)):(v=[w,t,0,1],ms(v,v,l));const S=v[3];return{point:new c.P(v[0]/S,v[1]/S),signedDistanceFromCamera:S,isOccluded:!1}}function Mc(w,t){return .5+w/t*.5}function So(w,t){return w.x>=-t[0]&&w.x<=t[0]&&w.y>=-t[1]&&w.y<=t[1]}function ll(w,t,l,p,v,S,M,I,L,F,B,Z,$){const K=l?w.textSizeData:w.iconSizeData,se=c.ay(K,t.transform.zoom),pe=[256/t.width*2+1,256/t.height*2+1],ge=l?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ge.clear();const me=w.lineVertexArray,_e=l?w.text.placedSymbolArray:w.icon.placedSymbolArray,Ae=t.transform.width/t.transform.height;let ye=!1;for(let Se=0;Se<_e.length;Se++){const Ie=_e.get(Se);if(Ie.hidden||Ie.writingMode===c.az.vertical&&!ye){Mo(Ie.numGlyphs,ge);continue}ye=!1;const be=new c.P(Ie.anchorX,Ie.anchorY),je={getElevation:$,pitchedLabelPlaneMatrix:p,lineVertexArray:me,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:be,unwrappedTileID:L,width:F,height:B,translation:Z},Qe=Au(Ie.anchorX,Ie.anchorY,je);if(!So(Qe.point,pe)){Mo(Ie.numGlyphs,ge);continue}const Ze=Mc(t.transform.cameraToCenterDistance,Qe.signedDistanceFromCamera),We=c.aA(K,se,Ie),Xe=S?We*t.transform.getPitchedTextCorrection(Ie.anchorX,Ie.anchorY,L)/Ze:We*Ze,Et=Ki({projectionContext:je,pitchedLabelPlaneMatrixInverse:v,symbol:Ie,fontSize:Xe,flip:!1,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Ae,rotateToLine:I});ye=Et.useVertical,(Et.notEnoughRoom||ye||Et.needsFlipping&&Ki({projectionContext:je,pitchedLabelPlaneMatrixInverse:v,symbol:Ie,fontSize:Xe,flip:!0,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Ae,rotateToLine:I}).notEnoughRoom)&&Mo(Ie.numGlyphs,ge)}l?w.text.dynamicLayoutVertexBuffer.updateData(ge):w.icon.dynamicLayoutVertexBuffer.updateData(ge)}function Eo(w,t,l,p,v,S,M,I){const L=S.glyphStartIndex+S.numGlyphs,F=S.lineStartIndex,B=S.lineStartIndex+S.lineLength,Z=t.getoffsetX(S.glyphStartIndex),$=t.getoffsetX(L-1),K=Vs(w*Z,l,p,v,S.segment,F,B,I,M);if(!K)return null;const se=Vs(w*$,l,p,v,S.segment,F,B,I,M);return se?I.projectionCache.anyProjectionOccluded?null:{first:K,last:se}:null}function Ao(w,t,l,p){return w===c.az.horizontal&&Math.abs(l.y-t.y)>Math.abs(l.x-t.x)*p?{useVertical:!0}:(w===c.az.vertical?t.y<l.y:t.x>l.x)?{needsFlipping:!0}:null}function Ki(w){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:l,symbol:p,fontSize:v,flip:S,keepUpright:M,glyphOffsetArray:I,dynamicLayoutVertexArray:L,aspectRatio:F,rotateToLine:B}=w,Z=v/24,$=p.lineOffsetX*Z,K=p.lineOffsetY*Z;let se;if(p.numGlyphs>1){const pe=p.glyphStartIndex+p.numGlyphs,ge=p.lineStartIndex,me=p.lineStartIndex+p.lineLength,_e=Eo(Z,I,$,K,S,p,B,t);if(!_e)return{notEnoughRoom:!0};const Ae=cl(_e.first.point.x,_e.first.point.y,t,l),ye=cl(_e.last.point.x,_e.last.point.y,t,l);if(M&&!S){const Se=Ao(p.writingMode,Ae,ye,F);if(Se)return Se}se=[_e.first];for(let Se=p.glyphStartIndex+1;Se<pe-1;Se++){const Ie=Vs(Z*I.getoffsetX(Se),$,K,S,p.segment,ge,me,t,B);if(!Ie)return{notEnoughRoom:!0};se.push(Ie)}se.push(_e.last)}else{if(M&&!S){const ge=zn(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,me=p.lineStartIndex+p.segment+1,_e=new c.P(t.lineVertexArray.getx(me),t.lineVertexArray.gety(me)),Ae=zn(_e.x,_e.y,t),ye=Ae.signedDistanceFromCamera>0?Ae.point:Eu(t.tileAnchorPoint,_e,ge,1,t),Se=cl(ge.x,ge.y,t,l),Ie=cl(ye.x,ye.y,t,l),be=Ao(p.writingMode,Se,Ie,F);if(be)return be}const pe=Vs(Z*I.getoffsetX(p.glyphStartIndex),$,K,S,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,t,B);if(!pe||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};se=[pe]}for(const pe of se)c.aG(L,pe.point,pe.angle);return{}}function Eu(w,t,l,p,v){const S=w.add(w.sub(t)._unit()),M=zn(S.x,S.y,v).point,I=l.sub(M);return l.add(I._mult(p/I.mag()))}function ha(w,t,l){const p=t.projectionCache;if(p.projections[w])return p.projections[w];const v=new c.P(t.lineVertexArray.getx(w),t.lineVertexArray.gety(w)),S=zn(v.x,v.y,t);if(S.signedDistanceFromCamera>0)return p.projections[w]=S.point,p.anyProjectionOccluded=p.anyProjectionOccluded||S.isOccluded,S.point;const M=w-l.direction;return Eu(l.distanceFromAnchor===0?t.tileAnchorPoint:new c.P(t.lineVertexArray.getx(M),t.lineVertexArray.gety(M)),v,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,t)}function zn(w,t,l){const p=w+l.translation[0],v=t+l.translation[1];let S;return l.pitchWithMap?(S=hn(p,v,l.pitchedLabelPlaneMatrix,l.getElevation),S.isOccluded=!1):(S=l.transform.projectTileCoordinates(p,v,l.unwrappedTileID,l.getElevation),S.point.x=(.5*S.point.x+.5)*l.width,S.point.y=(.5*-S.point.y+.5)*l.height),S}function cl(w,t,l,p){if(l.pitchWithMap){const v=[w,t,0,1];return c.aH(v,v,p),l.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],l.unwrappedTileID,l.getElevation).point}return{x:w/l.width*2-1,y:1-t/l.height*2}}function Au(w,t,l){return l.transform.projectTileCoordinates(w,t,l.unwrappedTileID,l.getElevation)}function Mu(w,t,l){return w._unit()._perp()._mult(t*l)}function Vl(w,t,l,p,v,S,M,I,L){if(I.projectionCache.offsets[w])return I.projectionCache.offsets[w];const F=l.add(t);if(w+L.direction<p||w+L.direction>=v)return I.projectionCache.offsets[w]=F,F;const B=ha(w+L.direction,I,L),Z=Mu(B.sub(l),M,L.direction),$=l.add(Z),K=B.add(Z);return I.projectionCache.offsets[w]=c.aI(S,F,$,K)||F,I.projectionCache.offsets[w]}function Vs(w,t,l,p,v,S,M,I,L){const F=p?w-t:w+t;let B=F>0?1:-1,Z=0;p&&(B*=-1,Z=Math.PI),B<0&&(Z+=Math.PI);let $,K=B>0?S+v:S+v+1;I.projectionCache.cachedAnchorPoint?$=I.projectionCache.cachedAnchorPoint:($=zn(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=$);let se,pe,ge=$,me=$,_e=0,Ae=0;const ye=Math.abs(F),Se=[];let Ie;for(;_e+Ae<=ye;){if(K+=B,K<S||K>=M)return null;_e+=Ae,me=ge,pe=se;const Qe={absOffsetX:ye,direction:B,distanceFromAnchor:_e,previousVertex:me};if(ge=ha(K,I,Qe),l===0)Se.push(me),Ie=ge.sub(me);else{let Ze;const We=ge.sub(me);Ze=We.mag()===0?Mu(ha(K+B,I,Qe).sub(ge),l,B):Mu(We,l,B),pe||(pe=me.add(Ze)),se=Vl(K,Ze,ge,S,M,pe,l,I,Qe),Se.push(pe),Ie=se.sub(pe)}Ae=Ie.mag()}const be=Ie._mult((ye-_e)/Ae)._add(pe||me),je=Z+Math.atan2(ge.y-me.y,ge.x-me.x);return Se.push(be),{point:be,angle:L?je:0,path:Se}}const kh=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Mo(w,t){for(let l=0;l<w;l++){const p=t.length;t.resize(p+4),t.float32.set(kh,3*p)}}function ms(w,t,l){const p=t[0],v=t[1];return w[0]=l[0]*p+l[4]*v+l[12],w[1]=l[1]*p+l[5]*v+l[13],w[3]=l[3]*p+l[7]*v+l[15],w}const qn=100;class Sp{constructor(t,l=new vn(t.width+200,t.height+200,25),p=new vn(t.width+200,t.height+200,25)){this.transform=t,this.grid=l,this.ignoredGrid=p,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+qn,this.screenBottomBoundary=t.height+qn,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,l,p,v,S,M,I,L,F,B,Z,$){const K=this.projectAndGetPerspectiveRatio(t.anchorPointX+L[0],t.anchorPointY+L[1],S,B,$),se=p*K.perspectiveRatio;let pe;if(M||I)pe=this._projectCollisionBox(t,se,v,S,M,I,L,K,B,Z,$);else{const Ie=K.x+(Z?Z.x*se:0),be=K.y+(Z?Z.y*se:0);pe={allPointsOccluded:!1,box:[Ie+t.x1*se,be+t.y1*se,Ie+t.x2*se,be+t.y2*se]}}const[ge,me,_e,Ae]=pe.box,ye=M?pe.allPointsOccluded:K.isOccluded;let Se=ye;return Se||(Se=K.perspectiveRatio<this.perspectiveRatioCutoff),Se||(Se=!this.isInsideGrid(ge,me,_e,Ae)),Se||l!=="always"&&this.grid.hitTest(ge,me,_e,Ae,l,F)?{box:[ge,me,_e,Ae],placeable:!1,offscreen:!1,occluded:ye}:{box:[ge,me,_e,Ae],placeable:!0,offscreen:this.isOffscreen(ge,me,_e,Ae),occluded:ye}}placeCollisionCircles(t,l,p,v,S,M,I,L,F,B,Z,$,K,se){const pe=[],ge=new c.P(l.anchorX,l.anchorY),me=this.getPerspectiveRatio(ge.x,ge.y,M,se),_e=(F?S*this.transform.getPitchedTextCorrection(l.anchorX,l.anchorY,M)/me:S*me)/c.aM,Ae={getElevation:se,pitchedLabelPlaneMatrix:I,lineVertexArray:p,pitchWithMap:F,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ge,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:K},ye=Eo(_e,v,l.lineOffsetX*_e,l.lineOffsetY*_e,!1,l,!1,Ae);let Se=!1,Ie=!1,be=!0;if(ye){const je=.5*Z*me+$,Qe=new c.P(-100,-100),Ze=new c.P(this.screenRightBoundary,this.screenBottomBoundary),We=new Ct,Xe=ye.first,Et=ye.last;let At=[];for(let cn=Xe.path.length-1;cn>=1;cn--)At.push(Xe.path[cn]);for(let cn=1;cn<Et.path.length;cn++)At.push(Et.path[cn]);const pt=2.5*je;if(F){const cn=this.projectPathToScreenSpace(At,Ae);At=cn.some((Jn=>Jn.signedDistanceFromCamera<=0))?[]:cn.map((Jn=>Jn.point))}let It=[];if(At.length>0){const cn=At[0].clone(),Jn=At[0].clone();for(let Ti=1;Ti<At.length;Ti++)cn.x=Math.min(cn.x,At[Ti].x),cn.y=Math.min(cn.y,At[Ti].y),Jn.x=Math.max(Jn.x,At[Ti].x),Jn.y=Math.max(Jn.y,At[Ti].y);It=cn.x>=Qe.x&&Jn.x<=Ze.x&&cn.y>=Qe.y&&Jn.y<=Ze.y?[At]:Jn.x<Qe.x||cn.x>Ze.x||Jn.y<Qe.y||cn.y>Ze.y?[]:c.aJ([At],Qe.x,Qe.y,Ze.x,Ze.y)}for(const cn of It){We.reset(cn,.25*je);let Jn=0;Jn=We.length<=.5*je?1:Math.ceil(We.paddedLength/pt)+1;for(let Ti=0;Ti<Jn;Ti++){const yi=Ti/Math.max(Jn-1,1),Oi=We.lerp(yi),li=Oi.x+qn,Wi=Oi.y+qn;pe.push(li,Wi,je,0);const Li=li-je,Gr=Wi-je,nr=li+je,ir=Wi+je;if(be=be&&this.isOffscreen(Li,Gr,nr,ir),Ie=Ie||this.isInsideGrid(Li,Gr,nr,ir),t!=="always"&&this.grid.hitTestCircle(li,Wi,je,t,B)&&(Se=!0,!L))return{circles:[],offscreen:!1,collisionDetected:Se}}}}return{circles:!L&&Se||!Ie||me<this.perspectiveRatioCutoff?[]:pe,offscreen:be,collisionDetected:Se}}projectPathToScreenSpace(t,l){const p=(function(v,S){const M=c.N();return c.aB(M,S.pitchedLabelPlaneMatrix),v.map((I=>{const L=hn(I.x,I.y,M,S.getElevation),F=S.transform.projectTileCoordinates(L.point.x,L.point.y,S.unwrappedTileID,S.getElevation);return F.point.x=(.5*F.point.x+.5)*S.width,F.point.y=(.5*-F.point.y+.5)*S.height,F}))})(t,l);return(function(v){let S=0,M=0,I=0,L=0;for(let F=0;F<v.length;F++)v[F].isOccluded?(I=F+1,L=0):(L++,L>M&&(M=L,S=I));return v.slice(S,S+M)})(p)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[],p=new c.aa;for(const Z of t){const $=new c.P(Z.x+qn,Z.y+qn);p.extend($),l.push($)}const{minX:v,minY:S,maxX:M,maxY:I}=p,L=this.grid.query(v,S,M,I).concat(this.ignoredGrid.query(v,S,M,I)),F={},B={};for(const Z of L){const $=Z.key;if(F[$.bucketInstanceId]===void 0&&(F[$.bucketInstanceId]={}),F[$.bucketInstanceId][$.featureIndex])continue;const K=[new c.P(Z.x1,Z.y1),new c.P(Z.x2,Z.y1),new c.P(Z.x2,Z.y2),new c.P(Z.x1,Z.y2)];c.aK(l,K)&&(F[$.bucketInstanceId][$.featureIndex]=!0,B[$.bucketInstanceId]===void 0&&(B[$.bucketInstanceId]=[]),B[$.bucketInstanceId].push($.featureIndex))}return B}insertCollisionBox(t,l,p,v,S,M){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:S,collisionGroupID:M,overlapMode:l},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,l,p,v,S,M){const I=p?this.ignoredGrid:this.grid,L={bucketInstanceId:v,featureIndex:S,collisionGroupID:M,overlapMode:l};for(let F=0;F<t.length;F+=4)I.insertCircle(L,t[F],t[F+1],t[F+2])}projectAndGetPerspectiveRatio(t,l,p,v,S){if(S){let M;v?(M=[t,l,v(t,l),1],c.aH(M,M,S)):(M=[t,l,0,1],ms(M,M,S));const I=M[3];return{x:(M[0]/I+1)/2*this.transform.width+qn,y:(-M[1]/I+1)/2*this.transform.height+qn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const M=this.transform.projectTileCoordinates(t,l,p,v);return{x:(M.point.x+1)/2*this.transform.width+qn,y:(1-M.point.y)/2*this.transform.height+qn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(t,l,p,v){const S=this.transform.projectTileCoordinates(t,l,p,v);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(t,l,p,v){return p<qn||t>=this.screenRightBoundary||v<qn||l>this.screenBottomBoundary}isInsideGrid(t,l,p,v){return p>=0&&t<this.gridRightBoundary&&v>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const t=c.ar([]);return c.O(t,t,[-100,-100,0]),t}_projectCollisionBox(t,l,p,v,S,M,I,L,F,B,Z){let $=1,K=0,se=0,pe=1;const ge=t.anchorPointX+I[0],me=t.anchorPointY+I[1];if(M&&!S){const At=this.projectAndGetPerspectiveRatio(ge+1,me,v,F,Z),pt=At.x-L.x,It=Math.atan((At.y-L.y)/pt)+(pt<0?Math.PI:0),cn=Math.sin(It),Jn=Math.cos(It);$=Jn,K=cn,se=-cn,pe=Jn}else if(!M&&S){const At=To(this.transform);$=At.vecEast[0],K=At.vecEast[1],se=At.vecSouth[0],pe=At.vecSouth[1]}let _e=L.x,Ae=L.y,ye=l;S&&(_e=ge,Ae=me,ye=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),ye*=this.transform.getPitchedTextCorrection(ge,me,v),B||(ye*=c.an(.5+L.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),B&&(_e+=$*B.x*ye+se*B.y*ye,Ae+=K*B.x*ye+pe*B.y*ye);const Se=t.x1*ye,Ie=t.x2*ye,be=(Se+Ie)/2,je=t.y1*ye,Qe=t.y2*ye,Ze=(je+Qe)/2,We=[{offsetX:Se,offsetY:je},{offsetX:be,offsetY:je},{offsetX:Ie,offsetY:je},{offsetX:Ie,offsetY:Ze},{offsetX:Ie,offsetY:Qe},{offsetX:be,offsetY:Qe},{offsetX:Se,offsetY:Qe},{offsetX:Se,offsetY:Ze}];let Xe=[];for(const{offsetX:At,offsetY:pt}of We)Xe.push(new c.P(_e+$*At+se*pt,Ae+K*At+pe*pt));let Et=!1;if(S){const At=Xe.map((pt=>this.projectAndGetPerspectiveRatio(pt.x,pt.y,v,F,Z)));Et=At.some((pt=>!pt.isOccluded)),Xe=At.map((pt=>new c.P(pt.x,pt.y)))}else Et=!0;return{box:c.aL(Xe),allPointsOccluded:!Et}}}class og{constructor(t,l,p,v){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?l:-l))):v&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Cc{constructor(t,l,p,v,S){this.text=new og(t?t.text:null,l,p,S),this.icon=new og(t?t.icon:null,l,v,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ep{constructor(t,l,p){this.text=t,this.icon=l,this.skipFade=p}}class Oh{constructor(t,l,p,v,S){this.bucketInstanceId=t,this.featureIndex=l,this.sourceLayerIndex=p,this.bucketIndex=v,this.tileID=S}}class lg{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const l=++this.maxGroupID;this.collisionGroups[t]={ID:l,predicate:p=>p.collisionGroupID===l}}return this.collisionGroups[t]}}function ba(w,t,l,p,v){const{horizontalAlign:S,verticalAlign:M}=c.aS(w);return new c.P(-(S-.5)*t+p[0]*v,-(M-.5)*l+p[1]*v)}class Lh{constructor(t,l,p,v,S){this.transform=t.clone(),this.terrain=l,this.collisionIndex=new Sp(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new lg(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const l=this.terrain;return l?(p,v)=>l.getElevation(t,p,v):null}getBucketParts(t,l,p,v){const S=p.getBucket(l),M=p.latestFeatureIndex;if(!S||!M||l.id!==S.layerIds[0])return;const I=p.collisionBoxArray,L=S.layers[0].layout,F=S.layers[0].paint,B=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),Z=p.tileSize/c.a5,$=p.tileID.toUnwrapped(),K=L.get("text-rotation-alignment")==="map",se=c.aN(p,1,this.transform.zoom),pe=c.aO(this.collisionIndex.transform,p,F.get("text-translate"),F.get("text-translate-anchor")),ge=c.aO(this.collisionIndex.transform,p,F.get("icon-translate"),F.get("icon-translate-anchor")),me=Ya(K,this.transform,se);this.retainedQueryData[S.bucketInstanceId]=new Oh(S.bucketInstanceId,M,S.sourceLayerIndex,S.index,p.tileID);const _e={bucket:S,layout:L,translationText:pe,translationIcon:ge,unwrappedTileID:$,pitchedLabelPlaneMatrix:me,scale:B,textPixelRatio:Z,holdingForFade:p.holdingForSymbolFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:c.ay(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(v)for(const Ae of S.sortKeyRanges){const{sortKey:ye,symbolInstanceStart:Se,symbolInstanceEnd:Ie}=Ae;t.push({sortKey:ye,symbolInstanceStart:Se,symbolInstanceEnd:Ie,parameters:_e})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:_e})}attemptAnchorPlacement(t,l,p,v,S,M,I,L,F,B,Z,$,K,se,pe,ge,me,_e,Ae,ye){const Se=c.aP[t.textAnchor],Ie=[t.textOffset0,t.textOffset1],be=ba(Se,p,v,Ie,S),je=this.collisionIndex.placeCollisionBox(l,$,L,F,B,I,M,ge,Z.predicate,Ae,be,ye);if((!_e||this.collisionIndex.placeCollisionBox(_e,$,L,F,B,I,M,me,Z.predicate,Ae,be,ye).placeable)&&je.placeable){let Qe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(Qe=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:Ie,width:p,height:v,anchor:Se,textBoxScale:S,prevAnchor:Qe},this.markUsedJustification(se,Se,K,pe),se.allowVerticalPlacement&&(this.markUsedOrientation(se,pe,K),this.placedOrientations[K.crossTileID]=pe),{shift:be,placedGlyphBoxes:je}}}placeLayerBucketPart(t,l,p){const{bucket:v,layout:S,translationText:M,translationIcon:I,unwrappedTileID:L,pitchedLabelPlaneMatrix:F,textPixelRatio:B,holdingForFade:Z,collisionBoxArray:$,partiallyEvaluatedTextSize:K,collisionGroup:se}=t.parameters,pe=S.get("text-optional"),ge=S.get("icon-optional"),me=c.aQ(S,"text-overlap","text-allow-overlap"),_e=me==="always",Ae=c.aQ(S,"icon-overlap","icon-allow-overlap"),ye=Ae==="always",Se=S.get("text-rotation-alignment")==="map",Ie=S.get("text-pitch-alignment")==="map",be=S.get("icon-text-fit")!=="none",je=S.get("symbol-z-order")==="viewport-y",Qe=_e&&(ye||!v.hasIconData()||ge),Ze=ye&&(_e||!v.hasTextData()||pe);!v.collisionArrays&&$&&v.deserializeCollisionBoxes($);const We=this.retainedQueryData[v.bucketInstanceId].tileID,Xe=this._getTerrainElevationFunc(We),Et=this.transform.getFastPathSimpleProjectionMatrix(We),At=(pt,It,cn)=>{var Jn,Ti;if(l[pt.crossTileID])return;if(Z)return void(this.placements[pt.crossTileID]=new Ep(!1,!1,!1));let yi=!1,Oi=!1,li=!0,Wi=null,Li={box:null,placeable:!1,offscreen:null,occluded:!1},Gr={placeable:!1},nr=null,ir=null,$r=null,qo=0,Yo=0,Xs=0;It.textFeatureIndex?qo=It.textFeatureIndex:pt.useRuntimeCollisionCircles&&(qo=pt.featureIndex),It.verticalTextFeatureIndex&&(Yo=It.verticalTextFeatureIndex);const Na=It.textBox;if(Na){const Pa=ii=>{let _i=c.az.horizontal;if(v.allowVerticalPlacement&&!ii&&this.prevPlacement){const _r=this.prevPlacement.placedOrientations[pt.crossTileID];_r&&(this.placedOrientations[pt.crossTileID]=_r,_i=_r,this.markUsedOrientation(v,_i,pt))}return _i},rs=(ii,_i)=>{if(v.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&It.verticalTextBox){for(const _r of v.writingModes)if(_r===c.az.vertical?(Li=_i(),Gr=Li):Li=ii(),Li&&Li.placeable)break}else Li=ii()},As=pt.textAnchorOffsetStartIndex,Ms=pt.textAnchorOffsetEndIndex;if(Ms===As){const ii=(_i,_r)=>{const Ar=this.collisionIndex.placeCollisionBox(_i,me,B,We,L,Ie,Se,M,se.predicate,Xe,void 0,Et);return Ar&&Ar.placeable&&(this.markUsedOrientation(v,_r,pt),this.placedOrientations[pt.crossTileID]=_r),Ar};rs((()=>ii(Na,c.az.horizontal)),(()=>{const _i=It.verticalTextBox;return v.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&_i?ii(_i,c.az.vertical):{box:null,offscreen:null}})),Pa(Li&&Li.placeable)}else{let ii=c.aP[(Ti=(Jn=this.prevPlacement)===null||Jn===void 0?void 0:Jn.variableOffsets[pt.crossTileID])===null||Ti===void 0?void 0:Ti.anchor];const _i=(Ar,Of,Lf)=>{const oc=Ar.x2-Ar.x1,Ag=Ar.y2-Ar.y1,lc=pt.textBoxScale,Nf=be&&Ae==="never"?Of:null;let Tl=null,Sl=me==="never"?1:2,Ks="never";ii&&Sl++;for(let Pf=0;Pf<Sl;Pf++){for(let gd=As;gd<Ms;gd++){const yd=v.textAnchorOffsets.get(gd);if(ii&&yd.textAnchor!==ii)continue;const _d=this.attemptAnchorPlacement(yd,Ar,oc,Ag,lc,Se,Ie,B,We,L,se,Ks,pt,v,Lf,M,I,Nf,Xe);if(_d&&(Tl=_d.placedGlyphBoxes,Tl&&Tl.placeable))return yi=!0,Wi=_d.shift,Tl}ii?ii=null:Ks=me}return p&&!Tl&&(Tl={box:this.collisionIndex.placeCollisionBox(Na,"always",B,We,L,Ie,Se,M,se.predicate,Xe,void 0,Et).box,offscreen:!1,placeable:!1,occluded:!1}),Tl};rs((()=>_i(Na,It.iconBox,c.az.horizontal)),(()=>{const Ar=It.verticalTextBox;return v.allowVerticalPlacement&&(!Li||!Li.placeable)&&pt.numVerticalGlyphVertices>0&&Ar?_i(Ar,It.verticalIconBox,c.az.vertical):{box:null,occluded:!0,offscreen:null}})),Li&&(yi=Li.placeable,li=Li.offscreen);const _r=Pa(Li&&Li.placeable);if(!yi&&this.prevPlacement){const Ar=this.prevPlacement.variableOffsets[pt.crossTileID];Ar&&(this.variableOffsets[pt.crossTileID]=Ar,this.markUsedJustification(v,Ar.anchor,pt,_r))}}}if(nr=Li,yi=nr&&nr.placeable,li=nr&&nr.offscreen,pt.useRuntimeCollisionCircles&&pt.centerJustifiedTextSymbolIndex>=0){const Pa=v.text.placedSymbolArray.get(pt.centerJustifiedTextSymbolIndex),rs=c.aA(v.textSizeData,K,Pa),As=S.get("text-padding");ir=this.collisionIndex.placeCollisionCircles(me,Pa,v.lineVertexArray,v.glyphOffsetArray,rs,L,F,p,Ie,se.predicate,pt.collisionCircleDiameter,As,M,Xe),ir.circles.length&&ir.collisionDetected&&!p&&c.w("Collisions detected, but collision boxes are not shown"),yi=_e||ir.circles.length>0&&!ir.collisionDetected,li=li&&ir.offscreen}if(It.iconFeatureIndex&&(Xs=It.iconFeatureIndex),It.iconBox){const Pa=rs=>this.collisionIndex.placeCollisionBox(rs,Ae,B,We,L,Ie,Se,I,se.predicate,Xe,be&&Wi?Wi:void 0,Et);Gr&&Gr.placeable&&It.verticalIconBox?($r=Pa(It.verticalIconBox),Oi=$r.placeable):($r=Pa(It.iconBox),Oi=$r.placeable),li=li&&$r.offscreen}const Kc=pe||pt.numHorizontalGlyphVertices===0&&pt.numVerticalGlyphVertices===0,Xu=ge||pt.numIconVertices===0;Kc||Xu?Xu?Kc||(Oi=Oi&&yi):yi=Oi&&yi:Oi=yi=Oi&&yi;const Qs=Oi&&$r.placeable;if(yi&&nr.placeable&&this.collisionIndex.insertCollisionBox(nr.box,me,S.get("text-ignore-placement"),v.bucketInstanceId,Gr&&Gr.placeable&&Yo?Yo:qo,se.ID),Qs&&this.collisionIndex.insertCollisionBox($r.box,Ae,S.get("icon-ignore-placement"),v.bucketInstanceId,Xs,se.ID),ir&&yi&&this.collisionIndex.insertCollisionCircles(ir.circles,me,S.get("text-ignore-placement"),v.bucketInstanceId,qo,se.ID),p&&this.storeCollisionData(v.bucketInstanceId,cn,It,nr,$r,ir),pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[pt.crossTileID]=new Ep((yi||Qe)&&!nr?.occluded,(Oi||Ze)&&!$r?.occluded,li||v.justReloaded),l[pt.crossTileID]=!0};if(je){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const pt=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let It=pt.length-1;It>=0;--It){const cn=pt[It];At(v.symbolInstances.get(cn),v.collisionArrays[cn],cn)}}else for(let pt=t.symbolInstanceStart;pt<t.symbolInstanceEnd;pt++)At(v.symbolInstances.get(pt),v.collisionArrays[pt],pt);v.justReloaded=!1}storeCollisionData(t,l,p,v,S,M){if(p.textBox||p.iconBox){let I,L;this.collisionBoxArrays.has(t)?I=this.collisionBoxArrays.get(t):(I=new Map,this.collisionBoxArrays.set(t,I)),I.has(l)?L=I.get(l):(L={text:null,icon:null},I.set(l,L)),p.textBox&&(L.text=v.box),p.iconBox&&(L.icon=S.box)}if(M){let I=this.collisionCircleArrays[t];I===void 0&&(I=this.collisionCircleArrays[t]=[]);for(let L=0;L<M.circles.length;L+=4)I.push(M.circles[L+0]-qn),I.push(M.circles[L+1]-qn),I.push(M.circles[L+2]),I.push(M.collisionDetected?1:0)}}markUsedJustification(t,l,p,v){let S;S=v===c.az.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[c.aR(l)];const M=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const I of M)I>=0&&(t.text.placedSymbolArray.get(I).crossTileID=S>=0&&I!==S?0:p.crossTileID)}markUsedOrientation(t,l,p){const v=l===c.az.horizontal||l===c.az.horizontalOnly?l:0,S=l===c.az.vertical?l:0,M=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const I of M)t.text.placedSymbolArray.get(I).placedOrientation=v;p.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let p=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const v=l?l.symbolFadeChange(t):1,S=l?l.opacities:{},M=l?l.variableOffsets:{},I=l?l.placedOrientations:{};for(const L in this.placements){const F=this.placements[L],B=S[L];B?(this.opacities[L]=new Cc(B,v,F.text,F.icon),p=p||F.text!==B.text.placed||F.icon!==B.icon.placed):(this.opacities[L]=new Cc(null,v,F.text,F.icon,F.skipFade),p=p||F.text||F.icon)}for(const L in S){const F=S[L];if(!this.opacities[L]){const B=new Cc(F,v,!1,!1);B.isHidden()||(this.opacities[L]=B,p=p||F.text.placed||F.icon.placed)}}for(const L in M)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=M[L]);for(const L in I)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=I[L]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:t)}updateLayerOpacities(t,l){const p={};for(const v of l){const S=v.getBucket(t);S&&v.latestFeatureIndex&&t.id===S.layerIds[0]&&this.updateBucketOpacities(S,v.tileID,p,v.collisionBoxArray)}}updateBucketOpacities(t,l,p,v){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const S=t.layers[0],M=S.layout,I=new Cc(null,0,!1,!1,!0),L=M.get("text-allow-overlap"),F=M.get("icon-allow-overlap"),B=S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Z=M.get("text-rotation-alignment")==="map",$=M.get("text-pitch-alignment")==="map",K=M.get("icon-text-fit")!=="none",se=new Cc(null,0,L&&(F||!t.hasIconData()||M.get("icon-optional")),F&&(L||!t.hasTextData()||M.get("text-optional")),!0);!t.collisionArrays&&v&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(v);const pe=(me,_e,Ae)=>{for(let ye=0;ye<_e/4;ye++)me.opacityVertexArray.emplaceBack(Ae);me.hasVisibleVertices=me.hasVisibleVertices||Ae!==Ic},ge=this.collisionBoxArrays.get(t.bucketInstanceId);for(let me=0;me<t.symbolInstances.length;me++){const _e=t.symbolInstances.get(me),{numHorizontalGlyphVertices:Ae,numVerticalGlyphVertices:ye,crossTileID:Se}=_e;let Ie=this.opacities[Se];p[Se]?Ie=I:Ie||(Ie=se,this.opacities[Se]=Ie),p[Se]=!0;const be=_e.numIconVertices>0,je=this.placedOrientations[_e.crossTileID],Qe=je===c.az.vertical,Ze=je===c.az.horizontal||je===c.az.horizontalOnly;if(Ae>0||ye>0){const Xe=of(Ie.text);pe(t.text,Ae,Qe?Ic:Xe),pe(t.text,ye,Ze?Ic:Xe);const Et=Ie.text.isHidden();[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach((It=>{It>=0&&(t.text.placedSymbolArray.get(It).hidden=Et||Qe?1:0)})),_e.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(_e.verticalPlacedTextSymbolIndex).hidden=Et||Ze?1:0);const At=this.variableOffsets[_e.crossTileID];At&&this.markUsedJustification(t,At.anchor,_e,je);const pt=this.placedOrientations[_e.crossTileID];pt&&(this.markUsedJustification(t,"left",_e,pt),this.markUsedOrientation(t,pt,_e))}if(be){const Xe=of(Ie.icon),Et=!(K&&_e.verticalPlacedIconSymbolIndex&&Qe);_e.placedIconSymbolIndex>=0&&(pe(t.icon,_e.numIconVertices,Et?Xe:Ic),t.icon.placedSymbolArray.get(_e.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),_e.verticalPlacedIconSymbolIndex>=0&&(pe(t.icon,_e.numVerticalIconVertices,Et?Ic:Xe),t.icon.placedSymbolArray.get(_e.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}const We=ge&&ge.has(me)?ge.get(me):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Xe=t.collisionArrays[me];if(Xe){let Et=new c.P(0,0);if(Xe.textBox||Xe.verticalTextBox){let At=!0;if(B){const pt=this.variableOffsets[Se];pt?(Et=ba(pt.anchor,pt.width,pt.height,pt.textOffset,pt.textBoxScale),Z&&Et._rotate($?-this.transform.bearingInRadians:this.transform.bearingInRadians)):At=!1}if(Xe.textBox||Xe.verticalTextBox){let pt;Xe.textBox&&(pt=Qe),Xe.verticalTextBox&&(pt=Ze),sf(t.textCollisionBox.collisionVertexArray,Ie.text.placed,!At||pt,We.text,Et.x,Et.y)}}if(Xe.iconBox||Xe.verticalIconBox){const At=!!(!Ze&&Xe.verticalIconBox);let pt;Xe.iconBox&&(pt=At),Xe.verticalIconBox&&(pt=!At),sf(t.iconCollisionBox.collisionVertexArray,Ie.icon.placed,pt,We.icon,K?Et.x:0,K?Et.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,l){const p=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*p>t}setStale(){this.stale=!0}}function sf(w,t,l,p,v,S){p&&p.length!==0||(p=[0,0,0,0]);const M=p[0]-qn,I=p[1]-qn,L=p[2]-qn,F=p[3]-qn;w.emplaceBack(t?1:0,l?1:0,v||0,S||0,M,I),w.emplaceBack(t?1:0,l?1:0,v||0,S||0,L,I),w.emplaceBack(t?1:0,l?1:0,v||0,S||0,L,F),w.emplaceBack(t?1:0,l?1:0,v||0,S||0,M,F)}const Nh=Math.pow(2,25),Ul=Math.pow(2,24),cg=Math.pow(2,17),Cu=Math.pow(2,16),ul=Math.pow(2,9),ug=Math.pow(2,8),Dc=Math.pow(2,1);function of(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const t=w.placed?1:0,l=Math.floor(127*w.opacity);return l*Nh+t*Ul+l*cg+t*Cu+l*ul+t*ug+l*Dc+t}const Ic=0;class Gl{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,l,p,v,S){const M=this._bucketParts;for(;this._currentTileIndex<t.length;)if(l.getBucketParts(M,v,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort(((I,L)=>I.sortKey-L.sortKey)));this._currentPartIndex<M.length;)if(l.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,S())return!0;return!1}}class Du{constructor(t,l,p,v,S,M,I,L){this.placement=new Lh(t,l,M,I,L),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(t,l,p){const v=ie(),S=()=>!this._forceFullPlacement&&ie()-v>2;for(;this._currentPlacementIndex>=0;){const M=l[t[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=I)&&(!M.maxzoom||M.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Gl(M)),this._inProgressLayer.continuePlacement(p[M.source],this.placement,this._showCollisionBoxes,M,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const _n=512/c.a5/2;class Us{constructor(t,l,p){this.tileID=t,this.bucketInstanceId=p,this._symbolsByKey={};const v=new Map;for(let S=0;S<l.length;S++){const M=l.get(S),I=M.key,L=v.get(I);L?L.push(M):v.set(I,[M])}for(const[S,M]of v){const I={positions:M.map((L=>({x:Math.floor(L.anchorX*_n),y:Math.floor(L.anchorY*_n)}))),crossTileIDs:M.map((L=>L.crossTileID))};if(I.positions.length>128){const L=new c.aT(I.positions.length,16,Uint16Array);for(const{x:F,y:B}of I.positions)L.add(F,B);L.finish(),delete I.positions,I.index=L}this._symbolsByKey[S]=I}}getScaledCoordinates(t,l){const{x:p,y:v,z:S}=this.tileID.canonical,{x:M,y:I,z:L}=l.canonical,F=_n/Math.pow(2,L-S),B=(I*c.a5+t.anchorY)*F,Z=v*c.a5*_n;return{x:Math.floor((M*c.a5+t.anchorX)*F-p*c.a5*_n),y:Math.floor(B-Z)}}findMatches(t,l,p){const v=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let S=0;S<t.length;S++){const M=t.get(S);if(M.crossTileID)continue;const I=this._symbolsByKey[M.key];if(!I)continue;const L=this.getScaledCoordinates(M,l);if(I.index){const F=I.index.range(L.x-v,L.y-v,L.x+v,L.y+v).sort();for(const B of F){const Z=I.crossTileIDs[B];if(!p[Z]){p[Z]=!0,M.crossTileID=Z;break}}}else if(I.positions)for(let F=0;F<I.positions.length;F++){const B=I.positions[F],Z=I.crossTileIDs[F];if(Math.abs(B.x-L.x)<=v&&Math.abs(B.y-L.y)<=v&&!p[Z]){p[Z]=!0,M.crossTileID=Z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class Ap{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ph{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const l=Math.round((t-this.lng)/360);if(l!==0)for(const p in this.indexes){const v=this.indexes[p],S={};for(const M in v){const I=v[M];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+l),S[I.tileID.key]=I}this.indexes[p]=S}this.lng=t}addBucket(t,l,p){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let S=0;S<l.symbolInstances.length;S++)l.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const v=this.usedCrossTileIDs[t.overscaledZ];for(const S in this.indexes){const M=this.indexes[S];if(Number(S)>t.overscaledZ)for(const I in M){const L=M[I];L.tileID.isChildOf(t)&&L.findMatches(l.symbolInstances,t,v)}else{const I=M[t.scaledTo(Number(S)).key];I&&I.findMatches(l.symbolInstances,t,v)}}for(let S=0;S<l.symbolInstances.length;S++){const M=l.symbolInstances.get(S);M.crossTileID||(M.crossTileID=p.generate(),v[M.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Us(t,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(t,l){for(const p of l.getCrossTileIDsLists())for(const v of p)delete this.usedCrossTileIDs[t][v]}removeStaleBuckets(t){let l=!1;for(const p in this.indexes){const v=this.indexes[p];for(const S in v)t[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,v[S]),delete v[S],l=!0)}return l}}class Rr{constructor(){this.layerIndexes={},this.crossTileIDs=new Ap,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,l,p){let v=this.layerIndexes[t.id];v===void 0&&(v=this.layerIndexes[t.id]=new Ph);let S=!1;const M={};v.handleWrapJump(p);for(const I of l){const L=I.getBucket(t);L&&t.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(I.tileID,L,this.crossTileIDs)&&(S=!0),M[L.bucketInstanceId]=!0)}return v.removeStaleBuckets(M)&&(S=!0),S}pruneUnusedLayers(t){const l={};t.forEach((p=>{l[p]=!0}));for(const p in this.layerIndexes)l[p]||delete this.layerIndexes[p]}}var gr="void main() {fragColor=vec4(1.0);}";const Bi={prelude:tn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:tn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:tn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:tn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:tn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:tn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:tn(gr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:tn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:tn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:tn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:tn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:tn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:tn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:tn(gr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:tn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:tn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:tn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:tn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:tn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:tn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:tn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:tn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:tn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:tn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:tn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:tn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:tn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:tn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:tn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:tn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:tn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:tn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:tn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:tn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:tn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:tn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function tn(w,t){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=t.match(/in ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=S?S.concat(v):v,I={};return{fragmentSource:w=w.replace(l,((L,F,B,Z,$)=>(I[$]=!0,F==="define"?`
#ifndef HAS_UNIFORM_u_${$}
in ${B} ${Z} ${$};
#else
uniform ${B} ${Z} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${B} ${Z} ${$} = u_${$};
#endif
`))),vertexSource:t=t.replace(l,((L,F,B,Z,$)=>{const K=Z==="float"?"vec2":"vec4",se=$.match(/color/)?"color":K;return I[$]?F==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${B} ${K} a_${$};
out ${B} ${Z} ${$};
#else
uniform ${B} ${Z} u_${$};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${B} ${Z} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${se}(a_${$}, u_${$}_t);
#else
    ${B} ${Z} ${$} = u_${$};
#endif
`:F==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${B} ${K} a_${$};
#else
uniform ${B} ${Z} u_${$};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${B} ${Z} ${$} = a_${$};
#else
    ${B} ${Z} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${B} ${Z} ${$} = unpack_mix_${se}(a_${$}, u_${$}_t);
#else
    ${B} ${Z} ${$} = u_${$};
#endif
`})),staticAttributes:p,staticUniforms:M}}class mi{constructor(t,l,p){this.vertexBuffer=t,this.indexBuffer=l,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var gs=c.aU([{name:"a_pos",type:"Int16",components:2}]);const Ji="#define PROJECTION_MERCATOR",xa="mercator";class kr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return xa}get shaderDefine(){return Ji}get shaderPreludeCode(){return Bi.projectionMercator}get vertexShaderPreludeCode(){return Bi.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,l,p,v,S){if(this._cachedMesh)return this._cachedMesh;const M=new c.aW;M.emplaceBack(0,0),M.emplaceBack(c.a5,0),M.emplaceBack(0,c.a5),M.emplaceBack(c.a5,c.a5);const I=t.createVertexBuffer(M,gs.members),L=c.aX.simpleSegment(0,0,4,2),F=new c.aY;F.emplaceBack(1,0,2),F.emplaceBack(1,2,3);const B=t.createIndexBuffer(F);return this._cachedMesh=new mi(I,B,L),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class Ha{constructor(t=0,l=0,p=0,v=0){if(isNaN(t)||t<0||isNaN(l)||l<0||isNaN(p)||p<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=l,this.left=p,this.right=v}interpolate(t,l,p){return l.top!=null&&t.top!=null&&(this.top=c.G.number(t.top,l.top,p)),l.bottom!=null&&t.bottom!=null&&(this.bottom=c.G.number(t.bottom,l.bottom,p)),l.left!=null&&t.left!=null&&(this.left=c.G.number(t.left,l.left,p)),l.right!=null&&t.right!=null&&(this.right=c.G.number(t.right,l.right,p)),this}getCenter(t,l){const p=c.an((this.left+t-this.right)/2,0,t),v=c.an((this.top+l-this.bottom)/2,0,l);return new c.P(p,v)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Ha(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Co(w,t){if(!w.renderWorldCopies||w.lngRange)return;const l=t.lng-w.center.lng;t.lng+=l>180?-360:l<-180?360:0}function Vi(w){return Math.max(0,Math.floor(w))}class $l{constructor(t,l){var p;this.applyConstrain=(v,S)=>this._constrainOverride!==null?this._constrainOverride(v,S):this._callbacks.defaultConstrain(v,S),this._callbacks=t,this._tileSize=512,this._renderWorldCopies=l?.renderWorldCopies===void 0||!!l?.renderWorldCopies,this._minZoom=l?.minZoom||0,this._maxZoom=l?.maxZoom||22,this._minPitch=l?.minPitch==null?0:l?.minPitch,this._maxPitch=l?.maxPitch==null?60:l?.maxPitch,this._constrainOverride=(p=l?.constrainOverride)!==null&&p!==void 0?p:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Vi(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ha,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,l,p){this._constrainOverride=t.constrainOverride,this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=Vi(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new Ha(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!p&&t.autoCalculateNearFarZ,l&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get constrainOverride(){return this._constrainOverride}setConstrainOverride(t){t===void 0&&(t=null),this._constrainOverride!==t&&(this._constrainOverride=t,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const l=c.W(t,-180,180)*Math.PI/180;var p,v,S,M,I,L,F,B,Z;this._bearingInRadians!==l&&(this._unmodified=!1,this._bearingInRadians=l,this._calcMatrices(),this._rotationMatrix=D(),p=this._rotationMatrix,S=-this._bearingInRadians,M=(v=this._rotationMatrix)[0],I=v[1],L=v[2],F=v[3],B=Math.sin(S),Z=Math.cos(S),p[0]=M*Z+L*B,p[1]=I*Z+F*B,p[2]=M*-B+L*Z,p[3]=I*-B+F*Z)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const l=c.an(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==l&&(this._unmodified=!1,this._pitchInRadians=l,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const l=t/180*Math.PI;this._rollInRadians!==l&&(this._unmodified=!1,this._rollInRadians=l,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aZ(this._fovInRadians)}setFov(t){t=c.an(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=c.ap(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const l=this.applyConstrain(this._center,t).zoom;this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this._tileZoom=Math.max(0,Math.floor(l)),this._scale=c.aq(l),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,l){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=l,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,l,p){this._unmodified=!1,this._edgeInsets.interpolate(t,l,p),this.constrainInternal(),this._calcMatrices()}resize(t,l,p=!0){this._width=t,this._height=l,p&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Xn([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-c.ao,c.ao])}getCameraQueryGeometry(t,l){if(l.length===1)return[l[0],t];{const{minX:p,minY:v,maxX:S,maxY:M}=c.aa.fromPoints(l).extend(t);return[new c.P(p,v),new c.P(S,v),new c.P(S,M),new c.P(p,M),new c.P(p,v)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:l,zoom:p}=this.applyConstrain(this.center,this.zoom);this.setCenter(l),this.setZoom(p),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=c.ar(new Float64Array(16));c.Q(t,t,[this._width/2,-this._height/2,1]),c.O(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=c.ar(new Float64Array(16)),c.Q(t,t,[1,-1,1]),c.O(t,t,[-1,-1,0]),c.Q(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,l,p,v){const S=p!==void 0?p:this.bearing,M=v=v!==void 0?v:this.pitch,{distanceToCenter:I,clampedElevation:L}=this._distanceToCenterFromAltElevationPitch(l,this.elevation,M),{x:F,y:B}=ei(M,S),Z=c.a9.fromLngLat(t,l);let $,K,se=c.a_(1,Z.y),pe=0;do{if(pe+=1,pe>10)break;K=I/se,$=new c.a9(Z.x+F*K,Z.y+B*K),se=1/$.meterInMercatorCoordinateUnits()}while(Math.abs(I-K*se)>1e-12);return{center:$.toLngLat(),elevation:L,zoom:c.at(this.height/2/Math.tan(this.fovInRadians/2)/K/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const l=1/this.worldSize,p=c.as(1,this.center.lat)*this.worldSize,v=c.a9.fromLngLat(this.center,this.elevation),S=v.x/l,M=v.y/l,I=v.z/l,L=this.pitch,F=this.bearing,{x:B,y:Z,z:$}=ei(L,F),K=this.cameraToCenterDistance,se=S+K*-B,pe=M+K*-Z,ge=I+K*$,{distanceToCenter:me,clampedElevation:_e}=this._distanceToCenterFromAltElevationPitch(ge/p,t,L),Ae=me*p,ye=new c.a9((se+B*Ae)*l,(pe+Z*Ae)*l,0).toLngLat(),Se=c.as(1,ye.lat),Ie=c.at(this.height/2/Math.tan(this.fovInRadians/2)/me/Se/this.tileSize);this._elevation=_e,this._center=ye,this.setZoom(Ie)}_distanceToCenterFromAltElevationPitch(t,l,p){const v=-Math.cos(c.ap(p)),S=t-l;let M,I=l;return v*S>=0||Math.abs(v)<.1?(M=1e4,I=t+M*v):M=-S/v,{distanceToCenter:M,clampedElevation:I}}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=c.as(1,this.center.lat)*this.worldSize;return $e(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const l=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/l,t.canonical.y/l,1/l/c.a5,1/l/c.a5]}}class Wa{constructor(t,l){this.min=t,this.max=l,this.center=c.a$([],c.b0([],this.min,this.max),.5)}quadrant(t){const l=[t%2==0,t<2],p=c.b1(this.min),v=c.b1(this.max);for(let S=0;S<l.length;S++)p[S]=l[S]?this.min[S]:this.center[S],v[S]=l[S]?this.center[S]:this.max[S];return v[2]=this.max[2],new Wa(p,v)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let l=!0;for(let p=0;p<t.planes.length;p++){const v=this.intersectsPlane(t.planes[p]);if(v===0)return 0;v===1&&(l=!1)}return l?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let l=t[3],p=t[3];for(let v=0;v<3;v++)t[v]>0?(l+=t[v]*this.min[v],p+=t[v]*this.max[v]):(p+=t[v]*this.min[v],l+=t[v]*this.max[v]);return l>=0?2:p<0?0:1}}class Rc{distanceToTile2d(t,l,p,v){const S=v.distanceX([t,l]),M=v.distanceY([t,l]);return Math.hypot(S,M)}getWrap(t,l,p){return p}getTileBoundingVolume(t,l,p,v){var S,M;let I=0,L=0;if(v?.terrain){const B=new c.a2(t.z,l,t.z,t.x,t.y),Z=v.terrain.getMinMaxElevation(B);I=(S=Z.minElevation)!==null&&S!==void 0?S:Math.min(0,p),L=(M=Z.maxElevation)!==null&&M!==void 0?M:Math.max(0,p)}const F=1<<t.z;return new Wa([l+t.x/F,t.y/F,I],[l+(t.x+1)/F,(t.y+1)/F,L])}allowVariableZoom(t,l){const p=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,v=c.an(78.5-p/2,0,60);return!!l.terrain||t.pitch>v}allowWorldCopies(){return!0}prepareNextFrame(){}}class wa{constructor(t,l,p){this.points=t,this.planes=l,this.aabb=p}static fromInvProjectionMatrix(t,l=1,p=0,v,S){const M=S?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,p),L=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(($=>(function(K,se,pe,ge){const me=c.aH([],K,se),_e=1/me[3]/pe*ge;return c.b6(me,me,[_e,_e,1/me[3],_e])})($,t,l,I)));v&&(function($,K,se,pe){const ge=pe?4:0,me=pe?0:4;let _e=0;const Ae=[],ye=[];for(let be=0;be<4;be++){const je=c.b2([],$[be+me],$[be+ge]),Qe=c.b7(je);c.a$(je,je,1/Qe),Ae.push(Qe),ye.push(je)}for(let be=0;be<4;be++){const je=c.b8($[be+ge],ye[be],se);_e=je!==null&&je>=0?Math.max(_e,je):Math.max(_e,Ae[be])}const Se=(function(be,je){const Qe=c.b2([],be[je[0]],be[je[1]]),Ze=c.b2([],be[je[2]],be[je[1]]),We=[0,0,0,0];return c.b3(We,c.b4([],Qe,Ze)),We[3]=-c.b5(We,be[je[0]]),We})($,K),Ie=(function(be,je){const Qe=c.b9(be),Ze=c.ba([],be,1/Qe),We=c.b2([],je,c.a$([],Ze,c.b5(je,Ze))),Xe=c.b9(We);if(Xe>0){const Et=Math.sqrt(1-Ze[3]*Ze[3]),At=c.a$([],Ze,-Ze[3]),pt=c.b0([],At,c.a$([],We,Et/Xe));return c.bb(je,pt)}return null})(se,Se);if(Ie!==null){const be=Ie/c.b5(ye[0],Se);_e=Math.min(_e,be)}for(let be=0;be<4;be++){const je=Math.min(_e,Ae[be]);$[be+me]=[$[be+ge][0]+ye[be][0]*je,$[be+ge][1]+ye[be][1]*je,$[be+ge][2]+ye[be][2]*je,1]}})(L,M[0],v,S);const F=M.map(($=>{const K=c.b2([],L[$[0]],L[$[1]]),se=c.b2([],L[$[2]],L[$[1]]),pe=c.b3([],c.b4([],K,se)),ge=-c.b5(pe,L[$[1]]);return pe.concat(ge)})),B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Z=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const $ of L)for(let K=0;K<3;K++)B[K]=Math.min(B[K],$[K]),Z[K]=Math.max(Z[K],$[K]);return new wa(L,F,new Wa(B,Z))}}class Er{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,l,p){return this._helper.interpolatePadding(t,l,p)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,l,p=!0){this._helper.resize(t,l,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,l){this._helper.overrideNearFarZ(t,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,l){}constructor(t){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(l,p)=>{p=c.an(+p,this.minZoom,this.maxZoom);const v={center:new c.V(l.lng,l.lat),zoom:p};let S=this._helper._lngRange;if(!this._helper._renderWorldCopies&&S===null){const ye=179.9999999999;S=[-ye,ye]}const M=this.tileSize*c.aq(v.zoom);let I=0,L=M,F=0,B=M,Z=0,$=0;const{x:K,y:se}=this.size;if(this._helper._latRange){const ye=this._helper._latRange;I=c.X(ye[1])*M,L=c.X(ye[0])*M,L-I<se&&(Z=se/(L-I))}S&&(F=c.W(c.Y(S[0])*M,0,M),B=c.W(c.Y(S[1])*M,0,M),B<F&&(B+=M),B-F<K&&($=K/(B-F)));const{x:pe,y:ge}=qt(M,l);let me,_e;const Ae=Math.max($||0,Z||0);if(Ae){const ye=new c.P($?(B+F)/2:pe,Z?(L+I)/2:ge);return v.center=an(M,ye).wrap(),v.zoom+=c.at(Ae),v}if(this._helper._latRange){const ye=se/2;ge-ye<I&&(_e=I+ye),ge+ye>L&&(_e=L-ye)}if(S){const ye=(F+B)/2;let Se=pe;this._helper._renderWorldCopies&&(Se=c.W(pe,ye-M/2,ye+M/2));const Ie=K/2;Se-Ie<F&&(me=F+Ie),Se+Ie>B&&(me=B-Ie)}if(me!==void 0||_e!==void 0){const ye=new c.P(me??pe,_e??ge);v.center=an(M,ye).wrap()}return v},this.applyConstrain=(l,p)=>this._helper.applyConstrain(l,p),this._helper=new $l({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(l,p)=>this.defaultConstrain(l,p)},t),this._coveringTilesDetailsProvider=new Rc}clone(){const t=new Er;return t.apply(this),t}apply(t,l,p){this._helper.apply(t,l,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const l=[new c.bc(0,t)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new c.P(0,0)),v=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),S=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),I=Math.floor(Math.min(p.x,v.x,S.x,M.x)),L=Math.floor(Math.max(p.x,v.x,S.x,M.x)),F=1;for(let B=I-F;B<=L+F;B++)B!==0&&l.push(new c.bc(B,t))}return l}getCameraFrustum(){return wa.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const l=this.screenPointToLocation(this.centerPoint,t),p=t?t.getElevationForLngLatZoom(l,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(t,l){const p=c.as(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(l,p),S=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),M=c.a9.fromLngLat(t),I=new c.a9(M.x-(v.x-S.x),M.y-(v.y-S.y));this.setCenter(I?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,l){return l?this.coordinatePoint(c.a9.fromLngLat(t),l.getElevationForLngLat(t,this),this._pixelMatrix3D):this.coordinatePoint(c.a9.fromLngLat(t))}screenPointToLocation(t,l){var p;return(p=this.screenPointToMercatorCoordinate(t,l))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(t,l){if(l){const p=l.pointCoordinate(t);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,l){const p=l||0,v=[t.x,t.y,0,1],S=[t.x,t.y,1,1];c.aH(v,v,this._pixelMatrixInverse),c.aH(S,S,this._pixelMatrixInverse);const M=v[3],I=S[3],L=v[1]/M,F=S[1]/I,B=v[2]/M,Z=S[2]/I,$=B===Z?0:(p-B)/(Z-B);return new c.a9(c.G.number(v[0]/M,S[0]/I,$)/this.worldSize,c.G.number(L,F,$)/this.worldSize,p)}coordinatePoint(t,l=0,p=this._pixelMatrix){const v=[t.x*this.worldSize,t.y*this.worldSize,l,1];return c.aH(v,v,p),new c.P(v[0]/v[3],v[1]/v[3])}getBounds(){const t=Math.max(0,this._helper._height/2-Qn(this));return new Xn().extend(this.screenPointToLocation(new c.P(0,t))).extend(this.screenPointToLocation(new c.P(this._helper._width,t))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(t,l){return l?l.pointCoordinate(t)!=null:t.y>this.height/2-Qn(this)}calculatePosMatrix(t,l=!1,p){var v;const S=(v=t.key)!==null&&v!==void 0?v:c.bd(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),M=l?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(S)){const F=M.get(S);return p?F.f32:F.f64}const I=Pn(t,this.worldSize);c.S(I,l?this._alignedProjMatrix:this._viewProjMatrix,I);const L={f64:I,f32:new Float32Array(I)};return M.set(S,L),p?L.f32:L.f64}calculateFogMatrix(t){const l=t.key,p=this._fogMatrixCacheF32;if(p.has(l))return p.get(l);const v=Pn(t,this.worldSize);return c.S(v,this._fogMatrix,v),p.set(l,new Float32Array(v)),p.get(l)}calculateCenterFromCameraLngLatAlt(t,l,p,v){return this._helper.calculateCenterFromCameraLngLatAlt(t,l,p,v)}_calculateNearFarZIfNeeded(t,l,p){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),S=t-v*this._helper._pixelPerMeter/Math.cos(l),M=v<0?S:t,I=Math.PI/2+this.pitchInRadians,L=c.ap(this.fov)*(Math.abs(Math.cos(c.ap(this.roll)))*this.height+Math.abs(Math.sin(c.ap(this.roll)))*this.width)/this.height*(.5+p.y/this.height),F=Math.sin(L)*M/Math.sin(c.an(Math.PI-I-L,.01,Math.PI-.01)),B=Qn(this),Z=Math.atan(B/this._helper.cameraToCenterDistance),$=c.ap(.75),K=Z>$?2*Z*(.5+p.y/(2*B)):$,se=Math.sin(K)*M/Math.sin(c.an(Math.PI-I-K,.01,Math.PI-.01)),pe=Math.min(F,se);this._helper._farZ=1.01*(Math.cos(Math.PI/2-l)*pe+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,l=qt(this.worldSize,this.center),p=l.x,v=l.y;this._helper._pixelPerMeter=c.as(1,this.center.lat)*this.worldSize;const S=c.ap(Math.min(this.pitch,Ft)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(S));let I;this._calculateNearFarZIfNeeded(M,S,t),I=new Float64Array(16),c.be(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aB(this._invProjMatrix,I),I[8]=2*-t.x/this._helper._width,I[9]=2*t.y/this._helper._height,this._projectionMatrix=c.bf(I),c.Q(I,I,[1,-1,1]),c.O(I,I,[0,0,-this._helper.cameraToCenterDistance]),c.bg(I,I,-this.rollInRadians),c.bh(I,I,this.pitchInRadians),c.bg(I,I,-this.bearingInRadians),c.O(I,I,[-p,-v,0]),this._mercatorMatrix=c.Q([],I,[this.worldSize,this.worldSize,this.worldSize]),c.Q(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),c.O(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=c.aB([],I);const L=[0,0,-1,1];c.aH(L,L,this._invViewProjMatrix),this._cameraPosition=[L[0]/L[3],L[1]/L[3],L[2]/L[3]],this._fogMatrix=new Float64Array(16),c.be(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,c.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.O(this._fogMatrix,this._fogMatrix,[-p,-v,0]),c.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const F=this._helper._width%2/2,B=this._helper._height%2/2,Z=Math.cos(this.bearingInRadians),$=Math.sin(-this.bearingInRadians),K=p-Math.round(p)+Z*F+$*B,se=v-Math.round(v)+Z*B+$*F,pe=new Float64Array(I);if(c.O(pe,pe,[K>.5?K-1:K,se>.5?se-1:se,0]),this._alignedProjMatrix=pe,I=c.aB(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new c.P(0,0)),l=[t.x*this.worldSize,t.y*this.worldSize,0,1];return c.aH(l,l,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=c.as(1,this.center.lat)*this.worldSize;return $e(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,l){const p=c.a9.fromLngLat(t),v=[p.x*this.worldSize,p.y*this.worldSize,l,1];return c.aH(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(t){const{overscaledTileID:l,aligned:p,applyTerrainMatrix:v}=t,S=this._helper.getMercatorTileCoordinates(l),M=l?this.calculatePosMatrix(l,p,!0):null;let I;return I=l&&l.terrainRttPosMatrix32f&&v?l.terrainRttPosMatrix32f:M||c.bi(),{mainMatrix:I,tileMercatorCoords:S,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,l,p){return 1}transformLightDirection(t){return c.b1(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,l,p,v){const S=this.calculatePosMatrix(p);let M;v?(M=[t,l,v(t,l),1],c.aH(M,M,S)):(M=[t,l,0,1],ms(M,M,S));const I=M[3];return{point:new c.P(M[0]/I,M[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(t){for(const l of t)this.calculatePosMatrix(l)}getMatrixForModel(t,l){const p=c.a9.fromLngLat(t,l),v=p.meterInMercatorCoordinateUnits(),S=c.bj();return c.O(S,S,[p.x,p.y,p.z]),c.bg(S,S,Math.PI),c.bh(S,S,Math.PI/2),c.Q(S,S,[-v,v,v]),S}getProjectionDataForCustomLayer(t=!0){const l=new c.a2(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:l,applyGlobeMatrix:t}),v=Pn(l,this.worldSize);c.S(v,this._viewProjMatrix,v),p.tileMercatorCoords=[0,0,1,1];const S=[c.a5,c.a5,this.worldSize/this._helper.pixelsPerMeter],M=c.bk();return c.Q(M,v,S),p.fallbackMatrix=M,p.mainMatrix=M,p}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function Ta(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function zh(w){if(w.useSlerp)if(w.k<1){const t=c.bl(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),l=c.bl(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),p=new Float64Array(4);c.bm(p,t,l,w.k);const v=c.bn(p);w.tr.setRoll(v.roll),w.tr.setPitch(v.pitch),w.tr.setBearing(v.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(c.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(c.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(c.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function kc(w,t,l,p,v){const S=v.padding,M=qt(v.worldSize,l.getNorthWest()),I=qt(v.worldSize,l.getNorthEast()),L=qt(v.worldSize,l.getSouthEast()),F=qt(v.worldSize,l.getSouthWest()),B=c.ap(-p),Z=M.rotate(B),$=I.rotate(B),K=L.rotate(B),se=F.rotate(B),pe=new c.P(Math.max(Z.x,$.x,se.x,K.x),Math.max(Z.y,$.y,se.y,K.y)),ge=new c.P(Math.min(Z.x,$.x,se.x,K.x),Math.min(Z.y,$.y,se.y,K.y)),me=pe.sub(ge),_e=(v.width-(S.left+S.right+t.left+t.right))/me.x,Ae=(v.height-(S.top+S.bottom+t.top+t.bottom))/me.y;if(Ae<0||_e<0)return void Ta();const ye=Math.min(c.at(v.scale*Math.min(_e,Ae)),w.maxZoom),Se=c.P.convert(w.offset),Ie=new c.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(c.ap(p)),be=Se.add(Ie).mult(v.scale/c.aq(ye));return{center:an(v.worldSize,M.add(L).div(2).sub(be)),zoom:ye,bearing:p}}class Oc{get useGlobeControls(){return!1}handlePanInertia(t,l){const p=t.mag(),v=Math.abs(Qn(l));return{easingOffset:t.mult(Math.min(.75*v/p,1)),easingCenter:l.center}}handleMapControlsRollPitchBearingZoom(t,l){t.bearingDelta&&l.setBearing(l.bearing+t.bearingDelta),t.pitchDelta&&l.setPitch(l.pitch+t.pitchDelta),t.rollDelta&&l.setRoll(l.roll+t.rollDelta),t.zoomDelta&&l.setZoom(l.zoom+t.zoomDelta)}handleMapControlsPan(t,l,p){t.around.distSqr(l.centerPoint)<.01||l.setLocationAtPoint(p,t.around)}cameraForBoxAndBearing(t,l,p,v,S){return kc(t,l,p,v,S)}handleJumpToCenterZoom(t,l){t.zoom!==(l.zoom!==void 0?+l.zoom:t.zoom)&&t.setZoom(+l.zoom),l.center!==void 0&&t.setCenter(c.V.convert(l.center))}handleEaseTo(t,l){const p=t.zoom,v=t.padding,S={roll:t.roll,pitch:t.pitch,bearing:t.bearing},M={roll:l.roll===void 0?t.roll:l.roll,pitch:l.pitch===void 0?t.pitch:l.pitch,bearing:l.bearing===void 0?t.bearing:l.bearing},I=l.zoom!==void 0,L=!t.isPaddingEqual(l.padding);let F=!1;const B=I?+l.zoom:t.zoom;let Z=t.centerPoint.add(l.offsetAsPoint);const $=t.screenPointToLocation(Z),{center:K,zoom:se}=t.applyConstrain(c.V.convert(l.center||$),B??p);Co(t,K);const pe=qt(t.worldSize,$),ge=qt(t.worldSize,K).sub(pe),me=c.aq(se-p);return F=se!==p,{easeFunc:_e=>{if(F&&t.setZoom(c.G.number(p,se,_e)),c.bo(S,M)||zh({startEulerAngles:S,endEulerAngles:M,tr:t,k:_e,useSlerp:S.roll!=M.roll}),L&&(t.interpolatePadding(v,l.padding,_e),Z=t.centerPoint.add(l.offsetAsPoint)),l.around)t.setLocationAtPoint(l.around,l.aroundPoint);else{const Ae=c.aq(t.zoom-p),ye=se>p?Math.min(2,me):Math.max(.5,me),Se=Math.pow(ye,1-_e),Ie=an(t.worldSize,pe.add(ge.mult(_e*Se)).mult(Ae));t.setLocationAtPoint(t.renderWorldCopies?Ie.wrap():Ie,Z)}},isZooming:F,elevationCenter:K}}handleFlyTo(t,l){const p=l.zoom!==void 0,v=t.zoom,S=t.applyConstrain(c.V.convert(l.center||l.locationAtOffset),p?+l.zoom:v),M=S.center,I=S.zoom;Co(t,M);const L=qt(t.worldSize,l.locationAtOffset),F=qt(t.worldSize,M).sub(L),B=F.mag(),Z=c.aq(I-v);let $;if(l.minZoom!==void 0){const K=Math.min(+l.minZoom,v,I),se=t.applyConstrain(M,K).zoom;$=c.aq(se-v)}return{easeFunc:(K,se,pe,ge)=>{t.setZoom(K===1?I:v+c.at(se));const me=K===1?M:an(t.worldSize,L.add(F.mult(pe)).mult(se));t.setLocationAtPoint(t.renderWorldCopies?me.wrap():me,ge)},scaleOfZoom:Z,targetCenter:M,scaleOfMinZoom:$,pixelPathLength:B}}}class oi{constructor(t,l,p){this.blendFunction=t,this.blendColor=l,this.mask=p}}oi.Replace=[1,0],oi.disabled=new oi(oi.Replace,c.bp.transparent,[!1,!1,!1,!1]),oi.unblended=new oi(oi.Replace,c.bp.transparent,[!0,!0,!0,!0]),oi.alphaBlended=new oi([1,771],c.bp.transparent,[!0,!0,!0,!0]);const Zl=2305;class Mn{constructor(t,l,p){this.enable=t,this.mode=l,this.frontFace=p}}Mn.disabled=new Mn(!1,1029,Zl),Mn.backCCW=new Mn(!0,1029,Zl),Mn.frontCCW=new Mn(!0,1028,Zl);class fn{constructor(t,l,p){this.func=t,this.mask=l,this.range=p}}fn.ReadOnly=!1,fn.ReadWrite=!0,fn.disabled=new fn(519,fn.ReadOnly,[0,1]);const Lc=7680;class Fn{constructor(t,l,p,v,S,M){this.test=t,this.ref=l,this.mask=p,this.fail=v,this.depthFail=S,this.pass=M}}Fn.disabled=new Fn({func:519,mask:0},0,0,Lc,Lc,Lc);const Fh=new WeakMap;function ys(w){var t;if(Fh.has(w))return Fh.get(w);{const l=(t=w.getParameter(w.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return Fh.set(w,l),l}}class ql{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const l=t.context,p=l.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const v=new c.aW;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const S=new c.aY;S.emplaceBack(0,1,2),this._fullscreenTriangle=new mi(l.createVertexBuffer(v,gs.members),l.createIndexBuffer(S),c.aX.simpleSegment(0,0,v.length,S.length)),this._resultBuffer=new Uint8Array(4),l.activeTexture.set(p.TEXTURE1);const M=p.createTexture();p.bindTexture(p.TEXTURE_2D,M),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=l.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),ys(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,l){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,l),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,l=t.gl;t.activeTexture.set(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,l){const p=this._cachedRenderContext.context,v=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:c.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,v.TRIANGLES,fn.disabled,Fn.disabled,oi.unblended,Mn.disabled,((S,M)=>({u_input:S,u_output_expected:M}))(t,l),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ys(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const S=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:S}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ys(t)){const l=t.clientWaitSync(this._readbackQueue.sync,0,0);if(l===t.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(l===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ql._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let l=0;return l+=t[0]/256,l+=t[1]/65536,l+=t[2]/16777216,t[3]<127&&(l=-l),l/128}}const Yl=c.a5/128;function hg(w,t){const l=w.granularity!==void 0?Math.max(w.granularity,1):1,p=l+(w.generateBorders?2:0),v=l+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),S=p+1,M=v+1,I=w.generateBorders?-1:0,L=w.generateBorders||w.extendToNorthPole?-1:0,F=l+(w.generateBorders?1:0),B=l+(w.generateBorders||w.extendToSouthPole?1:0),Z=S*M,$=p*v*6,K=S*M>65536;if(K&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const se=K||t==="32bit",pe=new Int16Array(2*Z);let ge=0;for(let Ae=L;Ae<=B;Ae++)for(let ye=I;ye<=F;ye++){let Se=ye/l*c.a5;ye===-1&&(Se=-Yl),ye===l+1&&(Se=c.a5+Yl);let Ie=Ae/l*c.a5;Ae===-1&&(Ie=w.extendToNorthPole?c.br:-Yl),Ae===l+1&&(Ie=w.extendToSouthPole?c.bs:c.a5+Yl),pe[ge++]=Se,pe[ge++]=Ie}const me=se?new Uint32Array($):new Uint16Array($);let _e=0;for(let Ae=0;Ae<v;Ae++)for(let ye=0;ye<p;ye++){const Se=ye+1+Ae*S,Ie=ye+(Ae+1)*S,be=ye+1+(Ae+1)*S;me[_e++]=ye+Ae*S,me[_e++]=Ie,me[_e++]=Se,me[_e++]=Se,me[_e++]=Ie,me[_e++]=be}return{vertices:pe.buffer.slice(0),indices:me.buffer.slice(0),uses32bitIndices:se}}const jh=new c.aV({fill:new c.bt(128,2),line:new c.bt(512,0),tile:new c.bt(128,32),stencil:new c.bt(128,1),circle:3});class Mp{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Bi.projectionGlobe}get vertexShaderPreludeCode(){return Bi.projectionMercator.vertexSource}get subdivisionGranularity(){return jh}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new ql(t));const l=c.X(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-l*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(l,p),S=ie();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=S);const M=Math.min(Math.max((S-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bv(M))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,l,p,v,S){const M=(S==="stencil"?jh.stencil:jh.tile).getGranularityForZoomLevel(l.z);return this._getMesh(t,{granularity:M,generateBorders:p,extendToNorthPole:l.y===0&&v,extendToSouthPole:l.y===(1<<l.z)-1&&v})}_getMesh(t,l){const p=this._getMeshKey(l);if(p in this._tileMeshCache)return this._tileMeshCache[p];const v=(function(S,M){const I=hg(M,"16bit"),L=c.aW.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),F=c.aY.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new mi(S.createVertexBuffer(L,gs.members),S.createIndexBuffer(F),c.aX.simpleSegment(0,0,L.length,F.length))})(t,l);return this._tileMeshCache[p]=v,v}recalculate(t){}hasTransition(){const t=ie();let l=!1;return l=l||(t-this._errorMeasurementLastChangeTime)/1e3<.7,l=l||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,l}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const x0=new c.t({type:new c.D(c.u.projection.type)});class Cp extends c.E{constructor(t){super(),this._transitionable=new c.x(x0,void 0),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0)),this._mercatorProjection=new kr,this._verticalPerspectiveProjection=new Mp}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof c.bw){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,l,p,v,S){return this.currentProjection.getMeshFromTileID(t,l,p,v,S)}setProjection(t){this._transitionable.setValue("type",t?.type||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function Sa(w){const t=Nc(w.worldSize,w.center.lat);return 2*Math.PI*t}function Do(w,t,l,p,v){const S=1/(1<<v),M=t/c.a5*S+p*S,I=c.by((w/c.a5*S+l*S)*Math.PI*2+Math.PI,2*Math.PI),L=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,F=Math.cos(L),B=new Float64Array(3);return B[0]=Math.sin(I)*F,B[1]=Math.sin(L),B[2]=Math.cos(I)*F,B}function Ui(w){return(function(t,l){const p=Math.cos(l),v=new Float64Array(3);return v[0]=Math.sin(t)*p,v[1]=Math.sin(l),v[2]=Math.cos(t)*p,v})(w.lng*Math.PI/180,w.lat*Math.PI/180)}function Nc(w,t){return w/(2*Math.PI)/Math.cos(t*Math.PI/180)}function Bh(w){const t=Math.asin(w[1])/Math.PI*180,l=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(l>1e-6){const p=w[0]/l,v=Math.acos(w[2]/l),S=(p>0?v:-v)/Math.PI*180;return new c.V(c.W(S,-180,180),t)}return new c.V(0,t)}function Vh(w){return Math.cos(w*Math.PI/180)}function er(w,t){const l=Vh(w),p=Vh(t);return c.at(p/l)}function dg(w,t){const l=w.rotate(t.bearingInRadians),p=t.zoom+er(t.center.lat,0),v=c.bu(1/Vh(t.center.lat),1/Vh(Math.min(Math.abs(t.center.lat),60)),c.bx(p,7,3,0,1)),S=360/Sa({worldSize:t.worldSize,center:{lat:t.center.lat}});return new c.V(t.center.lng-l.x*S*v,c.an(t.center.lat+l.y*S,-c.ao,c.ao))}function lf(w){const t=.5*w,l=Math.sin(t),p=Math.cos(t);return Math.log(l+p)-Math.log(p-l)}function fg(w,t,l,p){const v=w.lat+l*p;if(Math.abs(l)>1){const S=(Math.sign(w.lat+l)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,M=Math.abs(w.lat+l)*Math.PI/180,I=lf(S+p*(M-S)),L=lf(S),F=lf(M);return new c.V(w.lng+t*((I-L)/(F-L)),v)}return new c.V(w.lng+t*p,v)}class w0{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,l,p,v){const S=`${t.z}_${t.x}_${t.y}_${v?.terrain?"t":""}`,M=this._cache.get(S);if(M)return M;const I=this._cachePrevious.get(S);if(I)return this._cache.set(S,I),I;const L=this._boundingVolumeFactory(t,l,p,v);return this._cache.set(S,L),this._hadAnyChanges=!0,L}}class Iu{constructor(t,l,p,v){this.min=p,this.max=v,this.points=t,this.planes=l}static fromAabb(t,l){const p=[];for(let v=0;v<8;v++)p.push([1&~v?t[0]:l[0],(v>>1&1)==1?l[1]:t[1],(v>>2&1)==1?l[2]:t[2]]);return new Iu(p,[[-1,0,0,l[0]],[1,0,0,-t[0]],[0,-1,0,l[1]],[0,1,0,-t[1]],[0,0,-1,l[2]],[0,0,1,-t[2]]],t,l)}static fromCenterSizeAngles(t,l,p){const v=c.bB([],p[0],p[1],p[2]),S=c.bC([],[l[0],0,0],v),M=c.bC([],[0,l[1],0],v),I=c.bC([],[0,0,l[2]],v),L=[...t],F=[...t];for(let Z=0;Z<8;Z++)for(let $=0;$<3;$++){const K=t[$]+S[$]*(1&~Z?-1:1)+M[$]*((Z>>1&1)==1?1:-1)+I[$]*((Z>>2&1)==1?1:-1);L[$]=Math.min(L[$],K),F[$]=Math.max(F[$],K)}const B=[];for(let Z=0;Z<8;Z++){const $=[...t];c.b0($,$,c.a$([],S,1&~Z?-1:1)),c.b0($,$,c.a$([],M,(Z>>1&1)==1?1:-1)),c.b0($,$,c.a$([],I,(Z>>2&1)==1?1:-1)),B.push($)}return new Iu(B,[[...S,-c.b5(S,B[0])],[...M,-c.b5(M,B[0])],[...I,-c.b5(I,B[0])],[-S[0],-S[1],-S[2],-c.b5(S,B[7])],[-M[0],-M[1],-M[2],-c.b5(M,B[7])],[-I[0],-I[1],-I[2],-c.b5(I,B[7])]],L,F)}intersectsFrustum(t){let l=!0;const p=this.points.length,v=this.planes.length,S=t.planes.length,M=t.points.length;for(let I=0;I<S;I++){const L=t.planes[I];let F=0;for(let B=0;B<p;B++){const Z=this.points[B];L[0]*Z[0]+L[1]*Z[1]+L[2]*Z[2]+L[3]>=0&&F++}if(F===0)return 0;F<p&&(l=!1)}if(l)return 2;for(let I=0;I<v;I++){const L=this.planes[I];let F=0;for(let B=0;B<M;B++){const Z=t.points[B];L[0]*Z[0]+L[1]*Z[1]+L[2]*Z[2]+L[3]>=0&&F++}if(F===0)return 0}return 1}intersectsPlane(t){const l=this.points.length;let p=0;for(let v=0;v<l;v++){const S=this.points[v];t[0]*S[0]+t[1]*S[1]+t[2]*S[2]+t[3]>=0&&p++}return p===l?2:p===0?0:1}}function cf(w,t,l){const p=w-t;return p<0?-p:Math.max(0,p-l)}function Ru(w,t,l,p,v){const S=w-l;let M;return M=S<0?Math.min(-S,1+S-v):S>1?Math.min(Math.max(S-v,0),1-S):0,Math.max(M,cf(t,p,v))}class Dp{constructor(){this._boundingVolumeCache=new w0(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,l,p,v){const S=1<<p.z,M=1/S,I=p.x/S,L=p.y/S;let F=2;return F=Math.min(F,Ru(t,l,I,L,M)),F=Math.min(F,Ru(t,l,I+.5,-L-M,M)),F=Math.min(F,Ru(t,l,I+.5,2-L-M,M)),F}getWrap(t,l,p){const v=1<<l.z,S=1/v,M=l.x/v,I=cf(t.x,M,S),L=cf(t.x,M-1,S),F=cf(t.x,M+1,S),B=Math.min(I,L,F);return B===F?1:B===L?-1:0}allowVariableZoom(t,l){return si(t,l)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,l,p,v){return this._boundingVolumeCache.getTileBoundingVolume(t,l,p,v)}_computeTileBoundingVolume(t,l,p,v){var S,M;let I=0,L=0;if(v?.terrain){const F=new c.a2(t.z,l,t.z,t.x,t.y),B=v.terrain.getMinMaxElevation(F);I=(S=B.minElevation)!==null&&S!==void 0?S:Math.min(0,p),L=(M=B.maxElevation)!==null&&M!==void 0?M:Math.max(0,p)}if(I/=c.bE,L/=c.bE,I+=1,L+=1,t.z<=0)return Iu.fromAabb([-L,-L,-L],[L,L,L]);if(t.z===1)return Iu.fromAabb([t.x===0?-L:0,t.y===0?0:-L,-L],[t.x===0?0:L,t.y===0?L:0,L]);{const F=[Do(0,0,t.x,t.y,t.z),Do(c.a5,0,t.x,t.y,t.z),Do(c.a5,c.a5,t.x,t.y,t.z),Do(0,c.a5,t.x,t.y,t.z)],B=[];for(const We of F)B.push(c.a$([],We,L));if(L!==I)for(const We of F)B.push(c.a$([],We,I));t.y===0&&B.push([0,1,0]),t.y===(1<<t.z)-1&&B.push([0,-1,0]);const Z=[1,1,1],$=[-1,-1,-1];for(const We of B)for(let Xe=0;Xe<3;Xe++)Z[Xe]=Math.min(Z[Xe],We[Xe]),$[Xe]=Math.max($[Xe],We[Xe]);const K=Do(c.a5/2,c.a5/2,t.x,t.y,t.z),se=c.b4([],[0,1,0],K);c.b3(se,se);const pe=c.b4([],K,se);c.b3(pe,pe);const ge=c.b4([],F[2],F[1]);c.b3(ge,ge);const me=c.b4([],F[0],F[3]);c.b3(me,me),B.push(c.a$([],K,L)),t.y>=(1<<t.z)/2&&B.push(c.a$([],Do(c.a5/2,0,t.x,t.y,t.z),L)),t.y<(1<<t.z)/2&&B.push(c.a$([],Do(c.a5/2,c.a5,t.x,t.y,t.z),L));const _e=Uh(K,B),Ae=Uh(pe,B),ye=[-K[0],-K[1],-K[2],_e.max],Se=[K[0],K[1],K[2],-_e.min],Ie=[-pe[0],-pe[1],-pe[2],Ae.max],be=[pe[0],pe[1],pe[2],-Ae.min],je=[...ge,0],Qe=[...me,0],Ze=[];return t.y===0?Ze.push(c.bD(Qe,je,ye),c.bD(Qe,je,Se)):Ze.push(c.bD(Ie,je,ye),c.bD(Ie,je,Se),c.bD(Ie,Qe,ye),c.bD(Ie,Qe,Se)),t.y===(1<<t.z)-1?Ze.push(c.bD(Qe,je,ye),c.bD(Qe,je,Se)):Ze.push(c.bD(be,je,ye),c.bD(be,je,Se),c.bD(be,Qe,ye),c.bD(be,Qe,Se)),new Iu(Ze,[ye,Se,Ie,be,je,Qe],Z,$)}}}function Uh(w,t){let l=1/0,p=-1/0;for(const v of t){const S=c.b5(w,v);l=Math.min(l,S),p=Math.max(p,S)}return{min:l,max:p}}class ku{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,l,p){return this._helper.interpolatePadding(t,l,p)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,l){this._helper.resize(t,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,l){this._helper.overrideNearFarZ(t,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(t){this._cachedClippingPlane=c.bF(),this._projectionMatrix=c.bj(),this._globeViewProjMatrix32f=c.bi(),this._globeViewProjMatrixNoCorrection=c.bj(),this._globeViewProjMatrixNoCorrectionInverted=c.bj(),this._globeProjMatrixInverted=c.bj(),this._cameraPosition=c.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(l,p)=>{const v=c.an(l.lat,-c.ao,c.ao),S=c.an(+p,this.minZoom+er(0,v),this.maxZoom);return{center:new c.V(l.lng,v),zoom:S}},this.applyConstrain=(l,p)=>this._helper.applyConstrain(l,p),this._helper=new $l({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(l,p)=>this.defaultConstrain(l,p)},t),this._coveringTilesDetailsProvider=new Dp}clone(){const t=new ku;return t.apply(this),t}apply(t,l){this._globeLatitudeErrorCorrectionRadians=l||0,this._helper.apply(t)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=c.bz();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:l,applyGlobeMatrix:p}=t,v=this._helper.getMercatorTileCoordinates(l);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const l=this.pitchInRadians,p=this.cameraToCenterDistance/t,v=Math.sin(l)*p,S=Math.cos(l)*p+1,M=1/Math.sqrt(v*v+S*S)*1;let I=-v,L=S;const F=Math.sqrt(I*I+L*L);I/=F,L/=F;const B=[0,I,L];c.bG(B,B,[0,0,0],-this.bearingInRadians),c.bH(B,B,[0,0,0],-1*this.center.lat*Math.PI/180),c.bI(B,B,[0,0,0],this.center.lng*Math.PI/180);const Z=1/c.b7(B);return c.a$(B,B,Z),[...B,-M*Z]}isLocationOccluded(t){return!this.isSurfacePointVisible(Ui(t))}transformLightDirection(t){const l=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,v=Math.cos(p),S=[Math.sin(l)*v,Math.sin(p),Math.cos(l)*v],M=[S[2],0,-S[0]],I=[0,0,0];c.b4(I,M,S),c.b3(M,M),c.b3(I,I);const L=[0,0,0];return c.b3(L,[M[0]*t[0]+I[0]*t[1]+S[0]*t[2],M[1]*t[0]+I[1]*t[1]+S[1]*t[2],M[2]*t[0]+I[2]*t[1]+S[2]*t[2]]),L}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,l,p){const v=(function(I,L,F){const B=1/(1<<F.z);return new c.a9(I/c.a5*B+F.x*B,L/c.a5*B+F.y*B)})(t,l,p.canonical),S=(M=v.y,[c.by(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(S[1])}projectTileCoordinates(t,l,p,v){const S=p.canonical,M=Do(t,l,S.x,S.y,S.z),I=1+(v?v(t,l):0)/c.bE,L=[M[0]*I,M[1]*I,M[2]*I,1];c.aH(L,L,this._globeViewProjMatrixNoCorrection);const F=this._cachedClippingPlane,B=F[0]*M[0]+F[1]*M[1]+F[2]*M[2]+F[3]<0;return{point:new c.P(L[0]/L[3],L[1]/L[3]),signedDistanceFromCamera:L[3],isOccluded:B}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=Nc(this.worldSize,this.center.lat),l=c.bk(),p=c.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),c.be(l,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;l[8]=2*-v.x/this._helper._width,l[9]=2*v.y/this._helper._height,this._projectionMatrix=c.bf(l),this._globeProjMatrixInverted=c.bk(),c.aB(this._globeProjMatrixInverted,l),c.O(l,l,[0,0,-this.cameraToCenterDistance]),c.bg(l,l,this.rollInRadians),c.bh(l,l,-this.pitchInRadians),c.bg(l,l,this.bearingInRadians),c.O(l,l,[0,0,-t]);const S=c.bz();S[0]=t,S[1]=t,S[2]=t,c.bh(p,l,this.center.lat*Math.PI/180),c.bJ(p,p,-this.center.lng*Math.PI/180),c.Q(p,p,S),this._globeViewProjMatrixNoCorrection=p,c.bh(l,l,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bJ(l,l,-this.center.lng*Math.PI/180),c.Q(l,l,S),this._globeViewProjMatrix32f=new Float32Array(l),this._globeViewProjMatrixNoCorrectionInverted=c.bk(),c.aB(this._globeViewProjMatrixNoCorrectionInverted,p);const M=c.bz();this._cameraPosition=c.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/t,c.bG(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),c.bH(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),c.bG(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),c.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bH(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),c.bI(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const I=c.bf(this._globeViewProjMatrixNoCorrectionInverted);c.Q(I,I,[1,1,-1]),this._cachedFrustum=wa.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){c.w("calculateFogMatrix is not supported on globe projection.");const l=c.bk();return c.ar(l),l}getVisibleUnwrappedCoordinates(t){return[new c.bc(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,l){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=Ui(t);c.a$(p,p,1+l/c.bE);const v=c.bF();return c.aH(v,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(t){}getBounds(){const t=.5*this.width,l=.5*this.height,p=[new c.P(0,0),new c.P(t,0),new c.P(this.width,0),new c.P(this.width,l),new c.P(this.width,this.height),new c.P(t,this.height),new c.P(0,this.height),new c.P(0,l)],v=[];for(const Z of p)v.push(this.unprojectScreenPoint(Z));let S=0,M=0,I=0,L=0;const F=this.center;for(const Z of v){const $=c.bK(F.lng,Z.lng),K=c.bK(F.lat,Z.lat);$<M&&(M=$),$>S&&(S=$),K<L&&(L=K),K>I&&(I=K)}const B=[F.lng+M,F.lat+L,F.lng+S,F.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(B[3]=90,B[0]=-180,B[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(B[1]=-90,B[0]=-180,B[2]=180),new Xn(B)}calculateCenterFromCameraLngLatAlt(t,l,p,v){return this._helper.calculateCenterFromCameraLngLatAlt(t,l,p,v)}setLocationAtPoint(t,l){const p=Ui(this.unprojectScreenPoint(l)),v=Ui(t),S=c.bz();c.bL(S);const M=c.bz();c.bI(M,p,S,-this.center.lng*Math.PI/180),c.bH(M,M,S,this.center.lat*Math.PI/180);const I=v[0]*v[0]+v[2]*v[2],L=M[0]*M[0];if(I<L)return;const F=Math.sqrt(I-L),B=-F,Z=c.bM(v[0],v[2],M[0],F),$=c.bM(v[0],v[2],M[0],B),K=c.bz();c.bI(K,v,S,-Z);const se=c.bM(K[1],K[2],M[1],M[2]),pe=c.bz();c.bI(pe,v,S,-$);const ge=c.bM(pe[1],pe[2],M[1],M[2]),me=.5*Math.PI,_e=se>=-me&&se<=me,Ae=ge>=-me&&ge<=me;let ye,Se;if(_e&&Ae){const Qe=this.center.lng*Math.PI/180,Ze=this.center.lat*Math.PI/180;c.bN(Z,Qe)+c.bN(se,Ze)<c.bN($,Qe)+c.bN(ge,Ze)?(ye=Z,Se=se):(ye=$,Se=ge)}else if(_e)ye=Z,Se=se;else{if(!Ae)return;ye=$,Se=ge}const Ie=ye/Math.PI*180,be=Se/Math.PI*180,je=this.center.lat;this.setCenter(new c.V(Ie,c.an(be,-90,90))),this.setZoom(this.zoom+er(je,this.center.lat))}locationToScreenPoint(t,l){const p=Ui(t);if(l){const v=l.getElevationForLngLatZoom(t,this._helper._tileZoom);c.a$(p,p,1+v/c.bE)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(t){const l=c.bF();return c.aH(l,[...t,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],new c.P((.5*l[0]+.5)*this.width,(.5*-l[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,l){if(l){const p=l.pointCoordinate(t);if(p)return p}return c.a9.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,l){var p;return(p=this.screenPointToMercatorCoordinate(t,l))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(t,l){const p=this._cameraPosition,v=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(p,v)}getRayDirectionFromPixel(t){const l=c.bF();l[0]=t.x/this.width*2-1,l[1]=-1*(t.y/this.height*2-1),l[2]=1,l[3]=1,c.aH(l,l,this._globeViewProjMatrixNoCorrectionInverted),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3];const p=c.bz();p[0]=l[0]-this._cameraPosition[0],p[1]=l[1]-this._cameraPosition[1],p[2]=l[2]-this._cameraPosition[2];const v=c.bz();return c.b3(v,p),v}isSurfacePointVisible(t){const l=this._cachedClippingPlane;return l[0]*t[0]+l[1]*t[1]+l[2]*t[2]+l[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const l=c.bF();return c.aH(l,[...t,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3],l[0]>-1&&l[0]<1&&l[1]>-1&&l[1]<1&&l[2]>-1&&l[2]<1}rayPlanetIntersection(t,l){const p=c.b5(t,l),v=c.bz(),S=c.bz();c.a$(S,l,p),c.b2(v,t,S);const M=1-c.b5(v,v);if(M<0)return null;const I=c.b5(t,t)-1,L=-p+(p<0?1:-1)*Math.sqrt(M),F=I/L,B=L;return{tMin:Math.min(F,B),tMax:Math.max(F,B)}}unprojectScreenPoint(t){const l=this._cameraPosition,p=this.getRayDirectionFromPixel(t),v=this.rayPlanetIntersection(l,p);if(v){const B=c.bz();c.b0(B,l,[p[0]*v.tMin,p[1]*v.tMin,p[2]*v.tMin]);const Z=c.bz();return c.b3(Z,B),Bh(Z)}const S=this._cachedClippingPlane,M=S[0]*p[0]+S[1]*p[1]+S[2]*p[2],I=-c.bb(S,l)/M,L=c.bz();if(I>0)c.b0(L,l,[p[0]*I,p[1]*I,p[2]*I]);else{const B=c.bz();c.b0(B,l,[2*p[0],2*p[1],2*p[2]]);const Z=c.bb(this._cachedClippingPlane,B);c.b2(L,B,[this._cachedClippingPlane[0]*Z,this._cachedClippingPlane[1]*Z,this._cachedClippingPlane[2]*Z])}const F=(function(B){const Z=c.bz();return Z[0]=B[0]*-B[3],Z[1]=B[1]*-B[3],Z[2]=B[2]*-B[3],{center:Z,radius:Math.sqrt(1-B[3]*B[3])}})(S);return Bh((function(B,Z,$){const K=c.bz();c.b2(K,$,B);const se=c.bz();return c.bA(se,B,K,Z/c.b9(K)),se})(F.center,F.radius,L))}getMatrixForModel(t,l){const p=c.V.convert(t),v=1/c.bE,S=c.bj();return c.bJ(S,S,p.lng/180*Math.PI),c.bh(S,S,-p.lat/180*Math.PI),c.O(S,S,[0,0,1+l/c.bE]),c.bh(S,S,.5*Math.PI),c.Q(S,S,[v,v,v]),S}getProjectionDataForCustomLayer(t=!0){const l=this.getProjectionData({overscaledTileID:new c.a2(0,0,0,0,0),applyGlobeMatrix:t});return l.tileMercatorCoords=[0,0,1,1],l}getFastPathSimpleProjectionMatrix(t){}}class Ou{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,l,p){return this._helper.interpolatePadding(t,l,p)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,l,p=!0){this._helper.resize(t,l,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,l){this._helper.overrideNearFarZ(t,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,l){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=l,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(t){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(l,p)=>this.currentTransform.defaultConstrain(l,p),this.applyConstrain=(l,p)=>this._helper.applyConstrain(l,p),this._helper=new $l({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(l,p)=>this.defaultConstrain(l,p)},t),this._globeness=1,this._mercatorTransform=new Er,this._verticalPerspectiveTransform=new ku}clone(){const t=new Ou;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this),t}apply(t){this._helper.apply(t),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const l=this._mercatorTransform.getProjectionData(t),p=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:l.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:l.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return c.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,l,p){const v=this._mercatorTransform.getPitchedTextCorrection(t,l,p),S=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,l,p);return c.bu(v,S,this._globeness)}projectTileCoordinates(t,l,p,v){return this.currentTransform.projectTileCoordinates(t,l,p,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,l){return this.currentTransform.lngLatToCameraDepth(t,l)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(t,l,p,v){return this._helper.calculateCenterFromCameraLngLatAlt(t,l,p,v)}setLocationAtPoint(t,l){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,l),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(t,l),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(t,l){return this.currentTransform.locationToScreenPoint(t,l)}screenPointToMercatorCoordinate(t,l){return this.currentTransform.screenPointToMercatorCoordinate(t,l)}screenPointToLocation(t,l){return this.currentTransform.screenPointToLocation(t,l)}isPointOnMapSurface(t,l){return this.currentTransform.isPointOnMapSurface(t,l)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,l){return this.currentTransform.getMatrixForModel(t,l)}getProjectionDataForCustomLayer(t=!0){const l=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return l;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return p.fallbackMatrix=l.mainMatrix,p}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class lr{get useGlobeControls(){return!0}handlePanInertia(t,l){const p=dg(t,l);return Math.abs(p.lng-l.center.lng)>180&&(p.lng=l.center.lng+179.5*Math.sign(p.lng-l.center.lng)),{easingCenter:p,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,l){const p=t.around,v=l.screenPointToLocation(p);t.bearingDelta&&l.setBearing(l.bearing+t.bearingDelta),t.pitchDelta&&l.setPitch(l.pitch+t.pitchDelta),t.rollDelta&&l.setRoll(l.roll+t.rollDelta);const S=l.zoom;t.zoomDelta&&l.setZoom(l.zoom+t.zoomDelta);const M=l.zoom-S;if(M===0)return;const I=c.bK(l.center.lng,v.lng),L=I/(Math.abs(I/180)+1),F=c.bK(l.center.lat,v.lat),B=l.getRayDirectionFromPixel(p),Z=l.cameraPosition,$=-1*c.b5(Z,B),K=c.bz();c.b0(K,Z,[B[0]*$,B[1]*$,B[2]*$]);const se=c.b7(K)-1,pe=Math.exp(.5*-Math.max(se-.3,0)),ge=Nc(l.worldSize,l.center.lat)/Math.min(l.width,l.height),me=c.bx(ge,.9,.5,1,.25),_e=(1-c.aq(-M))*Math.min(pe,me),Ae=l.center.lat,ye=l.zoom,Se=new c.V(l.center.lng+L*_e,c.an(l.center.lat+F*_e,-c.ao,c.ao));l.setLocationAtPoint(v,p);const Ie=l.center,be=c.bx(Math.abs(I),45,85,0,1),je=c.bx(ge,.75,.35,0,1),Qe=Math.pow(Math.max(be,je),.25),Ze=c.bK(Ie.lng,Se.lng),We=c.bK(Ie.lat,Se.lat);l.setCenter(new c.V(Ie.lng+Ze*Qe,Ie.lat+We*Qe).wrap()),l.setZoom(ye+er(Ae,l.center.lat))}handleMapControlsPan(t,l,p){if(!t.panDelta)return;const v=l.center.lat,S=l.zoom;l.setCenter(dg(t.panDelta,l).wrap()),l.setZoom(S+er(v,l.center.lat))}cameraForBoxAndBearing(t,l,p,v,S){const M=kc(t,l,p,v,S),I=l.left/S.width*2-1,L=(S.width-l.right)/S.width*2-1,F=l.top/S.height*-2+1,B=(S.height-l.bottom)/S.height*-2+1,Z=c.bK(p.getWest(),p.getEast())<0,$=Z?p.getEast():p.getWest(),K=Z?p.getWest():p.getEast(),se=Math.max(p.getNorth(),p.getSouth()),pe=Math.min(p.getNorth(),p.getSouth()),ge=$+.5*c.bK($,K),me=se+.5*c.bK(se,pe),_e=S.clone();_e.setCenter(M.center),_e.setBearing(M.bearing),_e.setPitch(0),_e.setRoll(0),_e.setZoom(M.zoom);const Ae=_e.modelViewProjectionMatrix,ye=[Ui(p.getNorthWest()),Ui(p.getNorthEast()),Ui(p.getSouthWest()),Ui(p.getSouthEast()),Ui(new c.V(K,me)),Ui(new c.V($,me)),Ui(new c.V(ge,se)),Ui(new c.V(ge,pe))],Se=Ui(M.center);let Ie=Number.POSITIVE_INFINITY;for(const be of ye)I<0&&(Ie=lr.getLesserNonNegativeNonNull(Ie,lr.solveVectorScale(be,Se,Ae,"x",I))),L>0&&(Ie=lr.getLesserNonNegativeNonNull(Ie,lr.solveVectorScale(be,Se,Ae,"x",L))),F>0&&(Ie=lr.getLesserNonNegativeNonNull(Ie,lr.solveVectorScale(be,Se,Ae,"y",F))),B<0&&(Ie=lr.getLesserNonNegativeNonNull(Ie,lr.solveVectorScale(be,Se,Ae,"y",B)));if(Number.isFinite(Ie)&&Ie!==0)return M.zoom=_e.zoom+c.at(Ie),M;Ta()}handleJumpToCenterZoom(t,l){const p=t.center.lat,v=t.applyConstrain(l.center?c.V.convert(l.center):t.center,t.zoom).center;t.setCenter(v.wrap());const S=l.zoom!==void 0?+l.zoom:t.zoom+er(p,v.lat);t.zoom!==S&&t.setZoom(S)}handleEaseTo(t,l){const p=t.zoom,v=t.center,S=t.padding,M={roll:t.roll,pitch:t.pitch,bearing:t.bearing},I={roll:l.roll===void 0?t.roll:l.roll,pitch:l.pitch===void 0?t.pitch:l.pitch,bearing:l.bearing===void 0?t.bearing:l.bearing},L=l.zoom!==void 0,F=!t.isPaddingEqual(l.padding);let B=!1;const Z=l.center?c.V.convert(l.center):v,$=t.applyConstrain(Z,p).center;Co(t,$);const K=t.clone();K.setCenter($),K.setZoom(L?+l.zoom:p+er(v.lat,Z.lat)),K.setBearing(l.bearing);const se=new c.P(c.an(t.centerPoint.x+l.offsetAsPoint.x,0,t.width),c.an(t.centerPoint.y+l.offsetAsPoint.y,0,t.height));K.setLocationAtPoint($,se);const pe=(l.offset&&l.offsetAsPoint.mag())>0?K.center:$,ge=L?+l.zoom:p+er(v.lat,pe.lat),me=p+er(v.lat,0),_e=ge+er(pe.lat,0),Ae=c.bK(v.lng,pe.lng),ye=c.bK(v.lat,pe.lat),Se=c.aq(_e-me);return B=ge!==p,{easeFunc:Ie=>{if(c.bo(M,I)||zh({startEulerAngles:M,endEulerAngles:I,tr:t,k:Ie,useSlerp:M.roll!=I.roll}),F&&t.interpolatePadding(S,l.padding,Ie),l.around)c.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(l.around,l.aroundPoint);else{const be=_e>me?Math.min(2,Se):Math.max(.5,Se),je=Math.pow(be,1-Ie),Qe=fg(v,Ae,ye,Ie*je);t.setCenter(Qe.wrap())}if(B){const be=c.G.number(me,_e,Ie)+er(0,t.center.lat);t.setZoom(be)}},isZooming:B,elevationCenter:pe}}handleFlyTo(t,l){const p=l.zoom!==void 0,v=t.center,S=t.zoom,M=t.padding,I=!t.isPaddingEqual(l.padding),L=t.applyConstrain(c.V.convert(l.center||l.locationAtOffset),S).center,F=p?+l.zoom:t.zoom+er(t.center.lat,L.lat),B=t.clone();B.setCenter(L),B.setZoom(F),B.setBearing(l.bearing);const Z=new c.P(c.an(t.centerPoint.x+l.offsetAsPoint.x,0,t.width),c.an(t.centerPoint.y+l.offsetAsPoint.y,0,t.height));B.setLocationAtPoint(L,Z);const $=B.center;Co(t,$);const K=(function(ye,Se,Ie){const be=Ui(Se),je=Ui(Ie),Qe=c.b5(be,je),Ze=Math.acos(Qe),We=Sa(ye);return Ze/(2*Math.PI)*We})(t,v,$),se=S+er(v.lat,0),pe=F+er($.lat,0),ge=c.aq(pe-se);let me;if(typeof l.minZoom=="number"){const ye=+l.minZoom+er($.lat,0),Se=Math.min(ye,se,pe)+er(0,$.lat),Ie=t.applyConstrain($,Se).zoom+er($.lat,0);me=c.aq(Ie-se)}const _e=c.bK(v.lng,$.lng),Ae=c.bK(v.lat,$.lat);return{easeFunc:(ye,Se,Ie,be)=>{const je=fg(v,_e,Ae,Ie);I&&t.interpolatePadding(M,l.padding,ye);const Qe=ye===1?$:je;t.setCenter(Qe.wrap());const Ze=se+c.at(Se);t.setZoom(ye===1?F:Ze+er(0,Qe.lat))},scaleOfZoom:ge,targetCenter:$,scaleOfMinZoom:me,pixelPathLength:K}}static solveVectorScale(t,l,p,v,S){const M=v==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],I=[p[3],p[7],p[11],p[15]],L=t[0]*M[0]+t[1]*M[1]+t[2]*M[2],F=t[0]*I[0]+t[1]*I[1]+t[2]*I[2],B=l[0]*M[0]+l[1]*M[1]+l[2]*M[2],Z=l[0]*I[0]+l[1]*I[1]+l[2]*I[2];return B+S*F===L+S*Z||I[3]*(L-B)+M[3]*(Z-F)+L*Z==B*F?null:(B+M[3]-S*Z-S*I[3])/(B-L-S*Z+S*F)}static getLesserNonNegativeNonNull(t,l){return l!==null&&l>=0&&l<t?l:t}}class Lu{constructor(t){this._globe=t,this._mercatorCameraHelper=new Oc,this._verticalPerspectiveCameraHelper=new lr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,l){return this.currentHelper.handlePanInertia(t,l)}handleMapControlsRollPitchBearingZoom(t,l){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,l)}handleMapControlsPan(t,l,p){this.currentHelper.handleMapControlsPan(t,l,p)}cameraForBoxAndBearing(t,l,p,v,S){return this.currentHelper.cameraForBoxAndBearing(t,l,p,v,S)}handleJumpToCenterZoom(t,l){this.currentHelper.handleJumpToCenterZoom(t,l)}handleEaseTo(t,l){return this.currentHelper.handleEaseTo(t,l)}handleFlyTo(t,l){return this.currentHelper.handleFlyTo(t,l)}}const Nu=(w,t)=>c.B(w,t&&t.filter((l=>l.identifier!=="source.canvas"))),Pu=c.bO();class Hl extends c.E{constructor(t,l={}){var p,v;super(),this._rtlPluginLoaded=()=>{for(const M in this.tileManagers){const I=this.tileManagers[M].getSource().type;I!=="vector"&&I!=="geojson"||this.tileManagers[M].reload()}},this.map=t,this.dispatcher=new Ri(Sn(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((M,I)=>this.getGlyphs(M,I))),this.dispatcher.registerMessageHandler("GI",((M,I)=>this.getImages(M,I))),this.dispatcher.registerMessageHandler("GDA",((M,I)=>this.getDashes(M,I))),this.imageManager=new Mt,this.imageManager.setEventedParent(this);const S=((p=t._container)===null||p===void 0?void 0:p.lang)||typeof document<"u"&&((v=document.documentElement)===null||v===void 0?void 0:v.lang)||void 0;this.glyphManager=new ut(t._requestManager,l.localIdeographFontFamily,S),this.lineAtlas=new xt(256,512),this.crossTileSymbolIndex=new Rr,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",c.bP()),Ue().on(De,this._rtlPluginLoaded),this.on("data",(M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const I=this.tileManagers[M.sourceId];if(!I)return;const L=I.getSource();if(L&&L.vectorLayerIds)for(const F in this._layers){const B=this._layers[F];B.source===L.id&&this._validateLayer(B)}}))}_setInitialValues(){var t;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new c.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((t=this.crossTileSymbolIndex)===null||t===void 0?void 0:t.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(t,l){var p,v,S;this._checkLoaded();const M=l===null?(S=(v=(p=this.stylesheet.state)===null||p===void 0?void 0:p[t])===null||v===void 0?void 0:v.default)!==null&&S!==void 0?S:null:l;if(c.bR(M,this._globalState[t]))return this;this._globalState[t]=M,this._applyGlobalStateChanges([t])}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();const l=[];for(const p in t)!c.bR(this._globalState[p],t[p].default)&&(l.push(p),this._globalState[p]=t[p].default);this._applyGlobalStateChanges(l)}_applyGlobalStateChanges(t){if(t.length===0)return;const l=new Set,p={};for(const v of t){p[v]=this._globalState[v];for(const S in this._layers){const M=this._layers[S],I=M.getLayoutAffectingGlobalStateRefs(),L=M.getPaintAffectingGlobalStateRefs(),F=M.getVisibilityAffectingGlobalStateRefs();if(I.has(v)&&l.add(M.source),L.has(v))for(const{name:B,value:Z}of L.get(v))this._updatePaintProperty(M,B,Z);F?.has(v)&&(M.recalculateVisibility(),this._updateLayer(M))}}this.dispatcher.broadcast("UGS",p);for(const v in this.tileManagers)l.has(v)&&(this._reloadSource(v),this._changed=!0)}loadURL(t,l={},p){this.fire(new c.l("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const v=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const S=this._loadStyleRequest;c.j(v,this._loadStyleRequest).then((M=>{this._loadStyleRequest=null,this._load(M.data,l,p)})).catch((M=>{this._loadStyleRequest=null,M&&!S.signal.aborted&&this.fire(new c.k(M))}))}loadJSON(t,l={},p){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,Y.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(t,l,p)})).catch((()=>{}))}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(Pu,{validate:!1})}_load(t,l,p){var v,S;let M=l.transformStyle?l.transformStyle(p,t):t;if(!l.validate||!Nu(this,c.C(M))){M=Object.assign({},M),this._loaded=!0,this.stylesheet=M;for(const I in M.sources)this.addSource(I,M.sources[I],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new $t(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new tt(this.stylesheet.sky),this.map.setTerrain((S=this.stylesheet.terrain)!==null&&S!==void 0?S:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){var t,l,p;const v=c.bS(this.stylesheet.layers);this.setGlobalState((t=this.stylesheet.state)!==null&&t!==void 0?t:null),this.dispatcher.broadcast("SL",v),this._order=v.map((S=>S.id)),this._layers={},this._serializedLayers=null;for(const S of v){const M=c.bT(S,this._globalState);if(M.setEventedParent(this,{layer:{id:S.id}}),this._layers[S.id]=M,c.bU(M)&&this.tileManagers[M.source]){const I=(p=(l=S.paint)===null||l===void 0?void 0:l["raster-fade-duration"])!==null&&p!==void 0?p:M.paint.get("raster-fade-duration");this.tileManagers[M.source].setRasterFadeDuration(I)}}}_loadSprite(t,l=!1,p=void 0){this.imageManager.setLoaded(!1);const v=new AbortController;let S;this._spriteRequest=v,(function(M,I,L,F){return c._(this,void 0,void 0,(function*(){const B=Te(M),Z=L>1?"@2x":"",$={},K={};for(const{id:se,url:pe}of B){const ge=I.transformRequest(it(pe,Z,".json"),"SpriteJSON");$[se]=c.j(ge,F);const me=I.transformRequest(it(pe,Z,".png"),"SpriteImage");K[se]=Ne.getImage(me,F)}return yield Promise.all([...Object.values($),...Object.values(K)]),(function(se,pe){return c._(this,void 0,void 0,(function*(){const ge={};for(const me in se){ge[me]={};const _e=Y.getImageCanvasContext((yield pe[me]).data),Ae=(yield se[me]).data;for(const ye in Ae){const{width:Se,height:Ie,x:be,y:je,sdf:Qe,pixelRatio:Ze,stretchX:We,stretchY:Xe,content:Et,textFitWidth:At,textFitHeight:pt}=Ae[ye];ge[me][ye]={data:null,pixelRatio:Ze,sdf:Qe,stretchX:We,stretchY:Xe,content:Et,textFitWidth:At,textFitHeight:pt,spriteData:{width:Se,height:Ie,x:be,y:je,context:_e}}}}return ge}))})($,K)}))})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((M=>{if(this._spriteRequest=null,M)for(const I in M){this._spritesImagesIds[I]=[];const L=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter((F=>!(F in M))):[];for(const F of L)this.imageManager.removeImage(F),this._changedImages[F]=!0;for(const F in M[I]){const B=I==="default"?F:`${I}:${F}`;this._spritesImagesIds[I].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,M[I][F],!1):this.imageManager.addImage(B,M[I][F]),l&&(this._changedImages[B]=!0)}}})).catch((M=>{this._spriteRequest=null,S=M,v.signal.aborted||this.fire(new c.k(S))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),p&&p(S)}))}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(t){const l=this.tileManagers[t.source];if(!l)return;const p=t.sourceLayer;if(!p)return;const v=l.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(p)===-1)&&this.fire(new c.k(new Error(`Source layer "${p}" does not exist on source "${v.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.tileManagers)if(!this.tileManagers[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,l=!1){const p=this._serializedAllLayers();if(!t||t.length===0)return Object.values(l?c.bV(p):p);const v=[];for(const S of t)if(p[S]){const M=l?c.bV(p[S]):p[S];v.push(M)}return v}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const l=Object.keys(this._layers);for(const p of l){const v=this._layers[p];v.type!=="custom"&&(t[p]=v.serialize())}return t}hasTransitions(){var t,l,p;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((l=this.sky)===null||l===void 0)&&l.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const v in this.tileManagers)if(this.tileManagers[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const l=this._changed;if(l){const v=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(v.length||S.length)&&this._updateWorkerLayers(v,S);for(const M in this._updatedSources){const I=this._updatedSources[M];if(I==="reload")this._reloadSource(M);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const p={};for(const v in this.tileManagers){const S=this.tileManagers[v];p[v]=S.used,S.used=!1}for(const v of this._order){const S=this._layers[v];S.recalculate(t,this._availableImages),!S.isHidden(t.zoom)&&S.source&&(this.tileManagers[S.source].used=!0)}for(const v in p){const S=this.tileManagers[v];!!p[v]!=!!S.used&&S.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,l&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const l in this.tileManagers)this.tileManagers[l].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.tileManagers)this.tileManagers[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,l={}){var p;this._checkLoaded();const v=this.serialize();if(t=l.transformStyle?l.transformStyle(v,t):t,((p=l.validate)===null||p===void 0||p)&&Nu(this,c.C(t)))return!1;(t=c.bV(t)).layers=c.bS(t.layers);const S=c.bW(v,t),M=this._getOperationsToPerform(S);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(const I of M.operations)I();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const l=[],p=[];for(const v of t)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":l.push((()=>this.addLayer.apply(this,v.args)));break;case"removeLayer":l.push((()=>this.removeLayer.apply(this,v.args)));break;case"setPaintProperty":l.push((()=>this.setPaintProperty.apply(this,v.args)));break;case"setLayoutProperty":l.push((()=>this.setLayoutProperty.apply(this,v.args)));break;case"setFilter":l.push((()=>this.setFilter.apply(this,v.args)));break;case"addSource":l.push((()=>this.addSource.apply(this,v.args)));break;case"removeSource":l.push((()=>this.removeSource.apply(this,v.args)));break;case"setLayerZoomRange":l.push((()=>this.setLayerZoomRange.apply(this,v.args)));break;case"setLight":l.push((()=>this.setLight.apply(this,v.args)));break;case"setGeoJSONSourceData":l.push((()=>this.setGeoJSONSourceData.apply(this,v.args)));break;case"setGlyphs":l.push((()=>this.setGlyphs.apply(this,v.args)));break;case"setSprite":l.push((()=>this.setSprite.apply(this,v.args)));break;case"setTerrain":l.push((()=>this.map.setTerrain.apply(this,v.args)));break;case"setSky":l.push((()=>this.setSky.apply(this,v.args)));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setGlobalState":l.push((()=>this.setGlobalState.apply(this,v.args)));break;case"setTransition":l.push((()=>{}));break;default:p.push(v.command)}return{operations:l,unimplemented:p}}addImage(t,l){if(this.getImage(t))return this.fire(new c.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,l),this._afterImageUpdated(t)}updateImage(t,l){this.imageManager.updateImage(t,l)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new c.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,l,p={}){if(this._checkLoaded(),this.tileManagers[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(c.C.source,`sources.${t}`,l,null,p))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const v=this.tileManagers[t]=new wi(t,l,this.dispatcher);v.style=this,v.setEventedParent(this,(()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:t}))),v.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===t)return this.fire(new c.k(new Error(`Source "${t}" cannot be removed while layer "${p}" is using it.`)));const l=this.tileManagers[t];delete this.tileManagers[t],delete this._updatedSources[t],l.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,l){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const p=this.tileManagers[t].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(l),this._changed=!0}getSource(t){return this.tileManagers[t]&&this.tileManagers[t].getSource()}addLayer(t,l,p={}){this._checkLoaded();const v=t.id;if(this.getLayer(v))return void this.fire(new c.k(new Error(`Layer "${v}" already exists on this map.`)));let S;if(t.type==="custom"){if(Nu(this,c.bX(t)))return;S=c.bT(t,this._globalState)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(v,t.source),t=c.bV(t),t=c.e(t,{source:v})),this._validate(c.C.layer,`layers.${v}`,t,{arrayIndex:-1},p))return;S=c.bT(t,this._globalState),this._validateLayer(S),S.setEventedParent(this,{layer:{id:v}})}const M=l?this._order.indexOf(l):this._order.length;if(l&&M===-1)this.fire(new c.k(new Error(`Cannot add layer "${v}" before non-existing layer "${l}".`)));else{if(this._order.splice(M,0,v),this._layerOrderChanged=!0,this._layers[v]=S,this._removedLayers[v]&&S.source&&S.type!=="custom"){const I=this._removedLayers[v];delete this._removedLayers[v],I.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.tileManagers[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(t,l){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new c.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===l)return;const p=this._order.indexOf(t);this._order.splice(p,1);const v=l?this._order.indexOf(l):this._order.length;l&&v===-1?this.fire(new c.k(new Error(`Cannot move layer "${t}" before non-existing layer "${l}".`))):(this._order.splice(v,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const l=this._layers[t];if(!l)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${t}".`)));l.setEventedParent(null);const p=this._order.indexOf(t);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=l,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],l.onRemove&&l.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,l,p){this._checkLoaded();const v=this.getLayer(t);v?v.minzoom===l&&v.maxzoom===p||(l!=null&&(v.minzoom=l),p!=null&&(v.maxzoom=p),this._updateLayer(v)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,l,p={}){this._checkLoaded();const v=this.getLayer(t);if(v){if(!c.bR(v.filter,l))return l==null?(v.setFilter(void 0),void this._updateLayer(v)):void(this._validate(c.C.filter,`layers.${v.id}.filter`,l,null,p)||(v.setFilter(c.bV(l)),this._updateLayer(v)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return c.bV(this.getLayer(t).filter)}setLayoutProperty(t,l,p,v={}){this._checkLoaded();const S=this.getLayer(t);S?c.bR(S.getLayoutProperty(l),p)||(S.setLayoutProperty(l,p,v),this._updateLayer(S)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,l){const p=this.getLayer(t);if(p)return p.getLayoutProperty(l);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,l,p,v={}){this._checkLoaded();const S=this.getLayer(t);S?c.bR(S.getPaintProperty(l),p)||this._updatePaintProperty(S,l,p,v):this.fire(new c.k(new Error(`Cannot style non-existing layer "${t}".`)))}_updatePaintProperty(t,l,p,v={}){t.setPaintProperty(l,p,v)&&this._updateLayer(t),c.bU(t)&&l==="raster-fade-duration"&&this.tileManagers[t.source].setRasterFadeDuration(p),this._changed=!0,this._updatedPaintProps[t.id]=!0,this._serializedLayers=null}getPaintProperty(t,l){return this.getLayer(t).getPaintProperty(l)}setFeatureState(t,l){this._checkLoaded();const p=t.source,v=t.sourceLayer,S=this.tileManagers[p];if(S===void 0)return void this.fire(new c.k(new Error(`The source '${p}' does not exist in the map's style.`)));const M=S.getSource().type;M==="geojson"&&v?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||v?(t.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),S.setFeatureState(v,t.id,l)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,l){this._checkLoaded();const p=t.source,v=this.tileManagers[p];if(v===void 0)return void this.fire(new c.k(new Error(`The source '${p}' does not exist in the map's style.`)));const S=v.getSource().type,M=S==="vector"?t.sourceLayer:void 0;S!=="vector"||M?l&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(M,t.id,l):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const l=t.source,p=t.sourceLayer,v=this.tileManagers[l];if(v!==void 0)return v.getSource().type!=="vector"||p?(t.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(p,t.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=c.bY(this.tileManagers,(S=>S.serialize())),l=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,v=this.stylesheet;return c.bZ({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:t,layers:l,terrain:p},(S=>S!==void 0))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.tileManagers[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.tileManagers[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const l=M=>this._layers[M].type==="fill-extrusion",p={},v=[];for(let M=this._order.length-1;M>=0;M--){const I=this._order[M];if(l(I)){p[I]=M;for(const L of t){const F=L[I];if(F)for(const B of F)v.push(B)}}}v.sort(((M,I)=>I.intersectionZ-M.intersectionZ));const S=[];for(let M=this._order.length-1;M>=0;M--){const I=this._order[M];if(l(I))for(let L=v.length-1;L>=0;L--){const F=v[L].feature;if(p[F.layer.id]<M)break;S.push(F),v.pop()}else for(const L of t){const F=L[I];if(F)for(const B of F)S.push(B.feature)}}return S}queryRenderedFeatures(t,l,p){l&&l.filter&&this._validate(c.C.filter,"queryRenderedFeatures.filter",l.filter,null,l);const v={};if(l&&l.layers){if(!(Array.isArray(l.layers)||l.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const F of l.layers){const B=this._layers[F];if(!B)return this.fire(new c.k(new Error(`The layer '${F}' does not exist in the map's style and cannot be queried for features.`))),[];v[B.source]=!0}}const S=[];l.availableImages=this._availableImages;const M=this._serializedAllLayers(),I=l.layers instanceof Set?l.layers:Array.isArray(l.layers)?new Set(l.layers):null,L=Object.assign(Object.assign({},l),{layers:I,globalState:this._globalState});for(const F in this.tileManagers)l.layers&&!v[F]||S.push(ta(this.tileManagers[F],this._layers,M,t,L,p,this.map.terrain?(B,Z,$)=>this.map.terrain.getElevation(B,Z,$):void 0));return this.placement&&S.push((function(F,B,Z,$,K,se,pe){const ge={},me=se.queryRenderedSymbols($),_e=[];for(const Ae of Object.keys(me).map(Number))_e.push(pe[Ae]);_e.sort(Nn);for(const Ae of _e){const ye=Ae.featureIndex.lookupSymbolFeatures(me[Ae.bucketInstanceId],B,Ae.bucketIndex,Ae.sourceLayerIndex,{filterSpec:K.filter,globalState:K.globalState},K.layers,K.availableImages,F);for(const Se in ye){const Ie=ge[Se]=ge[Se]||[],be=ye[Se];be.sort(((je,Qe)=>{const Ze=Ae.featureSortOrder;if(Ze){const We=Ze.indexOf(je.featureIndex);return Ze.indexOf(Qe.featureIndex)-We}return Qe.featureIndex-je.featureIndex}));for(const je of be)Ie.push(je)}}return(function(Ae,ye,Se){for(const Ie in Ae)for(const be of Ae[Ie])bn(be,Se[ye[Ie].source]);return Ae})(ge,F,Z)})(this._layers,M,this.tileManagers,t,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(t,l){l?.filter&&this._validate(c.C.filter,"querySourceFeatures.filter",l.filter,null,l);const p=this.tileManagers[t];return p?(function(v,S){const M=v.getRenderableIds().map((F=>v.getTileByID(F))),I=[],L={};for(let F=0;F<M.length;F++){const B=M[F],Z=B.tileID.canonical.key;L[Z]||(L[Z]=!0,B.querySourceFeatures(I,S))}return I})(p,l?Object.assign(Object.assign({},l),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(t,l={}){this._checkLoaded();const p=this.light.getLight();let v=!1;for(const M in t)if(!c.bR(t[M],p[M])){v=!0;break}if(!v)return;const S={now:ie(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,l),this.light.updateTransitions(S)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=t,this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,l={}){this._checkLoaded();const p=this.getSky();let v=!1;if(!t&&!p)return;if(t&&!p)v=!0;else if(!t&&p)v=!0;else for(const M in t)if(!c.bR(t[M],p[M])){v=!0;break}if(!v)return;const S={now:ie(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,l),this.sky.updateTransitions(S)}_setProjectionInternal(t){const l=(function(p,v){const S={constrainOverride:v};if(Array.isArray(p)){const M=new Cp({type:p});return{projection:M,transform:new Ou(S),cameraHelper:new Lu(M)}}switch(p){case"mercator":return{projection:new kr,transform:new Er(S),cameraHelper:new Oc};case"globe":{const M=new Cp({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new Ou(S),cameraHelper:new Lu(M)}}case"vertical-perspective":return{projection:new Mp,transform:new ku(S),cameraHelper:new lr};default:return c.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new kr,transform:new Er(S),cameraHelper:new Oc}}})(t,this.map.transformConstrain);this.projection=l.projection,this.map.migrateProjection(l.transform,l.cameraHelper);for(const p in this.tileManagers)this.tileManagers[p].reload()}_validate(t,l,p,v,S={}){return(!S||S.validate!==!1)&&Nu(this,t.call(c.C,c.e({key:l,style:this.serialize(),value:p,styleSpec:c.u},v)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ue().off(De,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.tileManagers){const p=this.tileManagers[l];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.tileManagers[t].clearTiles()}_reloadSource(t){this.tileManagers[t].resume(),this.tileManagers[t].reload()}_updateSources(t){for(const l in this.tileManagers)this.tileManagers[l].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.tileManagers)this._reloadSource(t)}_updatePlacement(t,l,p,v,S=!1){let M=!1,I=!1;const L={};for(const F of this._order){const B=this._layers[F];if(B.type!=="symbol")continue;if(!L[B.source]){const $=this.tileManagers[B.source];L[B.source]=$.getRenderableIds(!0).map((K=>$.getTileByID(K))).sort(((K,se)=>se.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(se.tileID)?-1:1)))}const Z=this.crossTileSymbolIndex.addLayer(B,L[B.source],t.center.lng);M=M||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(ie(),t.zoom))&&(this.pauseablePlacement=new Du(t,this.map.terrain,this._order,S,l,p,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(ie()),I=!0),M&&this.pauseablePlacement.placement.setStale()),I||M)for(const F of this._order){const B=this._layers[F];B.type==="symbol"&&this.placement.updateLayerOpacities(B,L[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(ie())}_releaseSymbolFadeTiles(){for(const t in this.tileManagers)this.tileManagers[t].releaseSymbolFadeTiles()}getImages(t,l){return c._(this,void 0,void 0,(function*(){const p=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const v=this.tileManagers[l.source];return v&&v.setDependencies(l.tileID.key,l.type,l.icons),p}))}getGlyphs(t,l){return c._(this,void 0,void 0,(function*(){const p=yield this.glyphManager.getGlyphs(l.stacks),v=this.tileManagers[l.source];return v&&v.setDependencies(l.tileID.key,l.type,[""]),p}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,l={}){this._checkLoaded(),t&&this._validate(c.C.glyphs,"glyphs",t,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}getDashes(t,l){return c._(this,void 0,void 0,(function*(){const p={};for(const[v,S]of Object.entries(l.dashes))p[v]=this.lineAtlas.getDash(S.dasharray,S.round);return p}))}addSprite(t,l,p={},v){this._checkLoaded();const S=[{id:t,url:l}],M=[...Te(this.stylesheet.sprite),...S];this._validate(c.C.sprite,"sprite",M,null,p)||(this.stylesheet.sprite=M,this._loadSprite(S,!0,v))}removeSprite(t){this._checkLoaded();const l=Te(this.stylesheet.sprite);if(l.find((p=>p.id===t))){if(this._spritesImagesIds[t])for(const p of this._spritesImagesIds[t])this.imageManager.removeImage(p),this._changedImages[p]=!0;l.splice(l.findIndex((p=>p.id===t)),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Te(this.stylesheet.sprite)}setSprite(t,l={},p){this._checkLoaded(),t&&this._validate(c.C.sprite,"sprite",t,null,l)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,p):(this._unloadSprite(),p&&p(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const t in this.tileManagers){const l=this.tileManagers[t];l.setEventedParent(null),l.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const t in this._layers){const l=this._layers[t];l.setEventedParent(null),l.onRemove&&l.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var pg=c.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Gh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,l,p,v,S,M,I,L,F){this.context=t;let B=this.boundPaintVertexBuffers.length!==v.length;for(let Z=0;!B&&Z<v.length;Z++)this.boundPaintVertexBuffers[Z]!==v[Z]&&(B=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==p||B||this.boundIndexBuffer!==S||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==L||this.boundDynamicVertexBuffer3!==F?this.freshBind(l,p,v,S,M,I,L,F):(t.bindVertexArray.set(this.vao),I&&I.bind(),S&&S.dynamicDraw&&S.bind(),L&&L.bind(),F&&F.bind())}freshBind(t,l,p,v,S,M,I,L){const F=t.numAttributes,B=this.context,Z=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=L,l.enableAttributes(Z,t);for(const $ of p)$.enableAttributes(Z,t);M&&M.enableAttributes(Z,t),I&&I.enableAttributes(Z,t),L&&L.enableAttributes(Z,t),l.bind(),l.setVertexAttribPointers(Z,t,S);for(const $ of p)$.bind(),$.setVertexAttribPointers(Z,t,S);M&&(M.bind(),M.setVertexAttribPointers(Z,t,S)),v&&v.bind(),I&&(I.bind(),I.setVertexAttribPointers(Z,t,S)),L&&(L.bind(),L.setVertexAttribPointers(Z,t,S)),B.currentNumAttributes=F}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const mg=(w,t,l,p,v)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:t,u_fog_color:l?l.properties.get("fog-color"):c.bp.white,u_fog_ground_blend:l?l.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:l?l.calculateFogBlendOpacity(p):0,u_horizon_color:l?l.properties.get("horizon-color"):c.bp.white,u_horizon_fog_blend:l?l.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),Gs={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function uf(w){const t=[];for(let l=0;l<w.length;l++){if(w[l]===null)continue;const p=w[l].split(" ");t.push(p.pop())}return t}class gg{constructor(t,l,p,v,S,M,I,L,F=[]){const B=t.gl;this.program=B.createProgram();const Z=uf(l.staticAttributes),$=p?p.getBinderAttributes():[],K=Z.concat($),se=Bi.prelude.staticUniforms?uf(Bi.prelude.staticUniforms):[],pe=I.staticUniforms?uf(I.staticUniforms):[],ge=l.staticUniforms?uf(l.staticUniforms):[],me=p?p.getBinderUniforms():[],_e=se.concat(pe).concat(ge).concat(me),Ae=[];for(const Ze of _e)Ae.indexOf(Ze)<0&&Ae.push(Ze);const ye=p?p.defines():[];ys(B)&&ye.unshift("#version 300 es"),S&&ye.push("#define OVERDRAW_INSPECTOR;"),M&&ye.push("#define TERRAIN3D;"),L&&ye.push(L),F&&ye.push(...F);let Se=ye.concat(Bi.prelude.fragmentSource,I.fragmentSource,l.fragmentSource).join(`
`),Ie=ye.concat(Bi.prelude.vertexSource,I.vertexSource,l.vertexSource).join(`
`);ys(B)||(Se=(function(Ze){return Ze.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Se),Ie=(function(Ze){return Ze.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Ie));const be=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(be,Se),B.compileShader(be),!B.getShaderParameter(be,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(be)}`);B.attachShader(this.program,be);const je=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(je,Ie),B.compileShader(je),!B.getShaderParameter(je,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(je)}`);B.attachShader(this.program,je),this.attributes={};const Qe={};this.numAttributes=K.length;for(let Ze=0;Ze<this.numAttributes;Ze++)K[Ze]&&(B.bindAttribLocation(this.program,Ze,K[Ze]),this.attributes[K[Ze]]=Ze);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(je),B.deleteShader(be);for(let Ze=0;Ze<Ae.length;Ze++){const We=Ae[Ze];if(We&&!Qe[We]){const Xe=B.getUniformLocation(this.program,We);Xe&&(Qe[We]=Xe)}}this.fixedUniforms=v(t,Qe),this.terrainUniforms=((Ze,We)=>({u_depth:new c.b_(Ze,We.u_depth),u_terrain:new c.b_(Ze,We.u_terrain),u_terrain_dim:new c.bq(Ze,We.u_terrain_dim),u_terrain_matrix:new c.c0(Ze,We.u_terrain_matrix),u_terrain_unpack:new c.c1(Ze,We.u_terrain_unpack),u_terrain_exaggeration:new c.bq(Ze,We.u_terrain_exaggeration)}))(t,Qe),this.projectionUniforms=((Ze,We)=>({u_projection_matrix:new c.c0(Ze,We.u_projection_matrix),u_projection_tile_mercator_coords:new c.c1(Ze,We.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.c1(Ze,We.u_projection_clipping_plane),u_projection_transition:new c.bq(Ze,We.u_projection_transition),u_projection_fallback_matrix:new c.c0(Ze,We.u_projection_fallback_matrix)}))(t,Qe),this.binderUniforms=p?p.getUniforms(t,Qe):[]}draw(t,l,p,v,S,M,I,L,F,B,Z,$,K,se,pe,ge,me,_e,Ae){const ye=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(p),t.setStencilMode(v),t.setColorMode(S),t.setCullFace(M),L){t.activeTexture.set(ye.TEXTURE2),ye.bindTexture(ye.TEXTURE_2D,L.depthTexture),t.activeTexture.set(ye.TEXTURE3),ye.bindTexture(ye.TEXTURE_2D,L.texture);for(const Ie in this.terrainUniforms)this.terrainUniforms[Ie].set(L[Ie])}if(F)for(const Ie in F)this.projectionUniforms[Gs[Ie]].set(F[Ie]);if(I)for(const Ie in this.fixedUniforms)this.fixedUniforms[Ie].set(I[Ie]);ge&&ge.setUniforms(t,this.binderUniforms,se,{zoom:pe});let Se=0;switch(l){case ye.LINES:Se=2;break;case ye.TRIANGLES:Se=3;break;case ye.LINE_STRIP:Se=1}for(const Ie of K.get()){const be=Ie.vaos||(Ie.vaos={});(be[B]||(be[B]=new Gh)).bind(t,this,Z,ge?ge.getPaintVertexBuffers():[],$,Ie.vertexOffset,me,_e,Ae),ye.drawElements(l,Ie.primitiveLength*Se,ye.UNSIGNED_SHORT,Ie.primitiveOffset*Se*2)}}}function yg(w,t,l){const p=1/c.aN(l,1,t.transform.tileZoom),v=Math.pow(2,l.tileID.overscaledZ),S=l.tileSize*Math.pow(2,t.transform.tileZoom)/v,M=S*(l.tileID.canonical.x+l.tileID.wrap*v),I=S*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[p,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[M>>16,I>>16],u_pixel_coord_lower:[65535&M,65535&I]}}const hf=(w,t,l,p)=>{const v=w.style.light,S=v.properties.get("position"),M=[S.x,S.y,S.z],I=c.c4();v.properties.get("anchor")==="viewport"&&c.c5(I,w.transform.bearingInRadians),c.c6(M,M,I);const L=w.transform.transformLightDirection(M),F=v.properties.get("color");return{u_lightpos:M,u_lightpos_globe:L,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+t,u_opacity:l,u_fill_translate:p}},df=(w,t,l,p,v,S,M)=>c.e(hf(w,t,l,p),yg(S,w,M),{u_height_factor:-Math.pow(2,v.overscaledZ)/M.tileSize/8}),Pc=(w,t,l,p)=>c.e(yg(t,w,l),{u_fill_translate:p}),zu=(w,t)=>({u_world:w,u_fill_translate:t}),_g=(w,t,l,p,v)=>c.e(Pc(w,t,l,v),{u_world:p}),$h=(w,t,l,p,v)=>{const S=w.transform;let M,I,L=0;if(l.paint.get("circle-pitch-alignment")==="map"){const F=c.aN(t,1,S.zoom);M=!0,I=[F,F],L=F/(c.a5*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*v}else M=!1,I=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:L,u_translate:p}},Wl=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),Ip=w=>({u_viewport_size:[w.width,w.height]}),Zh=(w,t=1)=>({u_color:w,u_overlay:0,u_overlay_scale:t}),Xl=(w,t,l,p)=>{const v=c.aN(w,1,t)/(c.a5*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:c.aN(w,1,t),u_intensity:l,u_globe_extrude_scale:v}},Rp=(w,t,l,p)=>{const v=c.N();c.c7(v,0,w.width,w.height,0,0,1);const S=w.context.gl;return{u_matrix:v,u_world:[S.drawingBufferWidth,S.drawingBufferHeight],u_image:l,u_color_ramp:p,u_opacity:t.paint.get("heatmap-opacity")}},qh=(w,t,l)=>{const p=l.paint.get("hillshade-accent-color");let v;switch(l.paint.get("hillshade-method")){case"basic":v=4;break;case"combined":v=1;break;case"igor":v=2;break;case"multidirectional":v=3;break;default:v=0}const S=l.getIlluminationProperties();for(let M=0;M<S.directionRadians.length;M++)l.paint.get("hillshade-illumination-anchor")==="viewport"&&(S.directionRadians[M]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:T0(0,t.tileID),u_exaggeration:l.paint.get("hillshade-exaggeration"),u_altitudes:S.altitudeRadians,u_azimuths:S.directionRadians,u_accent:p,u_method:v,u_highlights:S.highlightColor,u_shadows:S.shadowColor}},vg=(w,t)=>{const l=t.stride,p=c.N();return c.c7(p,0,c.a5,-c.a5,0,0,1),c.O(p,p,[0,-c.a5,0]),{u_matrix:p,u_image:1,u_dimension:[l,l],u_zoom:w.overscaledZ,u_unpack:t.getUnpackVector()}};function T0(w,t){const l=Math.pow(2,t.canonical.z),p=t.canonical.y;return[new c.a9(0,p/l).toLngLat().lat,new c.a9(0,(p+1)/l).toLngLat().lat]}const bg=(w,t,l=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:l,u_opacity:w.paint.get("color-relief-opacity")}),Yh=(w,t,l,p)=>{const v=w.transform;return{u_translation:Hh(w,t,l),u_ratio:p/c.aN(t,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},xg=(w,t,l,p,v)=>c.e(Yh(w,t,l,p),{u_image:0,u_image_height:v}),kp=(w,t,l,p,v)=>{const S=w.transform,M=_s(t,S);return{u_translation:Hh(w,t,l),u_texsize:t.imageAtlasTexture.size,u_ratio:p/c.aN(t,1,S.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[M,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Ia=(w,t,l,p,v)=>{const S=_s(t,w.transform);return c.e(Yh(w,t,l,p),{u_tileratio:S,u_crossfade_from:v.fromScale,u_crossfade_to:v.toScale,u_image:0,u_mix:v.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},Ql=(w,t,l,p,v,S)=>{const M=_s(t,w.transform);return c.e(Yh(w,t,l,p),{u_image:0,u_image_height:S,u_tileratio:M,u_crossfade_from:v.fromScale,u_crossfade_to:v.toScale,u_image_dash:1,u_mix:v.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function _s(w,t){return 1/c.aN(w,1,t.tileZoom)}function Hh(w,t,l){return c.aO(w.transform,t,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const ff=(w,t,l,p,v)=>{return{u_tl_parent:w,u_scale_parent:t,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(M=p.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(S=p.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:pf(p.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var S,M};function pf(w){w*=Math.PI/180;const t=Math.sin(w),l=Math.cos(w);return[(2*l+1)/3,(-Math.sqrt(3)*t-l+1)/3,(Math.sqrt(3)*t-l+1)/3]}const Wh=(w,t,l,p,v,S,M,I,L,F,B,Z,$)=>{const K=M.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:K.width/K.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:L,u_is_text:+B,u_pitch_with_map:+p,u_is_along_line:v,u_is_variable_anchor:S,u_texsize:Z,u_texture:0,u_translation:F,u_pitched_scale:$}},mf=(w,t,l,p,v,S,M,I,L,F,B,Z,$,K)=>{const se=M.transform;return c.e(Wh(w,t,l,p,v,S,M,I,L,F,B,Z,K),{u_gamma_scale:p?Math.cos(se.pitch*Math.PI/180)*se.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},vs=(w,t,l,p,v,S,M,I,L,F,B,Z,$)=>c.e(mf(w,t,l,p,v,S,M,I,L,F,!0,B,0,$),{u_texsize_icon:Z,u_texture_icon:1}),Xh=(w,t)=>({u_opacity:w,u_color:t}),Qh=(w,t,l,p,v)=>c.e((function(S,M,I,L){const F=I.imageManager.getPattern(S.from.toString()),B=I.imageManager.getPattern(S.to.toString()),{width:Z,height:$}=I.imageManager.getPixelSize(),K=Math.pow(2,L.tileID.overscaledZ),se=L.tileSize*Math.pow(2,I.transform.tileZoom)/K,pe=se*(L.tileID.canonical.x+L.tileID.wrap*K),ge=se*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[Z,$],u_mix:M.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/c.aN(L,1,I.transform.tileZoom),u_pixel_coord_upper:[pe>>16,ge>>16],u_pixel_coord_lower:[65535&pe,65535&ge]}})(l,v,t,p),{u_opacity:w}),gf=(w,t)=>{},wg={fillExtrusion:(w,t)=>({u_lightpos:new c.c2(w,t.u_lightpos),u_lightpos_globe:new c.c2(w,t.u_lightpos_globe),u_lightintensity:new c.bq(w,t.u_lightintensity),u_lightcolor:new c.c2(w,t.u_lightcolor),u_vertical_gradient:new c.bq(w,t.u_vertical_gradient),u_opacity:new c.bq(w,t.u_opacity),u_fill_translate:new c.c3(w,t.u_fill_translate)}),fillExtrusionPattern:(w,t)=>({u_lightpos:new c.c2(w,t.u_lightpos),u_lightpos_globe:new c.c2(w,t.u_lightpos_globe),u_lightintensity:new c.bq(w,t.u_lightintensity),u_lightcolor:new c.c2(w,t.u_lightcolor),u_vertical_gradient:new c.bq(w,t.u_vertical_gradient),u_height_factor:new c.bq(w,t.u_height_factor),u_opacity:new c.bq(w,t.u_opacity),u_fill_translate:new c.c3(w,t.u_fill_translate),u_image:new c.b_(w,t.u_image),u_texsize:new c.c3(w,t.u_texsize),u_pixel_coord_upper:new c.c3(w,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,t.u_pixel_coord_lower),u_scale:new c.c2(w,t.u_scale),u_fade:new c.bq(w,t.u_fade)}),fill:(w,t)=>({u_fill_translate:new c.c3(w,t.u_fill_translate)}),fillPattern:(w,t)=>({u_image:new c.b_(w,t.u_image),u_texsize:new c.c3(w,t.u_texsize),u_pixel_coord_upper:new c.c3(w,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,t.u_pixel_coord_lower),u_scale:new c.c2(w,t.u_scale),u_fade:new c.bq(w,t.u_fade),u_fill_translate:new c.c3(w,t.u_fill_translate)}),fillOutline:(w,t)=>({u_world:new c.c3(w,t.u_world),u_fill_translate:new c.c3(w,t.u_fill_translate)}),fillOutlinePattern:(w,t)=>({u_world:new c.c3(w,t.u_world),u_image:new c.b_(w,t.u_image),u_texsize:new c.c3(w,t.u_texsize),u_pixel_coord_upper:new c.c3(w,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,t.u_pixel_coord_lower),u_scale:new c.c2(w,t.u_scale),u_fade:new c.bq(w,t.u_fade),u_fill_translate:new c.c3(w,t.u_fill_translate)}),circle:(w,t)=>({u_camera_to_center_distance:new c.bq(w,t.u_camera_to_center_distance),u_scale_with_map:new c.b_(w,t.u_scale_with_map),u_pitch_with_map:new c.b_(w,t.u_pitch_with_map),u_extrude_scale:new c.c3(w,t.u_extrude_scale),u_device_pixel_ratio:new c.bq(w,t.u_device_pixel_ratio),u_globe_extrude_scale:new c.bq(w,t.u_globe_extrude_scale),u_translate:new c.c3(w,t.u_translate)}),collisionBox:(w,t)=>({u_pixel_extrude_scale:new c.c3(w,t.u_pixel_extrude_scale)}),collisionCircle:(w,t)=>({u_viewport_size:new c.c3(w,t.u_viewport_size)}),debug:(w,t)=>({u_color:new c.b$(w,t.u_color),u_overlay:new c.b_(w,t.u_overlay),u_overlay_scale:new c.bq(w,t.u_overlay_scale)}),depth:gf,clippingMask:gf,heatmap:(w,t)=>({u_extrude_scale:new c.bq(w,t.u_extrude_scale),u_intensity:new c.bq(w,t.u_intensity),u_globe_extrude_scale:new c.bq(w,t.u_globe_extrude_scale)}),heatmapTexture:(w,t)=>({u_matrix:new c.c0(w,t.u_matrix),u_world:new c.c3(w,t.u_world),u_image:new c.b_(w,t.u_image),u_color_ramp:new c.b_(w,t.u_color_ramp),u_opacity:new c.bq(w,t.u_opacity)}),hillshade:(w,t)=>({u_image:new c.b_(w,t.u_image),u_latrange:new c.c3(w,t.u_latrange),u_exaggeration:new c.bq(w,t.u_exaggeration),u_altitudes:new c.c9(w,t.u_altitudes),u_azimuths:new c.c9(w,t.u_azimuths),u_accent:new c.b$(w,t.u_accent),u_method:new c.b_(w,t.u_method),u_shadows:new c.c8(w,t.u_shadows),u_highlights:new c.c8(w,t.u_highlights)}),hillshadePrepare:(w,t)=>({u_matrix:new c.c0(w,t.u_matrix),u_image:new c.b_(w,t.u_image),u_dimension:new c.c3(w,t.u_dimension),u_zoom:new c.bq(w,t.u_zoom),u_unpack:new c.c1(w,t.u_unpack)}),colorRelief:(w,t)=>({u_image:new c.b_(w,t.u_image),u_unpack:new c.c1(w,t.u_unpack),u_dimension:new c.c3(w,t.u_dimension),u_elevation_stops:new c.b_(w,t.u_elevation_stops),u_color_stops:new c.b_(w,t.u_color_stops),u_color_ramp_size:new c.b_(w,t.u_color_ramp_size),u_opacity:new c.bq(w,t.u_opacity)}),line:(w,t)=>({u_translation:new c.c3(w,t.u_translation),u_ratio:new c.bq(w,t.u_ratio),u_device_pixel_ratio:new c.bq(w,t.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,t.u_units_to_pixels)}),lineGradient:(w,t)=>({u_translation:new c.c3(w,t.u_translation),u_ratio:new c.bq(w,t.u_ratio),u_device_pixel_ratio:new c.bq(w,t.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,t.u_units_to_pixels),u_image:new c.b_(w,t.u_image),u_image_height:new c.bq(w,t.u_image_height)}),linePattern:(w,t)=>({u_translation:new c.c3(w,t.u_translation),u_texsize:new c.c3(w,t.u_texsize),u_ratio:new c.bq(w,t.u_ratio),u_device_pixel_ratio:new c.bq(w,t.u_device_pixel_ratio),u_image:new c.b_(w,t.u_image),u_units_to_pixels:new c.c3(w,t.u_units_to_pixels),u_scale:new c.c2(w,t.u_scale),u_fade:new c.bq(w,t.u_fade)}),lineSDF:(w,t)=>({u_translation:new c.c3(w,t.u_translation),u_ratio:new c.bq(w,t.u_ratio),u_device_pixel_ratio:new c.bq(w,t.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,t.u_units_to_pixels),u_image:new c.b_(w,t.u_image),u_mix:new c.bq(w,t.u_mix),u_tileratio:new c.bq(w,t.u_tileratio),u_crossfade_from:new c.bq(w,t.u_crossfade_from),u_crossfade_to:new c.bq(w,t.u_crossfade_to),u_lineatlas_width:new c.bq(w,t.u_lineatlas_width),u_lineatlas_height:new c.bq(w,t.u_lineatlas_height)}),lineGradientSDF:(w,t)=>({u_translation:new c.c3(w,t.u_translation),u_ratio:new c.bq(w,t.u_ratio),u_device_pixel_ratio:new c.bq(w,t.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,t.u_units_to_pixels),u_image:new c.b_(w,t.u_image),u_image_height:new c.bq(w,t.u_image_height),u_tileratio:new c.bq(w,t.u_tileratio),u_crossfade_from:new c.bq(w,t.u_crossfade_from),u_crossfade_to:new c.bq(w,t.u_crossfade_to),u_image_dash:new c.b_(w,t.u_image_dash),u_mix:new c.bq(w,t.u_mix),u_lineatlas_width:new c.bq(w,t.u_lineatlas_width),u_lineatlas_height:new c.bq(w,t.u_lineatlas_height)}),raster:(w,t)=>({u_tl_parent:new c.c3(w,t.u_tl_parent),u_scale_parent:new c.bq(w,t.u_scale_parent),u_buffer_scale:new c.bq(w,t.u_buffer_scale),u_fade_t:new c.bq(w,t.u_fade_t),u_opacity:new c.bq(w,t.u_opacity),u_image0:new c.b_(w,t.u_image0),u_image1:new c.b_(w,t.u_image1),u_brightness_low:new c.bq(w,t.u_brightness_low),u_brightness_high:new c.bq(w,t.u_brightness_high),u_saturation_factor:new c.bq(w,t.u_saturation_factor),u_contrast_factor:new c.bq(w,t.u_contrast_factor),u_spin_weights:new c.c2(w,t.u_spin_weights),u_coords_top:new c.c1(w,t.u_coords_top),u_coords_bottom:new c.c1(w,t.u_coords_bottom)}),symbolIcon:(w,t)=>({u_is_size_zoom_constant:new c.b_(w,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,t.u_is_size_feature_constant),u_size_t:new c.bq(w,t.u_size_t),u_size:new c.bq(w,t.u_size),u_camera_to_center_distance:new c.bq(w,t.u_camera_to_center_distance),u_pitch:new c.bq(w,t.u_pitch),u_rotate_symbol:new c.b_(w,t.u_rotate_symbol),u_aspect_ratio:new c.bq(w,t.u_aspect_ratio),u_fade_change:new c.bq(w,t.u_fade_change),u_label_plane_matrix:new c.c0(w,t.u_label_plane_matrix),u_coord_matrix:new c.c0(w,t.u_coord_matrix),u_is_text:new c.b_(w,t.u_is_text),u_pitch_with_map:new c.b_(w,t.u_pitch_with_map),u_is_along_line:new c.b_(w,t.u_is_along_line),u_is_variable_anchor:new c.b_(w,t.u_is_variable_anchor),u_texsize:new c.c3(w,t.u_texsize),u_texture:new c.b_(w,t.u_texture),u_translation:new c.c3(w,t.u_translation),u_pitched_scale:new c.bq(w,t.u_pitched_scale)}),symbolSDF:(w,t)=>({u_is_size_zoom_constant:new c.b_(w,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,t.u_is_size_feature_constant),u_size_t:new c.bq(w,t.u_size_t),u_size:new c.bq(w,t.u_size),u_camera_to_center_distance:new c.bq(w,t.u_camera_to_center_distance),u_pitch:new c.bq(w,t.u_pitch),u_rotate_symbol:new c.b_(w,t.u_rotate_symbol),u_aspect_ratio:new c.bq(w,t.u_aspect_ratio),u_fade_change:new c.bq(w,t.u_fade_change),u_label_plane_matrix:new c.c0(w,t.u_label_plane_matrix),u_coord_matrix:new c.c0(w,t.u_coord_matrix),u_is_text:new c.b_(w,t.u_is_text),u_pitch_with_map:new c.b_(w,t.u_pitch_with_map),u_is_along_line:new c.b_(w,t.u_is_along_line),u_is_variable_anchor:new c.b_(w,t.u_is_variable_anchor),u_texsize:new c.c3(w,t.u_texsize),u_texture:new c.b_(w,t.u_texture),u_gamma_scale:new c.bq(w,t.u_gamma_scale),u_device_pixel_ratio:new c.bq(w,t.u_device_pixel_ratio),u_is_halo:new c.b_(w,t.u_is_halo),u_translation:new c.c3(w,t.u_translation),u_pitched_scale:new c.bq(w,t.u_pitched_scale)}),symbolTextAndIcon:(w,t)=>({u_is_size_zoom_constant:new c.b_(w,t.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,t.u_is_size_feature_constant),u_size_t:new c.bq(w,t.u_size_t),u_size:new c.bq(w,t.u_size),u_camera_to_center_distance:new c.bq(w,t.u_camera_to_center_distance),u_pitch:new c.bq(w,t.u_pitch),u_rotate_symbol:new c.b_(w,t.u_rotate_symbol),u_aspect_ratio:new c.bq(w,t.u_aspect_ratio),u_fade_change:new c.bq(w,t.u_fade_change),u_label_plane_matrix:new c.c0(w,t.u_label_plane_matrix),u_coord_matrix:new c.c0(w,t.u_coord_matrix),u_is_text:new c.b_(w,t.u_is_text),u_pitch_with_map:new c.b_(w,t.u_pitch_with_map),u_is_along_line:new c.b_(w,t.u_is_along_line),u_is_variable_anchor:new c.b_(w,t.u_is_variable_anchor),u_texsize:new c.c3(w,t.u_texsize),u_texsize_icon:new c.c3(w,t.u_texsize_icon),u_texture:new c.b_(w,t.u_texture),u_texture_icon:new c.b_(w,t.u_texture_icon),u_gamma_scale:new c.bq(w,t.u_gamma_scale),u_device_pixel_ratio:new c.bq(w,t.u_device_pixel_ratio),u_is_halo:new c.b_(w,t.u_is_halo),u_translation:new c.c3(w,t.u_translation),u_pitched_scale:new c.bq(w,t.u_pitched_scale)}),background:(w,t)=>({u_opacity:new c.bq(w,t.u_opacity),u_color:new c.b$(w,t.u_color)}),backgroundPattern:(w,t)=>({u_opacity:new c.bq(w,t.u_opacity),u_image:new c.b_(w,t.u_image),u_pattern_tl_a:new c.c3(w,t.u_pattern_tl_a),u_pattern_br_a:new c.c3(w,t.u_pattern_br_a),u_pattern_tl_b:new c.c3(w,t.u_pattern_tl_b),u_pattern_br_b:new c.c3(w,t.u_pattern_br_b),u_texsize:new c.c3(w,t.u_texsize),u_mix:new c.bq(w,t.u_mix),u_pattern_size_a:new c.c3(w,t.u_pattern_size_a),u_pattern_size_b:new c.c3(w,t.u_pattern_size_b),u_scale_a:new c.bq(w,t.u_scale_a),u_scale_b:new c.bq(w,t.u_scale_b),u_pixel_coord_upper:new c.c3(w,t.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,t.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bq(w,t.u_tile_units_to_pixels)}),terrain:(w,t)=>({u_texture:new c.b_(w,t.u_texture),u_ele_delta:new c.bq(w,t.u_ele_delta),u_fog_matrix:new c.c0(w,t.u_fog_matrix),u_fog_color:new c.b$(w,t.u_fog_color),u_fog_ground_blend:new c.bq(w,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bq(w,t.u_fog_ground_blend_opacity),u_horizon_color:new c.b$(w,t.u_horizon_color),u_horizon_fog_blend:new c.bq(w,t.u_horizon_fog_blend),u_is_globe_mode:new c.bq(w,t.u_is_globe_mode)}),terrainDepth:(w,t)=>({u_ele_delta:new c.bq(w,t.u_ele_delta)}),terrainCoords:(w,t)=>({u_texture:new c.b_(w,t.u_texture),u_terrain_coords_id:new c.bq(w,t.u_terrain_coords_id),u_ele_delta:new c.bq(w,t.u_ele_delta)}),projectionErrorMeasurement:(w,t)=>({u_input:new c.bq(w,t.u_input),u_output_expected:new c.bq(w,t.u_output_expected)}),atmosphere:(w,t)=>({u_sun_pos:new c.c2(w,t.u_sun_pos),u_atmosphere_blend:new c.bq(w,t.u_atmosphere_blend),u_globe_position:new c.c2(w,t.u_globe_position),u_globe_radius:new c.bq(w,t.u_globe_radius),u_inv_proj_matrix:new c.c0(w,t.u_inv_proj_matrix)}),sky:(w,t)=>({u_sky_color:new c.b$(w,t.u_sky_color),u_horizon_color:new c.b$(w,t.u_horizon_color),u_horizon:new c.c3(w,t.u_horizon),u_horizon_normal:new c.c3(w,t.u_horizon_normal),u_sky_horizon_blend:new c.bq(w,t.u_sky_horizon_blend),u_sky_blend:new c.bq(w,t.u_sky_blend)})};class zc{constructor(t,l,p){this.context=t;const v=t.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Fc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Op{constructor(t,l,p,v){this.length=l.length,this.attributes=p,this.itemSize=l.bytesPerElement,this.dynamicDraw=v,this.context=t;const S=t.gl;this.buffer=S.createBuffer(),t.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,l){for(let p=0;p<this.attributes.length;p++){const v=l.attributes[this.attributes[p].name];v!==void 0&&t.enableVertexAttribArray(v)}}setVertexAttribPointers(t,l,p){for(let v=0;v<this.attributes.length;v++){const S=this.attributes[v],M=l.attributes[S.name];M!==void 0&&t.vertexAttribPointer(M,S.components,t[Fc[S.type]],!1,this.itemSize,S.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Yn{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Io extends Yn{getDefault(){return c.bp.transparent}set(t){const l=this.current;(t.r!==l.r||t.g!==l.g||t.b!==l.b||t.a!==l.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Kh extends Yn{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Jh extends Yn{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class yf extends Yn{getDefault(){return[!0,!0,!0,!0]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||t[3]!==l[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class jc extends Yn{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class ed extends Yn{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Fu extends Yn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const l=this.current;(t.func!==l.func||t.ref!==l.ref||t.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Xa extends Yn{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Lp extends Yn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=t,this.dirty=!1}}class _f extends Yn{getDefault(){return[0,1]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Qa extends Yn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ro extends Yn{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Ea extends Yn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.BLEND):l.disable(l.BLEND),this.current=t,this.dirty=!1}}class hl extends Yn{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Bc extends Yn{getDefault(){return c.bp.transparent}set(t){const l=this.current;(t.r!==l.r||t.g!==l.g||t.b!==l.b||t.a!==l.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Vc extends Yn{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class td extends Yn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=t,this.dirty=!1}}class Kl extends Yn{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class bs extends Yn{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Np extends Yn{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class ju extends Yn{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class mn extends Yn{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||t[3]!==l[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class vf extends Yn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Ka extends Yn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class bf extends Yn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Ja extends Yn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Tg extends Yn{getDefault(){return null}set(t){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class xf extends Yn{getDefault(){return null}set(t){var l;if(t===this.current&&!this.dirty)return;const p=this.gl;ys(p)?p.bindVertexArray(t):(l=p.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Jl extends Yn{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Pp extends Yn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class wf extends Yn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class ec extends Yn{constructor(t,l){super(t),this.context=t,this.parent=l}getDefault(){return null}}class Bu extends ec{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Aa extends ec{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class tc extends ec{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const nc="Framebuffer is not complete";class Uc{constructor(t,l,p,v,S){this.context=t,this.width=l,this.height=p;const M=t.gl,I=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new Bu(t,I),v)this.depthAttachment=S?new tc(t,I):new Aa(t,I);else if(S)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(nc)}destroy(){const t=this.context.gl,l=this.colorAttachment.get();if(l&&t.deleteTexture(l),this.depthAttachment){const p=this.depthAttachment.get();p&&t.deleteRenderbuffer(p)}t.deleteFramebuffer(this.framebuffer)}}class ic{constructor(t){var l,p;if(this.gl=t,this.clearColor=new Io(this),this.clearDepth=new Kh(this),this.clearStencil=new Jh(this),this.colorMask=new yf(this),this.depthMask=new jc(this),this.stencilMask=new ed(this),this.stencilFunc=new Fu(this),this.stencilOp=new Xa(this),this.stencilTest=new Lp(this),this.depthRange=new _f(this),this.depthTest=new Qa(this),this.depthFunc=new Ro(this),this.blend=new Ea(this),this.blendFunc=new hl(this),this.blendColor=new Bc(this),this.blendEquation=new Vc(this),this.cullFace=new td(this),this.cullFaceSide=new Kl(this),this.frontFace=new bs(this),this.program=new Np(this),this.activeTexture=new ju(this),this.viewport=new mn(this),this.bindFramebuffer=new vf(this),this.bindRenderbuffer=new Ka(this),this.bindTexture=new bf(this),this.bindVertexBuffer=new Ja(this),this.bindElementBuffer=new Tg(this),this.bindVertexArray=new xf(this),this.pixelStoreUnpack=new Jl(this),this.pixelStoreUnpackPremultiplyAlpha=new Pp(this),this.pixelStoreUnpackFlipY=new wf(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),ys(t)){this.HALF_FLOAT=t.HALF_FLOAT;const v=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=t.RGBA16F)!==null&&l!==void 0?l:v?.RGBA16F_EXT,this.RGB16F=(p=t.RGB16F)!==null&&p!==void 0?p:v?.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const v=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=v?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,l){return new zc(this,t,l)}createVertexBuffer(t,l,p){return new Op(this,t,l,p)}createRenderbuffer(t,l,p){const v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,t,l,p),this.bindRenderbuffer.set(null),S}createFramebuffer(t,l,p,v){return new Uc(this,t,l,p,v)}clear({color:t,depth:l,stencil:p}){const v=this.gl;let S=0;t&&(S|=v.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(S|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),p!==void 0&&(S|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),v.clear(S)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){c.bR(t.blendFunction,oi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return ys(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var l;return ys(this.gl)?this.gl.deleteVertexArray(t):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let Or;function Vr(w,t,l,p,v){const S=w.context,M=w.transform,I=S.gl,L=w.useProgram("collisionBox"),F=[];let B=0,Z=0;for(let me=0;me<p.length;me++){const _e=p[me],Ae=t.getTile(_e).getBucket(l);if(!Ae)continue;const ye=v?Ae.textCollisionBox:Ae.iconCollisionBox,Se=Ae.collisionCircleArray;Se.length>0&&(F.push({circleArray:Se,circleOffset:Z,coord:_e}),B+=Se.length/4,Z=B),ye&&L.draw(S,I.LINES,fn.disabled,Fn.disabled,w.colorModeForRenderPass(),Mn.disabled,Wl(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(_e),M.getProjectionData({overscaledTileID:_e,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),l.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,null,w.transform.zoom,null,null,ye.collisionVertexBuffer)}if(!v||!F.length)return;const $=w.useProgram("collisionCircle"),K=new c.ca;K.resize(4*B),K._trim();let se=0;for(const me of F)for(let _e=0;_e<me.circleArray.length/4;_e++){const Ae=4*_e,ye=me.circleArray[Ae+0],Se=me.circleArray[Ae+1],Ie=me.circleArray[Ae+2],be=me.circleArray[Ae+3];K.emplace(se++,ye,Se,Ie,be,0),K.emplace(se++,ye,Se,Ie,be,1),K.emplace(se++,ye,Se,Ie,be,2),K.emplace(se++,ye,Se,Ie,be,3)}(!Or||Or.length<2*B)&&(Or=(function(me){const _e=2*me,Ae=new c.cc;Ae.resize(_e),Ae._trim();for(let ye=0;ye<_e;ye++){const Se=6*ye;Ae.uint16[Se+0]=4*ye+0,Ae.uint16[Se+1]=4*ye+1,Ae.uint16[Se+2]=4*ye+2,Ae.uint16[Se+3]=4*ye+2,Ae.uint16[Se+4]=4*ye+3,Ae.uint16[Se+5]=4*ye+0}return Ae})(B));const pe=S.createIndexBuffer(Or,!0),ge=S.createVertexBuffer(K,c.cb.members,!0);for(const me of F){const _e=Ip(w.transform);$.draw(S,I.TRIANGLES,fn.disabled,Fn.disabled,w.colorModeForRenderPass(),Mn.disabled,_e,w.style.map.terrain&&w.style.map.terrain.getTerrainData(me.coord),null,l.id,ge,pe,c.aX.simpleSegment(0,2*me.circleOffset,me.circleArray.length,me.circleArray.length/2),null,w.transform.zoom,null,null,null)}ge.destroy(),pe.destroy()}const ko=c.ar(new Float32Array(16));function Oo(w,t,l,p,v,S){const{horizontalAlign:M,verticalAlign:I}=c.aS(w);return new c.P((-(M-.5)*t/v+p[0])*S,(-(I-.5)*l/v+p[1])*S)}function Ra(w,t,l,p,v,S){const M=t.tileAnchorPoint.add(new c.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let I=p.mult(S);l||(I=I.rotate(-v));const L=M.add(I);return hn(L.x,L.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(l){const I=zn(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(w),L=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return w.add(p.rotate(L))}return w.add(p)}function dl(w,t,l,p,v,S,M,I,L,F,B,Z){const $=w.text.placedSymbolArray,K=w.text.dynamicLayoutVertexArray,se=w.icon.dynamicLayoutVertexArray,pe={};K.clear();for(let ge=0;ge<$.length;ge++){const me=$.get(ge),_e=me.hidden||!me.crossTileID||w.allowVerticalPlacement&&!me.placedOrientation?null:p[me.crossTileID];if(_e){const Ae=new c.P(me.anchorX,me.anchorY),ye={getElevation:Z,width:v.width,height:v.height,pitchedLabelPlaneMatrix:S,pitchWithMap:l,transform:v,tileAnchorPoint:Ae,translation:F,unwrappedTileID:B},Se=l?Au(Ae.x,Ae.y,ye):zn(Ae.x,Ae.y,ye),Ie=Mc(v.cameraToCenterDistance,Se.signedDistanceFromCamera);let be=c.aA(w.textSizeData,I,me)*Ie/c.aM;l&&(be*=w.tilePixelRatio/M);const{width:je,height:Qe,anchor:Ze,textOffset:We,textBoxScale:Xe}=_e,Et=Oo(Ze,je,Qe,We,Xe,be),At=v.getPitchedTextCorrection(Ae.x+F[0],Ae.y+F[1],B),pt=Ra(Se.point,ye,t,Et,-v.bearingInRadians,At),It=w.allowVerticalPlacement&&me.placedOrientation===c.az.vertical?Math.PI/2:0;for(let cn=0;cn<me.numGlyphs;cn++)c.aG(K,pt,It);L&&me.associatedIconIndex>=0&&(pe[me.associatedIconIndex]={shiftedAnchor:pt,angle:It})}else Mo(me.numGlyphs,K)}if(L){se.clear();const ge=w.icon.placedSymbolArray;for(let me=0;me<ge.length;me++){const _e=ge.get(me);if(_e.hidden)Mo(_e.numGlyphs,se);else{const Ae=pe[me];if(Ae)for(let ye=0;ye<_e.numGlyphs;ye++)c.aG(se,Ae.shiftedAnchor,Ae.angle);else Mo(_e.numGlyphs,se)}}w.icon.dynamicLayoutVertexBuffer.updateData(se)}w.text.dynamicLayoutVertexBuffer.updateData(K)}function zp(w,t,l){return l.iconsInText&&t?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Gc(w,t,l,p,v,S,M,I,L,F,B,Z,$){const K=w.context,se=K.gl,pe=w.transform,ge=I==="map",me=L==="map",_e=I!=="viewport"&&l.layout.get("symbol-placement")!=="point",Ae=ge&&!me&&!_e,ye=!l.layout.get("symbol-sort-key").isConstant();let Se=!1;const Ie=w.getDepthModeForSublayer(0,fn.ReadOnly),be=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),je=[],Qe=pe.getCircleRadiusCorrection();for(const Ze of p){const We=t.getTile(Ze),Xe=We.getBucket(l);if(!Xe)continue;const Et=v?Xe.text:Xe.icon;if(!Et||!Et.segments.get().length||!Et.hasVisibleVertices)continue;const At=Et.programConfigurations.get(l.id),pt=v||Xe.sdfIcons,It=v?Xe.textSizeData:Xe.iconSizeData,cn=me||pe.pitch!==0,Jn=w.useProgram(zp(pt,v,Xe),At),Ti=c.ay(It,pe.zoom),yi=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ze);let Oi,li,Wi,Li,Gr=[0,0],nr=null;if(v)li=We.glyphAtlasTexture,Wi=se.LINEAR,Oi=We.glyphAtlasTexture.size,Xe.iconsInText&&(Gr=We.imageAtlasTexture.size,nr=We.imageAtlasTexture,Li=cn||w.options.rotating||w.options.zooming||It.kind==="composite"||It.kind==="camera"?se.LINEAR:se.NEAREST);else{const ii=l.layout.get("icon-size").constantOr(0)!==1||Xe.iconsNeedLinear;li=We.imageAtlasTexture,Wi=pt||w.options.rotating||w.options.zooming||ii||cn?se.LINEAR:se.NEAREST,Oi=We.imageAtlasTexture.size}const ir=c.aN(We,1,w.transform.zoom),$r=Ya(ge,w.transform,ir),qo=c.N();c.aB(qo,$r);const Yo=af(me,ge,w.transform,ir),Xs=c.aO(pe,We,S,M),Na=pe.getProjectionData({overscaledTileID:Ze,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Kc=be&&Xe.hasTextData(),Xu=l.layout.get("icon-text-fit")!=="none"&&Kc&&Xe.hasIconData();if(_e){const ii=w.style.map.terrain?(_r,Ar)=>w.style.map.terrain.getElevation(Ze,_r,Ar):null,_i=l.layout.get("text-rotation-alignment")==="map";ll(Xe,w,v,$r,qo,me,F,_i,Ze.toUnwrapped(),pe.width,pe.height,Xs,ii)}const Qs=v&&be||Xu,Pa=_e||Qs?ko:me?$r:w.transform.clipSpaceToPixelsMatrix,rs=pt&&l.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let As;As=pt?Xe.iconsInText?vs(It.kind,Ti,Ae,me,_e,Qs,w,Pa,Yo,Xs,Oi,Gr,Qe):mf(It.kind,Ti,Ae,me,_e,Qs,w,Pa,Yo,Xs,v,Oi,0,Qe):Wh(It.kind,Ti,Ae,me,_e,Qs,w,Pa,Yo,Xs,v,Oi,Qe);const Ms={program:Jn,buffers:Et,uniformValues:As,projectionData:Na,atlasTexture:li,atlasTextureIcon:nr,atlasInterpolation:Wi,atlasInterpolationIcon:Li,isSDF:pt,hasHalo:rs};if(ye&&Xe.canOverlap){Se=!0;const ii=Et.segments.get();for(const _i of ii)je.push({segments:new c.aX([_i]),sortKey:_i.sortKey,state:Ms,terrainData:yi})}else je.push({segments:Et.segments,sortKey:0,state:Ms,terrainData:yi})}Se&&je.sort(((Ze,We)=>Ze.sortKey-We.sortKey));for(const Ze of je){const We=Ze.state;if(K.activeTexture.set(se.TEXTURE0),We.atlasTexture.bind(We.atlasInterpolation,se.CLAMP_TO_EDGE),We.atlasTextureIcon&&(K.activeTexture.set(se.TEXTURE1),We.atlasTextureIcon&&We.atlasTextureIcon.bind(We.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),We.isSDF){const Xe=We.uniformValues;We.hasHalo&&(Xe.u_is_halo=1,Vu(We.buffers,Ze.segments,l,w,We.program,Ie,B,Z,Xe,We.projectionData,Ze.terrainData)),Xe.u_is_halo=0}Vu(We.buffers,Ze.segments,l,w,We.program,Ie,B,Z,We.uniformValues,We.projectionData,Ze.terrainData)}}function Vu(w,t,l,p,v,S,M,I,L,F,B){const Z=p.context;v.draw(Z,Z.gl.TRIANGLES,S,M,I,Mn.backCCW,L,B,F,l.id,w.layoutVertexBuffer,w.indexBuffer,t,l.paint,p.transform.zoom,w.programConfigurations.get(l.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Fp(w,t,l,p,v){const S=w.context,M=S.gl,I=Fn.disabled,L=new oi([M.ONE,M.ONE],c.bp.transparent,[!0,!0,!0,!0]),F=t.getBucket(l);if(!F)return;const B=p.key;let Z=l.heatmapFbos.get(B);Z||(Z=gi(S,t.tileSize,t.tileSize),l.heatmapFbos.set(B,Z)),S.bindFramebuffer.set(Z.framebuffer),S.viewport.set([0,0,t.tileSize,t.tileSize]),S.clear({color:c.bp.transparent});const $=F.programConfigurations.get(l.id),K=w.useProgram("heatmap",$,!v),se=w.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),pe=w.style.map.terrain.getTerrainData(p);K.draw(S,M.TRIANGLES,fn.disabled,I,L,Mn.disabled,Xl(t,w.transform.zoom,l.paint.get("heatmap-intensity"),1),pe,se,l.id,F.layoutVertexBuffer,F.indexBuffer,F.segments,l.paint,w.transform.zoom,$)}function Ur(w,t,l,p,v){const S=w.context,M=S.gl,I=w.transform;S.setColorMode(w.colorModeForRenderPass());const L=Ln(S,t),F=l.key,B=t.heatmapFbos.get(F);if(!B)return;S.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,B.colorAttachment.get()),S.activeTexture.set(M.TEXTURE1),L.bind(M.LINEAR,M.CLAMP_TO_EDGE);const Z=I.getProjectionData({overscaledTileID:l,applyTerrainMatrix:v,applyGlobeMatrix:!p});w.useProgram("heatmapTexture").draw(S,M.TRIANGLES,fn.disabled,Fn.disabled,w.colorModeForRenderPass(),Mn.disabled,Rp(w,t,0,1),null,Z,t.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,t.paint,I.zoom),B.destroy(),t.heatmapFbos.delete(F)}function gi(w,t,l){var p,v;const S=w.gl,M=S.createTexture();S.bindTexture(S.TEXTURE_2D,M),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR);const I=(p=w.HALF_FLOAT)!==null&&p!==void 0?p:S.UNSIGNED_BYTE,L=(v=w.RGBA16F)!==null&&v!==void 0?v:S.RGBA;S.texImage2D(S.TEXTURE_2D,0,L,t,l,0,S.RGBA,I,null);const F=w.createFramebuffer(t,l,!1,!1);return F.colorAttachment.set(M),F}function Ln(w,t){return t.colorRampTexture||(t.colorRampTexture=new c.T(w,t.colorRamp,w.gl.RGBA)),t.colorRampTexture}function fl(w,t,l,p,v,S,M,I){let L=256;if(v.stepInterpolant){const F=t.getSource().maxzoom,B=M.canonical.z===F?Math.ceil(1<<w.transform.maxZoom-M.canonical.z):1;L=c.an(c.ce(S.maxLineLength/c.a5*1024*B),256,l.maxTextureSize)}return I.gradient=c.cf({expression:v.gradientExpression(),evaluationKey:"lineProgress",resolution:L,image:I.gradient||void 0,clips:S.lineClipsArray}),I.texture?I.texture.update(I.gradient):I.texture=new c.T(l,I.gradient,p.RGBA),I.version=v.gradientVersion,I.texture}function es(w,t,l,p,v){w.activeTexture.set(t.TEXTURE0),l.imageAtlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE),p.updatePaintBuffers(v)}function Yi(w,t,l,p,v,S){(v||w.lineAtlas.dirty)&&(t.activeTexture.set(l.TEXTURE0),w.lineAtlas.bind(t)),p.updatePaintBuffers(S)}function ka(w,t,l,p,v,S,M){const I=S.gradients[v.id];let L=I.texture;v.gradientVersion!==I.version&&(L=fl(w,t,l,p,v,S,M,I)),l.activeTexture.set(p.TEXTURE0),L.bind(v.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE)}function Oa(w,t,l,p,v,S,M,I,L){const F=S.gradients[v.id];let B=F.texture;v.gradientVersion!==F.version&&(B=fl(w,t,l,p,v,S,M,F)),l.activeTexture.set(p.TEXTURE0),B.bind(v.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE),l.activeTexture.set(p.TEXTURE1),w.lineAtlas.bind(l),I.updatePaintBuffers(L)}function nd(w,t,l,p,v){if(!l||!p||!p.imageAtlas)return;const S=p.imageAtlas.patternPositions;let M=S[l.to.toString()],I=S[l.from.toString()];if(!M&&I&&(M=I),!I&&M&&(I=M),!M||!I){const L=v.getPaintProperty(t);M=S[L],I=S[L]}M&&I&&w.setConstantPatternPositions(M,I)}function Lo(w,t,l,p,v,S,M,I){const L=w.context.gl,F="fill-pattern",B=l.paint.get(F),Z=B&&B.constantOr(1),$=l.getCrossfadeParameters();let K,se,pe,ge,me;const _e=w.transform,Ae=l.paint.get("fill-translate"),ye=l.paint.get("fill-translate-anchor");M?(se=Z&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=L.LINES):(se=Z?"fillPattern":"fill",K=L.TRIANGLES);const Se=B.constantOr(null);for(const Ie of p){const be=t.getTile(Ie);if(Z&&!be.patternsLoaded())continue;const je=be.getBucket(l);if(!je)continue;const Qe=je.programConfigurations.get(l.id),Ze=w.useProgram(se,Qe),We=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ie);Z&&(w.context.activeTexture.set(L.TEXTURE0),be.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Qe.updatePaintBuffers($)),nd(Qe,F,Se,be,l);const Xe=_e.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),Et=c.aO(_e,be,Ae,ye);if(M){ge=je.indexBuffer2,me=je.segments2;const pt=[L.drawingBufferWidth,L.drawingBufferHeight];pe=se==="fillOutlinePattern"&&Z?_g(w,$,be,pt,Et):zu(pt,Et)}else ge=je.indexBuffer,me=je.segments,pe=Z?Pc(w,$,be,Et):{u_fill_translate:Et};const At=w.stencilModeForClipping(Ie);Ze.draw(w.context,K,v,At,S,Mn.backCCW,pe,We,Xe,l.id,je.layoutVertexBuffer,ge,me,l.paint,w.transform.zoom,Qe)}}function No(w,t,l,p,v,S,M,I){const L=w.context,F=L.gl,B="fill-extrusion-pattern",Z=l.paint.get(B),$=Z.constantOr(1),K=l.getCrossfadeParameters(),se=l.paint.get("fill-extrusion-opacity"),pe=Z.constantOr(null),ge=w.transform;for(const me of p){const _e=t.getTile(me),Ae=_e.getBucket(l);if(!Ae)continue;const ye=w.style.map.terrain&&w.style.map.terrain.getTerrainData(me),Se=Ae.programConfigurations.get(l.id),Ie=w.useProgram($?"fillExtrusionPattern":"fillExtrusion",Se);$&&(w.context.activeTexture.set(F.TEXTURE0),_e.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),Se.updatePaintBuffers(K));const be=ge.getProjectionData({overscaledTileID:me,applyGlobeMatrix:!I,applyTerrainMatrix:!0});nd(Se,B,pe,_e,l);const je=c.aO(ge,_e,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Qe=l.paint.get("fill-extrusion-vertical-gradient"),Ze=$?df(w,Qe,se,je,me,K,_e):hf(w,Qe,se,je);Ie.draw(L,L.gl.TRIANGLES,v,S,M,Mn.backCCW,Ze,ye,be,l.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,l.paint,w.transform.zoom,Se,w.style.map.terrain&&Ae.centroidVertexBuffer)}}function Po(w,t,l,p,v,S,M,I,L){var F;const B=w.style.projection,Z=w.context,$=w.transform,K=Z.gl,se=[`#define NUM_ILLUMINATION_SOURCES ${l.paint.get("hillshade-highlight-color").values.length}`],pe=w.useProgram("hillshade",null,!1,se),ge=!w.options.moving;for(const me of p){const _e=t.getTile(me),Ae=_e.fbo;if(!Ae)continue;const ye=B.getMeshFromTileID(Z,me.canonical,I,!0,"raster"),Se=(F=w.style.map.terrain)===null||F===void 0?void 0:F.getTerrainData(me);Z.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,Ae.colorAttachment.get());const Ie=$.getProjectionData({overscaledTileID:me,aligned:ge,applyGlobeMatrix:!L,applyTerrainMatrix:!0});pe.draw(Z,K.TRIANGLES,S,v[me.overscaledZ],M,Mn.backCCW,qh(w,_e,l),Se,Ie,l.id,ye.vertexBuffer,ye.indexBuffer,ye.segments)}}function pl(w,t,l,p,v,S,M,I,L){var F;const B=w.style.projection,Z=w.context,$=w.transform,K=Z.gl,se=w.useProgram("colorRelief"),pe=!w.options.moving;let ge=!0,me=0;for(const _e of p){const Ae=t.getTile(_e),ye=Ae.dem;if(ge){const Ze=K.getParameter(K.MAX_TEXTURE_SIZE),{elevationTexture:We,colorTexture:Xe}=l.getColorRampTextures(Z,Ze,ye.getUnpackVector());Z.activeTexture.set(K.TEXTURE1),We.bind(K.NEAREST,K.CLAMP_TO_EDGE),Z.activeTexture.set(K.TEXTURE4),Xe.bind(K.LINEAR,K.CLAMP_TO_EDGE),ge=!1,me=We.size[0]}if(!ye||!ye.data)continue;const Se=ye.stride,Ie=ye.getPixels();if(Z.activeTexture.set(K.TEXTURE0),Z.pixelStoreUnpackPremultiplyAlpha.set(!1),Ae.demTexture=Ae.demTexture||w.getTileTexture(Se),Ae.demTexture){const Ze=Ae.demTexture;Ze.update(Ie,{premultiply:!1}),Ze.bind(K.LINEAR,K.CLAMP_TO_EDGE)}else Ae.demTexture=new c.T(Z,Ie,K.RGBA,{premultiply:!1}),Ae.demTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const be=B.getMeshFromTileID(Z,_e.canonical,I,!0,"raster"),je=(F=w.style.map.terrain)===null||F===void 0?void 0:F.getTerrainData(_e),Qe=$.getProjectionData({overscaledTileID:_e,aligned:pe,applyGlobeMatrix:!L,applyTerrainMatrix:!0});se.draw(Z,K.TRIANGLES,S,v[_e.overscaledZ],M,Mn.backCCW,bg(l,Ae.dem,me),je,Qe,l.id,be.vertexBuffer,be.indexBuffer,be.segments)}}const ml=[new c.P(0,0),new c.P(c.a5,0),new c.P(c.a5,c.a5),new c.P(0,c.a5)];function xs(w,t,l,p,v,S,M,I,L=!1,F=!1){const B=p[p.length-1].overscaledZ,Z=w.context,$=Z.gl,K=w.useProgram("raster"),se=w.transform,pe=w.style.projection,ge=w.colorModeForRenderPass(),me=!w.options.moving,_e=l.paint.get("raster-opacity"),Ae=l.paint.get("raster-resampling"),ye=l.paint.get("raster-fade-duration"),Se=!!w.style.map.terrain;for(const Ie of p){const be=w.getDepthModeForSublayer(Ie.overscaledZ-B,_e===1?fn.ReadWrite:fn.ReadOnly,$.LESS),je=t.getTile(Ie),Qe=Ae==="nearest"?$.NEAREST:$.LINEAR;Z.activeTexture.set($.TEXTURE0),je.texture.bind(Qe,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Z.activeTexture.set($.TEXTURE1);const{parentTile:Ze,parentScaleBy:We,parentTopLeft:Xe,fadeValues:Et}=zo(je,t,ye,Se);je.fadeOpacity=Et.tileOpacity,Ze?(Ze.fadeOpacity=Et.parentTileOpacity,Ze.texture.bind(Qe,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST)):je.texture.bind(Qe,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),je.texture.useMipmap&&Z.extTextureFilterAnisotropic&&w.transform.pitch>20&&$.texParameterf($.TEXTURE_2D,Z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Z.extTextureFilterAnisotropicMax);const At=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ie),pt=se.getProjectionData({overscaledTileID:Ie,aligned:me,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),It=ff(Xe,We,Et.fadeMix,l,I),cn=pe.getMeshFromTileID(Z,Ie.canonical,S,M,"raster");K.draw(Z,$.TRIANGLES,be,v?v[Ie.overscaledZ]:Fn.disabled,ge,L?Mn.frontCCW:Mn.backCCW,It,At,pt,l.id,cn.vertexBuffer,cn.indexBuffer,cn.segments)}}function zo(w,t,l,p){const v={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(l===0||p)return v;if(w.fadingParentID){const S=t.getLoadedTile(w.fadingParentID);if(!S)return v;const M=Math.pow(2,S.tileID.overscaledZ-w.tileID.overscaledZ),I=[w.tileID.canonical.x*M%1,w.tileID.canonical.y*M%1],L=(function(F,B,Z){const $=ie(),K=($-B.timeAdded)/Z,se=F.fadingDirection===He.Incoming,pe=c.an(($-F.timeAdded)/Z,0,1),ge=c.an(1-K,0,1),me=se?pe:ge;return{tileOpacity:me,parentTileOpacity:se?ge:pe,fadeMix:{opacity:1,mix:1-me}}})(w,S,l);return{parentTile:S,parentScaleBy:M,parentTopLeft:I,fadeValues:L}}if(w.selfFading){const S=(function(M,I){const L=(ie()-M.timeAdded)/I,F=c.an(L,0,1);return{tileOpacity:F,fadeMix:{opacity:F,mix:0}}})(w,l);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:S}}return v}const gl=new c.bp(1,0,0,1),Fo=new c.bp(0,1,0,1),Tf=new c.bp(0,0,1,1),Sf=new c.bp(1,0,1,1),ts=new c.bp(0,1,1,1);function Uu(w,t,l,p){yr(w,0,t+l/2,w.transform.width,l,p)}function yl(w,t,l,p){yr(w,t-l/2,0,l,w.transform.height,p)}function yr(w,t,l,p,v,S){const M=w.context,I=M.gl;I.enable(I.SCISSOR_TEST),I.scissor(t*w.pixelRatio,l*w.pixelRatio,p*w.pixelRatio,v*w.pixelRatio),M.clear({color:S}),I.disable(I.SCISSOR_TEST)}function id(w,t,l){const p=w.context,v=p.gl,S=w.useProgram("debug"),M=fn.disabled,I=Fn.disabled,L=w.colorModeForRenderPass(),F="$debug",B=w.style.map.terrain&&w.style.map.terrain.getTerrainData(l);p.activeTexture.set(v.TEXTURE0);const Z=t.getTileByID(l.key).latestRawTileData,$=Math.floor((Z&&Z.byteLength||0)/1024),K=t.getTile(l).tileSize,se=512/Math.min(K,512)*(l.overscaledZ/w.transform.zoom)*.5;let pe=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(pe+=` => ${l.overscaledZ}`),(function(me,_e){me.initDebugOverlayCanvas();const Ae=me.debugOverlayCanvas,ye=me.context.gl,Se=me.debugOverlayCanvas.getContext("2d");Se.clearRect(0,0,Ae.width,Ae.height),Se.shadowColor="white",Se.shadowBlur=2,Se.lineWidth=1.5,Se.strokeStyle="white",Se.textBaseline="top",Se.font="bold 36px Open Sans, sans-serif",Se.fillText(_e,5,5),Se.strokeText(_e,5,5),me.debugOverlayTexture.update(Ae),me.debugOverlayTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)})(w,`${pe} ${$}kB`);const ge=w.transform.getProjectionData({overscaledTileID:l,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(p,v.TRIANGLES,M,I,oi.alphaBlended,Mn.disabled,Zh(c.bp.transparent,se),null,ge,F,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),S.draw(p,v.LINE_STRIP,M,I,L,Mn.disabled,Zh(c.bp.red),B,ge,F,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Ef(w,t,l,p){const{isRenderingGlobe:v}=p,S=w.context,M=S.gl,I=w.transform,L=w.colorModeForRenderPass(),F=w.getDepthModeFor3D(),B=w.useProgram("terrain");S.bindFramebuffer.set(null),S.viewport.set([0,0,w.width,w.height]);for(const Z of l){const $=t.getTerrainMesh(Z.tileID),K=w.renderToTexture.getTexture(Z),se=t.getTerrainData(Z.tileID);S.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,K.texture);const pe=t.getMeshFrameDelta(I.zoom),ge=I.calculateFogMatrix(Z.tileID.toUnwrapped()),me=mg(pe,ge,w.style.sky,I.pitch,v),_e=I.getProjectionData({overscaledTileID:Z.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});B.draw(S,M.TRIANGLES,F,Fn.disabled,L,Mn.backCCW,me,se,_e,"terrain",$.vertexBuffer,$.indexBuffer,$.segments)}}function jp(w,t){if(!t.mesh){const l=new c.aW;l.emplaceBack(-1,-1),l.emplaceBack(1,-1),l.emplaceBack(1,1),l.emplaceBack(-1,1);const p=new c.aY;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),t.mesh=new mi(w.createVertexBuffer(l,gs.members),w.createIndexBuffer(p),c.aX.simpleSegment(0,0,l.length,p.length))}return t.mesh}class Sg{constructor(t,l){this.context=new ic(t),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=wi.maxOverzooming+wi.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rr}resize(t,l,p){if(this.width=Math.floor(t*p),this.height=Math.floor(l*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const t=this.context,l=new c.aW;l.emplaceBack(0,0),l.emplaceBack(c.a5,0),l.emplaceBack(0,c.a5),l.emplaceBack(c.a5,c.a5),this.tileExtentBuffer=t.createVertexBuffer(l,gs.members),this.tileExtentSegments=c.aX.simpleSegment(0,0,4,2);const p=new c.aW;p.emplaceBack(0,0),p.emplaceBack(c.a5,0),p.emplaceBack(0,c.a5),p.emplaceBack(c.a5,c.a5),this.debugBuffer=t.createVertexBuffer(p,gs.members),this.debugSegments=c.aX.simpleSegment(0,0,4,5);const v=new c.ch;v.emplaceBack(0,0,0,0),v.emplaceBack(c.a5,0,c.a5,0),v.emplaceBack(0,c.a5,0,c.a5),v.emplaceBack(c.a5,c.a5,c.a5,c.a5),this.rasterBoundsBuffer=t.createVertexBuffer(v,pg.members),this.rasterBoundsSegments=c.aX.simpleSegment(0,0,4,2);const S=new c.aW;S.emplaceBack(0,0),S.emplaceBack(c.a5,0),S.emplaceBack(0,c.a5),S.emplaceBack(c.a5,c.a5),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(S,gs.members),this.rasterBoundsSegmentsPosOnly=c.aX.simpleSegment(0,0,4,5);const M=new c.aW;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(M,gs.members),this.viewportSegments=c.aX.simpleSegment(0,0,4,2);const I=new c.ci;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(I);const L=new c.aY;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(L);const F=this.context.gl;this.stencilClearMode=new Fn({func:F.ALWAYS,mask:0},0,255,F.ZERO,F.ZERO,F.ZERO),this.tileExtentMesh=new mi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,l=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=c.N();c.c7(p,0,this.width,this.height,0,0,1),c.Q(p,p,[l.drawingBufferWidth,l.drawingBufferHeight,0]);const v={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(t,l.TRIANGLES,fn.disabled,this.stencilClearMode,oi.disabled,Mn.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,l,p){if(this.currentStencilSource===t.source||!t.isTileClipped()||!l||!l.length)return;this.currentStencilSource=t.source,this.nextStencilID+l.length>256&&this.clearStencil();const v=this.context;v.setColorMode(oi.disabled),v.setDepthMode(fn.disabled);const S={};for(const M of l)S[M.key]=this.nextStencilID++;this._renderTileMasks(S,l,p,!0),this._renderTileMasks(S,l,p,!1),this._tileClippingMaskIDs=S}_renderTileMasks(t,l,p,v){const S=this.context,M=S.gl,I=this.style.projection,L=this.transform,F=this.useProgram("clippingMask");for(const B of l){const Z=t[B.key],$=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),K=I.getMeshFromTileID(this.context,B.canonical,v,!0,"stencil"),se=L.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!p,applyTerrainMatrix:!0});F.draw(S,M.TRIANGLES,fn.disabled,new Fn({func:M.ALWAYS,mask:0},Z,255,M.KEEP,M.KEEP,M.REPLACE),oi.disabled,p?Mn.disabled:Mn.backCCW,null,$,se,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}_renderTilesDepthBuffer(){const t=this.context,l=t.gl,p=this.style.projection,v=this.transform,S=this.useProgram("depth"),M=this.getDepthModeFor3D(),I=Qi(v,{tileSize:v.tileSize});for(const L of I){const F=this.style.map.terrain&&this.style.map.terrain.getTerrainData(L),B=p.getMeshFromTileID(this.context,L.canonical,!0,!0,"raster"),Z=v.getProjectionData({overscaledTileID:L,applyGlobeMatrix:!0,applyTerrainMatrix:!0});S.draw(t,l.TRIANGLES,M,Fn.disabled,oi.disabled,Mn.backCCW,null,F,Z,"$clipping",B.vertexBuffer,B.indexBuffer,B.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,l=this.context.gl;return new Fn({func:l.NOTEQUAL,mask:255},t,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(t){const l=this.context.gl;return new Fn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,l.KEEP,l.KEEP,l.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const l=this.context.gl,p=t.sort(((M,I)=>I.overscaledZ-M.overscaledZ)),v=p[p.length-1].overscaledZ,S=p[0].overscaledZ-v+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const M={};for(let I=0;I<S;I++)M[I+v]=new Fn({func:l.GEQUAL,mask:255},I+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=S,[M,p]}return[{[v]:Fn.disabled},p]}stencilConfigForOverlapTwoPass(t){const l=this.context.gl,p=t.sort(((M,I)=>I.overscaledZ-M.overscaledZ)),v=p[p.length-1].overscaledZ,S=p[0].overscaledZ-v+1;if(this.clearStencil(),S>1){const M={},I={};for(let L=0;L<S;L++)M[L+v]=new Fn({func:l.GREATER,mask:255},S+1+L,255,l.KEEP,l.KEEP,l.REPLACE),I[L+v]=new Fn({func:l.GREATER,mask:255},1+L,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID=2*S+1,[M,I,p]}return this.nextStencilID=3,[{[v]:new Fn({func:l.GREATER,mask:255},2,255,l.KEEP,l.KEEP,l.REPLACE)},{[v]:new Fn({func:l.GREATER,mask:255},1,255,l.KEEP,l.KEEP,l.REPLACE)},p]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new oi([t.CONSTANT_COLOR,t.ONE],new c.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?oi.unblended:oi.alphaBlended}getDepthModeForSublayer(t,l,p){if(!this.opaquePassEnabledForLayer())return fn.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new fn(p||this.context.gl.LEQUAL,l,[v,v])}getDepthModeFor3D(){return new fn(this.context.gl.LEQUAL,fn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,l){var p,v;this.style=t,this.options=l,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(ie()),this.imageManager.beginFrame();const S=this.style._order,M=this.style.tileManagers,I={},L={},F={},B={isRenderingToTexture:!1,isRenderingGlobe:((p=t.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const $ in M){const K=M[$];K.used&&K.prepare(this.context),I[$]=K.getVisibleCoordinates(!1),L[$]=I[$].slice().reverse(),F[$]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<S.length;$++)if(this.style._layers[S[$]].is3D()){this.opaquePassCutoff=$;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const $ of S){const K=this.style._layers[$];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const se=L[K.source];(K.type==="custom"||se.length)&&this.renderLayer(this,M[K.source],K,se,B)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:$=>this.useProgram($)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?c.bp.black:c.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function($,K){const se=$.context,pe=se.gl,ge=((Ie,be,je)=>{const Qe=Math.cos(be.rollInRadians),Ze=Math.sin(be.rollInRadians),We=Qn(be),Xe=be.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ie.properties.get("sky-color"),u_horizon_color:Ie.properties.get("horizon-color"),u_horizon:[(be.width/2-We*Ze)*je,(be.height/2+We*Qe)*je],u_horizon_normal:[-Ze,Qe],u_sky_horizon_blend:Ie.properties.get("sky-horizon-blend")*be.height/2*je,u_sky_blend:Xe}})(K,$.style.map.transform,$.pixelRatio),me=new fn(pe.LEQUAL,fn.ReadWrite,[0,1]),_e=Fn.disabled,Ae=$.colorModeForRenderPass(),ye=$.useProgram("sky"),Se=jp(se,K);ye.draw(se,pe.TRIANGLES,me,_e,Ae,Mn.disabled,ge,null,void 0,"sky",Se.vertexBuffer,Se.indexBuffer,Se.segments)})(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const $=this.style._layers[S[this.currentLayer]],K=M[$.source],se=I[$.source];this._renderTileClippingMasks($,se,!1),this.renderLayer(this,K,$,se,B)}this.renderPass="translucent";let Z=!1;for(this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const $=this.style._layers[S[this.currentLayer]],K=M[$.source];if(this.renderToTexture&&this.renderToTexture.renderLayer($,B))continue;this.opaquePassEnabledForLayer()||Z||(Z=!0,B.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const se=($.type==="symbol"?F:L)[$.source];this._renderTileClippingMasks($,I[$.source],!!this.renderToTexture),this.renderLayer(this,K,$,se,B)}if(B.isRenderingGlobe&&(function($,K,se){const pe=$.context,ge=pe.gl,me=$.useProgram("atmosphere"),_e=new fn(ge.LEQUAL,fn.ReadOnly,[0,1]),Ae=$.transform,ye=(function(Xe,Et){const At=Xe.properties.get("position"),pt=[-At.x,-At.y,-At.z],It=c.ar(new Float64Array(16));return Xe.properties.get("anchor")==="map"&&(c.bg(It,It,Et.rollInRadians),c.bh(It,It,-Et.pitchInRadians),c.bg(It,It,Et.bearingInRadians),c.bh(It,It,Et.center.lat*Math.PI/180),c.bJ(It,It,-Et.center.lng*Math.PI/180)),c.cg(pt,pt,It),pt})(se,$.transform),Se=Ae.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ie=K.properties.get("atmosphere-blend")*Se.projectionTransition;if(Ie===0)return;const be=Nc(Ae.worldSize,Ae.center.lat),je=Ae.inverseProjectionMatrix,Qe=new Float64Array(4);Qe[3]=1,c.aH(Qe,Qe,Ae.modelViewProjectionMatrix),Qe[0]/=Qe[3],Qe[1]/=Qe[3],Qe[2]/=Qe[3],Qe[3]=1,c.aH(Qe,Qe,je),Qe[0]/=Qe[3],Qe[1]/=Qe[3],Qe[2]/=Qe[3],Qe[3]=1;const Ze=((Xe,Et,At,pt,It)=>({u_sun_pos:Xe,u_atmosphere_blend:Et,u_globe_position:At,u_globe_radius:pt,u_inv_proj_matrix:It}))(ye,Ie,[Qe[0],Qe[1],Qe[2]],be,je),We=jp(pe,K);me.draw(pe,ge.TRIANGLES,_e,Fn.disabled,oi.alphaBlended,Mn.disabled,Ze,null,null,"atmosphere",We.vertexBuffer,We.indexBuffer,We.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const $=(function(K,se){let pe=null;const ge=Object.values(K._layers).flatMap((ye=>ye.source&&!ye.isHidden(se)?[K.tileManagers[ye.source]]:[])),me=ge.filter((ye=>ye.getSource().type==="vector")),_e=ge.filter((ye=>ye.getSource().type!=="vector")),Ae=ye=>{(!pe||pe.getSource().maxzoom<ye.getSource().maxzoom)&&(pe=ye)};return me.forEach((ye=>Ae(ye))),pe||_e.forEach((ye=>Ae(ye))),pe})(this.style,this.transform.zoom);$&&(function(K,se,pe){for(let ge=0;ge<pe.length;ge++)id(K,se,pe[ge])})(this,$,$.getVisibleCoordinates())}this.options.showPadding&&(function($){const K=$.transform.padding;Uu($,$.transform.height-(K.top||0),3,gl),Uu($,K.bottom||0,3,Fo),yl($,K.left||0,3,Tf),yl($,$.transform.width-(K.right||0),3,Sf);const se=$.transform.centerPoint;(function(pe,ge,me,_e){yr(pe,ge-1,me-10,2,20,_e),yr(pe,ge-10,me-1,20,2,_e)})($,se.x,$.transform.height-se.y,ts)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=t?!c.cj(l,p):!c.ck(l,p)),v||(v=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(c.cl(l,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(S,M){const I=S.context,L=I.gl,F=S.transform,B=oi.unblended,Z=new fn(L.LEQUAL,fn.ReadWrite,[0,1]),$=M.tileManager.getRenderableTiles(),K=S.useProgram("terrainDepth");I.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),I.clear({color:c.bp.transparent,depth:1});for(const se of $){const pe=M.getTerrainMesh(se.tileID),ge=M.getTerrainData(se.tileID),me=F.getProjectionData({overscaledTileID:se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),_e={u_ele_delta:M.getMeshFrameDelta(F.zoom)};K.draw(I,L.TRIANGLES,Z,Fn.disabled,B,Mn.backCCW,_e,ge,me,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,S.width,S.height])})(this,this.style.map.terrain),(function(S,M){const I=S.context,L=I.gl,F=S.transform,B=oi.unblended,Z=new fn(L.LEQUAL,fn.ReadWrite,[0,1]),$=M.getCoordsTexture(),K=M.tileManager.getRenderableTiles(),se=S.useProgram("terrainCoords");I.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,S.width/devicePixelRatio,S.height/devicePixelRatio]),I.clear({color:c.bp.transparent,depth:1}),M.coordsIndex=[];for(const pe of K){const ge=M.getTerrainMesh(pe.tileID),me=M.getTerrainData(pe.tileID);I.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,$.texture);const _e={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(F.zoom)},Ae=F.getProjectionData({overscaledTileID:pe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});se.draw(I,L.TRIANGLES,Z,Fn.disabled,B,Mn.backCCW,_e,me,Ae,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),M.coordsIndex.push(pe.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,S.width,S.height])})(this,this.style.map.terrain))}renderLayer(t,l,p,v,S){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(v||[]).length)&&(this.id=p.id,c.cm(p)?(function(M,I,L,F,B,Z){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:$}=Z,K=Fn.disabled,se=M.colorModeForRenderPass();(L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(pe,ge,me,_e,Ae,ye,Se,Ie,be){const je=ge.transform,Qe=ge.style.map.terrain,Ze=Ae==="map",We=ye==="map";for(const Xe of pe){const Et=_e.getTile(Xe),At=Et.getBucket(me);if(!At||!At.text||!At.text.segments.get().length)continue;const pt=c.ay(At.textSizeData,je.zoom),It=c.aN(Et,1,ge.transform.zoom),cn=Ya(Ze,ge.transform,It),Jn=me.layout.get("icon-text-fit")!=="none"&&At.hasIconData();if(pt){const Ti=Math.pow(2,je.zoom-Et.tileID.overscaledZ),yi=Qe?(Oi,li)=>Qe.getElevation(Xe,Oi,li):null;dl(At,Ze,We,be,je,cn,Ti,pt,Jn,c.aO(je,Et,Se,Ie),Xe.toUnwrapped(),yi)}}})(F,M,L,I,L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),B),L.paint.get("icon-opacity").constantOr(1)!==0&&Gc(M,I,L,F,!1,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),L.layout.get("icon-rotation-alignment"),L.layout.get("icon-pitch-alignment"),L.layout.get("icon-keep-upright"),K,se,$),L.paint.get("text-opacity").constantOr(1)!==0&&Gc(M,I,L,F,!0,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.layout.get("text-keep-upright"),K,se,$),I.map.showCollisionBoxes&&(Vr(M,I,L,F,!0),Vr(M,I,L,F,!1))})(t,l,p,v,this.style.placement.variableOffsets,S):c.cn(p)?(function(M,I,L,F,B){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=B,$=L.paint.get("circle-opacity"),K=L.paint.get("circle-stroke-width"),se=L.paint.get("circle-stroke-opacity"),pe=!L.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(K.constantOr(1)===0||se.constantOr(1)===0))return;const ge=M.context,me=ge.gl,_e=M.transform,Ae=M.getDepthModeForSublayer(0,fn.ReadOnly),ye=Fn.disabled,Se=M.colorModeForRenderPass(),Ie=[],be=_e.getCircleRadiusCorrection();for(let je=0;je<F.length;je++){const Qe=F[je],Ze=I.getTile(Qe),We=Ze.getBucket(L);if(!We)continue;const Xe=L.paint.get("circle-translate"),Et=L.paint.get("circle-translate-anchor"),At=c.aO(_e,Ze,Xe,Et),pt=We.programConfigurations.get(L.id),It=M.useProgram("circle",pt),cn=We.layoutVertexBuffer,Jn=We.indexBuffer,Ti=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Qe),yi={programConfiguration:pt,program:It,layoutVertexBuffer:cn,indexBuffer:Jn,uniformValues:$h(M,Ze,L,At,be),terrainData:Ti,projectionData:_e.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!Z,applyTerrainMatrix:!0})};if(pe){const Oi=We.segments.get();for(const li of Oi)Ie.push({segments:new c.aX([li]),sortKey:li.sortKey,state:yi})}else Ie.push({segments:We.segments,sortKey:0,state:yi})}pe&&Ie.sort(((je,Qe)=>je.sortKey-Qe.sortKey));for(const je of Ie){const{programConfiguration:Qe,program:Ze,layoutVertexBuffer:We,indexBuffer:Xe,uniformValues:Et,terrainData:At,projectionData:pt}=je.state;Ze.draw(ge,me.TRIANGLES,Ae,ye,Se,Mn.backCCW,Et,At,pt,L.id,We,Xe,je.segments,L.paint,M.transform.zoom,Qe)}})(t,l,p,v,S):c.co(p)?(function(M,I,L,F,B){if(L.paint.get("heatmap-opacity")===0)return;const Z=M.context,{isRenderingToTexture:$,isRenderingGlobe:K}=B;if(M.style.map.terrain){for(const se of F){const pe=I.getTile(se);I.hasRenderableParent(se)||(M.renderPass==="offscreen"?Fp(M,pe,L,se,K):M.renderPass==="translucent"&&Ur(M,L,se,$,K))}Z.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?(function(se,pe,ge,me){const _e=se.context,Ae=_e.gl,ye=se.transform,Se=Fn.disabled,Ie=new oi([Ae.ONE,Ae.ONE],c.bp.transparent,[!0,!0,!0,!0]);(function(be,je,Qe){const Ze=be.gl;be.activeTexture.set(Ze.TEXTURE1),be.viewport.set([0,0,je.width/4,je.height/4]);let We=Qe.heatmapFbos.get(c.cd);We?(Ze.bindTexture(Ze.TEXTURE_2D,We.colorAttachment.get()),be.bindFramebuffer.set(We.framebuffer)):(We=gi(be,je.width/4,je.height/4),Qe.heatmapFbos.set(c.cd,We))})(_e,se,ge),_e.clear({color:c.bp.transparent});for(let be=0;be<me.length;be++){const je=me[be];if(pe.hasRenderableParent(je))continue;const Qe=pe.getTile(je),Ze=Qe.getBucket(ge);if(!Ze)continue;const We=Ze.programConfigurations.get(ge.id),Xe=se.useProgram("heatmap",We),Et=ye.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),At=ye.getCircleRadiusCorrection();Xe.draw(_e,Ae.TRIANGLES,fn.disabled,Se,Ie,Mn.backCCW,Xl(Qe,ye.zoom,ge.paint.get("heatmap-intensity"),At),null,Et,ge.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,ge.paint,ye.zoom,We)}_e.viewport.set([0,0,se.width,se.height])})(M,I,L,F):M.renderPass==="translucent"&&(function(se,pe){const ge=se.context,me=ge.gl;ge.setColorMode(se.colorModeForRenderPass());const _e=pe.heatmapFbos.get(c.cd);_e&&(ge.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,_e.colorAttachment.get()),ge.activeTexture.set(me.TEXTURE1),Ln(ge,pe).bind(me.LINEAR,me.CLAMP_TO_EDGE),se.useProgram("heatmapTexture").draw(ge,me.TRIANGLES,fn.disabled,Fn.disabled,se.colorModeForRenderPass(),Mn.disabled,Rp(se,pe,0,1),null,null,pe.id,se.viewportBuffer,se.quadTriangleIndexBuffer,se.viewportSegments,pe.paint,se.transform.zoom))})(M,L)})(t,l,p,v,S):c.cp(p)?(function(M,I,L,F,B){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=B,$=L.paint.get("line-opacity"),K=L.paint.get("line-width");if($.constantOr(1)===0||K.constantOr(1)===0)return;const se=M.getDepthModeForSublayer(0,fn.ReadOnly),pe=M.colorModeForRenderPass(),ge=L.paint.get("line-dasharray"),me=ge.constantOr(1),_e=L.paint.get("line-pattern"),Ae=_e.constantOr(1),ye=L.paint.get("line-gradient"),Se=L.getCrossfadeParameters();let Ie;Ie=Ae?"linePattern":me&&ye?"lineGradientSDF":me?"lineSDF":ye?"lineGradient":"line";const be=M.context,je=be.gl,Qe=M.transform;let Ze=!0;for(const We of F){const Xe=I.getTile(We);if(Ae&&!Xe.patternsLoaded())continue;const Et=Xe.getBucket(L);if(!Et)continue;const At=Et.programConfigurations.get(L.id),pt=M.context.program.get(),It=M.useProgram(Ie,At),cn=Ze||It.program!==pt,Jn=M.style.map.terrain&&M.style.map.terrain.getTerrainData(We),Ti=_e.constantOr(null),yi=ge&&ge.constantOr(null);if(Ti&&Xe.imageAtlas){const Gr=Xe.imageAtlas,nr=Gr.patternPositions[Ti.to.toString()],ir=Gr.patternPositions[Ti.from.toString()];nr&&ir&&At.setConstantPatternPositions(nr,ir)}else if(yi){const Gr=L.layout.get("line-cap")==="round",nr=M.lineAtlas.getDash(yi.to,Gr),ir=M.lineAtlas.getDash(yi.from,Gr);At.setConstantDashPositions(nr,ir)}const Oi=Qe.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),li=Qe.getPixelScale();let Wi;Ae?(Wi=kp(M,Xe,L,li,Se),es(be,je,Xe,At,Se)):me&&ye?(Wi=Ql(M,Xe,L,li,Se,Et.lineClipsArray.length),Oa(M,I,be,je,L,Et,We,At,Se)):me?(Wi=Ia(M,Xe,L,li,Se),Yi(M,be,je,At,cn,Se)):ye?(Wi=xg(M,Xe,L,li,Et.lineClipsArray.length),ka(M,I,be,je,L,Et,We)):Wi=Yh(M,Xe,L,li);const Li=M.stencilModeForClipping(We);It.draw(be,je.TRIANGLES,se,Li,pe,Mn.disabled,Wi,Jn,Oi,L.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,L.paint,M.transform.zoom,At,Et.layoutVertexBuffer2),Ze=!1}})(t,l,p,v,S):c.cq(p)?(function(M,I,L,F,B){const Z=L.paint.get("fill-color"),$=L.paint.get("fill-opacity");if($.constantOr(1)===0)return;const{isRenderingToTexture:K}=B,se=M.colorModeForRenderPass(),pe=L.paint.get("fill-pattern"),ge=M.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&Z.constantOr(c.bp.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===ge){const me=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?fn.ReadWrite:fn.ReadOnly);Lo(M,I,L,F,me,se,!1,K)}if(M.renderPass==="translucent"&&L.paint.get("fill-antialias")){const me=M.getDepthModeForSublayer(L.getPaintProperty("fill-outline-color")?2:0,fn.ReadOnly);Lo(M,I,L,F,me,se,!0,K)}})(t,l,p,v,S):c.cr(p)?(function(M,I,L,F,B){const Z=L.paint.get("fill-extrusion-opacity");if(Z===0)return;const{isRenderingToTexture:$}=B;if(M.renderPass==="translucent"){const K=new fn(M.context.gl.LEQUAL,fn.ReadWrite,M.depthRangeFor3D);if(Z!==1||L.paint.get("fill-extrusion-pattern").constantOr(1))No(M,I,L,F,K,Fn.disabled,oi.disabled,$),No(M,I,L,F,K,M.stencilModeFor3D(),M.colorModeForRenderPass(),$);else{const se=M.colorModeForRenderPass();No(M,I,L,F,K,Fn.disabled,se,$)}}})(t,l,p,v,S):c.cs(p)?(function(M,I,L,F,B){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=B,$=M.context,K=M.style.projection.useSubdivision,se=M.getDepthModeForSublayer(0,fn.ReadOnly),pe=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(ge,me,_e,Ae,ye,Se,Ie){const be=ge.context,je=be.gl;for(const Qe of _e){const Ze=me.getTile(Qe),We=Ze.dem;if(!We||!We.data||!Ze.needsHillshadePrepare)continue;const Xe=We.dim,Et=We.stride,At=We.getPixels();if(be.activeTexture.set(je.TEXTURE1),be.pixelStoreUnpackPremultiplyAlpha.set(!1),Ze.demTexture=Ze.demTexture||ge.getTileTexture(Et),Ze.demTexture){const It=Ze.demTexture;It.update(At,{premultiply:!1}),It.bind(je.NEAREST,je.CLAMP_TO_EDGE)}else Ze.demTexture=new c.T(be,At,je.RGBA,{premultiply:!1}),Ze.demTexture.bind(je.NEAREST,je.CLAMP_TO_EDGE);be.activeTexture.set(je.TEXTURE0);let pt=Ze.fbo;if(!pt){const It=new c.T(be,{width:Xe,height:Xe,data:null},je.RGBA);It.bind(je.LINEAR,je.CLAMP_TO_EDGE),pt=Ze.fbo=be.createFramebuffer(Xe,Xe,!0,!1),pt.colorAttachment.set(It.texture)}be.bindFramebuffer.set(pt.framebuffer),be.viewport.set([0,0,Xe,Xe]),ge.useProgram("hillshadePrepare").draw(be,je.TRIANGLES,ye,Se,Ie,Mn.disabled,vg(Ze.tileID,We),null,null,Ae.id,ge.rasterBoundsBuffer,ge.quadTriangleIndexBuffer,ge.rasterBoundsSegments),Ze.needsHillshadePrepare=!1}})(M,I,F,L,se,Fn.disabled,pe),$.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(K){const[ge,me,_e]=M.stencilConfigForOverlapTwoPass(F);Po(M,I,L,_e,ge,se,pe,!1,Z),Po(M,I,L,_e,me,se,pe,!0,Z)}else{const[ge,me]=M.getStencilConfigForOverlapAndUpdateStencilID(F);Po(M,I,L,me,ge,se,pe,!1,Z)}})(t,l,p,v,S):c.ct(p)?(function(M,I,L,F,B){if(M.renderPass!=="translucent"||!F.length)return;const{isRenderingToTexture:Z}=B,$=M.style.projection.useSubdivision,K=M.getDepthModeForSublayer(0,fn.ReadOnly),se=M.colorModeForRenderPass();if($){const[pe,ge,me]=M.stencilConfigForOverlapTwoPass(F);pl(M,I,L,me,pe,K,se,!1,Z),pl(M,I,L,me,ge,K,se,!0,Z)}else{const[pe,ge]=M.getStencilConfigForOverlapAndUpdateStencilID(F);pl(M,I,L,ge,pe,K,se,!1,Z)}})(t,l,p,v,S):c.bU(p)?(function(M,I,L,F,B){if(M.renderPass!=="translucent"||L.paint.get("raster-opacity")===0||!F.length)return;const{isRenderingToTexture:Z}=B,$=I.getSource(),K=M.style.projection.useSubdivision;if($ instanceof Dr)xs(M,I,L,F,null,!1,!1,$.tileCoords,$.flippedWindingOrder,Z);else if(K){const[se,pe,ge]=M.stencilConfigForOverlapTwoPass(F);xs(M,I,L,ge,se,!1,!0,ml,!1,Z),xs(M,I,L,ge,pe,!0,!0,ml,!1,Z)}else{const[se,pe]=M.getStencilConfigForOverlapAndUpdateStencilID(F);xs(M,I,L,pe,se,!1,!0,ml,!1,Z)}})(t,l,p,v,S):c.cu(p)?(function(M,I,L,F,B){const Z=L.paint.get("background-color"),$=L.paint.get("background-opacity");if($===0)return;const{isRenderingToTexture:K}=B,se=M.context,pe=se.gl,ge=M.style.projection,me=M.transform,_e=me.tileSize,Ae=L.paint.get("background-pattern");if(M.isPatternMissing(Ae))return;const ye=!Ae&&Z.a===1&&$===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==ye)return;const Se=Fn.disabled,Ie=M.getDepthModeForSublayer(0,ye==="opaque"?fn.ReadWrite:fn.ReadOnly),be=M.colorModeForRenderPass(),je=M.useProgram(Ae?"backgroundPattern":"background"),Qe=F||Qi(me,{tileSize:_e,terrain:M.style.map.terrain});Ae&&(se.activeTexture.set(pe.TEXTURE0),M.imageManager.bind(M.context));const Ze=L.getCrossfadeParameters();for(const We of Qe){const Xe=me.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),Et=Ae?Qh($,M,Ae,{tileID:We,tileSize:_e},Ze):Xh($,Z),At=M.style.map.terrain&&M.style.map.terrain.getTerrainData(We),pt=ge.getMeshFromTileID(se,We.canonical,!1,!0,"raster");je.draw(se,pe.TRIANGLES,Ie,Se,be,Mn.backCCW,Et,At,Xe,L.id,pt.vertexBuffer,pt.indexBuffer,pt.segments)}})(t,0,p,v,S):c.cv(p)&&(function(M,I,L,F){const{isRenderingGlobe:B}=F,Z=M.context,$=L.implementation,K=M.style.projection,se=M.transform,pe=se.getProjectionDataForCustomLayer(B),ge={farZ:se.farZ,nearZ:se.nearZ,fov:se.fov*Math.PI/180,modelViewProjectionMatrix:se.modelViewProjectionMatrix,projectionMatrix:se.projectionMatrix,shaderData:{variantName:K.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${K.shaderPreludeCode.vertexSource}`,define:K.shaderDefine},defaultProjectionData:pe},me=$.renderingMode?$.renderingMode:"2d";if(M.renderPass==="offscreen"){const _e=$.prerender;_e&&(M.setCustomLayerDefaults(),Z.setColorMode(M.colorModeForRenderPass()),_e.call($,Z.gl,ge),Z.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),Z.setColorMode(M.colorModeForRenderPass()),Z.setStencilMode(Fn.disabled);const _e=me==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,fn.ReadOnly);Z.setDepthMode(_e),$.render(Z.gl,ge),Z.setDirty(),M.setBaseState(),Z.bindFramebuffer.set(null)}})(t,0,p,S))}saveTileTexture(t){const l=this._tileTextures[t.size[0]];l?l.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const l=this._tileTextures[t];return l&&l.length>0?l.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const l=this.imageManager.getPattern(t.from.toString()),p=this.imageManager.getPattern(t.to.toString());return!l||!p}useProgram(t,l,p=!1,v=[]){this.cache=this.cache||{};const S=!!this.style.map.terrain,M=this.style.projection,I=p?Bi.projectionMercator:M.shaderPreludeCode,L=p?Ji:M.shaderDefine,F=t+(l?l.cacheKey:"")+`/${p?xa:M.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(S?"/terrain":"")+(v?`/${v.join("/")}`:"");return this.cache[F]||(this.cache[F]=new gg(this.context,Bi[t],l,wg[t],this._showOverdrawInspector,S,I,L,v)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var t,l;if(this._tileTextures){for(const p in this._tileTextures){const v=this._tileTextures[p];if(v)for(const S of v)S.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((t=this.tileExtentMesh.vertexBuffer)===null||t===void 0||t.destroy()),this.tileExtentMesh&&((l=this.tileExtentMesh.indexBuffer)===null||l===void 0||l.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const p in this.cache){const v=this.cache[p];v&&v.program&&this.context.gl.deleteProgram(v.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:l}=this.context.gl;return this.width!==t||this.height!==l}}function Bp(w,t){let l,p=!1,v=null,S=null;const M=()=>{v=null,p&&(w.apply(S,l),v=setTimeout(M,t),p=!1)};return(...I)=>(p=!0,S=this,l=I,v||M(),v)}class cr{constructor(t){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let p;return l.split("&").map((v=>v.split("="))).forEach((v=>{v[0]===this._hashName&&(p=v)})),(p&&p[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(!this._isValidHash(l))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:p,pitch:+(l[4]||0)}),!0},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{const l=this._getCurrentHash();if(l.length===0)return;const p=l.join("/");let v=p;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${p}`);let S=window.location.hash.replace(v,"");S.startsWith("#&")?S=S.slice(0,1)+S.slice(2):S==="#"&&(S="");let M=window.location.href.replace(/(#.+)?$/,S);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=Bp(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const l=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,v=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),M=Math.round(l.lng*S)/S,I=Math.round(l.lat*S)/S,L=this._map.getBearing(),F=this._map.getPitch();let B="";if(B+=t?`/${M}/${I}/${p}`:`${p}/${I}/${M}`,(L||F)&&(B+="/"+Math.round(10*L)/10),F&&(B+=`/${Math.round(F)}`),this._hashName){const Z=this._hashName;let $=!1;const K=window.location.hash.slice(1).split("&").map((se=>{const pe=se.split("=")[0];return pe===Z?($=!0,`${pe}=${B}`):se})).filter((se=>se));return $||K.push(`${Z}=${B}`),`#${K.join("&")}`}return`#${B}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new c.V(+t[2],+t[1])}catch{return!1}const l=+t[0],p=+(t[3]||0),v=+(t[4]||0);return l>=this._map.getMinZoom()&&l<=this._map.getMaxZoom()&&p>=-180&&p<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const jo={linearity:.3,easing:c.cw(0,0,.3,1)},Gu=c.e({deceleration:2500,maxSpeed:1400},jo),da=c.e({deceleration:20,maxSpeed:1400},jo),ns=c.e({deceleration:1e3,maxSpeed:360},jo),$c=c.e({deceleration:1e3,maxSpeed:90},jo),fa=c.e({deceleration:1e3,maxSpeed:360},jo);class S0{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:ie(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,l=ie();for(;t.length>0&&l-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)l.zoom+=S.zoomDelta||0,l.bearing+=S.bearingDelta||0,l.pitch+=S.pitchDelta||0,l.roll+=S.rollDelta||0,S.panDelta&&l.pan._add(S.panDelta),S.around&&(l.around=S.around),S.pinchAround&&(l.pinchAround=S.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(l.pan.mag()){const S=rd(l.pan.mag(),p,c.e({},Gu,t||{})),M=l.pan.mult(S.amount/l.pan.mag()),I=this._map.cameraHelper.handlePanInertia(M,this._map.transform);v.center=I.easingCenter,v.offset=I.easingOffset,$u(v,S)}if(l.zoom){const S=rd(l.zoom,p,da);v.zoom=this._map.transform.zoom+S.amount,$u(v,S)}if(l.bearing){const S=rd(l.bearing,p,ns);v.bearing=this._map.transform.bearing+c.an(S.amount,-179,179),$u(v,S)}if(l.pitch){const S=rd(l.pitch,p,$c);v.pitch=this._map.transform.pitch+S.amount,$u(v,S)}if(l.roll){const S=rd(l.roll,p,fa);v.roll=this._map.transform.roll+c.an(S.amount,-179,179),$u(v,S)}if(v.zoom||v.bearing){const S=l.pinchAround===void 0?l.around:l.pinchAround;v.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),c.e(v,{noMoveStart:!0})}}function $u(w,t){(!w.duration||w.duration<t.duration)&&(w.duration=t.duration,w.easing=t.easing)}function rd(w,t,l){const{maxSpeed:p,linearity:v,deceleration:S}=l,M=c.an(w*v/(t/1e3),-p,p),I=Math.abs(M)/(S*v);return{easing:l.easing,duration:1e3*I,amount:M*(I/2)}}class Lr extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,l,p,v={}){p=p instanceof MouseEvent?p:new MouseEvent(t,p);const S=q.mousePos(l.getCanvas(),p),M=l.unproject(S);super(t,c.e({point:S,lngLat:M,originalEvent:p},v)),this._defaultPrevented=!1,this.target=l}}class $s extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,l,p){const v=t==="touchend"?p.changedTouches:p.touches,S=q.touchPos(l.getCanvasContainer(),v),M=S.map((L=>l.unproject(L))),I=S.reduce(((L,F,B,Z)=>L.add(F.div(Z.length))),new c.P(0,0));super(t,{points:S,point:I,lngLats:M,lngLat:l.unproject(I),originalEvent:p}),this._defaultPrevented=!1}}class Af extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,l,p){super(t,{originalEvent:p}),this._defaultPrevented=!1}}class Mf{constructor(t,l){this._map=t,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Af(t.type,this._map,t))}mousedown(t,l){return this._mousedownPos=l,this._firePreventable(new Lr(t.type,this._map,t))}mouseup(t){this._map.fire(new Lr(t.type,this._map,t))}click(t,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new Lr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Lr(t.type,this._map,t))}mouseover(t){this._map.fire(new Lr(t.type,this._map,t))}mouseout(t){this._map.fire(new Lr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new $s(t.type,this._map,t))}touchmove(t){this._map.fire(new $s(t.type,this._map,t))}touchend(t){this._map.fire(new $s(t.type,this._map,t))}touchcancel(t){this._map.fire(new $s(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Eg{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Lr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Lr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Lr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zs{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(c.P.convert(t),this._map.terrain)}}class rc{constructor(t,l){this._map=t,this._tr=new Zs(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,l){this.isEnabled()&&t.shiftKey&&t.button===0&&(q.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(t,l){if(!this._active)return;const p=l;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=p,this._box||(this._box=q.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const S=Math.min(v.x,p.x),M=Math.max(v.x,p.x),I=Math.min(v.y,p.y),L=Math.max(v.y,p.y);q.setTransform(this._box,`translate(${S}px,${I}px)`),this._box.style.width=M-S+"px",this._box.style.height=L-I+"px"}mouseupWindow(t,l){if(!this._active||t.button!==0)return;const p=this._startPos,v=l;if(this.reset(),q.suppressClick(),p.x!==v.x||p.y!==v.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:t})),{cameraAnimation:S=>S.fitScreenCoordinates(p,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(q.remove(this._box),this._box=null),q.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,l){return this._map.fire(new c.l(t,{originalEvent:l}))}}function La(w,t){if(w.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${t.length}`);const l={};for(let p=0;p<w.length;p++)l[w[p].identifier]=t[p];return l}class Pt{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,l,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),p.length===this.numTouches&&(this.centroid=(function(v){const S=new c.P(0,0);for(const M of v)S._add(M);return S.div(v.length)})(l),this.touches=La(p,l)))}touchmove(t,l,p){if(this.aborted||!this.centroid)return;const v=La(p,l);for(const S in this.touches){const M=v[S];(!M||M.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(t,l,p){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class ad{constructor(t){this.singleTap=new Pt(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,l,p){this.singleTap.touchstart(t,l,p)}touchmove(t,l,p){this.singleTap.touchmove(t,l,p)}touchend(t,l,p){const v=this.singleTap.touchend(t,l,p);if(v){const S=t.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(v)<30;if(S&&M||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Cf{constructor(t){this._tr=new Zs(t),this._zoomIn=new ad({numTouches:1,numTaps:2}),this._zoomOut=new ad({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,l,p){this._zoomIn.touchstart(t,l,p),this._zoomOut.touchstart(t,l,p)}touchmove(t,l,p){this._zoomIn.touchmove(t,l,p),this._zoomOut.touchmove(t,l,p)}touchend(t,l,p){const v=this._zoomIn.touchend(t,l,p),S=this._zoomOut.touchend(t,l,p),M=this._tr;return v?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(v)},{originalEvent:t})}):S?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(S)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ws{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const l=this._moveFunction(...t);if(l.bearingDelta||l.pitchDelta||l.rollDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(t,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(l)?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,l){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const v=Array.isArray(l)?l[0]:l;return!this._moved&&v.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(p,v))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&q.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const qs=0,Zu=2,Df={[qs]:1,[Zu]:2};class Bo{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const l=q.mouseButton(t);this._eventButton=l}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!(function(l,p){const v=Df[p];return l.buttons===void 0||(l.buttons&v)!==v})(t,this._eventButton)}isValidEndEvent(t){return q.mouseButton(t)===this._eventButton}}class Zc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class sd{constructor(t=new Bo({checkCorrectEvent:()=>!0}),l=new Zc){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=l}_executeRelevantHandler(t,l,p){return t instanceof MouseEvent?l(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?p(t):void 0}startMove(t){this._executeRelevantHandler(t,(l=>this.mouseMoveStateManager.startMove(l)),(l=>this.oneFingerTouchMoveStateManager.startMove(l)))}endMove(t){this._executeRelevantHandler(t,(l=>this.mouseMoveStateManager.endMove(l)),(l=>this.oneFingerTouchMoveStateManager.endMove(l)))}isValidStartEvent(t){return this._executeRelevantHandler(t,(l=>this.mouseMoveStateManager.isValidStartEvent(l)),(l=>this.oneFingerTouchMoveStateManager.isValidStartEvent(l)))}isValidMoveEvent(t){return this._executeRelevantHandler(t,(l=>this.mouseMoveStateManager.isValidMoveEvent(l)),(l=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(l)))}isValidEndEvent(t){return this._executeRelevantHandler(t,(l=>this.mouseMoveStateManager.isValidEndEvent(l)),(l=>this.oneFingerTouchMoveStateManager.isValidEndEvent(l)))}}const Vo=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=t=>{t.preventDefault()}};class If{constructor(t,l){this._clickTolerance=t.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,l,p){return this._calculateTransform(t,l,p)}touchmove(t,l,p){if(this._active){if(!this._shouldBePrevented(p.length))return t.preventDefault(),this._calculateTransform(t,l,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,l,p){this._calculateTransform(t,l,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,l,p){p.length>0&&(this._active=!0);const v=La(p,l),S=new c.P(0,0),M=new c.P(0,0);let I=0;for(const F in v){const B=v[F],Z=this._touches[F];Z&&(S._add(B),M._add(B.sub(Z)),I++,v[F]=B)}if(this._touches=v,this._shouldBePrevented(I)||!M.mag())return;const L=M.div(I);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(I),panDelta:L}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class od{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,l,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([l[0],l[1]]))}touchmove(t,l,p){if(!this._firstTwoTouches)return;t.preventDefault();const[v,S]=this._firstTwoTouches,M=Uo(p,l,v),I=Uo(p,l,S);if(!M||!I)return;const L=this._aroundCenter?null:M.add(I).div(2);return this._move([M,I],L,t)}touchend(t,l,p){if(!this._firstTwoTouches)return;const[v,S]=this._firstTwoTouches,M=Uo(p,l,v),I=Uo(p,l,S);M&&I||(this._active&&q.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Uo(w,t,l){for(let p=0;p<w.length;p++)if(w[p].identifier===l)return t[p]}function Vp(w,t){return Math.log(w/t)/Math.LN2}class Go extends od{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,l){const p=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Vp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Vp(this._distance,p),pinchAround:l}}}function Rf(w,t){return 180*w.angleWith(t)/Math.PI}class ld extends od{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,l,p){const v=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Rf(this._vector,v),pinchAround:l}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const l=25/(Math.PI*this._minDiameter)*360,p=Rf(t,this._startVector);return Math.abs(p)<l}}function $o(w){return Math.abs(w.y)>Math.abs(w.x)}class _l extends od{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,l,p){super.touchstart(t,l,p),this._currentTouchCount=p.length}_start(t){this._lastPoints=t,$o(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,l,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=t[0].sub(this._lastPoints[0]),S=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,S,p.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(v.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(t,l,p){if(this._valid!==void 0)return this._valid;const v=t.mag()>=2,S=l.mag()>=2;if(!v&&!S)return;if(!v||!S)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const M=t.y>0==l.y>0;return $o(t)&&$o(l)&&M}}const Ts={panStep:100,bearingStep:15,pitchStep:10};class ni{constructor(t){this._tr=new Zs(t);const l=Ts;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let l=0,p=0,v=0,S=0,M=0;switch(t.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:t.shiftKey?p=-1:(t.preventDefault(),S=-1);break;case 39:t.shiftKey?p=1:(t.preventDefault(),S=1);break;case 38:t.shiftKey?v=1:(t.preventDefault(),M=-1);break;case 40:t.shiftKey?v=-1:(t.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(p=0,v=0),{cameraAnimation:I=>{const L=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Up,zoom:l?Math.round(L.zoom)+l*(t.shiftKey?2:1):L.zoom,bearing:L.bearing+p*this._bearingStep,pitch:L.pitch+v*this._pitchStep,offset:[-S*this._panStep,-M*this._panStep],center:L.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Up(w){return w*(2-w)}const vl=4.000244140625,ac=1/450;class cd{constructor(t,l){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=t,this._tr=new Zs(t),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=ac}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let l=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const p=ie(),v=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,l!==0&&l%vl==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(v*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),t.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=t,this._delta-=l,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=q.mousePos(this._map.getCanvas(),t),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(c.V.convert(p.center)):l,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>vl?this._wheelZoomRate:this._defaultZoomRate;let L=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&L!==0&&(L=1/L);const F=typeof this._targetZoom!="number"?t.scale:c.aq(this._targetZoom);this._targetZoom=t.applyConstrain(t.getCameraLngLat(),c.at(F*L)).zoom,this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,p=this._startZoom,v=this._easing;let S,M=!1;if(this._type==="wheel"&&p&&v){const I=ie()-this._lastWheelEventTime,L=Math.min((I+5)/200,1),F=v(L);S=c.G.number(p,l,F),L<1?this._frameId||(this._frameId=!0):M=!0}else S=l,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=S,{noInertia:!0,needsRenderFrame:!M,zoomDelta:S-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let l=c.cy;if(this._prevEase){const p=this._prevEase,v=(ie()-p.start)/p.duration,S=p.easing(v+.01)-p.easing(v),M=.27/Math.sqrt(S*S+1e-4)*.01,I=Math.sqrt(.0729-M*M);l=c.cw(M,I,.25,1)}return this._prevEase={start:ie(),duration:t,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class kf{constructor(t,l){this._clickZoom=t,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qc{constructor(t){this._tr=new Zs(t),this.reset()}reset(){this._active=!1}dblclick(t,l){return t.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ud{constructor(){this._tap=new ad({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,l,p){if(!this._swipePoint)if(this._tapTime){const v=l[0],S=t.timeStamp-this._tapTime<500,M=this._tapPoint.dist(v)<30;S&&M?p.length>0&&(this._swipePoint=v,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(t,l,p)}touchmove(t,l,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const v=l[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,t.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(t,l,p)}touchend(t,l,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const v=this._tap.touchend(t,l,p);v&&(this._tapTime=t.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gp{constructor(t,l,p){this._el=t,this._mousePan=l,this._touchPan=p}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class is{constructor(t,l,p,v){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=l,this._mousePitch=p,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Yc{constructor(t,l,p,v){this._el=t,this._touchZoom=l,this._touchRotate=p,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class jt{constructor(t,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=q.create("div","maplibregl-cooperative-gesture-screen",t);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=l,this._container.appendChild(v);const S=document.createElement("div");S.className="maplibregl-mobile-message",S.textContent=p,this._container.appendChild(S),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(q.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,l){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:t,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Gt=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class Ss extends c.l{}function qu(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class hd{constructor(t,l){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,S)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=v.type==="renderFrame"?void 0:v,I={needsRenderFrame:!1},L={},F={};for(const{handlerName:$,handler:K,allowed:se}of this._handlers){if(!K.isEnabled())continue;let pe;if(this._blockedByActive(F,se,$))K.reset();else if(K[S||v.type]){if(c.cz(v,S||v.type)){const ge=q.mousePos(this._map.getCanvas(),v);pe=K[S||v.type](v,ge)}else if(c.cA(v,S||v.type)){const ge=this._getMapTouches(v.touches),me=q.touchPos(this._map.getCanvas(),ge);pe=K[S||v.type](v,me,ge)}else c.cB(S||v.type)||(pe=K[S||v.type](v));this.mergeHandlerResult(I,L,pe,$,M),pe&&pe.needsRenderFrame&&this._triggerRenderFrame()}(pe||K.isActive())&&(F[$]=K)}const B={};for(const $ in this._previousActiveHandlers)F[$]||(B[$]=M);this._previousActiveHandlers=F,(Object.keys(B).length||qu(I))&&(this._changes.push([I,L,B]),this._triggerRenderFrame()),(Object.keys(F).length||qu(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=I;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new S0(t),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,S,M]of this._listeners)q.addEventListener(v,S,v===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[t,l,p]of this._listeners)q.removeEventListener(t,l,t===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(t){const l=this._map,p=l.getCanvasContainer();this._add("mapEvent",new Mf(l,t));const v=l.boxZoom=new rc(l,t);this._add("boxZoom",v),t.interactive&&t.boxZoom&&v.enable();const S=l.cooperativeGestures=new jt(l,t.cooperativeGestures);this._add("cooperativeGestures",S),t.cooperativeGestures&&S.enable();const M=new Cf(l),I=new qc(l);l.doubleClickZoom=new kf(I,M),this._add("tapZoom",M),this._add("clickZoom",I),t.interactive&&t.doubleClickZoom&&l.doubleClickZoom.enable();const L=new ud;this._add("tapDragZoom",L);const F=l.touchPitch=new _l(l);this._add("touchPitch",F),t.interactive&&t.touchPitch&&l.touchPitch.enable(t.touchPitch);const B=()=>l.project(l.getCenter()),Z=(function({enable:ye,clickTolerance:Se,aroundCenter:Ie=!0,minPixelCenterThreshold:be=100,rotateDegreesPerPixelMoved:je=.8},Qe){const Ze=new Bo({checkCorrectEvent:We=>q.mouseButton(We)===0&&We.ctrlKey||q.mouseButton(We)===2&&!We.ctrlKey});return new ws({clickTolerance:Se,move:(We,Xe)=>{const Et=Qe();if(Ie&&Math.abs(Et.y-We.y)>be)return{bearingDelta:c.cx(new c.P(We.x,Xe.y),Xe,Et)};let At=(Xe.x-We.x)*je;return Ie&&Xe.y<Et.y&&(At=-At),{bearingDelta:At}},moveStateManager:Ze,enable:ye,assignEvents:Vo})})(t,B),$=(function({enable:ye,clickTolerance:Se,pitchDegreesPerPixelMoved:Ie=-.5}){const be=new Bo({checkCorrectEvent:je=>q.mouseButton(je)===0&&je.ctrlKey||q.mouseButton(je)===2});return new ws({clickTolerance:Se,move:(je,Qe)=>({pitchDelta:(Qe.y-je.y)*Ie}),moveStateManager:be,enable:ye,assignEvents:Vo})})(t),K=(function({enable:ye,clickTolerance:Se,rollDegreesPerPixelMoved:Ie=.3},be){const je=new Bo({checkCorrectEvent:Qe=>q.mouseButton(Qe)===2&&Qe.ctrlKey});return new ws({clickTolerance:Se,move:(Qe,Ze)=>{const We=be();let Xe=(Ze.x-Qe.x)*Ie;return Ze.y<We.y&&(Xe=-Xe),{rollDelta:Xe}},moveStateManager:je,enable:ye,assignEvents:Vo})})(t,B);l.dragRotate=new is(t,Z,$,K),this._add("mouseRotate",Z,["mousePitch"]),this._add("mousePitch",$,["mouseRotate","mouseRoll"]),this._add("mouseRoll",K,["mousePitch"]),t.interactive&&t.dragRotate&&l.dragRotate.enable();const se=(function({enable:ye,clickTolerance:Se}){const Ie=new Bo({checkCorrectEvent:be=>q.mouseButton(be)===0&&!be.ctrlKey});return new ws({clickTolerance:Se,move:(be,je)=>({around:je,panDelta:je.sub(be)}),activateOnStart:!0,moveStateManager:Ie,enable:ye,assignEvents:Vo})})(t),pe=new If(t,l);l.dragPan=new Gp(p,se,pe),this._add("mousePan",se),this._add("touchPan",pe,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&l.dragPan.enable(t.dragPan);const ge=new ld,me=new Go;l.touchZoomRotate=new Yc(p,me,ge,L),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&l.touchZoomRotate.enable(t.touchZoomRotate),this._add("blockableMapEvent",new Eg(l));const _e=l.scrollZoom=new cd(l,(()=>this._triggerRenderFrame()));this._add("scrollZoom",_e,["mousePan"]),t.interactive&&t.scrollZoom&&l.scrollZoom.enable(t.scrollZoom);const Ae=l.keyboard=new ni(l);this._add("keyboard",Ae),t.interactive&&t.keyboard&&l.keyboard.enable()}_add(t,l,p){this._handlers.push({handlerName:t,handler:l,allowed:p}),this._handlersById[t]=l}stop(t){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gt(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,l,p){for(const v in t)if(v!==p&&(!l||l.indexOf(v)<0))return!0;return!1}_getMapTouches(t){const l=[];for(const p of t)this._el.contains(p.target)&&l.push(p);return l}mergeHandlerResult(t,l,p,v,S){if(!p)return;c.e(t,p);const M={handlerName:v,originalEvent:p.originalEvent||S};p.zoomDelta!==void 0&&(l.zoom=M),p.panDelta!==void 0&&(l.drag=M),p.rollDelta!==void 0&&(l.roll=M),p.pitchDelta!==void 0&&(l.pitch=M),p.bearingDelta!==void 0&&(l.rotate=M)}_applyChanges(){const t={},l={},p={};for(const[v,S,M]of this._changes)v.panDelta&&(t.panDelta=(t.panDelta||new c.P(0,0))._add(v.panDelta)),v.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(t.rollDelta=(t.rollDelta||0)+v.rollDelta),v.around!==void 0&&(t.around=v.around),v.pinchAround!==void 0&&(t.pinchAround=v.pinchAround),v.noInertia&&(t.noInertia=v.noInertia),c.e(l,S),c.e(p,M);this._updateMapTransform(t,l,p),this._changes=[]}_updateMapTransform(t,l,p){const v=this._map,S=v._getTransformForUpdate(),M=v.terrain;if(!(qu(t)||M&&this._terrainMovement))return this._fireEvents(l,p,!0);v._stop(!0);let{panDelta:I,zoomDelta:L,bearingDelta:F,pitchDelta:B,rollDelta:Z,around:$,pinchAround:K}=t;K!==void 0&&($=K),$=$||v.transform.centerPoint,M&&!S.isPointOnMapSurface($)&&($=S.centerPoint);const se={panDelta:I,zoomDelta:L,rollDelta:Z,pitchDelta:B,bearingDelta:F,around:$};this._map.cameraHelper.useGlobeControls&&!S.isPointOnMapSurface($)&&($=S.centerPoint);const pe=$.distSqr(S.centerPoint)<.01?S.center:S.screenPointToLocation(I?$.sub(I):$);this._handleMapControls({terrain:M,tr:S,deltasForHelper:se,preZoomAroundLoc:pe,combinedEventsInProgress:l,panDelta:I}),v._applyUpdatedTransform(S),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(l,p,!0)}_handleMapControls({terrain:t,tr:l,deltasForHelper:p,preZoomAroundLoc:v,combinedEventsInProgress:S,panDelta:M}){const I=this._map.cameraHelper;if(I.handleMapControlsRollPitchBearingZoom(p,l),t)return I.useGlobeControls?(this._terrainMovement||!S.drag&&!S.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void I.handleMapControlsPan(p,l,v)):this._terrainMovement||!S.drag&&!S.zoom?void(S.drag&&this._terrainMovement&&M?l.setCenter(l.screenPointToLocation(l.centerPoint.sub(M))):I.handleMapControlsPan(p,l,v)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void I.handleMapControlsPan(p,l,v));I.handleMapControlsPan(p,l,v)}_fireEvents(t,l,p){const v=Gt(this._eventsInProgress),S=Gt(t),M={};for(const Z in t){const{originalEvent:$}=t[Z];this._eventsInProgress[Z]||(M[`${Z}start`]=$),this._eventsInProgress[Z]=t[Z]}!v&&S&&this._fireEvent("movestart",S.originalEvent);for(const Z in M)this._fireEvent(Z,M[Z]);S&&this._fireEvent("move",S.originalEvent);for(const Z in t){const{originalEvent:$}=t[Z];this._fireEvent(Z,$)}const I={};let L;for(const Z in this._eventsInProgress){const{handlerName:$,originalEvent:K}=this._eventsInProgress[Z];this._handlersById[$].isActive()||(delete this._eventsInProgress[Z],L=l[$]||K,I[`${Z}end`]=L)}for(const Z in I)this._fireEvent(Z,I[Z]);const F=Gt(this._eventsInProgress),B=(v||S)&&!F;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Z=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Z.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Z)}if(p&&B){this._updatingCamera=!0;const Z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!Z||!Z.essential&&Y.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:L})),$(this._map.getBearing())&&this._map.resetNorth()):($(Z.bearing||this._map.getBearing())&&(Z.bearing=0),Z.freezeElevation=!0,this._map.easeTo(Z,{originalEvent:L})),this._updatingCamera=!1}}_fireEvent(t,l){this._map.fire(new c.l(t,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Ss("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ur extends c.E{constructor(t,l,p){super(),this._renderFrameCallback=()=>{const v=Math.min((ie()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=p.bearingSnap,this.cameraHelper=l,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(t,l){t.apply(this.transform),this.transform=t,this.cameraHelper=l}getCenter(){return new c.V(this.transform.center.lng,this.transform.center.lat)}setCenter(t,l){return this.jumpTo({center:t},l)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,l){return this.jumpTo({elevation:t},l),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,l,p){return t=c.P.convert(t).mult(-1),this.panTo(this.transform.center,c.e({offset:t},l),p)}panTo(t,l,p){return this.easeTo(c.e({center:t},l),p)}getZoom(){return this.transform.zoom}setZoom(t,l){return this.jumpTo({zoom:t},l),this}zoomTo(t,l,p){return this.easeTo(c.e({zoom:t},l),p)}zoomIn(t,l){return this.zoomTo(this.getZoom()+1,t,l),this}zoomOut(t,l){return this.zoomTo(this.getZoom()-1,t,l),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,l){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new c.l("movestart",l)).fire(new c.l("move",l)).fire(new c.l("moveend",l))),this}getBearing(){return this.transform.bearing}setBearing(t,l){return this.jumpTo({bearing:t},l),this}getPadding(){return this.transform.padding}setPadding(t,l){return this.jumpTo({padding:t},l),this}rotateTo(t,l,p){return this.easeTo(c.e({bearing:t},l),p)}resetNorth(t,l){return this.rotateTo(0,c.e({duration:1e3},t),l),this}resetNorthPitch(t,l){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},t),l),this}snapToNorth(t,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,l):this}getPitch(){return this.transform.pitch}setPitch(t,l){return this.jumpTo({pitch:t},l),this}getRoll(){return this.transform.roll}setRoll(t,l){return this.jumpTo({roll:t},l),this}cameraForBounds(t,l){t=Xn.convert(t).adjustAntiMeridian();const p=l&&l.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),p,l)}_cameraForBoxAndBearing(t,l,p,v){const S={top:0,bottom:0,right:0,left:0};if(typeof(v=c.e({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const F=v.padding;v.padding={top:F,bottom:F,right:F,left:F}}const M=c.e(S,v.padding);v.padding=M;const I=this.transform,L=new Xn(t,l);return this.cameraHelper.cameraForBoxAndBearing(v,M,L,p,I)}fitBounds(t,l,p){return this._fitInternal(this.cameraForBounds(t,l),l,p)}fitScreenCoordinates(t,l,p,v,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(t)),this.transform.screenPointToLocation(c.P.convert(l)),p,v),v,S)}_fitInternal(t,l,p){return t?(delete(l=c.e(t,l)).padding,l.linear?this.easeTo(l,p):this.flyTo(l,p)):this}jumpTo(t,l){this.stop();const p=this._getTransformForUpdate();let v=!1,S=!1,M=!1;const I=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,t);const L=p.zoom!==I;return"elevation"in t&&p.elevation!==+t.elevation&&p.setElevation(+t.elevation),"bearing"in t&&p.bearing!==+t.bearing&&(v=!0,p.setBearing(+t.bearing)),"pitch"in t&&p.pitch!==+t.pitch&&(S=!0,p.setPitch(+t.pitch)),"roll"in t&&p.roll!==+t.roll&&(M=!0,p.setRoll(+t.roll)),t.padding==null||p.isPaddingEqual(t.padding)||p.setPadding(t.padding),this._applyUpdatedTransform(p),this.fire(new c.l("movestart",l)).fire(new c.l("move",l)),L&&this.fire(new c.l("zoomstart",l)).fire(new c.l("zoom",l)).fire(new c.l("zoomend",l)),v&&this.fire(new c.l("rotatestart",l)).fire(new c.l("rotate",l)).fire(new c.l("rotateend",l)),S&&this.fire(new c.l("pitchstart",l)).fire(new c.l("pitch",l)).fire(new c.l("pitchend",l)),M&&this.fire(new c.l("rollstart",l)).fire(new c.l("roll",l)).fire(new c.l("rollend",l)),this.fire(new c.l("moveend",l))}calculateCameraOptionsFromTo(t,l,p,v=0){const S=c.a9.fromLngLat(t,l),M=c.a9.fromLngLat(p,v),I=M.x-S.x,L=M.y-S.y,F=M.z-S.z,B=Math.hypot(I,L,F);if(B===0)throw new Error("Can't calculate camera options with same From and To");const Z=Math.hypot(I,L),$=c.at(this.transform.cameraToCenterDistance/B/this.transform.tileSize),K=180*Math.atan2(I,-L)/Math.PI;let se=180*Math.acos(Z/B)/Math.PI;return se=F<0?90-se:90+se,{center:M.toLngLat(),elevation:v,zoom:$,pitch:se,bearing:K}}calculateCameraOptionsFromCameraLngLatAltRotation(t,l,p,v,S){const M=this.transform.calculateCenterFromCameraLngLatAlt(t,l,p,v);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:p,pitch:v,roll:S}}easeTo(t,l){this._stop(!1,t.easeId),((t=c.e({offset:[0,0],duration:500,easing:c.cy},t)).animate===!1||!t.essential&&Y.prefersReducedMotion)&&(t.duration=0);const p=this._getTransformForUpdate(),v=this.getBearing(),S=p.pitch,M=p.roll,I="bearing"in t?this._normalizeBearing(t.bearing,v):v,L="pitch"in t?+t.pitch:S,F="roll"in t?this._normalizeBearing(t.roll,M):M,B="padding"in t?t.padding:p.padding,Z=c.P.convert(t.offset);let $,K;t.around&&($=c.V.convert(t.around),K=p.locationToScreenPoint($));const se={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},pe=this.cameraHelper.handleEaseTo(p,{bearing:I,pitch:L,roll:F,padding:B,around:$,aroundPoint:K,offsetAsPoint:Z,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||v!==I,this._pitching=this._pitching||L!==S,this._rolling=this._rolling||F!==M,this._padding=!p.isPaddingEqual(B),this._zooming=this._zooming||pe.isZooming,this._easeId=t.easeId,this._prepareEase(l,t.noMoveStart,se),this.terrain&&this._prepareElevation(pe.elevationCenter),this._ease((ge=>{pe.easeFunc(ge),this.terrain&&!t.freezeElevation&&this._updateElevation(ge),this._applyUpdatedTransform(p),this._fireMoveEvents(l)}),(ge=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(l,ge)}),t),this}_prepareEase(t,l,p={}){this._moving=!0,l||p.moving||this.fire(new c.l("movestart",t)),this._zooming&&!p.zooming&&this.fire(new c.l("zoomstart",t)),this._rotating&&!p.rotating&&this.fire(new c.l("rotatestart",t)),this._pitching&&!p.pitching&&this.fire(new c.l("pitchstart",t)),this._rolling&&!p.rolling&&this.fire(new c.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&l!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(p-(l-(p*t+this._elevationStart))/(1-t)),this._elevationTarget=l}this.transform.setElevation(c.G.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const l=t.getCameraLngLat(),p=t.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(l,t.zoom):0;if(p<v){const S=this.calculateCameraOptionsFromTo(l,v,t.center,t.elevation);return{pitch:S.pitch,zoom:S.zoom}}return{}}_applyUpdatedTransform(t){const l=[];if(l.push((v=>this._elevateCameraIfInsideTerrain(v))),this.transformCameraUpdate&&l.push((v=>this.transformCameraUpdate(v))),!l.length)return;const p=t.clone();for(const v of l){const S=p.clone(),{center:M,zoom:I,roll:L,pitch:F,bearing:B,elevation:Z}=v(S);M&&S.setCenter(M),Z!==void 0&&S.setElevation(Z),I!==void 0&&S.setZoom(I),L!==void 0&&S.setRoll(L),F!==void 0&&S.setPitch(F),B!==void 0&&S.setBearing(B),p.apply(S)}this.transform.apply(p)}_fireMoveEvents(t){this.fire(new c.l("move",t)),this._zooming&&this.fire(new c.l("zoom",t)),this._rotating&&this.fire(new c.l("rotate",t)),this._pitching&&this.fire(new c.l("pitch",t)),this._rolling&&this.fire(new c.l("roll",t))}_afterEase(t,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const p=this._zooming,v=this._rotating,S=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new c.l("zoomend",t)),v&&this.fire(new c.l("rotateend",t)),S&&this.fire(new c.l("pitchend",t)),M&&this.fire(new c.l("rollend",t)),this.fire(new c.l("moveend",t))}flyTo(t,l){if(!t.essential&&Y.prefersReducedMotion){const Xe=c.U(t,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Xe,l)}this.stop(),t=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.cy},t);const p=this._getTransformForUpdate(),v=p.bearing,S=p.pitch,M=p.roll,I=p.padding,L="bearing"in t?this._normalizeBearing(t.bearing,v):v,F="pitch"in t?+t.pitch:S,B="roll"in t?this._normalizeBearing(t.roll,M):M,Z="padding"in t?t.padding:p.padding,$=c.P.convert(t.offset);let K=p.centerPoint.add($);const se=p.screenPointToLocation(K),pe=this.cameraHelper.handleFlyTo(p,{bearing:L,pitch:F,roll:B,padding:Z,locationAtOffset:se,offsetAsPoint:$,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let ge=t.curve;const me=Math.max(p.width,p.height),_e=me/pe.scaleOfZoom,Ae=pe.pixelPathLength;typeof pe.scaleOfMinZoom=="number"&&(ge=Math.sqrt(me/pe.scaleOfMinZoom/Ae*2));const ye=ge*ge;function Se(Xe){const Et=(_e*_e-me*me+(Xe?-1:1)*ye*ye*Ae*Ae)/(2*(Xe?_e:me)*ye*Ae);return Math.log(Math.sqrt(Et*Et+1)-Et)}function Ie(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function be(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}const je=Se(!1);let Qe=function(Xe){return be(je)/be(je+ge*Xe)},Ze=function(Xe){return me*((be(je)*(Ie(Et=je+ge*Xe)/be(Et))-Ie(je))/ye)/Ae;var Et},We=(Se(!0)-je)/ge;if(Math.abs(Ae)<2e-6||!isFinite(We)){if(Math.abs(me-_e)<1e-6)return this.easeTo(t,l);const Xe=_e<me?-1:1;We=Math.abs(Math.log(_e/me))/ge,Ze=()=>0,Qe=Et=>Math.exp(Xe*ge*Et)}return t.duration="duration"in t?+t.duration:1e3*We/("screenSpeed"in t?+t.screenSpeed/ge:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=v!==L,this._pitching=F!==S,this._rolling=B!==M,this._padding=!p.isPaddingEqual(Z),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(pe.targetCenter),this._ease((Xe=>{const Et=Xe*We,At=1/Qe(Et),pt=Ze(Et);this._rotating&&p.setBearing(c.G.number(v,L,Xe)),this._pitching&&p.setPitch(c.G.number(S,F,Xe)),this._rolling&&p.setRoll(c.G.number(M,B,Xe)),this._padding&&(p.interpolatePadding(I,Z,Xe),K=p.centerPoint.add($)),pe.easeFunc(Xe,At,pt,K),this.terrain&&!t.freezeElevation&&this._updateElevation(Xe),this._applyUpdatedTransform(p),this._fireMoveEvents(l)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(l)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,l){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,l)}return t||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(t,l,p){p.animate===!1||p.duration===0?(t(1),l()):(this._easeStart=ie(),this._easeOptions=p,this._onEaseFrame=t,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,l){t=c.W(t,-180,180);const p=Math.abs(t-l);return Math.abs(t-360-l)<p&&(t-=360),Math.abs(t+360-l)<p&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLat(c.V.convert(t),this.transform):null}}const Hi={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class tr{constructor(t=Hi){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=q.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=q.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=q.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){q.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,l){const p=this._map._getUIString(`AttributionControl.${l}`);t.title=p,t.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((v=>typeof v!="string"?"":v))):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const l=this._map.style.tileManagers;for(const v in l){const S=l[v];if(S.used||S.usedForTerrain){const M=S.getSource();M.attribution&&t.indexOf(M.attribution)<0&&t.push(M.attribution)}}t=t.filter((v=>String(v).trim())),t.sort(((v,S)=>v.length-S.length)),t=t.filter(((v,S)=>{for(let M=S+1;M<t.length;M++)if(t[M].indexOf(v)>=0)return!1;return!0}));const p=t.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,t.length?(this._innerContainer.innerHTML=q.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class dd{constructor(t={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const p=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=q.create("div","maplibregl-ctrl");const l=q.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){q.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class bl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const l=++this._id;return this._queue.push({callback:t,id:l,cancelled:!1}),l}remove(t){const l=this._currentlyRunning,p=l?this._queue.concat(l):this._queue;for(const v of p)if(v.id===t)return void(v.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const p of l)if(!p.cancelled&&(p.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var En=c.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Kn extends c.E{constructor(t){super(),this._lastTilesetChange=ie(),this.tileManager=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(t,l){this.tileManager.update(t,l),this._renderableTilesKeys=[];const p={};for(const v of Qi(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l,calculateTileZoom:this.tileManager._source.calculateTileZoom}))p[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),c.c7(v.terrainRttPosMatrix32f,0,c.a5,c.a5,0,0,1),this._tiles[v.key]=new ht(v,this.tileSize),this._lastTilesetChange=ie());for(const v in this._tiles)p[v]||delete this._tiles[v]}freeRtt(t){for(const l in this._tiles){const p=this._tiles[l];(!t||p.tileID.equals(t)||p.tileID.isChildOf(t)||t.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,l){return l?this._getTerrainCoordsForTileRanges(t,l):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const l={};for(const p of this._renderableTilesKeys){const v=this._tiles[p].tileID,S=t.clone(),M=c.bk();if(v.canonical.equals(t.canonical))c.c7(M,0,c.a5,c.a5,0,0,1);else if(v.canonical.isChildOf(t.canonical)){const I=v.canonical.z-t.canonical.z,L=v.canonical.x-(v.canonical.x>>I<<I),F=v.canonical.y-(v.canonical.y>>I<<I),B=c.a5>>I;c.c7(M,0,B,B,0,0,1),c.O(M,M,[-L*B,-F*B,0])}else{if(!t.canonical.isChildOf(v.canonical))continue;{const I=t.canonical.z-v.canonical.z,L=t.canonical.x-(t.canonical.x>>I<<I),F=t.canonical.y-(t.canonical.y>>I<<I),B=c.a5>>I;c.c7(M,0,c.a5,c.a5,0,0,1),c.O(M,M,[L*B,F*B,0]),c.Q(M,M,[1/2**I,1/2**I,0])}}S.terrainRttPosMatrix32f=new Float32Array(M),l[p]=S}return l}_getTerrainCoordsForTileRanges(t,l){const p={};for(const v of this._renderableTilesKeys){const S=this._tiles[v].tileID;if(!this._isWithinTileRanges(S,l))continue;const M=t.clone(),I=c.bk();if(S.canonical.z===t.canonical.z){const L=t.canonical.x-S.canonical.x,F=t.canonical.y-S.canonical.y;c.c7(I,0,c.a5,c.a5,0,0,1),c.O(I,I,[L*c.a5,F*c.a5,0])}else if(S.canonical.z>t.canonical.z){const L=S.canonical.z-t.canonical.z,F=S.canonical.x-(S.canonical.x>>L<<L),B=S.canonical.y-(S.canonical.y>>L<<L),Z=t.canonical.x-(S.canonical.x>>L),$=t.canonical.y-(S.canonical.y>>L),K=c.a5>>L;c.c7(I,0,K,K,0,0,1),c.O(I,I,[-F*K+Z*c.a5,-B*K+$*c.a5,0])}else{const L=t.canonical.z-S.canonical.z,F=t.canonical.x-(t.canonical.x>>L<<L),B=t.canonical.y-(t.canonical.y>>L<<L),Z=(t.canonical.x>>L)-S.canonical.x,$=(t.canonical.y>>L)-S.canonical.y,K=c.a5<<L;c.c7(I,0,K,K,0,0,1),c.O(I,I,[F*c.a5+Z*K,B*c.a5+$*K,0])}M.terrainRttPosMatrix32f=new Float32Array(I),p[v]=M}return p}getSourceTile(t,l){const p=this.tileManager._source;let v=t.overscaledZ-this.deltaZoom;if(v>p.maxzoom&&(v=p.maxzoom),v<p.minzoom)return;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(v).key);let S=this.findTileInCaches(this._sourceTileCache[t.key]);if(!S?.dem&&l)for(;v>=p.minzoom&&!S?.dem;)S=this.findTileInCaches(t.scaledTo(v--).key);return S}findTileInCaches(t){let l=this.tileManager.getTileByID(t);return l||(l=this.tileManager._outOfViewCache.getByKey(t),l)}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,l){return l[t.canonical.z]&&t.canonical.x>=l[t.canonical.z].minTileX&&t.canonical.x<=l[t.canonical.z].maxTileX&&t.canonical.y>=l[t.canonical.z].minTileY&&t.canonical.y<=l[t.canonical.z].maxTileY}}class xn{constructor(t,l,p){this._meshCache={},this.painter=t,this.tileManager=new Kn(l),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,l,p,v=c.a5){var S;if(!(l>=0&&l<v&&p>=0&&p<v))return 0;const M=this.getTerrainData(t),I=(S=M.tile)===null||S===void 0?void 0:S.dem;if(!I)return 0;const L=c.cC([],[l/v*c.a5,p/v*c.a5],M.u_terrain_matrix),F=[L[0]*I.dim,L[1]*I.dim],B=Math.floor(F[0]),Z=Math.floor(F[1]),$=F[0]-B,K=F[1]-Z;return I.get(B,Z)*(1-$)*(1-K)+I.get(B+1,Z)*$*(1-K)+I.get(B,Z+1)*(1-$)*K+I.get(B+1,Z+1)*$*K}getElevationForLngLatZoom(t,l){if(!c.cD(l,t.wrap()))return 0;const{tileID:p,mercatorX:v,mercatorY:S}=this._getOverscaledTileIDFromLngLatZoom(t,l);return this.getElevation(p,v%c.a5,S%c.a5,c.a5)}getElevationForLngLat(t,l){const p=Qi(l,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let v=0;for(const S of p)S.canonical.z>v&&(v=Math.min(S.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(t,v)}getElevation(t,l,p,v=c.a5){return this.getDEMElevation(t,l,p,v)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const v=this.painter.context,S=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(v,S,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(v,new c.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ar([])}const l=this.tileManager.getSourceTile(t,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const v=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new c.T(v,l.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),l.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const p=l&&l.toString()+l.tileID.key+t.key;if(p&&!this._demMatrixCache[p]){const v=this.tileManager.getSource().maxzoom;let S=t.canonical.z-l.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=v?S=t.canonical.z-v:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=t.canonical.x-(t.canonical.x>>S<<S),I=t.canonical.y-(t.canonical.y>>S<<S),L=c.cE(new Float64Array(16),[1/(c.a5<<S),1/(c.a5<<S),0]);c.O(L,L,[M*c.a5,I*c.a5,0]),this._demMatrixCache[t.key]={matrix:L,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(t){const l=this.painter,p=l.width/devicePixelRatio,v=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(l.context,{width:p,height:v,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(l.context,{width:p,height:v,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(p,v,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,p,v))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,M=0;S<this._coordsTextureSize;S++)for(let I=0;I<this._coordsTextureSize;I++,M+=4)l[M+0]=255&I,l[M+1]=255&S,l[M+2]=I>>8<<4|S>>8,l[M+3]=0;const p=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),v=new c.T(t,p,t.gl.RGBA,{premultiply:!1});return v.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),p=this.painter.context,v=p.gl,S=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(S,I-M-1,1,1,v.RGBA,v.UNSIGNED_BYTE,l),p.bindFramebuffer.set(null);const L=l[0]+(l[2]>>4<<8),F=l[1]+((15&l[2])<<8),B=this.coordsIndex[255-l[3]],Z=B&&this.tileManager.getTileByID(B);if(!Z)return null;const $=this._coordsTextureSize,K=(1<<Z.tileID.canonical.z)*$;return new c.a9((Z.tileID.canonical.x*$+L)/K+Z.tileID.wrap,(Z.tileID.canonical.y*$+F)/K,this.getElevation(Z.tileID,L,F,$))}depthAtPoint(t){const l=new Uint8Array(4),p=this.painter.context,v=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,l),p.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(t){var l;const p=((l=this.painter.style.projection)===null||l===void 0?void 0:l.transitionState)>0,v=p&&t.canonical.y===0,S=p&&t.canonical.y===(1<<t.canonical.z)-1,M=`m_${v?"n":""}_${S?"s":""}`;if(this._meshCache[M])return this._meshCache[M];const I=this.painter.context,L=new c.cF,F=new c.aY,B=this.meshSize,Z=c.a5/B,$=B*B;for(let be=0;be<=B;be++)for(let je=0;je<=B;je++)L.emplaceBack(je*Z,be*Z,0);for(let be=0;be<$;be+=B+1)for(let je=0;je<B;je++)F.emplaceBack(je+be,B+je+be+1,B+je+be+2),F.emplaceBack(je+be,B+je+be+2,je+be+1);const K=L.length,se=K+(B+1),pe=(B+1)*B,ge=v?c.br:0,me=v?0:1,_e=S?c.bs:c.a5,Ae=S?0:1;for(let be=0;be<=B;be++)L.emplaceBack(be*Z,ge,me);for(let be=0;be<=B;be++)L.emplaceBack(be*Z,_e,Ae);for(let be=0;be<B;be++)F.emplaceBack(pe+be,se+be,se+be+1),F.emplaceBack(pe+be,se+be+1,pe+be+1),F.emplaceBack(0+be,K+be+1,K+be),F.emplaceBack(0+be,0+be+1,K+be+1);const ye=L.length,Se=ye+2*(B+1);for(const be of[0,1])for(let je=0;je<=B;je++)for(const Qe of[0,1])L.emplaceBack(be*c.a5,je*Z,Qe);for(let be=0;be<2*B;be+=2)F.emplaceBack(ye+be,ye+be+1,ye+be+3),F.emplaceBack(ye+be,ye+be+3,ye+be+2),F.emplaceBack(Se+be,Se+be+3,Se+be+1),F.emplaceBack(Se+be,Se+be+2,Se+be+3);const Ie=new mi(I.createVertexBuffer(L,En.members),I.createIndexBuffer(F),c.aX.simpleSegment(0,0,L.length,F.length));return this._meshCache[M]=Ie,Ie}getMeshFrameDelta(t){return 2*Math.PI*c.bE/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,l){var p;if(!c.cD(l,t.wrap()))return 0;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(t,l);return(p=this.getMinMaxElevation(v).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(t){const l=this.getTerrainData(t).tile,p={minElevation:null,maxElevation:null};return l&&l.dem&&(p.minElevation=l.dem.min*this.exaggeration,p.maxElevation=l.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(t,l){const p=c.a9.fromLngLat(t.wrap()),v=(1<<l)*c.a5,S=p.x*v,M=p.y*v,I=Math.floor(S/c.a5),L=Math.floor(M/c.a5);return{tileID:new c.a2(l,0,l,I,L),mercatorX:S,mercatorY:M}}}class Gi{constructor(t,l,p){this._context=t,this._size=l,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(p.texture),{id:t,fbo:l,texture:p,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((l=>t.id!==l)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((t=>!t.inUse))===!1}}const Es={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Ys{constructor(t,l){this.painter=t,this.terrain=l,this.pool=new Gi(t.context,30,l.tileManager.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=t._order.filter((p=>!t._layers[p].isHidden(l))),this._coordsAscending={};for(const p in t.tileManagers){this._coordsAscending[p]={};const v=t.tileManagers[p].getVisibleCoordinates(),S=t.tileManagers[p].getSource(),M=S instanceof Dr?S.terrainTileRanges:null;for(const I of v){const L=this.terrain.tileManager.getTerrainCoords(I,M);for(const F in L)this._coordsAscending[p][F]||(this._coordsAscending[p][F]=[]),this._coordsAscending[p][F].push(L[F])}}this._coordsAscendingStr={};for(const p of t._order){const v=t._layers[p],S=v.source;if(Es[v.type]&&!this._coordsAscendingStr[S]){this._coordsAscendingStr[S]={};for(const M in this._coordsAscending[S])this._coordsAscendingStr[S][M]=this._coordsAscending[S][M].map((I=>I.key)).sort().join()}}for(const p of this._renderableTiles)for(const v in this._coordsAscendingStr){const S=this._coordsAscendingStr[v][p.tileID.key];S&&S!==p.rttCoords[v]&&(p.rtt=[])}}renderLayer(t,l){if(t.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},l),{isRenderingToTexture:!0}),v=t.type,S=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Es[v]&&(this._prevType&&Es[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(t.id),!M))return!0;if(Es[this._prevType]||Es[v]&&M){this._prevType=v;const I=this._stacks.length-1,L=this._stacks[I]||[];for(const F of this._renderableTiles){if(this.pool.isFull()&&(Ef(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(F),F.rtt[I]){const Z=this.pool.getObjectForId(F.rtt[I].id);if(Z.stamp===F.rtt[I].stamp){this.pool.useObject(Z);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),F.rtt[I]={id:B.id,stamp:B.stamp},S.context.bindFramebuffer.set(B.fbo.framebuffer),S.context.clear({color:c.bp.transparent,stencil:0}),S.currentStencilSource=void 0;for(let Z=0;Z<L.length;Z++){const $=S.style._layers[L[Z]],K=$.source?this._coordsAscending[$.source][F.tileID.key]:[F.tileID];S.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),S._renderTileClippingMasks($,K,!0),S.renderLayer(S,S.style.tileManagers[$.source],$,K,p),$.source&&(F.rttCoords[$.source]=this._coordsAscendingStr[$.source][F.tileID.key])}}return Ef(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),Es[v]}return!1}}const Hc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Wc=A,xl={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Hi,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},$p={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ki{constructor(t,l,p=!1){this.mousedown=S=>{this.startMove(S,q.mousePos(this.element,S)),q.addEventListener(window,"mousemove",this.mousemove),q.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.move(S,q.mousePos(this.element,S))},this.mouseup=S=>{this._rotatePitchHandler.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=q.touchPos(this.element,S.targetTouches)[0],this.startMove(S,this._startPos),q.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),q.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=q.touchPos(this.element,S.targetTouches)[0],this.move(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=l;const v=new sd;this._rotatePitchHandler=new ws({clickTolerance:3,move:(S,M)=>{const I=l.getBoundingClientRect(),L=new c.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:c.cx(new c.P(S.x,M.y),M,L),pitchDelta:p?-.5*(M.y-S.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=t,q.addEventListener(l,"mousedown",this.mousedown),q.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),q.addEventListener(l,"touchcancel",this.reset)}startMove(t,l){this._rotatePitchHandler.dragStart(t,l),q.disableDrag()}move(t,l){const p=this.map,{bearingDelta:v,pitchDelta:S}=this._rotatePitchHandler.dragMove(t,l)||{};v&&p.setBearing(p.getBearing()+v),S&&p.setPitch(p.getPitch()+S)}off(){const t=this.element;q.removeEventListener(t,"mousedown",this.mousedown),q.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),q.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),q.removeEventListener(window,"touchend",this.touchend),q.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){q.enableDrag(),q.removeEventListener(window,"mousemove",this.mousemove),q.removeEventListener(window,"mouseup",this.mouseup),q.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),q.removeEventListener(window,"touchend",this.touchend)}}let Hs;function Yu(w,t,l,p=!1){if(p||!l.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const v=new c.V(w.lng,w.lat);if(w=new c.V(w.lng,w.lat),t){const S=new c.V(w.lng-360,w.lat),M=new c.V(w.lng+360,w.lat),I=l.locationToScreenPoint(w).distSqr(t);l.locationToScreenPoint(S).distSqr(t)<I?w=S:l.locationToScreenPoint(M).distSqr(t)<I&&(w=M)}for(;Math.abs(w.lng-l.center.lng)>180;){const S=l.locationToScreenPoint(w);if(S.x>=0&&S.y>=0&&S.x<=l.width&&S.y<=l.height)break;w.lng>l.center.lng?w.lng-=360:w.lng+=360}return w.lng!==v.lng&&l.isPointOnMapSurface(l.locationToScreenPoint(w))?w:v}const Hu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function fd(w,t,l){const p=w.classList;for(const v in Hu)p.remove(`maplibregl-${l}-anchor-${v}`);p.add(`maplibregl-${l}-anchor-${t}`)}class pd extends c.E{constructor(t){if(super(),this._onKeyPress=l=>{const p=l.code,v=l.charCode||l.keyCode;p!=="Space"&&p!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=l=>{const p=l.originalEvent.target,v=this._element;this._popup&&(p===v||v.contains(p))&&this.togglePopup()},this._update=l=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();(l?.type==="terrain"||l?.type==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=Yu(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),q.setTransform(this._element,`${Hu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${v}`),Y.frameAsync(new AbortController).then((()=>{this._updateOpacity(l&&l.type==="moveend")})).catch((()=>{}))},this._onMove=l=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t?.opacity,t?.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=c.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=q.create("div");const l=q.createNS("http://www.w3.org/2000/svg","svg"),p=41,v=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${p}px`),l.setAttributeNS(null,"width",`${v}px`),l.setAttributeNS(null,"viewBox",`0 0 ${v} ${p}`);const S=q.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const M=q.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const I=q.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of L){const _e=q.createNS("http://www.w3.org/2000/svg","ellipse");_e.setAttributeNS(null,"opacity","0.04"),_e.setAttributeNS(null,"cx","10.5"),_e.setAttributeNS(null,"cy","5.80029008"),_e.setAttributeNS(null,"rx",me.rx),_e.setAttributeNS(null,"ry",me.ry),I.appendChild(_e)}const F=q.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill",this._color);const B=q.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),F.appendChild(B);const Z=q.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"opacity","0.25"),Z.setAttributeNS(null,"fill","#000000");const $=q.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Z.appendChild($);const K=q.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");const se=q.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=q.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const ge=q.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),se.appendChild(pe),se.appendChild(ge),M.appendChild(I),M.appendChild(F),M.appendChild(Z),M.appendChild(K),M.appendChild(se),l.appendChild(M),l.setAttributeNS(null,"height",p*this._scale+"px"),l.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(l),this._offset=c.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(l=>{l.preventDefault()})),this._element.addEventListener("mousedown",(l=>{l.preventDefault()})),fd(this._element,this._anchor,"marker"),t&&t.className)for(const l of t.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),q.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=c.V.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const v=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var l,p;const v=(l=this._map)===null||l===void 0?void 0:l.terrain,S=this._map.transform.isLocationOccluded(this._lngLat);if(!v||S){const K=S?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==K&&(this._element.style.opacity=K))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const M=this._map,I=M.terrain.depthAtPoint(this._pos),L=M.terrain.getElevationForLngLat(this._lngLat,M.transform);if(M.transform.lngLatToCameraDepth(this._lngLat,L)-I<.006)return void(this._element.style.opacity=this._opacity);const F=-this._offset.y/M.transform.pixelsPerMeter,B=Math.sin(M.getPitch()*Math.PI/180)*F,Z=M.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),$=M.transform.lngLatToCameraDepth(this._lngLat,L+B)-Z>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&$&&this._popup.remove(),this._element.style.opacity=$?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=c.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,l){return(this._opacity===void 0||t===void 0&&l===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const md={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let sc=0,wl=!1;const ia={maxWidth:100,unit:"metric"};function $i(w,t,l){const p=l&&l.maxWidth||100,v=w._container.clientHeight/2,S=w._container.clientWidth/2,M=w.unproject([S-p/2,v]),I=w.unproject([S+p/2,v]),L=Math.round(w.project(I).x-w.project(M).x),F=Math.min(p,L,w._container.clientWidth),B=M.distanceTo(I);if(l&&l.unit==="imperial"){const Z=3.2808*B;Z>5280?Zo(t,F,Z/5280,w._getUIString("ScaleControl.Miles")):Zo(t,F,Z,w._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Zo(t,F,B/1852,w._getUIString("ScaleControl.NauticalMiles")):B>=1e3?Zo(t,F,B/1e3,w._getUIString("ScaleControl.Kilometers")):Zo(t,F,B,w._getUIString("ScaleControl.Meters"))}function Zo(w,t,l,p){const v=(function(S){const M=Math.pow(10,`${Math.floor(S)}`.length-1);let I=S/M;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:(function(L){const F=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*F)/F})(I),M*I})(l);w.style.width=t*(v/l)+"px",w.innerHTML=`${v}&nbsp;${p}`}const Xc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Qc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Wu(w){if(w){if(typeof w=="number"){const t=Math.round(Math.abs(w)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,w),"top-left":new c.P(t,t),"top-right":new c.P(-t,t),bottom:new c.P(0,-w),"bottom-left":new c.P(t,-t),"bottom-right":new c.P(-t,-t),left:new c.P(w,0),right:new c.P(-w,0)}}if(w instanceof c.P||Array.isArray(w)){const t=c.P.convert(w);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:c.P.convert(w.center||[0,0]),top:c.P.convert(w.top||[0,0]),"top-left":c.P.convert(w["top-left"]||[0,0]),"top-right":c.P.convert(w["top-right"]||[0,0]),bottom:c.P.convert(w.bottom||[0,0]),"bottom-left":c.P.convert(w["bottom-left"]||[0,0]),"bottom-right":c.P.convert(w["bottom-right"]||[0,0]),left:c.P.convert(w.left||[0,0]),right:c.P.convert(w.right||[0,0])}}return Wu(new c.P(0,0))}const Ws=A;_.AJAXError=c.cI,_.Event=c.l,_.Evented=c.E,_.LngLat=c.V,_.MercatorCoordinate=c.a9,_.Point=c.P,_.addProtocol=c.cJ,_.config=c.c,_.removeProtocol=c.cK,_.AttributionControl=tr,_.BoxZoomHandler=rc,_.CanvasSource=re,_.CooperativeGesturesHandler=jt,_.DoubleClickZoomHandler=kf,_.DragPanHandler=Gp,_.DragRotateHandler=is,_.EdgeInsets=Ha,_.FullscreenControl=class extends c.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var t;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=l?.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){q.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=q.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);q.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},_.GeoJSONSource=ji,_.GeolocateControl=class extends c.E{constructor(w){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const l=new c.V(t.coords.longitude,t.coords.latitude),p=t.coords.accuracy,v=this._map.getBearing(),S=c.e({bearing:v},this.options.fitBoundsOptions),M=Xn.fromLngLat(l,p);this._map.fitBounds(M,S,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const l=new c.V(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=t.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&wl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=q.create("button","maplibregl-ctrl-geolocate",this._container),q.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=q.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new pd({element:this._dotElement}),this._circleElement=q.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(l=>{const p=l?.[0]instanceof ResizeObserverEntry;l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))}))}},this.options=c.e({},md,w)}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return c._(this,arguments,void 0,(function*(t=!1){if(Hs!==void 0&&!t)return Hs;if(window.navigator.permissions===void 0)return Hs=!!window.navigator.geolocation,Hs;try{Hs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Hs=!!window.navigator.geolocation}return Hs}))})().then((t=>this._finishSetupUI(t))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),q.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,sc=0,wl=!1}_isOutOfMapMaxBounds(w){const t=this._map.getMaxBounds(),l=w.coords;return t&&(l.longitude<t.getWest()||l.longitude>t.getEast()||l.latitude<t.getSouth()||l.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const t=this._map.project(w),l=this._map.unproject([t.x+100,t.y]),p=w.distanceTo(l)/100,v=2*this._accuracy/p;this._circleElement.style.width=`${v.toFixed(2)}px`,this._circleElement.style.height=`${v.toFixed(2)}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":sc--,wl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),sc++,sc>1?(w={maximumAge:6e5,timeout:0},wl=!0):(w=this.options.positionOptions,wl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},_.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const t=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=q.create("button","maplibregl-ctrl-globe",this._container),q.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){q.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},_.Hash=cr,_.ImageSource=Dr,_.KeyboardHandler=ni,_.LngLatBounds=Xn,_.LogoControl=dd,_.Map=class extends ur{constructor(w){var t,l;c.cG.mark(c.cH.create);const p=Object.assign(Object.assign(Object.assign({},xl),w),{canvasContextAttributes:Object.assign(Object.assign({},xl.canvasContextAttributes),w.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new Er,S=new Oc;if(p.minZoom!==void 0&&v.setMinZoom(p.minZoom),p.maxZoom!==void 0&&v.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&v.setMinPitch(p.minPitch),p.maxPitch!==void 0&&v.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&v.setRenderWorldCopies(p.renderWorldCopies),p.transformConstrain!==null&&v.setConstrainOverride(p.transformConstrain),super(v,S,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new bl,this._controls=[],this._mapId=c.af(),this._lostContextStyle={style:null,images:null},this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const L of Object.values(this.style._layers))if(L.type==="custom"&&console.warn(`Custom layer with id '${L.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),L._listeners)for(const[F]of Object.entries(L._listeners))console.warn(`Custom layer with id '${L.id}' had event listeners for event '${F}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new c.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new c.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Hc),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this._zoomLevelsToOverscale=p.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=p.transformCameraUpdate,this.transformConstrain=p.transformConstrain,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,p.reduceMotion!==void 0&&(Y.prefersReducedMotion=p.reduceMotion),this._imageQueueHandle=Ne.addThrottleControl((()=>this.isMoving())),this._requestManager=new at(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const L=Bp((F=>{this._trackResize&&!this._removed&&(this.resize(F),this.redraw())}),50);this._resizeObserver=new ResizeObserver((F=>{I?L(F):I=!0})),this._resizeObserver.observe(this._container)}this.handlers=new hd(this,p),this._hash=p.hash&&new cr(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,c.e({},p.fitBoundsOptions,{duration:0}))));const M=typeof p.style=="string"||((l=(t=p.style)===null||t===void 0?void 0:t.projection)===null||l===void 0?void 0:l.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new tr(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new dd,p.logoPosition),this.on("style.load",(()=>{if(M||this._resizeTransform(),this.transform.unmodified){const I=c.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}})),this.on("data",(I=>{this._update(I.dataType==="style"),this.fire(new c.l(`${I.dataType}data`,I))})),this.on("dataloading",(I=>{this.fire(new c.l(`${I.dataType}dataloading`,I))})),this.on("dataabort",(I=>{this.fire(new c.l("sourcedataabort",I))}))}_getMapId(){return this._mapId}setGlobalStateProperty(w,t){return this.style.setGlobalStateProperty(w,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,t){if(t===void 0&&(t=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=w.onAdd(this);this._controls.push(w);const p=this._controlPositions[t];return t.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(w);return t>-1&&this._controls.splice(t,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return Qi(this.transform,w)}calculateCameraOptionsFromTo(w,t,l,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLat(l,this.transform)),super.calculateCameraOptionsFromTo(w,t,l,p)}resize(w,t=!0){const[l,p]=this._containerDimensions(),v=this._getClampedPixelRatio(l,p);if(this._resizeCanvas(l,p,v),this.painter.resize(l,p,v),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const I=this._getClampedPixelRatio(l,p);this._resizeCanvas(l,p,I),this.painter.resize(l,p,I)}this._resizeTransform(t);const S=!this._moving;return S&&(this.stop(),this.fire(new c.l("movestart",w)).fire(new c.l("move",w))),this.fire(new c.l("resize",w)),S&&this.fire(new c.l("moveend",w)),this}_resizeTransform(w=!0){var t;const[l,p]=this._containerDimensions();this.transform.resize(l,p,w),(t=this._requestedCameraState)===null||t===void 0||t.resize(l,p,w)}_getClampedPixelRatio(w,t){const{0:l,1:p}=this._maxCanvasSize,v=this.getPixelRatio(),S=w*v,M=t*v;return Math.min(S>l?l/S:1,M>p?p/M:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Xn.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom){const t=this._getTransformForUpdate();return t.setMinZoom(w),this._applyUpdatedTransform(t),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom){const t=this._getTransformForUpdate();return t.setMaxZoom(w),this._applyUpdatedTransform(t),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(c.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(c.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,t,l){if(w==="mouseenter"||w==="mouseover"){let p=!1;return{layers:t,listener:l,delegates:{mousemove:S=>{const M=t.filter((L=>this.getLayer(L))),I=M.length!==0?this.queryRenderedFeatures(S.point,{layers:M}):[];I.length?p||(p=!0,l.call(this,new Lr(w,this,S.originalEvent,{features:I}))):p=!1},mouseout:()=>{p=!1}}}}if(w==="mouseleave"||w==="mouseout"){let p=!1;return{layers:t,listener:l,delegates:{mousemove:M=>{const I=t.filter((L=>this.getLayer(L)));(I.length!==0?this.queryRenderedFeatures(M.point,{layers:I}):[]).length?p=!0:p&&(p=!1,l.call(this,new Lr(w,this,M.originalEvent)))},mouseout:M=>{p&&(p=!1,l.call(this,new Lr(w,this,M.originalEvent)))}}}}{const p=v=>{const S=t.filter((I=>this.getLayer(I))),M=S.length!==0?this.queryRenderedFeatures(v.point,{layers:S}):[];M.length&&(v.features=M,l.call(this,v),delete v.features)};return{layers:t,listener:l,delegates:{[w]:p}}}}_saveDelegatedListener(w,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(t)}_removeDelegatedListener(w,t,l){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const p=this._delegatedListeners[w];for(let v=0;v<p.length;v++){const S=p[v];if(S.listener===l&&S.layers.length===t.length&&S.layers.every((M=>t.includes(M)))){for(const M in S.delegates)this.off(M,S.delegates[M]);return void p.splice(v,1)}}}on(w,t,l){if(l===void 0)return super.on(w,t);const p=typeof t=="string"?[t]:t,v=this._createDelegatedListener(w,p,l);this._saveDelegatedListener(w,v);for(const S in v.delegates)this.on(S,v.delegates[S]);return{unsubscribe:()=>{this._removeDelegatedListener(w,p,l)}}}once(w,t,l){if(l===void 0)return super.once(w,t);const p=typeof t=="string"?[t]:t,v=this._createDelegatedListener(w,p,l);for(const S in v.delegates){const M=v.delegates[S];v.delegates[S]=(...I)=>{this._removeDelegatedListener(w,p,l),M(...I)}}this._saveDelegatedListener(w,v);for(const S in v.delegates)this.once(S,v.delegates[S]);return this}off(w,t,l){return l===void 0?super.off(w,t):(this._removeDelegatedListener(w,typeof t=="string"?[t]:t,l),this)}queryRenderedFeatures(w,t){if(!this.style)return[];let l;const p=w instanceof c.P||Array.isArray(w),v=p?w:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(p?{}:w)||{},v instanceof c.P||typeof v[0]=="number")l=[c.P.convert(v)];else{const S=c.P.convert(v[0]),M=c.P.convert(v[1]);l=[S,new c.P(M.x,S.y),M,new c.P(S.x,M.y),S]}return this.style.queryRenderedFeatures(l,t,this.transform)}querySourceFeatures(w,t){return this.style.querySourceFeatures(w,t)}setStyle(w,t){return(t=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(w,t))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const t=this._locale[w];if(t==null)throw new Error(`Missing UI string '${w}'`);return t}_updateStyle(w,t){var l,p;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,t)));const v=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Hl(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,t,v):this.style.loadJSON(w,t,v),this):((p=(l=this.style)===null||l===void 0?void 0:l.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Hl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,t){if(typeof w=="string"){const l=this._requestManager.transformRequest(w,"Style");c.j(l,new AbortController).then((p=>{this._updateDiff(p.data,t)})).catch((p=>{p&&this.fire(new c.k(p))}))}else typeof w=="object"&&this._updateDiff(w,t)}_updateDiff(w,t){try{this.style.setState(w,t)&&this._update(!0)}catch(l){c.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(w,t)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(w,t){return this._lazyInitEmptyStyle(),this.style.addSource(w,t),this._update(!0)}isSourceLoaded(w){const t=this.style&&this.style.tileManagers[w];if(t!==void 0)return t.loaded();this.fire(new c.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const t=this.style.tileManagers[w.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&t.reload();for(const l in this.style._layers){const p=this.style._layers[l];p.type==="hillshade"&&p.source===w.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),p.type==="color-relief"&&p.source===w.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new xn(this.painter,t,w),this.painter.renderToTexture=new Ys(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=l=>{var p;l.dataType==="style"?this.terrain.tileManager.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=l.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:w})),this}getTerrain(){var w,t;return(t=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const t of Object.values(w))if(!t.areTilesLoaded())return!1;return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,t,l){if(l){const p=this.getSource(l);if(!p)throw new Error(`There is no source with ID "${l}", cannot set LOD parameters`);p.calculateTileZoom=ti(Math.max(1,w),Math.max(1,t))}else for(const p in this.style.tileManagers)this.style.tileManagers[p].getSource().calculateTileZoom=ti(Math.max(1,w),Math.max(1,t));return this._update(!0),this}refreshTiles(w,t){const l=this.style.tileManagers[w];if(!l)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);t===void 0?l.reload(!0):l.refreshTiles(t.map((p=>new c.ac(p.z,p.x,p.y))))}addImage(w,t,l={}){const{pixelRatio:p=1,sdf:v=!1,stretchX:S,stretchY:M,content:I,textFitWidth:L,textFitHeight:F}=l;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||c.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:Z,data:$}=t,K=t;return this.style.addImage(w,{data:new c.R({width:B,height:Z},new Uint8Array($)),pixelRatio:p,stretchX:S,stretchY:M,content:I,textFitWidth:L,textFitHeight:F,sdf:v,version:0,userImage:K}),K.onAdd&&K.onAdd(this,w),this}}{const{width:B,height:Z,data:$}=Y.getImageData(t);this.style.addImage(w,{data:new c.R({width:B,height:Z},$),pixelRatio:p,stretchX:S,stretchY:M,content:I,textFitWidth:L,textFitHeight:F,sdf:v,version:0})}}updateImage(w,t){const l=this.style.getImage(w);if(!l)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=t instanceof HTMLImageElement||c.b(t)?Y.getImageData(t):t,{width:v,height:S,data:M}=p;if(v===void 0||S===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==l.data.width||S!==l.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(t instanceof HTMLImageElement||c.b(t));return l.data.replace(M,I),this.style.updateImage(w,l),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return Ne.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,t){return this._lazyInitEmptyStyle(),this.style.addLayer(w,t),this._update(!0)}moveLayer(w,t){return this.style.moveLayer(w,t),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,t,l){return this.style.setLayerZoomRange(w,t,l),this._update(!0)}setFilter(w,t,l={}){return this.style.setFilter(w,t,l),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,t,l,p={}){return this.style.setPaintProperty(w,t,l,p),this._update(!0)}getPaintProperty(w,t){return this.style.getPaintProperty(w,t)}setLayoutProperty(w,t,l,p={}){return this.style.setLayoutProperty(w,t,l,p),this._update(!0)}getLayoutProperty(w,t){return this.style.getLayoutProperty(w,t)}setGlyphs(w,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,t,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,t,l,(p=>{p||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,t,(l=>{l||this._update(!0)})),this}setLight(w,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,t){return this.style.setFeatureState(w,t),this._update()}removeFeatureState(w,t){return this.style.removeFeatureState(w,t),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,t=0;return this._container&&(w=this._container.clientWidth||400,t=this._container.clientHeight||300),[w,t]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const t=this._canvasContainer=q.create("div","maplibregl-canvas-container",w);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=q.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),p=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],p);const v=this._controlContainer=q.create("div","maplibregl-control-container",w),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((M=>{S[M]=q.create("div",`maplibregl-ctrl-${M} `,v)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,t,l){this._canvas.width=Math.floor(l*w),this._canvas.height=Math.floor(l*t),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",(p=>{t={requestedAttributes:w},p&&(t.statusMessage=p.statusMessage,t.type=p.type)}),{once:!0});let l=null;if(l=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!l){const p="Failed to initialize WebGL";throw t?(t.message=p,new Error(JSON.stringify(t))):new Error(p)}this.painter=new Sg(l,this.transform),fe.testSupport(l)}migrateProjection(w,t){super.migrateProjection(w,t),this.painter.transform=w,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var t,l,p,v,S;const M=this._idleTriggered?this._fadeDuration:0,I=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let L=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Z=this.transform.zoom,$=ie();this.style.zoomHistory.update(Z,$);const K=new c.H(Z,{now:$,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),se=K.crossFadingFactor();se===1&&se===this._crossFadingFactor||(L=!0,this._crossFadingFactor=se),this.style.update(K)}const F=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0!==I;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(S=this.style.projection)===null||S===void 0?void 0:S.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||F)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,F),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cG.mark(c.cH.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||L)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,c.cG.mark(c.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Ne.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t?.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),q.remove(this._canvasContainer),q.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cG.clearMetrics(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,Y.frame(this._frameRequest,(w=>{c.cG.frame(w),this._frameRequest=null;try{this._render(w)}catch(t){if(!c.Z(t)&&!(function(l){return l.message===nc})(t))throw t}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Wc}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},_.MapMouseEvent=Lr,_.MapTouchEvent=$s,_.MapWheelEvent=Af,_.Marker=pd,_.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const t=this._map.getZoom(),l=t===this._map.getMaxZoom(),p=t===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,l)=>{const p=this._map._getUIString(`NavigationControl.${l}`);t.title=p,t.setAttribute("aria-label",p)},this.options=c.e({},$p,w),this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),q.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),q.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=q.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ki(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){q.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,t){const l=q.create("button",w,this._container);return l.type="button",l.addEventListener("click",t),l}},_.Popup=class extends c.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&q.remove(this._content),this._container&&(q.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=q.create("div","maplibregl-popup",this._map.getContainer()),this._tip=q.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Yu(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const l=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const v=Wu(this.options.offset);if(!p){const M=this._container.offsetWidth,I=this._container.offsetHeight;let L;L=l.y+v.bottom.y<I?["top"]:l.y>this._map.transform.height-I?["bottom"]:[],l.x<M/2?L.push("left"):l.x>this._map.transform.width-M/2&&L.push("right"),p=L.length===0?"bottom":L.join("-")}let S=l.add(v[p]);this.options.subpixelPositioning||(S=S.round()),q.setTransform(this._container,`${Hu[p]} translate(${S.x}px,${S.y}px)`),fd(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Xc),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=c.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const t=document.createDocumentFragment(),l=document.createElement("body");let p;for(l.innerHTML=w;p=l.firstChild,p;)t.appendChild(p);return this.setDOMContent(t)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=q.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=q.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Qc);w&&w.focus()}},_.RasterDEMTileSource=na,_.RasterTileSource=Br,_.ScaleControl=class{constructor(w){this._onMove=()=>{$i(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,$i(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ia),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){q.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},_.ScrollZoomHandler=cd,_.Style=Hl,_.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=q.create("button","maplibregl-ctrl-terrain",this._container),q.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){q.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},_.TwoFingersTouchPitchHandler=_l,_.TwoFingersTouchRotateHandler=ld,_.TwoFingersTouchZoomHandler=Go,_.TwoFingersTouchZoomRotateHandler=Yc,_.VectorTileSource=qa,_.VideoSource=Fe,_.addSourceType=(w,t)=>c._(void 0,void 0,void 0,(function*(){if(he(w))throw new Error(`A source type called "${w}" already exists.`);((l,p)=>{ae[l]=p})(w,t)})),_.clearPrewarmedResources=function(){const w=Jt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(St),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},_.createTileMesh=hg,_.getMaxParallelImageRequests=function(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS},_.getRTLTextPluginStatus=function(){return Ue().getRTLTextPluginStatus()},_.getVersion=function(){return Ws},_.getWorkerCount=function(){return Nt.workerCount},_.getWorkerUrl=function(){return c.c.WORKER_URL},_.importScriptInWorkers=function(w){return Tr().broadcast("IS",w)},_.isTimeFrozen=function(){return ee.isFrozen()},_.now=ie,_.prewarm=function(){Sn().acquire(St)},_.restoreNow=function(){ee.restoreNow()},_.setMaxParallelImageRequests=function(w){c.c.MAX_PARALLEL_IMAGE_REQUESTS=w},_.setNow=function(w){ee.setNow(w)},_.setRTLTextPlugin=function(w,t){return Ue().setRTLTextPlugin(w,t)},_.setWorkerCount=function(w){Nt.workerCount=w},_.setWorkerUrl=function(w){c.c.WORKER_URL=w}}));var g=a;return g}))})(sx)),sx.exports}var MA=AR();const CA=eg(MA),DA=wA({__proto__:null,default:CA},[MA]),MR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAxCAYAAACcXioiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAB/xJREFUeNrUWn9QFPcV/+zeD1ARz6DmxHRqJs1MUiedE7QxaZJ6UWKgpMIUBeSAAzOmtp0gyV9x0uHMpG2aTsexaU2qyIEx5g9rsLGE2hq5YJoAGrnE5iypoxdFSRDDaUlAudvt2709+mXdgzvYw2Zn3ux397779vPe573ve/sFThRFJOpoPv6BrDx7SSaXqHcYE6W4aP161z2LMyKXroaXt7vieb58409GxuSAqPN4JO5wnew8ERnXJJyBTG5R3A8PPezDtbtooAQIxyljSVJI50DlltaT+2s8Pbtw9/1L9/31ox1r5JgSw5L5VeXNCaEhuw9DdymAxzhOpNT5LMGFmP6oHz0dswvoluSlj6csBwIbfNF/DIUdyR7sNZ+MtXRdlJTrx2A34LccwaOWDa6mjh1r5N/N+hiQkByQwEt5PHc58uf32LB5kRuGGUBP4HSBIRmLdH2X7uCTUCgMoXzu95F/63kbaota0HbqHYjDwDkrsfCdDa6EGzD4oA/9lb74lZlRSHFUaM1BzvzPbWh4vAWp0y0IDQHDVwBTKvDpZ6dkFtambtbfgMEHfPii3IfBO+JXxJlQRDWxZA55Xuiy4HeFjXh+XzX2v1ePF8vdeCTNiaEe4GL6Uay653GX7kl8uSzs8YmUTAk8nUrS7kXuctGJvLxyuA9vw1vn69F8sV6e80KxG5v3AS3Bepw701VwaqB2UQYqP77pOcAZCTx5Pu27yH3Y7MQzP9gK33kvnl27FXdabDDNAp77RwXeaK9H6feq5HC60t+vGwv8pMEDxXMeIvAmAv/YVjhesuNXb1bLRjgyqnB/ap68ZP6iswIbD9kx/H46vkXW5th+XHBzDTCgmGK+OH01fmjqs6D0gapwLaDVJj/TidvSFsrXv3c0oujuTTDPBc63BZpmiHMaB05TkWtrk/odl245EJ/rUQwB6+atRO7VfxJoMYCK3Xa4y1rw2lMt8pTS7XacueZFa/ef0cv50ft3vE239/bwH+29TVgiMj2Sa2oZ4LBOChvrKuSm99nw+tpOZM93YmAogPI/2tF92R+eRpqTbgWOmw+g/ZD3sCjgVXp2r6Jli9To6cFCvAaskxLWuhKPSWGwfOFqzJxmwc9W1eDQprNw3FuFjS/ny0b8wdkIg4mq70E00zMNnAENESXHjHUs6JqpMUCUwTsoYXOsl2xwrXBj97vb5Fgv+a0dFwh0xYpNOPhsJw6fPIDqg/nobcW7lCd7Kdn3aGjUhYXYDBBGwGen99rgLm9Be9c7GDQHsL+tHq893SIzsfLF21H1p3y80bsNxzzeo9Tw1fEmTfC4w2rVhYVxDRBDKCEvOuatQPaCALUHT4TbA+E6PUxLwHbPFpmFn7rzEbIG8EmKB35P4AjFfC31Re5x1E+ahTENEINwkOfLqKvMFs9a8FLx6PYg+5tOXLzqR/u/PSh4sBzm2cCFAzhMjDVQv7M7lq+2ybIw1jLqICm75T5kLRXyUPqjKjS0htuDt/zh9uDXJeRgCpDfeKpxOdmPi39DKxn8qnFGTOBZFmqU7+C4v52jMeCgEHCkPYSsrJlO/LLAje4+P9o+8SCD6EiftRA/b6b2gOLfaa+CH16caQ60Usy74wQ/aRa0GCiVEnb+ajwy0AU88+RWOWwkA15Y58a3v2HD1a8CKNixGM+9X4HZ1HleOoI2yhM39T31E8zFCbOgZqBUVMAPX6ViRD2MtKZL8f7KxkY0tjdgcfVsOYklFpIXAKebAkeFEHZOAvykWGAZKJNCZ0EesoQg/TA9XE2feNOO2w029PcH8K8LXpkFqVH7cMCDS014j9rvenMa6nToy0axEGuLYWQKVal0utBIqwjbOHABA3efd/lfqNKm0lp/qtsrF6m+Vpyg1aaOmjQ9wEdYqIm3RxoxgEIn64YfiYXgAN4eTAqgco8dKbwFH35Jnm9FJ9WHV5LnYZfOn9QjLGQsWxYTC/wY1TdSCwwGMuRTgxddVKR6j6CDWubtBH5nInbz4s0FPhp46ctJHpIBUi5IRercHnTQUlmbbEVtArckR6pzLAwYtTasgl8qO3CfhT9dpJbhbC2OUUbUchx2yve5cJLLZwNNSiZlM4H+E8AXbTe+6JZlAH2IycealM265cJoBmj1Cf5HCZ//iYHAH6dRLSX6DWEjATfPCTPEG6eeBZ4Ff/0K4Q3dILwYBr5jFHXT6INlHgmBl/r+m5ULXKL+wFG0fr0uy6r0NwZakbZkL8l0TdneqB6Hqr2umdLN3USsSM3HP3B97QyIhYX/dwbGZSGerdB4t025kS5rYluuI0dhZWVISWbkLF3CM3rHZYDTEF7elwuLtPKbFDErkqQSWnCRHINozZOeNwuC8HyEhab2DhfrIG4cT/Mq4KwB6ntaczlGHxflHaJqLColNHIOSVWKWAgwLBgj3ZqWUvbFBgawUeV59trAzNUykNMIKzEK4BQF9DDJDIWZaco9L0mvMhagUo4onjYxgM1MuBhVwhrLq3SxHk5hGhUx4mFG+hTw15RzRILK3IjI+oxjxD6vwcBYLLCeVzXlozzdx4AIqkBeVwGOiKAyeiT0jFE3EkfHIBsKESVBBrza25zqRYJKgkyYhFQeDqrAChp5oplMXJQw4jW8zGskrjrGoRHfAuMU9hwJJTYvNAGPteJojfkxViOtHFK/VFAZAgawqGJ7XLDxFCcuyjUXR1ESo5wRq3f1rK4TraSJ+2ck5fivAAMAmdk6fQJV/ZUAAAAASUVORK5CYII=",CR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAxCAYAAACcXioiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAB/pJREFUeNrUWnlMFFcY/2b2YLlFvKp44J0YW6vYmoqNq60W22oieF9BShBQa4sH/qGMxkRN1ApRBOQQ1qpNGpOmNcYERVKtCohH69l61pNDFkVgYXem3xtmyHM6y+7CrrQv+fJmd2fe+/2+3/e+d8wygiCAp8rxsoti4xFhYxhP9aH1VMNzY2K4ke+Plj9y+fvSOVeeXxKf0HqNDrB7HwueK9zvl8rl6xRPdcLIIcR+GA/gYjiteHJRNOIFRvIGQ9nq6Ghu1L17KR+bzeA9duyPPfbvn8Xj96QXUidHR3eOAokI+kZZFizHuq2yMy/v+nv378NHsbHgdedOFH41wt0KuEQgHgH/gcATHACXymz09OyIpCQQnjyB3gMGwPPYWK5TBnEcAo6XQsXJIoLvm5oaab19G+OJgcD+/cGruDgK2xhhA7j2VhSIRdBl6PE45zwulzlmgEV9d++ObLp1CwSbDQSeB1tDA4T26wfP3KyCKoEYBHwegce6BlwETzw/cteuLxqvXQPeagUewRMCQl0d6JEAf+NmlAZVGMDz7g+haAQcoxIqvNEIjroLKiqaa2PZuSGbNs2oLC3FqGFAr9eDDk2D12KGQxUGDx4Ed4cN4/oAzHKrAqdLM0UC7SldEDzPsvN6JifPqKisBO2SJaBZvBheBgZCI4IWZG83NoI/jgX+1q2oxyw74q1nIbUSIIHvtXbt9KraWnhnyxZofvUKtD17Qsh338Hrrl2hCUOJDGSiCoOEas018CzmK67TCfgjeIFh5vXfsGF6TX09hGzdCk8LCuC1yQRVHAfVJ05AcGIiNDY1ieAJiZ8OH4bnYWOhIi4uqlMJ+BYVzeMZZn6/9eunV2CqtGGskxI8ZQqAjw94e3nBy5MnQd+rlziQtcHBcD019ZeKoKCjPyOX8vPnyWzLdQoBbwIe12tDN2780owzbY9du4Dp3h1u46RFAPfavBmqm5shaMYMMBcWgk+3bnCF447hM4fHX70aSTWV8tYJGIqK5gssu2DgmjXTn12+DBZMj48QcJ/4ePAZNKiVxPD8fPDCcWBDFf7MzCzEyeswPn5IamYTWei5QwWXCOgRPA7YBYOTkj6vJhkF41w3cybw3t5wd+NGCElIEEn8tXo1NNy5A+YdO+DhgQPFvMVSAEbj93I7R3JyOHep4DQBbQv4haGJidOqLBZoxhj3RrA9kEDvZctgCIYRKf3XroUATJW2rCz422QqttXX57ATJ5pUmnSLCk4RYCXwgxISIipxadATUyXJKHfXrBF/rzh6FK5HRsJjJFF16BAYKirgenb2KWtDQ45OHbzbVHCGwAIEv2jIsmUi+L7btsGj9HRxZjVg5nmYnCyGTtcJE8Dr5k3wLSmBaxkZp21Wa77BaDQ5aLvDKjgisBAzx4JRK1d+9lKrhb7bt4P57Fmox/gOwZjXhYYC8+IFPFi3DgImTwZfnLQupKUV2iyWPJ+JEwuc2bV1VAXWEfiwVasizI8fA//gAdQi+OCpU2Hozp2iCjU4UXXBXVVgeDhY0tKgNDf3V3zG5G80FriAoUMqsG2AX/gBer7m0SPxJoNOB3UImsyuGj8/8aYeq1aB18CBwBcXQ5nJdKYZY76La+A7rIIagUUIftG45cun1uBOCqQlgFajAT9Ml68zMkQSJNuQlFmLy4fygwcvNDc15XabNCm/nWOx3SpoVcAvDE9MnFKHsa3DVNmy9WfE5YAGzR9J1GVmAlRXg/XUKSg/cqQEU2VWH6MxryMnGJT3UxSqOK3AYuL58Pj4KVbM8wZfXzDgmobUeoMBNKgAIaJhWQhAEn5nzsA59LylBXyuG9Zl7VKhVQECXtwX7NtXqLwpPC7uE5COSkgJxLXND2lpv+Hn3MGTJuU4vW9A07lZhVYCuF/6VPmjdH5TSJ8XBQQFwaG0tHN4mYua5NzDMNJKDYlGVMJathVo5fh8En7/rXMqiCRGjxvHOUPCbhrFxRfUY8eNgqBlJAIEfMGePefxNxIydj1/Ge1rtPH4XLlrh2UuZyRVAs1oZgKe7AJbHAm+mDrz9u4tQUVyEVK2vQavoH2Dz15q/6Fx61holwIWtErs3CJdo2k0OAtnp6eXIvhshLVfrSE/DJGBaE/ccKbqigpvECAef4rgm7CmTJOVnl5mD3wAgh6ONoSo5L7jHqdVaCXQgPbw3+CJsXwL8Kw3MgqCfheNHC34e+Bk21kVGE+94JgbE+MOEinkHQNmpE0RYWM4jxyreKooJrMUj50Lebi0joXjZRe5/x0BZ1T4ryvgUAVX3h66+qaRoVYkHXpLOWfpUps0mGHa2DCWatehAoyKsdRSRyutz4jpJfNSmDfZDzlhaveR5/W4lN8iq3DsQglHO4hx4GlWAZwmoPxO7V6Gao+x04eguJbfAco1WZZZUQUzpYJW+k21UbpjDQVYq/A8/VlD3atGkFEJK8EOYD8JdLM0uXtLZpPWiRXSNQ+KxsGOp3UUYD0VLlqF0WSVb15pD/tJncugRQ9TViWBt0i1bFbpXtnE9uwRYBWe1imA6yli8n205xkV4AIF3EYBp0E2KQDLxitIt4ZeWwrQoaGjiGioWqMSLnI7wpv7ojfMSoWJTeFhqwIsrzJOVAcTYyeMWEWM07HeVoyDSnzTCtC1HEr0uFAF3FbGUbtm28hGagoqO+UVRIACLCjCyyFYVyYnxs5nxoVJSbBTg7Pedefs2t6Z1HN/RpLKPwIMAC/3eXOsFYGMAAAAAElFTkSuQmCC";class jm extends Error{response;request;constructor(n,a){const h=`${jm.extractMessage(n)}: ${JSON.stringify({response:n,request:a})}`;super(h),Object.setPrototypeOf(this,jm.prototype),this.response=n,this.request=a,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,jm)}static extractMessage(n){return n.errors?.[0]?.message??`GraphQL Error (Code: ${String(n.status)})`}}const oS=i=>i.toUpperCase(),$1=i=>typeof i=="function"?i():i,IA=(i,n)=>i.map((a,h)=>[a,n[h]]),Cy=i=>{let n={};return i instanceof Headers?n=DR(i):Array.isArray(i)?i.forEach(([a,h])=>{a&&h!==void 0&&(n[a]=h)}):i&&(n=i),n},DR=i=>{const n={};return i.forEach((a,h)=>{n[h]=a}),n},IR=i=>{try{const n=i();return RR(n)?n.catch(a=>lS(a)):n}catch(n){return lS(n)}},lS=i=>i instanceof Error?i:new Error(String(i)),RR=i=>typeof i=="object"&&i!==null&&"then"in i&&typeof i.then=="function"&&"catch"in i&&typeof i.catch=="function"&&"finally"in i&&typeof i.finally=="function",g2=i=>{throw new Error(`Unhandled case: ${String(i)}`)},ox=i=>typeof i=="object"&&i!==null&&!Array.isArray(i),kR=(i,n)=>i.documents?i:{documents:i,requestHeaders:n,signal:void 0},OR=(i,n,a)=>i.query?i:{query:i,variables:n,requestHeaders:a,signal:void 0};function Ii(i,n){if(!!!i)throw new Error(n)}function Hd(i){return typeof i=="object"&&i!==null}function $x(i,n){if(!!!i)throw new Error(n??"Unexpected invariant triggered.")}const LR=/\r\n|[\n\r]/g;function Sw(i,n){let a=0,h=1;for(const f of i.body.matchAll(LR)){if(typeof f.index=="number"||$x(!1),f.index>=n)break;a=f.index+f[0].length,h+=1}return{line:h,column:n+1-a}}function NR(i){return RA(i.source,Sw(i.source,i.start))}function RA(i,n){const a=i.locationOffset.column-1,h="".padStart(a)+i.body,f=n.line-1,g=i.locationOffset.line-1,_=n.line+g,c=n.line===1?a:0,A=n.column+c,D=`${i.name}:${_}:${A}
`,O=h.split(/\r\n|[\n\r]/g),z=O[f];if(z.length>120){const V=Math.floor(A/80),Y=A%80,ee=[];for(let ie=0;ie<z.length;ie+=80)ee.push(z.slice(ie,ie+80));return D+cS([[`${_} |`,ee[0]],...ee.slice(1,V+1).map(ie=>["|",ie]),["|","^".padStart(Y)],["|",ee[V+1]]])}return D+cS([[`${_-1} |`,O[f-1]],[`${_} |`,z],["|","^".padStart(A)],[`${_+1} |`,O[f+1]]])}function cS(i){const n=i.filter(([h,f])=>f!==void 0),a=Math.max(...n.map(([h])=>h.length));return n.map(([h,f])=>h.padStart(a)+(f?" "+f:"")).join(`
`)}function PR(i){const n=i[0];return n==null||"kind"in n||"length"in n?{nodes:n,source:i[1],positions:i[2],path:i[3],originalError:i[4],extensions:i[5]}:n}class Pi extends Error{constructor(n,...a){var h,f,g;const{nodes:_,source:c,positions:A,path:D,originalError:O,extensions:z}=PR(a);super(n),this.name="GraphQLError",this.path=D??void 0,this.originalError=O??void 0,this.nodes=uS(Array.isArray(_)?_:_?[_]:void 0);const V=uS((h=this.nodes)===null||h===void 0?void 0:h.map(ee=>ee.loc).filter(ee=>ee!=null));this.source=c??(V==null||(f=V[0])===null||f===void 0?void 0:f.source),this.positions=A??V?.map(ee=>ee.start),this.locations=A&&c?A.map(ee=>Sw(c,ee)):V?.map(ee=>Sw(ee.source,ee.start));const Y=Hd(O?.extensions)?O?.extensions:void 0;this.extensions=(g=z??Y)!==null&&g!==void 0?g:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),O!=null&&O.stack?Object.defineProperty(this,"stack",{value:O.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Pi):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let n=this.message;if(this.nodes)for(const a of this.nodes)a.loc&&(n+=`

`+NR(a.loc));else if(this.source&&this.locations)for(const a of this.locations)n+=`

`+RA(this.source,a);return n}toJSON(){const n={message:this.message};return this.locations!=null&&(n.locations=this.locations),this.path!=null&&(n.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(n.extensions=this.extensions),n}}function uS(i){return i===void 0||i.length===0?void 0:i}function Ca(i,n,a){return new Pi(`Syntax Error: ${a}`,{source:i,positions:[n]})}class zR{constructor(n,a,h){this.start=n.start,this.end=a.end,this.startToken=n,this.endToken=a,this.source=h}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class kA{constructor(n,a,h,f,g,_){this.kind=n,this.start=a,this.end=h,this.line=f,this.column=g,this.value=_,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const OA={Name:[],Document:["definitions"],OperationDefinition:["description","name","variableDefinitions","directives","selectionSet"],VariableDefinition:["description","variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["description","name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"],TypeCoordinate:["name"],MemberCoordinate:["name","memberName"],ArgumentCoordinate:["name","fieldName","argumentName"],DirectiveCoordinate:["name"],DirectiveArgumentCoordinate:["name","argumentName"]},FR=new Set(Object.keys(OA));function hS(i){const n=i?.kind;return typeof n=="string"&&FR.has(n)}var Nd;(function(i){i.QUERY="query",i.MUTATION="mutation",i.SUBSCRIPTION="subscription"})(Nd||(Nd={}));var di;(function(i){i.QUERY="QUERY",i.MUTATION="MUTATION",i.SUBSCRIPTION="SUBSCRIPTION",i.FIELD="FIELD",i.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",i.FRAGMENT_SPREAD="FRAGMENT_SPREAD",i.INLINE_FRAGMENT="INLINE_FRAGMENT",i.VARIABLE_DEFINITION="VARIABLE_DEFINITION",i.SCHEMA="SCHEMA",i.SCALAR="SCALAR",i.OBJECT="OBJECT",i.FIELD_DEFINITION="FIELD_DEFINITION",i.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",i.INTERFACE="INTERFACE",i.UNION="UNION",i.ENUM="ENUM",i.ENUM_VALUE="ENUM_VALUE",i.INPUT_OBJECT="INPUT_OBJECT",i.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(di||(di={}));var Lt;(function(i){i.NAME="Name",i.DOCUMENT="Document",i.OPERATION_DEFINITION="OperationDefinition",i.VARIABLE_DEFINITION="VariableDefinition",i.SELECTION_SET="SelectionSet",i.FIELD="Field",i.ARGUMENT="Argument",i.FRAGMENT_SPREAD="FragmentSpread",i.INLINE_FRAGMENT="InlineFragment",i.FRAGMENT_DEFINITION="FragmentDefinition",i.VARIABLE="Variable",i.INT="IntValue",i.FLOAT="FloatValue",i.STRING="StringValue",i.BOOLEAN="BooleanValue",i.NULL="NullValue",i.ENUM="EnumValue",i.LIST="ListValue",i.OBJECT="ObjectValue",i.OBJECT_FIELD="ObjectField",i.DIRECTIVE="Directive",i.NAMED_TYPE="NamedType",i.LIST_TYPE="ListType",i.NON_NULL_TYPE="NonNullType",i.SCHEMA_DEFINITION="SchemaDefinition",i.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",i.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",i.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",i.FIELD_DEFINITION="FieldDefinition",i.INPUT_VALUE_DEFINITION="InputValueDefinition",i.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",i.UNION_TYPE_DEFINITION="UnionTypeDefinition",i.ENUM_TYPE_DEFINITION="EnumTypeDefinition",i.ENUM_VALUE_DEFINITION="EnumValueDefinition",i.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",i.DIRECTIVE_DEFINITION="DirectiveDefinition",i.SCHEMA_EXTENSION="SchemaExtension",i.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",i.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",i.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",i.UNION_TYPE_EXTENSION="UnionTypeExtension",i.ENUM_TYPE_EXTENSION="EnumTypeExtension",i.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension",i.TYPE_COORDINATE="TypeCoordinate",i.MEMBER_COORDINATE="MemberCoordinate",i.ARGUMENT_COORDINATE="ArgumentCoordinate",i.DIRECTIVE_COORDINATE="DirectiveCoordinate",i.DIRECTIVE_ARGUMENT_COORDINATE="DirectiveArgumentCoordinate"})(Lt||(Lt={}));function Ew(i){return i===9||i===32}function rv(i){return i>=48&&i<=57}function LA(i){return i>=97&&i<=122||i>=65&&i<=90}function y2(i){return LA(i)||i===95}function NA(i){return LA(i)||rv(i)||i===95}function jR(i){var n;let a=Number.MAX_SAFE_INTEGER,h=null,f=-1;for(let _=0;_<i.length;++_){var g;const c=i[_],A=BR(c);A!==c.length&&(h=(g=h)!==null&&g!==void 0?g:_,f=_,_!==0&&A<a&&(a=A))}return i.map((_,c)=>c===0?_:_.slice(a)).slice((n=h)!==null&&n!==void 0?n:0,f+1)}function BR(i){let n=0;for(;n<i.length&&Ew(i.charCodeAt(n));)++n;return n}function VR(i,n){const a=i.replace(/"""/g,'\\"""'),h=a.split(/\r\n|[\n\r]/g),f=h.length===1,g=h.length>1&&h.slice(1).every(Y=>Y.length===0||Ew(Y.charCodeAt(0))),_=a.endsWith('\\"""'),c=i.endsWith('"')&&!_,A=i.endsWith("\\"),D=c||A,O=!f||i.length>70||D||g||_;let z="";const V=f&&Ew(i.charCodeAt(0));return(O&&!V||g)&&(z+=`
`),z+=a,(O||D)&&(z+=`
`),'"""'+z+'"""'}var vt;(function(i){i.SOF="<SOF>",i.EOF="<EOF>",i.BANG="!",i.DOLLAR="$",i.AMP="&",i.PAREN_L="(",i.PAREN_R=")",i.DOT=".",i.SPREAD="...",i.COLON=":",i.EQUALS="=",i.AT="@",i.BRACKET_L="[",i.BRACKET_R="]",i.BRACE_L="{",i.PIPE="|",i.BRACE_R="}",i.NAME="Name",i.INT="Int",i.FLOAT="Float",i.STRING="String",i.BLOCK_STRING="BlockString",i.COMMENT="Comment"})(vt||(vt={}));class UR{constructor(n){const a=new kA(vt.SOF,0,0,0,0);this.source=n,this.lastToken=a,this.token=a,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let n=this.token;if(n.kind!==vt.EOF)do if(n.next)n=n.next;else{const a=$R(this,n.end);n.next=a,a.prev=n,n=a}while(n.kind===vt.COMMENT);return n}}function GR(i){return i===vt.BANG||i===vt.DOLLAR||i===vt.AMP||i===vt.PAREN_L||i===vt.PAREN_R||i===vt.DOT||i===vt.SPREAD||i===vt.COLON||i===vt.EQUALS||i===vt.AT||i===vt.BRACKET_L||i===vt.BRACKET_R||i===vt.BRACE_L||i===vt.PIPE||i===vt.BRACE_R}function o0(i){return i>=0&&i<=55295||i>=57344&&i<=1114111}function Zx(i,n){return PA(i.charCodeAt(n))&&zA(i.charCodeAt(n+1))}function PA(i){return i>=55296&&i<=56319}function zA(i){return i>=56320&&i<=57343}function Gm(i,n){const a=i.source.body.codePointAt(n);if(a===void 0)return vt.EOF;if(a>=32&&a<=126){const h=String.fromCodePoint(a);return h==='"'?`'"'`:`"${h}"`}return"U+"+a.toString(16).toUpperCase().padStart(4,"0")}function _a(i,n,a,h,f){const g=i.line,_=1+a-i.lineStart;return new kA(n,a,h,g,_,f)}function $R(i,n){const a=i.source.body,h=a.length;let f=n;for(;f<h;){const g=a.charCodeAt(f);switch(g){case 65279:case 9:case 32:case 44:++f;continue;case 10:++f,++i.line,i.lineStart=f;continue;case 13:a.charCodeAt(f+1)===10?f+=2:++f,++i.line,i.lineStart=f;continue;case 35:return ZR(i,f);case 33:return _a(i,vt.BANG,f,f+1);case 36:return _a(i,vt.DOLLAR,f,f+1);case 38:return _a(i,vt.AMP,f,f+1);case 40:return _a(i,vt.PAREN_L,f,f+1);case 41:return _a(i,vt.PAREN_R,f,f+1);case 46:if(a.charCodeAt(f+1)===46&&a.charCodeAt(f+2)===46)return _a(i,vt.SPREAD,f,f+3);break;case 58:return _a(i,vt.COLON,f,f+1);case 61:return _a(i,vt.EQUALS,f,f+1);case 64:return _a(i,vt.AT,f,f+1);case 91:return _a(i,vt.BRACKET_L,f,f+1);case 93:return _a(i,vt.BRACKET_R,f,f+1);case 123:return _a(i,vt.BRACE_L,f,f+1);case 124:return _a(i,vt.PIPE,f,f+1);case 125:return _a(i,vt.BRACE_R,f,f+1);case 34:return a.charCodeAt(f+1)===34&&a.charCodeAt(f+2)===34?QR(i,f):YR(i,f)}if(rv(g)||g===45)return qR(i,f,g);if(y2(g))return KR(i,f);throw Ca(i.source,f,g===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:o0(g)||Zx(a,f)?`Unexpected character: ${Gm(i,f)}.`:`Invalid character: ${Gm(i,f)}.`)}return _a(i,vt.EOF,h,h)}function ZR(i,n){const a=i.source.body,h=a.length;let f=n+1;for(;f<h;){const g=a.charCodeAt(f);if(g===10||g===13)break;if(o0(g))++f;else if(Zx(a,f))f+=2;else break}return _a(i,vt.COMMENT,n,f,a.slice(n+1,f))}function qR(i,n,a){const h=i.source.body;let f=n,g=a,_=!1;if(g===45&&(g=h.charCodeAt(++f)),g===48){if(g=h.charCodeAt(++f),rv(g))throw Ca(i.source,f,`Invalid number, unexpected digit after 0: ${Gm(i,f)}.`)}else f=Z1(i,f,g),g=h.charCodeAt(f);if(g===46&&(_=!0,g=h.charCodeAt(++f),f=Z1(i,f,g),g=h.charCodeAt(f)),(g===69||g===101)&&(_=!0,g=h.charCodeAt(++f),(g===43||g===45)&&(g=h.charCodeAt(++f)),f=Z1(i,f,g),g=h.charCodeAt(f)),g===46||y2(g))throw Ca(i.source,f,`Invalid number, expected digit but got: ${Gm(i,f)}.`);return _a(i,_?vt.FLOAT:vt.INT,n,f,h.slice(n,f))}function Z1(i,n,a){if(!rv(a))throw Ca(i.source,n,`Invalid number, expected digit but got: ${Gm(i,n)}.`);const h=i.source.body;let f=n+1;for(;rv(h.charCodeAt(f));)++f;return f}function YR(i,n){const a=i.source.body,h=a.length;let f=n+1,g=f,_="";for(;f<h;){const c=a.charCodeAt(f);if(c===34)return _+=a.slice(g,f),_a(i,vt.STRING,n,f+1,_);if(c===92){_+=a.slice(g,f);const A=a.charCodeAt(f+1)===117?a.charCodeAt(f+2)===123?HR(i,f):WR(i,f):XR(i,f);_+=A.value,f+=A.size,g=f;continue}if(c===10||c===13)break;if(o0(c))++f;else if(Zx(a,f))f+=2;else throw Ca(i.source,f,`Invalid character within String: ${Gm(i,f)}.`)}throw Ca(i.source,f,"Unterminated string.")}function HR(i,n){const a=i.source.body;let h=0,f=3;for(;f<12;){const g=a.charCodeAt(n+f++);if(g===125){if(f<5||!o0(h))break;return{value:String.fromCodePoint(h),size:f}}if(h=h<<4|P_(g),h<0)break}throw Ca(i.source,n,`Invalid Unicode escape sequence: "${a.slice(n,n+f)}".`)}function WR(i,n){const a=i.source.body,h=dS(a,n+2);if(o0(h))return{value:String.fromCodePoint(h),size:6};if(PA(h)&&a.charCodeAt(n+6)===92&&a.charCodeAt(n+7)===117){const f=dS(a,n+8);if(zA(f))return{value:String.fromCodePoint(h,f),size:12}}throw Ca(i.source,n,`Invalid Unicode escape sequence: "${a.slice(n,n+6)}".`)}function dS(i,n){return P_(i.charCodeAt(n))<<12|P_(i.charCodeAt(n+1))<<8|P_(i.charCodeAt(n+2))<<4|P_(i.charCodeAt(n+3))}function P_(i){return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:-1}function XR(i,n){const a=i.source.body;switch(a.charCodeAt(n+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Ca(i.source,n,`Invalid character escape sequence: "${a.slice(n,n+2)}".`)}function QR(i,n){const a=i.source.body,h=a.length;let f=i.lineStart,g=n+3,_=g,c="";const A=[];for(;g<h;){const D=a.charCodeAt(g);if(D===34&&a.charCodeAt(g+1)===34&&a.charCodeAt(g+2)===34){c+=a.slice(_,g),A.push(c);const O=_a(i,vt.BLOCK_STRING,n,g+3,jR(A).join(`
`));return i.line+=A.length-1,i.lineStart=f,O}if(D===92&&a.charCodeAt(g+1)===34&&a.charCodeAt(g+2)===34&&a.charCodeAt(g+3)===34){c+=a.slice(_,g),_=g+1,g+=4;continue}if(D===10||D===13){c+=a.slice(_,g),A.push(c),D===13&&a.charCodeAt(g+1)===10?g+=2:++g,c="",_=g,f=g;continue}if(o0(D))++g;else if(Zx(a,g))g+=2;else throw Ca(i.source,g,`Invalid character within String: ${Gm(i,g)}.`)}throw Ca(i.source,g,"Unterminated string.")}function KR(i,n){const a=i.source.body,h=a.length;let f=n+1;for(;f<h;){const g=a.charCodeAt(f);if(NA(g))++f;else break}return _a(i,vt.NAME,n,f,a.slice(n,f))}const JR=10,FA=2;function An(i){return qx(i,[])}function qx(i,n){switch(typeof i){case"string":return JSON.stringify(i);case"function":return i.name?`[function ${i.name}]`:"[function]";case"object":return ek(i,n);default:return String(i)}}function ek(i,n){if(i===null)return"null";if(n.includes(i))return"[Circular]";const a=[...n,i];if(tk(i)){const h=i.toJSON();if(h!==i)return typeof h=="string"?h:qx(h,a)}else if(Array.isArray(i))return ik(i,a);return nk(i,a)}function tk(i){return typeof i.toJSON=="function"}function nk(i,n){const a=Object.entries(i);return a.length===0?"{}":n.length>FA?"["+rk(i)+"]":"{ "+a.map(([f,g])=>f+": "+qx(g,n)).join(", ")+" }"}function ik(i,n){if(i.length===0)return"[]";if(n.length>FA)return"[Array]";const a=Math.min(JR,i.length),h=i.length-a,f=[];for(let g=0;g<a;++g)f.push(qx(i[g],n));return h===1?f.push("... 1 more item"):h>1&&f.push(`... ${h} more items`),"["+f.join(", ")+"]"}function rk(i){const n=Object.prototype.toString.call(i).replace(/^\[object /,"").replace(/]$/,"");if(n==="Object"&&typeof i.constructor=="function"){const a=i.constructor.name;if(typeof a=="string"&&a!=="")return a}return n}const ak=globalThis.process&&!0,Ih=ak?function(n,a){return n instanceof a}:function(n,a){if(n instanceof a)return!0;if(typeof n=="object"&&n!==null){var h;const f=a.prototype[Symbol.toStringTag],g=Symbol.toStringTag in n?n[Symbol.toStringTag]:(h=n.constructor)===null||h===void 0?void 0:h.name;if(f===g){const _=An(n);throw new Error(`Cannot use ${f} "${_}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class jA{constructor(n,a="GraphQL request",h={line:1,column:1}){typeof n=="string"||Ii(!1,`Body must be a string. Received: ${An(n)}.`),this.body=n,this.name=a,this.locationOffset=h,this.locationOffset.line>0||Ii(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Ii(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function sk(i){return Ih(i,jA)}function BA(i,n){const a=new VA(i,n),h=a.parseDocument();return Object.defineProperty(h,"tokenCount",{enumerable:!1,value:a.tokenCount}),h}function ok(i,n){const a=new VA(i,n);a.expectToken(vt.SOF);const h=a.parseValueLiteral(!1);return a.expectToken(vt.EOF),h}class VA{constructor(n,a={}){const{lexer:h,...f}=a;if(h)this._lexer=h;else{const g=sk(n)?n:new jA(n);this._lexer=new UR(g)}this._options=f,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const n=this.expectToken(vt.NAME);return this.node(n,{kind:Lt.NAME,value:n.value})}parseDocument(){return this.node(this._lexer.token,{kind:Lt.DOCUMENT,definitions:this.many(vt.SOF,this.parseDefinition,vt.EOF)})}parseDefinition(){if(this.peek(vt.BRACE_L))return this.parseOperationDefinition();const n=this.peekDescription(),a=n?this._lexer.lookahead():this._lexer.token;if(n&&a.kind===vt.BRACE_L)throw Ca(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are not supported on shorthand queries.");if(a.kind===vt.NAME){switch(a.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}switch(a.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition()}if(n)throw Ca(this._lexer.source,this._lexer.token.start,"Unexpected description, only GraphQL definitions support descriptions.");if(a.value==="extend")return this.parseTypeSystemExtension()}throw this.unexpected(a)}parseOperationDefinition(){const n=this._lexer.token;if(this.peek(vt.BRACE_L))return this.node(n,{kind:Lt.OPERATION_DEFINITION,operation:Nd.QUERY,description:void 0,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const a=this.parseDescription(),h=this.parseOperationType();let f;return this.peek(vt.NAME)&&(f=this.parseName()),this.node(n,{kind:Lt.OPERATION_DEFINITION,operation:h,description:a,name:f,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const n=this.expectToken(vt.NAME);switch(n.value){case"query":return Nd.QUERY;case"mutation":return Nd.MUTATION;case"subscription":return Nd.SUBSCRIPTION}throw this.unexpected(n)}parseVariableDefinitions(){return this.optionalMany(vt.PAREN_L,this.parseVariableDefinition,vt.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Lt.VARIABLE_DEFINITION,description:this.parseDescription(),variable:this.parseVariable(),type:(this.expectToken(vt.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(vt.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const n=this._lexer.token;return this.expectToken(vt.DOLLAR),this.node(n,{kind:Lt.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Lt.SELECTION_SET,selections:this.many(vt.BRACE_L,this.parseSelection,vt.BRACE_R)})}parseSelection(){return this.peek(vt.SPREAD)?this.parseFragment():this.parseField()}parseField(){const n=this._lexer.token,a=this.parseName();let h,f;return this.expectOptionalToken(vt.COLON)?(h=a,f=this.parseName()):f=a,this.node(n,{kind:Lt.FIELD,alias:h,name:f,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(vt.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(n){const a=n?this.parseConstArgument:this.parseArgument;return this.optionalMany(vt.PAREN_L,a,vt.PAREN_R)}parseArgument(n=!1){const a=this._lexer.token,h=this.parseName();return this.expectToken(vt.COLON),this.node(a,{kind:Lt.ARGUMENT,name:h,value:this.parseValueLiteral(n)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const n=this._lexer.token;this.expectToken(vt.SPREAD);const a=this.expectOptionalKeyword("on");return!a&&this.peek(vt.NAME)?this.node(n,{kind:Lt.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(n,{kind:Lt.INLINE_FRAGMENT,typeCondition:a?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const n=this._lexer.token,a=this.parseDescription();return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(n,{kind:Lt.FRAGMENT_DEFINITION,description:a,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(n,{kind:Lt.FRAGMENT_DEFINITION,description:a,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(n){const a=this._lexer.token;switch(a.kind){case vt.BRACKET_L:return this.parseList(n);case vt.BRACE_L:return this.parseObject(n);case vt.INT:return this.advanceLexer(),this.node(a,{kind:Lt.INT,value:a.value});case vt.FLOAT:return this.advanceLexer(),this.node(a,{kind:Lt.FLOAT,value:a.value});case vt.STRING:case vt.BLOCK_STRING:return this.parseStringLiteral();case vt.NAME:switch(this.advanceLexer(),a.value){case"true":return this.node(a,{kind:Lt.BOOLEAN,value:!0});case"false":return this.node(a,{kind:Lt.BOOLEAN,value:!1});case"null":return this.node(a,{kind:Lt.NULL});default:return this.node(a,{kind:Lt.ENUM,value:a.value})}case vt.DOLLAR:if(n)if(this.expectToken(vt.DOLLAR),this._lexer.token.kind===vt.NAME){const h=this._lexer.token.value;throw Ca(this._lexer.source,a.start,`Unexpected variable "$${h}" in constant value.`)}else throw this.unexpected(a);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const n=this._lexer.token;return this.advanceLexer(),this.node(n,{kind:Lt.STRING,value:n.value,block:n.kind===vt.BLOCK_STRING})}parseList(n){const a=()=>this.parseValueLiteral(n);return this.node(this._lexer.token,{kind:Lt.LIST,values:this.any(vt.BRACKET_L,a,vt.BRACKET_R)})}parseObject(n){const a=()=>this.parseObjectField(n);return this.node(this._lexer.token,{kind:Lt.OBJECT,fields:this.any(vt.BRACE_L,a,vt.BRACE_R)})}parseObjectField(n){const a=this._lexer.token,h=this.parseName();return this.expectToken(vt.COLON),this.node(a,{kind:Lt.OBJECT_FIELD,name:h,value:this.parseValueLiteral(n)})}parseDirectives(n){const a=[];for(;this.peek(vt.AT);)a.push(this.parseDirective(n));return a}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(n){const a=this._lexer.token;return this.expectToken(vt.AT),this.node(a,{kind:Lt.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(n)})}parseTypeReference(){const n=this._lexer.token;let a;if(this.expectOptionalToken(vt.BRACKET_L)){const h=this.parseTypeReference();this.expectToken(vt.BRACKET_R),a=this.node(n,{kind:Lt.LIST_TYPE,type:h})}else a=this.parseNamedType();return this.expectOptionalToken(vt.BANG)?this.node(n,{kind:Lt.NON_NULL_TYPE,type:a}):a}parseNamedType(){return this.node(this._lexer.token,{kind:Lt.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(vt.STRING)||this.peek(vt.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const n=this._lexer.token,a=this.parseDescription();this.expectKeyword("schema");const h=this.parseConstDirectives(),f=this.many(vt.BRACE_L,this.parseOperationTypeDefinition,vt.BRACE_R);return this.node(n,{kind:Lt.SCHEMA_DEFINITION,description:a,directives:h,operationTypes:f})}parseOperationTypeDefinition(){const n=this._lexer.token,a=this.parseOperationType();this.expectToken(vt.COLON);const h=this.parseNamedType();return this.node(n,{kind:Lt.OPERATION_TYPE_DEFINITION,operation:a,type:h})}parseScalarTypeDefinition(){const n=this._lexer.token,a=this.parseDescription();this.expectKeyword("scalar");const h=this.parseName(),f=this.parseConstDirectives();return this.node(n,{kind:Lt.SCALAR_TYPE_DEFINITION,description:a,name:h,directives:f})}parseObjectTypeDefinition(){const n=this._lexer.token,a=this.parseDescription();this.expectKeyword("type");const h=this.parseName(),f=this.parseImplementsInterfaces(),g=this.parseConstDirectives(),_=this.parseFieldsDefinition();return this.node(n,{kind:Lt.OBJECT_TYPE_DEFINITION,description:a,name:h,interfaces:f,directives:g,fields:_})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(vt.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(vt.BRACE_L,this.parseFieldDefinition,vt.BRACE_R)}parseFieldDefinition(){const n=this._lexer.token,a=this.parseDescription(),h=this.parseName(),f=this.parseArgumentDefs();this.expectToken(vt.COLON);const g=this.parseTypeReference(),_=this.parseConstDirectives();return this.node(n,{kind:Lt.FIELD_DEFINITION,description:a,name:h,arguments:f,type:g,directives:_})}parseArgumentDefs(){return this.optionalMany(vt.PAREN_L,this.parseInputValueDef,vt.PAREN_R)}parseInputValueDef(){const n=this._lexer.token,a=this.parseDescription(),h=this.parseName();this.expectToken(vt.COLON);const f=this.parseTypeReference();let g;this.expectOptionalToken(vt.EQUALS)&&(g=this.parseConstValueLiteral());const _=this.parseConstDirectives();return this.node(n,{kind:Lt.INPUT_VALUE_DEFINITION,description:a,name:h,type:f,defaultValue:g,directives:_})}parseInterfaceTypeDefinition(){const n=this._lexer.token,a=this.parseDescription();this.expectKeyword("interface");const h=this.parseName(),f=this.parseImplementsInterfaces(),g=this.parseConstDirectives(),_=this.parseFieldsDefinition();return this.node(n,{kind:Lt.INTERFACE_TYPE_DEFINITION,description:a,name:h,interfaces:f,directives:g,fields:_})}parseUnionTypeDefinition(){const n=this._lexer.token,a=this.parseDescription();this.expectKeyword("union");const h=this.parseName(),f=this.parseConstDirectives(),g=this.parseUnionMemberTypes();return this.node(n,{kind:Lt.UNION_TYPE_DEFINITION,description:a,name:h,directives:f,types:g})}parseUnionMemberTypes(){return this.expectOptionalToken(vt.EQUALS)?this.delimitedMany(vt.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const n=this._lexer.token,a=this.parseDescription();this.expectKeyword("enum");const h=this.parseName(),f=this.parseConstDirectives(),g=this.parseEnumValuesDefinition();return this.node(n,{kind:Lt.ENUM_TYPE_DEFINITION,description:a,name:h,directives:f,values:g})}parseEnumValuesDefinition(){return this.optionalMany(vt.BRACE_L,this.parseEnumValueDefinition,vt.BRACE_R)}parseEnumValueDefinition(){const n=this._lexer.token,a=this.parseDescription(),h=this.parseEnumValueName(),f=this.parseConstDirectives();return this.node(n,{kind:Lt.ENUM_VALUE_DEFINITION,description:a,name:h,directives:f})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Ca(this._lexer.source,this._lexer.token.start,`${Zb(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const n=this._lexer.token,a=this.parseDescription();this.expectKeyword("input");const h=this.parseName(),f=this.parseConstDirectives(),g=this.parseInputFieldsDefinition();return this.node(n,{kind:Lt.INPUT_OBJECT_TYPE_DEFINITION,description:a,name:h,directives:f,fields:g})}parseInputFieldsDefinition(){return this.optionalMany(vt.BRACE_L,this.parseInputValueDef,vt.BRACE_R)}parseTypeSystemExtension(){const n=this._lexer.lookahead();if(n.kind===vt.NAME)switch(n.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(n)}parseSchemaExtension(){const n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const a=this.parseConstDirectives(),h=this.optionalMany(vt.BRACE_L,this.parseOperationTypeDefinition,vt.BRACE_R);if(a.length===0&&h.length===0)throw this.unexpected();return this.node(n,{kind:Lt.SCHEMA_EXTENSION,directives:a,operationTypes:h})}parseScalarTypeExtension(){const n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const a=this.parseName(),h=this.parseConstDirectives();if(h.length===0)throw this.unexpected();return this.node(n,{kind:Lt.SCALAR_TYPE_EXTENSION,name:a,directives:h})}parseObjectTypeExtension(){const n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const a=this.parseName(),h=this.parseImplementsInterfaces(),f=this.parseConstDirectives(),g=this.parseFieldsDefinition();if(h.length===0&&f.length===0&&g.length===0)throw this.unexpected();return this.node(n,{kind:Lt.OBJECT_TYPE_EXTENSION,name:a,interfaces:h,directives:f,fields:g})}parseInterfaceTypeExtension(){const n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const a=this.parseName(),h=this.parseImplementsInterfaces(),f=this.parseConstDirectives(),g=this.parseFieldsDefinition();if(h.length===0&&f.length===0&&g.length===0)throw this.unexpected();return this.node(n,{kind:Lt.INTERFACE_TYPE_EXTENSION,name:a,interfaces:h,directives:f,fields:g})}parseUnionTypeExtension(){const n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const a=this.parseName(),h=this.parseConstDirectives(),f=this.parseUnionMemberTypes();if(h.length===0&&f.length===0)throw this.unexpected();return this.node(n,{kind:Lt.UNION_TYPE_EXTENSION,name:a,directives:h,types:f})}parseEnumTypeExtension(){const n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const a=this.parseName(),h=this.parseConstDirectives(),f=this.parseEnumValuesDefinition();if(h.length===0&&f.length===0)throw this.unexpected();return this.node(n,{kind:Lt.ENUM_TYPE_EXTENSION,name:a,directives:h,values:f})}parseInputObjectTypeExtension(){const n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const a=this.parseName(),h=this.parseConstDirectives(),f=this.parseInputFieldsDefinition();if(h.length===0&&f.length===0)throw this.unexpected();return this.node(n,{kind:Lt.INPUT_OBJECT_TYPE_EXTENSION,name:a,directives:h,fields:f})}parseDirectiveDefinition(){const n=this._lexer.token,a=this.parseDescription();this.expectKeyword("directive"),this.expectToken(vt.AT);const h=this.parseName(),f=this.parseArgumentDefs(),g=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const _=this.parseDirectiveLocations();return this.node(n,{kind:Lt.DIRECTIVE_DEFINITION,description:a,name:h,arguments:f,repeatable:g,locations:_})}parseDirectiveLocations(){return this.delimitedMany(vt.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const n=this._lexer.token,a=this.parseName();if(Object.prototype.hasOwnProperty.call(di,a.value))return a;throw this.unexpected(n)}parseSchemaCoordinate(){const n=this._lexer.token,a=this.expectOptionalToken(vt.AT),h=this.parseName();let f;!a&&this.expectOptionalToken(vt.DOT)&&(f=this.parseName());let g;return(a||f)&&this.expectOptionalToken(vt.PAREN_L)&&(g=this.parseName(),this.expectToken(vt.COLON),this.expectToken(vt.PAREN_R)),a?g?this.node(n,{kind:Lt.DIRECTIVE_ARGUMENT_COORDINATE,name:h,argumentName:g}):this.node(n,{kind:Lt.DIRECTIVE_COORDINATE,name:h}):f?g?this.node(n,{kind:Lt.ARGUMENT_COORDINATE,name:h,fieldName:f,argumentName:g}):this.node(n,{kind:Lt.MEMBER_COORDINATE,name:h,memberName:f}):this.node(n,{kind:Lt.TYPE_COORDINATE,name:h})}node(n,a){return this._options.noLocation!==!0&&(a.loc=new zR(n,this._lexer.lastToken,this._lexer.source)),a}peek(n){return this._lexer.token.kind===n}expectToken(n){const a=this._lexer.token;if(a.kind===n)return this.advanceLexer(),a;throw Ca(this._lexer.source,a.start,`Expected ${UA(n)}, found ${Zb(a)}.`)}expectOptionalToken(n){return this._lexer.token.kind===n?(this.advanceLexer(),!0):!1}expectKeyword(n){const a=this._lexer.token;if(a.kind===vt.NAME&&a.value===n)this.advanceLexer();else throw Ca(this._lexer.source,a.start,`Expected "${n}", found ${Zb(a)}.`)}expectOptionalKeyword(n){const a=this._lexer.token;return a.kind===vt.NAME&&a.value===n?(this.advanceLexer(),!0):!1}unexpected(n){const a=n??this._lexer.token;return Ca(this._lexer.source,a.start,`Unexpected ${Zb(a)}.`)}any(n,a,h){this.expectToken(n);const f=[];for(;!this.expectOptionalToken(h);)f.push(a.call(this));return f}optionalMany(n,a,h){if(this.expectOptionalToken(n)){const f=[];do f.push(a.call(this));while(!this.expectOptionalToken(h));return f}return[]}many(n,a,h){this.expectToken(n);const f=[];do f.push(a.call(this));while(!this.expectOptionalToken(h));return f}delimitedMany(n,a){this.expectOptionalToken(n);const h=[];do h.push(a.call(this));while(this.expectOptionalToken(n));return h}advanceLexer(){const{maxTokens:n}=this._options,a=this._lexer.advance();if(a.kind!==vt.EOF&&(++this._tokenCounter,n!==void 0&&this._tokenCounter>n))throw Ca(this._lexer.source,a.start,`Document contains more that ${n} tokens. Parsing aborted.`)}}function Zb(i){const n=i.value;return UA(i.kind)+(n!=null?` "${n}"`:"")}function UA(i){return GR(i)?`"${i}"`:i}const lk=5;function ck(i,n){const[a,h]=n?[i,n]:[void 0,i];let f=" Did you mean ";a&&(f+=a+" ");const g=h.map(A=>`"${A}"`);switch(g.length){case 0:return"";case 1:return f+g[0]+"?";case 2:return f+g[0]+" or "+g[1]+"?"}const _=g.slice(0,lk),c=_.pop();return f+_.join(", ")+", or "+c+"?"}function fS(i){return i}function GA(i,n){const a=Object.create(null);for(const h of i)a[n(h)]=h;return a}function zm(i,n,a){const h=Object.create(null);for(const f of i)h[n(f)]=a(f);return h}function Yx(i,n){const a=Object.create(null);for(const h of Object.keys(i))a[h]=n(i[h],h);return a}function uk(i,n){let a=0,h=0;for(;a<i.length&&h<n.length;){let f=i.charCodeAt(a),g=n.charCodeAt(h);if(qb(f)&&qb(g)){let _=0;do++a,_=_*10+f-Aw,f=i.charCodeAt(a);while(qb(f)&&_>0);let c=0;do++h,c=c*10+g-Aw,g=n.charCodeAt(h);while(qb(g)&&c>0);if(_<c)return-1;if(_>c)return 1}else{if(f<g)return-1;if(f>g)return 1;++a,++h}}return i.length-n.length}const Aw=48,hk=57;function qb(i){return!isNaN(i)&&Aw<=i&&i<=hk}function dk(i,n){const a=Object.create(null),h=new fk(i),f=Math.floor(i.length*.4)+1;for(const g of n){const _=h.measure(g,f);_!==void 0&&(a[g]=_)}return Object.keys(a).sort((g,_)=>{const c=a[g]-a[_];return c!==0?c:uk(g,_)})}class fk{constructor(n){this._input=n,this._inputLowerCase=n.toLowerCase(),this._inputArray=pS(this._inputLowerCase),this._rows=[new Array(n.length+1).fill(0),new Array(n.length+1).fill(0),new Array(n.length+1).fill(0)]}measure(n,a){if(this._input===n)return 0;const h=n.toLowerCase();if(this._inputLowerCase===h)return 1;let f=pS(h),g=this._inputArray;if(f.length<g.length){const O=f;f=g,g=O}const _=f.length,c=g.length;if(_-c>a)return;const A=this._rows;for(let O=0;O<=c;O++)A[0][O]=O;for(let O=1;O<=_;O++){const z=A[(O-1)%3],V=A[O%3];let Y=V[0]=O;for(let ee=1;ee<=c;ee++){const ie=f[O-1]===g[ee-1]?0:1;let q=Math.min(z[ee]+1,V[ee-1]+1,z[ee-1]+ie);if(O>1&&ee>1&&f[O-1]===g[ee-2]&&f[O-2]===g[ee-1]){const fe=A[(O-2)%3][ee-2];q=Math.min(q,fe+1)}q<Y&&(Y=q),V[ee]=q}if(Y>a)return}const D=A[_%3][c];return D<=a?D:void 0}}function pS(i){const n=i.length,a=new Array(n);for(let h=0;h<n;++h)a[h]=i.charCodeAt(h);return a}function Ec(i){if(i==null)return Object.create(null);if(Object.getPrototypeOf(i)===null)return i;const n=Object.create(null);for(const[a,h]of Object.entries(i))n[a]=h;return n}function pk(i){return`"${i.replace(mk,gk)}"`}const mk=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function gk(i){return yk[i.charCodeAt(0)]}const yk=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],_k=Object.freeze({});function _2(i,n,a=OA){const h=new Map;for(const fe of Object.values(Lt))h.set(fe,vk(n,fe));let f,g=Array.isArray(i),_=[i],c=-1,A=[],D=i,O,z;const V=[],Y=[];do{c++;const fe=c===_.length,Ee=fe&&A.length!==0;if(fe){if(O=Y.length===0?void 0:V[V.length-1],D=z,z=Y.pop(),Ee)if(g){D=D.slice();let ze=0;for(const[Ce,Re]of A){const Ne=Ce-ze;Re===null?(D.splice(Ne,1),ze++):D[Ne]=Re}}else{D={...D};for(const[ze,Ce]of A)D[ze]=Ce}c=f.index,_=f.keys,A=f.edits,g=f.inArray,f=f.prev}else if(z){if(O=g?c:_[c],D=z[O],D==null)continue;V.push(O)}let we;if(!Array.isArray(D)){var ee,ie;hS(D)||Ii(!1,`Invalid AST Node: ${An(D)}.`);const ze=fe?(ee=h.get(D.kind))===null||ee===void 0?void 0:ee.leave:(ie=h.get(D.kind))===null||ie===void 0?void 0:ie.enter;if(we=ze?.call(n,D,O,z,V,Y),we===_k)break;if(we===!1){if(!fe){V.pop();continue}}else if(we!==void 0&&(A.push([O,we]),!fe))if(hS(we))D=we;else{V.pop();continue}}if(we===void 0&&Ee&&A.push([O,D]),fe)V.pop();else{var q;f={inArray:g,index:c,keys:_,edits:A,prev:f},g=Array.isArray(D),_=g?D:(q=a[D.kind])!==null&&q!==void 0?q:[],c=-1,A=[],z&&Y.push(z),z=D}}while(f!==void 0);return A.length!==0?A[A.length-1][1]:i}function vk(i,n){const a=i[n];return typeof a=="object"?a:typeof a=="function"?{enter:a,leave:void 0}:{enter:i.enter,leave:i.leave}}function bo(i){return _2(i,xk)}const bk=80,xk={Name:{leave:i=>i.value},Variable:{leave:i=>"$"+i.name},Document:{leave:i=>Kt(i.definitions,`

`)},OperationDefinition:{leave(i){const n=q1(i.variableDefinitions)?Rn(`(
`,Kt(i.variableDefinitions,`
`),`
)`):Rn("(",Kt(i.variableDefinitions,", "),")"),a=Rn("",i.description,`
`)+Kt([i.operation,Kt([i.name,n]),Kt(i.directives," ")]," ");return(a==="query"?"":a+" ")+i.selectionSet}},VariableDefinition:{leave:({variable:i,type:n,defaultValue:a,directives:h,description:f})=>Rn("",f,`
`)+i+": "+n+Rn(" = ",a)+Rn(" ",Kt(h," "))},SelectionSet:{leave:({selections:i})=>gu(i)},Field:{leave({alias:i,name:n,arguments:a,directives:h,selectionSet:f}){const g=Rn("",i,": ")+n;let _=g+Rn("(",Kt(a,", "),")");return _.length>bk&&(_=g+Rn(`(
`,lx(Kt(a,`
`)),`
)`)),Kt([_,Kt(h," "),f]," ")}},Argument:{leave:({name:i,value:n})=>i+": "+n},FragmentSpread:{leave:({name:i,directives:n})=>"..."+i+Rn(" ",Kt(n," "))},InlineFragment:{leave:({typeCondition:i,directives:n,selectionSet:a})=>Kt(["...",Rn("on ",i),Kt(n," "),a]," ")},FragmentDefinition:{leave:({name:i,typeCondition:n,variableDefinitions:a,directives:h,selectionSet:f,description:g})=>Rn("",g,`
`)+`fragment ${i}${Rn("(",Kt(a,", "),")")} on ${n} ${Rn("",Kt(h," ")," ")}`+f},IntValue:{leave:({value:i})=>i},FloatValue:{leave:({value:i})=>i},StringValue:{leave:({value:i,block:n})=>n?VR(i):pk(i)},BooleanValue:{leave:({value:i})=>i?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:i})=>i},ListValue:{leave:({values:i})=>"["+Kt(i,", ")+"]"},ObjectValue:{leave:({fields:i})=>"{"+Kt(i,", ")+"}"},ObjectField:{leave:({name:i,value:n})=>i+": "+n},Directive:{leave:({name:i,arguments:n})=>"@"+i+Rn("(",Kt(n,", "),")")},NamedType:{leave:({name:i})=>i},ListType:{leave:({type:i})=>"["+i+"]"},NonNullType:{leave:({type:i})=>i+"!"},SchemaDefinition:{leave:({description:i,directives:n,operationTypes:a})=>Rn("",i,`
`)+Kt(["schema",Kt(n," "),gu(a)]," ")},OperationTypeDefinition:{leave:({operation:i,type:n})=>i+": "+n},ScalarTypeDefinition:{leave:({description:i,name:n,directives:a})=>Rn("",i,`
`)+Kt(["scalar",n,Kt(a," ")]," ")},ObjectTypeDefinition:{leave:({description:i,name:n,interfaces:a,directives:h,fields:f})=>Rn("",i,`
`)+Kt(["type",n,Rn("implements ",Kt(a," & ")),Kt(h," "),gu(f)]," ")},FieldDefinition:{leave:({description:i,name:n,arguments:a,type:h,directives:f})=>Rn("",i,`
`)+n+(q1(a)?Rn(`(
`,lx(Kt(a,`
`)),`
)`):Rn("(",Kt(a,", "),")"))+": "+h+Rn(" ",Kt(f," "))},InputValueDefinition:{leave:({description:i,name:n,type:a,defaultValue:h,directives:f})=>Rn("",i,`
`)+Kt([n+": "+a,Rn("= ",h),Kt(f," ")]," ")},InterfaceTypeDefinition:{leave:({description:i,name:n,interfaces:a,directives:h,fields:f})=>Rn("",i,`
`)+Kt(["interface",n,Rn("implements ",Kt(a," & ")),Kt(h," "),gu(f)]," ")},UnionTypeDefinition:{leave:({description:i,name:n,directives:a,types:h})=>Rn("",i,`
`)+Kt(["union",n,Kt(a," "),Rn("= ",Kt(h," | "))]," ")},EnumTypeDefinition:{leave:({description:i,name:n,directives:a,values:h})=>Rn("",i,`
`)+Kt(["enum",n,Kt(a," "),gu(h)]," ")},EnumValueDefinition:{leave:({description:i,name:n,directives:a})=>Rn("",i,`
`)+Kt([n,Kt(a," ")]," ")},InputObjectTypeDefinition:{leave:({description:i,name:n,directives:a,fields:h})=>Rn("",i,`
`)+Kt(["input",n,Kt(a," "),gu(h)]," ")},DirectiveDefinition:{leave:({description:i,name:n,arguments:a,repeatable:h,locations:f})=>Rn("",i,`
`)+"directive @"+n+(q1(a)?Rn(`(
`,lx(Kt(a,`
`)),`
)`):Rn("(",Kt(a,", "),")"))+(h?" repeatable":"")+" on "+Kt(f," | ")},SchemaExtension:{leave:({directives:i,operationTypes:n})=>Kt(["extend schema",Kt(i," "),gu(n)]," ")},ScalarTypeExtension:{leave:({name:i,directives:n})=>Kt(["extend scalar",i,Kt(n," ")]," ")},ObjectTypeExtension:{leave:({name:i,interfaces:n,directives:a,fields:h})=>Kt(["extend type",i,Rn("implements ",Kt(n," & ")),Kt(a," "),gu(h)]," ")},InterfaceTypeExtension:{leave:({name:i,interfaces:n,directives:a,fields:h})=>Kt(["extend interface",i,Rn("implements ",Kt(n," & ")),Kt(a," "),gu(h)]," ")},UnionTypeExtension:{leave:({name:i,directives:n,types:a})=>Kt(["extend union",i,Kt(n," "),Rn("= ",Kt(a," | "))]," ")},EnumTypeExtension:{leave:({name:i,directives:n,values:a})=>Kt(["extend enum",i,Kt(n," "),gu(a)]," ")},InputObjectTypeExtension:{leave:({name:i,directives:n,fields:a})=>Kt(["extend input",i,Kt(n," "),gu(a)]," ")},TypeCoordinate:{leave:({name:i})=>i},MemberCoordinate:{leave:({name:i,memberName:n})=>Kt([i,Rn(".",n)])},ArgumentCoordinate:{leave:({name:i,fieldName:n,argumentName:a})=>Kt([i,Rn(".",n),Rn("(",a,":)")])},DirectiveCoordinate:{leave:({name:i})=>Kt(["@",i])},DirectiveArgumentCoordinate:{leave:({name:i,argumentName:n})=>Kt(["@",i,Rn("(",n,":)")])}};function Kt(i,n=""){var a;return(a=i?.filter(h=>h).join(n))!==null&&a!==void 0?a:""}function gu(i){return Rn(`{
`,lx(Kt(i,`
`)),`
}`)}function Rn(i,n,a=""){return n!=null&&n!==""?i+n+a:""}function lx(i){return Rn("  ",i.replace(/\n/g,`
  `))}function q1(i){var n;return(n=i?.some(a=>a.includes(`
`)))!==null&&n!==void 0?n:!1}function Mw(i,n){switch(i.kind){case Lt.NULL:return null;case Lt.INT:return parseInt(i.value,10);case Lt.FLOAT:return parseFloat(i.value);case Lt.STRING:case Lt.ENUM:case Lt.BOOLEAN:return i.value;case Lt.LIST:return i.values.map(a=>Mw(a,n));case Lt.OBJECT:return zm(i.fields,a=>a.name.value,a=>Mw(a.value,n));case Lt.VARIABLE:return n?.[i.name.value]}}function Tu(i){if(i!=null||Ii(!1,"Must provide name."),typeof i=="string"||Ii(!1,"Expected name to be a string."),i.length===0)throw new Pi("Expected name to be a non-empty string.");for(let n=1;n<i.length;++n)if(!NA(i.charCodeAt(n)))throw new Pi(`Names must only contain [_a-zA-Z0-9] but "${i}" does not.`);if(!y2(i.charCodeAt(0)))throw new Pi(`Names must start with [_a-zA-Z] but "${i}" does not.`);return i}function wk(i){if(i==="true"||i==="false"||i==="null")throw new Pi(`Enum values cannot be named: ${i}`);return Tu(i)}function $A(i){return l0(i)||hp(i)||bu(i)||$m(i)||pp(i)||jd(i)||vp(i)||Bd(i)}function l0(i){return Ih(i,ng)}function hp(i){return Ih(i,bp)}function Tk(i){if(!hp(i))throw new Error(`Expected ${An(i)} to be a GraphQL Object type.`);return i}function bu(i){return Ih(i,nM)}function Sk(i){if(!bu(i))throw new Error(`Expected ${An(i)} to be a GraphQL Interface type.`);return i}function $m(i){return Ih(i,iM)}function pp(i){return Ih(i,Hx)}function jd(i){return Ih(i,rM)}function vp(i){return Ih(i,gc)}function Bd(i){return Ih(i,ai)}function ZA(i){return l0(i)||pp(i)||jd(i)||v2(i)&&ZA(i.ofType)}function qA(i){return l0(i)||hp(i)||bu(i)||$m(i)||pp(i)||v2(i)&&qA(i.ofType)}function YA(i){return l0(i)||pp(i)}function Ek(i){return bu(i)||$m(i)}class gc{constructor(n){$A(n)||Ii(!1,`Expected ${An(n)} to be a GraphQL type.`),this.ofType=n}get[Symbol.toStringTag](){return"GraphQLList"}toString(){return"["+String(this.ofType)+"]"}toJSON(){return this.toString()}}class ai{constructor(n){HA(n)||Ii(!1,`Expected ${An(n)} to be a GraphQL nullable type.`),this.ofType=n}get[Symbol.toStringTag](){return"GraphQLNonNull"}toString(){return String(this.ofType)+"!"}toJSON(){return this.toString()}}function v2(i){return vp(i)||Bd(i)}function HA(i){return $A(i)&&!Bd(i)}function Ak(i){if(!HA(i))throw new Error(`Expected ${An(i)} to be a GraphQL nullable type.`);return i}function Mk(i){if(i){let n=i;for(;v2(n);)n=n.ofType;return n}}function WA(i){return typeof i=="function"?i():i}function XA(i){return typeof i=="function"?i():i}class ng{constructor(n){var a,h,f,g;const _=(a=n.parseValue)!==null&&a!==void 0?a:fS;this.name=Tu(n.name),this.description=n.description,this.specifiedByURL=n.specifiedByURL,this.serialize=(h=n.serialize)!==null&&h!==void 0?h:fS,this.parseValue=_,this.parseLiteral=(f=n.parseLiteral)!==null&&f!==void 0?f:(c,A)=>_(Mw(c,A)),this.extensions=Ec(n.extensions),this.astNode=n.astNode,this.extensionASTNodes=(g=n.extensionASTNodes)!==null&&g!==void 0?g:[],n.specifiedByURL==null||typeof n.specifiedByURL=="string"||Ii(!1,`${this.name} must provide "specifiedByURL" as a string, but got: ${An(n.specifiedByURL)}.`),n.serialize==null||typeof n.serialize=="function"||Ii(!1,`${this.name} must provide "serialize" function. If this custom Scalar is also used as an input type, ensure "parseValue" and "parseLiteral" functions are also provided.`),n.parseLiteral&&(typeof n.parseValue=="function"&&typeof n.parseLiteral=="function"||Ii(!1,`${this.name} must provide both "parseValue" and "parseLiteral" functions.`))}get[Symbol.toStringTag](){return"GraphQLScalarType"}toConfig(){return{name:this.name,description:this.description,specifiedByURL:this.specifiedByURL,serialize:this.serialize,parseValue:this.parseValue,parseLiteral:this.parseLiteral,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}class bp{constructor(n){var a;this.name=Tu(n.name),this.description=n.description,this.isTypeOf=n.isTypeOf,this.extensions=Ec(n.extensions),this.astNode=n.astNode,this.extensionASTNodes=(a=n.extensionASTNodes)!==null&&a!==void 0?a:[],this._fields=()=>KA(n),this._interfaces=()=>QA(n),n.isTypeOf==null||typeof n.isTypeOf=="function"||Ii(!1,`${this.name} must provide "isTypeOf" as a function, but got: ${An(n.isTypeOf)}.`)}get[Symbol.toStringTag](){return"GraphQLObjectType"}getFields(){return typeof this._fields=="function"&&(this._fields=this._fields()),this._fields}getInterfaces(){return typeof this._interfaces=="function"&&(this._interfaces=this._interfaces()),this._interfaces}toConfig(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:eM(this.getFields()),isTypeOf:this.isTypeOf,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}function QA(i){var n;const a=WA((n=i.interfaces)!==null&&n!==void 0?n:[]);return Array.isArray(a)||Ii(!1,`${i.name} interfaces must be an Array or a function which returns an Array.`),a}function KA(i){const n=XA(i.fields);return By(n)||Ii(!1,`${i.name} fields must be an object with field names as keys or a function which returns such an object.`),Yx(n,(a,h)=>{var f;By(a)||Ii(!1,`${i.name}.${h} field config must be an object.`),a.resolve==null||typeof a.resolve=="function"||Ii(!1,`${i.name}.${h} field resolver must be a function if provided, but got: ${An(a.resolve)}.`);const g=(f=a.args)!==null&&f!==void 0?f:{};return By(g)||Ii(!1,`${i.name}.${h} args must be an object with argument names as keys.`),{name:Tu(h),description:a.description,type:a.type,args:JA(g),resolve:a.resolve,subscribe:a.subscribe,deprecationReason:a.deprecationReason,extensions:Ec(a.extensions),astNode:a.astNode}})}function JA(i){return Object.entries(i).map(([n,a])=>({name:Tu(n),description:a.description,type:a.type,defaultValue:a.defaultValue,deprecationReason:a.deprecationReason,extensions:Ec(a.extensions),astNode:a.astNode}))}function By(i){return Hd(i)&&!Array.isArray(i)}function eM(i){return Yx(i,n=>({description:n.description,type:n.type,args:tM(n.args),resolve:n.resolve,subscribe:n.subscribe,deprecationReason:n.deprecationReason,extensions:n.extensions,astNode:n.astNode}))}function tM(i){return zm(i,n=>n.name,n=>({description:n.description,type:n.type,defaultValue:n.defaultValue,deprecationReason:n.deprecationReason,extensions:n.extensions,astNode:n.astNode}))}class nM{constructor(n){var a;this.name=Tu(n.name),this.description=n.description,this.resolveType=n.resolveType,this.extensions=Ec(n.extensions),this.astNode=n.astNode,this.extensionASTNodes=(a=n.extensionASTNodes)!==null&&a!==void 0?a:[],this._fields=KA.bind(void 0,n),this._interfaces=QA.bind(void 0,n),n.resolveType==null||typeof n.resolveType=="function"||Ii(!1,`${this.name} must provide "resolveType" as a function, but got: ${An(n.resolveType)}.`)}get[Symbol.toStringTag](){return"GraphQLInterfaceType"}getFields(){return typeof this._fields=="function"&&(this._fields=this._fields()),this._fields}getInterfaces(){return typeof this._interfaces=="function"&&(this._interfaces=this._interfaces()),this._interfaces}toConfig(){return{name:this.name,description:this.description,interfaces:this.getInterfaces(),fields:eM(this.getFields()),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}class iM{constructor(n){var a;this.name=Tu(n.name),this.description=n.description,this.resolveType=n.resolveType,this.extensions=Ec(n.extensions),this.astNode=n.astNode,this.extensionASTNodes=(a=n.extensionASTNodes)!==null&&a!==void 0?a:[],this._types=Ck.bind(void 0,n),n.resolveType==null||typeof n.resolveType=="function"||Ii(!1,`${this.name} must provide "resolveType" as a function, but got: ${An(n.resolveType)}.`)}get[Symbol.toStringTag](){return"GraphQLUnionType"}getTypes(){return typeof this._types=="function"&&(this._types=this._types()),this._types}toConfig(){return{name:this.name,description:this.description,types:this.getTypes(),resolveType:this.resolveType,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}function Ck(i){const n=WA(i.types);return Array.isArray(n)||Ii(!1,`Must provide Array of types or a function which returns such an array for Union ${i.name}.`),n}class Hx{constructor(n){var a;this.name=Tu(n.name),this.description=n.description,this.extensions=Ec(n.extensions),this.astNode=n.astNode,this.extensionASTNodes=(a=n.extensionASTNodes)!==null&&a!==void 0?a:[],this._values=typeof n.values=="function"?n.values:mS(this.name,n.values),this._valueLookup=null,this._nameLookup=null}get[Symbol.toStringTag](){return"GraphQLEnumType"}getValues(){return typeof this._values=="function"&&(this._values=mS(this.name,this._values())),this._values}getValue(n){return this._nameLookup===null&&(this._nameLookup=GA(this.getValues(),a=>a.name)),this._nameLookup[n]}serialize(n){this._valueLookup===null&&(this._valueLookup=new Map(this.getValues().map(h=>[h.value,h])));const a=this._valueLookup.get(n);if(a===void 0)throw new Pi(`Enum "${this.name}" cannot represent value: ${An(n)}`);return a.name}parseValue(n){if(typeof n!="string"){const h=An(n);throw new Pi(`Enum "${this.name}" cannot represent non-string value: ${h}.`+Yb(this,h))}const a=this.getValue(n);if(a==null)throw new Pi(`Value "${n}" does not exist in "${this.name}" enum.`+Yb(this,n));return a.value}parseLiteral(n,a){if(n.kind!==Lt.ENUM){const f=bo(n);throw new Pi(`Enum "${this.name}" cannot represent non-enum value: ${f}.`+Yb(this,f),{nodes:n})}const h=this.getValue(n.value);if(h==null){const f=bo(n);throw new Pi(`Value "${f}" does not exist in "${this.name}" enum.`+Yb(this,f),{nodes:n})}return h.value}toConfig(){const n=zm(this.getValues(),a=>a.name,a=>({description:a.description,value:a.value,deprecationReason:a.deprecationReason,extensions:a.extensions,astNode:a.astNode}));return{name:this.name,description:this.description,values:n,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes}}toString(){return this.name}toJSON(){return this.toString()}}function Yb(i,n){const a=i.getValues().map(f=>f.name),h=dk(n,a);return ck("the enum value",h)}function mS(i,n){return By(n)||Ii(!1,`${i} values must be an object with value names as keys.`),Object.entries(n).map(([a,h])=>(By(h)||Ii(!1,`${i}.${a} must refer to an object with a "value" key representing an internal value but got: ${An(h)}.`),{name:wk(a),description:h.description,value:h.value!==void 0?h.value:a,deprecationReason:h.deprecationReason,extensions:Ec(h.extensions),astNode:h.astNode}))}class rM{constructor(n){var a,h;this.name=Tu(n.name),this.description=n.description,this.extensions=Ec(n.extensions),this.astNode=n.astNode,this.extensionASTNodes=(a=n.extensionASTNodes)!==null&&a!==void 0?a:[],this.isOneOf=(h=n.isOneOf)!==null&&h!==void 0?h:!1,this._fields=Dk.bind(void 0,n)}get[Symbol.toStringTag](){return"GraphQLInputObjectType"}getFields(){return typeof this._fields=="function"&&(this._fields=this._fields()),this._fields}toConfig(){const n=Yx(this.getFields(),a=>({description:a.description,type:a.type,defaultValue:a.defaultValue,deprecationReason:a.deprecationReason,extensions:a.extensions,astNode:a.astNode}));return{name:this.name,description:this.description,fields:n,extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes,isOneOf:this.isOneOf}}toString(){return this.name}toJSON(){return this.toString()}}function Dk(i){const n=XA(i.fields);return By(n)||Ii(!1,`${i.name} fields must be an object with field names as keys or a function which returns such an object.`),Yx(n,(a,h)=>(!("resolve"in a)||Ii(!1,`${i.name}.${h} field has a resolve property, but Input Types cannot define resolvers.`),{name:Tu(h),description:a.description,type:a.type,defaultValue:a.defaultValue,deprecationReason:a.deprecationReason,extensions:Ec(a.extensions),astNode:a.astNode}))}const Y1=2147483647,H1=-2147483648,Ik=new ng({name:"Int",description:"The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.",serialize(i){const n=xv(i);if(typeof n=="boolean")return n?1:0;let a=n;if(typeof n=="string"&&n!==""&&(a=Number(n)),typeof a!="number"||!Number.isInteger(a))throw new Pi(`Int cannot represent non-integer value: ${An(n)}`);if(a>Y1||a<H1)throw new Pi("Int cannot represent non 32-bit signed integer value: "+An(n));return a},parseValue(i){if(typeof i!="number"||!Number.isInteger(i))throw new Pi(`Int cannot represent non-integer value: ${An(i)}`);if(i>Y1||i<H1)throw new Pi(`Int cannot represent non 32-bit signed integer value: ${i}`);return i},parseLiteral(i){if(i.kind!==Lt.INT)throw new Pi(`Int cannot represent non-integer value: ${bo(i)}`,{nodes:i});const n=parseInt(i.value,10);if(n>Y1||n<H1)throw new Pi(`Int cannot represent non 32-bit signed integer value: ${i.value}`,{nodes:i});return n}}),Rk=new ng({name:"Float",description:"The `Float` scalar type represents signed double-precision fractional values as specified by [IEEE 754](https://en.wikipedia.org/wiki/IEEE_floating_point).",serialize(i){const n=xv(i);if(typeof n=="boolean")return n?1:0;let a=n;if(typeof n=="string"&&n!==""&&(a=Number(n)),typeof a!="number"||!Number.isFinite(a))throw new Pi(`Float cannot represent non numeric value: ${An(n)}`);return a},parseValue(i){if(typeof i!="number"||!Number.isFinite(i))throw new Pi(`Float cannot represent non numeric value: ${An(i)}`);return i},parseLiteral(i){if(i.kind!==Lt.FLOAT&&i.kind!==Lt.INT)throw new Pi(`Float cannot represent non numeric value: ${bo(i)}`,i);return parseFloat(i.value)}}),oa=new ng({name:"String",description:"The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.",serialize(i){const n=xv(i);if(typeof n=="string")return n;if(typeof n=="boolean")return n?"true":"false";if(typeof n=="number"&&Number.isFinite(n))return n.toString();throw new Pi(`String cannot represent value: ${An(i)}`)},parseValue(i){if(typeof i!="string")throw new Pi(`String cannot represent a non string value: ${An(i)}`);return i},parseLiteral(i){if(i.kind!==Lt.STRING)throw new Pi(`String cannot represent a non string value: ${bo(i)}`,{nodes:i});return i.value}}),Nl=new ng({name:"Boolean",description:"The `Boolean` scalar type represents `true` or `false`.",serialize(i){const n=xv(i);if(typeof n=="boolean")return n;if(Number.isFinite(n))return n!==0;throw new Pi(`Boolean cannot represent a non boolean value: ${An(n)}`)},parseValue(i){if(typeof i!="boolean")throw new Pi(`Boolean cannot represent a non boolean value: ${An(i)}`);return i},parseLiteral(i){if(i.kind!==Lt.BOOLEAN)throw new Pi(`Boolean cannot represent a non boolean value: ${bo(i)}`,{nodes:i});return i.value}}),aM=new ng({name:"ID",description:'The `ID` scalar type represents a unique identifier, often used to refetch an object or as key for a cache. The ID type appears in a JSON response as a String; however, it is not intended to be human-readable. When expected as an input type, any string (such as `"4"`) or integer (such as `4`) input value will be accepted as an ID.',serialize(i){const n=xv(i);if(typeof n=="string")return n;if(Number.isInteger(n))return String(n);throw new Pi(`ID cannot represent value: ${An(i)}`)},parseValue(i){if(typeof i=="string")return i;if(typeof i=="number"&&Number.isInteger(i))return i.toString();throw new Pi(`ID cannot represent value: ${An(i)}`)},parseLiteral(i){if(i.kind!==Lt.STRING&&i.kind!==Lt.INT)throw new Pi("ID cannot represent a non-string and non-integer value: "+bo(i),{nodes:i});return i.value}}),kk=Object.freeze([oa,Ik,Rk,Nl,aM]);function xv(i){if(Hd(i)){if(typeof i.valueOf=="function"){const n=i.valueOf();if(!Hd(n))return n}if(typeof i.toJSON=="function")return i.toJSON()}return i}function Ok(i){return Ih(i,ig)}class ig{constructor(n){var a,h;this.name=Tu(n.name),this.description=n.description,this.locations=n.locations,this.isRepeatable=(a=n.isRepeatable)!==null&&a!==void 0?a:!1,this.extensions=Ec(n.extensions),this.astNode=n.astNode,Array.isArray(n.locations)||Ii(!1,`@${n.name} locations must be an Array.`);const f=(h=n.args)!==null&&h!==void 0?h:{};Hd(f)&&!Array.isArray(f)||Ii(!1,`@${n.name} args must be an object with argument names as keys.`),this.args=JA(f)}get[Symbol.toStringTag](){return"GraphQLDirective"}toConfig(){return{name:this.name,description:this.description,locations:this.locations,args:tM(this.args),isRepeatable:this.isRepeatable,extensions:this.extensions,astNode:this.astNode}}toString(){return"@"+this.name}toJSON(){return this.toString()}}const Lk=new ig({name:"include",description:"Directs the executor to include this field or fragment only when the `if` argument is true.",locations:[di.FIELD,di.FRAGMENT_SPREAD,di.INLINE_FRAGMENT],args:{if:{type:new ai(Nl),description:"Included when true."}}}),Nk=new ig({name:"skip",description:"Directs the executor to skip this field or fragment when the `if` argument is true.",locations:[di.FIELD,di.FRAGMENT_SPREAD,di.INLINE_FRAGMENT],args:{if:{type:new ai(Nl),description:"Skipped when true."}}}),Pk="No longer supported",zk=new ig({name:"deprecated",description:"Marks an element of a GraphQL schema as no longer supported.",locations:[di.FIELD_DEFINITION,di.ARGUMENT_DEFINITION,di.INPUT_FIELD_DEFINITION,di.ENUM_VALUE],args:{reason:{type:oa,description:"Explains why this element was deprecated, usually also including a suggestion for how to access supported similar data. Formatted using the Markdown syntax, as specified by [CommonMark](https://commonmark.org/).",defaultValue:Pk}}}),Fk=new ig({name:"specifiedBy",description:"Exposes a URL that specifies the behavior of this scalar.",locations:[di.SCALAR],args:{url:{type:new ai(oa),description:"The URL that specifies the behavior of this scalar."}}}),jk=new ig({name:"oneOf",description:"Indicates exactly one field must be supplied and this field must not be `null`.",locations:[di.INPUT_OBJECT],args:{}}),Bk=Object.freeze([Lk,Nk,zk,Fk,jk]);function Vk(i){return typeof i=="object"&&typeof i?.[Symbol.iterator]=="function"}function z_(i,n){if(Bd(n)){const a=z_(i,n.ofType);return a?.kind===Lt.NULL?null:a}if(i===null)return{kind:Lt.NULL};if(i===void 0)return null;if(vp(n)){const a=n.ofType;if(Vk(i)){const h=[];for(const f of i){const g=z_(f,a);g!=null&&h.push(g)}return{kind:Lt.LIST,values:h}}return z_(i,a)}if(jd(n)){if(!Hd(i))return null;const a=[];for(const h of Object.values(n.getFields())){const f=z_(i[h.name],h.type);f&&a.push({kind:Lt.OBJECT_FIELD,name:{kind:Lt.NAME,value:h.name},value:f})}return{kind:Lt.OBJECT,fields:a}}if(YA(n)){const a=n.serialize(i);if(a==null)return null;if(typeof a=="boolean")return{kind:Lt.BOOLEAN,value:a};if(typeof a=="number"&&Number.isFinite(a)){const h=String(a);return gS.test(h)?{kind:Lt.INT,value:h}:{kind:Lt.FLOAT,value:h}}if(typeof a=="string")return pp(n)?{kind:Lt.ENUM,value:a}:n===aM&&gS.test(a)?{kind:Lt.INT,value:a}:{kind:Lt.STRING,value:a};throw new TypeError(`Cannot convert value to AST: ${An(a)}.`)}$x(!1,"Unexpected input type: "+An(n))}const gS=/^-?(?:0|[1-9][0-9]*)$/,b2=new bp({name:"__Schema",description:"A GraphQL Schema defines the capabilities of a GraphQL server. It exposes all available types and directives on the server, as well as the entry points for query, mutation, and subscription operations.",fields:()=>({description:{type:oa,resolve:i=>i.description},types:{description:"A list of all types supported by this server.",type:new ai(new gc(new ai(vh))),resolve(i){return Object.values(i.getTypeMap())}},queryType:{description:"The type that query operations will be rooted at.",type:new ai(vh),resolve:i=>i.getQueryType()},mutationType:{description:"If this server supports mutation, the type that mutation operations will be rooted at.",type:vh,resolve:i=>i.getMutationType()},subscriptionType:{description:"If this server support subscription, the type that subscription operations will be rooted at.",type:vh,resolve:i=>i.getSubscriptionType()},directives:{description:"A list of all directives supported by this server.",type:new ai(new gc(new ai(sM))),resolve:i=>i.getDirectives()}})}),sM=new bp({name:"__Directive",description:`A Directive provides a way to describe alternate runtime execution and type validation behavior in a GraphQL document.

In some cases, you need to provide options to alter GraphQL's execution behavior in ways field arguments will not suffice, such as conditionally including or skipping a field. Directives provide this by describing additional information to the executor.`,fields:()=>({name:{type:new ai(oa),resolve:i=>i.name},description:{type:oa,resolve:i=>i.description},isRepeatable:{type:new ai(Nl),resolve:i=>i.isRepeatable},locations:{type:new ai(new gc(new ai(oM))),resolve:i=>i.locations},args:{type:new ai(new gc(new ai(Wx))),args:{includeDeprecated:{type:Nl,defaultValue:!1}},resolve(i,{includeDeprecated:n}){return n?i.args:i.args.filter(a=>a.deprecationReason==null)}}})}),oM=new Hx({name:"__DirectiveLocation",description:"A Directive can be adjacent to many parts of the GraphQL language, a __DirectiveLocation describes one such possible adjacencies.",values:{QUERY:{value:di.QUERY,description:"Location adjacent to a query operation."},MUTATION:{value:di.MUTATION,description:"Location adjacent to a mutation operation."},SUBSCRIPTION:{value:di.SUBSCRIPTION,description:"Location adjacent to a subscription operation."},FIELD:{value:di.FIELD,description:"Location adjacent to a field."},FRAGMENT_DEFINITION:{value:di.FRAGMENT_DEFINITION,description:"Location adjacent to a fragment definition."},FRAGMENT_SPREAD:{value:di.FRAGMENT_SPREAD,description:"Location adjacent to a fragment spread."},INLINE_FRAGMENT:{value:di.INLINE_FRAGMENT,description:"Location adjacent to an inline fragment."},VARIABLE_DEFINITION:{value:di.VARIABLE_DEFINITION,description:"Location adjacent to a variable definition."},SCHEMA:{value:di.SCHEMA,description:"Location adjacent to a schema definition."},SCALAR:{value:di.SCALAR,description:"Location adjacent to a scalar definition."},OBJECT:{value:di.OBJECT,description:"Location adjacent to an object type definition."},FIELD_DEFINITION:{value:di.FIELD_DEFINITION,description:"Location adjacent to a field definition."},ARGUMENT_DEFINITION:{value:di.ARGUMENT_DEFINITION,description:"Location adjacent to an argument definition."},INTERFACE:{value:di.INTERFACE,description:"Location adjacent to an interface definition."},UNION:{value:di.UNION,description:"Location adjacent to a union definition."},ENUM:{value:di.ENUM,description:"Location adjacent to an enum definition."},ENUM_VALUE:{value:di.ENUM_VALUE,description:"Location adjacent to an enum value definition."},INPUT_OBJECT:{value:di.INPUT_OBJECT,description:"Location adjacent to an input object type definition."},INPUT_FIELD_DEFINITION:{value:di.INPUT_FIELD_DEFINITION,description:"Location adjacent to an input object field definition."}}}),vh=new bp({name:"__Type",description:"The fundamental unit of any GraphQL Schema is the type. There are many kinds of types in GraphQL as represented by the `__TypeKind` enum.\n\nDepending on the kind of a type, certain fields describe information about that type. Scalar types provide no information beyond a name, description and optional `specifiedByURL`, while Enum types provide their values. Object and Interface types provide the fields they describe. Abstract types, Union and Interface, provide the Object types possible at runtime. List and NonNull types compose other types.",fields:()=>({kind:{type:new ai(uM),resolve(i){if(l0(i))return or.SCALAR;if(hp(i))return or.OBJECT;if(bu(i))return or.INTERFACE;if($m(i))return or.UNION;if(pp(i))return or.ENUM;if(jd(i))return or.INPUT_OBJECT;if(vp(i))return or.LIST;if(Bd(i))return or.NON_NULL;$x(!1,`Unexpected type: "${An(i)}".`)}},name:{type:oa,resolve:i=>"name"in i?i.name:void 0},description:{type:oa,resolve:i=>"description"in i?i.description:void 0},specifiedByURL:{type:oa,resolve:i=>"specifiedByURL"in i?i.specifiedByURL:void 0},fields:{type:new gc(new ai(lM)),args:{includeDeprecated:{type:Nl,defaultValue:!1}},resolve(i,{includeDeprecated:n}){if(hp(i)||bu(i)){const a=Object.values(i.getFields());return n?a:a.filter(h=>h.deprecationReason==null)}}},interfaces:{type:new gc(new ai(vh)),resolve(i){if(hp(i)||bu(i))return i.getInterfaces()}},possibleTypes:{type:new gc(new ai(vh)),resolve(i,n,a,{schema:h}){if(Ek(i))return h.getPossibleTypes(i)}},enumValues:{type:new gc(new ai(cM)),args:{includeDeprecated:{type:Nl,defaultValue:!1}},resolve(i,{includeDeprecated:n}){if(pp(i)){const a=i.getValues();return n?a:a.filter(h=>h.deprecationReason==null)}}},inputFields:{type:new gc(new ai(Wx)),args:{includeDeprecated:{type:Nl,defaultValue:!1}},resolve(i,{includeDeprecated:n}){if(jd(i)){const a=Object.values(i.getFields());return n?a:a.filter(h=>h.deprecationReason==null)}}},ofType:{type:vh,resolve:i=>"ofType"in i?i.ofType:void 0},isOneOf:{type:Nl,resolve:i=>{if(jd(i))return i.isOneOf}}})}),lM=new bp({name:"__Field",description:"Object and Interface types are described by a list of Fields, each of which has a name, potentially a list of arguments, and a return type.",fields:()=>({name:{type:new ai(oa),resolve:i=>i.name},description:{type:oa,resolve:i=>i.description},args:{type:new ai(new gc(new ai(Wx))),args:{includeDeprecated:{type:Nl,defaultValue:!1}},resolve(i,{includeDeprecated:n}){return n?i.args:i.args.filter(a=>a.deprecationReason==null)}},type:{type:new ai(vh),resolve:i=>i.type},isDeprecated:{type:new ai(Nl),resolve:i=>i.deprecationReason!=null},deprecationReason:{type:oa,resolve:i=>i.deprecationReason}})}),Wx=new bp({name:"__InputValue",description:"Arguments provided to Fields or Directives and the input fields of an InputObject are represented as Input Values which describe their type and optionally a default value.",fields:()=>({name:{type:new ai(oa),resolve:i=>i.name},description:{type:oa,resolve:i=>i.description},type:{type:new ai(vh),resolve:i=>i.type},defaultValue:{type:oa,description:"A GraphQL-formatted string representing the default value for this input value.",resolve(i){const{type:n,defaultValue:a}=i,h=z_(a,n);return h?bo(h):null}},isDeprecated:{type:new ai(Nl),resolve:i=>i.deprecationReason!=null},deprecationReason:{type:oa,resolve:i=>i.deprecationReason}})}),cM=new bp({name:"__EnumValue",description:"One possible value for a given Enum. Enum values are unique values, not a placeholder for a string or numeric value. However an Enum value is returned in a JSON response as a string.",fields:()=>({name:{type:new ai(oa),resolve:i=>i.name},description:{type:oa,resolve:i=>i.description},isDeprecated:{type:new ai(Nl),resolve:i=>i.deprecationReason!=null},deprecationReason:{type:oa,resolve:i=>i.deprecationReason}})});var or;(function(i){i.SCALAR="SCALAR",i.OBJECT="OBJECT",i.INTERFACE="INTERFACE",i.UNION="UNION",i.ENUM="ENUM",i.INPUT_OBJECT="INPUT_OBJECT",i.LIST="LIST",i.NON_NULL="NON_NULL"})(or||(or={}));const uM=new Hx({name:"__TypeKind",description:"An enum describing what kind of type a given `__Type` is.",values:{SCALAR:{value:or.SCALAR,description:"Indicates this type is a scalar."},OBJECT:{value:or.OBJECT,description:"Indicates this type is an object. `fields` and `interfaces` are valid fields."},INTERFACE:{value:or.INTERFACE,description:"Indicates this type is an interface. `fields`, `interfaces`, and `possibleTypes` are valid fields."},UNION:{value:or.UNION,description:"Indicates this type is a union. `possibleTypes` is a valid field."},ENUM:{value:or.ENUM,description:"Indicates this type is an enum. `enumValues` is a valid field."},INPUT_OBJECT:{value:or.INPUT_OBJECT,description:"Indicates this type is an input object. `inputFields` is a valid field."},LIST:{value:or.LIST,description:"Indicates this type is a list. `ofType` is a valid field."},NON_NULL:{value:or.NON_NULL,description:"Indicates this type is a non-null. `ofType` is a valid field."}}});new ai(b2);new ai(oa);new ai(oa);const Uk=Object.freeze([b2,sM,oM,vh,lM,Wx,cM,uM]);class Gk{constructor(n){var a,h;this.__validationErrors=n.assumeValid===!0?[]:void 0,Hd(n)||Ii(!1,"Must provide configuration object."),!n.types||Array.isArray(n.types)||Ii(!1,`"types" must be Array if provided but got: ${An(n.types)}.`),!n.directives||Array.isArray(n.directives)||Ii(!1,`"directives" must be Array if provided but got: ${An(n.directives)}.`),this.description=n.description,this.extensions=Ec(n.extensions),this.astNode=n.astNode,this.extensionASTNodes=(a=n.extensionASTNodes)!==null&&a!==void 0?a:[],this._queryType=n.query,this._mutationType=n.mutation,this._subscriptionType=n.subscription,this._directives=(h=n.directives)!==null&&h!==void 0?h:Bk;const f=new Set(n.types);if(n.types!=null)for(const g of n.types)f.delete(g),_u(g,f);this._queryType!=null&&_u(this._queryType,f),this._mutationType!=null&&_u(this._mutationType,f),this._subscriptionType!=null&&_u(this._subscriptionType,f);for(const g of this._directives)if(Ok(g))for(const _ of g.args)_u(_.type,f);_u(b2,f),this._typeMap=Object.create(null),this._subTypeMap=Object.create(null),this._implementationsMap=Object.create(null);for(const g of f){if(g==null)continue;const _=g.name;if(_||Ii(!1,"One of the provided types for building the Schema is missing a name."),this._typeMap[_]!==void 0)throw new Error(`Schema must contain uniquely named types but contains multiple types named "${_}".`);if(this._typeMap[_]=g,bu(g)){for(const c of g.getInterfaces())if(bu(c)){let A=this._implementationsMap[c.name];A===void 0&&(A=this._implementationsMap[c.name]={objects:[],interfaces:[]}),A.interfaces.push(g)}}else if(hp(g)){for(const c of g.getInterfaces())if(bu(c)){let A=this._implementationsMap[c.name];A===void 0&&(A=this._implementationsMap[c.name]={objects:[],interfaces:[]}),A.objects.push(g)}}}}get[Symbol.toStringTag](){return"GraphQLSchema"}getQueryType(){return this._queryType}getMutationType(){return this._mutationType}getSubscriptionType(){return this._subscriptionType}getRootType(n){switch(n){case Nd.QUERY:return this.getQueryType();case Nd.MUTATION:return this.getMutationType();case Nd.SUBSCRIPTION:return this.getSubscriptionType()}}getTypeMap(){return this._typeMap}getType(n){return this.getTypeMap()[n]}getPossibleTypes(n){return $m(n)?n.getTypes():this.getImplementations(n).objects}getImplementations(n){const a=this._implementationsMap[n.name];return a??{objects:[],interfaces:[]}}isSubType(n,a){let h=this._subTypeMap[n.name];if(h===void 0){if(h=Object.create(null),$m(n))for(const f of n.getTypes())h[f.name]=!0;else{const f=this.getImplementations(n);for(const g of f.objects)h[g.name]=!0;for(const g of f.interfaces)h[g.name]=!0}this._subTypeMap[n.name]=h}return h[a.name]!==void 0}getDirectives(){return this._directives}getDirective(n){return this.getDirectives().find(a=>a.name===n)}toConfig(){return{description:this.description,query:this.getQueryType(),mutation:this.getMutationType(),subscription:this.getSubscriptionType(),types:Object.values(this.getTypeMap()),directives:this.getDirectives(),extensions:this.extensions,astNode:this.astNode,extensionASTNodes:this.extensionASTNodes,assumeValid:this.__validationErrors!==void 0}}}function _u(i,n){const a=Mk(i);if(!n.has(a)){if(n.add(a),$m(a))for(const h of a.getTypes())_u(h,n);else if(hp(a)||bu(a)){for(const h of a.getInterfaces())_u(h,n);for(const h of Object.values(a.getFields())){_u(h.type,n);for(const f of h.args)_u(f.type,n)}}else if(jd(a))for(const h of Object.values(a.getFields()))_u(h.type,n)}return n}function F_(i,n,a){if(i){if(i.kind===Lt.VARIABLE){i.name.value;return}if(Bd(n))return i.kind===Lt.NULL?void 0:F_(i,n.ofType,a);if(i.kind===Lt.NULL)return null;if(vp(n)){const h=n.ofType;if(i.kind===Lt.LIST){const g=[];for(const _ of i.values)if(yS(_,a)){if(Bd(h))return;g.push(null)}else{const c=F_(_,h,a);if(c===void 0)return;g.push(c)}return g}const f=F_(i,h,a);return f===void 0?void 0:[f]}if(jd(n)){if(i.kind!==Lt.OBJECT)return;const h=Object.create(null),f=GA(i.fields,g=>g.name.value);for(const g of Object.values(n.getFields())){const _=f[g.name];if(!_||yS(_.value,a)){if(g.defaultValue!==void 0)h[g.name]=g.defaultValue;else if(Bd(g.type))return;continue}const c=F_(_.value,g.type,a);if(c===void 0)return;h[g.name]=c}if(n.isOneOf){const g=Object.keys(h);if(g.length!==1||h[g[0]]===null)return}return h}if(YA(n)){let h;try{h=n.parseLiteral(i,a)}catch{return}return h===void 0?void 0:h}$x(!1,"Unexpected input type: "+An(n))}}function yS(i,n){return i.kind===Lt.VARIABLE&&n==null}function $k(i){const n={descriptions:!0,specifiedByUrl:!1,directiveIsRepeatable:!1,schemaDescription:!1,inputValueDeprecation:!1,oneOf:!1,...i},a=n.descriptions?"description":"",h=n.specifiedByUrl?"specifiedByURL":"",f=n.directiveIsRepeatable?"isRepeatable":"",g=n.schemaDescription?a:"";function _(A){return n.inputValueDeprecation?A:""}const c=n.oneOf?"isOneOf":"";return`
    query IntrospectionQuery {
      __schema {
        ${g}
        queryType { name kind }
        mutationType { name kind }
        subscriptionType { name kind }
        types {
          ...FullType
        }
        directives {
          name
          ${a}
          ${f}
          locations
          args${_("(includeDeprecated: true)")} {
            ...InputValue
          }
        }
      }
    }

    fragment FullType on __Type {
      kind
      name
      ${a}
      ${h}
      ${c}
      fields(includeDeprecated: true) {
        name
        ${a}
        args${_("(includeDeprecated: true)")} {
          ...InputValue
        }
        type {
          ...TypeRef
        }
        isDeprecated
        deprecationReason
      }
      inputFields${_("(includeDeprecated: true)")} {
        ...InputValue
      }
      interfaces {
        ...TypeRef
      }
      enumValues(includeDeprecated: true) {
        name
        ${a}
        isDeprecated
        deprecationReason
      }
      possibleTypes {
        ...TypeRef
      }
    }

    fragment InputValue on __InputValue {
      name
      ${a}
      type { ...TypeRef }
      defaultValue
      ${_("isDeprecated")}
      ${_("deprecationReason")}
    }

    fragment TypeRef on __Type {
      kind
      name
      ofType {
        kind
        name
        ofType {
          kind
          name
          ofType {
            kind
            name
            ofType {
              kind
              name
              ofType {
                kind
                name
                ofType {
                  kind
                  name
                  ofType {
                    kind
                    name
                    ofType {
                      kind
                      name
                      ofType {
                        kind
                        name
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  `}function Zk(i,n){Hd(i)&&Hd(i.__schema)||Ii(!1,`Invalid or incomplete introspection result. Ensure that you are passing "data" property of introspection response and no "errors" was returned alongside: ${An(i)}.`);const a=i.__schema,h=zm(a.types,Te=>Te.name,Te=>V(Te));for(const Te of[...kk,...Uk])h[Te.name]&&(h[Te.name]=Te);const f=a.queryType?O(a.queryType):null,g=a.mutationType?O(a.mutationType):null,_=a.subscriptionType?O(a.subscriptionType):null,c=a.directives?a.directives.map(at):[];return new Gk({description:a.description,query:f,mutation:g,subscription:_,types:Object.values(h),directives:c,assumeValid:void 0});function A(Te){if(Te.kind===or.LIST){const it=Te.ofType;if(!it)throw new Error("Decorated type deeper than introspection query.");return new gc(A(it))}if(Te.kind===or.NON_NULL){const it=Te.ofType;if(!it)throw new Error("Decorated type deeper than introspection query.");const Dt=A(it);return new ai(Ak(Dt))}return D(Te)}function D(Te){const it=Te.name;if(!it)throw new Error(`Unknown type reference: ${An(Te)}.`);const Dt=h[it];if(!Dt)throw new Error(`Invalid or incomplete schema, unknown type: ${it}. Ensure that a full introspection query is used in order to build a client schema.`);return Dt}function O(Te){return Tk(D(Te))}function z(Te){return Sk(D(Te))}function V(Te){if(Te!=null&&Te.name!=null&&Te.kind!=null)switch(Te.kind){case or.SCALAR:return Y(Te);case or.OBJECT:return ie(Te);case or.INTERFACE:return q(Te);case or.UNION:return fe(Te);case or.ENUM:return Ee(Te);case or.INPUT_OBJECT:return we(Te)}const it=An(Te);throw new Error(`Invalid or incomplete introspection result. Ensure that a full introspection query is used in order to build a client schema: ${it}.`)}function Y(Te){return new ng({name:Te.name,description:Te.description,specifiedByURL:Te.specifiedByURL})}function ee(Te){if(Te.interfaces===null&&Te.kind===or.INTERFACE)return[];if(!Te.interfaces){const it=An(Te);throw new Error(`Introspection result missing interfaces: ${it}.`)}return Te.interfaces.map(z)}function ie(Te){return new bp({name:Te.name,description:Te.description,interfaces:()=>ee(Te),fields:()=>ze(Te)})}function q(Te){return new nM({name:Te.name,description:Te.description,interfaces:()=>ee(Te),fields:()=>ze(Te)})}function fe(Te){if(!Te.possibleTypes){const it=An(Te);throw new Error(`Introspection result missing possibleTypes: ${it}.`)}return new iM({name:Te.name,description:Te.description,types:()=>Te.possibleTypes.map(O)})}function Ee(Te){if(!Te.enumValues){const it=An(Te);throw new Error(`Introspection result missing enumValues: ${it}.`)}return new Hx({name:Te.name,description:Te.description,values:zm(Te.enumValues,it=>it.name,it=>({description:it.description,deprecationReason:it.deprecationReason}))})}function we(Te){if(!Te.inputFields){const it=An(Te);throw new Error(`Introspection result missing inputFields: ${it}.`)}return new rM({name:Te.name,description:Te.description,fields:()=>Re(Te.inputFields),isOneOf:Te.isOneOf})}function ze(Te){if(!Te.fields)throw new Error(`Introspection result missing fields: ${An(Te)}.`);return zm(Te.fields,it=>it.name,Ce)}function Ce(Te){const it=A(Te.type);if(!qA(it)){const Dt=An(it);throw new Error(`Introspection must provide output type for fields, but received: ${Dt}.`)}if(!Te.args){const Dt=An(Te);throw new Error(`Introspection result missing field args: ${Dt}.`)}return{description:Te.description,deprecationReason:Te.deprecationReason,type:it,args:Re(Te.args)}}function Re(Te){return zm(Te,it=>it.name,Ne)}function Ne(Te){const it=A(Te.type);if(!ZA(it)){const Mt=An(it);throw new Error(`Introspection must provide input type for arguments, but received: ${Mt}.`)}const Dt=Te.defaultValue!=null?F_(ok(Te.defaultValue),it):void 0;return{description:Te.description,type:it,defaultValue:Dt,deprecationReason:Te.deprecationReason}}function at(Te){if(!Te.args){const it=An(Te);throw new Error(`Introspection result missing directive args: ${it}.`)}if(!Te.locations){const it=An(Te);throw new Error(`Introspection result missing directive locations: ${it}.`)}return new ig({name:Te.name,description:Te.description,isRepeatable:Te.isRepeatable,locations:Te.locations.slice(),args:Re(Te.args)})}}const _S="Accept",Cw="Content-Type",Dw="application/json",hM="application/graphql-response+json",vS=i=>i.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),qk=i=>{const n=i.toLowerCase();return n.includes(hM)||n.includes(Dw)},bS=i=>{try{if(Array.isArray(i))return{_tag:"Batch",executionResults:i.map(xS)};if(ox(i))return{_tag:"Single",executionResult:xS(i)};throw new Error(`Invalid execution result: result is not object or array. 
Got:
${String(i)}`)}catch(n){return n}},xS=i=>{if(typeof i!="object"||i===null)throw new Error("Invalid execution result: result is not object");let n,a,h;if("errors"in i){if(!ox(i.errors)&&!Array.isArray(i.errors))throw new Error("Invalid execution result: errors is not plain object OR array");n=i.errors}if("data"in i){if(!ox(i.data)&&i.data!==null)throw new Error("Invalid execution result: data is not plain object");a=i.data}if("extensions"in i){if(!ox(i.extensions))throw new Error("Invalid execution result: extensions is not plain object");h=i.extensions}return{data:a,errors:n,extensions:h}},Yk=i=>i._tag==="Batch"?i.executionResults.some(wS):wS(i.executionResult),wS=i=>Array.isArray(i.errors)?i.errors.length>0:!!i.errors,dM=i=>typeof i=="object"&&i!==null&&"kind"in i&&i.kind===Lt.OPERATION_DEFINITION,Hk=i=>{let n;const a=i.definitions.filter(dM);return a.length===1&&(n=a[0].name?.value),n},Wk=i=>{let n=!1;const a=i.definitions.filter(dM);return a.length===1&&(n=a[0].operation==="mutation"),n},W1=(i,n)=>{const a=typeof i=="string"||"kind"in i?i:String(i),h=typeof a=="string"?a:bo(a);let f=!1,g;if(n)return{expression:h,isMutation:f,operationName:g};const _=IR(()=>typeof a=="string"?BA(a):a);return _ instanceof Error?{expression:h,isMutation:f,operationName:g}:(g=Hk(_),f=Wk(_),{expression:h,operationName:g,isMutation:f})},x2=JSON,X1=async i=>{const n={...i,method:i.request._tag==="Single"?i.request.document.isMutation?"POST":oS(i.method??"post"):i.request.hasMutations?"POST":oS(i.method??"post"),fetchOptions:{...i.fetchOptions,errorPolicy:i.fetchOptions.errorPolicy??"none"}},h=await Qk(n.method)(n),f=await h.text();let g;try{g=Xk(f,h.headers.get(Cw),i.fetchOptions.jsonSerializer??x2)}catch(c){g=c}const _={status:h.status,headers:h.headers,body:f};if(!h.ok){if(g instanceof Error)return new jm({..._},{query:i.request._tag==="Single"?i.request.document.expression:i.request.query,variables:i.request.variables});const c=g._tag==="Batch"?{...g.executionResults,..._}:{...g.executionResult,..._};return new jm(c,{query:i.request._tag==="Single"?i.request.document.expression:i.request.query,variables:i.request.variables})}if(g instanceof Error)throw g;if(Yk(g)&&n.fetchOptions.errorPolicy==="none"){const c=g._tag==="Batch"?{...g.executionResults,..._}:{...g.executionResult,..._};return new jm(c,{query:i.request._tag==="Single"?i.request.document.expression:i.request.query,variables:i.request.variables})}switch(g._tag){case"Single":return{..._,...TS(n)(g.executionResult)};case"Batch":return{..._,data:g.executionResults.map(TS(n))};default:g2(g)}},TS=i=>n=>({extensions:n.extensions,data:n.data,errors:i.fetchOptions.errorPolicy==="all"?n.errors:void 0}),Xk=(i,n,a)=>n&&qk(n)?bS(a.parse(i)):bS(i),Qk=i=>async n=>{const a=new Headers(n.headers);let h=null,f;a.has(_S)||a.set(_S,[hM,Dw].join(", ")),i==="POST"?(f=(n.fetchOptions.jsonSerializer??x2).stringify(Kk(n)),typeof f=="string"&&!a.has(Cw)&&a.set(Cw,Dw)):h=Jk(n);const g={method:i,headers:a,body:f,...n.fetchOptions};let _=new URL(n.url),c=g;if(n.middleware){const D=await Promise.resolve(n.middleware({...g,url:n.url,operationName:n.request._tag==="Single"?n.request.document.operationName:void 0,variables:n.request.variables})),{url:O,...z}=D;_=new URL(O),c=z}return h&&h.forEach((D,O)=>{_.searchParams.append(O,D)}),await(n.fetch??fetch)(_,c)},Kk=i=>{switch(i.request._tag){case"Single":return{query:i.request.document.expression,variables:i.request.variables,operationName:i.request.document.operationName};case"Batch":return IA(i.request.query,i.request.variables??[]).map(([n,a])=>({query:n,variables:a}));default:throw g2(i.request)}},Jk=i=>{const n=i.fetchOptions.jsonSerializer??x2,a=new URLSearchParams;switch(i.request._tag){case"Single":return a.append("query",vS(i.request.document.expression)),i.request.variables&&a.append("variables",n.stringify(i.request.variables)),i.request.document.operationName&&a.append("operationName",i.request.document.operationName),a;case"Batch":{const h=i.request.variables?.map(_=>n.stringify(_))??[],f=i.request.query.map(vS),g=IA(f,h).map(([_,c])=>({query:_,variables:c}));return a.append("query",n.stringify(g)),a}default:throw g2(i.request)}};class eO{url;requestConfig;constructor(n,a={}){this.url=n,this.requestConfig=a}rawRequest=async(...n)=>{const[a,h,f]=n,g=OR(a,h,f),{headers:_,fetch:c=globalThis.fetch,method:A="POST",requestMiddleware:D,responseMiddleware:O,excludeOperationName:z,...V}=this.requestConfig,{url:Y}=this;g.signal!==void 0&&(V.signal=g.signal);const ee=W1(g.query,z),ie=await X1({url:Y,request:{_tag:"Single",document:ee,variables:g.variables},headers:{...Cy($1(_)),...Cy(g.requestHeaders)},fetch:c,method:A,fetchOptions:V,middleware:D});if(O&&await O(ie,{operationName:ee.operationName,variables:h,url:this.url}),ie instanceof Error)throw ie;return ie};async request(n,...a){const[h,f]=a,g=tO(n,h,f),{headers:_,fetch:c=globalThis.fetch,method:A="POST",requestMiddleware:D,responseMiddleware:O,excludeOperationName:z,...V}=this.requestConfig,{url:Y}=this;g.signal!==void 0&&(V.signal=g.signal);const ee=W1(g.document,z),ie=await X1({url:Y,request:{_tag:"Single",document:ee,variables:g.variables},headers:{...Cy($1(_)),...Cy(g.requestHeaders)},fetch:c,method:A,fetchOptions:V,middleware:D});if(O&&await O(ie,{operationName:ee.operationName,variables:g.variables,url:this.url}),ie instanceof Error)throw ie;return ie.data}async batchRequests(n,a){const h=kR(n,a),{headers:f,excludeOperationName:g,..._}=this.requestConfig;h.signal!==void 0&&(_.signal=h.signal);const c=h.documents.map(({document:V})=>W1(V,g)),A=c.map(({expression:V})=>V),D=c.some(({isMutation:V})=>V),O=h.documents.map(({variables:V})=>V),z=await X1({url:this.url,request:{_tag:"Batch",operationName:void 0,query:A,hasMutations:D,variables:O},headers:{...Cy($1(f)),...Cy(h.requestHeaders)},fetch:this.requestConfig.fetch??globalThis.fetch,method:this.requestConfig.method||"POST",fetchOptions:_,middleware:this.requestConfig.requestMiddleware});if(this.requestConfig.responseMiddleware&&await this.requestConfig.responseMiddleware(z,{operationName:void 0,variables:O,url:this.url}),z instanceof Error)throw z;return z.data}setHeaders(n){return this.requestConfig.headers=n,this}setHeader(n,a){const{headers:h}=this.requestConfig;return h?h[n]=a:this.requestConfig.headers={[n]:a},this}setEndpoint(n){return this.url=n,this}}async function w2(i,n,...a){const h=nO(i,n,...a);return new eO(h.url).request({...h})}const tO=(i,n,a)=>i.document?i:{document:i,variables:n,requestHeaders:a,signal:void 0},nO=(i,n,...a)=>{const[h,f]=a;return typeof i=="string"?{url:i,document:n,variables:h,requestHeaders:f,signal:void 0}:i},Q1="/otp/transmodel/v3",Xx=()=>{try{return new URL(Q1),Q1}catch{return`${window.location.origin}${Q1}`}};var fM=(i=>(i.LimitToNumOfItineraries="limitToNumOfItineraries",i.LimitToSearchWindow="limitToSearchWindow",i.ListAll="listAll",i.Off="off",i))(fM||{}),Ci=(i=>(i.Air="air",i.Bicycle="bicycle",i.Bus="bus",i.Cableway="cableway",i.Car="car",i.Carpool="carpool",i.Coach="coach",i.Foot="foot",i.Funicular="funicular",i.Lift="lift",i.Metro="metro",i.Monorail="monorail",i.Rail="rail",i.Scooter="scooter",i.SnowAndIce="snowAndIce",i.Taxi="taxi",i.Tram="tram",i.Trolleybus="trolleybus",i.Water="water",i))(Ci||{}),Zy=(i=>(i.Bicycle="bicycle",i.BikePark="bike_park",i.BikeRental="bike_rental",i.Car="car",i.CarPark="car_park",i.CarPickup="car_pickup",i.CarRental="car_rental",i.Carpool="carpool",i.Flexible="flexible",i.Foot="foot",i.ScooterRental="scooter_rental",i))(Zy||{}),pM=(i=>(i.Air="air",i.Bus="bus",i.Cableway="cableway",i.Coach="coach",i.Funicular="funicular",i.Lift="lift",i.Metro="metro",i.Monorail="monorail",i.Rail="rail",i.Taxi="taxi",i.Tram="tram",i.Trolleybus="trolleybus",i.Unknown="unknown",i.Water="water",i))(pM||{});const iO={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"quayCoordinate"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"quay"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"latitude"}},{kind:"Field",name:{kind:"Name",value:"longitude"}}]}}]}}]},rO={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"serverInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"serverInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"version"}},{kind:"Field",name:{kind:"Name",value:"otpSerializationVersionId"}},{kind:"Field",name:{kind:"Name",value:"buildConfigVersion"}},{kind:"Field",name:{kind:"Name",value:"routerConfigVersion"}},{kind:"Field",name:{kind:"Name",value:"gitCommit"}},{kind:"Field",name:{kind:"Name",value:"gitBranch"}},{kind:"Field",name:{kind:"Name",value:"internalTransitModelTimeZone"}}]}}]}}]},aO={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"authority"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authority"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},sO={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"line"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"line"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"publicCode"}}]}}]}}]},oO={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"quay"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"quay"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stopPlace"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]},lO={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"trip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"accessEgressPenalty"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PenaltyForStreetMode"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alightSlackDefault"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alightSlackList"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"TransportModeSlack"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"arriveBy"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"banned"}},type:{kind:"NamedType",name:{kind:"Name",value:"InputBanned"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bikePreferences"}},type:{kind:"NamedType",name:{kind:"Name",value:"BikePreferencesInput"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"boardSlackDefault"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"boardSlackList"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"TransportModeSlack"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bookingTime"}},type:{kind:"NamedType",name:{kind:"Name",value:"DateTime"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"dateTime"}},type:{kind:"NamedType",name:{kind:"Name",value:"DateTime"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TripFilterInput"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"from"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Location"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ignoreRealtimeUpdates"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includePlannedCancellations"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeRealtimeCancellations"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"itineraryFilters"}},type:{kind:"NamedType",name:{kind:"Name",value:"ItineraryFilters"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locale"}},type:{kind:"NamedType",name:{kind:"Name",value:"Locale"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maxAccessEgressDurationForMode"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"StreetModeDurationInput"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maxDirectDurationForMode"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"StreetModeDurationInput"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maximumAdditionalTransfers"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"maximumTransfers"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"modes"}},type:{kind:"NamedType",name:{kind:"Name",value:"Modes"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numTripPatterns"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"relaxTransitGroupPriority"}},type:{kind:"NamedType",name:{kind:"Name",value:"RelaxCostInput"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"scooterPreferences"}},type:{kind:"NamedType",name:{kind:"Name",value:"ScooterPreferencesInput"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"searchWindow"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"timetableView"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"to"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Location"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"transferPenalty"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"transferSlack"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"useBikeRentalAvailabilityInformation"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"via"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TripViaLocationInput"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"waitReluctance"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"walkReluctance"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"walkSpeed"}},type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"wheelchairAccessible"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"whiteListed"}},type:{kind:"NamedType",name:{kind:"Name",value:"InputWhiteListed"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"accessEgressPenalty"},value:{kind:"Variable",name:{kind:"Name",value:"accessEgressPenalty"}}},{kind:"Argument",name:{kind:"Name",value:"alightSlackDefault"},value:{kind:"Variable",name:{kind:"Name",value:"alightSlackDefault"}}},{kind:"Argument",name:{kind:"Name",value:"alightSlackList"},value:{kind:"Variable",name:{kind:"Name",value:"alightSlackList"}}},{kind:"Argument",name:{kind:"Name",value:"arriveBy"},value:{kind:"Variable",name:{kind:"Name",value:"arriveBy"}}},{kind:"Argument",name:{kind:"Name",value:"banned"},value:{kind:"Variable",name:{kind:"Name",value:"banned"}}},{kind:"Argument",name:{kind:"Name",value:"bikePreferences"},value:{kind:"Variable",name:{kind:"Name",value:"bikePreferences"}}},{kind:"Argument",name:{kind:"Name",value:"boardSlackDefault"},value:{kind:"Variable",name:{kind:"Name",value:"boardSlackDefault"}}},{kind:"Argument",name:{kind:"Name",value:"boardSlackList"},value:{kind:"Variable",name:{kind:"Name",value:"boardSlackList"}}},{kind:"Argument",name:{kind:"Name",value:"bookingTime"},value:{kind:"Variable",name:{kind:"Name",value:"bookingTime"}}},{kind:"Argument",name:{kind:"Name",value:"dateTime"},value:{kind:"Variable",name:{kind:"Name",value:"dateTime"}}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}},{kind:"Argument",name:{kind:"Name",value:"from"},value:{kind:"Variable",name:{kind:"Name",value:"from"}}},{kind:"Argument",name:{kind:"Name",value:"ignoreRealtimeUpdates"},value:{kind:"Variable",name:{kind:"Name",value:"ignoreRealtimeUpdates"}}},{kind:"Argument",name:{kind:"Name",value:"includePlannedCancellations"},value:{kind:"Variable",name:{kind:"Name",value:"includePlannedCancellations"}}},{kind:"Argument",name:{kind:"Name",value:"includeRealtimeCancellations"},value:{kind:"Variable",name:{kind:"Name",value:"includeRealtimeCancellations"}}},{kind:"Argument",name:{kind:"Name",value:"itineraryFilters"},value:{kind:"Variable",name:{kind:"Name",value:"itineraryFilters"}}},{kind:"Argument",name:{kind:"Name",value:"locale"},value:{kind:"Variable",name:{kind:"Name",value:"locale"}}},{kind:"Argument",name:{kind:"Name",value:"maxAccessEgressDurationForMode"},value:{kind:"Variable",name:{kind:"Name",value:"maxAccessEgressDurationForMode"}}},{kind:"Argument",name:{kind:"Name",value:"maxDirectDurationForMode"},value:{kind:"Variable",name:{kind:"Name",value:"maxDirectDurationForMode"}}},{kind:"Argument",name:{kind:"Name",value:"maximumAdditionalTransfers"},value:{kind:"Variable",name:{kind:"Name",value:"maximumAdditionalTransfers"}}},{kind:"Argument",name:{kind:"Name",value:"maximumTransfers"},value:{kind:"Variable",name:{kind:"Name",value:"maximumTransfers"}}},{kind:"Argument",name:{kind:"Name",value:"modes"},value:{kind:"Variable",name:{kind:"Name",value:"modes"}}},{kind:"Argument",name:{kind:"Name",value:"numTripPatterns"},value:{kind:"Variable",name:{kind:"Name",value:"numTripPatterns"}}},{kind:"Argument",name:{kind:"Name",value:"pageCursor"},value:{kind:"Variable",name:{kind:"Name",value:"pageCursor"}}},{kind:"Argument",name:{kind:"Name",value:"relaxTransitGroupPriority"},value:{kind:"Variable",name:{kind:"Name",value:"relaxTransitGroupPriority"}}},{kind:"Argument",name:{kind:"Name",value:"scooterPreferences"},value:{kind:"Variable",name:{kind:"Name",value:"scooterPreferences"}}},{kind:"Argument",name:{kind:"Name",value:"searchWindow"},value:{kind:"Variable",name:{kind:"Name",value:"searchWindow"}}},{kind:"Argument",name:{kind:"Name",value:"timetableView"},value:{kind:"Variable",name:{kind:"Name",value:"timetableView"}}},{kind:"Argument",name:{kind:"Name",value:"to"},value:{kind:"Variable",name:{kind:"Name",value:"to"}}},{kind:"Argument",name:{kind:"Name",value:"transferPenalty"},value:{kind:"Variable",name:{kind:"Name",value:"transferPenalty"}}},{kind:"Argument",name:{kind:"Name",value:"transferSlack"},value:{kind:"Variable",name:{kind:"Name",value:"transferSlack"}}},{kind:"Argument",name:{kind:"Name",value:"useBikeRentalAvailabilityInformation"},value:{kind:"Variable",name:{kind:"Name",value:"useBikeRentalAvailabilityInformation"}}},{kind:"Argument",name:{kind:"Name",value:"via"},value:{kind:"Variable",name:{kind:"Name",value:"via"}}},{kind:"Argument",name:{kind:"Name",value:"waitReluctance"},value:{kind:"Variable",name:{kind:"Name",value:"waitReluctance"}}},{kind:"Argument",name:{kind:"Name",value:"walkReluctance"},value:{kind:"Variable",name:{kind:"Name",value:"walkReluctance"}}},{kind:"Argument",name:{kind:"Name",value:"walkSpeed"},value:{kind:"Variable",name:{kind:"Name",value:"walkSpeed"}}},{kind:"Argument",name:{kind:"Name",value:"wheelchairAccessible"},value:{kind:"Variable",name:{kind:"Name",value:"wheelchairAccessible"}}},{kind:"Argument",name:{kind:"Name",value:"whiteListed"},value:{kind:"Variable",name:{kind:"Name",value:"whiteListed"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"previousPageCursor"}},{kind:"Field",name:{kind:"Name",value:"nextPageCursor"}},{kind:"Field",name:{kind:"Name",value:"tripPatterns"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aimedStartTime"}},{kind:"Field",name:{kind:"Name",value:"aimedEndTime"}},{kind:"Field",name:{kind:"Name",value:"expectedEndTime"}},{kind:"Field",name:{kind:"Name",value:"expectedStartTime"}},{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"distance"}},{kind:"Field",name:{kind:"Name",value:"generalizedCost"}},{kind:"Field",name:{kind:"Name",value:"legs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"mode"}},{kind:"Field",name:{kind:"Name",value:"aimedStartTime"}},{kind:"Field",name:{kind:"Name",value:"aimedEndTime"}},{kind:"Field",name:{kind:"Name",value:"expectedEndTime"}},{kind:"Field",name:{kind:"Name",value:"expectedStartTime"}},{kind:"Field",name:{kind:"Name",value:"realtime"}},{kind:"Field",name:{kind:"Name",value:"distance"}},{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"generalizedCost"}},{kind:"Field",name:{kind:"Name",value:"fromPlace"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"quay"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"toPlace"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"quay"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"fromEstimatedCall"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"destinationDisplay"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"frontText"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"line"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publicCode"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"presentation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colour"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"authority"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pointsOnLink"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"points"}}]}},{kind:"Field",name:{kind:"Name",value:"interchangeTo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"staySeated"}}]}},{kind:"Field",name:{kind:"Name",value:"interchangeFrom"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"staySeated"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"systemNotices"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tag"}}]}}]}}]}}]}}]},cO={"\n  query quayCoordinate($id: String!) {\n    quay(id: $id) {\n      latitude\n      longitude\n    }\n  }\n":iO,"\n  query serverInfo {\n    serverInfo {\n      version\n      otpSerializationVersionId\n      buildConfigVersion\n      routerConfigVersion\n      gitCommit\n      gitBranch\n      internalTransitModelTimeZone\n    }\n  }\n":rO,"\n  query authority($id: String!) {\n    authority(id: $id) {\n      name\n      id\n    }\n  }\n":aO,"\n  query line($id: ID!) {\n    line(id: $id) {\n      name\n      publicCode\n    }\n  }\n":sO,"\n  query quay($id: String!) {\n    quay(id: $id) {\n      stopPlace {\n        id\n        name\n      }\n    }\n  }\n":oO,"\nquery trip(\n  $accessEgressPenalty: [PenaltyForStreetMode!]\n  $alightSlackDefault: Int\n  $alightSlackList: [TransportModeSlack]\n  $arriveBy: Boolean\n  $banned: InputBanned\n  $bikePreferences: BikePreferencesInput\n  $boardSlackDefault: Int\n  $boardSlackList: [TransportModeSlack]\n  $bookingTime: DateTime\n  $dateTime: DateTime\n  $filters: [TripFilterInput!]\n  $from: Location!\n  $ignoreRealtimeUpdates: Boolean\n  $includePlannedCancellations: Boolean\n  $includeRealtimeCancellations: Boolean\n  $itineraryFilters: ItineraryFilters\n  $locale: Locale\n  $maxAccessEgressDurationForMode: [StreetModeDurationInput!]\n  $maxDirectDurationForMode: [StreetModeDurationInput!]\n  $maximumAdditionalTransfers: Int\n  $maximumTransfers: Int\n  $modes: Modes\n  $numTripPatterns: Int\n  $pageCursor: String\n  $relaxTransitGroupPriority: RelaxCostInput\n  $scooterPreferences: ScooterPreferencesInput\n  $searchWindow: Int\n  $timetableView: Boolean\n  $to: Location!\n  $transferPenalty: Int\n  $transferSlack: Int\n  $useBikeRentalAvailabilityInformation: Boolean\n  $via: [TripViaLocationInput!]\n  $waitReluctance: Float\n  $walkReluctance: Float\n  $walkSpeed: Float\n  $wheelchairAccessible: Boolean\n  $whiteListed: InputWhiteListed\n) {\n  trip(\n    accessEgressPenalty: $accessEgressPenalty\n    alightSlackDefault: $alightSlackDefault\n    alightSlackList: $alightSlackList\n    arriveBy: $arriveBy\n    banned: $banned\n    bikePreferences: $bikePreferences\n    boardSlackDefault: $boardSlackDefault\n    boardSlackList: $boardSlackList\n    bookingTime: $bookingTime\n    dateTime: $dateTime\n    filters: $filters\n    from: $from\n    ignoreRealtimeUpdates: $ignoreRealtimeUpdates\n    includePlannedCancellations: $includePlannedCancellations\n    includeRealtimeCancellations: $includeRealtimeCancellations\n    itineraryFilters: $itineraryFilters\n    locale: $locale\n    maxAccessEgressDurationForMode: $maxAccessEgressDurationForMode\n    maxDirectDurationForMode: $maxDirectDurationForMode\n    maximumAdditionalTransfers: $maximumAdditionalTransfers\n    maximumTransfers: $maximumTransfers\n    modes: $modes\n    numTripPatterns: $numTripPatterns\n    pageCursor: $pageCursor\n    relaxTransitGroupPriority: $relaxTransitGroupPriority\n    scooterPreferences: $scooterPreferences\n    searchWindow: $searchWindow\n    timetableView: $timetableView\n    to: $to\n    transferPenalty: $transferPenalty\n    transferSlack: $transferSlack\n    useBikeRentalAvailabilityInformation: $useBikeRentalAvailabilityInformation\n    via: $via\n    waitReluctance: $waitReluctance\n    walkReluctance: $walkReluctance\n    walkSpeed: $walkSpeed\n    wheelchairAccessible: $wheelchairAccessible\n    whiteListed: $whiteListed\n  ) \n    {\n    previousPageCursor\n    nextPageCursor\n    tripPatterns {\n        aimedStartTime\n        aimedEndTime\n        expectedEndTime\n        expectedStartTime\n        duration\n        distance\n        generalizedCost\n        legs {\n            id\n            mode\n            aimedStartTime\n            aimedEndTime\n            expectedEndTime\n            expectedStartTime\n            realtime\n            distance\n            duration\n            generalizedCost\n            fromPlace {\n                name\n                quay {\n                    id\n                }\n            }\n            toPlace {\n                name\n                quay {\n                    id\n                }\n            }\n            fromEstimatedCall {\n                destinationDisplay {\n                    frontText\n                }\n            }\n            line {\n                publicCode\n                name\n                id\n                presentation {\n                    colour\n                }\n            }\n            authority {\n                name\n                id\n            }\n            pointsOnLink {\n                points\n            }\n            interchangeTo {\n                staySeated\n            }\n            interchangeFrom {\n                staySeated\n            }\n        }\n        systemNotices {\n            tag\n        }\n    }\n  }\n}":lO};function c0(i){return cO[i]??{}}const uO=c0(`
  query quayCoordinate($id: String!) {
    quay(id: $id) {
      latitude
      longitude
    }
  }
`),hO=i=>{const[n,a]=te.useState(null);return te.useEffect(()=>{(async()=>{if(i.place){const f={id:i.place};try{a(await w2(Xx(),uO,f))}catch(g){console.error("Error at useQuayCoordinateQuery",g)}}else a(null)})()},[i]),n?.quay};function SS(i){const n=hO(i);if(n){const{latitude:a,longitude:h}=n;if(a&&h)return{latitude:a,longitude:h}}if(i.coordinates)return{...i.coordinates}}function dO({setCursor:i,tripQueryVariables:n,setTripQueryVariables:a,loading:h}){const f=SS(n.from),g=SS(n.to);return Q.jsxs(Q.Fragment,{children:[f&&Q.jsx(rS,{draggable:!0,latitude:f.latitude,longitude:f.longitude,onDragStart:()=>i("grabbing"),onDragEnd:_=>{i("auto"),h||a({...n,from:{coordinates:{latitude:_.lngLat.lat,longitude:_.lngLat.lng}}})},anchor:"bottom-right",children:Q.jsx("img",{alt:"",src:MR,height:48,width:49})}),g&&Q.jsx(rS,{draggable:!0,latitude:g.latitude,longitude:g.longitude,onDragStart:()=>i("grabbing"),onDragEnd:_=>{i("auto"),h||a({...n,to:{coordinates:{latitude:_.lngLat.lat,longitude:_.lngLat.lng}}})},anchor:"bottom-right",children:Q.jsx("img",{alt:"",src:CR,height:48,width:49})})]})}var fO=function(i,n){for(var a=Math.pow(10,n),h=i.length,f=new Array(Math.floor(i.length/2)),g=0,_=0,c=0,A=0;g<h;++A){var D=1,O=0,z=void 0;do z=i.charCodeAt(g++)-63-1,D+=z<<O,O+=5;while(z>=31);_+=D&1?~(D>>1):D>>1,D=1,O=0;do z=i.charCodeAt(g++)-63-1,D+=z<<O,O+=5;while(z>=31);c+=D&1?~(D>>1):D>>1,f[A]=[_/a,c/a]}return f.length=A,f};const pO=function(i){return i===Ci.Foot?"#191616":i===Ci.Bicycle?"#5076D9":i===Ci.Scooter?"#14b7ca":i===Ci.Car?"#7e7e7e":i===Ci.Rail?"#86BF8B":i===Ci.Coach?"#25642A":i===Ci.Metro?"#D9B250":i===Ci.Bus?"#fe0000":i===Ci.Tram?"#D9B250":i===Ci.Trolleybus?"#25642A":i===Ci.Water||i===Ci.Air||i===Ci.Cableway||i===Ci.Funicular||i===Ci.Monorail||i===Ci.Taxi?"#81304C":"#aaa"},mM=function(i){return i.line?.presentation?.colour?`#${i.line.presentation.colour}`:pO(i.mode)};function mO({tripPattern:i}){return Q.jsx(Q.Fragment,{children:i?.legs.map((n,a)=>n.pointsOnLink&&Q.jsxs(xR,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:fO(n.pointsOnLink.points,5).map(h=>h.reverse())}},children:[Q.jsx(aS,{type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#000","line-width":5}}),Q.jsx(aS,{type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":mM(n),"line-width":4}})]},n.id||`footleg_${a}`))})}const gM=(i,n,a)=>({...i,[a]:{coordinates:{latitude:n.lat,longitude:n.lng}}}),gO=(i,n)=>gM(i,n,"from"),yO=(i,n)=>gM(i,n,"to");function _O({tripQueryVariables:i,setTripQueryVariables:n}){return te.useCallback(a=>{a.preventDefault(),i.from.coordinates?n(yO(i,a.lngLat)):n(gO(i,a.lngLat))},[i,n])}var K1={exports:{}};var ES;function vO(){return ES||(ES=1,(function(i){(function(){var n={}.hasOwnProperty;function a(){for(var g="",_=0;_<arguments.length;_++){var c=arguments[_];c&&(g=f(g,h(c)))}return g}function h(g){if(typeof g=="string"||typeof g=="number")return g;if(typeof g!="object")return"";if(Array.isArray(g))return a.apply(null,g);if(g.toString!==Object.prototype.toString&&!g.toString.toString().includes("[native code]"))return g.toString();var _="";for(var c in g)n.call(g,c)&&g[c]&&(_=f(_,c));return _}function f(g,_){return _?g?g+" "+_:g+_:g}i.exports?(a.default=a,i.exports=a):window.classNames=a})()})(K1)),K1.exports}var bO=vO();const yn=eg(bO);function gn(){return gn=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var h in a)({}).hasOwnProperty.call(a,h)&&(i[h]=a[h])}return i},gn.apply(null,arguments)}function T2(i,n){if(i==null)return{};var a={};for(var h in i)if({}.hasOwnProperty.call(i,h)){if(n.indexOf(h)!==-1)continue;a[h]=i[h]}return a}function AS(i){return"default"+i.charAt(0).toUpperCase()+i.substr(1)}function xO(i){var n=wO(i,"string");return typeof n=="symbol"?n:String(n)}function wO(i,n){if(typeof i!="object"||i===null)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var h=a.call(i,n);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function TO(i,n,a){var h=te.useRef(i!==void 0),f=te.useState(n),g=f[0],_=f[1],c=i!==void 0,A=h.current;return h.current=c,!c&&A&&g!==n&&_(n),[c?i:g,te.useCallback(function(D){for(var O=arguments.length,z=new Array(O>1?O-1:0),V=1;V<O;V++)z[V-1]=arguments[V];a&&a.apply(void 0,[D].concat(z)),_(D)},[a])]}function yM(i,n){return Object.keys(n).reduce(function(a,h){var f,g=a,_=g[AS(h)],c=g[h],A=T2(g,[AS(h),h].map(xO)),D=n[h],O=TO(c,_,i[D]),z=O[0],V=O[1];return gn({},A,(f={},f[h]=z,f[D]=V,f))},i)}function _x(i,n){return _x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,h){return a.__proto__=h,a},_x(i,n)}function SO(i,n){i.prototype=Object.create(n.prototype),i.prototype.constructor=i,_x(i,n)}const EO=["xxl","xl","lg","md","sm","xs"],AO="xs",wv=te.createContext({prefixes:{},breakpoints:EO,minBreakpoint:AO}),{Consumer:xj,Provider:wj}=wv;function kn(i,n){const{prefixes:a}=te.useContext(wv);return i||a[n]||n}function MO(){const{breakpoints:i}=te.useContext(wv);return i}function CO(){const{minBreakpoint:i}=te.useContext(wv);return i}function S2(){const{dir:i}=te.useContext(wv);return i==="rtl"}function u0(i){return i&&i.ownerDocument||document}function DO(i){var n=u0(i);return n&&n.defaultView||window}function IO(i,n){return DO(i).getComputedStyle(i,n)}var RO=/([A-Z])/g;function kO(i){return i.replace(RO,"-$1").toLowerCase()}var OO=/^ms-/;function Hb(i){return kO(i).replace(OO,"-ms-")}var LO=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function NO(i){return!!(i&&LO.test(i))}function Vd(i,n){var a="",h="";if(typeof n=="string")return i.style.getPropertyValue(Hb(n))||IO(i).getPropertyValue(Hb(n));Object.keys(n).forEach(function(f){var g=n[f];!g&&g!==0?i.style.removeProperty(Hb(f)):NO(f)?h+=f+"("+g+") ":a+=Hb(f)+": "+g+";"}),h&&(a+="transform: "+h+";"),i.style.cssText+=";"+a}var J1={exports:{}},ew,MS;function PO(){if(MS)return ew;MS=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ew=i,ew}var tw,CS;function zO(){if(CS)return tw;CS=1;var i=PO();function n(){}function a(){}return a.resetWarningCache=n,tw=function(){function h(_,c,A,D,O,z){if(z!==i){var V=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw V.name="Invariant Violation",V}}h.isRequired=h;function f(){return h}var g={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:f,element:h,elementType:h,instanceOf:f,node:h,objectOf:f,oneOf:f,oneOfType:f,shape:f,exact:f,checkPropTypes:a,resetWarningCache:n};return g.PropTypes=g,g},tw}var DS;function FO(){return DS||(DS=1,J1.exports=zO()()),J1.exports}var jO=FO();const Ud=eg(jO),IS={disabled:!1},_M=Ll.createContext(null);var BO=function(n){return n.scrollTop},j_="unmounted",sp="exited",vu="entering",kd="entered",av="exiting",ef=(function(i){SO(n,i);function n(h,f){var g;g=i.call(this,h,f)||this;var _=f,c=_&&!_.isMounting?h.enter:h.appear,A;return g.appearStatus=null,h.in?c?(A=sp,g.appearStatus=vu):A=kd:h.unmountOnExit||h.mountOnEnter?A=j_:A=sp,g.state={status:A},g.nextCallback=null,g}n.getDerivedStateFromProps=function(f,g){var _=f.in;return _&&g.status===j_?{status:sp}:null};var a=n.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(f){var g=null;if(f!==this.props){var _=this.state.status;this.props.in?_!==vu&&_!==kd&&(g=vu):(_===vu||_===kd)&&(g=av)}this.updateStatus(!1,g)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var f=this.props.timeout,g,_,c;return g=_=c=f,f!=null&&typeof f!="number"&&(g=f.exit,_=f.enter,c=f.appear!==void 0?f.appear:_),{exit:g,enter:_,appear:c}},a.updateStatus=function(f,g){if(f===void 0&&(f=!1),g!==null)if(this.cancelNextCallback(),g===vu){if(this.props.unmountOnExit||this.props.mountOnEnter){var _=this.props.nodeRef?this.props.nodeRef.current:Pm.findDOMNode(this);_&&BO(_)}this.performEnter(f)}else this.performExit();else this.props.unmountOnExit&&this.state.status===sp&&this.setState({status:j_})},a.performEnter=function(f){var g=this,_=this.props.enter,c=this.context?this.context.isMounting:f,A=this.props.nodeRef?[c]:[Pm.findDOMNode(this),c],D=A[0],O=A[1],z=this.getTimeouts(),V=c?z.appear:z.enter;if(!f&&!_||IS.disabled){this.safeSetState({status:kd},function(){g.props.onEntered(D)});return}this.props.onEnter(D,O),this.safeSetState({status:vu},function(){g.props.onEntering(D,O),g.onTransitionEnd(V,function(){g.safeSetState({status:kd},function(){g.props.onEntered(D,O)})})})},a.performExit=function(){var f=this,g=this.props.exit,_=this.getTimeouts(),c=this.props.nodeRef?void 0:Pm.findDOMNode(this);if(!g||IS.disabled){this.safeSetState({status:sp},function(){f.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:av},function(){f.props.onExiting(c),f.onTransitionEnd(_.exit,function(){f.safeSetState({status:sp},function(){f.props.onExited(c)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(f,g){g=this.setNextCallback(g),this.setState(f,g)},a.setNextCallback=function(f){var g=this,_=!0;return this.nextCallback=function(c){_&&(_=!1,g.nextCallback=null,f(c))},this.nextCallback.cancel=function(){_=!1},this.nextCallback},a.onTransitionEnd=function(f,g){this.setNextCallback(g);var _=this.props.nodeRef?this.props.nodeRef.current:Pm.findDOMNode(this),c=f==null&&!this.props.addEndListener;if(!_||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var A=this.props.nodeRef?[this.nextCallback]:[_,this.nextCallback],D=A[0],O=A[1];this.props.addEndListener(D,O)}f!=null&&setTimeout(this.nextCallback,f)},a.render=function(){var f=this.state.status;if(f===j_)return null;var g=this.props,_=g.children;g.in,g.mountOnEnter,g.unmountOnExit,g.appear,g.enter,g.exit,g.timeout,g.addEndListener,g.onEnter,g.onEntering,g.onEntered,g.onExit,g.onExiting,g.onExited,g.nodeRef;var c=T2(g,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ll.createElement(_M.Provider,{value:null},typeof _=="function"?_(f,c):Ll.cloneElement(Ll.Children.only(_),c))},n})(Ll.Component);ef.contextType=_M;ef.propTypes={};function Dy(){}ef.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Dy,onEntering:Dy,onEntered:Dy,onExit:Dy,onExiting:Dy,onExited:Dy};ef.UNMOUNTED=j_;ef.EXITED=sp;ef.ENTERING=vu;ef.ENTERED=kd;ef.EXITING=av;function vM(i){return i.code==="Escape"||i.keyCode===27}function VO(){const i=te.version.split(".");return{major:+i[0],minor:+i[1],patch:+i[2]}}function h0(i){if(!i||typeof i=="function")return null;const{major:n}=VO();return n>=19?i.props.ref:i.ref}const d0=!!(typeof window<"u"&&window.document&&window.document.createElement);var Iw=!1,Rw=!1;try{var nw={get passive(){return Iw=!0},get once(){return Rw=Iw=!0}};d0&&(window.addEventListener("test",nw,nw),window.removeEventListener("test",nw,!0))}catch{}function bM(i,n,a,h){if(h&&typeof h!="boolean"&&!Rw){var f=h.once,g=h.capture,_=a;!Rw&&f&&(_=a.__once||function c(A){this.removeEventListener(n,c,g),a.call(this,A)},a.__once=_),i.addEventListener(n,_,Iw?h:g)}i.addEventListener(n,a,h)}function kw(i,n,a,h){var f=h&&typeof h!="boolean"?h.capture:h;i.removeEventListener(n,a,f),a.__once&&i.removeEventListener(n,a.__once,f)}function Pd(i,n,a,h){return bM(i,n,a,h),function(){kw(i,n,a,h)}}function UO(i,n,a,h){if(h===void 0&&(h=!0),i){var f=document.createEvent("HTMLEvents");f.initEvent(n,a,h),i.dispatchEvent(f)}}function GO(i){var n=Vd(i,"transitionDuration")||"",a=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*a}function $O(i,n,a){a===void 0&&(a=5);var h=!1,f=setTimeout(function(){h||UO(i,"transitionend",!0)},n+a),g=Pd(i,"transitionend",function(){h=!0},{once:!0});return function(){clearTimeout(f),g()}}function xM(i,n,a,h){a==null&&(a=GO(i)||0);var f=$O(i,a,h),g=Pd(i,"transitionend",n);return function(){f(),g()}}function RS(i,n){const a=Vd(i,n)||"",h=a.indexOf("ms")===-1?1e3:1;return parseFloat(a)*h}function E2(i,n){const a=RS(i,"transitionDuration"),h=RS(i,"transitionDelay"),f=xM(i,g=>{g.target===i&&(f(),n(g))},a+h)}function D_(...i){return i.filter(n=>n!=null).reduce((n,a)=>{if(typeof a!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?a:function(...f){n.apply(this,f),a.apply(this,f)}},null)}function wM(i){i.offsetHeight}const kS=i=>!i||typeof i=="function"?i:n=>{i.current=n};function ZO(i,n){const a=kS(i),h=kS(n);return f=>{a&&a(f),h&&h(f)}}function A2(i,n){return te.useMemo(()=>ZO(i,n),[i,n])}function Ow(i){return i&&"setState"in i?Pm.findDOMNode(i):i??null}const Qx=Ll.forwardRef(({onEnter:i,onEntering:n,onEntered:a,onExit:h,onExiting:f,onExited:g,addEndListener:_,children:c,childRef:A,...D},O)=>{const z=te.useRef(null),V=A2(z,A),Y=Re=>{V(Ow(Re))},ee=Re=>Ne=>{Re&&z.current&&Re(z.current,Ne)},ie=te.useCallback(ee(i),[i]),q=te.useCallback(ee(n),[n]),fe=te.useCallback(ee(a),[a]),Ee=te.useCallback(ee(h),[h]),we=te.useCallback(ee(f),[f]),ze=te.useCallback(ee(g),[g]),Ce=te.useCallback(ee(_),[_]);return Q.jsx(ef,{ref:O,...D,onEnter:ie,onEntered:fe,onEntering:q,onExit:Ee,onExited:ze,onExiting:we,addEndListener:Ce,nodeRef:z,children:typeof c=="function"?(Re,Ne)=>c(Re,{...Ne,ref:Y}):Ll.cloneElement(c,{ref:Y})})});Qx.displayName="TransitionWrapper";const qO={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function YO(i,n){const a=`offset${i[0].toUpperCase()}${i.slice(1)}`,h=n[a],f=qO[i];return h+parseInt(Vd(n,f[0]),10)+parseInt(Vd(n,f[1]),10)}const HO={[sp]:"collapse",[av]:"collapsing",[vu]:"collapsing",[kd]:"collapse show"},M2=Ll.forwardRef(({onEnter:i,onEntering:n,onEntered:a,onExit:h,onExiting:f,className:g,children:_,dimension:c="height",in:A=!1,timeout:D=300,mountOnEnter:O=!1,unmountOnExit:z=!1,appear:V=!1,getDimensionValue:Y=YO,...ee},ie)=>{const q=typeof c=="function"?c():c,fe=te.useMemo(()=>D_(Re=>{Re.style[q]="0"},i),[q,i]),Ee=te.useMemo(()=>D_(Re=>{const Ne=`scroll${q[0].toUpperCase()}${q.slice(1)}`;Re.style[q]=`${Re[Ne]}px`},n),[q,n]),we=te.useMemo(()=>D_(Re=>{Re.style[q]=null},a),[q,a]),ze=te.useMemo(()=>D_(Re=>{Re.style[q]=`${Y(q,Re)}px`,wM(Re)},h),[h,Y,q]),Ce=te.useMemo(()=>D_(Re=>{Re.style[q]=null},f),[q,f]);return Q.jsx(Qx,{ref:ie,addEndListener:E2,...ee,"aria-expanded":ee.role?A:null,onEnter:fe,onEntering:Ee,onEntered:we,onExit:ze,onExiting:Ce,childRef:h0(_),in:A,timeout:D,mountOnEnter:O,unmountOnExit:z,appear:V,children:(Re,Ne)=>Ll.cloneElement(_,{...Ne,className:yn(g,_.props.className,HO[Re],q==="width"&&"collapse-horizontal")})})});M2.displayName="Collapse";function TM(i,n){return Array.isArray(i)?i.includes(n):i===n}const Tv=te.createContext({});Tv.displayName="AccordionContext";const C2=te.forwardRef(({as:i="div",bsPrefix:n,className:a,children:h,eventKey:f,...g},_)=>{const{activeEventKey:c}=te.useContext(Tv);return n=kn(n,"accordion-collapse"),Q.jsx(M2,{ref:_,in:TM(c,f),...g,className:yn(a,n),children:Q.jsx(i,{children:te.Children.only(h)})})});C2.displayName="AccordionCollapse";const Kx=te.createContext({eventKey:""});Kx.displayName="AccordionItemContext";const SM=te.forwardRef(({as:i="div",bsPrefix:n,className:a,onEnter:h,onEntering:f,onEntered:g,onExit:_,onExiting:c,onExited:A,...D},O)=>{n=kn(n,"accordion-body");const{eventKey:z}=te.useContext(Kx);return Q.jsx(C2,{eventKey:z,onEnter:h,onEntering:f,onEntered:g,onExit:_,onExiting:c,onExited:A,children:Q.jsx(i,{ref:O,...D,className:yn(a,n)})})});SM.displayName="AccordionBody";function WO(i,n){const{activeEventKey:a,onSelect:h,alwaysOpen:f}=te.useContext(Tv);return g=>{let _=i===a?null:i;f&&(Array.isArray(a)?a.includes(i)?_=a.filter(c=>c!==i):_=[...a,i]:_=[i]),h?.(_,g),n?.(g)}}const D2=te.forwardRef(({as:i="button",bsPrefix:n,className:a,onClick:h,...f},g)=>{n=kn(n,"accordion-button");const{eventKey:_}=te.useContext(Kx),c=WO(_,h),{activeEventKey:A}=te.useContext(Tv);return i==="button"&&(f.type="button"),Q.jsx(i,{ref:g,onClick:c,...f,"aria-expanded":Array.isArray(A)?A.includes(_):_===A,className:yn(a,n,!TM(A,_)&&"collapsed")})});D2.displayName="AccordionButton";const EM=te.forwardRef(({as:i="h2","aria-controls":n,bsPrefix:a,className:h,children:f,onClick:g,..._},c)=>(a=kn(a,"accordion-header"),Q.jsx(i,{ref:c,..._,className:yn(h,a),children:Q.jsx(D2,{onClick:g,"aria-controls":n,children:f})})));EM.displayName="AccordionHeader";const AM=te.forwardRef(({as:i="div",bsPrefix:n,className:a,eventKey:h,...f},g)=>{n=kn(n,"accordion-item");const _=te.useMemo(()=>({eventKey:h}),[h]);return Q.jsx(Kx.Provider,{value:_,children:Q.jsx(i,{ref:g,...f,className:yn(a,n)})})});AM.displayName="AccordionItem";const MM=te.forwardRef((i,n)=>{const{as:a="div",activeKey:h,bsPrefix:f,className:g,onSelect:_,flush:c,alwaysOpen:A,...D}=yM(i,{activeKey:"onSelect"}),O=kn(f,"accordion"),z=te.useMemo(()=>({activeEventKey:h,onSelect:_,alwaysOpen:A}),[h,_,A]);return Q.jsx(Tv.Provider,{value:z,children:Q.jsx(a,{ref:n,...D,className:yn(g,O,c&&`${O}-flush`)})})});MM.displayName="Accordion";const Wb=Object.assign(MM,{Button:D2,Collapse:C2,Item:AM,Header:EM,Body:SM});function XO(i){const n=te.useRef(i);return te.useEffect(()=>{n.current=i},[i]),n}function Zm(i){const n=XO(i);return te.useCallback(function(...a){return n.current&&n.current(...a)},[n])}const CM=(i=>te.forwardRef((n,a)=>Q.jsx("div",{...n,ref:a,className:yn(n.className,i)})));function OS(){return te.useState(null)}function QO(i){const n=te.useRef(i);return te.useEffect(()=>{n.current=i},[i]),n}function yh(i){const n=QO(i);return te.useCallback(function(...a){return n.current&&n.current(...a)},[n])}function DM(){const i=te.useRef(!0),n=te.useRef(()=>i.current);return te.useEffect(()=>(i.current=!0,()=>{i.current=!1}),[]),n.current}function KO(i){const n=te.useRef(null);return te.useEffect(()=>{n.current=i}),n.current}const JO=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",e3=typeof document<"u",LS=e3||JO?te.useLayoutEffect:te.useEffect,t3=["as","disabled"];function n3(i,n){if(i==null)return{};var a={};for(var h in i)if({}.hasOwnProperty.call(i,h)){if(n.indexOf(h)>=0)continue;a[h]=i[h]}return a}function i3(i){return!i||i.trim()==="#"}function IM({tagName:i,disabled:n,href:a,target:h,rel:f,role:g,onClick:_,tabIndex:c=0,type:A}){i||(a!=null||h!=null||f!=null?i="a":i="button");const D={tagName:i};if(i==="button")return[{type:A||"button",disabled:n},D];const O=V=>{if((n||i==="a"&&i3(a))&&V.preventDefault(),n){V.stopPropagation();return}_?.(V)},z=V=>{V.key===" "&&(V.preventDefault(),O(V))};return i==="a"&&(a||(a="#"),n&&(a=void 0)),[{role:g??"button",disabled:void 0,tabIndex:n?void 0:c,href:a,target:i==="a"?h:void 0,"aria-disabled":n||void 0,rel:i==="a"?f:void 0,onClick:O,onKeyDown:z},D]}const r3=te.forwardRef((i,n)=>{let{as:a,disabled:h}=i,f=n3(i,t3);const[g,{tagName:_}]=IM(Object.assign({tagName:a,disabled:h},f));return Q.jsx(_,Object.assign({},f,g,{ref:n}))});r3.displayName="Button";const a3={[vu]:"show",[kd]:"show"},qy=te.forwardRef(({className:i,children:n,transitionClasses:a={},onEnter:h,...f},g)=>{const _={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...f},c=te.useCallback((A,D)=>{wM(A),h?.(A,D)},[h]);return Q.jsx(Qx,{ref:g,addEndListener:E2,..._,onEnter:c,childRef:h0(n),children:(A,D)=>te.cloneElement(n,{...D,className:yn("fade",i,n.props.className,a3[A],a[A])})})});qy.displayName="Fade";const s3={"aria-label":Ud.string,onClick:Ud.func,variant:Ud.oneOf(["white"])},I2=te.forwardRef(({className:i,variant:n,"aria-label":a="Close",...h},f)=>Q.jsx("button",{ref:f,type:"button",className:yn("btn-close",n&&`btn-close-${n}`,i),"aria-label":a,...h}));I2.displayName="CloseButton";I2.propTypes=s3;const dp=te.forwardRef(({as:i,bsPrefix:n,variant:a="primary",size:h,active:f=!1,disabled:g=!1,className:_,...c},A)=>{const D=kn(n,"btn"),[O,{tagName:z}]=IM({tagName:i,disabled:g,...c}),V=z;return Q.jsx(V,{...O,...c,ref:A,disabled:g,className:yn(_,D,f&&"active",a&&`${D}-${a}`,h&&`${D}-${h}`,c.href&&g&&"disabled")})});dp.displayName="Button";const R2=te.forwardRef(({bsPrefix:i,size:n,vertical:a=!1,className:h,role:f="group",as:g="div",..._},c)=>{const A=kn(i,"btn-group");let D=A;return a&&(D=`${A}-vertical`),Q.jsx(g,{..._,ref:c,role:f,className:yn(h,D,n&&`${A}-${n}`)})});R2.displayName="ButtonGroup";function o3(i){const n=te.useRef(i);return n.current=i,n}function l3(i){const n=o3(i);te.useEffect(()=>()=>n.current(),[])}function c3(i,n){return te.Children.toArray(i).some(a=>te.isValidElement(a)&&a.type===n)}function u3({as:i,bsPrefix:n,className:a,...h}){n=kn(n,"col");const f=MO(),g=CO(),_=[],c=[];return f.forEach(A=>{const D=h[A];delete h[A];let O,z,V;typeof D=="object"&&D!=null?{span:O,offset:z,order:V}=D:O=D;const Y=A!==g?`-${A}`:"";O&&_.push(O===!0?`${n}${Y}`:`${n}${Y}-${O}`),V!=null&&c.push(`order${Y}-${V}`),z!=null&&c.push(`offset${Y}-${z}`)}),[{...h,className:yn(a,..._,...c)},{as:i,bsPrefix:n,spans:_}]}const RM=te.forwardRef((i,n)=>{const[{className:a,...h},{as:f="div",bsPrefix:g,spans:_}]=u3(i);return Q.jsx(f,{...h,ref:n,className:yn(a,!_.length&&g)})});RM.displayName="Col";var h3=Function.prototype.bind.call(Function.prototype.call,[].slice);function Iy(i,n){return h3(i.querySelectorAll(n))}var NS=Object.prototype.hasOwnProperty;function PS(i,n,a){for(a of i.keys())if(W_(a,n))return a}function W_(i,n){var a,h,f;if(i===n)return!0;if(i&&n&&(a=i.constructor)===n.constructor){if(a===Date)return i.getTime()===n.getTime();if(a===RegExp)return i.toString()===n.toString();if(a===Array){if((h=i.length)===n.length)for(;h--&&W_(i[h],n[h]););return h===-1}if(a===Set){if(i.size!==n.size)return!1;for(h of i)if(f=h,f&&typeof f=="object"&&(f=PS(n,f),!f)||!n.has(f))return!1;return!0}if(a===Map){if(i.size!==n.size)return!1;for(h of i)if(f=h[0],f&&typeof f=="object"&&(f=PS(n,f),!f)||!W_(h[1],n.get(f)))return!1;return!0}if(a===ArrayBuffer)i=new Uint8Array(i),n=new Uint8Array(n);else if(a===DataView){if((h=i.byteLength)===n.byteLength)for(;h--&&i.getInt8(h)===n.getInt8(h););return h===-1}if(ArrayBuffer.isView(i)){if((h=i.byteLength)===n.byteLength)for(;h--&&i[h]===n[h];);return h===-1}if(!a||typeof i=="object"){h=0;for(a in i)if(NS.call(i,a)&&++h&&!NS.call(n,a)||!(a in n)||!W_(i[a],n[a]))return!1;return Object.keys(n).length===h}}return i!==i&&n!==n}function d3(i){const n=DM();return[i[0],te.useCallback(a=>{if(n())return i[1](a)},[n,i[1]])]}var il="top",xc="bottom",wc="right",rl="left",k2="auto",Sv=[il,xc,wc,rl],Yy="start",sv="end",f3="clippingParents",kM="viewport",I_="popper",p3="reference",zS=Sv.reduce(function(i,n){return i.concat([n+"-"+Yy,n+"-"+sv])},[]),OM=[].concat(Sv,[k2]).reduce(function(i,n){return i.concat([n,n+"-"+Yy,n+"-"+sv])},[]),m3="beforeRead",g3="read",y3="afterRead",_3="beforeMain",v3="main",b3="afterMain",x3="beforeWrite",w3="write",T3="afterWrite",S3=[m3,g3,y3,_3,v3,b3,x3,w3,T3];function Th(i){return i.split("-")[0]}function jl(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var n=i.ownerDocument;return n&&n.defaultView||window}return i}function qm(i){var n=jl(i).Element;return i instanceof n||i instanceof Element}function Sh(i){var n=jl(i).HTMLElement;return i instanceof n||i instanceof HTMLElement}function O2(i){if(typeof ShadowRoot>"u")return!1;var n=jl(i).ShadowRoot;return i instanceof n||i instanceof ShadowRoot}var Bm=Math.max,vx=Math.min,Hy=Math.round;function Lw(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function LM(){return!/^((?!chrome|android).)*safari/i.test(Lw())}function Wy(i,n,a){n===void 0&&(n=!1),a===void 0&&(a=!1);var h=i.getBoundingClientRect(),f=1,g=1;n&&Sh(i)&&(f=i.offsetWidth>0&&Hy(h.width)/i.offsetWidth||1,g=i.offsetHeight>0&&Hy(h.height)/i.offsetHeight||1);var _=qm(i)?jl(i):window,c=_.visualViewport,A=!LM()&&a,D=(h.left+(A&&c?c.offsetLeft:0))/f,O=(h.top+(A&&c?c.offsetTop:0))/g,z=h.width/f,V=h.height/g;return{width:z,height:V,top:O,right:D+z,bottom:O+V,left:D,x:D,y:O}}function L2(i){var n=Wy(i),a=i.offsetWidth,h=i.offsetHeight;return Math.abs(n.width-a)<=1&&(a=n.width),Math.abs(n.height-h)<=1&&(h=n.height),{x:i.offsetLeft,y:i.offsetTop,width:a,height:h}}function NM(i,n){var a=n.getRootNode&&n.getRootNode();if(i.contains(n))return!0;if(a&&O2(a)){var h=n;do{if(h&&i.isSameNode(h))return!0;h=h.parentNode||h.host}while(h)}return!1}function mp(i){return i?(i.nodeName||"").toLowerCase():null}function Wd(i){return jl(i).getComputedStyle(i)}function E3(i){return["table","td","th"].indexOf(mp(i))>=0}function xp(i){return((qm(i)?i.ownerDocument:i.document)||window.document).documentElement}function Jx(i){return mp(i)==="html"?i:i.assignedSlot||i.parentNode||(O2(i)?i.host:null)||xp(i)}function FS(i){return!Sh(i)||Wd(i).position==="fixed"?null:i.offsetParent}function A3(i){var n=/firefox/i.test(Lw()),a=/Trident/i.test(Lw());if(a&&Sh(i)){var h=Wd(i);if(h.position==="fixed")return null}var f=Jx(i);for(O2(f)&&(f=f.host);Sh(f)&&["html","body"].indexOf(mp(f))<0;){var g=Wd(f);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||n&&g.willChange==="filter"||n&&g.filter&&g.filter!=="none")return f;f=f.parentNode}return null}function Ev(i){for(var n=jl(i),a=FS(i);a&&E3(a)&&Wd(a).position==="static";)a=FS(a);return a&&(mp(a)==="html"||mp(a)==="body"&&Wd(a).position==="static")?n:a||A3(i)||n}function N2(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function X_(i,n,a){return Bm(i,vx(n,a))}function M3(i,n,a){var h=X_(i,n,a);return h>a?a:h}function PM(){return{top:0,right:0,bottom:0,left:0}}function zM(i){return Object.assign({},PM(),i)}function FM(i,n){return n.reduce(function(a,h){return a[h]=i,a},{})}var C3=function(n,a){return n=typeof n=="function"?n(Object.assign({},a.rects,{placement:a.placement})):n,zM(typeof n!="number"?n:FM(n,Sv))};function D3(i){var n,a=i.state,h=i.name,f=i.options,g=a.elements.arrow,_=a.modifiersData.popperOffsets,c=Th(a.placement),A=N2(c),D=[rl,wc].indexOf(c)>=0,O=D?"height":"width";if(!(!g||!_)){var z=C3(f.padding,a),V=L2(g),Y=A==="y"?il:rl,ee=A==="y"?xc:wc,ie=a.rects.reference[O]+a.rects.reference[A]-_[A]-a.rects.popper[O],q=_[A]-a.rects.reference[A],fe=Ev(g),Ee=fe?A==="y"?fe.clientHeight||0:fe.clientWidth||0:0,we=ie/2-q/2,ze=z[Y],Ce=Ee-V[O]-z[ee],Re=Ee/2-V[O]/2+we,Ne=X_(ze,Re,Ce),at=A;a.modifiersData[h]=(n={},n[at]=Ne,n.centerOffset=Ne-Re,n)}}function I3(i){var n=i.state,a=i.options,h=a.element,f=h===void 0?"[data-popper-arrow]":h;f!=null&&(typeof f=="string"&&(f=n.elements.popper.querySelector(f),!f)||NM(n.elements.popper,f)&&(n.elements.arrow=f))}const R3={name:"arrow",enabled:!0,phase:"main",fn:D3,effect:I3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xy(i){return i.split("-")[1]}var k3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function O3(i,n){var a=i.x,h=i.y,f=n.devicePixelRatio||1;return{x:Hy(a*f)/f||0,y:Hy(h*f)/f||0}}function jS(i){var n,a=i.popper,h=i.popperRect,f=i.placement,g=i.variation,_=i.offsets,c=i.position,A=i.gpuAcceleration,D=i.adaptive,O=i.roundOffsets,z=i.isFixed,V=_.x,Y=V===void 0?0:V,ee=_.y,ie=ee===void 0?0:ee,q=typeof O=="function"?O({x:Y,y:ie}):{x:Y,y:ie};Y=q.x,ie=q.y;var fe=_.hasOwnProperty("x"),Ee=_.hasOwnProperty("y"),we=rl,ze=il,Ce=window;if(D){var Re=Ev(a),Ne="clientHeight",at="clientWidth";if(Re===jl(a)&&(Re=xp(a),Wd(Re).position!=="static"&&c==="absolute"&&(Ne="scrollHeight",at="scrollWidth")),Re=Re,f===il||(f===rl||f===wc)&&g===sv){ze=xc;var Te=z&&Re===Ce&&Ce.visualViewport?Ce.visualViewport.height:Re[Ne];ie-=Te-h.height,ie*=A?1:-1}if(f===rl||(f===il||f===xc)&&g===sv){we=wc;var it=z&&Re===Ce&&Ce.visualViewport?Ce.visualViewport.width:Re[at];Y-=it-h.width,Y*=A?1:-1}}var Dt=Object.assign({position:c},D&&k3),Mt=O===!0?O3({x:Y,y:ie},jl(a)):{x:Y,y:ie};if(Y=Mt.x,ie=Mt.y,A){var Ut;return Object.assign({},Dt,(Ut={},Ut[ze]=Ee?"0":"",Ut[we]=fe?"0":"",Ut.transform=(Ce.devicePixelRatio||1)<=1?"translate("+Y+"px, "+ie+"px)":"translate3d("+Y+"px, "+ie+"px, 0)",Ut))}return Object.assign({},Dt,(n={},n[ze]=Ee?ie+"px":"",n[we]=fe?Y+"px":"",n.transform="",n))}function L3(i){var n=i.state,a=i.options,h=a.gpuAcceleration,f=h===void 0?!0:h,g=a.adaptive,_=g===void 0?!0:g,c=a.roundOffsets,A=c===void 0?!0:c,D={placement:Th(n.placement),variation:Xy(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:f,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,jS(Object.assign({},D,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:_,roundOffsets:A})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,jS(Object.assign({},D,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:A})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const N3={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:L3,data:{}};var Xb={passive:!0};function P3(i){var n=i.state,a=i.instance,h=i.options,f=h.scroll,g=f===void 0?!0:f,_=h.resize,c=_===void 0?!0:_,A=jl(n.elements.popper),D=[].concat(n.scrollParents.reference,n.scrollParents.popper);return g&&D.forEach(function(O){O.addEventListener("scroll",a.update,Xb)}),c&&A.addEventListener("resize",a.update,Xb),function(){g&&D.forEach(function(O){O.removeEventListener("scroll",a.update,Xb)}),c&&A.removeEventListener("resize",a.update,Xb)}}const z3={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:P3,data:{}};var F3={left:"right",right:"left",bottom:"top",top:"bottom"};function cx(i){return i.replace(/left|right|bottom|top/g,function(n){return F3[n]})}var j3={start:"end",end:"start"};function BS(i){return i.replace(/start|end/g,function(n){return j3[n]})}function P2(i){var n=jl(i),a=n.pageXOffset,h=n.pageYOffset;return{scrollLeft:a,scrollTop:h}}function z2(i){return Wy(xp(i)).left+P2(i).scrollLeft}function B3(i,n){var a=jl(i),h=xp(i),f=a.visualViewport,g=h.clientWidth,_=h.clientHeight,c=0,A=0;if(f){g=f.width,_=f.height;var D=LM();(D||!D&&n==="fixed")&&(c=f.offsetLeft,A=f.offsetTop)}return{width:g,height:_,x:c+z2(i),y:A}}function V3(i){var n,a=xp(i),h=P2(i),f=(n=i.ownerDocument)==null?void 0:n.body,g=Bm(a.scrollWidth,a.clientWidth,f?f.scrollWidth:0,f?f.clientWidth:0),_=Bm(a.scrollHeight,a.clientHeight,f?f.scrollHeight:0,f?f.clientHeight:0),c=-h.scrollLeft+z2(i),A=-h.scrollTop;return Wd(f||a).direction==="rtl"&&(c+=Bm(a.clientWidth,f?f.clientWidth:0)-g),{width:g,height:_,x:c,y:A}}function F2(i){var n=Wd(i),a=n.overflow,h=n.overflowX,f=n.overflowY;return/auto|scroll|overlay|hidden/.test(a+f+h)}function jM(i){return["html","body","#document"].indexOf(mp(i))>=0?i.ownerDocument.body:Sh(i)&&F2(i)?i:jM(Jx(i))}function Q_(i,n){var a;n===void 0&&(n=[]);var h=jM(i),f=h===((a=i.ownerDocument)==null?void 0:a.body),g=jl(h),_=f?[g].concat(g.visualViewport||[],F2(h)?h:[]):h,c=n.concat(_);return f?c:c.concat(Q_(Jx(_)))}function Nw(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function U3(i,n){var a=Wy(i,!1,n==="fixed");return a.top=a.top+i.clientTop,a.left=a.left+i.clientLeft,a.bottom=a.top+i.clientHeight,a.right=a.left+i.clientWidth,a.width=i.clientWidth,a.height=i.clientHeight,a.x=a.left,a.y=a.top,a}function VS(i,n,a){return n===kM?Nw(B3(i,a)):qm(n)?U3(n,a):Nw(V3(xp(i)))}function G3(i){var n=Q_(Jx(i)),a=["absolute","fixed"].indexOf(Wd(i).position)>=0,h=a&&Sh(i)?Ev(i):i;return qm(h)?n.filter(function(f){return qm(f)&&NM(f,h)&&mp(f)!=="body"}):[]}function $3(i,n,a,h){var f=n==="clippingParents"?G3(i):[].concat(n),g=[].concat(f,[a]),_=g[0],c=g.reduce(function(A,D){var O=VS(i,D,h);return A.top=Bm(O.top,A.top),A.right=vx(O.right,A.right),A.bottom=vx(O.bottom,A.bottom),A.left=Bm(O.left,A.left),A},VS(i,_,h));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function BM(i){var n=i.reference,a=i.element,h=i.placement,f=h?Th(h):null,g=h?Xy(h):null,_=n.x+n.width/2-a.width/2,c=n.y+n.height/2-a.height/2,A;switch(f){case il:A={x:_,y:n.y-a.height};break;case xc:A={x:_,y:n.y+n.height};break;case wc:A={x:n.x+n.width,y:c};break;case rl:A={x:n.x-a.width,y:c};break;default:A={x:n.x,y:n.y}}var D=f?N2(f):null;if(D!=null){var O=D==="y"?"height":"width";switch(g){case Yy:A[D]=A[D]-(n[O]/2-a[O]/2);break;case sv:A[D]=A[D]+(n[O]/2-a[O]/2);break}}return A}function ov(i,n){n===void 0&&(n={});var a=n,h=a.placement,f=h===void 0?i.placement:h,g=a.strategy,_=g===void 0?i.strategy:g,c=a.boundary,A=c===void 0?f3:c,D=a.rootBoundary,O=D===void 0?kM:D,z=a.elementContext,V=z===void 0?I_:z,Y=a.altBoundary,ee=Y===void 0?!1:Y,ie=a.padding,q=ie===void 0?0:ie,fe=zM(typeof q!="number"?q:FM(q,Sv)),Ee=V===I_?p3:I_,we=i.rects.popper,ze=i.elements[ee?Ee:V],Ce=$3(qm(ze)?ze:ze.contextElement||xp(i.elements.popper),A,O,_),Re=Wy(i.elements.reference),Ne=BM({reference:Re,element:we,placement:f}),at=Nw(Object.assign({},we,Ne)),Te=V===I_?at:Re,it={top:Ce.top-Te.top+fe.top,bottom:Te.bottom-Ce.bottom+fe.bottom,left:Ce.left-Te.left+fe.left,right:Te.right-Ce.right+fe.right},Dt=i.modifiersData.offset;if(V===I_&&Dt){var Mt=Dt[f];Object.keys(it).forEach(function(Ut){var Ht=[wc,xc].indexOf(Ut)>=0?1:-1,Yt=[il,xc].indexOf(Ut)>=0?"y":"x";it[Ut]+=Mt[Yt]*Ht})}return it}function Z3(i,n){n===void 0&&(n={});var a=n,h=a.placement,f=a.boundary,g=a.rootBoundary,_=a.padding,c=a.flipVariations,A=a.allowedAutoPlacements,D=A===void 0?OM:A,O=Xy(h),z=O?c?zS:zS.filter(function(ee){return Xy(ee)===O}):Sv,V=z.filter(function(ee){return D.indexOf(ee)>=0});V.length===0&&(V=z);var Y=V.reduce(function(ee,ie){return ee[ie]=ov(i,{placement:ie,boundary:f,rootBoundary:g,padding:_})[Th(ie)],ee},{});return Object.keys(Y).sort(function(ee,ie){return Y[ee]-Y[ie]})}function q3(i){if(Th(i)===k2)return[];var n=cx(i);return[BS(i),n,BS(n)]}function Y3(i){var n=i.state,a=i.options,h=i.name;if(!n.modifiersData[h]._skip){for(var f=a.mainAxis,g=f===void 0?!0:f,_=a.altAxis,c=_===void 0?!0:_,A=a.fallbackPlacements,D=a.padding,O=a.boundary,z=a.rootBoundary,V=a.altBoundary,Y=a.flipVariations,ee=Y===void 0?!0:Y,ie=a.allowedAutoPlacements,q=n.options.placement,fe=Th(q),Ee=fe===q,we=A||(Ee||!ee?[cx(q)]:q3(q)),ze=[q].concat(we).reduce(function(St,Nt){return St.concat(Th(Nt)===k2?Z3(n,{placement:Nt,boundary:O,rootBoundary:z,padding:D,flipVariations:ee,allowedAutoPlacements:ie}):Nt)},[]),Ce=n.rects.reference,Re=n.rects.popper,Ne=new Map,at=!0,Te=ze[0],it=0;it<ze.length;it++){var Dt=ze[it],Mt=Th(Dt),Ut=Xy(Dt)===Yy,Ht=[il,xc].indexOf(Mt)>=0,Yt=Ht?"width":"height",Ve=ov(n,{placement:Dt,boundary:O,rootBoundary:z,altBoundary:V,padding:D}),ut=Ht?Ut?wc:rl:Ut?xc:il;Ce[Yt]>Re[Yt]&&(ut=cx(ut));var Tt=cx(ut),gt=[];if(g&&gt.push(Ve[Mt]<=0),c&&gt.push(Ve[ut]<=0,Ve[Tt]<=0),gt.every(function(St){return St})){Te=Dt,at=!1;break}Ne.set(Dt,gt)}if(at)for(var $t=ee?3:1,Le=function(Nt){var Zt=ze.find(function(Jt){var on=Ne.get(Jt);if(on)return on.slice(0,Nt).every(function(Sn){return Sn})});if(Zt)return Te=Zt,"break"},tt=$t;tt>0;tt--){var xt=Le(tt);if(xt==="break")break}n.placement!==Te&&(n.modifiersData[h]._skip=!0,n.placement=Te,n.reset=!0)}}const H3={name:"flip",enabled:!0,phase:"main",fn:Y3,requiresIfExists:["offset"],data:{_skip:!1}};function US(i,n,a){return a===void 0&&(a={x:0,y:0}),{top:i.top-n.height-a.y,right:i.right-n.width+a.x,bottom:i.bottom-n.height+a.y,left:i.left-n.width-a.x}}function GS(i){return[il,wc,xc,rl].some(function(n){return i[n]>=0})}function W3(i){var n=i.state,a=i.name,h=n.rects.reference,f=n.rects.popper,g=n.modifiersData.preventOverflow,_=ov(n,{elementContext:"reference"}),c=ov(n,{altBoundary:!0}),A=US(_,h),D=US(c,f,g),O=GS(A),z=GS(D);n.modifiersData[a]={referenceClippingOffsets:A,popperEscapeOffsets:D,isReferenceHidden:O,hasPopperEscaped:z},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":O,"data-popper-escaped":z})}const X3={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:W3};function Q3(i,n,a){var h=Th(i),f=[rl,il].indexOf(h)>=0?-1:1,g=typeof a=="function"?a(Object.assign({},n,{placement:i})):a,_=g[0],c=g[1];return _=_||0,c=(c||0)*f,[rl,wc].indexOf(h)>=0?{x:c,y:_}:{x:_,y:c}}function K3(i){var n=i.state,a=i.options,h=i.name,f=a.offset,g=f===void 0?[0,0]:f,_=OM.reduce(function(O,z){return O[z]=Q3(z,n.rects,g),O},{}),c=_[n.placement],A=c.x,D=c.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=A,n.modifiersData.popperOffsets.y+=D),n.modifiersData[h]=_}const J3={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:K3};function eL(i){var n=i.state,a=i.name;n.modifiersData[a]=BM({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})}const tL={name:"popperOffsets",enabled:!0,phase:"read",fn:eL,data:{}};function nL(i){return i==="x"?"y":"x"}function iL(i){var n=i.state,a=i.options,h=i.name,f=a.mainAxis,g=f===void 0?!0:f,_=a.altAxis,c=_===void 0?!1:_,A=a.boundary,D=a.rootBoundary,O=a.altBoundary,z=a.padding,V=a.tether,Y=V===void 0?!0:V,ee=a.tetherOffset,ie=ee===void 0?0:ee,q=ov(n,{boundary:A,rootBoundary:D,padding:z,altBoundary:O}),fe=Th(n.placement),Ee=Xy(n.placement),we=!Ee,ze=N2(fe),Ce=nL(ze),Re=n.modifiersData.popperOffsets,Ne=n.rects.reference,at=n.rects.popper,Te=typeof ie=="function"?ie(Object.assign({},n.rects,{placement:n.placement})):ie,it=typeof Te=="number"?{mainAxis:Te,altAxis:Te}:Object.assign({mainAxis:0,altAxis:0},Te),Dt=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,Mt={x:0,y:0};if(Re){if(g){var Ut,Ht=ze==="y"?il:rl,Yt=ze==="y"?xc:wc,Ve=ze==="y"?"height":"width",ut=Re[ze],Tt=ut+q[Ht],gt=ut-q[Yt],$t=Y?-at[Ve]/2:0,Le=Ee===Yy?Ne[Ve]:at[Ve],tt=Ee===Yy?-at[Ve]:-Ne[Ve],xt=n.elements.arrow,St=Y&&xt?L2(xt):{width:0,height:0},Nt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:PM(),Zt=Nt[Ht],Jt=Nt[Yt],on=X_(0,Ne[Ve],St[Ve]),Sn=we?Ne[Ve]/2-$t-on-Zt-it.mainAxis:Le-on-Zt-it.mainAxis,Ri=we?-Ne[Ve]/2+$t+on+Jt+it.mainAxis:tt+on+Jt+it.mainAxis,Tr=n.elements.arrow&&Ev(n.elements.arrow),Fi=Tr?ze==="y"?Tr.clientTop||0:Tr.clientLeft||0:0,ta=(Ut=Dt?.[ze])!=null?Ut:0,Nn=ut+Sn-ta-Fi,bn=ut+Ri-ta,Sr=X_(Y?vx(Tt,Nn):Tt,ut,Y?Bm(gt,bn):gt);Re[ze]=Sr,Mt[ze]=Sr-ut}if(c){var Xn,Za=ze==="x"?il:rl,qa=ze==="x"?xc:wc,Br=Re[Ce],na=Ce==="y"?"height":"width",la=Br+q[Za],js=Br-q[qa],ji=[il,rl].indexOf(fe)!==-1,Dr=(Xn=Dt?.[Ce])!=null?Xn:0,Fe=ji?la:Br-Ne[na]-at[na]-Dr+it.altAxis,re=ji?Br+Ne[na]+at[na]-Dr-it.altAxis:js,ae=Y&&ji?M3(Fe,Br,re):X_(Y?Fe:la,Br,Y?re:js);Re[Ce]=ae,Mt[Ce]=ae-Br}n.modifiersData[h]=Mt}}const rL={name:"preventOverflow",enabled:!0,phase:"main",fn:iL,requiresIfExists:["offset"]};function aL(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function sL(i){return i===jl(i)||!Sh(i)?P2(i):aL(i)}function oL(i){var n=i.getBoundingClientRect(),a=Hy(n.width)/i.offsetWidth||1,h=Hy(n.height)/i.offsetHeight||1;return a!==1||h!==1}function lL(i,n,a){a===void 0&&(a=!1);var h=Sh(n),f=Sh(n)&&oL(n),g=xp(n),_=Wy(i,f,a),c={scrollLeft:0,scrollTop:0},A={x:0,y:0};return(h||!h&&!a)&&((mp(n)!=="body"||F2(g))&&(c=sL(n)),Sh(n)?(A=Wy(n,!0),A.x+=n.clientLeft,A.y+=n.clientTop):g&&(A.x=z2(g))),{x:_.left+c.scrollLeft-A.x,y:_.top+c.scrollTop-A.y,width:_.width,height:_.height}}function cL(i){var n=new Map,a=new Set,h=[];i.forEach(function(g){n.set(g.name,g)});function f(g){a.add(g.name);var _=[].concat(g.requires||[],g.requiresIfExists||[]);_.forEach(function(c){if(!a.has(c)){var A=n.get(c);A&&f(A)}}),h.push(g)}return i.forEach(function(g){a.has(g.name)||f(g)}),h}function uL(i){var n=cL(i);return S3.reduce(function(a,h){return a.concat(n.filter(function(f){return f.phase===h}))},[])}function hL(i){var n;return function(){return n||(n=new Promise(function(a){Promise.resolve().then(function(){n=void 0,a(i())})})),n}}function dL(i){var n=i.reduce(function(a,h){var f=a[h.name];return a[h.name]=f?Object.assign({},f,h,{options:Object.assign({},f.options,h.options),data:Object.assign({},f.data,h.data)}):h,a},{});return Object.keys(n).map(function(a){return n[a]})}var $S={placement:"bottom",modifiers:[],strategy:"absolute"};function ZS(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return!n.some(function(h){return!(h&&typeof h.getBoundingClientRect=="function")})}function fL(i){i===void 0&&(i={});var n=i,a=n.defaultModifiers,h=a===void 0?[]:a,f=n.defaultOptions,g=f===void 0?$S:f;return function(c,A,D){D===void 0&&(D=g);var O={placement:"bottom",orderedModifiers:[],options:Object.assign({},$S,g),modifiersData:{},elements:{reference:c,popper:A},attributes:{},styles:{}},z=[],V=!1,Y={state:O,setOptions:function(fe){var Ee=typeof fe=="function"?fe(O.options):fe;ie(),O.options=Object.assign({},g,O.options,Ee),O.scrollParents={reference:qm(c)?Q_(c):c.contextElement?Q_(c.contextElement):[],popper:Q_(A)};var we=uL(dL([].concat(h,O.options.modifiers)));return O.orderedModifiers=we.filter(function(ze){return ze.enabled}),ee(),Y.update()},forceUpdate:function(){if(!V){var fe=O.elements,Ee=fe.reference,we=fe.popper;if(ZS(Ee,we)){O.rects={reference:lL(Ee,Ev(we),O.options.strategy==="fixed"),popper:L2(we)},O.reset=!1,O.placement=O.options.placement,O.orderedModifiers.forEach(function(it){return O.modifiersData[it.name]=Object.assign({},it.data)});for(var ze=0;ze<O.orderedModifiers.length;ze++){if(O.reset===!0){O.reset=!1,ze=-1;continue}var Ce=O.orderedModifiers[ze],Re=Ce.fn,Ne=Ce.options,at=Ne===void 0?{}:Ne,Te=Ce.name;typeof Re=="function"&&(O=Re({state:O,options:at,name:Te,instance:Y})||O)}}}},update:hL(function(){return new Promise(function(q){Y.forceUpdate(),q(O)})}),destroy:function(){ie(),V=!0}};if(!ZS(c,A))return Y;Y.setOptions(D).then(function(q){!V&&D.onFirstUpdate&&D.onFirstUpdate(q)});function ee(){O.orderedModifiers.forEach(function(q){var fe=q.name,Ee=q.options,we=Ee===void 0?{}:Ee,ze=q.effect;if(typeof ze=="function"){var Ce=ze({state:O,name:fe,instance:Y,options:we}),Re=function(){};z.push(Ce||Re)}})}function ie(){z.forEach(function(q){return q()}),z=[]}return Y}}const pL=fL({defaultModifiers:[X3,tL,N3,z3,J3,H3,rL,R3]}),mL=["enabled","placement","strategy","modifiers"];function gL(i,n){if(i==null)return{};var a={};for(var h in i)if({}.hasOwnProperty.call(i,h)){if(n.indexOf(h)>=0)continue;a[h]=i[h]}return a}const yL={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},_L={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:i})=>()=>{const{reference:n,popper:a}=i.elements;if("removeAttribute"in n){const h=(n.getAttribute("aria-describedby")||"").split(",").filter(f=>f.trim()!==a.id);h.length?n.setAttribute("aria-describedby",h.join(",")):n.removeAttribute("aria-describedby")}},fn:({state:i})=>{var n;const{popper:a,reference:h}=i.elements,f=(n=a.getAttribute("role"))==null?void 0:n.toLowerCase();if(a.id&&f==="tooltip"&&"setAttribute"in h){const g=h.getAttribute("aria-describedby");if(g&&g.split(",").indexOf(a.id)!==-1)return;h.setAttribute("aria-describedby",g?`${g},${a.id}`:a.id)}}},vL=[];function bL(i,n,a={}){let{enabled:h=!0,placement:f="bottom",strategy:g="absolute",modifiers:_=vL}=a,c=gL(a,mL);const A=te.useRef(_),D=te.useRef(),O=te.useCallback(()=>{var q;(q=D.current)==null||q.update()},[]),z=te.useCallback(()=>{var q;(q=D.current)==null||q.forceUpdate()},[]),[V,Y]=d3(te.useState({placement:f,update:O,forceUpdate:z,attributes:{},styles:{popper:{},arrow:{}}})),ee=te.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:q})=>{const fe={},Ee={};Object.keys(q.elements).forEach(we=>{fe[we]=q.styles[we],Ee[we]=q.attributes[we]}),Y({state:q,styles:fe,attributes:Ee,update:O,forceUpdate:z,placement:q.placement})}}),[O,z,Y]),ie=te.useMemo(()=>(W_(A.current,_)||(A.current=_),A.current),[_]);return te.useEffect(()=>{!D.current||!h||D.current.setOptions({placement:f,strategy:g,modifiers:[...ie,ee,yL]})},[g,f,ee,h,ie]),te.useEffect(()=>{if(!(!h||i==null||n==null))return D.current=pL(i,n,Object.assign({},c,{placement:f,strategy:g,modifiers:[...ie,_L,ee]})),()=>{D.current!=null&&(D.current.destroy(),D.current=void 0,Y(q=>Object.assign({},q,{attributes:{},styles:{popper:{}}})))}},[h,i,n]),V}function bx(i,n){if(i.contains)return i.contains(n);if(i.compareDocumentPosition)return i===n||!!(i.compareDocumentPosition(n)&16)}var iw,qS;function xL(){if(qS)return iw;qS=1;var i=function(){};return iw=i,iw}var wL=xL();const TL=eg(wL),YS=()=>{};function SL(i){return i.button===0}function EL(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}const ux=i=>i&&("current"in i?i.current:i),HS={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function AL(i,n=YS,{disabled:a,clickTrigger:h="click"}={}){const f=te.useRef(!1),g=te.useRef(!1),_=te.useCallback(D=>{const O=ux(i);TL(!!O,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),f.current=!O||EL(D)||!SL(D)||!!bx(O,D.target)||g.current,g.current=!1},[i]),c=yh(D=>{const O=ux(i);O&&bx(O,D.target)?g.current=!0:g.current=!1}),A=yh(D=>{f.current||n(D)});te.useEffect(()=>{var D,O;if(a||i==null)return;const z=u0(ux(i)),V=z.defaultView||window;let Y=(D=V.event)!=null?D:(O=V.parent)==null?void 0:O.event,ee=null;HS[h]&&(ee=Pd(z,HS[h],c,!0));const ie=Pd(z,h,_,!0),q=Pd(z,h,Ee=>{if(Ee===Y){Y=void 0;return}A(Ee)});let fe=[];return"ontouchstart"in z.documentElement&&(fe=[].slice.call(z.body.children).map(Ee=>Pd(Ee,"mousemove",YS))),()=>{ee?.(),ie(),q(),fe.forEach(Ee=>Ee())}},[i,a,h,_,c,A])}function ML(i){const n={};return Array.isArray(i)?(i?.forEach(a=>{n[a.name]=a}),n):i||n}function CL(i={}){return Array.isArray(i)?i:Object.keys(i).map(n=>(i[n].name=n,i[n]))}function DL({enabled:i,enableEvents:n,placement:a,flip:h,offset:f,fixed:g,containerPadding:_,arrowElement:c,popperConfig:A={}}){var D,O,z,V;const Y=ML(A.modifiers);return Object.assign({},A,{placement:a,enabled:i,strategy:g?"fixed":A.strategy,modifiers:CL(Object.assign({},Y,{eventListeners:{enabled:n,options:(D=Y.eventListeners)==null?void 0:D.options},preventOverflow:Object.assign({},Y.preventOverflow,{options:Object.assign({padding:_},(O=Y.preventOverflow)==null?void 0:O.options)}),offset:{options:Object.assign({offset:f},(z=Y.offset)==null?void 0:z.options)},arrow:Object.assign({},Y.arrow,{enabled:!!c,options:Object.assign({},(V=Y.arrow)==null?void 0:V.options,{element:c})}),flip:Object.assign({enabled:!!h},Y.flip)}))})}const IL=te.createContext(null),RL="data-rr-ui-";function kL(i){return`${RL}${i}`}const VM=te.createContext(d0?window:void 0);VM.Provider;function j2(){return te.useContext(VM)}const OL=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",LL=typeof document<"u",UM=LL||OL?te.useLayoutEffect:te.useEffect,Av=te.createContext(null);Av.displayName="NavbarContext";const NL={type:Ud.string,tooltip:Ud.bool,as:Ud.elementType},e1=te.forwardRef(({as:i="div",className:n,type:a="valid",tooltip:h=!1,...f},g)=>Q.jsx(i,{...f,ref:g,className:yn(n,`${a}-${h?"tooltip":"feedback"}`)}));e1.displayName="Feedback";e1.propTypes=NL;const Xd=te.createContext({}),B2=te.forwardRef(({id:i,bsPrefix:n,className:a,type:h="checkbox",isValid:f=!1,isInvalid:g=!1,as:_="input",...c},A)=>{const{controlId:D}=te.useContext(Xd);return n=kn(n,"form-check-input"),Q.jsx(_,{...c,ref:A,type:h,id:i||D,className:yn(a,n,f&&"is-valid",g&&"is-invalid")})});B2.displayName="FormCheckInput";const xx=te.forwardRef(({bsPrefix:i,className:n,htmlFor:a,...h},f)=>{const{controlId:g}=te.useContext(Xd);return i=kn(i,"form-check-label"),Q.jsx("label",{...h,ref:f,htmlFor:a||g,className:yn(n,i)})});xx.displayName="FormCheckLabel";const GM=te.forwardRef(({id:i,bsPrefix:n,bsSwitchPrefix:a,inline:h=!1,reverse:f=!1,disabled:g=!1,isValid:_=!1,isInvalid:c=!1,feedbackTooltip:A=!1,feedback:D,feedbackType:O,className:z,style:V,title:Y="",type:ee="checkbox",label:ie,children:q,as:fe="input",...Ee},we)=>{n=kn(n,"form-check"),a=kn(a,"form-switch");const{controlId:ze}=te.useContext(Xd),Ce=te.useMemo(()=>({controlId:i||ze}),[ze,i]),Re=!q&&ie!=null&&ie!==!1||c3(q,xx),Ne=Q.jsx(B2,{...Ee,type:ee==="switch"?"checkbox":ee,ref:we,isValid:_,isInvalid:c,disabled:g,as:fe});return Q.jsx(Xd.Provider,{value:Ce,children:Q.jsx("div",{style:V,className:yn(z,Re&&n,h&&`${n}-inline`,f&&`${n}-reverse`,ee==="switch"&&a),children:q||Q.jsxs(Q.Fragment,{children:[Ne,Re&&Q.jsx(xx,{title:Y,children:ie}),D&&Q.jsx(e1,{type:O,tooltip:A,children:D})]})})})});GM.displayName="FormCheck";const wx=Object.assign(GM,{Input:B2,Label:xx}),$M=te.forwardRef(({bsPrefix:i,type:n,size:a,htmlSize:h,id:f,className:g,isValid:_=!1,isInvalid:c=!1,plaintext:A,readOnly:D,as:O="input",...z},V)=>{const{controlId:Y}=te.useContext(Xd);return i=kn(i,"form-control"),Q.jsx(O,{...z,type:n,size:h,ref:V,readOnly:D,id:f||Y,className:yn(g,A?`${i}-plaintext`:i,a&&`${i}-${a}`,n==="color"&&`${i}-color`,_&&"is-valid",c&&"is-invalid")})});$M.displayName="FormControl";const PL=Object.assign($M,{Feedback:e1}),ZM=te.forwardRef(({className:i,bsPrefix:n,as:a="div",...h},f)=>(n=kn(n,"form-floating"),Q.jsx(a,{ref:f,className:yn(i,n),...h})));ZM.displayName="FormFloating";const V2=te.forwardRef(({controlId:i,as:n="div",...a},h)=>{const f=te.useMemo(()=>({controlId:i}),[i]);return Q.jsx(Xd.Provider,{value:f,children:Q.jsx(n,{...a,ref:h})})});V2.displayName="FormGroup";const qM=te.forwardRef(({as:i="label",bsPrefix:n,column:a=!1,visuallyHidden:h=!1,className:f,htmlFor:g,..._},c)=>{const{controlId:A}=te.useContext(Xd);n=kn(n,"form-label");let D="col-form-label";typeof a=="string"&&(D=`${D} ${D}-${a}`);const O=yn(f,n,h&&"visually-hidden",a&&D);return g=g||A,a?Q.jsx(RM,{ref:c,as:"label",className:O,htmlFor:g,..._}):Q.jsx(i,{ref:c,className:O,htmlFor:g,..._})});qM.displayName="FormLabel";const YM=te.forwardRef(({bsPrefix:i,className:n,id:a,...h},f)=>{const{controlId:g}=te.useContext(Xd);return i=kn(i,"form-range"),Q.jsx("input",{...h,type:"range",ref:f,className:yn(n,i),id:a||g})});YM.displayName="FormRange";const HM=te.forwardRef(({bsPrefix:i,size:n,htmlSize:a,className:h,isValid:f=!1,isInvalid:g=!1,id:_,...c},A)=>{const{controlId:D}=te.useContext(Xd);return i=kn(i,"form-select"),Q.jsx("select",{...c,size:a,ref:A,className:yn(h,i,n&&`${i}-${n}`,f&&"is-valid",g&&"is-invalid"),id:_||D})});HM.displayName="FormSelect";const WM=te.forwardRef(({bsPrefix:i,className:n,as:a="small",muted:h,...f},g)=>(i=kn(i,"form-text"),Q.jsx(a,{...f,ref:g,className:yn(n,i,h&&"text-muted")})));WM.displayName="FormText";const XM=te.forwardRef((i,n)=>Q.jsx(wx,{...i,ref:n,type:"switch"}));XM.displayName="Switch";const zL=Object.assign(XM,{Input:wx.Input,Label:wx.Label}),QM=te.forwardRef(({bsPrefix:i,className:n,children:a,controlId:h,label:f,...g},_)=>(i=kn(i,"form-floating"),Q.jsxs(V2,{ref:_,className:yn(n,i),controlId:h,...g,children:[a,Q.jsx("label",{htmlFor:h,children:f})]})));QM.displayName="FloatingLabel";const FL={_ref:Ud.any,validated:Ud.bool,as:Ud.elementType},U2=te.forwardRef(({className:i,validated:n,as:a="form",...h},f)=>Q.jsx(a,{...h,ref:f,className:yn(i,n&&"was-validated")}));U2.displayName="Form";U2.propTypes=FL;const zi=Object.assign(U2,{Group:V2,Control:PL,Floating:ZM,Check:wx,Switch:zL,Label:qM,Text:WM,Range:YM,Select:HM,FloatingLabel:QM}),WS=i=>!i||typeof i=="function"?i:n=>{i.current=n};function jL(i,n){const a=WS(i),h=WS(n);return f=>{a&&a(f),h&&h(f)}}function t1(i,n){return te.useMemo(()=>jL(i,n),[i,n])}var Qb;function XS(i){if((!Qb&&Qb!==0||i)&&d0){var n=document.createElement("div");n.style.position="absolute",n.style.top="-9999px",n.style.width="50px",n.style.height="50px",n.style.overflow="scroll",document.body.appendChild(n),Qb=n.offsetWidth-n.clientWidth,document.body.removeChild(n)}return Qb}function BL(){return te.useState(null)}function rw(i){i===void 0&&(i=u0());try{var n=i.activeElement;return!n||!n.nodeName?null:n}catch{return i.body}}function VL(i){const n=te.useRef(i);return n.current=i,n}function UL(i){const n=VL(i);te.useEffect(()=>()=>n.current(),[])}function GL(i=document){const n=i.defaultView;return Math.abs(n.innerWidth-i.documentElement.clientWidth)}const QS=kL("modal-open");class G2{constructor({ownerDocument:n,handleContainerOverflow:a=!0,isRTL:h=!1}={}){this.handleContainerOverflow=a,this.isRTL=h,this.modals=[],this.ownerDocument=n}getScrollbarWidth(){return GL(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(n){}removeModalAttributes(n){}setContainerStyle(n){const a={overflow:"hidden"},h=this.isRTL?"paddingLeft":"paddingRight",f=this.getElement();n.style={overflow:f.style.overflow,[h]:f.style[h]},n.scrollBarWidth&&(a[h]=`${parseInt(Vd(f,h)||"0",10)+n.scrollBarWidth}px`),f.setAttribute(QS,""),Vd(f,a)}reset(){[...this.modals].forEach(n=>this.remove(n))}removeContainerStyle(n){const a=this.getElement();a.removeAttribute(QS),Object.assign(a.style,n.style)}add(n){let a=this.modals.indexOf(n);return a!==-1||(a=this.modals.length,this.modals.push(n),this.setModalAttributes(n),a!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),a}remove(n){const a=this.modals.indexOf(n);a!==-1&&(this.modals.splice(a,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(n))}isTopModal(n){return!!this.modals.length&&this.modals[this.modals.length-1]===n}}const aw=(i,n)=>d0?i==null?(n||u0()).body:(typeof i=="function"&&(i=i()),i&&"current"in i&&(i=i.current),i&&("nodeType"in i||i.getBoundingClientRect)?i:null):null;function Pw(i,n){const a=j2(),[h,f]=te.useState(()=>aw(i,a?.document));if(!h){const g=aw(i);g&&f(g)}return te.useEffect(()=>{},[n,h]),te.useEffect(()=>{const g=aw(i);g!==h&&f(g)},[i,h]),h}function $L({children:i,in:n,onExited:a,mountOnEnter:h,unmountOnExit:f}){const g=te.useRef(null),_=te.useRef(n),c=yh(a);te.useEffect(()=>{n?_.current=!0:c(g.current)},[n,c]);const A=t1(g,h0(i)),D=te.cloneElement(i,{ref:A});return n?D:f||!_.current&&h?null:D}const ZL=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function qL(i,n){if(i==null)return{};var a={};for(var h in i)if({}.hasOwnProperty.call(i,h)){if(n.indexOf(h)>=0)continue;a[h]=i[h]}return a}function YL(i){let{onEnter:n,onEntering:a,onEntered:h,onExit:f,onExiting:g,onExited:_,addEndListener:c,children:A}=i,D=qL(i,ZL);const O=te.useRef(null),z=t1(O,h0(A)),V=ze=>Ce=>{ze&&O.current&&ze(O.current,Ce)},Y=te.useCallback(V(n),[n]),ee=te.useCallback(V(a),[a]),ie=te.useCallback(V(h),[h]),q=te.useCallback(V(f),[f]),fe=te.useCallback(V(g),[g]),Ee=te.useCallback(V(_),[_]),we=te.useCallback(V(c),[c]);return Object.assign({},D,{nodeRef:O},n&&{onEnter:Y},a&&{onEntering:ee},h&&{onEntered:ie},f&&{onExit:q},g&&{onExiting:fe},_&&{onExited:Ee},c&&{addEndListener:we},{children:typeof A=="function"?(ze,Ce)=>A(ze,Object.assign({},Ce,{ref:z})):te.cloneElement(A,{ref:z})})}const HL=["component"];function WL(i,n){if(i==null)return{};var a={};for(var h in i)if({}.hasOwnProperty.call(i,h)){if(n.indexOf(h)>=0)continue;a[h]=i[h]}return a}const XL=te.forwardRef((i,n)=>{let{component:a}=i,h=WL(i,HL);const f=YL(h);return Q.jsx(a,Object.assign({ref:n},f))});function QL({in:i,onTransition:n}){const a=te.useRef(null),h=te.useRef(!0),f=yh(n);return LS(()=>{if(!a.current)return;let g=!1;return f({in:i,element:a.current,initial:h.current,isStale:()=>g}),()=>{g=!0}},[i,f]),LS(()=>(h.current=!1,()=>{h.current=!0}),[]),a}function KL({children:i,in:n,onExited:a,onEntered:h,transition:f}){const[g,_]=te.useState(!n);n&&g&&_(!1);const c=QL({in:!!n,onTransition:D=>{const O=()=>{D.isStale()||(D.in?h?.(D.element,D.initial):(_(!0),a?.(D.element)))};Promise.resolve(f(D)).then(O,z=>{throw D.in||_(!0),z})}}),A=t1(c,h0(i));return g&&!n?null:te.cloneElement(i,{ref:A})}function zw(i,n,a){return i?Q.jsx(XL,Object.assign({},a,{component:i})):n?Q.jsx(KL,Object.assign({},a,{transition:n})):Q.jsx($L,Object.assign({},a))}const JL=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function eN(i,n){if(i==null)return{};var a={};for(var h in i)if({}.hasOwnProperty.call(i,h)){if(n.indexOf(h)>=0)continue;a[h]=i[h]}return a}let sw;function tN(i){return sw||(sw=new G2({ownerDocument:i?.document})),sw}function nN(i){const n=j2(),a=i||tN(n),h=te.useRef({dialog:null,backdrop:null});return Object.assign(h.current,{add:()=>a.add(h.current),remove:()=>a.remove(h.current),isTopModal:()=>a.isTopModal(h.current),setDialogRef:te.useCallback(f=>{h.current.dialog=f},[]),setBackdropRef:te.useCallback(f=>{h.current.backdrop=f},[])})}const KM=te.forwardRef((i,n)=>{let{show:a=!1,role:h="dialog",className:f,style:g,children:_,backdrop:c=!0,keyboard:A=!0,onBackdropClick:D,onEscapeKeyDown:O,transition:z,runTransition:V,backdropTransition:Y,runBackdropTransition:ee,autoFocus:ie=!0,enforceFocus:q=!0,restoreFocus:fe=!0,restoreFocusOptions:Ee,renderDialog:we,renderBackdrop:ze=bn=>Q.jsx("div",Object.assign({},bn)),manager:Ce,container:Re,onShow:Ne,onHide:at=()=>{},onExit:Te,onExited:it,onExiting:Dt,onEnter:Mt,onEntering:Ut,onEntered:Ht}=i,Yt=eN(i,JL);const Ve=j2(),ut=Pw(Re),Tt=nN(Ce),gt=DM(),$t=KO(a),[Le,tt]=te.useState(!a),xt=te.useRef(null);te.useImperativeHandle(n,()=>Tt,[Tt]),d0&&!$t&&a&&(xt.current=rw(Ve?.document)),a&&Le&&tt(!1);const St=yh(()=>{if(Tt.add(),Ri.current=Pd(document,"keydown",on),Sn.current=Pd(document,"focus",()=>setTimeout(Zt),!0),Ne&&Ne(),ie){var bn,Sr;const Xn=rw((bn=(Sr=Tt.dialog)==null?void 0:Sr.ownerDocument)!=null?bn:Ve?.document);Tt.dialog&&Xn&&!bx(Tt.dialog,Xn)&&(xt.current=Xn,Tt.dialog.focus())}}),Nt=yh(()=>{if(Tt.remove(),Ri.current==null||Ri.current(),Sn.current==null||Sn.current(),fe){var bn;(bn=xt.current)==null||bn.focus==null||bn.focus(Ee),xt.current=null}});te.useEffect(()=>{!a||!ut||St()},[a,ut,St]),te.useEffect(()=>{Le&&Nt()},[Le,Nt]),UL(()=>{Nt()});const Zt=yh(()=>{if(!q||!gt()||!Tt.isTopModal())return;const bn=rw(Ve?.document);Tt.dialog&&bn&&!bx(Tt.dialog,bn)&&Tt.dialog.focus()}),Jt=yh(bn=>{bn.target===bn.currentTarget&&(D?.(bn),c===!0&&at())}),on=yh(bn=>{A&&vM(bn)&&Tt.isTopModal()&&(O?.(bn),bn.defaultPrevented||at())}),Sn=te.useRef(),Ri=te.useRef(),Tr=(...bn)=>{tt(!0),it?.(...bn)};if(!ut)return null;const Fi=Object.assign({role:h,ref:Tt.setDialogRef,"aria-modal":h==="dialog"?!0:void 0},Yt,{style:g,className:f,tabIndex:-1});let ta=we?we(Fi):Q.jsx("div",Object.assign({},Fi,{children:te.cloneElement(_,{role:"document"})}));ta=zw(z,V,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!a,onExit:Te,onExiting:Dt,onExited:Tr,onEnter:Mt,onEntering:Ut,onEntered:Ht,children:ta});let Nn=null;return c&&(Nn=ze({ref:Tt.setBackdropRef,onClick:Jt}),Nn=zw(Y,ee,{in:!!a,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Nn})),Q.jsx(Q.Fragment,{children:Pm.createPortal(Q.jsxs(Q.Fragment,{children:[Nn,ta]}),ut)})});KM.displayName="Modal";const JM=Object.assign(KM,{Manager:G2});function Fw(i,n){return i.classList?!!n&&i.classList.contains(n):(" "+(i.className.baseVal||i.className)+" ").indexOf(" "+n+" ")!==-1}function iN(i,n){i.classList?i.classList.add(n):Fw(i,n)||(typeof i.className=="string"?i.className=i.className+" "+n:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+n))}function KS(i,n){return i.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function rN(i,n){i.classList?i.classList.remove(n):typeof i.className=="string"?i.className=KS(i.className,n):i.setAttribute("class",KS(i.className&&i.className.baseVal||"",n))}const Ry={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class eC extends G2{adjustAndStore(n,a,h){const f=a.style[n];a.dataset[n]=f,Vd(a,{[n]:`${parseFloat(Vd(a,n))+h}px`})}restore(n,a){const h=a.dataset[n];h!==void 0&&(delete a.dataset[n],Vd(a,{[n]:h}))}setContainerStyle(n){super.setContainerStyle(n);const a=this.getElement();if(iN(a,"modal-open"),!n.scrollBarWidth)return;const h=this.isRTL?"paddingLeft":"paddingRight",f=this.isRTL?"marginLeft":"marginRight";Iy(a,Ry.FIXED_CONTENT).forEach(g=>this.adjustAndStore(h,g,n.scrollBarWidth)),Iy(a,Ry.STICKY_CONTENT).forEach(g=>this.adjustAndStore(f,g,-n.scrollBarWidth)),Iy(a,Ry.NAVBAR_TOGGLER).forEach(g=>this.adjustAndStore(f,g,n.scrollBarWidth))}removeContainerStyle(n){super.removeContainerStyle(n);const a=this.getElement();rN(a,"modal-open");const h=this.isRTL?"paddingLeft":"paddingRight",f=this.isRTL?"marginLeft":"marginRight";Iy(a,Ry.FIXED_CONTENT).forEach(g=>this.restore(h,g)),Iy(a,Ry.STICKY_CONTENT).forEach(g=>this.restore(f,g)),Iy(a,Ry.NAVBAR_TOGGLER).forEach(g=>this.restore(f,g))}}let ow;function tC(i){return ow||(ow=new eC(i)),ow}const nC=te.forwardRef(({className:i,bsPrefix:n,as:a="div",...h},f)=>(n=kn(n,"modal-body"),Q.jsx(a,{ref:f,className:yn(i,n),...h})));nC.displayName="ModalBody";const $2=te.createContext({onHide(){}}),Z2=te.forwardRef(({bsPrefix:i,className:n,contentClassName:a,centered:h,size:f,fullscreen:g,children:_,scrollable:c,...A},D)=>{i=kn(i,"modal");const O=`${i}-dialog`,z=typeof g=="string"?`${i}-fullscreen-${g}`:`${i}-fullscreen`;return Q.jsx("div",{...A,ref:D,className:yn(O,n,f&&`${i}-${f}`,h&&`${O}-centered`,c&&`${O}-scrollable`,g&&z),children:Q.jsx("div",{className:yn(`${i}-content`,a),children:_})})});Z2.displayName="ModalDialog";const iC=te.forwardRef(({className:i,bsPrefix:n,as:a="div",...h},f)=>(n=kn(n,"modal-footer"),Q.jsx(a,{ref:f,className:yn(i,n),...h})));iC.displayName="ModalFooter";const q2=te.forwardRef(({closeLabel:i="Close",closeVariant:n,closeButton:a=!1,onHide:h,children:f,...g},_)=>{const c=te.useContext($2),A=Zm(()=>{c?.onHide(),h?.()});return Q.jsxs("div",{ref:_,...g,children:[f,a&&Q.jsx(I2,{"aria-label":i,variant:n,onClick:A})]})});q2.displayName="AbstractModalHeader";const rC=te.forwardRef(({bsPrefix:i,className:n,closeLabel:a="Close",closeButton:h=!1,...f},g)=>(i=kn(i,"modal-header"),Q.jsx(q2,{ref:g,...f,className:yn(n,i),closeLabel:a,closeButton:h})));rC.displayName="ModalHeader";const aN=CM("h4"),aC=te.forwardRef(({className:i,bsPrefix:n,as:a=aN,...h},f)=>(n=kn(n,"modal-title"),Q.jsx(a,{ref:f,className:yn(i,n),...h})));aC.displayName="ModalTitle";function sN(i){return Q.jsx(qy,{...i,timeout:null})}function oN(i){return Q.jsx(qy,{...i,timeout:null})}const sC=te.forwardRef(({bsPrefix:i,className:n,style:a,dialogClassName:h,contentClassName:f,children:g,dialogAs:_=Z2,"data-bs-theme":c,"aria-labelledby":A,"aria-describedby":D,"aria-label":O,show:z=!1,animation:V=!0,backdrop:Y=!0,keyboard:ee=!0,onEscapeKeyDown:ie,onShow:q,onHide:fe,container:Ee,autoFocus:we=!0,enforceFocus:ze=!0,restoreFocus:Ce=!0,restoreFocusOptions:Re,onEntered:Ne,onExit:at,onExiting:Te,onEnter:it,onEntering:Dt,onExited:Mt,backdropClassName:Ut,manager:Ht,...Yt},Ve)=>{const[ut,Tt]=te.useState({}),[gt,$t]=te.useState(!1),Le=te.useRef(!1),tt=te.useRef(!1),xt=te.useRef(null),[St,Nt]=BL(),Zt=A2(Ve,Nt),Jt=Zm(fe),on=S2();i=kn(i,"modal");const Sn=te.useMemo(()=>({onHide:Jt}),[Jt]);function Ri(){return Ht||tC({isRTL:on})}function Tr(Fe){if(!d0)return;const re=Ri().getScrollbarWidth()>0,ae=Fe.scrollHeight>u0(Fe).documentElement.clientHeight;Tt({paddingRight:re&&!ae?XS():void 0,paddingLeft:!re&&ae?XS():void 0})}const Fi=Zm(()=>{St&&Tr(St.dialog)});l3(()=>{kw(window,"resize",Fi),xt.current==null||xt.current()});const ta=()=>{Le.current=!0},Nn=Fe=>{Le.current&&St&&Fe.target===St.dialog&&(tt.current=!0),Le.current=!1},bn=()=>{$t(!0),xt.current=xM(St.dialog,()=>{$t(!1)})},Sr=Fe=>{Fe.target===Fe.currentTarget&&bn()},Xn=Fe=>{if(Y==="static"){Sr(Fe);return}if(tt.current||Fe.target!==Fe.currentTarget){tt.current=!1;return}fe?.()},Za=Fe=>{ee?ie?.(Fe):(Fe.preventDefault(),Y==="static"&&bn())},qa=(Fe,re)=>{Fe&&Tr(Fe),it?.(Fe,re)},Br=Fe=>{xt.current==null||xt.current(),at?.(Fe)},na=(Fe,re)=>{Dt?.(Fe,re),bM(window,"resize",Fi)},la=Fe=>{Fe&&(Fe.style.display=""),Mt?.(Fe),kw(window,"resize",Fi)},js=te.useCallback(Fe=>Q.jsx("div",{...Fe,className:yn(`${i}-backdrop`,Ut,!V&&"show")}),[V,Ut,i]),ji={...a,...ut};ji.display="block";const Dr=Fe=>Q.jsx("div",{role:"dialog",...Fe,style:ji,className:yn(n,i,gt&&`${i}-static`,!V&&"show"),onClick:Y?Xn:void 0,onMouseUp:Nn,"data-bs-theme":c,"aria-label":O,"aria-labelledby":A,"aria-describedby":D,children:Q.jsx(_,{...Yt,onMouseDown:ta,className:h,contentClassName:f,children:g})});return Q.jsx($2.Provider,{value:Sn,children:Q.jsx(JM,{show:z,ref:Zt,backdrop:Y,container:Ee,keyboard:!0,autoFocus:we,enforceFocus:ze,restoreFocus:Ce,restoreFocusOptions:Re,onEscapeKeyDown:Za,onShow:q,onHide:fe,onEnter:qa,onEntering:na,onEntered:Ne,onExit:Br,onExiting:Te,onExited:la,manager:Ri(),transition:V?sN:void 0,backdropTransition:V?oN:void 0,renderBackdrop:js,renderDialog:Dr})})});sC.displayName="Modal";const Kb=Object.assign(sC,{Body:nC,Header:rC,Title:aC,Footer:iC,Dialog:Z2,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),oC=te.forwardRef(({bsPrefix:i,className:n,as:a,...h},f)=>{i=kn(i,"navbar-brand");const g=a||(h.href?"a":"span");return Q.jsx(g,{...h,ref:f,className:yn(n,i)})});oC.displayName="NavbarBrand";const lC=te.forwardRef(({children:i,bsPrefix:n,...a},h)=>{n=kn(n,"navbar-collapse");const f=te.useContext(Av);return Q.jsx(M2,{in:!!(f&&f.expanded),...a,children:Q.jsx("div",{ref:h,className:n,children:i})})});lC.displayName="NavbarCollapse";const cC=te.forwardRef(({bsPrefix:i,className:n,children:a,label:h="Toggle navigation",as:f="button",onClick:g,..._},c)=>{i=kn(i,"navbar-toggler");const{onToggle:A,expanded:D}=te.useContext(Av)||{},O=Zm(z=>{g&&g(z),A&&A()});return f==="button"&&(_.type="button"),Q.jsx(f,{..._,ref:c,onClick:O,"aria-label":h,className:yn(n,i,!D&&"collapsed"),children:a||Q.jsx("span",{className:`${i}-icon`})})});cC.displayName="NavbarToggle";const jw=new WeakMap,JS=(i,n)=>{if(!i||!n)return;const a=jw.get(n)||new Map;jw.set(n,a);let h=a.get(i);return h||(h=n.matchMedia(i),h.refCount=0,a.set(h.media,h)),h};function lN(i,n=typeof window>"u"?void 0:window){const a=JS(i,n),[h,f]=te.useState(()=>a?a.matches:!1);return UM(()=>{let g=JS(i,n);if(!g)return f(!1);let _=jw.get(n);const c=()=>{f(g.matches)};return g.refCount++,g.addListener(c),c(),()=>{g.removeListener(c),g.refCount--,g.refCount<=0&&_?.delete(g.media),g=void 0}},[i]),h}function cN(i){const n=Object.keys(i);function a(c,A){return c===A?A:c?`${c} and ${A}`:A}function h(c){return n[Math.min(n.indexOf(c)+1,n.length-1)]}function f(c){const A=h(c);let D=i[A];return typeof D=="number"?D=`${D-.2}px`:D=`calc(${D} - 0.2px)`,`(max-width: ${D})`}function g(c){let A=i[c];return typeof A=="number"&&(A=`${A}px`),`(min-width: ${A})`}function _(c,A,D){let O;typeof c=="object"?(O=c,D=A,A=!0):(A=A||!0,O={[c]:A});let z=te.useMemo(()=>Object.entries(O).reduce((V,[Y,ee])=>((ee==="up"||ee===!0)&&(V=a(V,g(Y))),(ee==="down"||ee===!0)&&(V=a(V,f(Y))),V),""),[JSON.stringify(O)]);return lN(z,D)}return _}const uN=cN({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),uC=te.forwardRef(({className:i,bsPrefix:n,as:a="div",...h},f)=>(n=kn(n,"offcanvas-body"),Q.jsx(a,{ref:f,className:yn(i,n),...h})));uC.displayName="OffcanvasBody";const hN={[vu]:"show",[kd]:"show"},hC=te.forwardRef(({bsPrefix:i,className:n,children:a,in:h=!1,mountOnEnter:f=!1,unmountOnExit:g=!1,appear:_=!1,...c},A)=>(i=kn(i,"offcanvas"),Q.jsx(Qx,{ref:A,addEndListener:E2,in:h,mountOnEnter:f,unmountOnExit:g,appear:_,...c,childRef:h0(a),children:(D,O)=>te.cloneElement(a,{...O,className:yn(n,a.props.className,(D===vu||D===av)&&`${i}-toggling`,hN[D])})})));hC.displayName="OffcanvasToggling";const dC=te.forwardRef(({bsPrefix:i,className:n,closeLabel:a="Close",closeButton:h=!1,...f},g)=>(i=kn(i,"offcanvas-header"),Q.jsx(q2,{ref:g,...f,className:yn(n,i),closeLabel:a,closeButton:h})));dC.displayName="OffcanvasHeader";const dN=CM("h5"),fC=te.forwardRef(({className:i,bsPrefix:n,as:a=dN,...h},f)=>(n=kn(n,"offcanvas-title"),Q.jsx(a,{ref:f,className:yn(i,n),...h})));fC.displayName="OffcanvasTitle";function fN(i){return Q.jsx(hC,{...i})}function pN(i){return Q.jsx(qy,{...i})}const pC=te.forwardRef(({bsPrefix:i,className:n,children:a,"aria-labelledby":h,placement:f="start",responsive:g,show:_=!1,backdrop:c=!0,keyboard:A=!0,scroll:D=!1,onEscapeKeyDown:O,onShow:z,onHide:V,container:Y,autoFocus:ee=!0,enforceFocus:ie=!0,restoreFocus:q=!0,restoreFocusOptions:fe,onEntered:Ee,onExit:we,onExiting:ze,onEnter:Ce,onEntering:Re,onExited:Ne,backdropClassName:at,manager:Te,renderStaticNode:it=!1,...Dt},Mt)=>{const Ut=te.useRef();i=kn(i,"offcanvas");const[Ht,Yt]=te.useState(!1),Ve=Zm(V),ut=uN(g||"xs","up");te.useEffect(()=>{Yt(g?_&&!ut:_)},[_,g,ut]);const Tt=te.useMemo(()=>({onHide:Ve}),[Ve]);function gt(){return Te||(D?(Ut.current||(Ut.current=new eC({handleContainerOverflow:!1})),Ut.current):tC())}const $t=(St,...Nt)=>{St&&(St.style.visibility="visible"),Ce?.(St,...Nt)},Le=(St,...Nt)=>{St&&(St.style.visibility=""),Ne?.(...Nt)},tt=te.useCallback(St=>Q.jsx("div",{...St,className:yn(`${i}-backdrop`,at)}),[at,i]),xt=St=>Q.jsx("div",{...St,...Dt,className:yn(n,g?`${i}-${g}`:i,`${i}-${f}`),"aria-labelledby":h,children:a});return Q.jsxs(Q.Fragment,{children:[!Ht&&(g||it)&&xt({}),Q.jsx($2.Provider,{value:Tt,children:Q.jsx(JM,{show:Ht,ref:Mt,backdrop:c,container:Y,keyboard:A,autoFocus:ee,enforceFocus:ie&&!D,restoreFocus:q,restoreFocusOptions:fe,onEscapeKeyDown:O,onShow:z,onHide:Ve,onEnter:$t,onEntering:Re,onEntered:Ee,onExit:we,onExiting:ze,onExited:Le,manager:gt(),transition:fN,backdropTransition:pN,renderBackdrop:tt,renderDialog:xt})})]})});pC.displayName="Offcanvas";const mN=Object.assign(pC,{Body:uC,Header:dC,Title:fC}),mC=te.forwardRef(({onHide:i,...n},a)=>{const h=te.useContext(Av),f=Zm(()=>{h==null||h.onToggle==null||h.onToggle(),i?.()});return Q.jsx(mN,{ref:a,show:!!(h!=null&&h.expanded),...n,renderStaticNode:!0,onHide:f})});mC.displayName="NavbarOffcanvas";const gC=te.forwardRef(({className:i,bsPrefix:n,as:a="span",...h},f)=>(n=kn(n,"navbar-text"),Q.jsx(a,{ref:f,className:yn(i,n),...h})));gC.displayName="NavbarText";const yC=te.forwardRef((i,n)=>{const{bsPrefix:a,expand:h=!0,variant:f="light",bg:g,fixed:_,sticky:c,className:A,as:D="nav",expanded:O,onToggle:z,onSelect:V,collapseOnSelect:Y=!1,...ee}=yM(i,{expanded:"onToggle"}),ie=kn(a,"navbar"),q=te.useCallback((...we)=>{V?.(...we),Y&&O&&z?.(!1)},[V,Y,O,z]);ee.role===void 0&&D!=="nav"&&(ee.role="navigation");let fe=`${ie}-expand`;typeof h=="string"&&(fe=`${fe}-${h}`);const Ee=te.useMemo(()=>({onToggle:()=>z?.(!O),bsPrefix:ie,expanded:!!O,expand:h}),[ie,O,h,z]);return Q.jsx(Av.Provider,{value:Ee,children:Q.jsx(IL.Provider,{value:q,children:Q.jsx(D,{ref:n,...ee,className:yn(A,ie,h&&fe,f&&`${ie}-${f}`,g&&`bg-${g}`,c&&`sticky-${c}`,_&&`fixed-${_}`)})})})});yC.displayName="Navbar";const gN=Object.assign(yC,{Brand:oC,Collapse:lC,Offcanvas:mC,Text:gC,Toggle:cC}),yN=()=>{};function _N(i,n,{disabled:a,clickTrigger:h}={}){const f=n||yN;AL(i,f,{disabled:a,clickTrigger:h});const g=yh(_=>{vM(_)&&f(_)});te.useEffect(()=>{if(a||i==null)return;const _=u0(ux(i));let c=(_.defaultView||window).event;const A=Pd(_,"keyup",D=>{if(D===c){c=void 0;return}g(D)});return()=>{A()}},[i,a,g])}const _C=te.forwardRef((i,n)=>{const{flip:a,offset:h,placement:f,containerPadding:g,popperConfig:_={},transition:c,runTransition:A}=i,[D,O]=OS(),[z,V]=OS(),Y=t1(O,n),ee=Pw(i.container),ie=Pw(i.target),[q,fe]=te.useState(!i.show),Ee=bL(ie,D,DL({placement:f,enableEvents:!!i.show,containerPadding:g||5,flip:a,offset:h,arrowElement:z,popperConfig:_}));i.show&&q&&fe(!1);const we=(...Dt)=>{fe(!0),i.onExited&&i.onExited(...Dt)},ze=i.show||!q;if(_N(D,i.onHide,{disabled:!i.rootClose||i.rootCloseDisabled,clickTrigger:i.rootCloseEvent}),!ze)return null;const{onExit:Ce,onExiting:Re,onEnter:Ne,onEntering:at,onEntered:Te}=i;let it=i.children(Object.assign({},Ee.attributes.popper,{style:Ee.styles.popper,ref:Y}),{popper:Ee,placement:f,show:!!i.show,arrowProps:Object.assign({},Ee.attributes.arrow,{style:Ee.styles.arrow,ref:V})});return it=zw(c,A,{in:!!i.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:it,onExit:Ce,onExiting:Re,onExited:we,onEnter:Ne,onEntering:at,onEntered:Te}),ee?Pm.createPortal(it,ee):null});_C.displayName="Overlay";const vC=te.forwardRef(({className:i,bsPrefix:n,as:a="div",...h},f)=>(n=kn(n,"popover-header"),Q.jsx(a,{ref:f,className:yn(i,n),...h})));vC.displayName="PopoverHeader";const Y2=te.forwardRef(({className:i,bsPrefix:n,as:a="div",...h},f)=>(n=kn(n,"popover-body"),Q.jsx(a,{ref:f,className:yn(i,n),...h})));Y2.displayName="PopoverBody";function bC(i,n){let a=i;return i==="left"?a=n?"end":"start":i==="right"&&(a=n?"start":"end"),a}function xC(i="absolute"){return{position:i,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const wC=te.forwardRef(({bsPrefix:i,placement:n="right",className:a,style:h,children:f,body:g,arrowProps:_,hasDoneInitialMeasure:c,popper:A,show:D,...O},z)=>{const V=kn(i,"popover"),Y=S2(),[ee]=n?.split("-")||[],ie=bC(ee,Y);let q=h;return D&&!c&&(q={...h,...xC(A?.strategy)}),Q.jsxs("div",{ref:z,role:"tooltip",style:q,"x-placement":ee,className:yn(a,V,ee&&`bs-popover-${ie}`),...O,children:[Q.jsx("div",{className:"popover-arrow",..._}),g?Q.jsx(Y2,{children:f}):f]})});wC.displayName="Popover";const vN=Object.assign(wC,{Header:vC,Body:Y2,POPPER_OFFSET:[0,8]}),TC=te.forwardRef(({bsPrefix:i,placement:n="right",className:a,style:h,children:f,arrowProps:g,hasDoneInitialMeasure:_,popper:c,show:A,...D},O)=>{i=kn(i,"tooltip");const z=S2(),[V]=n?.split("-")||[],Y=bC(V,z);let ee=h;return A&&!_&&(ee={...h,...xC(c?.strategy)}),Q.jsxs("div",{ref:O,style:ee,role:"tooltip","x-placement":V,className:yn(a,i,`bs-tooltip-${Y}`),...D,children:[Q.jsx("div",{className:"tooltip-arrow",...g}),Q.jsx("div",{className:`${i}-inner`,children:f})]})});TC.displayName="Tooltip";const bN=Object.assign(TC,{TOOLTIP_OFFSET:[0,6]});function xN(i){const n=te.useRef(null),a=kn(void 0,"popover"),h=kn(void 0,"tooltip"),f=te.useMemo(()=>({name:"offset",options:{offset:()=>{if(i)return i;if(n.current){if(Fw(n.current,a))return vN.POPPER_OFFSET;if(Fw(n.current,h))return bN.TOOLTIP_OFFSET}return[0,0]}}}),[i,a,h]);return[n,[f]]}function wN(i,n){const{ref:a}=i,{ref:h}=n;i.ref=a.__wrapped||(a.__wrapped=f=>a(Ow(f))),n.ref=h.__wrapped||(h.__wrapped=f=>h(Ow(f)))}const SC=te.forwardRef(({children:i,transition:n=qy,popperConfig:a={},rootClose:h=!1,placement:f="top",show:g=!1,..._},c)=>{const A=te.useRef({}),[D,O]=te.useState(null),[z,V]=xN(_.offset),Y=A2(c,z),ee=n===!0?qy:n||void 0,ie=Zm(q=>{O(q),a==null||a.onFirstUpdate==null||a.onFirstUpdate(q)});return UM(()=>{D&&_.target&&(A.current.scheduleUpdate==null||A.current.scheduleUpdate())},[D,_.target]),te.useEffect(()=>{g||O(null)},[g]),Q.jsx(_C,{..._,ref:Y,popperConfig:{...a,modifiers:V.concat(a.modifiers||[]),onFirstUpdate:ie},transition:ee,rootClose:h,placement:f,show:g,children:(q,{arrowProps:fe,popper:Ee,show:we})=>{var ze;wN(q,fe);const Ce=Ee?.placement,Re=Object.assign(A.current,{state:Ee?.state,scheduleUpdate:Ee?.update,placement:Ce,outOfBoundaries:(Ee==null||(ze=Ee.state)==null||(ze=ze.modifiersData.hide)==null?void 0:ze.isReferenceHidden)||!1,strategy:a.strategy}),Ne=!!D;return typeof i=="function"?i({...q,placement:Ce,show:we,...!n&&we&&{className:"show"},popper:Re,arrowProps:fe,hasDoneInitialMeasure:Ne}):te.cloneElement(i,{...q,placement:Ce,arrowProps:fe,popper:Re,hasDoneInitialMeasure:Ne,className:yn(i.props.className,!n&&we&&"show"),style:{...i.props.style,...q.style}})}})});SC.displayName="Overlay";const EC=te.forwardRef(({bsPrefix:i,variant:n,animation:a="border",size:h,as:f="div",className:g,..._},c)=>{i=kn(i,"spinner");const A=`${i}-${a}`;return Q.jsx(f,{ref:c,..._,className:yn(g,A,h&&`${A}-${h}`,n&&`text-${n}`)})});EC.displayName="Spinner";const Mv=te.forwardRef(({bsPrefix:i,className:n,striped:a,bordered:h,borderless:f,hover:g,size:_,variant:c,responsive:A,...D},O)=>{const z=kn(i,"table"),V=yn(n,z,c&&`${z}-${c}`,_&&`${z}-${_}`,a&&`${z}-${typeof a=="string"?`striped-${a}`:"striped"}`,h&&`${z}-bordered`,f&&`${z}-borderless`,g&&`${z}-hover`),Y=Q.jsx("table",{...D,className:V,ref:O});if(A){let ee=`${z}-responsive`;return typeof A=="string"&&(ee=`${ee}-${A}`),Q.jsx("div",{className:ee,children:Y})}return Y});Mv.displayName="Table";function TN({tripQueryVariables:i,setTripQueryVariables:n,coordinates:a,onClose:h}){return Q.jsx(m2,{longitude:a.lng,latitude:a.lat,anchor:"bottom",onClose:h,children:Q.jsxs(R2,{vertical:!0,children:[Q.jsx(dp,{onClick:()=>{n({...i,from:{coordinates:{latitude:a.lat,longitude:a.lng}}}),h()},children:"Start here"}),Q.jsx(dp,{onClick:()=>{n({...i,to:{coordinates:{latitude:a.lat,longitude:a.lng}}}),h()},children:"End here"})]})})}function SN({coordinates:i,properties:n,onClose:a}){return Q.jsxs(m2,{latitude:i.lat,longitude:i.lng,closeButton:!0,onClose:()=>a(),maxWidth:"500px",children:[Q.jsx(Mv,{bordered:!0,children:Q.jsx("tbody",{children:Object.entries(n).map(([h,f])=>Q.jsxs("tr",{children:[Q.jsx("th",{scope:"row",children:h}),Q.jsx("td",{children:String(f)})]},h))})}),Q.jsx("div",{className:"geometry-popup-osm-link",children:Q.jsx("a",{href:`https://www.openstreetmap.org/?mlat=${i.lat}&mlon=${i.lng}#map=18/${i.lat}/${i.lng}`,target:"_blank",rel:"noreferrer",children:" osm.org"})})]})}const AC=i=>{const n=i.getStyle();return!n||!n.layers?[]:n.layers.filter(a=>a.type!=="raster"&&!a.id.startsWith("jsx")).filter(a=>i.getLayoutProperty(a.id,"visibility")!=="none").map(a=>a.id)},EN=({mapRef:i,setInteractiveLayerIds:n})=>{const[a,h]=te.useState([]),[f,g]=te.useState({});te.useEffect(()=>{if(!i)return;const A=i.getMap(),D=()=>{const O=A.getStyle();if(!O||!O.layers)return;const z=O.layers.filter(Y=>Y.type==="raster").map(Y=>{let ee=Y.id;const ie=Y.metadata?.name;return ie&&(ee=ie),{id:Y.id,name:ee}});h(z);const V={};O.layers.filter(Y=>Y.type!=="raster"&&!Y.id.startsWith("jsx")).reverse().forEach(Y=>{const ee=Y.metadata?.group||"Misc";V[ee]||(V[ee]=[]),V[ee].push({id:Y.id,name:Y.id})}),g(V)};return A.isStyleLoaded()?D():A.on("styledata",D),()=>{A.off("styledata",D)}},[i]);const _=te.useCallback((A,D)=>{if(!i)return;const O=i.getMap();O.setLayoutProperty(A,"visibility",D?"visible":"none");const z=AC(O);n(z)},[i,n]),c=te.useCallback(A=>{if(!i)return;const D=i.getMap();a.forEach(O=>{D.setLayoutProperty(O.id,"visibility",O.id===A?"visible":"none")})},[i,a]);return Q.jsxs("div",{style:{display:"flex",flexDirection:"column",padding:"10px",width:"250px",borderRadius:"4px",overflowY:"auto"},children:[Q.jsx("h4",{style:{marginTop:0},children:"Background"}),Q.jsx("select",{onChange:A=>c(A.target.value),children:a.map(A=>Q.jsx("option",{value:A.id,children:A.name},A.id))}),Q.jsx("h4",{style:{marginTop:"1rem"},children:"Debug Layers"}),Object.entries(f).map(([A,D])=>{const O=D.every(V=>i?.getMap().getLayoutProperty(V.id,"visibility")!=="none"),z=V=>{D.forEach(Y=>{_(Y.id,V)})};return Q.jsxs("div",{style:{marginBottom:"10px"},children:[Q.jsx("h6",{style:{margin:"0 0 5px"},children:Q.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[Q.jsx("input",{type:"checkbox",checked:O,onChange:V=>z(V.target.checked),style:{marginRight:"5px"}}),A]})}),D.map(V=>{const Y=i?.getMap().getLayoutProperty(V.id,"visibility")!=="none";return Q.jsxs("label",{style:{display:"block",cursor:"pointer",marginBottom:"5px"},children:[Q.jsx("input",{type:"checkbox",checked:Y,onChange:ee=>_(V.id,ee.target.checked),style:{marginLeft:"20px",marginRight:"5px"}}),V.name]},V.id)})]},A)})]})},AN="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'%3e%3cpath%20fill='var(--ci-primary-color,%20currentColor)'%20d='M432,32a63.973,63.973,0,0,0-34.344,117.963L355.894,296.13c-1.289-.078-2.585-.13-3.894-.13a63.659,63.659,0,0,0-38.193,12.678l-77.154-64.295A64,64,0,1,0,131.259,269.7L85.967,360.288C84,360.105,82.013,360,80,360a64.082,64.082,0,1,0,36.243,11.29l42.8-85.589a63.845,63.845,0,0,0,59.982-14.356l74.7,62.252a64,64,0,1,0,92.621-27.56L428.106,159.87c1.289.078,2.585.13,3.894.13a64,64,0,0,0,0-128ZM80,456a32,32,0,1,1,32-32A32.036,32.036,0,0,1,80,456Zm96-200a32,32,0,1,1,32-32A32.036,32.036,0,0,1,176,256ZM352,392a32,32,0,1,1,32-32A32.036,32.036,0,0,1,352,392Zm80-264a32,32,0,1,1,32-32A32.036,32.036,0,0,1,432,128Z'%20class='ci-primary'/%3e%3c/svg%3e";class MN extends te.Component{constructor(n){super(n),this.state={isSidebarOpen:!1,activeContent:null}}toggleSidebar=n=>{this.setState(a=>({isSidebarOpen:a.activeContent!==n||!a.isSidebarOpen,activeContent:a.activeContent===n?null:n}))};render(){const{isSidebarOpen:n,activeContent:a}=this.state,{position:h,setInteractiveLayerIds:f,mapRef:g}=this.props;return Q.jsxs("div",{children:[Q.jsx("button",{onClick:()=>this.toggleSidebar("debugLayer"),className:`sidebar-button right ${a==="debugLayer"?"active":""} ${n?"open":""}`,style:{top:"20px"},children:Q.jsx("img",{src:AN,alt:"Debug layer",title:"Debug layer",style:{width:"25px",height:"25px"}})}),Q.jsx("div",{className:"right-menu-container",style:{position:"absolute",top:0,right:0,width:n?"270px":"0",height:"100%",backgroundColor:"#f4f4f4",overflowX:"hidden",transition:"0.3s",paddingTop:"20px",boxShadow:n?"-2px 0 5px rgba(0, 0, 0, 0.2)":"none"},children:n&&a==="debugLayer"&&Q.jsx(EN,{position:h,setInteractiveLayerIds:f,mapRef:g})})]})}}function CN({coordinates:i,features:n,onClose:a,setShowPropsPopup:h}){return Q.jsxs(m2,{maxWidth:"1000px",latitude:i.lat,longitude:i.lng,onClose:a,children:[Q.jsx("strong",{children:"Overlapping features"}),Q.jsxs(Mv,{bordered:!0,children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{scope:"col",children:"layer id"}),Q.jsx("th",{scope:"col",children:"class"}),Q.jsx("th",{scope:"col",children:"name/label/vertex labels connected to edge"}),Q.jsx("th",{scope:"col",children:"level/levels"})]})}),Q.jsx("tbody",{children:n.map((f,g)=>{let _=f.properties.name||f.properties.label||"N/A";f.properties.fromVertexLabel&&f.properties.toVertexLabel&&(_=`${f.properties.fromVertexLabel} -> ${f.properties.toVertexLabel}`);let c=f.properties.levels||"N/A";return f.properties.levelValue?c=`${f.properties.levelValue} "${f.properties.levelName}"`:f.properties.lowerLevelValue&&f.properties.upperLevelValue&&(f.properties.lowerVertexLabel===f.properties.fromVertexLabel?c=`${f.properties.lowerLevelValue} "${f.properties.lowerLevelName}" -> ${f.properties.upperLevelValue} "${f.properties.upperLevelName}"`:c=`${f.properties.upperLevelValue} "${f.properties.upperLevelName}" -> ${f.properties.lowerLevelValue} "${f.properties.lowerLevelName}"`),Q.jsxs("tr",{onClick:()=>{a(),h({coordinates:i,feature:f})},className:"feature-select-item",children:[Q.jsx("td",{children:f.layer.id}),Q.jsx("td",{children:f.properties.class}),Q.jsx("td",{children:_}),Q.jsx("td",{children:c})]},g)})})]})]})}const DN="/otp/debug/vectortiles/style.json";function IN({tripQueryVariables:i,setTripQueryVariables:n,tripQueryResult:a,selectedTripPatternIndexes:h,loading:f}){const g=_O({tripQueryVariables:i,setTripQueryVariables:n}),[_,c]=te.useState(null),[A,D]=te.useState(null),[O,z]=te.useState(null),[V,Y]=te.useState([]),[ee,ie]=te.useState("auto"),q=te.useCallback(()=>ie("pointer"),[]),fe=te.useCallback(()=>ie("auto"),[]),Ee=Ne=>{if(Ne.features){if(Ne.features.length==1){const at=Ne.features[0];D({coordinates:Ne.lngLat,feature:at})}Ne.features.length>1&&z({coordinates:Ne.lngLat,features:Ne.features})}},we=Ne=>{const at=Ne.target;if(at.getZoom()<2){const Te=at.getSource("stops");at.fitBounds(Te.bounds,{animate:!1})}},ze=Ne=>{Ne.target.addControl(new CA.AttributionControl,"bottom-left")};function Ce(Ne){we(Ne);const at=AC(Ne.target);Y(at),ze(Ne)}const Re=te.useRef(null);return Q.jsx("div",{className:"map-container below-content",children:Q.jsxs(lR,{attributionControl:!1,mapLib:SA(()=>Promise.resolve().then(()=>DA),void 0),mapStyle:DN,onDblClick:g,onContextMenu:Ne=>{c(Ne.lngLat)},interactiveLayerIds:V,cursor:ee,onMouseEnter:q,onMouseLeave:fe,onClick:Ee,hash:!0,touchPitch:!1,dragRotate:!1,onLoad:Ce,ref:Re,children:[Q.jsx(pR,{position:"top-left"}),Q.jsx(dO,{setCursor:ie,tripQueryVariables:i,setTripQueryVariables:n,loading:f}),Q.jsx(MN,{position:"top-right",setInteractiveLayerIds:Y,mapRef:Re?.current}),a?.trip.tripPatterns.length&&h.map(Ne=>{const at=a.trip.tripPatterns[Ne];return at?Q.jsx(mO,{tripPattern:at},`trippattern-${Ne}`):null}),_&&Q.jsx(TN,{tripQueryVariables:i,setTripQueryVariables:n,coordinates:_,onClose:()=>c(null)}),A?.feature?.properties&&Q.jsx(SN,{coordinates:A?.coordinates,properties:A?.feature?.properties,onClose:()=>D(null)}),O&&Q.jsx(CN,{...O,setShowPropsPopup:D,onClose:()=>z(null)})]})})}function RN(){const[i,n]=te.useState(0),a=te.useRef(null);return te.useLayoutEffect(()=>{a.current&&n(a.current.getBoundingClientRect().width)},[]),te.useEffect(()=>{const h=()=>{a.current&&n(a.current.getBoundingClientRect().width)};return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[]),{containerRef:a,containerWidth:i}}const kN=70,ON=20,Bw=40;function LN(i,n,a,h){const f=te.useMemo(()=>new Date(h).getTime()-new Date(a).getTime(),[a,h]),g=te.useMemo(()=>(new Date(i.expectedStartTime).getTime()-new Date(a).getTime())/f,[i.expectedStartTime,a,f]),_=te.useMemo(()=>new Date(i.expectedEndTime).getTime()-new Date(i.expectedStartTime).getTime(),[i.expectedStartTime,i.expectedEndTime]),c=ON+Bw,D=n-kN-Bw-c,O=c+g*D,z=D*(_/f);return{maxSpan:f,startPx:c,pxSpan:D,widthPx:z,leftPx:O}}const NN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAYAAAHu22/pAAAAB3RJTUUH1AsWERgjekHtpwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAARnQU1BAACxjwv8YQUAAABwSURBVHjanVCBDcAgCLPE/19mYxsEqtNEEiMFCgWoajPD/V7PHIvCUxGJP4OhVJ52gAZwK2UVwKAicFbDtmbGQpQY1XwSI+kBZm0F9cziuZITzCyCeG7ZkzvMRP4SZ+O3W5arbsjSDu1Yal+RVse5AI1+butsyxyOAAAAAElFTkSuQmCC",PN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QURGRTc0NjUwOEY0MTFFMzlDRjU5Nzk1NzEzMUE2MTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QURGRTc0NjYwOEY0MTFFMzlDRjU5Nzk1NzEzMUE2MTMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBREZFNzQ2MzA4RjQxMUUzOUNGNTk3OTU3MTMxQTYxMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBREZFNzQ2NDA4RjQxMUUzOUNGNTk3OTU3MTMxQTYxMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqNIu00AAAElSURBVHjatFMxUsMwEESyC0rTpUyZkh/gdOmAF8T5gf0DeAFPAF5A8oKYjs7+gZ0XxOlSBMTuzCqj8ZgwwKCZHUt3q7u9O9k4587+dZ1H8SVwByS/DdAAjkGG/PabzC/Y+sz1T2VvlZnf8VfcaOgyPmtl7oAWmMXWboDxwX20Id8MBKDsGx2nCvIQUIr9+6E+JT+XdC8/O1WuDRsGUPoVcAuUKmMuTuo5wONxrGyQRpUGxEb2tUBbFXBynZMIjclhW6GuJZ1sEmw7bK+BkZSysffglOK8gTPB9sK/g7ZXGs/h6BJ/OViv5FiR5z1nKkIBLMih7B6Hd2qjmiq9tGc5KHmKrJ38bFglfy1OB//CBOPLJLuF42lgvAySaTJHjvnr7/wpwAC3fWYavCrEiwAAAABJRU5ErkJggg==",zN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAQCAYAAADAvYV+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NENBOTBGRTMzRTQxMTFFMjhDOTJBRDlBRjYxRDhBQjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NENBOTBGRTQzRTQxMTFFMjhDOTJBRDlBRjYxRDhBQjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0Q0E5MEZFMTNFNDExMUUyOEM5MkFEOUFGNjFEOEFCNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0Q0E5MEZFMjNFNDExMUUyOEM5MkFEOUFGNjFEOEFCNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiA2Kl8AAADnSURBVHjalNK/CwFhHMdx5y4pP0qM8nuwisxKmU3KaJaRP4E/QDEY/Atmk8HkDxCL7LKQRXLe3/oq6Ry+9bq7ej73PN/nnjNs2/b8Wl7PH2XlUmm5Z9BCGQmEcMMWK0yxM7LJVImHBQKYY/+yorxYwwUVi0sDB3Thf1t5jRl6kpNwEROMXdqNoCrLxXUGt5LxuIRjuhG3kvGYtCH6OH74lHdEJSdBA/UfPvNZZjLR1E061UTHTa8uE9Z2HA9Ox+9yKCc9sa9tPDc3wAZD+F4CV3SQl5ylgTaWGDnMWEBQcsY/v+hDgAEA1dErlh2yhgAAAAAASUVORK5CYII=",FN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUZENDM4N0RGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUZENDM4N0VGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1RkQ0Mzg3QkY5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1RkQ0Mzg3Q0Y5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsxmCRcAAACkSURBVHjaYmBmYCgA4v9E4gJGILGfAQIOMuAH9mASqOE+EDcQUAxS1wBSywRkKwDxBwbCAKRGgQnKuUCEBrAaJgYSAQuUNmAmrNYARIBC6T8pNpDsJCYiQwgeUixQ34OCdiFUMB7KB4EHaOIPQDZsBGIBIkwXAKsFeloAiM8TkY5AagSQoz4BhLEkCRRxFqggKIzzoewHaHpg4hf+AjHJ8QAQYAAazC31vEwRQAAAAABJRU5ErkJggg==",jN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDE5QzczNkYzRTNFMTFFMjk5RDJDQTI4Q0FGRjg0MjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDE5QzczNzAzRTNFMTFFMjk5RDJDQTI4Q0FGRjg0MjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMTlDNzM2RDNFM0UxMUUyOTlEMkNBMjhDQUZGODQyMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMTlDNzM2RTNFM0UxMUUyOTlEMkNBMjhDQUZGODQyMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsXLmU4AAAEXSURBVHjaYvz//z8DuYCJgQLAoqKgCGPLA/FWIAYJ/EBWA8TMUAwSjwLi7TAJGKgAYlYgNgPif1BXgfzEDsVfgLgUiLvRNYsAcSQQFwPxVTwubQHiy0DsDsQ7YZqjoc7aDcRcUBegA5ArHgDxKSDOgWkuAeI2qAaQrX8JhBMP1KKlzEICAjuAjNNQ00D+lQViDhyYEaoOZEkmKFA4gfggEG+BGoIPvALieUC8AsRhVJZXeA/15xUg1sXhX2RwHYh5gViGBRotbEBsRGTa0EROAEuBOAKIRYH4LhCfw2H7H2h4mAPxb5A3QZrzoM51AOLNQFyIx1Z/IN4AxF9hAcYA9S8InCHg5BtA/BqIbwLxR8YBy1UAAQYACBg5UlgYM2QAAAAASUVORK5CYII=",BN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAQCAYAAADAvYV+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NENBOTBGRTMzRTQxMTFFMjhDOTJBRDlBRjYxRDhBQjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NENBOTBGRTQzRTQxMTFFMjhDOTJBRDlBRjYxRDhBQjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0Q0E5MEZFMTNFNDExMUUyOEM5MkFEOUFGNjFEOEFCNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0Q0E5MEZFMjNFNDExMUUyOEM5MkFEOUFGNjFEOEFCNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiA2Kl8AAADnSURBVHjalNK/CwFhHMdx5y4pP0qM8nuwisxKmU3KaJaRP4E/QDEY/Atmk8HkDxCL7LKQRXLe3/oq6Ry+9bq7ej73PN/nnjNs2/b8Wl7PH2XlUmm5Z9BCGQmEcMMWK0yxM7LJVImHBQKYY/+yorxYwwUVi0sDB3Thf1t5jRl6kpNwEROMXdqNoCrLxXUGt5LxuIRjuhG3kvGYtCH6OH74lHdEJSdBA/UfPvNZZjLR1E061UTHTa8uE9Z2HA9Ox+9yKCc9sa9tPDc3wAZD+F4CV3SQl5ylgTaWGDnMWEBQcsY/v+hDgAEA1dErlh2yhgAAAAAASUVORK5CYII=",VN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAQCAYAAAAvf+5AAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTMxQjUxMkEzRTNEMTFFMjkxQkRFRTAzRUExOUZGRDQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTMxQjUxMkIzRTNEMTFFMjkxQkRFRTAzRUExOUZGRDQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFMzFCNTEyODNFM0QxMUUyOTFCREVFMDNFQTE5RkZENCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMzFCNTEyOTNFM0QxMUUyOTFCREVFMDNFQTE5RkZENCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuptisMAAAEBSURBVHjabNE/S0JhFMdxTZFQJwkRGhKDojEc2vz3CsIlGmpWmosgMMFFBaPBpabcfBGFEOkgODgLIrU3aKvg98h54HS5Bz6ce5/7e54Hzg0eHqQDPnWLOzTRkYWdgH8VsIecW/ALHmGOT7TdYlh7HFVc4ARRTDD2Bl9x6Tk5izze3dVyVVktPOFTe2ILXcTgRvCDD9SQkIwEV6jjzZz0hGd84wYlufoaf/jV0BoDfX5EBvd2PGvtIb3BfVvKRvcSQdFsOvdOwQXPcKyjqOjagx7wL3ilvYEXDHXw+zaY1GBff5tUT3vGBmXQu+aj1Jf2lA3K9EdmJFIzTPUnbGsjwAAGpSpgxyPGdAAAAABJRU5ErkJggg==",UN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUZENDM4N0RGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUZENDM4N0VGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1RkQ0Mzg3QkY5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1RkQ0Mzg3Q0Y5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsxmCRcAAACkSURBVHjaYmBmYCgA4v9E4gJGILGfAQIOMuAH9mASqOE+EDcQUAxS1wBSywRkKwDxBwbCAKRGgQnKuUCEBrAaJgYSAQuUNmAmrNYARIBC6T8pNpDsJCYiQwgeUixQ34OCdiFUMB7KB4EHaOIPQDZsBGIBIkwXAKsFeloAiM8TkY5AagSQoz4BhLEkCRRxFqggKIzzoewHaHpg4hf+AjHJ8QAQYAAazC31vEwRQAAAAABJRU5ErkJggg==",GN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQ3NjlDM0RGOTdBMTFFMkIwM0ZFQ0Y5QUFGNjUyQTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQ3NjlDM0VGOTdBMTFFMkIwM0ZFQ0Y5QUFGNjUyQTkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NDc2OUMzQkY5N0ExMUUyQjAzRkVDRjlBQUY2NTJBOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NDc2OUMzQ0Y5N0ExMUUyQjAzRkVDRjlBQUY2NTJBOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlF1VygAAAEpSURBVHjalNM9SwNBFIXh2WUNfqTTUggoYqFVijQiKDaCYJFGtLCwEn+QWKWwEStbC0WIGP0BWoi9QkSIED+IS+J75C4MAy7ZgSfc2T2XzEwm0UylsuWca2DcDTc+sRfReEsxiQck9nIVE1Z/4MrqFAt4U7CKXZzaywiPmLP5MzYxsLlWeBzzUcJLsJzon9pZthTb5NUNP/6yauzjvUCjsv3YNvxVoFHZNLE9XuDH28+0F1R9Z7UOaEQ92fFXc75hFLXwoZbac8VHT41tfOMMnZxwxzLKttXYxBPqaOU0tiyjbFNXTuu/sdsy7127cKReZkmNeriONXTtdw1vy8DOo4xLnGeN2TjENU6Cxm0s4yB7kNi/YB+L2MAKdrwla4mzmMIY7nH0K8AAYkc9+sRCXd0AAAAASUVORK5CYII=",$N="https://www.opentripplanner.org/debug-client-assets/2026/01/2026-01-16T10:08/assets/monorail-CEIE-7ZV.png",ZN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUZENDM4N0RGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUZENDM4N0VGOTcyMTFFMkI1M0Q5OUQwRDQyQUY2MzYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1RkQ0Mzg3QkY5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1RkQ0Mzg3Q0Y5NzIxMUUyQjUzRDk5RDBENDJBRjYzNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsxmCRcAAACkSURBVHjaYmBmYCgA4v9E4gJGILGfAQIOMuAH9mASqOE+EDcQUAxS1wBSywRkKwDxBwbCAKRGgQnKuUCEBrAaJgYSAQuUNmAmrNYARIBC6T8pNpDsJCYiQwgeUixQ34OCdiFUMB7KB4EHaOIPQDZsBGIBIkwXAKsFeloAiM8TkY5AagSQoz4BhLEkCRRxFqggKIzzoewHaHpg4hf+AjHJ8QAQYAAazC31vEwRQAAAAABJRU5ErkJggg==",qN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABHNCSVQICAgIfAhkiAAAAFtJREFUKJFjYCAOCBGpDif4D8UUG8LAwMDAwESJKaOaaaj5GwOZ8fyfgYHBAomNIYkrBYkyMDD8wKaOhYGBYTEWg9CBJBax5YxYNDBiUYjNYBR1y/FoQgZwlwIAXKYUAUY5kWQAAAAASUVORK5CYII=",YN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDE5QzczNkYzRTNFMTFFMjk5RDJDQTI4Q0FGRjg0MjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDE5QzczNzAzRTNFMTFFMjk5RDJDQTI4Q0FGRjg0MjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMTlDNzM2RDNFM0UxMUUyOTlEMkNBMjhDQUZGODQyMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMTlDNzM2RTNFM0UxMUUyOTlEMkNBMjhDQUZGODQyMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsXLmU4AAAEXSURBVHjaYvz//z8DuYCJgQLAoqKgCGPLA/FWIAYJ/EBWA8TMUAwSjwLi7TAJGKgAYlYgNgPif1BXgfzEDsVfgLgUiLvRNYsAcSQQFwPxVTwubQHiy0DsDsQ7YZqjoc7aDcRcUBegA5ArHgDxKSDOgWkuAeI2qAaQrX8JhBMP1KKlzEICAjuAjNNQ00D+lQViDhyYEaoOZEkmKFA4gfggEG+BGoIPvALieUC8AsRhVJZXeA/15xUg1sXhX2RwHYh5gViGBRotbEBsRGTa0EROAEuBOAKIRYH4LhCfw2H7H2h4mAPxb5A3QZrzoM51AOLNQFyIx1Z/IN4AxF9hAcYA9S8InCHg5BtA/BqIbwLxR8YBy1UAAQYACBg5UlgYM2QAAAAASUVORK5CYII=",HN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAQCAYAAADAvYV+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkQyOERBMzVGOTczMTFFMkFDQjZCNkE3RjAwN0ZGREYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkQyOERBMzZGOTczMTFFMkFDQjZCNkE3RjAwN0ZGREYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGRDI4REEzM0Y5NzMxMUUyQUNCNkI2QTdGMDA3RkZERiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGRDI4REEzNEY5NzMxMUUyQUNCNkI2QTdGMDA3RkZERiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnfLFegAAAD0SURBVHjaYmBABQJAvB2I9YF4GxCLI0syoSlmA2JlIBYEYiUg5kCWZIRq8AHiaiDmBOJfSPKsQPwbiPuAeC1IIAOIvwPxfzz4LxAXswAJA6h1VUB8DohZkEz+A8TqQDwRiDVBAgugOtkYcINPQLyUiYF48B9k5Q+oJ4uB+CzUU8jO0ABiXpA6FqgTQKCNgMm/SXEGSqTcB+KXaPJvgPguLE5AitmhHEMg9kdTHA7EWlA2JzOQEAViV2jQ2UE1IcegNhDbAvFCmKAV1EpssfcZahgTLLYeQZ1zDS1tMEOD7jEQ/2OAprLdUIwNrADi06BkCxBgAAYGNHBMbk0cAAAAAElFTkSuQmCC",WN="https://www.opentripplanner.org/debug-client-assets/2026/01/2026-01-16T10:08/assets/trolleybus-BefhFtdd.png",XN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDMzQjkxOEQwOEY3MTFFMzkyMzE4RDY4NzY0RTRDNEUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDMzQjkxOEUwOEY3MTFFMzkyMzE4RDY4NzY0RTRDNEUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMzNCOTE4QjA4RjcxMUUzOTIzMThENjg3NjRFNEM0RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMzNCOTE4QzA4RjcxMUUzOTIzMThENjg3NjRFNEM0RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgA3WlcAAAD7SURBVHjapFLRDYIwEAXlw8/qApI4AG4gTuAIsIIToJMIE+gIuEF//TCWCagT6NU8yIltgHjJy7XQ93r3er7niNUyjCnF2Ob3SinbucBzhyFnWJcEq4BvuTmllBBCwIQkaMKeKpH8/LRDPlDagVgQrsCNYIRnCyHm9VO3IpNOARnIJW5MAIUqYux7PUg7+xMEtdUDKl1QOjPX+6IkL7a8BTGCbGL95QHeOB8hcLGZWIwQOP4IUBUlnB7SfztUARnYDIy0uewYcwEfpHnGB/unBxpY8xYUGxzhmH3F2hM4++H4GN8NRrYRiUCqQIrw/cpEDEcagZf3R7wFGAACCErn0v3YEQAAAABJRU5ErkJggg==";function QN(i){return i===Ci.Rail||i===Ci.Coach||i===Ci.Metro||i===Ci.Bus||i===Ci.Tram||i===Ci.Water||i===Ci.Air||i===Ci.Cableway||i===Ci.Funicular||i===Ci.Trolleybus||i===Ci.Monorail||i===Ci.Taxi}function KN(i){const n=JN(i);function a(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}const h=a(n[0]/255),f=a(n[1]/255),g=a(n[2]/255);return .2126*h+.7152*f+.0722*g>.179?"#000":"#fff"}function JN(i){return eP(i)}function eP(i){return i.length===4?tP(i):[parseInt(i.slice(1,3),16),parseInt(i.slice(3,5),16),parseInt(i.slice(5,7),16)]}function tP(i){const n=i.slice(1,2),a=i.slice(2,3),h=i.slice(3,4);return[parseInt(n+n,16),parseInt(a+a,16),parseInt(h+h,16)]}function nP(i,n,a,h,f){const g=te.useMemo(()=>(new Date(i.expectedStartTime).getTime()-new Date(n).getTime())/a,[i.expectedStartTime,n,a]),_=te.useMemo(()=>f*(new Date(i.expectedEndTime).getTime()-new Date(i.expectedStartTime).getTime())/a-1,[f,i,a]),c=h+g*f+1,A=_>40&&QN(i.mode)&&i.line?.publicCode&&i.line.publicCode.length<=6,D=mM(i),O=te.useMemo(()=>KN(D),[D]);return{widthPx:_,leftPx:c,legTextColor:O,modeColor:D,showPublicCode:A}}const iP=Object.assign({"../../static/img/mode/air.png":NN,"../../static/img/mode/bicycle.png":PN,"../../static/img/mode/bus.png":zN,"../../static/img/mode/cableway.png":FN,"../../static/img/mode/car.png":jN,"../../static/img/mode/coach.png":BN,"../../static/img/mode/foot.png":VN,"../../static/img/mode/funicular.png":UN,"../../static/img/mode/metro.png":GN,"../../static/img/mode/monorail.png":$N,"../../static/img/mode/rail.png":ZN,"../../static/img/mode/scooter.png":qN,"../../static/img/mode/taxi.png":YN,"../../static/img/mode/tram.png":HN,"../../static/img/mode/trolleybus.png":WN,"../../static/img/mode/water.png":XN});function rP(i){return iP[`../../static/img/mode/${i.mode.toLowerCase()}.png`]}function aP({leg:i,earliestStartTime:n,maxSpan:a,startPx:h,pxSpan:f}){const{widthPx:g,leftPx:_,legTextColor:c,modeColor:A,showPublicCode:D}=nP(i,n,a,h,f),O=rP(i);return Q.jsxs("div",{className:"itinerary-header-leg-wrapper",style:{width:`${g}px`,left:_,color:c,background:A},children:[Q.jsx("div",{className:"itinerary-header-leg-icon",style:{background:c,maskImage:`url(${O})`,WebkitMaskImage:`url(${O})`}}),D&&Q.jsx("span",{className:"itinerary-header-leg-public-code",children:i.line?.publicCode})]})}function xu(i,n,a){return new Date(i).toLocaleTimeString("en-US",{timeStyle:a,hourCycle:"h24",timeZone:n})}const f0=te.createContext("UTC");function sP({tripPattern:i,itineraryIndex:n,containerWidth:a,earliestStartTime:h,latestEndTime:f,comparisonSelectedIndexes:g,setComparisonSelectedIndexes:_}){const{maxSpan:c,pxSpan:A,startPx:D,widthPx:O,leftPx:z}=LN(i,a,h,f),V=te.useContext(f0),Y=te.useMemo(()=>xu(i.expectedStartTime,V,"short"),[i.expectedStartTime,V]),ee=te.useMemo(()=>xu(i.expectedEndTime,V,"short"),[i.expectedEndTime,V]),ie=()=>{!_||!g||(g.includes(n)?_(g.filter(fe=>fe!==n)):g.length<2&&_([...g,n]))},q=g?.includes(n)||!1;return Q.jsxs("div",{className:"itinerary-header-wrapper",style:{position:"relative"},children:[g&&_&&Q.jsx("div",{onClick:fe=>fe.stopPropagation(),style:{position:"absolute",top:"4px",right:"4px",zIndex:10},children:Q.jsx("input",{type:"checkbox",checked:q,onChange:ie,disabled:!q&&g.length>=2,title:"Select for comparison"})}),Q.jsxs("div",{className:"itinerary-header-itinerary-number",children:[n+1,"."]}),Q.jsx("div",{className:"itinerary-header-itinerary-line",style:{width:`${O+5}px`,left:`${z-2}px`}}),Q.jsx("div",{title:i.expectedStartTime,className:"itinerary-header-itinerary-time",style:{left:`${z-Bw}px`},children:Y}),i.legs.map((fe,Ee)=>Q.jsx(aP,{leg:fe,earliestStartTime:h,startPx:D,maxSpan:c,pxSpan:A},fe.id||`leg_${Ee}`)),Q.jsx("div",{title:i.expectedEndTime,className:"itinerary-header-itinerary-time",style:{left:`${z+O+2}px`},children:ee})]})}function oP(i){const n=te.useMemo(()=>i?.trip.tripPatterns.reduce((h,f)=>h===null?f?.expectedStartTime:new Date(f?.expectedStartTime)<new Date(h)?f.expectedStartTime:h,null)||null,[i?.trip]),a=te.useMemo(()=>i?.trip.tripPatterns.reduce((h,f)=>h===null?f?.expectedEndTime:new Date(f?.expectedEndTime)>new Date(h)?f.expectedEndTime:h,null)||null,[i?.trip]);return[n,a]}function eE({aimedTime:i,expectedTime:n,hasRealtime:a}){const h=te.useContext(f0);return i!==n?Q.jsxs(Q.Fragment,{children:[Q.jsx("span",{title:n,style:{color:"red"},children:xu(n,h,"short")}),Q.jsx("span",{title:i,style:{textDecoration:"line-through"},children:xu(i,h,"short")})]}):Q.jsxs("span",{title:n,children:[xu(n,h,"short"),a&&Q.jsx("span",{children:" (on time)"})]})}function H2(i){const n=i/1e3;return n>100?`${n.toFixed(0)} km`:n>1?`${n.toFixed(1)} km`:`${i.toFixed(0)} m`}const Jb=i=>{const n=parseFloat(i.replace(/[^0-9.]/g,""));return i.includes("km")?n*1e3:n};function W2(i){const n=Math.floor(i/3600),a=Math.floor(i/60)%60,h=i%60;let f="";return n>0&&(f=`${f}${n}h `),a>0&&(f=`${f}${a}min `),h>1&&(f=`${f}${h}s`),f}const lP="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='1200pt'%20height='1200pt'%20version='1.1'%20viewBox='0%200%201200%201200'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3cpath%20d='m660%20156c0%2069.586-56.414%20126-126%20126s-126-56.414-126-126%2056.414-126%20126-126%20126%2056.414%20126%20126'/%3e%3cpath%20d='m667.2%20849.6h-168c-43.199%200-80.398-31.199-86.398-74.398l-50.398-322.8c-3.6016-20.398-22.801-34.801-44.398-32.398-20.398%203.6016-34.801%2022.801-32.398%2044.398l50.395%20322.8c12%2080.398%2081.602%20139.2%20163.2%20139.2h168c21.602%200%2038.398-16.801%2038.398-38.398%200.003906-21.602-16.797-38.398-38.398-38.398z'/%3e%3cpath%20d='m913.2%201101.6-66-367.2c-4.8008-27.602-28.801-46.801-56.398-46.801h-116.4l-19.203-267.6c-3.6016-58.801-52.801-104.4-111.6-104.4h-18c-33.602%200-64.801%2014.398-87.602%2039.602-21.602%2025.199-31.199%2058.801-26.398%2092.398l48%20306c4.8008%2027.602%2028.801%2049.199%2056.398%2049.199h226.8l57.602%20320.4c4.8008%2027.602%2028.801%2046.801%2056.398%2046.801%203.6016%200%207.1992%200%2010.801-1.1992%2031.203-6%2051.602-34.801%2045.602-67.199z'/%3e%3c/g%3e%3c/svg%3e";function cP({leg:i}){return i.interchangeFrom?.staySeated?Q.jsx("img",{alt:"Stay-seated transfer",title:"Stay-seated transfer",src:lP,width:"20",height:"20",className:"d-inline-block align-middle"}):null}const uP=c0(`
  query line($id: ID!) {
    line(id: $id) {
      name
      publicCode
    }
  }
`),hP=bo(uP),dP="/graphiql?flavor=transmodel";function fP({legId:i,legName:n}){const a={id:i},h=encodeURIComponent(hP),f=encodeURIComponent(JSON.stringify(a));return Q.jsx("a",{href:dP+"&query="+h+"&variables="+f,target:"_blank",rel:"noreferrer",children:n})}const pP=c0(`
  query quay($id: String!) {
    quay(id: $id) {
      stopPlace {
        id
        name
      }
    }
  }
`),mP=bo(pP),gP="/graphiql?flavor=transmodel";function tE({legId:i,legName:n}){const a={id:i},h=encodeURIComponent(mP),f=encodeURIComponent(JSON.stringify(a));return Q.jsx("a",{href:gP+"&query="+h+"&variables="+f,target:"_blank",rel:"noreferrer",children:n})}const yP=c0(`
  query authority($id: String!) {
    authority(id: $id) {
      name
      id
    }
  }
`),_P=bo(yP),vP="/graphiql?flavor=transmodel";function bP({legId:i,legName:n}){const a={id:i},h=encodeURIComponent(_P),f=encodeURIComponent(JSON.stringify(a));return Q.jsx("a",{href:vP+"&query="+h+"&variables="+f,target:"_blank",rel:"noreferrer",children:n})}function xP(i){return i.line?.publicCode?i.line.publicCode+" "+i.fromEstimatedCall?.destinationDisplay?.frontText:i.line?.name||"unknown"}function wP({leg:i,isLast:n}){return Q.jsxs("div",{className:"itinerary-leg-details",children:[Q.jsxs("div",{className:"times",children:[H2(i.distance),", ",W2(i.duration),","," ",Q.jsxs("span",{title:"Generalized cost: "+i.generalizedCost,children:["",i.generalizedCost]})]}),Q.jsx(cP,{leg:i}),Q.jsx(eE,{aimedTime:i.aimedStartTime,expectedTime:i.expectedStartTime,hasRealtime:i.realtime})," -"," ",Q.jsx(eE,{aimedTime:i.aimedEndTime,expectedTime:i.expectedEndTime,hasRealtime:i.realtime}),Q.jsxs("div",{className:"mode",children:[Q.jsx("b",{children:i.mode})," ",i.line&&Q.jsxs(Q.Fragment,{children:[Q.jsx(fP,{legId:i.line?.id,legName:xP(i)}),", ",Q.jsx(bP,{legId:i.authority?.id,legName:i.authority?.name})]})," ",i.mode!==Ci.Foot&&Q.jsxs(Q.Fragment,{children:[Q.jsx("br",{}),Q.jsx(tE,{legId:i.fromPlace.quay?.id,legName:i.fromPlace.name})," "," "]})," ",!n&&Q.jsx(tE,{legId:i.toPlace.quay?.id,legName:i.toPlace.name})]})]})}function TP({tripPattern:i}){return Q.jsxs("div",{children:[i.systemNotices.length>0&&Q.jsxs("p",{children:["System tags: ",i.systemNotices.map(n=>n.tag).join(", ")]}),i.legs.map((n,a)=>Q.jsx(wP,{leg:n,isLast:a===i.legs.length-1},n.id?n.id:`noid_${a}`)),Q.jsxs("div",{className:"generalized-cost",children:["Generalized cost: ",i.generalizedCost]})]})}function SP({previousPageCursor:i,nextPageCursor:n,onPagination:a,loading:h,comparisonSelectedIndexes:f,onCompare:g}){return Q.jsxs("div",{className:"pagination-controls-container",children:[Q.jsx(dp,{variant:"outline-primary",size:"sm",disabled:!i||h,onClick:()=>{i&&a(i)},children:"Previous page"}),Q.jsx("div",{style:{textAlign:"center"},children:f?.length===2&&g&&Q.jsx(dp,{variant:"primary",size:"sm",onClick:g,children:"Compare selected"})}),Q.jsx(dp,{variant:"outline-primary",size:"sm",disabled:!n||h,onClick:()=>{n&&a(n)},children:"Next page"})]})}function EP({error:i,onDismiss:n}){if(!i)return null;const a=_=>{try{const c=_,A=String(c.message||"").toLowerCase(),D=c.code;if(A.includes("fetch")&&A.includes("failed"))return{userMessage:"Connection failed. Please check your internet connection and try again.",showRaw:!1};if(A.includes("network error")||D==="NETWORK_ERROR")return{userMessage:"Network error occurred. Please verify your internet connection and try again.",showRaw:!1};if(A.includes("enotfound")||A.includes("getaddrinfo"))return{userMessage:"Unable to reach the server. Please check your internet connection or try again later.",showRaw:!1};if(A.includes("timeout"))return{userMessage:"Request timed out. The server may be busy, please try again in a moment.",showRaw:!0};const O=c.response;if(O&&typeof O.status=="number"){const z=O.status;if(z>=500)return{userMessage:"Server error occurred. Please try again later.",showRaw:!0};if(z===404)return{userMessage:"Service not found. Please contact support if this issue persists.",showRaw:!0};if(z>=400)return{userMessage:"Request failed. Please check your search parameters and try again.",showRaw:!0}}if(O&&O.errors)return{userMessage:"Server returned an error response.",showRaw:!0}}catch{}return{userMessage:"An unexpected error occurred. Please try again.",showRaw:!0}},{userMessage:h,showRaw:f}=a(i);let g;try{const c=i.response;c&&c.errors?g=JSON.stringify(c.errors,null,2):c&&c.data?g=JSON.stringify(c.data,null,2):g=JSON.stringify(i,null,2)}catch{g="Unable to display error details"}return Q.jsx("div",{className:"error-display-container",children:Q.jsxs("div",{className:"flex-space-between",children:[Q.jsxs("div",{className:"flex-1",children:[Q.jsx("div",{className:"error-title",children:"Search Error"}),Q.jsx("div",{className:"error-message",children:h}),f&&Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"error-title",children:"Technical Details:"}),Q.jsx("pre",{className:"error-details",children:g})]})]}),n&&Q.jsx("button",{onClick:n,className:"error-dismiss-button","aria-label":"Dismiss error",children:""})]})})}function AP({hasSearched:i,tripQueryResult:n}){return!i||!n?null:Q.jsx("div",{className:"no-results-display-container",children:Q.jsx("div",{className:"flex-space-between",children:Q.jsxs("div",{className:"flex-1",children:[Q.jsx("div",{className:"info-title",children:"No Results Found"}),Q.jsx("div",{className:"info-message",children:"No matching trips were found for your search criteria."}),Q.jsx("div",{className:"info-title",children:"Raw Response:"}),Q.jsx("pre",{className:"no-results-details",children:JSON.stringify(n,null,2)})]})})})}function MP({tripQueryResult:i,selectedTripPatternIndexes:n,setSelectedTripPatternIndexes:a,pageResults:h,loading:f,comparisonSelectedIndexes:g,setComparisonSelectedIndexes:_,onCompare:c,error:A}){const[D,O]=oP(i),{containerRef:z,containerWidth:V}=RN(),Y=te.useContext(f0),ee=!!(i&&i.trip.tripPatterns.length===0),ie=i!==null,q=A||ie&&!A&&ee;return Q.jsxs("section",{className:"left-pane-container below-content",ref:z,children:[Q.jsxs(Q.Fragment,{children:[Q.jsx("div",{className:"panel-header",children:"Itinerary results"}),Q.jsx(EP,{error:A}),Q.jsx(AP,{hasSearched:ie&&!A&&ee,tripQueryResult:i}),!q&&Q.jsx("div",{className:"pagination-controls",children:Q.jsx(SP,{onPagination:h,previousPageCursor:i?.trip.previousPageCursor,nextPageCursor:i?.trip.nextPageCursor,loading:f,comparisonSelectedIndexes:g,onCompare:c})}),Q.jsx(Wb,{activeKey:n.map(String),onSelect:fe=>{const Ee=parseInt(fe);a(we=>{if(we.includes(Ee))return we.filter(ze=>ze!==Ee);{const ze=[...we,Ee];return ze.length>2?ze.slice(-2):ze}})},children:i&&i.trip.tripPatterns.map((fe,Ee)=>Q.jsxs(Wb.Item,{eventKey:`${Ee}`,bsPrefix:fe.systemNotices.length===0?"":"accordion-item-filtered",children:[Q.jsx(Wb.Header,{children:Q.jsx(sP,{containerWidth:V,tripPattern:fe,itineraryIndex:Ee,earliestStartTime:D,latestEndTime:O,comparisonSelectedIndexes:g,setComparisonSelectedIndexes:_})}),Q.jsx(Wb.Body,{children:Q.jsx(TP,{tripPattern:fe})})]},`${Ee}`))})]}),Q.jsxs("div",{className:"time-zone-info",children:["All times in ",Q.jsx("code",{children:Y})]})]})}const rp=(i,n,a="lower")=>i==null||n==null||i===n?"":(a==="lower"?i<n:i>n)?"compare-value-best":"",ap={duration:"lower",cost:"lower",legs:"lower",walkingDistance:"lower"},nE=(i,n)=>{if(!i)throw new Error("TripPattern is required");const a=xu(i.expectedStartTime,n,"short"),h=xu(i.expectedEndTime,n,"short"),f=W2(i.duration),g=i.generalizedCost,_=i.legs.filter(A=>A&&A.mode===Ci.Foot).reduce((A,D)=>A+D.distance,0),c=Math.max(0,i.legs.length-1);return{startTime:a,endTime:h,duration:f,generalizedCost:g,walkingDistance:H2(_),totalLegs:c}},iE=(i,n,a)=>i.map((h,f)=>{const g=h.id||`leg${n}_${f}`,_=h.fromPlace?.name||"Unknown",c=h.toPlace?.name||"Unknown",A=`${h.mode}${h.line?.publicCode?` (${h.line.publicCode})`:""} | ${_}  ${c} | ${xu(h.aimedStartTime,a,"short")} to ${xu(h.aimedEndTime,a,"short")}`;return{value:g,label:A}});function CP({itinerary1:i,itinerary2:n,summary1:a,summary2:h,selectedIndexes:f}){return Q.jsxs(Mv,{bordered:!0,hover:!0,className:"compare-summary-table",children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{children:"Itinerary"}),Q.jsx("th",{children:"Start Time"}),Q.jsx("th",{children:"End Time"}),Q.jsx("th",{children:"Duration"}),Q.jsx("th",{children:"Cost"}),Q.jsx("th",{children:"Transfers"}),Q.jsx("th",{children:"Walking Distance"})]})}),Q.jsxs("tbody",{children:[Q.jsxs("tr",{children:[Q.jsx("td",{children:Q.jsxs("span",{className:"compare-itinerary-number",children:["#",f[0]+1]})}),Q.jsx("td",{children:a.startTime}),Q.jsx("td",{children:a.endTime}),Q.jsx("td",{className:rp(i.duration,n.duration,ap.duration),children:a.duration}),Q.jsxs("td",{className:rp(a.generalizedCost,h.generalizedCost,ap.cost),children:["",a.generalizedCost]}),Q.jsx("td",{className:rp(a.totalLegs,h.totalLegs,ap.legs),children:a.totalLegs}),Q.jsx("td",{className:rp(Jb(a.walkingDistance),Jb(h.walkingDistance),ap.walkingDistance),children:a.walkingDistance})]}),Q.jsxs("tr",{children:[Q.jsx("td",{children:Q.jsxs("span",{className:"compare-itinerary-number",children:["#",f[1]+1]})}),Q.jsx("td",{children:h.startTime}),Q.jsx("td",{children:h.endTime}),Q.jsx("td",{className:rp(n.duration,i.duration,ap.duration),children:h.duration}),Q.jsxs("td",{className:rp(h.generalizedCost,a.generalizedCost,ap.cost),children:["",h.generalizedCost]}),Q.jsx("td",{className:rp(h.totalLegs,a.totalLegs,ap.legs),children:h.totalLegs}),Q.jsx("td",{className:rp(Jb(h.walkingDistance),Jb(a.walkingDistance),ap.walkingDistance),children:h.walkingDistance})]})]})]})}function Ym(i){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ym(i)}function DP(i,n){if(Ym(i)!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var h=a.call(i,n);if(Ym(h)!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function MC(i){var n=DP(i,"string");return Ym(n)=="symbol"?n:n+""}function B_(i,n,a){return(n=MC(n))in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a,i}function rE(i,n){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(i);n&&(h=h.filter(function(f){return Object.getOwnPropertyDescriptor(i,f).enumerable})),a.push.apply(a,h)}return a}function pn(i){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?rE(Object(a),!0).forEach(function(h){B_(i,h,a[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):rE(Object(a)).forEach(function(h){Object.defineProperty(i,h,Object.getOwnPropertyDescriptor(a,h))})}return i}function IP(i){if(Array.isArray(i))return i}function RP(i,n){var a=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(a!=null){var h,f,g,_,c=[],A=!0,D=!1;try{if(g=(a=a.call(i)).next,n===0){if(Object(a)!==a)return;A=!1}else for(;!(A=(h=g.call(a)).done)&&(c.push(h.value),c.length!==n);A=!0);}catch(O){D=!0,f=O}finally{try{if(!A&&a.return!=null&&(_=a.return(),Object(_)!==_))return}finally{if(D)throw f}}return c}}function Vw(i,n){(n==null||n>i.length)&&(n=i.length);for(var a=0,h=Array(n);a<n;a++)h[a]=i[a];return h}function CC(i,n){if(i){if(typeof i=="string")return Vw(i,n);var a={}.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Vw(i,n):void 0}}function kP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gd(i,n){return IP(i)||RP(i,n)||CC(i,n)||kP()}function tf(i,n){if(i==null)return{};var a,h,f=T2(i,n);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(i);for(h=0;h<g.length;h++)a=g[h],n.indexOf(a)===-1&&{}.propertyIsEnumerable.call(i,a)&&(f[a]=i[a])}return f}var OP=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function LP(i){var n=i.defaultInputValue,a=n===void 0?"":n,h=i.defaultMenuIsOpen,f=h===void 0?!1:h,g=i.defaultValue,_=g===void 0?null:g,c=i.inputValue,A=i.menuIsOpen,D=i.onChange,O=i.onInputChange,z=i.onMenuClose,V=i.onMenuOpen,Y=i.value,ee=tf(i,OP),ie=te.useState(c!==void 0?c:a),q=Gd(ie,2),fe=q[0],Ee=q[1],we=te.useState(A!==void 0?A:f),ze=Gd(we,2),Ce=ze[0],Re=ze[1],Ne=te.useState(Y!==void 0?Y:_),at=Gd(Ne,2),Te=at[0],it=at[1],Dt=te.useCallback(function(Tt,gt){typeof D=="function"&&D(Tt,gt),it(Tt)},[D]),Mt=te.useCallback(function(Tt,gt){var $t;typeof O=="function"&&($t=O(Tt,gt)),Ee($t!==void 0?$t:Tt)},[O]),Ut=te.useCallback(function(){typeof V=="function"&&V(),Re(!0)},[V]),Ht=te.useCallback(function(){typeof z=="function"&&z(),Re(!1)},[z]),Yt=c!==void 0?c:fe,Ve=A!==void 0?A:Ce,ut=Y!==void 0?Y:Te;return pn(pn({},ee),{},{inputValue:Yt,menuIsOpen:Ve,onChange:Dt,onInputChange:Mt,onMenuClose:Ht,onMenuOpen:Ut,value:ut})}function NP(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function aE(i,n){for(var a=0;a<n.length;a++){var h=n[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,MC(h.key),h)}}function PP(i,n,a){return n&&aE(i.prototype,n),a&&aE(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i}function zP(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&_x(i,n)}function Tx(i){return Tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tx(i)}function DC(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DC=function(){return!!i})()}function FP(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jP(i,n){if(n&&(Ym(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FP(i)}function BP(i){var n=DC();return function(){var a,h=Tx(i);if(n){var f=Tx(this).constructor;a=Reflect.construct(h,arguments,f)}else a=h.apply(this,arguments);return jP(this,a)}}function VP(i){if(Array.isArray(i))return Vw(i)}function UP(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function GP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X2(i){return VP(i)||UP(i)||CC(i)||GP()}function $P(i){if(i.sheet)return i.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===i)return document.styleSheets[n]}function ZP(i){var n=document.createElement("style");return n.setAttribute("data-emotion",i.key),i.nonce!==void 0&&n.setAttribute("nonce",i.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var qP=(function(){function i(a){var h=this;this._insertTag=function(f){var g;h.tags.length===0?h.insertionPoint?g=h.insertionPoint.nextSibling:h.prepend?g=h.container.firstChild:g=h.before:g=h.tags[h.tags.length-1].nextSibling,h.container.insertBefore(f,g),h.tags.push(f)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var n=i.prototype;return n.hydrate=function(h){h.forEach(this._insertTag)},n.insert=function(h){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ZP(this));var f=this.tags[this.tags.length-1];if(this.isSpeedy){var g=$P(f);try{g.insertRule(h,g.cssRules.length)}catch{}}else f.appendChild(document.createTextNode(h));this.ctr++},n.flush=function(){this.tags.forEach(function(h){var f;return(f=h.parentNode)==null?void 0:f.removeChild(h)}),this.tags=[],this.ctr=0},i})(),Ns="-ms-",Sx="-moz-",Ai="-webkit-",IC="comm",Q2="rule",K2="decl",YP="@import",RC="@keyframes",HP="@layer",WP=Math.abs,n1=String.fromCharCode,XP=Object.assign;function QP(i,n){return ds(i,0)^45?(((n<<2^ds(i,0))<<2^ds(i,1))<<2^ds(i,2))<<2^ds(i,3):0}function kC(i){return i.trim()}function KP(i,n){return(i=n.exec(i))?i[0]:i}function Mi(i,n,a){return i.replace(n,a)}function Uw(i,n){return i.indexOf(n)}function ds(i,n){return i.charCodeAt(n)|0}function lv(i,n,a){return i.slice(n,a)}function ph(i){return i.length}function J2(i){return i.length}function ex(i,n){return n.push(i),i}function JP(i,n){return i.map(n).join("")}var i1=1,Qy=1,OC=0,al=0,va=0,p0="";function r1(i,n,a,h,f,g,_){return{value:i,root:n,parent:a,type:h,props:f,children:g,line:i1,column:Qy,length:_,return:""}}function R_(i,n){return XP(r1("",null,null,"",null,null,0),i,{length:-i.length},n)}function ez(){return va}function tz(){return va=al>0?ds(p0,--al):0,Qy--,va===10&&(Qy=1,i1--),va}function Pl(){return va=al<OC?ds(p0,al++):0,Qy++,va===10&&(Qy=1,i1++),va}function Eh(){return ds(p0,al)}function hx(){return al}function Cv(i,n){return lv(p0,i,n)}function cv(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function LC(i){return i1=Qy=1,OC=ph(p0=i),al=0,[]}function NC(i){return p0="",i}function dx(i){return kC(Cv(al-1,Gw(i===91?i+2:i===40?i+1:i)))}function nz(i){for(;(va=Eh())&&va<33;)Pl();return cv(i)>2||cv(va)>3?"":" "}function iz(i,n){for(;--n&&Pl()&&!(va<48||va>102||va>57&&va<65||va>70&&va<97););return Cv(i,hx()+(n<6&&Eh()==32&&Pl()==32))}function Gw(i){for(;Pl();)switch(va){case i:return al;case 34:case 39:i!==34&&i!==39&&Gw(va);break;case 40:i===41&&Gw(i);break;case 92:Pl();break}return al}function rz(i,n){for(;Pl()&&i+va!==57;)if(i+va===84&&Eh()===47)break;return"/*"+Cv(n,al-1)+"*"+n1(i===47?i:Pl())}function az(i){for(;!cv(Eh());)Pl();return Cv(i,al)}function sz(i){return NC(fx("",null,null,null,[""],i=LC(i),0,[0],i))}function fx(i,n,a,h,f,g,_,c,A){for(var D=0,O=0,z=_,V=0,Y=0,ee=0,ie=1,q=1,fe=1,Ee=0,we="",ze=f,Ce=g,Re=h,Ne=we;q;)switch(ee=Ee,Ee=Pl()){case 40:if(ee!=108&&ds(Ne,z-1)==58){Uw(Ne+=Mi(dx(Ee),"&","&\f"),"&\f")!=-1&&(fe=-1);break}case 34:case 39:case 91:Ne+=dx(Ee);break;case 9:case 10:case 13:case 32:Ne+=nz(ee);break;case 92:Ne+=iz(hx()-1,7);continue;case 47:switch(Eh()){case 42:case 47:ex(oz(rz(Pl(),hx()),n,a),A);break;default:Ne+="/"}break;case 123*ie:c[D++]=ph(Ne)*fe;case 125*ie:case 59:case 0:switch(Ee){case 0:case 125:q=0;case 59+O:fe==-1&&(Ne=Mi(Ne,/\f/g,"")),Y>0&&ph(Ne)-z&&ex(Y>32?oE(Ne+";",h,a,z-1):oE(Mi(Ne," ","")+";",h,a,z-2),A);break;case 59:Ne+=";";default:if(ex(Re=sE(Ne,n,a,D,O,f,c,we,ze=[],Ce=[],z),g),Ee===123)if(O===0)fx(Ne,n,Re,Re,ze,g,z,c,Ce);else switch(V===99&&ds(Ne,3)===110?100:V){case 100:case 108:case 109:case 115:fx(i,Re,Re,h&&ex(sE(i,Re,Re,0,0,f,c,we,f,ze=[],z),Ce),f,Ce,z,c,h?ze:Ce);break;default:fx(Ne,Re,Re,Re,[""],Ce,0,c,Ce)}}D=O=Y=0,ie=fe=1,we=Ne="",z=_;break;case 58:z=1+ph(Ne),Y=ee;default:if(ie<1){if(Ee==123)--ie;else if(Ee==125&&ie++==0&&tz()==125)continue}switch(Ne+=n1(Ee),Ee*ie){case 38:fe=O>0?1:(Ne+="\f",-1);break;case 44:c[D++]=(ph(Ne)-1)*fe,fe=1;break;case 64:Eh()===45&&(Ne+=dx(Pl())),V=Eh(),O=z=ph(we=Ne+=az(hx())),Ee++;break;case 45:ee===45&&ph(Ne)==2&&(ie=0)}}return g}function sE(i,n,a,h,f,g,_,c,A,D,O){for(var z=f-1,V=f===0?g:[""],Y=J2(V),ee=0,ie=0,q=0;ee<h;++ee)for(var fe=0,Ee=lv(i,z+1,z=WP(ie=_[ee])),we=i;fe<Y;++fe)(we=kC(ie>0?V[fe]+" "+Ee:Mi(Ee,/&\f/g,V[fe])))&&(A[q++]=we);return r1(i,n,a,f===0?Q2:c,A,D,O)}function oz(i,n,a){return r1(i,n,a,IC,n1(ez()),lv(i,2,-2),0)}function oE(i,n,a,h){return r1(i,n,a,K2,lv(i,0,h),lv(i,h+1,-1),h)}function Vy(i,n){for(var a="",h=J2(i),f=0;f<h;f++)a+=n(i[f],f,i,n)||"";return a}function lz(i,n,a,h){switch(i.type){case HP:if(i.children.length)break;case YP:case K2:return i.return=i.return||i.value;case IC:return"";case RC:return i.return=i.value+"{"+Vy(i.children,h)+"}";case Q2:i.value=i.props.join(",")}return ph(a=Vy(i.children,h))?i.return=i.value+"{"+a+"}":""}function cz(i){var n=J2(i);return function(a,h,f,g){for(var _="",c=0;c<n;c++)_+=i[c](a,h,f,g)||"";return _}}function uz(i){return function(n){n.root||(n=n.return)&&i(n)}}function hz(i){var n=Object.create(null);return function(a){return n[a]===void 0&&(n[a]=i(a)),n[a]}}var dz=function(n,a,h){for(var f=0,g=0;f=g,g=Eh(),f===38&&g===12&&(a[h]=1),!cv(g);)Pl();return Cv(n,al)},fz=function(n,a){var h=-1,f=44;do switch(cv(f)){case 0:f===38&&Eh()===12&&(a[h]=1),n[h]+=dz(al-1,a,h);break;case 2:n[h]+=dx(f);break;case 4:if(f===44){n[++h]=Eh()===58?"&\f":"",a[h]=n[h].length;break}default:n[h]+=n1(f)}while(f=Pl());return n},pz=function(n,a){return NC(fz(LC(n),a))},lE=new WeakMap,mz=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var a=n.value,h=n.parent,f=n.column===h.column&&n.line===h.line;h.type!=="rule";)if(h=h.parent,!h)return;if(!(n.props.length===1&&a.charCodeAt(0)!==58&&!lE.get(h))&&!f){lE.set(n,!0);for(var g=[],_=pz(a,g),c=h.props,A=0,D=0;A<_.length;A++)for(var O=0;O<c.length;O++,D++)n.props[D]=g[A]?_[A].replace(/&\f/g,c[O]):c[O]+" "+_[A]}}},gz=function(n){if(n.type==="decl"){var a=n.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(n.return="",n.value="")}};function PC(i,n){switch(QP(i,n)){case 5103:return Ai+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ai+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return Ai+i+Sx+i+Ns+i+i;case 6828:case 4268:return Ai+i+Ns+i+i;case 6165:return Ai+i+Ns+"flex-"+i+i;case 5187:return Ai+i+Mi(i,/(\w+).+(:[^]+)/,Ai+"box-$1$2"+Ns+"flex-$1$2")+i;case 5443:return Ai+i+Ns+"flex-item-"+Mi(i,/flex-|-self/,"")+i;case 4675:return Ai+i+Ns+"flex-line-pack"+Mi(i,/align-content|flex-|-self/,"")+i;case 5548:return Ai+i+Ns+Mi(i,"shrink","negative")+i;case 5292:return Ai+i+Ns+Mi(i,"basis","preferred-size")+i;case 6060:return Ai+"box-"+Mi(i,"-grow","")+Ai+i+Ns+Mi(i,"grow","positive")+i;case 4554:return Ai+Mi(i,/([^-])(transform)/g,"$1"+Ai+"$2")+i;case 6187:return Mi(Mi(Mi(i,/(zoom-|grab)/,Ai+"$1"),/(image-set)/,Ai+"$1"),i,"")+i;case 5495:case 3959:return Mi(i,/(image-set\([^]*)/,Ai+"$1$`$1");case 4968:return Mi(Mi(i,/(.+:)(flex-)?(.*)/,Ai+"box-pack:$3"+Ns+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ai+i+i;case 4095:case 3583:case 4068:case 2532:return Mi(i,/(.+)-inline(.+)/,Ai+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ph(i)-1-n>6)switch(ds(i,n+1)){case 109:if(ds(i,n+4)!==45)break;case 102:return Mi(i,/(.+:)(.+)-([^]+)/,"$1"+Ai+"$2-$3$1"+Sx+(ds(i,n+3)==108?"$3":"$2-$3"))+i;case 115:return~Uw(i,"stretch")?PC(Mi(i,"stretch","fill-available"),n)+i:i}break;case 4949:if(ds(i,n+1)!==115)break;case 6444:switch(ds(i,ph(i)-3-(~Uw(i,"!important")&&10))){case 107:return Mi(i,":",":"+Ai)+i;case 101:return Mi(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ai+(ds(i,14)===45?"inline-":"")+"box$3$1"+Ai+"$2$3$1"+Ns+"$2box$3")+i}break;case 5936:switch(ds(i,n+11)){case 114:return Ai+i+Ns+Mi(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return Ai+i+Ns+Mi(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return Ai+i+Ns+Mi(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return Ai+i+Ns+i+i}return i}var yz=function(n,a,h,f){if(n.length>-1&&!n.return)switch(n.type){case K2:n.return=PC(n.value,n.length);break;case RC:return Vy([R_(n,{value:Mi(n.value,"@","@"+Ai)})],f);case Q2:if(n.length)return JP(n.props,function(g){switch(KP(g,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Vy([R_(n,{props:[Mi(g,/:(read-\w+)/,":"+Sx+"$1")]})],f);case"::placeholder":return Vy([R_(n,{props:[Mi(g,/:(plac\w+)/,":"+Ai+"input-$1")]}),R_(n,{props:[Mi(g,/:(plac\w+)/,":"+Sx+"$1")]}),R_(n,{props:[Mi(g,/:(plac\w+)/,Ns+"input-$1")]})],f)}return""})}},_z=[yz],vz=function(n){var a=n.key;if(a==="css"){var h=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(h,function(ie){var q=ie.getAttribute("data-emotion");q.indexOf(" ")!==-1&&(document.head.appendChild(ie),ie.setAttribute("data-s",""))})}var f=n.stylisPlugins||_z,g={},_,c=[];_=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(ie){for(var q=ie.getAttribute("data-emotion").split(" "),fe=1;fe<q.length;fe++)g[q[fe]]=!0;c.push(ie)});var A,D=[mz,gz];{var O,z=[lz,uz(function(ie){O.insert(ie)})],V=cz(D.concat(f,z)),Y=function(q){return Vy(sz(q),V)};A=function(q,fe,Ee,we){O=Ee,Y(q?q+"{"+fe.styles+"}":fe.styles),we&&(ee.inserted[fe.name]=!0)}}var ee={key:a,sheet:new qP({key:a,container:_,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:g,registered:{},insert:A};return ee.sheet.hydrate(c),ee},lw={exports:{}},Ni={};var cE;function bz(){if(cE)return Ni;cE=1;var i=typeof Symbol=="function"&&Symbol.for,n=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,h=i?Symbol.for("react.fragment"):60107,f=i?Symbol.for("react.strict_mode"):60108,g=i?Symbol.for("react.profiler"):60114,_=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,A=i?Symbol.for("react.async_mode"):60111,D=i?Symbol.for("react.concurrent_mode"):60111,O=i?Symbol.for("react.forward_ref"):60112,z=i?Symbol.for("react.suspense"):60113,V=i?Symbol.for("react.suspense_list"):60120,Y=i?Symbol.for("react.memo"):60115,ee=i?Symbol.for("react.lazy"):60116,ie=i?Symbol.for("react.block"):60121,q=i?Symbol.for("react.fundamental"):60117,fe=i?Symbol.for("react.responder"):60118,Ee=i?Symbol.for("react.scope"):60119;function we(Ce){if(typeof Ce=="object"&&Ce!==null){var Re=Ce.$$typeof;switch(Re){case n:switch(Ce=Ce.type,Ce){case A:case D:case h:case g:case f:case z:return Ce;default:switch(Ce=Ce&&Ce.$$typeof,Ce){case c:case O:case ee:case Y:case _:return Ce;default:return Re}}case a:return Re}}}function ze(Ce){return we(Ce)===D}return Ni.AsyncMode=A,Ni.ConcurrentMode=D,Ni.ContextConsumer=c,Ni.ContextProvider=_,Ni.Element=n,Ni.ForwardRef=O,Ni.Fragment=h,Ni.Lazy=ee,Ni.Memo=Y,Ni.Portal=a,Ni.Profiler=g,Ni.StrictMode=f,Ni.Suspense=z,Ni.isAsyncMode=function(Ce){return ze(Ce)||we(Ce)===A},Ni.isConcurrentMode=ze,Ni.isContextConsumer=function(Ce){return we(Ce)===c},Ni.isContextProvider=function(Ce){return we(Ce)===_},Ni.isElement=function(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===n},Ni.isForwardRef=function(Ce){return we(Ce)===O},Ni.isFragment=function(Ce){return we(Ce)===h},Ni.isLazy=function(Ce){return we(Ce)===ee},Ni.isMemo=function(Ce){return we(Ce)===Y},Ni.isPortal=function(Ce){return we(Ce)===a},Ni.isProfiler=function(Ce){return we(Ce)===g},Ni.isStrictMode=function(Ce){return we(Ce)===f},Ni.isSuspense=function(Ce){return we(Ce)===z},Ni.isValidElementType=function(Ce){return typeof Ce=="string"||typeof Ce=="function"||Ce===h||Ce===D||Ce===g||Ce===f||Ce===z||Ce===V||typeof Ce=="object"&&Ce!==null&&(Ce.$$typeof===ee||Ce.$$typeof===Y||Ce.$$typeof===_||Ce.$$typeof===c||Ce.$$typeof===O||Ce.$$typeof===q||Ce.$$typeof===fe||Ce.$$typeof===Ee||Ce.$$typeof===ie)},Ni.typeOf=we,Ni}var uE;function xz(){return uE||(uE=1,lw.exports=bz()),lw.exports}var cw,hE;function wz(){if(hE)return cw;hE=1;var i=xz(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},h={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},f={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},g={};g[i.ForwardRef]=h,g[i.Memo]=f;function _(ee){return i.isMemo(ee)?f:g[ee.$$typeof]||n}var c=Object.defineProperty,A=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,O=Object.getOwnPropertyDescriptor,z=Object.getPrototypeOf,V=Object.prototype;function Y(ee,ie,q){if(typeof ie!="string"){if(V){var fe=z(ie);fe&&fe!==V&&Y(ee,fe,q)}var Ee=A(ie);D&&(Ee=Ee.concat(D(ie)));for(var we=_(ee),ze=_(ie),Ce=0;Ce<Ee.length;++Ce){var Re=Ee[Ce];if(!a[Re]&&!(q&&q[Re])&&!(ze&&ze[Re])&&!(we&&we[Re])){var Ne=O(ie,Re);try{c(ee,Re,Ne)}catch{}}}}return ee}return cw=Y,cw}wz();var Tz=!0;function Sz(i,n,a){var h="";return a.split(" ").forEach(function(f){i[f]!==void 0?n.push(i[f]+";"):f&&(h+=f+" ")}),h}var zC=function(n,a,h){var f=n.key+"-"+a.name;(h===!1||Tz===!1)&&n.registered[f]===void 0&&(n.registered[f]=a.styles)},Ez=function(n,a,h){zC(n,a,h);var f=n.key+"-"+a.name;if(n.inserted[a.name]===void 0){var g=a;do n.insert(a===g?"."+f:"",g,n.sheet,!0),g=g.next;while(g!==void 0)}};function Az(i){for(var n=0,a,h=0,f=i.length;f>=4;++h,f-=4)a=i.charCodeAt(h)&255|(i.charCodeAt(++h)&255)<<8|(i.charCodeAt(++h)&255)<<16|(i.charCodeAt(++h)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,n=(a&65535)*1540483477+((a>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(f){case 3:n^=(i.charCodeAt(h+2)&255)<<16;case 2:n^=(i.charCodeAt(h+1)&255)<<8;case 1:n^=i.charCodeAt(h)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var Mz={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Cz=/[A-Z]|^ms/g,Dz=/_EMO_([^_]+?)_([^]*?)_EMO_/g,FC=function(n){return n.charCodeAt(1)===45},dE=function(n){return n!=null&&typeof n!="boolean"},uw=hz(function(i){return FC(i)?i:i.replace(Cz,"-$&").toLowerCase()}),fE=function(n,a){switch(n){case"animation":case"animationName":if(typeof a=="string")return a.replace(Dz,function(h,f,g){return mh={name:f,styles:g,next:mh},f})}return Mz[n]!==1&&!FC(n)&&typeof a=="number"&&a!==0?a+"px":a};function uv(i,n,a){if(a==null)return"";var h=a;if(h.__emotion_styles!==void 0)return h;switch(typeof a){case"boolean":return"";case"object":{var f=a;if(f.anim===1)return mh={name:f.name,styles:f.styles,next:mh},f.name;var g=a;if(g.styles!==void 0){var _=g.next;if(_!==void 0)for(;_!==void 0;)mh={name:_.name,styles:_.styles,next:mh},_=_.next;var c=g.styles+";";return c}return Iz(i,n,a)}case"function":{if(i!==void 0){var A=mh,D=a(i);return mh=A,uv(i,n,D)}break}}var O=a;return O}function Iz(i,n,a){var h="";if(Array.isArray(a))for(var f=0;f<a.length;f++)h+=uv(i,n,a[f])+";";else for(var g in a){var _=a[g];if(typeof _!="object"){var c=_;dE(c)&&(h+=uw(g)+":"+fE(g,c)+";")}else if(Array.isArray(_)&&typeof _[0]=="string"&&n==null)for(var A=0;A<_.length;A++)dE(_[A])&&(h+=uw(g)+":"+fE(g,_[A])+";");else{var D=uv(i,n,_);switch(g){case"animation":case"animationName":{h+=uw(g)+":"+D+";";break}default:h+=g+"{"+D+"}"}}}return h}var pE=/label:\s*([^\s;{]+)\s*(;|$)/g,mh;function jC(i,n,a){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var h=!0,f="";mh=void 0;var g=i[0];if(g==null||g.raw===void 0)h=!1,f+=uv(a,n,g);else{var _=g;f+=_[0]}for(var c=1;c<i.length;c++)if(f+=uv(a,n,i[c]),h){var A=g;f+=A[c]}pE.lastIndex=0;for(var D="",O;(O=pE.exec(f))!==null;)D+="-"+O[1];var z=Az(f)+D;return{name:z,styles:f,next:mh}}var Rz=function(n){return n()},kz=UT.useInsertionEffect?UT.useInsertionEffect:!1,Oz=kz||Rz,BC=te.createContext(typeof HTMLElement<"u"?vz({key:"css"}):null);BC.Provider;var Lz=function(n){return te.forwardRef(function(a,h){var f=te.useContext(BC);return n(a,f,h)})},Nz=te.createContext({}),eT={}.hasOwnProperty,$w="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Pz=function(n,a){var h={};for(var f in a)eT.call(a,f)&&(h[f]=a[f]);return h[$w]=n,h},zz=function(n){var a=n.cache,h=n.serialized,f=n.isStringTag;return zC(a,h,f),Oz(function(){return Ez(a,h,f)}),null},Fz=Lz(function(i,n,a){var h=i.css;typeof h=="string"&&n.registered[h]!==void 0&&(h=n.registered[h]);var f=i[$w],g=[h],_="";typeof i.className=="string"?_=Sz(n.registered,g,i.className):i.className!=null&&(_=i.className+" ");var c=jC(g,void 0,te.useContext(Nz));_+=n.key+"-"+c.name;var A={};for(var D in i)eT.call(i,D)&&D!=="css"&&D!==$w&&(A[D]=i[D]);return A.className=_,a&&(A.ref=a),te.createElement(te.Fragment,null,te.createElement(zz,{cache:n,serialized:c,isStringTag:typeof f=="string"}),te.createElement(f,A))}),jz=Fz,ln=function(n,a){var h=arguments;if(a==null||!eT.call(a,"css"))return te.createElement.apply(void 0,h);var f=h.length,g=new Array(f);g[0]=jz,g[1]=Pz(n,a);for(var _=2;_<f;_++)g[_]=h[_];return te.createElement.apply(null,g)};(function(i){var n;n||(n=i.JSX||(i.JSX={}))})(ln||(ln={}));function tT(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return jC(n)}function Bz(){var i=tT.apply(void 0,arguments),n="animation-"+i.name;return{name:n,styles:"@keyframes "+n+"{"+i.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function Vz(i,n){return n||(n=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(n)}}))}const Uz=Math.min,Gz=Math.max,Ex=Math.round,tx=Math.floor,Ax=i=>({x:i,y:i});function $z(i){const{x:n,y:a,width:h,height:f}=i;return{width:h,height:f,top:a,left:n,right:n+h,bottom:a+f,x:n,y:a}}function a1(){return typeof window<"u"}function VC(i){return GC(i)?(i.nodeName||"").toLowerCase():"#document"}function Qd(i){var n;return(i==null||(n=i.ownerDocument)==null?void 0:n.defaultView)||window}function UC(i){var n;return(n=(GC(i)?i.ownerDocument:i.document)||window.document)==null?void 0:n.documentElement}function GC(i){return a1()?i instanceof Node||i instanceof Qd(i).Node:!1}function Zz(i){return a1()?i instanceof Element||i instanceof Qd(i).Element:!1}function nT(i){return a1()?i instanceof HTMLElement||i instanceof Qd(i).HTMLElement:!1}function mE(i){return!a1()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof Qd(i).ShadowRoot}function $C(i){const{overflow:n,overflowX:a,overflowY:h,display:f}=iT(i);return/auto|scroll|overlay|hidden|clip/.test(n+h+a)&&!["inline","contents"].includes(f)}function qz(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yz(i){return["html","body","#document"].includes(VC(i))}function iT(i){return Qd(i).getComputedStyle(i)}function Hz(i){if(VC(i)==="html")return i;const n=i.assignedSlot||i.parentNode||mE(i)&&i.host||UC(i);return mE(n)?n.host:n}function ZC(i){const n=Hz(i);return Yz(n)?i.ownerDocument?i.ownerDocument.body:i.body:nT(n)&&$C(n)?n:ZC(n)}function Mx(i,n,a){var h;n===void 0&&(n=[]),a===void 0&&(a=!0);const f=ZC(i),g=f===((h=i.ownerDocument)==null?void 0:h.body),_=Qd(f);if(g){const c=Zw(_);return n.concat(_,_.visualViewport||[],$C(f)?f:[],c&&a?Mx(c):[])}return n.concat(f,Mx(f,[],a))}function Zw(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function Wz(i){const n=iT(i);let a=parseFloat(n.width)||0,h=parseFloat(n.height)||0;const f=nT(i),g=f?i.offsetWidth:a,_=f?i.offsetHeight:h,c=Ex(a)!==g||Ex(h)!==_;return c&&(a=g,h=_),{width:a,height:h,$:c}}function rT(i){return Zz(i)?i:i.contextElement}function gE(i){const n=rT(i);if(!nT(n))return Ax(1);const a=n.getBoundingClientRect(),{width:h,height:f,$:g}=Wz(n);let _=(g?Ex(a.width):a.width)/h,c=(g?Ex(a.height):a.height)/f;return(!_||!Number.isFinite(_))&&(_=1),(!c||!Number.isFinite(c))&&(c=1),{x:_,y:c}}const Xz=Ax(0);function Qz(i){const n=Qd(i);return!qz()||!n.visualViewport?Xz:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function Kz(i,n,a){return!1}function yE(i,n,a,h){n===void 0&&(n=!1);const f=i.getBoundingClientRect(),g=rT(i);let _=Ax(1);n&&(_=gE(i));const c=Kz()?Qz(g):Ax(0);let A=(f.left+c.x)/_.x,D=(f.top+c.y)/_.y,O=f.width/_.x,z=f.height/_.y;if(g){const V=Qd(g),Y=h;let ee=V,ie=Zw(ee);for(;ie&&h&&Y!==ee;){const q=gE(ie),fe=ie.getBoundingClientRect(),Ee=iT(ie),we=fe.left+(ie.clientLeft+parseFloat(Ee.paddingLeft))*q.x,ze=fe.top+(ie.clientTop+parseFloat(Ee.paddingTop))*q.y;A*=q.x,D*=q.y,O*=q.x,z*=q.y,A+=we,D+=ze,ee=Qd(ie),ie=Zw(ee)}}return $z({width:O,height:z,x:A,y:D})}function Jz(i,n){let a=null,h;const f=UC(i);function g(){var c;clearTimeout(h),(c=a)==null||c.disconnect(),a=null}function _(c,A){c===void 0&&(c=!1),A===void 0&&(A=1),g();const{left:D,top:O,width:z,height:V}=i.getBoundingClientRect();if(c||n(),!z||!V)return;const Y=tx(O),ee=tx(f.clientWidth-(D+z)),ie=tx(f.clientHeight-(O+V)),q=tx(D),Ee={rootMargin:-Y+"px "+-ee+"px "+-ie+"px "+-q+"px",threshold:Gz(0,Uz(1,A))||1};let we=!0;function ze(Ce){const Re=Ce[0].intersectionRatio;if(Re!==A){if(!we)return _();Re?_(!1,Re):h=setTimeout(()=>{_(!1,1e-7)},1e3)}we=!1}try{a=new IntersectionObserver(ze,{...Ee,root:f.ownerDocument})}catch{a=new IntersectionObserver(ze,Ee)}a.observe(i)}return _(!0),g}function e5(i,n,a,h){h===void 0&&(h={});const{ancestorScroll:f=!0,ancestorResize:g=!0,elementResize:_=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:A=!1}=h,D=rT(i),O=f||g?[...D?Mx(D):[],...Mx(n)]:[];O.forEach(fe=>{f&&fe.addEventListener("scroll",a,{passive:!0}),g&&fe.addEventListener("resize",a)});const z=D&&c?Jz(D,a):null;let V=-1,Y=null;_&&(Y=new ResizeObserver(fe=>{let[Ee]=fe;Ee&&Ee.target===D&&Y&&(Y.unobserve(n),cancelAnimationFrame(V),V=requestAnimationFrame(()=>{var we;(we=Y)==null||we.observe(n)})),a()}),D&&!A&&Y.observe(D),Y.observe(n));let ee,ie=A?yE(i):null;A&&q();function q(){const fe=yE(i);ie&&(fe.x!==ie.x||fe.y!==ie.y||fe.width!==ie.width||fe.height!==ie.height)&&a(),ie=fe,ee=requestAnimationFrame(q)}return a(),()=>{var fe;O.forEach(Ee=>{f&&Ee.removeEventListener("scroll",a),g&&Ee.removeEventListener("resize",a)}),z?.(),(fe=Y)==null||fe.disconnect(),Y=null,A&&cancelAnimationFrame(ee)}}var qw=te.useLayoutEffect,t5=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Cx=function(){};function n5(i,n){return n?n[0]==="-"?i+n:i+"__"+n:i}function i5(i,n){for(var a=arguments.length,h=new Array(a>2?a-2:0),f=2;f<a;f++)h[f-2]=arguments[f];var g=[].concat(h);if(n&&i)for(var _ in n)n.hasOwnProperty(_)&&n[_]&&g.push("".concat(n5(i,_)));return g.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var _E=function(n){return d5(n)?n.filter(Boolean):Ym(n)==="object"&&n!==null?[n]:[]},qC=function(n){n.className,n.clearValue,n.cx,n.getStyles,n.getClassNames,n.getValue,n.hasValue,n.isMulti,n.isRtl,n.options,n.selectOption,n.selectProps,n.setValue,n.theme;var a=tf(n,t5);return pn({},a)},ea=function(n,a,h){var f=n.cx,g=n.getStyles,_=n.getClassNames,c=n.className;return{css:g(a,n),className:f(h??{},_(a,n),c)}};function s1(i){return[document.documentElement,document.body,window].indexOf(i)>-1}function r5(i){return s1(i)?window.innerHeight:i.clientHeight}function YC(i){return s1(i)?window.pageYOffset:i.scrollTop}function Dx(i,n){if(s1(i)){window.scrollTo(0,n);return}i.scrollTop=n}function a5(i){var n=getComputedStyle(i),a=n.position==="absolute",h=/(auto|scroll)/;if(n.position==="fixed")return document.documentElement;for(var f=i;f=f.parentElement;)if(n=getComputedStyle(f),!(a&&n.position==="static")&&h.test(n.overflow+n.overflowY+n.overflowX))return f;return document.documentElement}function s5(i,n,a,h){return a*((i=i/h-1)*i*i+1)+n}function nx(i,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Cx,f=YC(i),g=n-f,_=10,c=0;function A(){c+=_;var D=s5(c,f,g,a);Dx(i,D),c<a?window.requestAnimationFrame(A):h(i)}A()}function vE(i,n){var a=i.getBoundingClientRect(),h=n.getBoundingClientRect(),f=n.offsetHeight/3;h.bottom+f>a.bottom?Dx(i,Math.min(n.offsetTop+n.clientHeight-i.offsetHeight+f,i.scrollHeight)):h.top-f<a.top&&Dx(i,Math.max(n.offsetTop-f,0))}function o5(i){var n=i.getBoundingClientRect();return{bottom:n.bottom,height:n.height,left:n.left,right:n.right,top:n.top,width:n.width}}function bE(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function l5(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var HC=!1,c5={get passive(){return HC=!0}},ix=typeof window<"u"?window:{};ix.addEventListener&&ix.removeEventListener&&(ix.addEventListener("p",Cx,c5),ix.removeEventListener("p",Cx,!1));var u5=HC;function h5(i){return i!=null}function d5(i){return Array.isArray(i)}function rx(i,n,a){return i?n:a}var f5=function(n){for(var a=arguments.length,h=new Array(a>1?a-1:0),f=1;f<a;f++)h[f-1]=arguments[f];var g=Object.entries(n).filter(function(_){var c=Gd(_,1),A=c[0];return!h.includes(A)});return g.reduce(function(_,c){var A=Gd(c,2),D=A[0],O=A[1];return _[D]=O,_},{})},p5=["children","innerProps"],m5=["children","innerProps"];function g5(i){var n=i.maxHeight,a=i.menuEl,h=i.minHeight,f=i.placement,g=i.shouldScroll,_=i.isFixedPosition,c=i.controlHeight,A=a5(a),D={placement:"bottom",maxHeight:n};if(!a||!a.offsetParent)return D;var O=A.getBoundingClientRect(),z=O.height,V=a.getBoundingClientRect(),Y=V.bottom,ee=V.height,ie=V.top,q=a.offsetParent.getBoundingClientRect(),fe=q.top,Ee=_?window.innerHeight:r5(A),we=YC(A),ze=parseInt(getComputedStyle(a).marginBottom,10),Ce=parseInt(getComputedStyle(a).marginTop,10),Re=fe-Ce,Ne=Ee-ie,at=Re+we,Te=z-we-ie,it=Y-Ee+we+ze,Dt=we+ie-Ce,Mt=160;switch(f){case"auto":case"bottom":if(Ne>=ee)return{placement:"bottom",maxHeight:n};if(Te>=ee&&!_)return g&&nx(A,it,Mt),{placement:"bottom",maxHeight:n};if(!_&&Te>=h||_&&Ne>=h){g&&nx(A,it,Mt);var Ut=_?Ne-ze:Te-ze;return{placement:"bottom",maxHeight:Ut}}if(f==="auto"||_){var Ht=n,Yt=_?Re:at;return Yt>=h&&(Ht=Math.min(Yt-ze-c,n)),{placement:"top",maxHeight:Ht}}if(f==="bottom")return g&&Dx(A,it),{placement:"bottom",maxHeight:n};break;case"top":if(Re>=ee)return{placement:"top",maxHeight:n};if(at>=ee&&!_)return g&&nx(A,Dt,Mt),{placement:"top",maxHeight:n};if(!_&&at>=h||_&&Re>=h){var Ve=n;return(!_&&at>=h||_&&Re>=h)&&(Ve=_?Re-Ce:at-Ce),g&&nx(A,Dt,Mt),{placement:"top",maxHeight:Ve}}return{placement:"bottom",maxHeight:n};default:throw new Error('Invalid placement provided "'.concat(f,'".'))}return D}function y5(i){var n={bottom:"top",top:"bottom"};return i?n[i]:"bottom"}var WC=function(n){return n==="auto"?"bottom":n},_5=function(n,a){var h,f=n.placement,g=n.theme,_=g.borderRadius,c=g.spacing,A=g.colors;return pn((h={label:"menu"},B_(h,y5(f),"100%"),B_(h,"position","absolute"),B_(h,"width","100%"),B_(h,"zIndex",1),h),a?{}:{backgroundColor:A.neutral0,borderRadius:_,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},XC=te.createContext(null),v5=function(n){var a=n.children,h=n.minMenuHeight,f=n.maxMenuHeight,g=n.menuPlacement,_=n.menuPosition,c=n.menuShouldScrollIntoView,A=n.theme,D=te.useContext(XC)||{},O=D.setPortalPlacement,z=te.useRef(null),V=te.useState(f),Y=Gd(V,2),ee=Y[0],ie=Y[1],q=te.useState(null),fe=Gd(q,2),Ee=fe[0],we=fe[1],ze=A.spacing.controlHeight;return qw(function(){var Ce=z.current;if(Ce){var Re=_==="fixed",Ne=c&&!Re,at=g5({maxHeight:f,menuEl:Ce,minHeight:h,placement:g,shouldScroll:Ne,isFixedPosition:Re,controlHeight:ze});ie(at.maxHeight),we(at.placement),O?.(at.placement)}},[f,g,_,c,h,O,ze]),a({ref:z,placerProps:pn(pn({},n),{},{placement:Ee||WC(g),maxHeight:ee})})},b5=function(n){var a=n.children,h=n.innerRef,f=n.innerProps;return ln("div",gn({},ea(n,"menu",{menu:!0}),{ref:h},f),a)},x5=b5,w5=function(n,a){var h=n.maxHeight,f=n.theme.spacing.baseUnit;return pn({maxHeight:h,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},a?{}:{paddingBottom:f,paddingTop:f})},T5=function(n){var a=n.children,h=n.innerProps,f=n.innerRef,g=n.isMulti;return ln("div",gn({},ea(n,"menuList",{"menu-list":!0,"menu-list--is-multi":g}),{ref:f},h),a)},QC=function(n,a){var h=n.theme,f=h.spacing.baseUnit,g=h.colors;return pn({textAlign:"center"},a?{}:{color:g.neutral40,padding:"".concat(f*2,"px ").concat(f*3,"px")})},S5=QC,E5=QC,A5=function(n){var a=n.children,h=a===void 0?"No options":a,f=n.innerProps,g=tf(n,p5);return ln("div",gn({},ea(pn(pn({},g),{},{children:h,innerProps:f}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),f),h)},M5=function(n){var a=n.children,h=a===void 0?"Loading...":a,f=n.innerProps,g=tf(n,m5);return ln("div",gn({},ea(pn(pn({},g),{},{children:h,innerProps:f}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),f),h)},C5=function(n){var a=n.rect,h=n.offset,f=n.position;return{left:a.left,position:f,top:h,width:a.width,zIndex:1}},D5=function(n){var a=n.appendTo,h=n.children,f=n.controlElement,g=n.innerProps,_=n.menuPlacement,c=n.menuPosition,A=te.useRef(null),D=te.useRef(null),O=te.useState(WC(_)),z=Gd(O,2),V=z[0],Y=z[1],ee=te.useMemo(function(){return{setPortalPlacement:Y}},[]),ie=te.useState(null),q=Gd(ie,2),fe=q[0],Ee=q[1],we=te.useCallback(function(){if(f){var Ne=o5(f),at=c==="fixed"?0:window.pageYOffset,Te=Ne[V]+at;(Te!==fe?.offset||Ne.left!==fe?.rect.left||Ne.width!==fe?.rect.width)&&Ee({offset:Te,rect:Ne})}},[f,c,V,fe?.offset,fe?.rect.left,fe?.rect.width]);qw(function(){we()},[we]);var ze=te.useCallback(function(){typeof D.current=="function"&&(D.current(),D.current=null),f&&A.current&&(D.current=e5(f,A.current,we,{elementResize:"ResizeObserver"in window}))},[f,we]);qw(function(){ze()},[ze]);var Ce=te.useCallback(function(Ne){A.current=Ne,ze()},[ze]);if(!a&&c!=="fixed"||!fe)return null;var Re=ln("div",gn({ref:Ce},ea(pn(pn({},n),{},{offset:fe.offset,position:c,rect:fe.rect}),"menuPortal",{"menu-portal":!0}),g),h);return ln(XC.Provider,{value:ee},a?Gx.createPortal(Re,a):Re)},I5=function(n){var a=n.isDisabled,h=n.isRtl;return{label:"container",direction:h?"rtl":void 0,pointerEvents:a?"none":void 0,position:"relative"}},R5=function(n){var a=n.children,h=n.innerProps,f=n.isDisabled,g=n.isRtl;return ln("div",gn({},ea(n,"container",{"--is-disabled":f,"--is-rtl":g}),h),a)},k5=function(n,a){var h=n.theme.spacing,f=n.isMulti,g=n.hasValue,_=n.selectProps.controlShouldRenderValue;return pn({alignItems:"center",display:f&&g&&_?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},a?{}:{padding:"".concat(h.baseUnit/2,"px ").concat(h.baseUnit*2,"px")})},O5=function(n){var a=n.children,h=n.innerProps,f=n.isMulti,g=n.hasValue;return ln("div",gn({},ea(n,"valueContainer",{"value-container":!0,"value-container--is-multi":f,"value-container--has-value":g}),h),a)},L5=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},N5=function(n){var a=n.children,h=n.innerProps;return ln("div",gn({},ea(n,"indicatorsContainer",{indicators:!0}),h),a)},xE,P5=["size"],z5=["innerProps","isRtl","size"],F5={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},KC=function(n){var a=n.size,h=tf(n,P5);return ln("svg",gn({height:a,width:a,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:F5},h))},aT=function(n){return ln(KC,gn({size:20},n),ln("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},JC=function(n){return ln(KC,gn({size:20},n),ln("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},eD=function(n,a){var h=n.isFocused,f=n.theme,g=f.spacing.baseUnit,_=f.colors;return pn({label:"indicatorContainer",display:"flex",transition:"color 150ms"},a?{}:{color:h?_.neutral60:_.neutral20,padding:g*2,":hover":{color:h?_.neutral80:_.neutral40}})},j5=eD,B5=function(n){var a=n.children,h=n.innerProps;return ln("div",gn({},ea(n,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),h),a||ln(JC,null))},V5=eD,U5=function(n){var a=n.children,h=n.innerProps;return ln("div",gn({},ea(n,"clearIndicator",{indicator:!0,"clear-indicator":!0}),h),a||ln(aT,null))},G5=function(n,a){var h=n.isDisabled,f=n.theme,g=f.spacing.baseUnit,_=f.colors;return pn({label:"indicatorSeparator",alignSelf:"stretch",width:1},a?{}:{backgroundColor:h?_.neutral10:_.neutral20,marginBottom:g*2,marginTop:g*2})},$5=function(n){var a=n.innerProps;return ln("span",gn({},a,ea(n,"indicatorSeparator",{"indicator-separator":!0})))},Z5=Bz(xE||(xE=Vz([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),q5=function(n,a){var h=n.isFocused,f=n.size,g=n.theme,_=g.colors,c=g.spacing.baseUnit;return pn({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:f,lineHeight:1,marginRight:f,textAlign:"center",verticalAlign:"middle"},a?{}:{color:h?_.neutral60:_.neutral20,padding:c*2})},hw=function(n){var a=n.delay,h=n.offset;return ln("span",{css:tT({animation:"".concat(Z5," 1s ease-in-out ").concat(a,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:h?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Y5=function(n){var a=n.innerProps,h=n.isRtl,f=n.size,g=f===void 0?4:f,_=tf(n,z5);return ln("div",gn({},ea(pn(pn({},_),{},{innerProps:a,isRtl:h,size:g}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),a),ln(hw,{delay:0,offset:h}),ln(hw,{delay:160,offset:!0}),ln(hw,{delay:320,offset:!h}))},H5=function(n,a){var h=n.isDisabled,f=n.isFocused,g=n.theme,_=g.colors,c=g.borderRadius,A=g.spacing;return pn({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:A.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},a?{}:{backgroundColor:h?_.neutral5:_.neutral0,borderColor:h?_.neutral10:f?_.primary:_.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:f?"0 0 0 1px ".concat(_.primary):void 0,"&:hover":{borderColor:f?_.primary:_.neutral30}})},W5=function(n){var a=n.children,h=n.isDisabled,f=n.isFocused,g=n.innerRef,_=n.innerProps,c=n.menuIsOpen;return ln("div",gn({ref:g},ea(n,"control",{control:!0,"control--is-disabled":h,"control--is-focused":f,"control--menu-is-open":c}),_,{"aria-disabled":h||void 0}),a)},X5=W5,Q5=["data"],K5=function(n,a){var h=n.theme.spacing;return a?{}:{paddingBottom:h.baseUnit*2,paddingTop:h.baseUnit*2}},J5=function(n){var a=n.children,h=n.cx,f=n.getStyles,g=n.getClassNames,_=n.Heading,c=n.headingProps,A=n.innerProps,D=n.label,O=n.theme,z=n.selectProps;return ln("div",gn({},ea(n,"group",{group:!0}),A),ln(_,gn({},c,{selectProps:z,theme:O,getStyles:f,getClassNames:g,cx:h}),D),ln("div",null,a))},eF=function(n,a){var h=n.theme,f=h.colors,g=h.spacing;return pn({label:"group",cursor:"default",display:"block"},a?{}:{color:f.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:g.baseUnit*3,paddingRight:g.baseUnit*3,textTransform:"uppercase"})},tF=function(n){var a=qC(n);a.data;var h=tf(a,Q5);return ln("div",gn({},ea(n,"groupHeading",{"group-heading":!0}),h))},nF=J5,iF=["innerRef","isDisabled","isHidden","inputClassName"],rF=function(n,a){var h=n.isDisabled,f=n.value,g=n.theme,_=g.spacing,c=g.colors;return pn(pn({visibility:h?"hidden":"visible",transform:f?"translateZ(0)":""},aF),a?{}:{margin:_.baseUnit/2,paddingBottom:_.baseUnit/2,paddingTop:_.baseUnit/2,color:c.neutral80})},tD={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},aF={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":pn({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},tD)},sF=function(n){return pn({label:"input",color:"inherit",background:0,opacity:n?0:1,width:"100%"},tD)},oF=function(n){var a=n.cx,h=n.value,f=qC(n),g=f.innerRef,_=f.isDisabled,c=f.isHidden,A=f.inputClassName,D=tf(f,iF);return ln("div",gn({},ea(n,"input",{"input-container":!0}),{"data-value":h||""}),ln("input",gn({className:a({input:!0},A),ref:g,style:sF(c),disabled:_},D)))},lF=oF,cF=function(n,a){var h=n.theme,f=h.spacing,g=h.borderRadius,_=h.colors;return pn({label:"multiValue",display:"flex",minWidth:0},a?{}:{backgroundColor:_.neutral10,borderRadius:g/2,margin:f.baseUnit/2})},uF=function(n,a){var h=n.theme,f=h.borderRadius,g=h.colors,_=n.cropWithEllipsis;return pn({overflow:"hidden",textOverflow:_||_===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},a?{}:{borderRadius:f/2,color:g.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},hF=function(n,a){var h=n.theme,f=h.spacing,g=h.borderRadius,_=h.colors,c=n.isFocused;return pn({alignItems:"center",display:"flex"},a?{}:{borderRadius:g/2,backgroundColor:c?_.dangerLight:void 0,paddingLeft:f.baseUnit,paddingRight:f.baseUnit,":hover":{backgroundColor:_.dangerLight,color:_.danger}})},nD=function(n){var a=n.children,h=n.innerProps;return ln("div",h,a)},dF=nD,fF=nD;function pF(i){var n=i.children,a=i.innerProps;return ln("div",gn({role:"button"},a),n||ln(aT,{size:14}))}var mF=function(n){var a=n.children,h=n.components,f=n.data,g=n.innerProps,_=n.isDisabled,c=n.removeProps,A=n.selectProps,D=h.Container,O=h.Label,z=h.Remove;return ln(D,{data:f,innerProps:pn(pn({},ea(n,"multiValue",{"multi-value":!0,"multi-value--is-disabled":_})),g),selectProps:A},ln(O,{data:f,innerProps:pn({},ea(n,"multiValueLabel",{"multi-value__label":!0})),selectProps:A},a),ln(z,{data:f,innerProps:pn(pn({},ea(n,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(a||"option")},c),selectProps:A}))},gF=mF,yF=function(n,a){var h=n.isDisabled,f=n.isFocused,g=n.isSelected,_=n.theme,c=_.spacing,A=_.colors;return pn({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},a?{}:{backgroundColor:g?A.primary:f?A.primary25:"transparent",color:h?A.neutral20:g?A.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:h?void 0:g?A.primary:A.primary50}})},_F=function(n){var a=n.children,h=n.isDisabled,f=n.isFocused,g=n.isSelected,_=n.innerRef,c=n.innerProps;return ln("div",gn({},ea(n,"option",{option:!0,"option--is-disabled":h,"option--is-focused":f,"option--is-selected":g}),{ref:_,"aria-disabled":h},c),a)},vF=_F,bF=function(n,a){var h=n.theme,f=h.spacing,g=h.colors;return pn({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},a?{}:{color:g.neutral50,marginLeft:f.baseUnit/2,marginRight:f.baseUnit/2})},xF=function(n){var a=n.children,h=n.innerProps;return ln("div",gn({},ea(n,"placeholder",{placeholder:!0}),h),a)},wF=xF,TF=function(n,a){var h=n.isDisabled,f=n.theme,g=f.spacing,_=f.colors;return pn({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},a?{}:{color:h?_.neutral40:_.neutral80,marginLeft:g.baseUnit/2,marginRight:g.baseUnit/2})},SF=function(n){var a=n.children,h=n.isDisabled,f=n.innerProps;return ln("div",gn({},ea(n,"singleValue",{"single-value":!0,"single-value--is-disabled":h}),f),a)},EF=SF,AF={ClearIndicator:U5,Control:X5,DropdownIndicator:B5,DownChevron:JC,CrossIcon:aT,Group:nF,GroupHeading:tF,IndicatorsContainer:N5,IndicatorSeparator:$5,Input:lF,LoadingIndicator:Y5,Menu:x5,MenuList:T5,MenuPortal:D5,LoadingMessage:M5,NoOptionsMessage:A5,MultiValue:gF,MultiValueContainer:dF,MultiValueLabel:fF,MultiValueRemove:pF,Option:vF,Placeholder:wF,SelectContainer:R5,SingleValue:EF,ValueContainer:O5},MF=function(n){return pn(pn({},AF),n.components)},wE=Number.isNaN||function(n){return typeof n=="number"&&n!==n};function CF(i,n){return!!(i===n||wE(i)&&wE(n))}function DF(i,n){if(i.length!==n.length)return!1;for(var a=0;a<i.length;a++)if(!CF(i[a],n[a]))return!1;return!0}function IF(i,n){n===void 0&&(n=DF);var a=null;function h(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];if(a&&a.lastThis===this&&n(f,a.lastArgs))return a.lastResult;var _=i.apply(this,f);return a={lastResult:_,lastArgs:f,lastThis:this},_}return h.clear=function(){a=null},h}var RF={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},kF=function(n){return ln("span",gn({css:RF},n))},TE=kF,OF={guidance:function(n){var a=n.isSearchable,h=n.isMulti,f=n.tabSelectsValue,g=n.context,_=n.isInitialFocus;switch(g){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(f?", press Tab to select the option and exit the menu":"",".");case"input":return _?"".concat(n["aria-label"]||"Select"," is focused ").concat(a?",type to refine list":"",", press Down to open the menu, ").concat(h?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(n){var a=n.action,h=n.label,f=h===void 0?"":h,g=n.labels,_=n.isDisabled;switch(a){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(f,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(g.length>1?"s":""," ").concat(g.join(","),", selected.");case"select-option":return _?"option ".concat(f," is disabled. Select another option."):"option ".concat(f,", selected.");default:return""}},onFocus:function(n){var a=n.context,h=n.focused,f=n.options,g=n.label,_=g===void 0?"":g,c=n.selectValue,A=n.isDisabled,D=n.isSelected,O=n.isAppleDevice,z=function(ie,q){return ie&&ie.length?"".concat(ie.indexOf(q)+1," of ").concat(ie.length):""};if(a==="value"&&c)return"value ".concat(_," focused, ").concat(z(c,h),".");if(a==="menu"&&O){var V=A?" disabled":"",Y="".concat(D?" selected":"").concat(V);return"".concat(_).concat(Y,", ").concat(z(f,h),".")}return""},onFilter:function(n){var a=n.inputValue,h=n.resultsMessage;return"".concat(h).concat(a?" for search term "+a:"",".")}},LF=function(n){var a=n.ariaSelection,h=n.focusedOption,f=n.focusedValue,g=n.focusableOptions,_=n.isFocused,c=n.selectValue,A=n.selectProps,D=n.id,O=n.isAppleDevice,z=A.ariaLiveMessages,V=A.getOptionLabel,Y=A.inputValue,ee=A.isMulti,ie=A.isOptionDisabled,q=A.isSearchable,fe=A.menuIsOpen,Ee=A.options,we=A.screenReaderStatus,ze=A.tabSelectsValue,Ce=A.isLoading,Re=A["aria-label"],Ne=A["aria-live"],at=te.useMemo(function(){return pn(pn({},OF),z||{})},[z]),Te=te.useMemo(function(){var Yt="";if(a&&at.onChange){var Ve=a.option,ut=a.options,Tt=a.removedValue,gt=a.removedValues,$t=a.value,Le=function(on){return Array.isArray(on)?null:on},tt=Tt||Ve||Le($t),xt=tt?V(tt):"",St=ut||gt||void 0,Nt=St?St.map(V):[],Zt=pn({isDisabled:tt&&ie(tt,c),label:xt,labels:Nt},a);Yt=at.onChange(Zt)}return Yt},[a,at,ie,c,V]),it=te.useMemo(function(){var Yt="",Ve=h||f,ut=!!(h&&c&&c.includes(h));if(Ve&&at.onFocus){var Tt={focused:Ve,label:V(Ve),isDisabled:ie(Ve,c),isSelected:ut,options:g,context:Ve===h?"menu":"value",selectValue:c,isAppleDevice:O};Yt=at.onFocus(Tt)}return Yt},[h,f,V,ie,at,g,c,O]),Dt=te.useMemo(function(){var Yt="";if(fe&&Ee.length&&!Ce&&at.onFilter){var Ve=we({count:g.length});Yt=at.onFilter({inputValue:Y,resultsMessage:Ve})}return Yt},[g,Y,fe,at,Ee,we,Ce]),Mt=a?.action==="initial-input-focus",Ut=te.useMemo(function(){var Yt="";if(at.guidance){var Ve=f?"value":fe?"menu":"input";Yt=at.guidance({"aria-label":Re,context:Ve,isDisabled:h&&ie(h,c),isMulti:ee,isSearchable:q,tabSelectsValue:ze,isInitialFocus:Mt})}return Yt},[Re,h,f,ee,ie,q,fe,at,c,ze,Mt]),Ht=ln(te.Fragment,null,ln("span",{id:"aria-selection"},Te),ln("span",{id:"aria-focused"},it),ln("span",{id:"aria-results"},Dt),ln("span",{id:"aria-guidance"},Ut));return ln(te.Fragment,null,ln(TE,{id:D},Mt&&Ht),ln(TE,{"aria-live":Ne,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},_&&!Mt&&Ht))},NF=LF,Yw=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],PF=new RegExp("["+Yw.map(function(i){return i.letters}).join("")+"]","g"),iD={};for(var dw=0;dw<Yw.length;dw++)for(var fw=Yw[dw],pw=0;pw<fw.letters.length;pw++)iD[fw.letters[pw]]=fw.base;var rD=function(n){return n.replace(PF,function(a){return iD[a]})},zF=IF(rD),SE=function(n){return n.replace(/^\s+|\s+$/g,"")},FF=function(n){return"".concat(n.label," ").concat(n.value)},jF=function(n){return function(a,h){if(a.data.__isNew__)return!0;var f=pn({ignoreCase:!0,ignoreAccents:!0,stringify:FF,trim:!0,matchFrom:"any"},n),g=f.ignoreCase,_=f.ignoreAccents,c=f.stringify,A=f.trim,D=f.matchFrom,O=A?SE(h):h,z=A?SE(c(a)):c(a);return g&&(O=O.toLowerCase(),z=z.toLowerCase()),_&&(O=zF(O),z=rD(z)),D==="start"?z.substr(0,O.length)===O:z.indexOf(O)>-1}},BF=["innerRef"];function VF(i){var n=i.innerRef,a=tf(i,BF),h=f5(a,"onExited","in","enter","exit","appear");return ln("input",gn({ref:n},h,{css:tT({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var UF=function(n){n.cancelable&&n.preventDefault(),n.stopPropagation()};function GF(i){var n=i.isEnabled,a=i.onBottomArrive,h=i.onBottomLeave,f=i.onTopArrive,g=i.onTopLeave,_=te.useRef(!1),c=te.useRef(!1),A=te.useRef(0),D=te.useRef(null),O=te.useCallback(function(q,fe){if(D.current!==null){var Ee=D.current,we=Ee.scrollTop,ze=Ee.scrollHeight,Ce=Ee.clientHeight,Re=D.current,Ne=fe>0,at=ze-Ce-we,Te=!1;at>fe&&_.current&&(h&&h(q),_.current=!1),Ne&&c.current&&(g&&g(q),c.current=!1),Ne&&fe>at?(a&&!_.current&&a(q),Re.scrollTop=ze,Te=!0,_.current=!0):!Ne&&-fe>we&&(f&&!c.current&&f(q),Re.scrollTop=0,Te=!0,c.current=!0),Te&&UF(q)}},[a,h,f,g]),z=te.useCallback(function(q){O(q,q.deltaY)},[O]),V=te.useCallback(function(q){A.current=q.changedTouches[0].clientY},[]),Y=te.useCallback(function(q){var fe=A.current-q.changedTouches[0].clientY;O(q,fe)},[O]),ee=te.useCallback(function(q){if(q){var fe=u5?{passive:!1}:!1;q.addEventListener("wheel",z,fe),q.addEventListener("touchstart",V,fe),q.addEventListener("touchmove",Y,fe)}},[Y,V,z]),ie=te.useCallback(function(q){q&&(q.removeEventListener("wheel",z,!1),q.removeEventListener("touchstart",V,!1),q.removeEventListener("touchmove",Y,!1))},[Y,V,z]);return te.useEffect(function(){if(n){var q=D.current;return ee(q),function(){ie(q)}}},[n,ee,ie]),function(q){D.current=q}}var EE=["boxSizing","height","overflow","paddingRight","position"],AE={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function ME(i){i.cancelable&&i.preventDefault()}function CE(i){i.stopPropagation()}function DE(){var i=this.scrollTop,n=this.scrollHeight,a=i+this.offsetHeight;i===0?this.scrollTop=1:a===n&&(this.scrollTop=i-1)}function IE(){return"ontouchstart"in window||navigator.maxTouchPoints}var RE=!!(typeof window<"u"&&window.document&&window.document.createElement),k_=0,ky={capture:!1,passive:!1};function $F(i){var n=i.isEnabled,a=i.accountForScrollbars,h=a===void 0?!0:a,f=te.useRef({}),g=te.useRef(null),_=te.useCallback(function(A){if(RE){var D=document.body,O=D&&D.style;if(h&&EE.forEach(function(ee){var ie=O&&O[ee];f.current[ee]=ie}),h&&k_<1){var z=parseInt(f.current.paddingRight,10)||0,V=document.body?document.body.clientWidth:0,Y=window.innerWidth-V+z||0;Object.keys(AE).forEach(function(ee){var ie=AE[ee];O&&(O[ee]=ie)}),O&&(O.paddingRight="".concat(Y,"px"))}D&&IE()&&(D.addEventListener("touchmove",ME,ky),A&&(A.addEventListener("touchstart",DE,ky),A.addEventListener("touchmove",CE,ky))),k_+=1}},[h]),c=te.useCallback(function(A){if(RE){var D=document.body,O=D&&D.style;k_=Math.max(k_-1,0),h&&k_<1&&EE.forEach(function(z){var V=f.current[z];O&&(O[z]=V)}),D&&IE()&&(D.removeEventListener("touchmove",ME,ky),A&&(A.removeEventListener("touchstart",DE,ky),A.removeEventListener("touchmove",CE,ky)))}},[h]);return te.useEffect(function(){if(n){var A=g.current;return _(A),function(){c(A)}}},[n,_,c]),function(A){g.current=A}}var ZF=function(n){var a=n.target;return a.ownerDocument.activeElement&&a.ownerDocument.activeElement.blur()},qF={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function YF(i){var n=i.children,a=i.lockEnabled,h=i.captureEnabled,f=h===void 0?!0:h,g=i.onBottomArrive,_=i.onBottomLeave,c=i.onTopArrive,A=i.onTopLeave,D=GF({isEnabled:f,onBottomArrive:g,onBottomLeave:_,onTopArrive:c,onTopLeave:A}),O=$F({isEnabled:a}),z=function(Y){D(Y),O(Y)};return ln(te.Fragment,null,a&&ln("div",{onClick:ZF,css:qF}),n(z))}var HF={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},WF=function(n){var a=n.name,h=n.onFocus;return ln("input",{required:!0,name:a,tabIndex:-1,"aria-hidden":"true",onFocus:h,css:HF,value:"",onChange:function(){}})},XF=WF;function sT(i){var n;return typeof window<"u"&&window.navigator!=null?i.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function QF(){return sT(/^iPhone/i)}function aD(){return sT(/^Mac/i)}function KF(){return sT(/^iPad/i)||aD()&&navigator.maxTouchPoints>1}function JF(){return QF()||KF()}function e4(){return aD()||JF()}var t4=function(n){return n.label},n4=function(n){return n.label},i4=function(n){return n.value},r4=function(n){return!!n.isDisabled},a4={clearIndicator:V5,container:I5,control:H5,dropdownIndicator:j5,group:K5,groupHeading:eF,indicatorsContainer:L5,indicatorSeparator:G5,input:rF,loadingIndicator:q5,loadingMessage:E5,menu:_5,menuList:w5,menuPortal:C5,multiValue:cF,multiValueLabel:uF,multiValueRemove:hF,noOptionsMessage:S5,option:yF,placeholder:bF,singleValue:TF,valueContainer:k5},s4={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},o4=4,sD=4,l4=38,c4=sD*2,u4={baseUnit:sD,controlHeight:l4,menuGutter:c4},mw={borderRadius:o4,colors:s4,spacing:u4},h4={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:bE(),captureMenuScroll:!bE(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:jF(),formatGroupLabel:t4,getOptionLabel:n4,getOptionValue:i4,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:r4,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!l5(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(n){var a=n.count;return"".concat(a," result").concat(a!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function kE(i,n,a,h){var f=cD(i,n,a),g=uD(i,n,a),_=lD(i,n),c=Ix(i,n);return{type:"option",data:n,isDisabled:f,isSelected:g,label:_,value:c,index:h}}function px(i,n){return i.options.map(function(a,h){if("options"in a){var f=a.options.map(function(_,c){return kE(i,_,n,c)}).filter(function(_){return LE(i,_)});return f.length>0?{type:"group",data:a,options:f,index:h}:void 0}var g=kE(i,a,n,h);return LE(i,g)?g:void 0}).filter(h5)}function oD(i){return i.reduce(function(n,a){return a.type==="group"?n.push.apply(n,X2(a.options.map(function(h){return h.data}))):n.push(a.data),n},[])}function OE(i,n){return i.reduce(function(a,h){return h.type==="group"?a.push.apply(a,X2(h.options.map(function(f){return{data:f.data,id:"".concat(n,"-").concat(h.index,"-").concat(f.index)}}))):a.push({data:h.data,id:"".concat(n,"-").concat(h.index)}),a},[])}function d4(i,n){return oD(px(i,n))}function LE(i,n){var a=i.inputValue,h=a===void 0?"":a,f=n.data,g=n.isSelected,_=n.label,c=n.value;return(!dD(i)||!g)&&hD(i,{label:_,value:c,data:f},h)}function f4(i,n){var a=i.focusedValue,h=i.selectValue,f=h.indexOf(a);if(f>-1){var g=n.indexOf(a);if(g>-1)return a;if(f<n.length)return n[f]}return null}function p4(i,n){var a=i.focusedOption;return a&&n.indexOf(a)>-1?a:n[0]}var gw=function(n,a){var h,f=(h=n.find(function(g){return g.data===a}))===null||h===void 0?void 0:h.id;return f||null},lD=function(n,a){return n.getOptionLabel(a)},Ix=function(n,a){return n.getOptionValue(a)};function cD(i,n,a){return typeof i.isOptionDisabled=="function"?i.isOptionDisabled(n,a):!1}function uD(i,n,a){if(a.indexOf(n)>-1)return!0;if(typeof i.isOptionSelected=="function")return i.isOptionSelected(n,a);var h=Ix(i,n);return a.some(function(f){return Ix(i,f)===h})}function hD(i,n,a){return i.filterOption?i.filterOption(n,a):!0}var dD=function(n){var a=n.hideSelectedOptions,h=n.isMulti;return a===void 0?h:a},m4=1,fD=(function(i){zP(a,i);var n=BP(a);function a(h){var f;if(NP(this,a),f=n.call(this,h),f.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},f.blockOptionHover=!1,f.isComposing=!1,f.commonProps=void 0,f.initialTouchX=0,f.initialTouchY=0,f.openAfterFocus=!1,f.scrollToFocusedOptionOnUpdate=!1,f.userIsDragging=void 0,f.controlRef=null,f.getControlRef=function(A){f.controlRef=A},f.focusedOptionRef=null,f.getFocusedOptionRef=function(A){f.focusedOptionRef=A},f.menuListRef=null,f.getMenuListRef=function(A){f.menuListRef=A},f.inputRef=null,f.getInputRef=function(A){f.inputRef=A},f.focus=f.focusInput,f.blur=f.blurInput,f.onChange=function(A,D){var O=f.props,z=O.onChange,V=O.name;D.name=V,f.ariaOnChange(A,D),z(A,D)},f.setValue=function(A,D,O){var z=f.props,V=z.closeMenuOnSelect,Y=z.isMulti,ee=z.inputValue;f.onInputChange("",{action:"set-value",prevInputValue:ee}),V&&(f.setState({inputIsHiddenAfterUpdate:!Y}),f.onMenuClose()),f.setState({clearFocusValueOnUpdate:!0}),f.onChange(A,{action:D,option:O})},f.selectOption=function(A){var D=f.props,O=D.blurInputOnSelect,z=D.isMulti,V=D.name,Y=f.state.selectValue,ee=z&&f.isOptionSelected(A,Y),ie=f.isOptionDisabled(A,Y);if(ee){var q=f.getOptionValue(A);f.setValue(Y.filter(function(fe){return f.getOptionValue(fe)!==q}),"deselect-option",A)}else if(!ie)z?f.setValue([].concat(X2(Y),[A]),"select-option",A):f.setValue(A,"select-option");else{f.ariaOnChange(A,{action:"select-option",option:A,name:V});return}O&&f.blurInput()},f.removeValue=function(A){var D=f.props.isMulti,O=f.state.selectValue,z=f.getOptionValue(A),V=O.filter(function(ee){return f.getOptionValue(ee)!==z}),Y=rx(D,V,V[0]||null);f.onChange(Y,{action:"remove-value",removedValue:A}),f.focusInput()},f.clearValue=function(){var A=f.state.selectValue;f.onChange(rx(f.props.isMulti,[],null),{action:"clear",removedValues:A})},f.popValue=function(){var A=f.props.isMulti,D=f.state.selectValue,O=D[D.length-1],z=D.slice(0,D.length-1),V=rx(A,z,z[0]||null);O&&f.onChange(V,{action:"pop-value",removedValue:O})},f.getFocusedOptionId=function(A){return gw(f.state.focusableOptionsWithIds,A)},f.getFocusableOptionsWithIds=function(){return OE(px(f.props,f.state.selectValue),f.getElementId("option"))},f.getValue=function(){return f.state.selectValue},f.cx=function(){for(var A=arguments.length,D=new Array(A),O=0;O<A;O++)D[O]=arguments[O];return i5.apply(void 0,[f.props.classNamePrefix].concat(D))},f.getOptionLabel=function(A){return lD(f.props,A)},f.getOptionValue=function(A){return Ix(f.props,A)},f.getStyles=function(A,D){var O=f.props.unstyled,z=a4[A](D,O);z.boxSizing="border-box";var V=f.props.styles[A];return V?V(z,D):z},f.getClassNames=function(A,D){var O,z;return(O=(z=f.props.classNames)[A])===null||O===void 0?void 0:O.call(z,D)},f.getElementId=function(A){return"".concat(f.state.instancePrefix,"-").concat(A)},f.getComponents=function(){return MF(f.props)},f.buildCategorizedOptions=function(){return px(f.props,f.state.selectValue)},f.getCategorizedOptions=function(){return f.props.menuIsOpen?f.buildCategorizedOptions():[]},f.buildFocusableOptions=function(){return oD(f.buildCategorizedOptions())},f.getFocusableOptions=function(){return f.props.menuIsOpen?f.buildFocusableOptions():[]},f.ariaOnChange=function(A,D){f.setState({ariaSelection:pn({value:A},D)})},f.onMenuMouseDown=function(A){A.button===0&&(A.stopPropagation(),A.preventDefault(),f.focusInput())},f.onMenuMouseMove=function(A){f.blockOptionHover=!1},f.onControlMouseDown=function(A){if(!A.defaultPrevented){var D=f.props.openMenuOnClick;f.state.isFocused?f.props.menuIsOpen?A.target.tagName!=="INPUT"&&A.target.tagName!=="TEXTAREA"&&f.onMenuClose():D&&f.openMenu("first"):(D&&(f.openAfterFocus=!0),f.focusInput()),A.target.tagName!=="INPUT"&&A.target.tagName!=="TEXTAREA"&&A.preventDefault()}},f.onDropdownIndicatorMouseDown=function(A){if(!(A&&A.type==="mousedown"&&A.button!==0)&&!f.props.isDisabled){var D=f.props,O=D.isMulti,z=D.menuIsOpen;f.focusInput(),z?(f.setState({inputIsHiddenAfterUpdate:!O}),f.onMenuClose()):f.openMenu("first"),A.preventDefault()}},f.onClearIndicatorMouseDown=function(A){A&&A.type==="mousedown"&&A.button!==0||(f.clearValue(),A.preventDefault(),f.openAfterFocus=!1,A.type==="touchend"?f.focusInput():setTimeout(function(){return f.focusInput()}))},f.onScroll=function(A){typeof f.props.closeMenuOnScroll=="boolean"?A.target instanceof HTMLElement&&s1(A.target)&&f.props.onMenuClose():typeof f.props.closeMenuOnScroll=="function"&&f.props.closeMenuOnScroll(A)&&f.props.onMenuClose()},f.onCompositionStart=function(){f.isComposing=!0},f.onCompositionEnd=function(){f.isComposing=!1},f.onTouchStart=function(A){var D=A.touches,O=D&&D.item(0);O&&(f.initialTouchX=O.clientX,f.initialTouchY=O.clientY,f.userIsDragging=!1)},f.onTouchMove=function(A){var D=A.touches,O=D&&D.item(0);if(O){var z=Math.abs(O.clientX-f.initialTouchX),V=Math.abs(O.clientY-f.initialTouchY),Y=5;f.userIsDragging=z>Y||V>Y}},f.onTouchEnd=function(A){f.userIsDragging||(f.controlRef&&!f.controlRef.contains(A.target)&&f.menuListRef&&!f.menuListRef.contains(A.target)&&f.blurInput(),f.initialTouchX=0,f.initialTouchY=0)},f.onControlTouchEnd=function(A){f.userIsDragging||f.onControlMouseDown(A)},f.onClearIndicatorTouchEnd=function(A){f.userIsDragging||f.onClearIndicatorMouseDown(A)},f.onDropdownIndicatorTouchEnd=function(A){f.userIsDragging||f.onDropdownIndicatorMouseDown(A)},f.handleInputChange=function(A){var D=f.props.inputValue,O=A.currentTarget.value;f.setState({inputIsHiddenAfterUpdate:!1}),f.onInputChange(O,{action:"input-change",prevInputValue:D}),f.props.menuIsOpen||f.onMenuOpen()},f.onInputFocus=function(A){f.props.onFocus&&f.props.onFocus(A),f.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(f.openAfterFocus||f.props.openMenuOnFocus)&&f.openMenu("first"),f.openAfterFocus=!1},f.onInputBlur=function(A){var D=f.props.inputValue;if(f.menuListRef&&f.menuListRef.contains(document.activeElement)){f.inputRef.focus();return}f.props.onBlur&&f.props.onBlur(A),f.onInputChange("",{action:"input-blur",prevInputValue:D}),f.onMenuClose(),f.setState({focusedValue:null,isFocused:!1})},f.onOptionHover=function(A){if(!(f.blockOptionHover||f.state.focusedOption===A)){var D=f.getFocusableOptions(),O=D.indexOf(A);f.setState({focusedOption:A,focusedOptionId:O>-1?f.getFocusedOptionId(A):null})}},f.shouldHideSelectedOptions=function(){return dD(f.props)},f.onValueInputFocus=function(A){A.preventDefault(),A.stopPropagation(),f.focus()},f.onKeyDown=function(A){var D=f.props,O=D.isMulti,z=D.backspaceRemovesValue,V=D.escapeClearsValue,Y=D.inputValue,ee=D.isClearable,ie=D.isDisabled,q=D.menuIsOpen,fe=D.onKeyDown,Ee=D.tabSelectsValue,we=D.openMenuOnFocus,ze=f.state,Ce=ze.focusedOption,Re=ze.focusedValue,Ne=ze.selectValue;if(!ie&&!(typeof fe=="function"&&(fe(A),A.defaultPrevented))){switch(f.blockOptionHover=!0,A.key){case"ArrowLeft":if(!O||Y)return;f.focusValue("previous");break;case"ArrowRight":if(!O||Y)return;f.focusValue("next");break;case"Delete":case"Backspace":if(Y)return;if(Re)f.removeValue(Re);else{if(!z)return;O?f.popValue():ee&&f.clearValue()}break;case"Tab":if(f.isComposing||A.shiftKey||!q||!Ee||!Ce||we&&f.isOptionSelected(Ce,Ne))return;f.selectOption(Ce);break;case"Enter":if(A.keyCode===229)break;if(q){if(!Ce||f.isComposing)return;f.selectOption(Ce);break}return;case"Escape":q?(f.setState({inputIsHiddenAfterUpdate:!1}),f.onInputChange("",{action:"menu-close",prevInputValue:Y}),f.onMenuClose()):ee&&V&&f.clearValue();break;case" ":if(Y)return;if(!q){f.openMenu("first");break}if(!Ce)return;f.selectOption(Ce);break;case"ArrowUp":q?f.focusOption("up"):f.openMenu("last");break;case"ArrowDown":q?f.focusOption("down"):f.openMenu("first");break;case"PageUp":if(!q)return;f.focusOption("pageup");break;case"PageDown":if(!q)return;f.focusOption("pagedown");break;case"Home":if(!q)return;f.focusOption("first");break;case"End":if(!q)return;f.focusOption("last");break;default:return}A.preventDefault()}},f.state.instancePrefix="react-select-"+(f.props.instanceId||++m4),f.state.selectValue=_E(h.value),h.menuIsOpen&&f.state.selectValue.length){var g=f.getFocusableOptionsWithIds(),_=f.buildFocusableOptions(),c=_.indexOf(f.state.selectValue[0]);f.state.focusableOptionsWithIds=g,f.state.focusedOption=_[c],f.state.focusedOptionId=gw(g,_[c])}return f}return PP(a,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&vE(this.menuListRef,this.focusedOptionRef),e4()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(f){var g=this.props,_=g.isDisabled,c=g.menuIsOpen,A=this.state.isFocused;(A&&!_&&f.isDisabled||A&&c&&!f.menuIsOpen)&&this.focusInput(),A&&_&&!f.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!A&&!_&&f.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(vE(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(f,g){this.props.onInputChange(f,g)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(f){var g=this,_=this.state,c=_.selectValue,A=_.isFocused,D=this.buildFocusableOptions(),O=f==="first"?0:D.length-1;if(!this.props.isMulti){var z=D.indexOf(c[0]);z>-1&&(O=z)}this.scrollToFocusedOptionOnUpdate=!(A&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:D[O],focusedOptionId:this.getFocusedOptionId(D[O])},function(){return g.onMenuOpen()})}},{key:"focusValue",value:function(f){var g=this.state,_=g.selectValue,c=g.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var A=_.indexOf(c);c||(A=-1);var D=_.length-1,O=-1;if(_.length){switch(f){case"previous":A===0?O=0:A===-1?O=D:O=A-1;break;case"next":A>-1&&A<D&&(O=A+1);break}this.setState({inputIsHidden:O!==-1,focusedValue:_[O]})}}}},{key:"focusOption",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",g=this.props.pageSize,_=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var A=0,D=c.indexOf(_);_||(D=-1),f==="up"?A=D>0?D-1:c.length-1:f==="down"?A=(D+1)%c.length:f==="pageup"?(A=D-g,A<0&&(A=0)):f==="pagedown"?(A=D+g,A>c.length-1&&(A=c.length-1)):f==="last"&&(A=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[A],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[A])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(mw):pn(pn({},mw),this.props.theme):mw})},{key:"getCommonProps",value:function(){var f=this.clearValue,g=this.cx,_=this.getStyles,c=this.getClassNames,A=this.getValue,D=this.selectOption,O=this.setValue,z=this.props,V=z.isMulti,Y=z.isRtl,ee=z.options,ie=this.hasValue();return{clearValue:f,cx:g,getStyles:_,getClassNames:c,getValue:A,hasValue:ie,isMulti:V,isRtl:Y,options:ee,selectOption:D,selectProps:z,setValue:O,theme:this.getTheme()}}},{key:"hasValue",value:function(){var f=this.state.selectValue;return f.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var f=this.props,g=f.isClearable,_=f.isMulti;return g===void 0?_:g}},{key:"isOptionDisabled",value:function(f,g){return cD(this.props,f,g)}},{key:"isOptionSelected",value:function(f,g){return uD(this.props,f,g)}},{key:"filterOption",value:function(f,g){return hD(this.props,f,g)}},{key:"formatOptionLabel",value:function(f,g){if(typeof this.props.formatOptionLabel=="function"){var _=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(f,{context:g,inputValue:_,selectValue:c})}else return this.getOptionLabel(f)}},{key:"formatGroupLabel",value:function(f){return this.props.formatGroupLabel(f)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var f=this.props,g=f.isDisabled,_=f.isSearchable,c=f.inputId,A=f.inputValue,D=f.tabIndex,O=f.form,z=f.menuIsOpen,V=f.required,Y=this.getComponents(),ee=Y.Input,ie=this.state,q=ie.inputIsHidden,fe=ie.ariaSelection,Ee=this.commonProps,we=c||this.getElementId("input"),ze=pn(pn(pn({"aria-autocomplete":"list","aria-expanded":z,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":V,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},z&&{"aria-controls":this.getElementId("listbox")}),!_&&{"aria-readonly":!0}),this.hasValue()?fe?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return _?te.createElement(ee,gn({},Ee,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:we,innerRef:this.getInputRef,isDisabled:g,isHidden:q,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:D,form:O,type:"text",value:A},ze)):te.createElement(VF,gn({id:we,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Cx,onFocus:this.onInputFocus,disabled:g,tabIndex:D,inputMode:"none",form:O,value:""},ze))})},{key:"renderPlaceholderOrValue",value:function(){var f=this,g=this.getComponents(),_=g.MultiValue,c=g.MultiValueContainer,A=g.MultiValueLabel,D=g.MultiValueRemove,O=g.SingleValue,z=g.Placeholder,V=this.commonProps,Y=this.props,ee=Y.controlShouldRenderValue,ie=Y.isDisabled,q=Y.isMulti,fe=Y.inputValue,Ee=Y.placeholder,we=this.state,ze=we.selectValue,Ce=we.focusedValue,Re=we.isFocused;if(!this.hasValue()||!ee)return fe?null:te.createElement(z,gn({},V,{key:"placeholder",isDisabled:ie,isFocused:Re,innerProps:{id:this.getElementId("placeholder")}}),Ee);if(q)return ze.map(function(at,Te){var it=at===Ce,Dt="".concat(f.getOptionLabel(at),"-").concat(f.getOptionValue(at));return te.createElement(_,gn({},V,{components:{Container:c,Label:A,Remove:D},isFocused:it,isDisabled:ie,key:Dt,index:Te,removeProps:{onClick:function(){return f.removeValue(at)},onTouchEnd:function(){return f.removeValue(at)},onMouseDown:function(Ut){Ut.preventDefault()}},data:at}),f.formatOptionLabel(at,"value"))});if(fe)return null;var Ne=ze[0];return te.createElement(O,gn({},V,{data:Ne,isDisabled:ie}),this.formatOptionLabel(Ne,"value"))}},{key:"renderClearIndicator",value:function(){var f=this.getComponents(),g=f.ClearIndicator,_=this.commonProps,c=this.props,A=c.isDisabled,D=c.isLoading,O=this.state.isFocused;if(!this.isClearable()||!g||A||!this.hasValue()||D)return null;var z={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return te.createElement(g,gn({},_,{innerProps:z,isFocused:O}))}},{key:"renderLoadingIndicator",value:function(){var f=this.getComponents(),g=f.LoadingIndicator,_=this.commonProps,c=this.props,A=c.isDisabled,D=c.isLoading,O=this.state.isFocused;if(!g||!D)return null;var z={"aria-hidden":"true"};return te.createElement(g,gn({},_,{innerProps:z,isDisabled:A,isFocused:O}))}},{key:"renderIndicatorSeparator",value:function(){var f=this.getComponents(),g=f.DropdownIndicator,_=f.IndicatorSeparator;if(!g||!_)return null;var c=this.commonProps,A=this.props.isDisabled,D=this.state.isFocused;return te.createElement(_,gn({},c,{isDisabled:A,isFocused:D}))}},{key:"renderDropdownIndicator",value:function(){var f=this.getComponents(),g=f.DropdownIndicator;if(!g)return null;var _=this.commonProps,c=this.props.isDisabled,A=this.state.isFocused,D={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return te.createElement(g,gn({},_,{innerProps:D,isDisabled:c,isFocused:A}))}},{key:"renderMenu",value:function(){var f=this,g=this.getComponents(),_=g.Group,c=g.GroupHeading,A=g.Menu,D=g.MenuList,O=g.MenuPortal,z=g.LoadingMessage,V=g.NoOptionsMessage,Y=g.Option,ee=this.commonProps,ie=this.state.focusedOption,q=this.props,fe=q.captureMenuScroll,Ee=q.inputValue,we=q.isLoading,ze=q.loadingMessage,Ce=q.minMenuHeight,Re=q.maxMenuHeight,Ne=q.menuIsOpen,at=q.menuPlacement,Te=q.menuPosition,it=q.menuPortalTarget,Dt=q.menuShouldBlockScroll,Mt=q.menuShouldScrollIntoView,Ut=q.noOptionsMessage,Ht=q.onMenuScrollToTop,Yt=q.onMenuScrollToBottom;if(!Ne)return null;var Ve=function(xt,St){var Nt=xt.type,Zt=xt.data,Jt=xt.isDisabled,on=xt.isSelected,Sn=xt.label,Ri=xt.value,Tr=ie===Zt,Fi=Jt?void 0:function(){return f.onOptionHover(Zt)},ta=Jt?void 0:function(){return f.selectOption(Zt)},Nn="".concat(f.getElementId("option"),"-").concat(St),bn={id:Nn,onClick:ta,onMouseMove:Fi,onMouseOver:Fi,tabIndex:-1,role:"option","aria-selected":f.state.isAppleDevice?void 0:on};return te.createElement(Y,gn({},ee,{innerProps:bn,data:Zt,isDisabled:Jt,isSelected:on,key:Nn,label:Sn,type:Nt,value:Ri,isFocused:Tr,innerRef:Tr?f.getFocusedOptionRef:void 0}),f.formatOptionLabel(xt.data,"menu"))},ut;if(this.hasOptions())ut=this.getCategorizedOptions().map(function(tt){if(tt.type==="group"){var xt=tt.data,St=tt.options,Nt=tt.index,Zt="".concat(f.getElementId("group"),"-").concat(Nt),Jt="".concat(Zt,"-heading");return te.createElement(_,gn({},ee,{key:Zt,data:xt,options:St,Heading:c,headingProps:{id:Jt,data:tt.data},label:f.formatGroupLabel(tt.data)}),tt.options.map(function(on){return Ve(on,"".concat(Nt,"-").concat(on.index))}))}else if(tt.type==="option")return Ve(tt,"".concat(tt.index))});else if(we){var Tt=ze({inputValue:Ee});if(Tt===null)return null;ut=te.createElement(z,ee,Tt)}else{var gt=Ut({inputValue:Ee});if(gt===null)return null;ut=te.createElement(V,ee,gt)}var $t={minMenuHeight:Ce,maxMenuHeight:Re,menuPlacement:at,menuPosition:Te,menuShouldScrollIntoView:Mt},Le=te.createElement(v5,gn({},ee,$t),function(tt){var xt=tt.ref,St=tt.placerProps,Nt=St.placement,Zt=St.maxHeight;return te.createElement(A,gn({},ee,$t,{innerRef:xt,innerProps:{onMouseDown:f.onMenuMouseDown,onMouseMove:f.onMenuMouseMove},isLoading:we,placement:Nt}),te.createElement(YF,{captureEnabled:fe,onTopArrive:Ht,onBottomArrive:Yt,lockEnabled:Dt},function(Jt){return te.createElement(D,gn({},ee,{innerRef:function(Sn){f.getMenuListRef(Sn),Jt(Sn)},innerProps:{role:"listbox","aria-multiselectable":ee.isMulti,id:f.getElementId("listbox")},isLoading:we,maxHeight:Zt,focusedOption:ie}),ut)}))});return it||Te==="fixed"?te.createElement(O,gn({},ee,{appendTo:it,controlElement:this.controlRef,menuPlacement:at,menuPosition:Te}),Le):Le}},{key:"renderFormField",value:function(){var f=this,g=this.props,_=g.delimiter,c=g.isDisabled,A=g.isMulti,D=g.name,O=g.required,z=this.state.selectValue;if(O&&!this.hasValue()&&!c)return te.createElement(XF,{name:D,onFocus:this.onValueInputFocus});if(!(!D||c))if(A)if(_){var V=z.map(function(ie){return f.getOptionValue(ie)}).join(_);return te.createElement("input",{name:D,type:"hidden",value:V})}else{var Y=z.length>0?z.map(function(ie,q){return te.createElement("input",{key:"i-".concat(q),name:D,type:"hidden",value:f.getOptionValue(ie)})}):te.createElement("input",{name:D,type:"hidden",value:""});return te.createElement("div",null,Y)}else{var ee=z[0]?this.getOptionValue(z[0]):"";return te.createElement("input",{name:D,type:"hidden",value:ee})}}},{key:"renderLiveRegion",value:function(){var f=this.commonProps,g=this.state,_=g.ariaSelection,c=g.focusedOption,A=g.focusedValue,D=g.isFocused,O=g.selectValue,z=this.getFocusableOptions();return te.createElement(NF,gn({},f,{id:this.getElementId("live-region"),ariaSelection:_,focusedOption:c,focusedValue:A,isFocused:D,selectValue:O,focusableOptions:z,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var f=this.getComponents(),g=f.Control,_=f.IndicatorsContainer,c=f.SelectContainer,A=f.ValueContainer,D=this.props,O=D.className,z=D.id,V=D.isDisabled,Y=D.menuIsOpen,ee=this.state.isFocused,ie=this.commonProps=this.getCommonProps();return te.createElement(c,gn({},ie,{className:O,innerProps:{id:z,onKeyDown:this.onKeyDown},isDisabled:V,isFocused:ee}),this.renderLiveRegion(),te.createElement(g,gn({},ie,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:V,isFocused:ee,menuIsOpen:Y}),te.createElement(A,gn({},ie,{isDisabled:V}),this.renderPlaceholderOrValue(),this.renderInput()),te.createElement(_,gn({},ie,{isDisabled:V}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(f,g){var _=g.prevProps,c=g.clearFocusValueOnUpdate,A=g.inputIsHiddenAfterUpdate,D=g.ariaSelection,O=g.isFocused,z=g.prevWasFocused,V=g.instancePrefix,Y=f.options,ee=f.value,ie=f.menuIsOpen,q=f.inputValue,fe=f.isMulti,Ee=_E(ee),we={};if(_&&(ee!==_.value||Y!==_.options||ie!==_.menuIsOpen||q!==_.inputValue)){var ze=ie?d4(f,Ee):[],Ce=ie?OE(px(f,Ee),"".concat(V,"-option")):[],Re=c?f4(g,Ee):null,Ne=p4(g,ze),at=gw(Ce,Ne);we={selectValue:Ee,focusedOption:Ne,focusedOptionId:at,focusableOptionsWithIds:Ce,focusedValue:Re,clearFocusValueOnUpdate:!1}}var Te=A!=null&&f!==_?{inputIsHidden:A,inputIsHiddenAfterUpdate:void 0}:{},it=D,Dt=O&&z;return O&&!Dt&&(it={value:rx(fe,Ee,Ee[0]||null),options:Ee,action:"initial-input-focus"},Dt=!z),D?.action==="initial-input-focus"&&(it=null),pn(pn(pn({},we),Te),{},{prevProps:f,ariaSelection:it,prevWasFocused:Dt})}}]),a})(te.Component);fD.defaultProps=h4;var g4=te.forwardRef(function(i,n){var a=LP(i);return te.createElement(fD,gn({ref:n},a))}),NE=g4;function y4({itinerary1Legs:i,itinerary2Legs:n,selectedLeg1Ids:a,selectedLeg2Ids:h,setSelectedLeg1Ids:f,setSelectedLeg2Ids:g,selectedIndexes:_,timeZone:c}){const A=iE(i,1,c),D=iE(n,2,c);return Q.jsx("div",{className:"compare-section-divider",children:Q.jsxs("div",{className:"compare-legs-select-container",children:[Q.jsxs("div",{className:"compare-leg-select-column",children:[Q.jsxs("label",{className:"compare-leg-select-label",children:["Itinerary #",_[0]+1," Legs:"]}),Q.jsx(NE,{isMulti:!0,options:A,value:A.filter(O=>a.includes(O.value)),onChange:O=>{const z=O?O.map(V=>V.value):[];f(z)},placeholder:"Select legs to compare...",className:"compare-leg-select",classNamePrefix:"compare-leg-select"})]}),Q.jsxs("div",{className:"compare-leg-select-column",children:[Q.jsxs("label",{className:"compare-leg-select-label",children:["Itinerary #",_[1]+1," Legs:"]}),Q.jsx(NE,{isMulti:!0,options:D,value:D.filter(O=>h.includes(O.value)),onChange:O=>{const z=O?O.map(V=>V.value):[];g(z)},placeholder:"Select legs to compare...",className:"compare-leg-select",classNamePrefix:"compare-leg-select"})]})]})})}const _4=(i,n)=>{if(!i)return`itinerary_${n}_leg_invalid`;if(i.id)return`itinerary_${n}_leg_${i.id}`;const a=`${i.mode}_${i.aimedStartTime}_${i.aimedEndTime}_${i.fromPlace?.name||"unknown"}_${i.toPlace?.name||"unknown"}`;return`itinerary_${n}_leg_${a}`};function v4({itinerary1:i,itinerary2:n,selectedLegIds:a,selectedIndexes:h,timeZone:f}){return a.length===0?null:Q.jsxs("div",{className:"compare-selected-legs-section",children:[Q.jsx("h6",{className:"compare-selected-legs-title",children:"Selected Legs Comparison"}),Q.jsxs(Mv,{striped:!0,bordered:!0,hover:!0,children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{children:"Itinerary"}),Q.jsx("th",{children:"From"}),Q.jsx("th",{children:"To"}),Q.jsx("th",{children:"Mode"}),Q.jsx("th",{children:"Line"}),Q.jsx("th",{children:"Start Time"}),Q.jsx("th",{children:"End Time"}),Q.jsx("th",{children:"Duration"}),Q.jsx("th",{children:"Distance"}),Q.jsx("th",{children:"Cost"})]})}),Q.jsx("tbody",{children:[i,n].map((g,_)=>g.legs.filter(c=>c&&a.includes(c.id||`leg${_+1}_${g.legs.indexOf(c)}`)).map(c=>Q.jsxs("tr",{children:[Q.jsx("td",{children:Q.jsxs("strong",{children:["#",h[_]+1]})}),Q.jsx("td",{children:c.fromPlace?.name||"-"}),Q.jsx("td",{children:c.toPlace?.name||"-"}),Q.jsx("td",{children:c.mode}),Q.jsx("td",{children:c.line?.publicCode||c.line?.name||"-"}),Q.jsx("td",{children:xu(c.aimedStartTime,f,"short")}),Q.jsx("td",{children:xu(c.aimedEndTime,f,"short")}),Q.jsx("td",{children:W2(c.duration)}),Q.jsx("td",{children:H2(c.distance)}),Q.jsxs("td",{children:["",c.generalizedCost]})]},_4(c,_))))})]})]})}function b4({show:i,onHide:n,tripQueryResult:a,selectedIndexes:h}){const f=te.useContext(f0),[g,_]=te.useState([]),[c,A]=te.useState([]),D=[...g,...c];if(!a||h.length!==2)return null;const O=a.trip.tripPatterns[h[0]],z=a.trip.tripPatterns[h[1]],V=nE(O,f),Y=nE(z,f);return Q.jsxs(Kb,{show:i,onHide:n,centered:!0,className:"full-width-modal",children:[Q.jsx(Kb.Header,{closeButton:!0,children:Q.jsx(Kb.Title,{children:"Compare Itineraries"})}),Q.jsxs(Kb.Body,{children:[Q.jsx(CP,{itinerary1:O,itinerary2:z,summary1:V,summary2:Y,selectedIndexes:h}),Q.jsx(y4,{itinerary1Legs:O.legs,itinerary2Legs:z.legs,selectedLeg1Ids:g,selectedLeg2Ids:c,setSelectedLeg1Ids:_,setSelectedLeg2Ids:A,selectedIndexes:h,timeZone:f}),Q.jsx(v4,{itinerary1:O,itinerary2:z,selectedLegIds:D,selectedIndexes:h,timeZone:f})]})]})}const x4=c0(`
query trip(
  $accessEgressPenalty: [PenaltyForStreetMode!]
  $alightSlackDefault: Int
  $alightSlackList: [TransportModeSlack]
  $arriveBy: Boolean
  $banned: InputBanned
  $bikePreferences: BikePreferencesInput
  $boardSlackDefault: Int
  $boardSlackList: [TransportModeSlack]
  $bookingTime: DateTime
  $dateTime: DateTime
  $filters: [TripFilterInput!]
  $from: Location!
  $ignoreRealtimeUpdates: Boolean
  $includePlannedCancellations: Boolean
  $includeRealtimeCancellations: Boolean
  $itineraryFilters: ItineraryFilters
  $locale: Locale
  $maxAccessEgressDurationForMode: [StreetModeDurationInput!]
  $maxDirectDurationForMode: [StreetModeDurationInput!]
  $maximumAdditionalTransfers: Int
  $maximumTransfers: Int
  $modes: Modes
  $numTripPatterns: Int
  $pageCursor: String
  $relaxTransitGroupPriority: RelaxCostInput
  $scooterPreferences: ScooterPreferencesInput
  $searchWindow: Int
  $timetableView: Boolean
  $to: Location!
  $transferPenalty: Int
  $transferSlack: Int
  $useBikeRentalAvailabilityInformation: Boolean
  $via: [TripViaLocationInput!]
  $waitReluctance: Float
  $walkReluctance: Float
  $walkSpeed: Float
  $wheelchairAccessible: Boolean
  $whiteListed: InputWhiteListed
) {
  trip(
    accessEgressPenalty: $accessEgressPenalty
    alightSlackDefault: $alightSlackDefault
    alightSlackList: $alightSlackList
    arriveBy: $arriveBy
    banned: $banned
    bikePreferences: $bikePreferences
    boardSlackDefault: $boardSlackDefault
    boardSlackList: $boardSlackList
    bookingTime: $bookingTime
    dateTime: $dateTime
    filters: $filters
    from: $from
    ignoreRealtimeUpdates: $ignoreRealtimeUpdates
    includePlannedCancellations: $includePlannedCancellations
    includeRealtimeCancellations: $includeRealtimeCancellations
    itineraryFilters: $itineraryFilters
    locale: $locale
    maxAccessEgressDurationForMode: $maxAccessEgressDurationForMode
    maxDirectDurationForMode: $maxDirectDurationForMode
    maximumAdditionalTransfers: $maximumAdditionalTransfers
    maximumTransfers: $maximumTransfers
    modes: $modes
    numTripPatterns: $numTripPatterns
    pageCursor: $pageCursor
    relaxTransitGroupPriority: $relaxTransitGroupPriority
    scooterPreferences: $scooterPreferences
    searchWindow: $searchWindow
    timetableView: $timetableView
    to: $to
    transferPenalty: $transferPenalty
    transferSlack: $transferSlack
    useBikeRentalAvailabilityInformation: $useBikeRentalAvailabilityInformation
    via: $via
    waitReluctance: $waitReluctance
    walkReluctance: $walkReluctance
    walkSpeed: $walkSpeed
    wheelchairAccessible: $wheelchairAccessible
    whiteListed: $whiteListed
  ) 
    {
    previousPageCursor
    nextPageCursor
    tripPatterns {
        aimedStartTime
        aimedEndTime
        expectedEndTime
        expectedStartTime
        duration
        distance
        generalizedCost
        legs {
            id
            mode
            aimedStartTime
            aimedEndTime
            expectedEndTime
            expectedStartTime
            realtime
            distance
            duration
            generalizedCost
            fromPlace {
                name
                quay {
                    id
                }
            }
            toPlace {
                name
                quay {
                    id
                }
            }
            fromEstimatedCall {
                destinationDisplay {
                    frontText
                }
            }
            line {
                publicCode
                name
                id
                presentation {
                    colour
                }
            }
            authority {
                name
                id
            }
            pointsOnLink {
                points
            }
            interchangeTo {
                staySeated
            }
            interchangeFrom {
                staySeated
            }
        }
        systemNotices {
            tag
        }
    }
  }
}`),w4=bo(x4);function T4(i){const n={};return _2(i,{OperationDefinition(a){a.operation==="query"&&a.variableDefinitions&&a.variableDefinitions.forEach(h=>{const f=h.variable.name.value;n[f]=bo(h.type)})}}),n}function pD(i){const n=BA(w4),a=T4(n),h=Object.keys(i).filter(g=>i[g]!==void 0),f=_2(n,{OperationDefinition(g){if(g.operation==="query"){const _=g.variableDefinitions?.filter(c=>{const A=c.variable.name.value;return h.includes(A)&&a[A]});return{...g,variableDefinitions:_||[]}}return g},Field(g){if(g.name.value==="trip"&&g.arguments){const _=g.arguments.filter(c=>{if(c.value.kind==="Variable"){const A=c.value.name.value;return h.includes(A)&&a[A]}return!0});return{...g,arguments:_}}return g}});return bo(f)}function mD(i){const n={};return Object.keys(i).forEach(a=>{const h=i[a];h!==void 0&&(n[a]=h)}),n}const S4=i=>{const[n,a]=te.useState(null),[h,f]=te.useState(!1),[g,_]=te.useState(null),c=te.useCallback(async A=>{if(h)console.warn("Wait for previous search to finish");else if(i){f(!0),_(null);try{const D=A?{...i,pageCursor:A}:i,O=mD(D),z=pD(D);a(await w2(Xx(),z,O))}catch(D){console.error("Error at useTripQuery",D),_(D),a(null)}f(!1)}else console.warn("Can't search without variables")},[a,i,h]);return te.useEffect(()=>{PE(i?.from)&&PE(i?.to)&&c()},[i?.from,i?.to]),[n,h,c,g]};function PE(i){return i&&(i.coordinates||i.place)}const E4=c0(`
  query serverInfo {
    serverInfo {
      version
      otpSerializationVersionId
      buildConfigVersion
      routerConfigVersion
      gitCommit
      gitBranch
      internalTransitModelTimeZone
    }
  }
`),A4=()=>{const[i,n]=te.useState(null);return te.useEffect(()=>{(async()=>n(await w2(Xx(),E4)))()},[]),i?.serverInfo},M4={from:{},to:{},dateTime:new Date().toISOString()},C4=()=>{const n=new URLSearchParams(window.location.search).get("variables");return n?JSON.parse(decodeURIComponent(n)):M4},D4=i=>{const n=new URLSearchParams(window.location.search);n.set("variables",encodeURIComponent(JSON.stringify(i))),history.pushState({},"","?"+n.toString()+window.location.hash)},I4=()=>{const[i,n]=te.useState(C4());return te.useEffect(()=>{D4(i)},[i]),{tripQueryVariables:i,setTripQueryVariables:n}};function R4({target:i,serverInfo:n}){return Q.jsx(SC,{target:i.current,show:!!n,placement:"right",children:Q.jsx("div",{style:{position:"absolute",backgroundColor:"rgba(255, 100, 100, 0.85)",padding:"2px 10px",color:"white",borderRadius:3},children:Q.jsx("pre",{children:JSON.stringify(n,null,2)})})})}const k4="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20width='256px'%20height='256px'%20viewBox='0%200%20125.333%20125.334'%20xml:space='preserve'%3e%3cpath%20fill='%232179BF'%20d='M62.668,0C33.83,0,9.559,19.483,2.258,46l72.681-0.003c4.729-0.011,8.555-3.837,8.561-8.568%20c-0.006-4.729-3.831-8.555-8.561-8.559c-4.731,0.004-8.557,3.83-8.564,8.559v4.592h-13.7v-4.592%20c0-12.294,9.962-22.261,22.265-22.263c12.298,0.002,22.262,9.969,22.266,22.263c-0.003,12.3-9.968,22.264-22.266,22.271H0.074%20C0.028,60.684,0,61.671,0,62.666c0,34.611,28.057,62.668,62.668,62.668c34.609,0,62.665-28.057,62.665-62.668%20C125.333,28.057,97.277,0,62.668,0%20M92.222,85.667v-3.473v-4.86l-47.058,0.003c-4.729,0.011-8.556,3.837-8.561,8.568%20c0.005,4.728,3.831,8.555,8.561,8.559c4.731-0.004,8.558-3.831,8.565-8.559v-4.592h13.699v4.592%20c0,12.294-9.961,22.261-22.265,22.263c-12.298-0.002-22.26-9.969-22.264-22.263c0.002-12.3,9.966-22.264,22.264-22.271h47.058V56.12%20l21.712,14.775L92.222,85.667z'/%3e%3c/svg%3e";function O4({serverInfo:i}){const[n,a]=te.useState(!1),h=te.useRef(null);return Q.jsxs("div",{className:"logo-container box",style:{display:"flex"},children:[Q.jsx(gN.Brand,{onClick:()=>a(f=>!f),children:Q.jsxs("div",{ref:h,children:[Q.jsx("img",{alt:"",src:k4,width:"50",height:"50",className:"logo-image"}),"OTP Debug",n&&Q.jsx(R4,{serverInfo:i,target:h})]})}),Q.jsxs("div",{className:"details",children:[Q.jsxs("div",{children:["Version: ",i?.version]}),Q.jsxs("div",{children:["Time zone: ",i?.internalTransitModelTimeZone]})]})]})}const zE=7,FE="-{0,1}\\d+(\\.\\d+){0,1}",L4="("+FE+")(\\s+)("+FE+")";function N4(i){const n=i.match(L4);return n?{coordinates:{latitude:+n[1],longitude:+n[4]}}:{place:i}}function P4(i){return i.coordinates?`${i.coordinates?.latitude.toPrecision(zE)} ${i.coordinates?.longitude.toPrecision(zE)}`:i.place?i.place:null}function jE({id:i,label:n,tripQueryVariables:a,setTripQueryVariables:h,locationFieldKey:f}){const g=a[f],_=P4(g)||"",[c,A]=te.useState(_),[D,O]=te.useState(g);D!==g&&(O(g),A(_));const z=te.useCallback(V=>{const Y=N4(V)||{};h({...a,[f]:Y})},[a,h,f]);return Q.jsxs(zi.Group,{children:[Q.jsx(zi.Label,{column:"sm",htmlFor:i,children:n}),Q.jsx(zi.Control,{type:"text",id:i,size:"sm",placeholder:"[Click in map]",className:"input-medium",onChange:V=>{A(V.target.value)},onBlur:V=>{z(V.target.value)},value:c})]})}const z4="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='100pt'%20height='100pt'%20version='1.1'%20viewBox='0%200%20100%20100'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m92.223%2050.707c-2.5234%200-4.5469%202.0195-4.5469%204.5469v13.938h-51.516l10.203-10.203c1.8164-1.8164%201.8164-4.6445%200-6.4648-1.8164-1.8164-4.6445-1.8164-6.4648%200l-18.082%2018.082c-1.7188%201.7188-1.8164%204.6445%200%206.3633l18.082%2018.383c0.91016%200.91016%202.0195%201.3125%203.2305%201.3125%201.1094%200%202.3242-0.40234%203.2305-1.3125%201.8164-1.7188%201.8164-4.6445%200.10156-6.4648l-10.703-10.605h56.465c2.5234%200%204.5469-2.0195%204.5469-4.5469v-18.48c0-2.5273-2.0234-4.5469-4.5469-4.5469z'/%3e%3cpath%20d='m63.738%2029.695-10.305%2010.406c-1.7188%201.8164-1.7188%204.6445%200.10156%206.4648%200.91016%200.91016%202.0195%201.3125%203.2305%201.3125s2.3242-0.40234%203.2305-1.3125l18.082-18.383c1.7188-1.8164%201.7188-4.6445%200-6.3633l-18.18-18.184c-1.8164-1.8164-4.6445-1.8164-6.4648%200-1.8164%201.8164-1.8164%204.6445%200%206.4648l10.504%2010.504h-56.363c-2.5234%200-4.5469%202.0195-4.5469%204.5469v18.383c0%202.5234%202.0195%204.5469%204.5469%204.5469%202.5234%200%204.5469-2.0195%204.5469-4.5469v-13.84z'/%3e%3c/svg%3e";function F4({tripQueryVariables:i,setTripQueryVariables:n}){const a=()=>{n({...i,from:i.to,to:i.from})};return Q.jsx("button",{className:"swap-from-to",onClick:a,title:"Swap from/to",children:Q.jsx("img",{alt:"Swap from/to",src:z4})})}function j4({tripQueryVariables:i,setTripQueryVariables:n}){const a=h=>{if(h===void 0){const f={...i};delete f.arriveBy,n(f)}else n({...i,arriveBy:h})};return Q.jsxs(zi.Group,{children:[Q.jsx(zi.Label,{column:"sm",htmlFor:"departureArrivalSelect",children:"Depart/Arrive"}),Q.jsxs(zi.Select,{size:"sm",className:"input-medium",onChange:h=>h.target.value==="arrival"?a(!0):a(void 0),value:i.arriveBy?"arrival":"departure",style:{verticalAlign:"bottom"},children:[Q.jsx("option",{value:"arrival",children:"Arrive by"}),Q.jsx("option",{value:"departure",children:"Depart after"})]})]})}class ne extends Array{constructor(n,a){if(super(n),this.sign=a,Object.setPrototypeOf(this,ne.prototype),n>ne.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(n){var a=Math.floor,h=Number.isFinite;if(typeof n=="number"){if(n===0)return ne.__zero();if(ne.__isOneDigitInt(n))return 0>n?ne.__oneDigit(-n,!0):ne.__oneDigit(n,!1);if(!h(n)||a(n)!==n)throw new RangeError("The number "+n+" cannot be converted to BigInt because it is not an integer");return ne.__fromDouble(n)}if(typeof n=="string"){const f=ne.__fromString(n);if(f===null)throw new SyntaxError("Cannot convert "+n+" to a BigInt");return f}if(typeof n=="boolean")return n===!0?ne.__oneDigit(1,!1):ne.__zero();if(typeof n=="object"){if(n.constructor===ne)return n;const f=ne.__toPrimitive(n);return ne.BigInt(f)}throw new TypeError("Cannot convert "+n+" to a BigInt")}toDebugString(){const n=["BigInt["];for(const a of this)n.push((a&&(a>>>0).toString(16))+", ");return n.push("]"),n.join("")}toString(n=10){if(2>n||36<n)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(n&n-1)==0?ne.__toStringBasePowerOfTwo(this,n):ne.__toStringGeneric(this,n,!1)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(n){const a=n.length;if(a===0)return 0;if(a===1){const q=n.__unsignedDigit(0);return n.sign?-q:q}const h=n.__digit(a-1),f=ne.__clz30(h),g=30*a-f;if(1024<g)return n.sign?-1/0:1/0;let _=g-1,c=h,A=a-1;const D=f+3;let O=D===32?0:c<<D;O>>>=12;const z=D-12;let V=12<=D?0:c<<20+D,Y=20+D;for(0<z&&0<A&&(A--,c=n.__digit(A),O|=c>>>30-z,V=c<<z+2,Y=z+2);0<Y&&0<A;)A--,c=n.__digit(A),V|=30<=Y?c<<Y-30:c>>>30-Y,Y-=30;const ee=ne.__decideRounding(n,Y,A,c);if((ee===1||ee===0&&(1&V)==1)&&(V=V+1>>>0,V===0&&(O++,O>>>20!=0&&(O=0,_++,1023<_))))return n.sign?-1/0:1/0;const ie=n.sign?-2147483648:0;return _=_+1023<<20,ne.__kBitConversionInts[1]=ie|_|O,ne.__kBitConversionInts[0]=V,ne.__kBitConversionDouble[0]}static unaryMinus(n){if(n.length===0)return n;const a=n.__copy();return a.sign=!n.sign,a}static bitwiseNot(n){return n.sign?ne.__absoluteSubOne(n).__trim():ne.__absoluteAddOne(n,!0)}static exponentiate(n,a){if(a.sign)throw new RangeError("Exponent must be positive");if(a.length===0)return ne.__oneDigit(1,!1);if(n.length===0)return n;if(n.length===1&&n.__digit(0)===1)return n.sign&&(1&a.__digit(0))==0?ne.unaryMinus(n):n;if(1<a.length)throw new RangeError("BigInt too big");let h=a.__unsignedDigit(0);if(h===1)return n;if(h>=ne.__kMaxLengthBits)throw new RangeError("BigInt too big");if(n.length===1&&n.__digit(0)===2){const _=1+(0|h/30),c=n.sign&&(1&h)!=0,A=new ne(_,c);A.__initializeDigits();const D=1<<h%30;return A.__setDigit(_-1,D),A}let f=null,g=n;for((1&h)!=0&&(f=n),h>>=1;h!==0;h>>=1)g=ne.multiply(g,g),(1&h)!=0&&(f===null?f=g:f=ne.multiply(f,g));return f}static multiply(n,a){if(n.length===0)return n;if(a.length===0)return a;let h=n.length+a.length;30<=n.__clzmsd()+a.__clzmsd()&&h--;const f=new ne(h,n.sign!==a.sign);f.__initializeDigits();for(let g=0;g<n.length;g++)ne.__multiplyAccumulate(a,n.__digit(g),f,g);return f.__trim()}static divide(n,a){if(a.length===0)throw new RangeError("Division by zero");if(0>ne.__absoluteCompare(n,a))return ne.__zero();const h=n.sign!==a.sign,f=a.__unsignedDigit(0);let g;if(a.length===1&&32767>=f){if(f===1)return h===n.sign?n:ne.unaryMinus(n);g=ne.__absoluteDivSmall(n,f,null)}else g=ne.__absoluteDivLarge(n,a,!0,!1);return g.sign=h,g.__trim()}static remainder(n,a){if(a.length===0)throw new RangeError("Division by zero");if(0>ne.__absoluteCompare(n,a))return n;const h=a.__unsignedDigit(0);if(a.length===1&&32767>=h){if(h===1)return ne.__zero();const g=ne.__absoluteModSmall(n,h);return g===0?ne.__zero():ne.__oneDigit(g,n.sign)}const f=ne.__absoluteDivLarge(n,a,!1,!0);return f.sign=n.sign,f.__trim()}static add(n,a){const h=n.sign;return h===a.sign?ne.__absoluteAdd(n,a,h):0<=ne.__absoluteCompare(n,a)?ne.__absoluteSub(n,a,h):ne.__absoluteSub(a,n,!h)}static subtract(n,a){const h=n.sign;return h===a.sign?0<=ne.__absoluteCompare(n,a)?ne.__absoluteSub(n,a,h):ne.__absoluteSub(a,n,!h):ne.__absoluteAdd(n,a,h)}static leftShift(n,a){return a.length===0||n.length===0?n:a.sign?ne.__rightShiftByAbsolute(n,a):ne.__leftShiftByAbsolute(n,a)}static signedRightShift(n,a){return a.length===0||n.length===0?n:a.sign?ne.__leftShiftByAbsolute(n,a):ne.__rightShiftByAbsolute(n,a)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(n,a){return 0>ne.__compareToBigInt(n,a)}static lessThanOrEqual(n,a){return 0>=ne.__compareToBigInt(n,a)}static greaterThan(n,a){return 0<ne.__compareToBigInt(n,a)}static greaterThanOrEqual(n,a){return 0<=ne.__compareToBigInt(n,a)}static equal(n,a){if(n.sign!==a.sign||n.length!==a.length)return!1;for(let h=0;h<n.length;h++)if(n.__digit(h)!==a.__digit(h))return!1;return!0}static notEqual(n,a){return!ne.equal(n,a)}static bitwiseAnd(n,a){var h=Math.max;if(!n.sign&&!a.sign)return ne.__absoluteAnd(n,a).__trim();if(n.sign&&a.sign){const f=h(n.length,a.length)+1;let g=ne.__absoluteSubOne(n,f);const _=ne.__absoluteSubOne(a);return g=ne.__absoluteOr(g,_,g),ne.__absoluteAddOne(g,!0,g).__trim()}return n.sign&&([n,a]=[a,n]),ne.__absoluteAndNot(n,ne.__absoluteSubOne(a)).__trim()}static bitwiseXor(n,a){var h=Math.max;if(!n.sign&&!a.sign)return ne.__absoluteXor(n,a).__trim();if(n.sign&&a.sign){const _=h(n.length,a.length),c=ne.__absoluteSubOne(n,_),A=ne.__absoluteSubOne(a);return ne.__absoluteXor(c,A,c).__trim()}const f=h(n.length,a.length)+1;n.sign&&([n,a]=[a,n]);let g=ne.__absoluteSubOne(a,f);return g=ne.__absoluteXor(g,n,g),ne.__absoluteAddOne(g,!0,g).__trim()}static bitwiseOr(n,a){var h=Math.max;const f=h(n.length,a.length);if(!n.sign&&!a.sign)return ne.__absoluteOr(n,a).__trim();if(n.sign&&a.sign){let _=ne.__absoluteSubOne(n,f);const c=ne.__absoluteSubOne(a);return _=ne.__absoluteAnd(_,c,_),ne.__absoluteAddOne(_,!0,_).__trim()}n.sign&&([n,a]=[a,n]);let g=ne.__absoluteSubOne(a,f);return g=ne.__absoluteAndNot(g,n,g),ne.__absoluteAddOne(g,!0,g).__trim()}static asIntN(n,a){var h=Math.floor;if(a.length===0)return a;if(n=h(n),0>n)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(n===0)return ne.__zero();if(n>=ne.__kMaxLengthBits)return a;const f=0|(n+29)/30;if(a.length<f)return a;const g=a.__unsignedDigit(f-1),_=1<<(n-1)%30;if(a.length===f&&g<_)return a;if((g&_)!==_)return ne.__truncateToNBits(n,a);if(!a.sign)return ne.__truncateAndSubFromPowerOfTwo(n,a,!0);if((g&_-1)==0){for(let c=f-2;0<=c;c--)if(a.__digit(c)!==0)return ne.__truncateAndSubFromPowerOfTwo(n,a,!1);return a.length===f&&g===_?a:ne.__truncateToNBits(n,a)}return ne.__truncateAndSubFromPowerOfTwo(n,a,!1)}static asUintN(n,a){var h=Math.floor;if(a.length===0)return a;if(n=h(n),0>n)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(n===0)return ne.__zero();if(a.sign){if(n>ne.__kMaxLengthBits)throw new RangeError("BigInt too big");return ne.__truncateAndSubFromPowerOfTwo(n,a,!1)}if(n>=ne.__kMaxLengthBits)return a;const f=0|(n+29)/30;if(a.length<f)return a;const g=n%30;return a.length==f&&(g===0||!(a.__digit(f-1)>>>g))?a:ne.__truncateToNBits(n,a)}static ADD(n,a){if(n=ne.__toPrimitive(n),a=ne.__toPrimitive(a),typeof n=="string")return typeof a!="string"&&(a=a.toString()),n+a;if(typeof a=="string")return n.toString()+a;if(n=ne.__toNumeric(n),a=ne.__toNumeric(a),ne.__isBigInt(n)&&ne.__isBigInt(a))return ne.add(n,a);if(typeof n=="number"&&typeof a=="number")return n+a;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(n,a){return ne.__compare(n,a,0)}static LE(n,a){return ne.__compare(n,a,1)}static GT(n,a){return ne.__compare(n,a,2)}static GE(n,a){return ne.__compare(n,a,3)}static EQ(n,a){for(;;){if(ne.__isBigInt(n))return ne.__isBigInt(a)?ne.equal(n,a):ne.EQ(a,n);if(typeof n=="number"){if(ne.__isBigInt(a))return ne.__equalToNumber(a,n);if(typeof a!="object")return n==a;a=ne.__toPrimitive(a)}else if(typeof n=="string"){if(ne.__isBigInt(a))return n=ne.__fromString(n),n!==null&&ne.equal(n,a);if(typeof a!="object")return n==a;a=ne.__toPrimitive(a)}else if(typeof n=="boolean"){if(ne.__isBigInt(a))return ne.__equalToNumber(a,+n);if(typeof a!="object")return n==a;a=ne.__toPrimitive(a)}else if(typeof n=="symbol"){if(ne.__isBigInt(a))return!1;if(typeof a!="object")return n==a;a=ne.__toPrimitive(a)}else if(typeof n=="object"){if(typeof a=="object"&&a.constructor!==ne)return n==a;n=ne.__toPrimitive(n)}else return n==a}}static NE(n,a){return!ne.EQ(n,a)}static DataViewGetBigInt64(n,a,h=!1){return ne.asIntN(64,ne.DataViewGetBigUint64(n,a,h))}static DataViewGetBigUint64(n,a,h=!1){const[f,g]=h?[4,0]:[0,4],_=n.getUint32(a+f,h),c=n.getUint32(a+g,h),A=new ne(3,!1);return A.__setDigit(0,1073741823&c),A.__setDigit(1,(268435455&_)<<2|c>>>30),A.__setDigit(2,_>>>28),A.__trim()}static DataViewSetBigInt64(n,a,h,f=!1){ne.DataViewSetBigUint64(n,a,h,f)}static DataViewSetBigUint64(n,a,h,f=!1){h=ne.asUintN(64,h);let g=0,_=0;if(0<h.length&&(_=h.__digit(0),1<h.length)){const D=h.__digit(1);_|=D<<30,g=D>>>2,2<h.length&&(g|=h.__digit(2)<<28)}const[c,A]=f?[4,0]:[0,4];n.setUint32(a+c,g,f),n.setUint32(a+A,_,f)}static __zero(){return new ne(0,!1)}static __oneDigit(n,a){const h=new ne(1,a);return h.__setDigit(0,n),h}__copy(){const n=new ne(this.length,this.sign);for(let a=0;a<this.length;a++)n[a]=this[a];return n}__trim(){let n=this.length,a=this[n-1];for(;a===0;)n--,a=this[n-1],this.pop();return n===0&&(this.sign=!1),this}__initializeDigits(){for(let n=0;n<this.length;n++)this[n]=0}static __decideRounding(n,a,h,f){if(0<a)return-1;let g;if(0>a)g=-a-1;else{if(h===0)return-1;h--,f=n.__digit(h),g=29}let _=1<<g;if((f&_)==0)return-1;if(_-=1,(f&_)!=0)return 1;for(;0<h;)if(h--,n.__digit(h)!==0)return 1;return 0}static __fromDouble(n){ne.__kBitConversionDouble[0]=n;const a=2047&ne.__kBitConversionInts[1]>>>20,h=a-1023,f=(0|h/30)+1,g=new ne(f,0>n);let _=1048575&ne.__kBitConversionInts[1]|1048576,c=ne.__kBitConversionInts[0];const A=20,D=h%30;let O,z=0;if(D<20){const V=A-D;z=V+32,O=_>>>V,_=_<<32-V|c>>>V,c<<=32-V}else if(D===20)z=32,O=_,_=c,c=0;else{const V=D-A;z=32-V,O=_<<V|c>>>32-V,_=c<<V,c=0}g.__setDigit(f-1,O);for(let V=f-2;0<=V;V--)0<z?(z-=30,O=_>>>2,_=_<<30|c>>>2,c<<=30):O=0,g.__setDigit(V,O);return g.__trim()}static __isWhitespace(n){return 13>=n&&9<=n||(159>=n?n==32:131071>=n?n==160||n==5760:196607>=n?(n&=131071,10>=n||n==40||n==41||n==47||n==95||n==4096):n==65279)}static __fromString(n,a=0){let h=0;const f=n.length;let g=0;if(g===f)return ne.__zero();let _=n.charCodeAt(g);for(;ne.__isWhitespace(_);){if(++g===f)return ne.__zero();_=n.charCodeAt(g)}if(_===43){if(++g===f)return null;_=n.charCodeAt(g),h=1}else if(_===45){if(++g===f)return null;_=n.charCodeAt(g),h=-1}if(a===0){if(a=10,_===48){if(++g===f)return ne.__zero();if(_=n.charCodeAt(g),_===88||_===120){if(a=16,++g===f)return null;_=n.charCodeAt(g)}else if(_===79||_===111){if(a=8,++g===f)return null;_=n.charCodeAt(g)}else if(_===66||_===98){if(a=2,++g===f)return null;_=n.charCodeAt(g)}}}else if(a===16&&_===48){if(++g===f)return ne.__zero();if(_=n.charCodeAt(g),_===88||_===120){if(++g===f)return null;_=n.charCodeAt(g)}}if(h!=0&&a!==10)return null;for(;_===48;){if(++g===f)return ne.__zero();_=n.charCodeAt(g)}const c=f-g;let A=ne.__kMaxBitsPerChar[a],D=ne.__kBitsPerCharTableMultiplier-1;if(c>1073741824/A)return null;const O=A*c+D>>>ne.__kBitsPerCharTableShift,z=new ne(0|(O+29)/30,!1),V=10>a?a:10,Y=10<a?a-10:0;if((a&a-1)==0){A>>=ne.__kBitsPerCharTableShift;const ee=[],ie=[];let q=!1;do{let fe=0,Ee=0;for(;;){let we;if(_-48>>>0<V)we=_-48;else if((32|_)-97>>>0<Y)we=(32|_)-87;else{q=!0;break}if(Ee+=A,fe=fe<<A|we,++g===f){q=!0;break}if(_=n.charCodeAt(g),30<Ee+A)break}ee.push(fe),ie.push(Ee)}while(!q);ne.__fillFromParts(z,ee,ie)}else{z.__initializeDigits();let ee=!1,ie=0;do{let q=0,fe=1;for(;;){let we;if(_-48>>>0<V)we=_-48;else if((32|_)-97>>>0<Y)we=(32|_)-87;else{ee=!0;break}const ze=fe*a;if(1073741823<ze)break;if(fe=ze,q=q*a+we,ie++,++g===f){ee=!0;break}_=n.charCodeAt(g)}D=30*ne.__kBitsPerCharTableMultiplier-1;const Ee=0|(A*ie+D>>>ne.__kBitsPerCharTableShift)/30;z.__inplaceMultiplyAdd(fe,q,Ee)}while(!ee)}if(g!==f){if(!ne.__isWhitespace(_))return null;for(g++;g<f;g++)if(_=n.charCodeAt(g),!ne.__isWhitespace(_))return null}return z.sign=h==-1,z.__trim()}static __fillFromParts(n,a,h){let f=0,g=0,_=0;for(let c=a.length-1;0<=c;c--){const A=a[c],D=h[c];g|=A<<_,_+=D,_===30?(n.__setDigit(f++,g),_=0,g=0):30<_&&(n.__setDigit(f++,1073741823&g),_-=30,g=A>>>D-_)}if(g!==0){if(f>=n.length)throw new Error("implementation bug");n.__setDigit(f++,g)}for(;f<n.length;f++)n.__setDigit(f,0)}static __toStringBasePowerOfTwo(n,a){const h=n.length;let f=a-1;f=(85&f>>>1)+(85&f),f=(51&f>>>2)+(51&f),f=(15&f>>>4)+(15&f);const g=f,_=a-1,c=n.__digit(h-1),A=ne.__clz30(c);let D=0|(30*h-A+g-1)/g;if(n.sign&&D++,268435456<D)throw new Error("string too long");const O=Array(D);let z=D-1,V=0,Y=0;for(let ie=0;ie<h-1;ie++){const q=n.__digit(ie),fe=(V|q<<Y)&_;O[z--]=ne.__kConversionChars[fe];const Ee=g-Y;for(V=q>>>Ee,Y=30-Ee;Y>=g;)O[z--]=ne.__kConversionChars[V&_],V>>>=g,Y-=g}const ee=(V|c<<Y)&_;for(O[z--]=ne.__kConversionChars[ee],V=c>>>g-Y;V!==0;)O[z--]=ne.__kConversionChars[V&_],V>>>=g;if(n.sign&&(O[z--]="-"),z!=-1)throw new Error("implementation bug");return O.join("")}static __toStringGeneric(n,a,h){const f=n.length;if(f===0)return"";if(f===1){let ie=n.__unsignedDigit(0).toString(a);return h===!1&&n.sign&&(ie="-"+ie),ie}const g=30*f-ne.__clz30(n.__digit(f-1)),_=ne.__kMaxBitsPerChar[a],c=_-1;let A=g*ne.__kBitsPerCharTableMultiplier;A+=c-1,A=0|A/c;const D=A+1>>1,O=ne.exponentiate(ne.__oneDigit(a,!1),ne.__oneDigit(D,!1));let z,V;const Y=O.__unsignedDigit(0);if(O.length===1&&32767>=Y){z=new ne(n.length,!1),z.__initializeDigits();let ie=0;for(let q=2*n.length-1;0<=q;q--){const fe=ie<<15|n.__halfDigit(q);z.__setHalfDigit(q,0|fe/Y),ie=0|fe%Y}V=ie.toString(a)}else{const ie=ne.__absoluteDivLarge(n,O,!0,!0);z=ie.quotient;const q=ie.remainder.__trim();V=ne.__toStringGeneric(q,a,!0)}z.__trim();let ee=ne.__toStringGeneric(z,a,!0);for(;V.length<D;)V="0"+V;return h===!1&&n.sign&&(ee="-"+ee),ee+V}static __unequalSign(n){return n?-1:1}static __absoluteGreater(n){return n?-1:1}static __absoluteLess(n){return n?1:-1}static __compareToBigInt(n,a){const h=n.sign;if(h!==a.sign)return ne.__unequalSign(h);const f=ne.__absoluteCompare(n,a);return 0<f?ne.__absoluteGreater(h):0>f?ne.__absoluteLess(h):0}static __compareToNumber(n,a){if(ne.__isOneDigitInt(a)){const h=n.sign,f=0>a;if(h!==f)return ne.__unequalSign(h);if(n.length===0){if(f)throw new Error("implementation bug");return a===0?0:-1}if(1<n.length)return ne.__absoluteGreater(h);const g=Math.abs(a),_=n.__unsignedDigit(0);return _>g?ne.__absoluteGreater(h):_<g?ne.__absoluteLess(h):0}return ne.__compareToDouble(n,a)}static __compareToDouble(n,a){if(a!==a)return a;if(a===1/0)return-1;if(a===-1/0)return 1;const h=n.sign;if(h!==0>a)return ne.__unequalSign(h);if(a===0)throw new Error("implementation bug: should be handled elsewhere");if(n.length===0)return-1;ne.__kBitConversionDouble[0]=a;const f=2047&ne.__kBitConversionInts[1]>>>20;if(f==2047)throw new Error("implementation bug: handled elsewhere");const g=f-1023;if(0>g)return ne.__absoluteGreater(h);const _=n.length;let c=n.__digit(_-1);const A=ne.__clz30(c),D=30*_-A,O=g+1;if(D<O)return ne.__absoluteLess(h);if(D>O)return ne.__absoluteGreater(h);let z=1048576|1048575&ne.__kBitConversionInts[1],V=ne.__kBitConversionInts[0];const Y=20,ee=29-A;if(ee!==(0|(D-1)%30))throw new Error("implementation bug");let ie,q=0;if(20>ee){const fe=Y-ee;q=fe+32,ie=z>>>fe,z=z<<32-fe|V>>>fe,V<<=32-fe}else if(ee===20)q=32,ie=z,z=V,V=0;else{const fe=ee-Y;q=32-fe,ie=z<<fe|V>>>32-fe,z=V<<fe,V=0}if(c>>>=0,ie>>>=0,c>ie)return ne.__absoluteGreater(h);if(c<ie)return ne.__absoluteLess(h);for(let fe=_-2;0<=fe;fe--){0<q?(q-=30,ie=z>>>2,z=z<<30|V>>>2,V<<=30):ie=0;const Ee=n.__unsignedDigit(fe);if(Ee>ie)return ne.__absoluteGreater(h);if(Ee<ie)return ne.__absoluteLess(h)}if(z!==0||V!==0){if(q===0)throw new Error("implementation bug");return ne.__absoluteLess(h)}return 0}static __equalToNumber(n,a){var h=Math.abs;return ne.__isOneDigitInt(a)?a===0?n.length===0:n.length===1&&n.sign===0>a&&n.__unsignedDigit(0)===h(a):ne.__compareToDouble(n,a)===0}static __comparisonResultToBool(n,a){return a===0?0>n:a===1?0>=n:a===2?0<n:a===3?0<=n:void 0}static __compare(n,a,h){if(n=ne.__toPrimitive(n),a=ne.__toPrimitive(a),typeof n=="string"&&typeof a=="string")switch(h){case 0:return n<a;case 1:return n<=a;case 2:return n>a;case 3:return n>=a}if(ne.__isBigInt(n)&&typeof a=="string")return a=ne.__fromString(a),a!==null&&ne.__comparisonResultToBool(ne.__compareToBigInt(n,a),h);if(typeof n=="string"&&ne.__isBigInt(a))return n=ne.__fromString(n),n!==null&&ne.__comparisonResultToBool(ne.__compareToBigInt(n,a),h);if(n=ne.__toNumeric(n),a=ne.__toNumeric(a),ne.__isBigInt(n)){if(ne.__isBigInt(a))return ne.__comparisonResultToBool(ne.__compareToBigInt(n,a),h);if(typeof a!="number")throw new Error("implementation bug");return ne.__comparisonResultToBool(ne.__compareToNumber(n,a),h)}if(typeof n!="number")throw new Error("implementation bug");if(ne.__isBigInt(a))return ne.__comparisonResultToBool(ne.__compareToNumber(a,n),2^h);if(typeof a!="number")throw new Error("implementation bug");return h===0?n<a:h===1?n<=a:h===2?n>a:h===3?n>=a:void 0}__clzmsd(){return ne.__clz30(this.__digit(this.length-1))}static __absoluteAdd(n,a,h){if(n.length<a.length)return ne.__absoluteAdd(a,n,h);if(n.length===0)return n;if(a.length===0)return n.sign===h?n:ne.unaryMinus(n);let f=n.length;(n.__clzmsd()===0||a.length===n.length&&a.__clzmsd()===0)&&f++;const g=new ne(f,h);let _=0,c=0;for(;c<a.length;c++){const A=n.__digit(c)+a.__digit(c)+_;_=A>>>30,g.__setDigit(c,1073741823&A)}for(;c<n.length;c++){const A=n.__digit(c)+_;_=A>>>30,g.__setDigit(c,1073741823&A)}return c<g.length&&g.__setDigit(c,_),g.__trim()}static __absoluteSub(n,a,h){if(n.length===0)return n;if(a.length===0)return n.sign===h?n:ne.unaryMinus(n);const f=new ne(n.length,h);let g=0,_=0;for(;_<a.length;_++){const c=n.__digit(_)-a.__digit(_)-g;g=1&c>>>30,f.__setDigit(_,1073741823&c)}for(;_<n.length;_++){const c=n.__digit(_)-g;g=1&c>>>30,f.__setDigit(_,1073741823&c)}return f.__trim()}static __absoluteAddOne(n,a,h=null){const f=n.length;h===null?h=new ne(f,a):h.sign=a;let g=1;for(let _=0;_<f;_++){const c=n.__digit(_)+g;g=c>>>30,h.__setDigit(_,1073741823&c)}return g!=0&&h.__setDigitGrow(f,1),h}static __absoluteSubOne(n,a){const h=n.length;a=a||h;const f=new ne(a,!1);let g=1;for(let _=0;_<h;_++){const c=n.__digit(_)-g;g=1&c>>>30,f.__setDigit(_,1073741823&c)}if(g!=0)throw new Error("implementation bug");for(let _=h;_<a;_++)f.__setDigit(_,0);return f}static __absoluteAnd(n,a,h=null){let f=n.length,g=a.length,_=g;if(f<g){_=f;const D=n,O=f;n=a,f=g,a=D,g=O}let c=_;h===null?h=new ne(c,!1):c=h.length;let A=0;for(;A<_;A++)h.__setDigit(A,n.__digit(A)&a.__digit(A));for(;A<c;A++)h.__setDigit(A,0);return h}static __absoluteAndNot(n,a,h=null){const f=n.length,g=a.length;let _=g;f<g&&(_=f);let c=f;h===null?h=new ne(c,!1):c=h.length;let A=0;for(;A<_;A++)h.__setDigit(A,n.__digit(A)&~a.__digit(A));for(;A<f;A++)h.__setDigit(A,n.__digit(A));for(;A<c;A++)h.__setDigit(A,0);return h}static __absoluteOr(n,a,h=null){let f=n.length,g=a.length,_=g;if(f<g){_=f;const D=n,O=f;n=a,f=g,a=D,g=O}let c=f;h===null?h=new ne(c,!1):c=h.length;let A=0;for(;A<_;A++)h.__setDigit(A,n.__digit(A)|a.__digit(A));for(;A<f;A++)h.__setDigit(A,n.__digit(A));for(;A<c;A++)h.__setDigit(A,0);return h}static __absoluteXor(n,a,h=null){let f=n.length,g=a.length,_=g;if(f<g){_=f;const D=n,O=f;n=a,f=g,a=D,g=O}let c=f;h===null?h=new ne(c,!1):c=h.length;let A=0;for(;A<_;A++)h.__setDigit(A,n.__digit(A)^a.__digit(A));for(;A<f;A++)h.__setDigit(A,n.__digit(A));for(;A<c;A++)h.__setDigit(A,0);return h}static __absoluteCompare(n,a){const h=n.length-a.length;if(h!=0)return h;let f=n.length-1;for(;0<=f&&n.__digit(f)===a.__digit(f);)f--;return 0>f?0:n.__unsignedDigit(f)>a.__unsignedDigit(f)?1:-1}static __multiplyAccumulate(n,a,h,f){if(a===0)return;const g=32767&a,_=a>>>15;let c=0,A=0;for(let D,O=0;O<n.length;O++,f++){D=h.__digit(f);const z=n.__digit(O),V=32767&z,Y=z>>>15,ee=ne.__imul(V,g),ie=ne.__imul(V,_),q=ne.__imul(Y,g),fe=ne.__imul(Y,_);D+=A+ee+c,c=D>>>30,D&=1073741823,D+=((32767&ie)<<15)+((32767&q)<<15),c+=D>>>30,A=fe+(ie>>>15)+(q>>>15),h.__setDigit(f,1073741823&D)}for(;c!=0||A!==0;f++){let D=h.__digit(f);D+=c+A,A=0,c=D>>>30,h.__setDigit(f,1073741823&D)}}static __internalMultiplyAdd(n,a,h,f,g){let _=h,c=0;for(let A=0;A<f;A++){const D=n.__digit(A),O=ne.__imul(32767&D,a),z=ne.__imul(D>>>15,a),V=O+((32767&z)<<15)+c+_;_=V>>>30,c=z>>>15,g.__setDigit(A,1073741823&V)}if(g.length>f)for(g.__setDigit(f++,_+c);f<g.length;)g.__setDigit(f++,0);else if(_+c!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(n,a,h){h>this.length&&(h=this.length);const f=32767&n,g=n>>>15;let _=0,c=a;for(let A=0;A<h;A++){const D=this.__digit(A),O=32767&D,z=D>>>15,V=ne.__imul(O,f),Y=ne.__imul(O,g),ee=ne.__imul(z,f),ie=ne.__imul(z,g);let q=c+V+_;_=q>>>30,q&=1073741823,q+=((32767&Y)<<15)+((32767&ee)<<15),_+=q>>>30,c=ie+(Y>>>15)+(ee>>>15),this.__setDigit(A,1073741823&q)}if(_!=0||c!==0)throw new Error("implementation bug")}static __absoluteDivSmall(n,a,h=null){h===null&&(h=new ne(n.length,!1));let f=0;for(let g,_=2*n.length-1;0<=_;_-=2){g=(f<<15|n.__halfDigit(_))>>>0;const c=0|g/a;f=0|g%a,g=(f<<15|n.__halfDigit(_-1))>>>0;const A=0|g/a;f=0|g%a,h.__setDigit(_>>>1,c<<15|A)}return h}static __absoluteModSmall(n,a){let h=0;for(let f=2*n.length-1;0<=f;f--)h=0|((h<<15|n.__halfDigit(f))>>>0)%a;return h}static __absoluteDivLarge(n,a,h,f){const g=a.__halfDigitLength(),_=a.length,c=n.__halfDigitLength()-g;let A=null;h&&(A=new ne(c+2>>>1,!1),A.__initializeDigits());const D=new ne(g+2>>>1,!1);D.__initializeDigits();const O=ne.__clz15(a.__halfDigit(g-1));0<O&&(a=ne.__specialLeftShift(a,O,0));const z=ne.__specialLeftShift(n,O,1),V=a.__halfDigit(g-1);let Y=0;for(let ee,ie=c;0<=ie;ie--){ee=32767;const q=z.__halfDigit(ie+g);if(q!==V){const Ee=(q<<15|z.__halfDigit(ie+g-1))>>>0;ee=0|Ee/V;let we=0|Ee%V;const ze=a.__halfDigit(g-2),Ce=z.__halfDigit(ie+g-2);for(;ne.__imul(ee,ze)>>>0>(we<<16|Ce)>>>0&&(ee--,we+=V,!(32767<we)););}ne.__internalMultiplyAdd(a,ee,0,_,D);let fe=z.__inplaceSub(D,ie,g+1);fe!==0&&(fe=z.__inplaceAdd(a,ie,g),z.__setHalfDigit(ie+g,32767&z.__halfDigit(ie+g)+fe),ee--),h&&(1&ie?Y=ee<<15:A.__setDigit(ie>>>1,Y|ee))}if(f)return z.__inplaceRightShift(O),h?{quotient:A,remainder:z}:z;if(h)return A;throw new Error("unreachable")}static __clz15(n){return ne.__clz30(n)-15}__inplaceAdd(n,a,h){let f=0;for(let g=0;g<h;g++){const _=this.__halfDigit(a+g)+n.__halfDigit(g)+f;f=_>>>15,this.__setHalfDigit(a+g,32767&_)}return f}__inplaceSub(n,a,h){let f=0;if(1&a){a>>=1;let g=this.__digit(a),_=32767&g,c=0;for(;c<h-1>>>1;c++){const O=n.__digit(c),z=(g>>>15)-(32767&O)-f;f=1&z>>>15,this.__setDigit(a+c,(32767&z)<<15|32767&_),g=this.__digit(a+c+1),_=(32767&g)-(O>>>15)-f,f=1&_>>>15}const A=n.__digit(c),D=(g>>>15)-(32767&A)-f;if(f=1&D>>>15,this.__setDigit(a+c,(32767&D)<<15|32767&_),a+c+1>=this.length)throw new RangeError("out of bounds");(1&h)==0&&(g=this.__digit(a+c+1),_=(32767&g)-(A>>>15)-f,f=1&_>>>15,this.__setDigit(a+n.length,1073709056&g|32767&_))}else{a>>=1;let g=0;for(;g<n.length-1;g++){const O=this.__digit(a+g),z=n.__digit(g),V=(32767&O)-(32767&z)-f;f=1&V>>>15;const Y=(O>>>15)-(z>>>15)-f;f=1&Y>>>15,this.__setDigit(a+g,(32767&Y)<<15|32767&V)}const _=this.__digit(a+g),c=n.__digit(g),A=(32767&_)-(32767&c)-f;f=1&A>>>15;let D=0;(1&h)==0&&(D=(_>>>15)-(c>>>15)-f,f=1&D>>>15),this.__setDigit(a+g,(32767&D)<<15|32767&A)}return f}__inplaceRightShift(n){if(n===0)return;let a=this.__digit(0)>>>n;const h=this.length-1;for(let f=0;f<h;f++){const g=this.__digit(f+1);this.__setDigit(f,1073741823&g<<30-n|a),a=g>>>n}this.__setDigit(h,a)}static __specialLeftShift(n,a,h){const f=n.length,g=new ne(f+h,!1);if(a===0){for(let c=0;c<f;c++)g.__setDigit(c,n.__digit(c));return 0<h&&g.__setDigit(f,0),g}let _=0;for(let c=0;c<f;c++){const A=n.__digit(c);g.__setDigit(c,1073741823&A<<a|_),_=A>>>30-a}return 0<h&&g.__setDigit(f,_),g}static __leftShiftByAbsolute(n,a){const h=ne.__toShiftAmount(a);if(0>h)throw new RangeError("BigInt too big");const f=0|h/30,g=h%30,_=n.length,c=g!==0&&n.__digit(_-1)>>>30-g!=0,A=_+f+(c?1:0),D=new ne(A,n.sign);if(g===0){let O=0;for(;O<f;O++)D.__setDigit(O,0);for(;O<A;O++)D.__setDigit(O,n.__digit(O-f))}else{let O=0;for(let z=0;z<f;z++)D.__setDigit(z,0);for(let z=0;z<_;z++){const V=n.__digit(z);D.__setDigit(z+f,1073741823&V<<g|O),O=V>>>30-g}if(c)D.__setDigit(_+f,O);else if(O!==0)throw new Error("implementation bug")}return D.__trim()}static __rightShiftByAbsolute(n,a){const h=n.length,f=n.sign,g=ne.__toShiftAmount(a);if(0>g)return ne.__rightShiftByMaximum(f);const _=0|g/30,c=g%30;let A=h-_;if(0>=A)return ne.__rightShiftByMaximum(f);let D=!1;if(f){if((n.__digit(_)&(1<<c)-1)!=0)D=!0;else for(let z=0;z<_;z++)if(n.__digit(z)!==0){D=!0;break}}D&&c===0&&~n.__digit(h-1)==0&&A++;let O=new ne(A,f);if(c===0){O.__setDigit(A-1,0);for(let z=_;z<h;z++)O.__setDigit(z-_,n.__digit(z))}else{let z=n.__digit(_)>>>c;const V=h-_-1;for(let Y=0;Y<V;Y++){const ee=n.__digit(Y+_+1);O.__setDigit(Y,1073741823&ee<<30-c|z),z=ee>>>c}O.__setDigit(V,z)}return D&&(O=ne.__absoluteAddOne(O,!0,O)),O.__trim()}static __rightShiftByMaximum(n){return n?ne.__oneDigit(1,!0):ne.__zero()}static __toShiftAmount(n){if(1<n.length)return-1;const a=n.__unsignedDigit(0);return a>ne.__kMaxLengthBits?-1:a}static __toPrimitive(n,a="default"){if(typeof n!="object"||n.constructor===ne)return n;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const g=n[Symbol.toPrimitive];if(g){const _=g(a);if(typeof _!="object")return _;throw new TypeError("Cannot convert object to primitive value")}}const h=n.valueOf;if(h){const g=h.call(n);if(typeof g!="object")return g}const f=n.toString;if(f){const g=f.call(n);if(typeof g!="object")return g}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(n){return ne.__isBigInt(n)?n:+n}static __isBigInt(n){return typeof n=="object"&&n!==null&&n.constructor===ne}static __truncateToNBits(n,a){const h=0|(n+29)/30,f=new ne(h,a.sign),g=h-1;for(let c=0;c<g;c++)f.__setDigit(c,a.__digit(c));let _=a.__digit(g);if(n%30!=0){const c=32-n%30;_=_<<c>>>c}return f.__setDigit(g,_),f.__trim()}static __truncateAndSubFromPowerOfTwo(n,a,h){var f=Math.min;const g=0|(n+29)/30,_=new ne(g,h);let c=0;const A=g-1;let D=0;for(const Y=f(A,a.length);c<Y;c++){const ee=0-a.__digit(c)-D;D=1&ee>>>30,_.__setDigit(c,1073741823&ee)}for(;c<A;c++)_.__setDigit(c,0|1073741823&-D);let O=A<a.length?a.__digit(A):0;const z=n%30;let V;if(z==0)V=0-O-D,V&=1073741823;else{const Y=32-z;O=O<<Y>>>Y;const ee=1<<32-Y;V=ee-O-D,V&=ee-1}return _.__setDigit(A,V),_.__trim()}__digit(n){return this[n]}__unsignedDigit(n){return this[n]>>>0}__setDigit(n,a){this[n]=0|a}__setDigitGrow(n,a){this[n]=0|a}__halfDigitLength(){const n=this.length;return 32767>=this.__unsignedDigit(n-1)?2*n-1:2*n}__halfDigit(n){return 32767&this[n>>>1]>>>15*(1&n)}__setHalfDigit(n,a){const h=n>>>1,f=this.__digit(h),g=1&n?32767&f|a<<15:1073709056&f|32767&a;this.__setDigit(h,g)}static __digitPow(n,a){let h=1;for(;0<a;)1&a&&(h*=n),a>>>=1,n*=n;return h}static __isOneDigitInt(n){return(1073741823&n)===n}}ne.__kMaxLength=33554432,ne.__kMaxLengthBits=ne.__kMaxLength<<5,ne.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],ne.__kBitsPerCharTableShift=5,ne.__kBitsPerCharTableMultiplier=1<<ne.__kBitsPerCharTableShift,ne.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ne.__kBitConversionBuffer=new ArrayBuffer(8),ne.__kBitConversionDouble=new Float64Array(ne.__kBitConversionBuffer),ne.__kBitConversionInts=new Int32Array(ne.__kBitConversionBuffer),ne.__clz30=Math.clz32?function(i){return Math.clz32(i)-2}:function(i){return i===0?30:0|29-(0|Math.log(i>>>0)/Math.LN2)},ne.__imul=Math.imul||function(i,n){return 0|i*n};const Ol=ne.BigInt(0),hv=ne.BigInt(1),oT=ne.BigInt(2),B4=ne.BigInt(10),V4=ne.BigInt(24),U4=ne.BigInt(60),G4=ne.BigInt(1e3),Dv=ne.BigInt(1e6),K_=ne.BigInt(1e9),gD=ne.multiply(ne.BigInt(3600),K_),$4=ne.multiply(U4,K_),gp=ne.multiply(gD,V4);function Rd(i){return typeof i=="bigint"?ne.BigInt(i.toString(10)):i}function yD(i){return ne.equal(ne.remainder(i,oT),Ol)}function Lm(i){return ne.lessThan(i,Ol)?ne.unaryMinus(i):i}function Rx(i,n){return ne.lessThan(i,n)?-1:ne.greaterThan(i,n)?1:0}function V_(i,n){return{quotient:ne.divide(i,n),remainder:ne.remainder(i,n)}}var BE,VE;const wn="slot-epochNanoSeconds",Tn="slot-iso-date",wr="slot-iso-date-time",Fr="slot-time",kt="slot-calendar",_D="slot-date-brand",vD="slot-year-month-brand",bD="slot-month-day-brand",Di="slot-time-zone",oo="slot-years",lo="slot-months",Jo="slot-weeks",co="slot-days",uo="slot-hours",ho="slot-minutes",fo="slot-seconds",po="slot-milliseconds",mo="slot-microseconds",el="slot-nanoseconds",xD="date",wD="ym",TD="md",SD="time",ED="datetime",AD="instant",rg="original",Py="timezone-canonical",Hw="timezone-original",U_="calendar-id",MD="locale",Ww="options",CD=new WeakMap,Xw=Symbol.for("@@Temporal__GetSlots");(BE=globalThis)[Xw]||(BE[Xw]=function(i){return CD.get(i)});const o1=globalThis[Xw],Qw=Symbol.for("@@Temporal__CreateSlots");(VE=globalThis)[Qw]||(VE[Qw]=function(i){CD.set(i,Object.create(null))});const nf=globalThis[Qw];function xo(i,...n){if(!i||typeof i!="object")return!1;const a=o1(i);return!!a&&n.every((h=>h in a))}function oe(i,n){const a=o1(i)?.[n];if(a===void 0)throw new TypeError(`Missing internal slot ${n}`);return a}function Bn(i,n,a){const h=o1(i);if(h===void 0)throw new TypeError("Missing slots for the given container");if(h[n])throw new TypeError(`${n} already has set`);h[n]=a}const Kw={};function rf(i,n){Object.defineProperty(i.prototype,Symbol.toStringTag,{value:n,writable:!1,enumerable:!1,configurable:!0});const a=Object.getOwnPropertyNames(i);for(let f=0;f<a.length;f++){const g=a[f],_=Object.getOwnPropertyDescriptor(i,g);_.configurable&&_.enumerable&&(_.enumerable=!1,Object.defineProperty(i,g,_))}const h=Object.getOwnPropertyNames(i.prototype);for(let f=0;f<h.length;f++){const g=h[f],_=Object.getOwnPropertyDescriptor(i.prototype,g);_.configurable&&_.enumerable&&(_.enumerable=!1,Object.defineProperty(i.prototype,g,_))}Jw(n,i),Jw(`${n}.prototype`,i.prototype)}function Jw(i,n){const a=`%${i}%`;if(Kw[a]!==void 0)throw new Error(`intrinsic ${i} already exists`);Kw[a]=n}function ps(i){return Kw[i]}function Fy(i,n){let a=i;if(a===0)return{div:a,mod:a};const h=Math.sign(a);a=Math.abs(a);const f=Math.trunc(1+Math.log10(a));if(n>=f)return{div:0*h,mod:h*a};if(n===0)return{div:h*a,mod:0*h};const g=a.toPrecision(f);return{div:h*Number.parseInt(g.slice(0,f-n),10),mod:h*Number.parseInt(g.slice(f-n),10)}}function yw(i,n,a){let h=i,f=a;if(h===0)return f;const g=Math.sign(h)||Math.sign(f);h=Math.abs(h),f=Math.abs(f);const _=h.toPrecision(Math.trunc(1+Math.log10(h)));if(f===0)return g*Number.parseInt(_+"0".repeat(n),10);const c=_+f.toPrecision(Math.trunc(1+Math.log10(f))).padStart(n,"0");return g*Number.parseInt(c,10)}function l1(i,n){const a=n==="negative";switch(i){case"ceil":return a?"zero":"infinity";case"floor":return a?"infinity":"zero";case"expand":return"infinity";case"trunc":return"zero";case"halfCeil":return a?"half-zero":"half-infinity";case"halfFloor":return a?"half-infinity":"half-zero";case"halfExpand":return"half-infinity";case"halfTrunc":return"half-zero";case"halfEven":return"half-even"}}function c1(i,n,a,h,f){return f==="zero"?i:f==="infinity"?n:a<0?i:a>0?n:f==="half-zero"?i:f==="half-infinity"?n:h?i:n}class Zn{constructor(n){this.totalNs=Rd(n),this.sec=ne.toNumber(ne.divide(this.totalNs,K_)),this.subsec=ne.toNumber(ne.remainder(this.totalNs,K_))}static validateNew(n,a){if(ne.greaterThan(Lm(n),Zn.MAX))throw new RangeError(`${a} of duration time units cannot exceed ${Zn.MAX} s`);return new Zn(n)}static fromEpochNsDiff(n,a){const h=ne.subtract(Rd(n),Rd(a));return new Zn(h)}static fromComponents(n,a,h,f,g,_){const c=ne.add(ne.add(ne.add(ne.add(ne.add(ne.BigInt(_),ne.multiply(ne.BigInt(g),G4)),ne.multiply(ne.BigInt(f),Dv)),ne.multiply(ne.BigInt(h),K_)),ne.multiply(ne.BigInt(a),$4)),ne.multiply(ne.BigInt(n),gD));return Zn.validateNew(c,"total")}abs(){return new Zn(Lm(this.totalNs))}add(n){return Zn.validateNew(ne.add(this.totalNs,n.totalNs),"sum")}add24HourDays(n){return Zn.validateNew(ne.add(this.totalNs,ne.multiply(ne.BigInt(n),gp)),"sum")}addToEpochNs(n){return ne.add(Rd(n),this.totalNs)}cmp(n){return Rx(this.totalNs,n.totalNs)}divmod(n){const{quotient:a,remainder:h}=V_(this.totalNs,ne.BigInt(n));return{quotient:ne.toNumber(a),remainder:new Zn(h)}}fdiv(n){const a=Rd(n),h=ne.BigInt(a);let{quotient:f,remainder:g}=V_(this.totalNs,h);const _=[];let c;const A=(ne.lessThan(this.totalNs,Ol)?-1:1)*Math.sign(ne.toNumber(a));for(;!ne.equal(g,Ol)&&_.length<50;)g=ne.multiply(g,B4),{quotient:c,remainder:g}=V_(g,h),_.push(Math.abs(ne.toNumber(c)));return A*+(Lm(f).toString()+"."+_.join(""))}isZero(){return ne.equal(this.totalNs,Ol)}round(n,a){const h=Rd(n);if(ne.equal(h,hv))return this;const{quotient:f,remainder:g}=V_(this.totalNs,h),_=ne.lessThan(this.totalNs,Ol)?"negative":"positive",c=ne.multiply(Lm(f),h),A=ne.add(c,h),D=Rx(Lm(ne.multiply(g,oT)),h),O=l1(a,_),z=ne.equal(Lm(this.totalNs),c)?c:c1(c,A,D,yD(f),O),V=_==="positive"?z:ne.unaryMinus(z);return Zn.validateNew(V,"rounding")}sign(){return this.cmp(new Zn(Ol))}subtract(n){return Zn.validateNew(ne.subtract(this.totalNs,n.totalNs),"difference")}}Zn.MAX=ne.BigInt("9007199254740991999999999"),Zn.ZERO=new Zn(Ol);const UE=/[A-Za-z._][A-Za-z._0-9+-]*/,Iv=new RegExp(`(?:${/(?:[+-](?:[01][0-9]|2[0-3])(?::?[0-5][0-9])?)/.source}|(?:${UE.source})(?:\\/(?:${UE.source}))*)`),DD=/(?:[+-]\d{6}|\d{4})/,kx=/(?:0[1-9]|1[0-2])/,e2=/(?:0[1-9]|[12]\d|3[01])/,Z4=new RegExp(`(${DD.source})(?:-(${kx.source})-(${e2.source})|(${kx.source})(${e2.source}))`),ID=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,RD=/((?:[+-])(?:[01][0-9]|2[0-3])(?::?(?:[0-5][0-9])(?::?(?:[0-5][0-9])(?:[.,](?:\d{1,9}))?)?)?)/,kD=new RegExp(`([zZ])|${RD.source}?`),Ky=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,q4=new RegExp([`^${Z4.source}`,`(?:(?:[tT]|\\s+)${ID.source}(?:${kD.source})?)?`,`(?:\\[!?(${Iv.source})\\])?`,`((?:${Ky.source})*)$`].join("")),Y4=new RegExp([`^[tT]?${ID.source}`,`(?:${kD.source})?`,`(?:\\[!?${Iv.source}\\])?`,`((?:${Ky.source})*)$`].join("")),H4=new RegExp(`^(${DD.source})-?(${kx.source})(?:\\[!?${Iv.source}\\])?((?:${Ky.source})*)$`),W4=new RegExp(`^(?:--)?(${kx.source})-?(${e2.source})(?:\\[!?${Iv.source}\\])?((?:${Ky.source})*)$`),_w=/(\d+)(?:[.,](\d{1,9}))?/,X4=new RegExp(`(?:${_w.source}H)?(?:${_w.source}M)?(?:${_w.source}S)?`),Q4=new RegExp(`^([+-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${X4.source})?$`,"i"),yp=864e5,Ox=1e6*yp,K4=6e10,OD=1e8*yp,Jy=wh(OD),dv=ne.unaryMinus(Jy),J4=ne.add(ne.subtract(dv,gp),hv),e6=ne.subtract(ne.add(Jy,gp),hv),t6=146097*yp,GE=-271821,$E=275760,J_=Date.UTC(1847,0,1),n6=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","ethiopic-amete-alem","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"],i6=new Set(["ACT","AET","AGT","ART","AST","BET","BST","CAT","CNT","CST","CTT","EAT","ECT","IET","IST","JST","MIT","NET","NST","PLT","PNT","PRT","PST","SST","VST"]);function jr(i){return typeof i=="object"&&i!==null||typeof i=="function"}function u1(i){if(typeof i=="bigint")throw new TypeError("Cannot convert BigInt to number");return Number(i)}function h1(i){if(typeof i=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return String(i)}function Dn(i){const n=u1(i);if(n===0)return 0;if(Number.isNaN(n)||n===1/0||n===-1/0)throw new RangeError("invalid number value");const a=Math.trunc(n);return a===0?0:a}function ZE(i,n){const a=Dn(i);if(a<=0)throw n!==void 0?new RangeError(`property '${n}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return a}function yu(i){const n=u1(i);if(Number.isNaN(n))throw new RangeError("not a number");if(n===1/0||n===-1/0)throw new RangeError("infinity is out of range");if(!(function(a){if(typeof a!="number"||Number.isNaN(a)||a===1/0||a===-1/0)return!1;const h=Math.abs(a);return Math.floor(h)===h})(n))throw new RangeError(`unsupported fractional value ${i}`);return n===0?0:n}function fv(i,n){return String(i).padStart(n,"0")}function Da(i){if(typeof i!="string")throw new TypeError(`expected a string, not ${String(i)}`);return i}function t2(i,n){if(jr(i)){const a=i?.toString();if(typeof a=="string"||typeof a=="number")return a;throw new TypeError("Cannot convert object to primitive value")}return i}const n2=["era","eraYear","year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],r6={era:h1,eraYear:Dn,year:Dn,month:ZE,monthCode:function(i){const n=Da(t2(i));if(n.length<3||n.length>4||n[0]!=="M"||"0123456789".indexOf(n[1])===-1||"0123456789".indexOf(n[2])===-1||n[1]+n[2]==="00"&&n[3]!=="L"||n[3]!=="L"&&n[3]!==void 0)throw new RangeError(`bad month code ${n}; must match M01-M99 or M00L-M99L`);return n},day:ZE,hour:Dn,minute:Dn,second:Dn,millisecond:Dn,microsecond:Dn,nanosecond:Dn,offset:function(i){const n=Da(t2(i));return _0(n),n},timeZone:_o},a6={hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},e0=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],qE=Object.fromEntries(e0.map((i=>[i[0],i[1]]))),s6=Object.fromEntries(e0.map((([i,n])=>[n,i]))),ev=e0.map((([,i])=>i)),t0={day:Ox,hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},Lx=["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],o6=Intl.DateTimeFormat,YE=new Map;function LD(i){const n=_v(i);let a=YE.get(n);return a===void 0&&(a=new o6("en-us",{timeZone:n,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),YE.set(n,a)),a}function us(i){return xo(i,wn)&&!xo(i,Di,kt)}function Pr(i){return xo(i,oo,lo,co,uo,ho,fo,po,mo,el)}function zr(i){return xo(i,_D)}function Jr(i){return xo(i,Fr)}function fr(i){return xo(i,wr)}function hs(i){return xo(i,vD)}function kl(i){return xo(i,bD)}function $n(i){return xo(i,wn,Di,kt)}function lt(i,n){if(!n(i))throw new TypeError("invalid receiver: method called with the wrong type of this-object")}function m0(i){if(xo(i,kt)||xo(i,Di))throw new TypeError("with() does not support a calendar or timeZone property");if(Jr(i))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(i.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(i.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function Rv(i,n){return n==="never"||n==="auto"&&i==="iso8601"?"":`[${n==="critical"?"!":""}u-ca=${i}]`}function d1(i){let n,a,h=!1;for(Ky.lastIndex=0;a=Ky.exec(i);){const{1:f,2:g,3:_}=a;if(g==="u-ca"){if(n===void 0)n=_,h=f==="!";else if(f==="!"||h)throw new RangeError(`Invalid annotations in ${i}: more than one u-ca present with critical flag`)}else if(f==="!")throw new RangeError(`Unrecognized annotation: !${g}=${_}`)}return n}function Rh(i){const n=q4.exec(i);if(!n)throw new RangeError(`invalid RFC 9557 string: ${i}`);const a=d1(n[16]);let h=n[1];if(h==="-000000")throw new RangeError(`invalid RFC 9557 string: ${i}`);const f=+h,g=+(n[2]??n[4]??1),_=+(n[3]??n[5]??1),c=n[6]!==void 0,A=+(n[6]??0),D=+(n[7]??n[10]??0);let O=+(n[8]??n[11]??0);O===60&&(O=59);const z=(n[9]??n[12]??"")+"000000000",V=+z.slice(0,3),Y=+z.slice(3,6),ee=+z.slice(6,9);let ie,q=!1;n[13]?(ie=void 0,q=!0):n[14]&&(ie=n[14]);const fe=n[15];return fT(f,g,_,A,D,O,V,Y,ee),{year:f,month:g,day:_,time:c?{hour:A,minute:D,second:O,millisecond:V,microsecond:Y,nanosecond:ee}:"start-of-day",tzAnnotation:fe,offset:ie,z:q,calendar:a}}function ND(i){const n=Y4.exec(i);let a,h,f,g,_,c,A;if(n){A=d1(n[10]),a=+(n[1]??0),h=+(n[2]??n[5]??0),f=+(n[3]??n[6]??0),f===60&&(f=59);const D=(n[4]??n[7]??"")+"000000000";if(g=+D.slice(0,3),_=+D.slice(3,6),c=+D.slice(6,9),n[8])throw new RangeError("Z designator not supported for PlainTime")}else{let D,O;if({time:D,z:O,calendar:A}=Rh(i),D==="start-of-day")throw new RangeError(`time is missing in string: ${i}`);if(O)throw new RangeError("Z designator not supported for PlainTime");({hour:a,minute:h,second:f,millisecond:g,microsecond:_,nanosecond:c}=D)}if(g1(a,h,f,g,_,c),/[tT ][0-9][0-9]/.test(i))return{hour:a,minute:h,second:f,millisecond:g,microsecond:_,nanosecond:c,calendar:A};try{const{month:D,day:O}=cT(i);Wm(1972,D,O)}catch{try{const{year:D,month:O}=lT(i);Wm(D,O,1)}catch{return{hour:a,minute:h,second:f,millisecond:g,microsecond:_,nanosecond:c,calendar:A}}}throw new RangeError(`invalid RFC 9557 time-only string ${i}; may need a T prefix`)}function lT(i){const n=H4.exec(i);let a,h,f,g;if(n){f=d1(n[3]);let _=n[1];if(_==="-000000")throw new RangeError(`invalid RFC 9557 string: ${i}`);if(a=+_,h=+n[2],g=1,f!==void 0&&f!=="iso8601")throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let _;if({year:a,month:h,calendar:f,day:g,z:_}=Rh(i),_)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:a,month:h,calendar:f,referenceISODay:g}}function cT(i){const n=W4.exec(i);let a,h,f,g;if(n){if(f=d1(n[3]),a=+n[1],h=+n[2],f!==void 0&&f!=="iso8601")throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let _;if({month:a,day:h,calendar:f,year:g,z:_}=Rh(i),_)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:a,day:h,calendar:f,referenceISOYear:g}}const PD=new RegExp(`^${Iv.source}$`,"i"),zD=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])?)?/.source}$`);function FD(i){const n=c6.test(i)?"Seconds not allowed in offset time zone":"Invalid time zone";throw new RangeError(`${n}: ${i}`)}function fp(i){return PD.test(i)||FD(i),zD.test(i)?{offsetMinutes:_0(i)/6e10}:{tzName:i}}function tv(i,n,a,h){let f=i,g=n,_=a;switch(h){case"reject":Wm(f,g,_);break;case"constrain":({year:f,month:g,day:_}=tI(f,g,_))}return{year:f,month:g,day:_}}function f1(i,n,a,h,f,g,_){let c=i,A=n,D=a,O=h,z=f,V=g;switch(_){case"reject":g1(c,A,D,O,z,V);break;case"constrain":c=go(c,0,23),A=go(A,0,59),D=go(D,0,59),O=go(O,0,999),z=go(z,0,999),V=go(V,0,999)}return{hour:c,minute:A,second:D,millisecond:O,microsecond:z,nanosecond:V}}function jD(i){if(!jr(i))throw new TypeError("invalid duration-like");const n={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let a=!1;for(let h=0;h<Lx.length;h++){const f=Lx[h],g=i[f];g!==void 0&&(a=!0,n[f]=yu(g))}if(!a)throw new TypeError("invalid duration-like");return n}function zs({years:i,months:n,weeks:a,days:h},f,g,_){return{years:i,months:_??n,weeks:g??a,days:f??h}}function xi(i,n){return{isoDate:i,time:n}}function fi(i){return qd(i,"overflow",["constrain","reject"],"constrain")}function nv(i){return qd(i,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function wu(i,n){return qd(i,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],n)}function mx(i,n){return qd(i,"offset",["prefer","use","ignore","reject"],n)}function kv(i){return qd(i,"calendarName",["auto","always","never","critical"],"auto")}function g0(i){let n=i.roundingIncrement;if(n===void 0)return 1;const a=Dn(n);if(a<1||a>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${n}`);return a}function y0(i,n,a){const h=a?n:n-1;if(i>h)throw new RangeError(`roundingIncrement must be at least 1 and less than ${h}, not ${i}`);if(n%i!=0)throw new RangeError(`Rounding increment must divide evenly into ${n}`)}function Ov(i){const n=i.fractionalSecondDigits;if(n===void 0)return"auto";if(typeof n!="number"){if(h1(n)!=="auto")throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${n}`);return"auto"}const a=Math.floor(n);if(!Number.isFinite(a)||a<0||a>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${n}`);return a}function Lv(i,n){switch(i){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(n){case"auto":return{precision:n,unit:"nanosecond",increment:1};case 0:return{precision:n,unit:"second",increment:1};case 1:case 2:case 3:return{precision:n,unit:"millisecond",increment:10**(3-n)};case 4:case 5:case 6:return{precision:n,unit:"microsecond",increment:10**(6-n)};case 7:case 8:case 9:return{precision:n,unit:"nanosecond",increment:10**(9-n)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${n}`)}}const Kd=Symbol("~required~");function nl(i,n,a,h,f=[]){let g=[];for(let D=0;D<e0.length;D++){const O=e0[D],z=O[1],V=O[2];a!=="datetime"&&a!==V||g.push(z)}g=g.concat(f);let _=h;_===Kd?_=void 0:_!==void 0&&g.push(_);let c=[];c=c.concat(g);for(let D=0;D<g.length;D++){const O=g[D],z=s6[O];z!==void 0&&c.push(z)}let A=qd(i,n,c,_);if(A===void 0&&h===Kd)throw new RangeError(`${n} is required`);return A&&A in qE?qE[A]:A}function vw(i){const n=i.relativeTo;if(n===void 0)return{};let a,h,f,g,_,c="option",A=!1;if(jr(n)){if($n(n))return{zonedRelativeTo:n};if(zr(n))return{plainRelativeTo:n};if(fr(n))return{plainRelativeTo:yo(oe(n,wr).isoDate,oe(n,kt))};f=jv(n);const D=Bl(f,n,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],[]);({isoDate:a,time:h}=Pv(f,D,"constrain")),{offset:_,timeZone:g}=D,_===void 0&&(c="wall")}else{let D,O,z,V,Y;if({year:z,month:V,day:Y,time:h,calendar:f,tzAnnotation:D,offset:_,z:O}=Rh(Da(n)),D)g=_o(D),O?c="exact":_||(c="wall"),A=!0;else if(O)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");f||(f="iso8601"),f=wo(f),a={year:z,month:V,day:Y}}return g===void 0?{plainRelativeTo:yo(a,f)}:{zonedRelativeTo:Ps(Nx(a,h,c,c==="option"?_0(_):0,g,"compatible","reject",A),g,f)}}function Od(i){return oe(i,oo)!==0?"year":oe(i,lo)!==0?"month":oe(i,Jo)!==0?"week":oe(i,co)!==0?"day":oe(i,uo)!==0?"hour":oe(i,ho)!==0?"minute":oe(i,fo)!==0?"second":oe(i,po)!==0?"millisecond":oe(i,mo)!==0?"microsecond":"nanosecond"}function $d(i,n){return ev.indexOf(i)>ev.indexOf(n)?n:i}function gh(i){return i==="year"||i==="month"||i==="week"}function Ld(i){return gh(i)||i==="day"?"date":"time"}function wp(i){return ps("%calendarImpl%")(i)}function Nv(i){return ps("%calendarImpl%")(oe(i,kt))}function vo(i,n,a="date"){const h=Object.create(null),f=wp(i).isoToDate(n,{year:!0,monthCode:!0,day:!0});return h.monthCode=f.monthCode,a!=="month-day"&&a!=="date"||(h.day=f.day),a!=="year-month"&&a!=="date"||(h.year=f.year),h}function Bl(i,n,a,h,f){const g=wp(i).extraFields(a),_=a.concat(h,g),c=Object.create(null);let A=!1;_.sort();for(let D=0;D<_.length;D++){const O=_[D],z=n[O];if(z!==void 0)A=!0,c[O]=(0,r6[O])(z);else if(f!=="partial"){if(f.includes(O))throw new TypeError(`required property '${O}' missing or undefined`);c[O]=a6[O]}}if(f==="partial"&&!A)throw new TypeError("no supported properties found");return c}function i2(i,n="complete"){const a=["hour","microsecond","millisecond","minute","nanosecond","second"];let h=!1;const f=Object.create(null);for(let g=0;g<a.length;g++){const _=a[g],c=i[_];c!==void 0?(f[_]=Dn(c),h=!0):n==="complete"&&(f[_]=0)}if(!h)throw new TypeError("invalid time-like");return f}function G_(i,n){if(jr(i)){if(zr(i))return fi(nn(n)),yo(oe(i,Tn),oe(i,kt));if($n(i)){const A=Tc(oe(i,Di),oe(i,wn));return fi(nn(n)),yo(A.isoDate,oe(i,kt))}if(fr(i))return fi(nn(n)),yo(oe(i,wr).isoDate,oe(i,kt));const c=jv(i);return yo(_p(c,Bl(c,i,["year","month","monthCode","day"],[],[]),fi(nn(n))),c)}let{year:a,month:h,day:f,calendar:g,z:_}=Rh(Da(i));if(_)throw new RangeError("Z designator not supported for PlainDate");return g||(g="iso8601"),g=wo(g),fi(nn(n)),yo({year:a,month:h,day:f},g)}function Pv(i,n,a){return xi(_p(i,n,a),f1(n.hour,n.minute,n.second,n.millisecond,n.microsecond,n.nanosecond,a))}function $_(i,n){let a,h,f;if(jr(i)){if(fr(i))return fi(nn(n)),yc(oe(i,wr),oe(i,kt));if($n(i)){const c=Tc(oe(i,Di),oe(i,wn));return fi(nn(n)),yc(c,oe(i,kt))}if(zr(i))return fi(nn(n)),yc(xi(oe(i,Tn),{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),oe(i,kt));f=jv(i);const g=Bl(f,i,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],[]),_=fi(nn(n));({isoDate:a,time:h}=Pv(f,g,_))}else{let g,_,c,A;if({year:_,month:c,day:A,time:h,calendar:f,z:g}=Rh(Da(i)),g)throw new RangeError("Z designator not supported for PlainDateTime");h==="start-of-day"&&(h={deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),fT(_,c,A,h.hour,h.minute,h.second,h.millisecond,h.microsecond,h.nanosecond),f||(f="iso8601"),f=wo(f),fi(nn(n)),a={year:_,month:c,day:A}}return yc(xi(a,h),f)}function bc(i){const n=ps("%Temporal.Duration%");if(Pr(i))return new n(oe(i,oo),oe(i,lo),oe(i,Jo),oe(i,co),oe(i,uo),oe(i,ho),oe(i,fo),oe(i,po),oe(i,mo),oe(i,el));if(!jr(i))return(function(f){const{years:g,months:_,weeks:c,days:A,hours:D,minutes:O,seconds:z,milliseconds:V,microseconds:Y,nanoseconds:ee}=(function(ie){const q=Q4.exec(ie);if(!q)throw new RangeError(`invalid duration: ${ie}`);if(q.every(((Tt,gt)=>gt<2||Tt===void 0)))throw new RangeError(`invalid duration: ${ie}`);const fe=q[1]==="-"?-1:1,Ee=q[2]===void 0?0:Dn(q[2])*fe,we=q[3]===void 0?0:Dn(q[3])*fe,ze=q[4]===void 0?0:Dn(q[4])*fe,Ce=q[5]===void 0?0:Dn(q[5])*fe,Re=q[6]===void 0?0:Dn(q[6])*fe,Ne=q[7],at=q[8],Te=q[9],it=q[10],Dt=q[11];let Mt=0,Ut=0,Ht=0;if(Ne!==void 0){if(at??Te??it??Dt)throw new RangeError("only the smallest unit can be fractional");Ht=3600*Dn((Ne+"000000000").slice(0,9))*fe}else if(Mt=at===void 0?0:Dn(at)*fe,Te!==void 0){if(it??Dt)throw new RangeError("only the smallest unit can be fractional");Ht=60*Dn((Te+"000000000").slice(0,9))*fe}else Ut=it===void 0?0:Dn(it)*fe,Dt!==void 0&&(Ht=Dn((Dt+"000000000").slice(0,9))*fe);const Yt=Ht%1e3,Ve=Math.trunc(Ht/1e3)%1e3,ut=Math.trunc(Ht/1e6)%1e3;return Ut+=Math.trunc(Ht/1e9)%60,Mt+=Math.trunc(Ht/6e10),y1(Ee,we,ze,Ce,Re,Mt,Ut,ut,Ve,Yt),{years:Ee,months:we,weeks:ze,days:Ce,hours:Re,minutes:Mt,seconds:Ut,milliseconds:ut,microseconds:Ve,nanoseconds:Yt}})(f);return new(ps("%Temporal.Duration%"))(g,_,c,A,D,O,z,V,Y,ee)})(Da(i));const a={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let h=jD(i);for(let f=0;f<Lx.length;f++){const g=Lx[f],_=h[g];_!==void 0&&(a[g]=_)}return new n(a.years,a.months,a.weeks,a.days,a.hours,a.minutes,a.seconds,a.milliseconds,a.microseconds,a.nanoseconds)}function Z_(i){let n;if(jr(i)){if(us(i)||$n(i))return bh(oe(i,wn));n=t2(i)}else n=i;const{year:a,month:h,day:f,time:g,offset:_,z:c}=(function(ie){const q=Rh(ie);if(!q.z&&!q.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return q})(Da(n)),{hour:A=0,minute:D=0,second:O=0,millisecond:z=0,microsecond:V=0,nanosecond:Y=0}=g==="start-of-day"?{}:g,ee=yv(a,h,f,A,D,O,z,V,Y-(c?0:_0(_)));return Gy(ee.isoDate),bh(fs(ee))}function HE(i,n){if(jr(i)){if(kl(i))return fi(nn(n)),jy(oe(i,Tn),oe(i,kt));let c;return xo(i,kt)?c=oe(i,kt):(c=i.calendar,c===void 0&&(c="iso8601"),c=Fv(c)),jy(Px(c,Bl(c,i,["year","month","monthCode","day"],[],[]),fi(nn(n))),c)}let{month:a,day:h,referenceISOYear:f,calendar:g}=cT(Da(i));if(g===void 0&&(g="iso8601"),g=wo(g),fi(nn(n)),g==="iso8601")return jy({year:1972,month:a,day:h},g);let _={year:f,month:a,day:h};return ag(_),_=Px(g,vo(g,_,"month-day"),"constrain"),jy(_,g)}function cp(i,n){let a;if(jr(i)){if(Jr(i))return fi(nn(n)),zd(oe(i,Fr));if(fr(i))return fi(nn(n)),zd(oe(i,wr).time);if($n(i)){const D=Tc(oe(i,Di),oe(i,wn));return fi(nn(n)),zd(D.time)}const{hour:h,minute:f,second:g,millisecond:_,microsecond:c,nanosecond:A}=i2(i);a=f1(h,f,g,_,c,A,fi(nn(n)))}else a=ND(Da(i)),fi(nn(n));return zd(a)}function BD(i){return i===void 0?{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}:oe(cp(i),Fr)}function q_(i,n){if(jr(i)){if(hs(i))return fi(nn(n)),Uy(oe(i,Tn),oe(i,kt));const c=jv(i);return Uy(pv(c,Bl(c,i,["year","month","monthCode"],[],[]),fi(nn(n))),c)}let{year:a,month:h,referenceISODay:f,calendar:g}=lT(Da(i));g===void 0&&(g="iso8601"),g=wo(g),fi(nn(n));let _={year:a,month:h,day:f};return pT(_),_=pv(g,vo(g,_,"year-month"),"constrain"),Uy(_,g)}function Nx(i,n,a,h,f,g,_,c){if(n==="start-of-day")return op(f,i);const A=xi(i,n);if(a==="wall"||_==="ignore")return Fs(f,A,g);if(a==="exact"||_==="use"){const z=yv(i.year,i.month,i.day,n.hour,n.minute,n.second,n.millisecond,n.microsecond,n.nanosecond-h);Gy(z.isoDate);const V=fs(z);return Ch(V),V}Gy(i);const D=fs(A),O=mv(f,A);for(let z=0;z<O.length;z++){const V=O[z],Y=ne.toNumber(ne.subtract(D,V)),ee=up(Y,6e10,"halfExpand");if(Y===h||c&&ee===h)return V}if(_==="reject"){const z=r2(h),V=gv(A,"iso8601","auto");throw new RangeError(`Offset ${z} is invalid for ${V} in ${f}`)}return WD(O,f,A,g)}function Y_(i,n){let a,h,f,g,_,c,A,D=!1,O="option";if(jr(i)){if($n(i)){const ie=nn(n);return nv(ie),mx(ie,"reject"),fi(ie),Ps(oe(i,wn),oe(i,Di),oe(i,kt))}_=jv(i);const V=Bl(_,i,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset","timeZone"],["timeZone"]);({offset:g,timeZone:f}=V),g===void 0&&(O="wall");const Y=nn(n);c=nv(Y),A=mx(Y,"reject");const ee=fi(Y);({isoDate:a,time:h}=Pv(_,V,ee))}else{let V,Y,ee,ie,q;({year:ee,month:ie,day:q,time:h,tzAnnotation:V,offset:g,z:Y,calendar:_}=(function(Ee){const we=Rh(Ee);if(!we.tzAnnotation)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return we})(Da(i))),f=_o(V),Y?O="exact":g||(O="wall"),_||(_="iso8601"),_=wo(_),D=!0;const fe=nn(n);c=nv(fe),A=mx(fe,"reject"),fi(fe),a={year:ee,month:ie,day:q}}let z=0;return O==="option"&&(z=_0(g)),Ps(Nx(a,h,O,z,f,c,A,D),f,_)}function VD(i,n,a){ag(n),nf(i),Bn(i,Tn,n),Bn(i,kt,a),Bn(i,_D,!0)}function yo(i,n){const a=ps("%Temporal.PlainDate%"),h=Object.create(a.prototype);return VD(h,i,n),h}function UD(i,n,a){Xm(n),nf(i),Bn(i,wr,n),Bn(i,kt,a)}function yc(i,n){const a=ps("%Temporal.PlainDateTime%"),h=Object.create(a.prototype);return UD(h,i,n),h}function GD(i,n,a){ag(n),nf(i),Bn(i,Tn,n),Bn(i,kt,a),Bn(i,bD,!0)}function jy(i,n){const a=ps("%Temporal.PlainMonthDay%"),h=Object.create(a.prototype);return GD(h,i,n),h}function $D(i,n){nf(i),Bn(i,Fr,n)}function zd(i){const n=ps("%Temporal.PlainTime%"),a=Object.create(n.prototype);return $D(a,i),a}function ZD(i,n,a){pT(n),nf(i),Bn(i,Tn,n),Bn(i,kt,a),Bn(i,vD,!0)}function Uy(i,n){const a=ps("%Temporal.PlainYearMonth%"),h=Object.create(a.prototype);return ZD(h,i,n),h}function qD(i,n){Ch(n),nf(i),Bn(i,wn,n)}function bh(i){const n=ps("%Temporal.Instant%"),a=Object.create(n.prototype);return qD(a,i),a}function YD(i,n,a,h){Ch(n),nf(i),Bn(i,wn,n),Bn(i,Di,a),Bn(i,kt,h)}function Ps(i,n,a="iso8601"){const h=ps("%Temporal.ZonedDateTime%"),f=Object.create(h.prototype);return YD(f,i,n,a),f}function WE(i){return n2.filter((n=>i[n]!==void 0))}function Hm(i,n,a){const h=WE(a),f=wp(i).fieldKeysToIgnore(h),g=Object.create(null),_=WE(n);for(let c=0;c<n2.length;c++){let A;const D=n2[c];_.includes(D)&&!f.includes(D)&&(A=n[D]),h.includes(D)&&(A=a[D]),A!==void 0&&(g[D]=A)}return g}function zl(i,n,a,h){const f=wp(i).dateAdd(n,a,h);return ag(f),f}function zv(i,n,a,h){return wp(i).dateUntil(n,a,h)}function Fv(i){if(jr(i)&&xo(i,kt))return oe(i,kt);const n=Da(i);try{return wo(n)}catch{}let a;try{({calendar:a}=Rh(n))}catch{try{({calendar:a}=ND(n))}catch{try{({calendar:a}=lT(n))}catch{({calendar:a}=cT(n))}}}return a||(a="iso8601"),wo(a)}function jv(i){if(xo(i,kt))return oe(i,kt);const{calendar:n}=i;return n===void 0?"iso8601":Fv(n)}function Mh(i,n){return wo(i)===wo(n)}function _p(i,n,a){const h=wp(i);h.resolveFields(n,"date");const f=h.dateToISO(n,a);return ag(f),f}function pv(i,n,a){const h=wp(i);h.resolveFields(n,"year-month"),n.day=1;const f=h.dateToISO(n,a);return pT(f),f}function Px(i,n,a){const h=wp(i);h.resolveFields(n,"month-day");const f=h.monthDayToISOReferenceDate(n,a);return ag(f),f}function _o(i){if(jr(i)&&$n(i))return oe(i,Di);const n=Da(i);if(n==="UTC")return"UTC";const{tzName:a,offsetMinutes:h}=(function(g){const{tzAnnotation:_,offset:c,z:A}=(function(D){if(PD.test(D))return{tzAnnotation:D,offset:void 0,z:!1};try{const{tzAnnotation:O,offset:z,z:V}=Rh(D);if(V||O||z)return{tzAnnotation:O,offset:z,z:V}}catch{}FD(D)})(g);return _?fp(_):A?fp("UTC"):c?fp(c):void 0})(n);if(h!==void 0)return uT(h);const f=zx(a);if(!f)throw new RangeError(`Unrecognized time zone ${a}`);return f.identifier}function HD(i,n){if(i===n)return!0;const a=fp(i).offsetMinutes,h=fp(n).offsetMinutes;if(a===void 0&&h===void 0){const f=zx(n);if(!f)return!1;const g=zx(i);return!!g&&g.primaryIdentifier===f.primaryIdentifier}return a===h}function Fd(i,n){const a=fp(i).offsetMinutes;return a!==void 0?6e10*a:a2(i,n)}function r2(i){const n=i<0?"-":"+",a=Math.abs(i),h=Math.floor(a/36e11),f=Math.floor(a/6e10)%60,g=Math.floor(a/1e9)%60,_=a%1e9;return`${n}${p1(h,f,g,_,g===0&&_===0?"minute":"auto")}`}function Tc(i,n){const a=Fd(i,n);let{isoDate:{year:h,month:f,day:g},time:{hour:_,minute:c,second:A,millisecond:D,microsecond:O,nanosecond:z}}=KD(n);return yv(h,f,g,_,c,A,D,O,z+a)}function Fs(i,n,a){return WD(mv(i,n),i,n,a)}function WD(i,n,a,h){const f=i.length;if(f===1)return i[0];if(f)switch(h){case"compatible":case"earlier":return i[0];case"later":return i[f-1];case"reject":throw new RangeError("multiple instants found")}if(h==="reject")throw new RangeError("multiple instants found");const g=fs(a),_=ne.subtract(g,gp);Ch(_);const c=Fd(n,_),A=ne.add(g,gp);Ch(A);const D=Fd(n,A)-c;switch(h){case"earlier":{const O=Zn.fromComponents(0,0,0,0,0,-D),z=n0(a.time,O);return mv(n,xi(sl(a.isoDate.year,a.isoDate.month,a.isoDate.day+z.deltaDays),z))[0]}case"compatible":case"later":{const O=Zn.fromComponents(0,0,0,0,0,D),z=n0(a.time,O),V=mv(n,xi(sl(a.isoDate.year,a.isoDate.month,a.isoDate.day+z.deltaDays),z));return V[V.length-1]}}}function mv(i,n){if(i==="UTC")return Gy(n.isoDate),[fs(n)];const a=fp(i).offsetMinutes;if(a!==void 0){const h=yv(n.isoDate.year,n.isoDate.month,n.isoDate.day,n.time.hour,n.time.minute-a,n.time.second,n.time.millisecond,n.time.microsecond,n.time.nanosecond);Gy(h.isoDate);const f=fs(h);return Ch(f),[f]}return Gy(n.isoDate),(function(h,f){let g=fs(f),_=ne.subtract(g,gp);ne.lessThan(_,dv)&&(_=g);let c=ne.add(g,gp);ne.greaterThan(c,Jy)&&(c=g);const A=a2(h,_),D=a2(h,c);return(A===D?[A]:[A,D]).map((z=>{const V=ne.subtract(g,ne.BigInt(z)),Y=(function(ee,ie){const{epochMilliseconds:q,time:{millisecond:fe,microsecond:Ee,nanosecond:we}}=KD(ie),{year:ze,month:Ce,day:Re,hour:Ne,minute:at,second:Te}=JD(ee,q);return yv(ze,Ce,Re,Ne,at,Te,fe,Ee,we)})(h,V);if(i0(f,Y)===0)return Ch(V),V})).filter((z=>z!==void 0))})(i,n)}function op(i,n){const a=xi(n,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),h=mv(i,a);if(h.length)return h[0];const f=fs(a),g=ne.subtract(f,gp);return Ch(g),dT(i,g)}function Bv(i){let n;return n=i<0||i>9999?(i<0?"-":"+")+fv(Math.abs(i),6):fv(i,4),n}function Fl(i){return fv(i,2)}function XD(i,n){let a;if(n==="auto"){if(i===0)return"";a=fv(i,9).replace(/0+$/,"")}else{if(n===0)return"";a=fv(i,9).slice(0,n)}return`.${a}`}function p1(i,n,a,h,f){let g=`${Fl(i)}:${Fl(n)}`;return f==="minute"||(g+=`:${Fl(a)}`,g+=XD(h,f)),g}function XE(i,n,a){let h=n;h===void 0&&(h="UTC");const f=oe(i,wn),g=gv(Tc(h,f),"iso8601",a,"never");let _="Z";return n!==void 0&&(_=QD(Fd(h,f))),`${g}${_}`}function ax(i,n){const a=oe(i,oo),h=oe(i,lo),f=oe(i,Jo),g=oe(i,co),_=oe(i,uo),c=oe(i,ho),A=jx(i);let D="";a!==0&&(D+=`${Math.abs(a)}Y`),h!==0&&(D+=`${Math.abs(h)}M`),f!==0&&(D+=`${Math.abs(f)}W`),g!==0&&(D+=`${Math.abs(g)}D`);let O="";_!==0&&(O+=`${Math.abs(_)}H`),c!==0&&(O+=`${Math.abs(c)}M`);const z=Zn.fromComponents(0,0,oe(i,fo),oe(i,po),oe(i,mo),oe(i,el));z.isZero()&&!["second","millisecond","microsecond","nanosecond"].includes(Od(i))&&n==="auto"||(O+=`${Math.abs(z.sec)}${XD(Math.abs(z.subsec),n)}S`);let V=`${A<0?"-":""}P${D}`;return O&&(V=`${V}T${O}`),V}function QE(i,n="auto"){const{year:a,month:h,day:f}=oe(i,Tn);return`${Bv(a)}-${Fl(h)}-${Fl(f)}${Rv(oe(i,kt),n)}`}function KE({hour:i,minute:n,second:a,millisecond:h,microsecond:f,nanosecond:g},_){return p1(i,n,a,1e6*h+1e3*f+g,_)}function gv(i,n,a,h="auto"){const{isoDate:{year:f,month:g,day:_},time:{hour:c,minute:A,second:D,millisecond:O,microsecond:z,nanosecond:V}}=i;return`${Bv(f)}-${Fl(g)}-${Fl(_)}T${p1(c,A,D,1e6*O+1e3*z+V,a)}${Rv(n,h)}`}function JE(i,n="auto"){const{year:a,month:h,day:f}=oe(i,Tn);let g=`${Fl(h)}-${Fl(f)}`;const _=oe(i,kt);n!=="always"&&n!=="critical"&&_==="iso8601"||(g=`${Bv(a)}-${g}`);const c=Rv(_,n);return c&&(g+=c),g}function eA(i,n="auto"){const{year:a,month:h,day:f}=oe(i,Tn);let g=`${Bv(a)}-${Fl(h)}`;const _=oe(i,kt);n!=="always"&&n!=="critical"&&_==="iso8601"||(g+=`-${Fl(f)}`);const c=Rv(_,n);return c&&(g+=c),g}function tA(i,n,a="auto",h="auto",f="auto",g=void 0){let _=oe(i,wn);if(g){const{unit:O,increment:z,roundingMode:V}=g;_=c2(_,z,O,V)}const c=oe(i,Di),A=Fd(c,_);let D=gv(Tc(c,_),"iso8601",n,"never");return f!=="never"&&(D+=QD(A)),h!=="never"&&(D+=`[${h==="critical"?"!":""}${c}]`),D+=Rv(oe(i,kt),a),D}function nA(i){return zD.test(i)}function _0(i){const n=u6.exec(i);if(!n)throw new RangeError(`invalid time zone offset: ${i}; must match HH:MM[:SS.SSSSSSSSS]`);return(n[1]==="-"?-1:1)*(1e9*(60*(60*+n[2]+ +(n[3]||0))+ +(n[4]||0))+ +((n[5]||0)+"000000000").slice(0,9))}let O_;const l6=Object.assign(Object.create(null),{"/":!0,"-":!0,_:!0});function zx(i){if(O_===void 0){const g=Intl.supportedValuesOf?.("timeZone");if(g){O_=new Map;for(let _=0;_<g.length;_++){const c=g[_];O_.set(_v(c),c)}}else O_=null}const n=_v(i);let a=O_?.get(n);if(a)return{identifier:a,primaryIdentifier:a};try{a=LD(i).resolvedOptions().timeZone}catch{return}if(n==="antarctica/south_pole"&&(a="Antarctica/McMurdo"),i6.has(i))throw new RangeError(`${i} is a legacy time zone identifier from ICU. Use ${a} instead`);const h=[...n].map(((g,_)=>_===0||l6[n[_-1]]?g.toUpperCase():g)).join("").split("/");if(h.length===1)return n==="gb-eire"?{identifier:"GB-Eire",primaryIdentifier:a}:{identifier:n.length<=3||/[-0-9]/.test(n)?n.toUpperCase():h[0],primaryIdentifier:a};if(h[0]==="Etc")return{identifier:`Etc/${["Zulu","Greenwich","Universal"].includes(h[1])?h[1]:h[1].toUpperCase()}`,primaryIdentifier:a};if(h[0]==="Us")return{identifier:`US/${h[1]}`,primaryIdentifier:a};const f=new Map([["Act","ACT"],["Lhi","LHI"],["Nsw","NSW"],["Dar_Es_Salaam","Dar_es_Salaam"],["Port_Of_Spain","Port_of_Spain"],["Port-Au-Prince","Port-au-Prince"],["Isle_Of_Man","Isle_of_Man"],["Comodrivadavia","ComodRivadavia"],["Knox_In","Knox_IN"],["Dumontdurville","DumontDUrville"],["Mcmurdo","McMurdo"],["Denoronha","DeNoronha"],["Easterisland","EasterIsland"],["Bajanorte","BajaNorte"],["Bajasur","BajaSur"]]);return h[1]=f.get(h[1])??h[1],h.length>2&&(h[2]=f.get(h[2])??h[2]),{identifier:h.join("/"),primaryIdentifier:a}}function Vm(i,n){const{year:a,month:h,day:f,hour:g,minute:_,second:c}=JD(i,n);let A=n%1e3;return A<0&&(A+=1e3),1e6*(hT({isoDate:{year:a,month:h,day:f},time:{hour:g,minute:_,second:c,millisecond:A}})-n)}function a2(i,n){return Vm(i,Sc(n,"floor"))}function uT(i){const n=i<0?"-":"+",a=Math.abs(i);return`${n}${p1(Math.floor(a/60),a%60,0,0,"minute")}`}function QD(i){return uT(up(i,K4,"halfExpand")/6e10)}function hT({isoDate:{year:i,month:n,day:a},time:{hour:h,minute:f,second:g,millisecond:_}}){const c=i%400,A=(i-c)/400,D=new Date;return D.setUTCHours(h,f,g,_),D.setUTCFullYear(c,n-1,a),D.getTime()+t6*A}function fs(i){const n=hT(i),a=1e3*i.time.microsecond+i.time.nanosecond;return ne.add(wh(n),ne.BigInt(a))}function KD(i){let n=Sc(i,"trunc"),a=ne.toNumber(ne.remainder(i,Dv));a<0&&(a+=1e6,n-=1);const h=Math.floor(a/1e3)%1e3,f=a%1e3,g=new Date(n);return{epochMilliseconds:n,isoDate:{year:g.getUTCFullYear(),month:g.getUTCMonth()+1,day:g.getUTCDate()},time:{hour:g.getUTCHours(),minute:g.getUTCMinutes(),second:g.getUTCSeconds(),millisecond:g.getUTCMilliseconds(),microsecond:h,nanosecond:f}}}function dT(i,n){if(i==="UTC")return null;const a=Sc(n,"floor");if(a<J_)return dT(i,wh(J_));const h=Date.now(),f=Math.max(a,h)+366*yp*3;let g=a,_=Vm(i,g),c=g,A=_;for(;_===A&&g<f;){if(c=g+2*yp*7,c>OD)return null;A=Vm(i,c),_===A&&(g=c)}return _===A?null:wh(cI((D=>Vm(i,D)),g,c,_,A))}function s2(i,n){if(i==="UTC")return null;const a=Sc(n,"ceil"),h=Date.now(),f=h+366*yp*3;if(a>f){const D=s2(i,wh(f));if(D===null||ne.lessThan(D,wh(h)))return D}if(i==="Africa/Casablanca"||i==="Africa/El_Aaiun"){const D=Date.UTC(2088,0,1);if(D<a)return s2(i,wh(D))}let g=a-1;if(g<J_)return null;let _=Vm(i,g),c=g,A=_;for(;_===A&&g>J_;){if(c=g-2*yp*7,c<J_)return null;A=Vm(i,c),_===A&&(g=c)}return _===A?null:wh(cI((D=>Vm(i,D)),c,g,A,_))}function JD(i,n){return(function(a){const h=a.split(/[^\w]+/);if(h.length!==7)throw new RangeError(`expected 7 parts in "${a}`);const f=+h[0],g=+h[1];let _=+h[2];const c=h[3];if(c[0]==="b"||c[0]==="B")_=1-_;else if(c[0]!=="a"&&c[0]!=="A")throw new RangeError(`Unknown era ${c} in "${a}`);const A=h[4]==="24"?0:+h[4],D=+h[5],O=+h[6];if(!(Number.isFinite(_)&&Number.isFinite(f)&&Number.isFinite(g)&&Number.isFinite(A)&&Number.isFinite(D)&&Number.isFinite(O)))throw new RangeError(`Invalid number in "${a}`);return{year:_,month:f,day:g,hour:A,minute:D,second:O}})(LD(i).format(n))}function Fx(i){return i!==void 0&&!(i%4!=0||i%100==0&&i%400!=0)}function Um(i,n){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[Fx(i)?"leapyear":"standard"][n-1]}function jx(i){const n=[oe(i,oo),oe(i,lo),oe(i,Jo),oe(i,co),oe(i,uo),oe(i,ho),oe(i,fo),oe(i,po),oe(i,mo),oe(i,el)];for(let a=0;a<n.length;a++){const h=n[a];if(h!==0)return h<0?-1:1}return 0}function m1(i){const n=["years","months","weeks","days"];for(let a=0;a<n.length;a++){const h=i[n[a]];if(h!==0)return h<0?-1:1}return 0}function eI(i){const n=m1(i.date);return n!==0?n:i.time.sign()}function Fm(i,n){let a=i,h=n;if(!Number.isFinite(a)||!Number.isFinite(h))throw new RangeError("infinity is out of range");return h-=1,a+=Math.floor(h/12),h%=12,h<0&&(h+=12),h+=1,{year:a,month:h}}function sl(i,n,a){let h=i,f=n,g=a;if(!Number.isFinite(g))throw new RangeError("infinity is out of range");({year:h,month:f}=Fm(h,f));const _=146097;if(Math.abs(g)>_){const D=Math.trunc(g/_);h+=400*D,g-=D*_}let c=0,A=f>2?h:h-1;for(;c=Fx(A)?366:365,g<-c;)h-=1,A-=1,g+=c;for(A+=1;c=Fx(A)?366:365,g>c;)h+=1,A+=1,g-=c;for(;g<1;)({year:h,month:f}=Fm(h,f-1)),g+=Um(h,f);for(;g>Um(h,f);)g-=Um(h,f),{year:h,month:f}=Fm(h,f+1);return{year:h,month:f,day:g}}function yv(i,n,a,h,f,g,_,c,A){const D=lp(h,f,g,_,c,A);return xi(sl(i,n,a+D.deltaDays),D)}function lp(i,n,a,h,f,g){let _,c=i,A=n,D=a,O=h,z=f,V=g;({div:_,mod:V}=Fy(V,3)),z+=_,V<0&&(z-=1,V+=1e3),{div:_,mod:z}=Fy(z,3),O+=_,z<0&&(O-=1,z+=1e3),D+=Math.trunc(O/1e3),O%=1e3,O<0&&(D-=1,O+=1e3),A+=Math.trunc(D/60),D%=60,D<0&&(A-=1,D+=60),c+=Math.trunc(A/60),A%=60,A<0&&(c-=1,A+=60);let Y=Math.trunc(c/24);return c%=24,c<0&&(Y-=1,c+=24),Y+=0,c+=0,A+=0,D+=0,O+=0,z+=0,V+=0,{deltaDays:Y,hour:c,minute:A,second:D,millisecond:O,microsecond:z,nanosecond:V}}function iA(i,n){const a=zs(i,0);if(m1(a)===0)return i.days;const h=oe(n,Tn),f=zl(oe(n,kt),h,a,"constrain"),g=Qm(h.year,h.month-1,h.day),_=Qm(f.year,f.month-1,f.day)-g;return i.days+_}function ol(i){return new(ps("%Temporal.Duration%"))(-oe(i,oo),-oe(i,lo),-oe(i,Jo),-oe(i,co),-oe(i,uo),-oe(i,ho),-oe(i,fo),-oe(i,po),-oe(i,mo),-oe(i,el))}function go(i,n,a){return Math.min(a,Math.max(n,i))}function tI(i,n,a){const h=go(n,1,12);return{year:i,month:h,day:go(a,1,Um(i,h))}}function $a(i,n,a){if(i<n||i>a)throw new RangeError(`value out of range: ${n} <= ${i} <= ${a}`)}function Wm(i,n,a){$a(n,1,12),$a(a,1,Um(i,n))}function ag(i){Xm(xi(i,{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}))}function g1(i,n,a,h,f,g){$a(i,0,23),$a(n,0,59),$a(a,0,59),$a(h,0,999),$a(f,0,999),$a(g,0,999)}function fT(i,n,a,h,f,g,_,c,A){Wm(i,n,a),g1(h,f,g,_,c,A)}function Xm(i){const n=fs(i);(ne.lessThan(n,J4)||ne.greaterThan(n,e6))&&Ch(n)}function o2(i){fs(i)}function Ch(i){if(ne.lessThan(i,dv)||ne.greaterThan(i,Jy))throw new RangeError("date/time value is outside of supported range")}function pT({year:i,month:n}){$a(i,GE,$E),i===GE?$a(n,4,12):i===$E&&$a(n,1,9)}function y1(i,n,a,h,f,g,_,c,A,D){let O=0;const z=[i,n,a,h,f,g,_,c,A,D];for(let fe=0;fe<z.length;fe++){const Ee=z[fe];if(Ee===1/0||Ee===-1/0)throw new RangeError("infinite values not allowed as duration fields");if(Ee!==0){const we=Ee<0?-1:1;if(O!==0&&we!==O)throw new RangeError("mixed-sign values not allowed as duration fields");O=we}}if(Math.abs(i)>=2**32||Math.abs(n)>=2**32||Math.abs(a)>=2**32)throw new RangeError("years, months, and weeks must be < 2");const V=Fy(c,3),Y=Fy(A,6),ee=Fy(D,9),ie=Fy(1e6*V.mod+1e3*Y.mod+ee.mod,9).div,q=86400*h+3600*f+60*g+_+V.div+Y.div+ee.div+ie;if(!Number.isSafeInteger(q))throw new RangeError("total of duration time units cannot exceed 9007199254740991.999999999 s")}function zy(i){return{date:{years:oe(i,oo),months:oe(i,lo),weeks:oe(i,Jo),days:oe(i,co)},time:Zn.fromComponents(oe(i,uo),oe(i,ho),oe(i,fo),oe(i,po),oe(i,mo),oe(i,el))}}function xh(i){const n=Zn.fromComponents(oe(i,uo),oe(i,ho),oe(i,fo),oe(i,po),oe(i,mo),oe(i,el)).add24HourDays(oe(i,co));return{date:{years:oe(i,oo),months:oe(i,lo),weeks:oe(i,Jo),days:0},time:n}}function nI(i){const n=xh(i),a=Math.trunc(n.time.sec/86400);return y1(n.date.years,n.date.months,n.date.weeks,a,0,0,0,0,0,0),{...n.date,days:a}}function _c(i,n){const a=i.time.sign();let h=i.time.abs().subsec,f=0,g=0,_=i.time.abs().sec,c=0,A=0,D=0;switch(n){case"year":case"month":case"week":case"day":f=Math.trunc(h/1e3),h%=1e3,g=Math.trunc(f/1e3),f%=1e3,_+=Math.trunc(g/1e3),g%=1e3,c=Math.trunc(_/60),_%=60,A=Math.trunc(c/60),c%=60,D=Math.trunc(A/24),A%=24;break;case"hour":f=Math.trunc(h/1e3),h%=1e3,g=Math.trunc(f/1e3),f%=1e3,_+=Math.trunc(g/1e3),g%=1e3,c=Math.trunc(_/60),_%=60,A=Math.trunc(c/60),c%=60;break;case"minute":f=Math.trunc(h/1e3),h%=1e3,g=Math.trunc(f/1e3),f%=1e3,_+=Math.trunc(g/1e3),g%=1e3,c=Math.trunc(_/60),_%=60;break;case"second":f=Math.trunc(h/1e3),h%=1e3,g=Math.trunc(f/1e3),f%=1e3,_+=Math.trunc(g/1e3),g%=1e3;break;case"millisecond":f=Math.trunc(h/1e3),h%=1e3,g=yw(_,3,Math.trunc(f/1e3)),f%=1e3,_=0;break;case"microsecond":f=yw(_,6,Math.trunc(h/1e3)),h%=1e3,_=0;break;case"nanosecond":h=yw(_,9,h),_=0}return new(ps("%Temporal.Duration%"))(i.date.years,i.date.months,i.date.weeks,i.date.days+a*D,a*A,a*c,a*_,a*g,a*f,a*h)}function Zd(i,n){return m1(i),n.sign(),{date:i,time:n}}function Qm(i,n,a){return hT({isoDate:{year:i,month:n+1,day:a},time:{hour:0,minute:0,second:0,millisecond:0}})/yp}function Gy({year:i,month:n,day:a}){if(Math.abs(Qm(i,n-1,a))>1e8)throw new RangeError("date/time value is outside the supported range")}function mT(i,n){const a=n.hour-i.hour,h=n.minute-i.minute,f=n.second-i.second,g=n.millisecond-i.millisecond,_=n.microsecond-i.microsecond,c=n.nanosecond-i.nanosecond;return Zn.fromComponents(a,h,f,g,_,c)}function gT(i,n,a,h,f){let g=Zn.fromEpochNsDiff(n,i);return g=Bx(g,a,h,f),Zd({years:0,months:0,weeks:0,days:0},g)}function iI(i,n,a,h){o2(i),o2(n);let f=mT(i.time,n.time);const g=f.sign(),_=Dh(i.isoDate,n.isoDate);let c=n.isoDate;_===g&&(c=sl(c.year,c.month,c.day+g),f=f.add24HourDays(-g));const A=$d("day",h),D=zv(a,i.isoDate,c,A);return h!==A&&(f=f.add24HourDays(D.days),D.days=0),Zd(D,f)}function rI(i,n,a,h,f){const g=ne.subtract(n,i);if(ne.equal(g,Ol))return{date:{years:0,months:0,weeks:0,days:0},time:Zn.ZERO};const _=ne.lessThan(g,Ol)?-1:1,c=Tc(a,i),A=Tc(a,n);let D,O=0,z=_===1?2:1,V=mT(c.time,A.time);for(V.sign()===-_&&O++;O<=z;O++){D=xi(sl(A.isoDate.year,A.isoDate.month,A.isoDate.day-O*_),c.time);const ee=Fs(a,D,"compatible");if(V=Zn.fromEpochNsDiff(n,ee),V.sign()!==-_)break}const Y=$d("day",f);return Zd(zv(h,c.isoDate,D.isoDate,Y),V)}function aI(i,n,a,h,f,g,_,c,A){let D,O,z,V,Y=n;switch(c){case"year":{const Mt=up(Y.date.years,_,"trunc");D=Mt,O=Mt+_*i,z={years:D,months:0,weeks:0,days:0},V={...z,years:O};break}case"month":{const Mt=up(Y.date.months,_,"trunc");D=Mt,O=Mt+_*i,z=zs(Y.date,0,0,D),V=zs(Y.date,0,0,O);break}case"week":{const Mt=zs(Y.date,0,0),Ut=zl(g,h.isoDate,Mt,"constrain"),Ht=zv(g,Ut,sl(Ut.year,Ut.month,Ut.day+Y.date.days),"week"),Yt=up(Y.date.weeks+Ht.weeks,_,"trunc");D=Yt,O=Yt+_*i,z=zs(Y.date,0,D),V=zs(Y.date,0,O);break}case"day":{const Mt=up(Y.date.days,_,"trunc");D=Mt,O=Mt+_*i,z=zs(Y.date,D),V=zs(Y.date,O);break}}const ee=zl(g,h.isoDate,z,"constrain"),ie=zl(g,h.isoDate,V,"constrain");let q,fe;const Ee=xi(ee,h.time),we=xi(ie,h.time);f?(q=Fs(f,Ee,"compatible"),fe=Fs(f,we,"compatible")):(q=fs(Ee),fe=fs(we));const ze=Zn.fromEpochNsDiff(a,q),Ce=Zn.fromEpochNsDiff(fe,q),Re=l1(A,i<0?"negative":"positive"),Ne=ze.add(ze).abs().subtract(Ce.abs()).sign(),at=Math.abs(D)/_%2==0,Te=ze.isZero()?Math.abs(D):ze.cmp(Ce)?c1(Math.abs(D),Math.abs(O),Ne,at,Re):Math.abs(O),it=new Zn(ne.add(ne.multiply(Ce.totalNs,ne.BigInt(D)),ne.multiply(ze.totalNs,ne.BigInt(_*i)))).fdiv(Ce.totalNs),Dt=Te===Math.abs(O);return Y={date:Dt?V:z,time:Zn.ZERO},{nudgeResult:{duration:Y,nudgedEpochNs:Dt?fe:q,didExpandCalendarUnit:Dt},total:it}}function _1(i,n,a,h,f,g,_,c,A){let D=i;const O=gh(c)||h&&c==="day",z=eI(D)<0?-1:1;let V;return O?{nudgeResult:V}=aI(z,D,n,a,h,f,_,c,A):V=h?(function(Y,ee,ie,q,fe,Ee,we,ze){let Ce=ee;const Re=zl(fe,ie.isoDate,Ce.date,"constrain"),Ne=xi(Re,ie.time),at=xi(sl(Re.year,Re.month,Re.day+Y),ie.time),Te=Fs(q,Ne,"compatible"),it=Fs(q,at,"compatible"),Dt=Zn.fromEpochNsDiff(it,Te);if(Dt.sign()!==Y)throw new RangeError("time zone returned inconsistent Instants");const Mt=ne.BigInt(t0[we]*Ee);let Ut=Ce.time.round(Mt,ze);const Ht=Ut.subtract(Dt),Yt=Ht.sign()!==-Y;let Ve,ut;return Yt?(Ve=Y,Ut=Ht.round(Mt,ze),ut=Ut.addToEpochNs(it)):(Ve=0,ut=Ut.addToEpochNs(Te)),{duration:Zd(zs(Ce.date,Ce.date.days+Ve),Ut),nudgedEpochNs:ut,didExpandCalendarUnit:Yt}})(z,D,a,h,f,_,c,A):(function(Y,ee,ie,q,fe,Ee){let we=Y;const ze=we.time.add24HourDays(we.date.days),Ce=ze.round(ne.BigInt(q*t0[fe]),Ee),Re=Ce.subtract(ze),{quotient:Ne}=ze.divmod(Ox),{quotient:at}=Ce.divmod(Ox),Te=Math.sign(at-Ne)===ze.sign(),it=Re.addToEpochNs(ee);let Dt=0,Mt=Ce;return Ld(ie)==="date"&&(Dt=at,Mt=Ce.add(Zn.fromComponents(24*-at,0,0,0,0,0))),{duration:{date:zs(we.date,Dt),time:Mt},nudgedEpochNs:it,didExpandCalendarUnit:Te}})(D,n,g,_,c,A),D=V.duration,V.didExpandCalendarUnit&&c!=="week"&&(D=(function(Y,ee,ie,q,fe,Ee,we,ze){let Ce=ee;if(ze===we)return Ce;const Re=ev.indexOf(we);for(let Ne=ev.indexOf(ze)-1;Ne>=Re;Ne--){const at=ev[Ne];if(at==="week"&&we!=="week")continue;let Te;switch(at){case"year":Te={years:Ce.date.years+Y,months:0,weeks:0,days:0};break;case"month":{const Mt=Ce.date.months+Y;Te=zs(Ce.date,0,0,Mt);break}case"week":{const Mt=Ce.date.weeks+Y;Te=zs(Ce.date,0,Mt);break}}const it=xi(zl(Ee,q.isoDate,Te,"constrain"),q.time);let Dt;if(Dt=fe?Fs(fe,it,"compatible"):fs(it),Rx(ie,Dt)===-Y)break;Ce={date:Te,time:Zn.ZERO}}return Ce})(z,D,V.nudgedEpochNs,a,h,f,g,$d(c,"day"))),D}function rA(i,n,a,h,f,g){return gh(g)||h&&g==="day"?aI(eI(i)<0?-1:1,i,n,a,h,f,1,g,"trunc").total:iv(i.time.add24HourDays(i.date.days),g)}function sI(i,n,a,h,f,g,_){if(i0(i,n)==0)return{date:{years:0,months:0,weeks:0,days:0},time:Zn.ZERO};Xm(i),Xm(n);const c=iI(i,n,a,h);return g==="nanosecond"&&f===1?c:_1(c,fs(n),i,null,a,h,f,g,_)}function oI(i,n,a,h,f,g,_,c){if(Ld(f)==="time")return gT(i,n,g,_,c);const A=rI(i,n,a,h,f);return _==="nanosecond"&&g===1?A:_1(A,n,Tc(a,i),a,h,f,g,_,c)}function v0(i,n,a,h,f,g){const _=e0.reduce(((Y,ee)=>{const ie=ee[0],q=ee[1],fe=ee[2];return a!=="datetime"&&fe!==a||h.includes(q)||Y.push(q,ie),Y}),[]);let c=nl(n,"largestUnit",a,"auto");if(h.includes(c))throw new RangeError(`largestUnit must be one of ${_.join(", ")}, not ${c}`);const A=g0(n);let D=wu(n,"trunc");i==="since"&&(D=(function(Y){switch(Y){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return Y}})(D));const O=nl(n,"smallestUnit",a,f);if(h.includes(O))throw new RangeError(`smallestUnit must be one of ${_.join(", ")}, not ${O}`);const z=$d(g,O);if(c==="auto"&&(c=z),$d(c,O)!==c)throw new RangeError(`largestUnit ${c} cannot be smaller than smallestUnit ${O}`);const V={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[O];return V!==void 0&&y0(A,V,!1),{largestUnit:c,roundingIncrement:A,roundingMode:D,smallestUnit:O}}function aA(i,n,a,h){const f=Z_(a),g=v0(i,nn(h),"time",[],"nanosecond","second");let _=_c(gT(oe(n,wn),oe(f,wn),g.roundingIncrement,g.smallestUnit,g.roundingMode),g.largestUnit);return i==="since"&&(_=ol(_)),_}function sA(i,n,a,h){const f=G_(a),g=oe(n,kt),_=oe(f,kt);if(!Mh(g,_))throw new RangeError(`cannot compute difference between dates of ${g} and ${_} calendars`);const c=v0(i,nn(h),"date",[],"day","day"),A=ps("%Temporal.Duration%"),D=oe(n,Tn),O=oe(f,Tn);if(Dh(D,O)===0)return new A;let z={date:zv(g,D,O,c.largestUnit),time:Zn.ZERO};if(c.smallestUnit!=="day"||c.roundingIncrement!==1){const Y=xi(D,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});z=_1(z,fs(xi(O,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),Y,null,g,c.largestUnit,c.roundingIncrement,c.smallestUnit,c.roundingMode)}let V=_c(z,"day");return i==="since"&&(V=ol(V)),V}function oA(i,n,a,h){const f=$_(a),g=oe(n,kt),_=oe(f,kt);if(!Mh(g,_))throw new RangeError(`cannot compute difference between dates of ${g} and ${_} calendars`);const c=v0(i,nn(h),"datetime",[],"nanosecond","day"),A=ps("%Temporal.Duration%"),D=oe(n,wr),O=oe(f,wr);if(i0(D,O)===0)return new A;let z=_c(sI(D,O,g,c.largestUnit,c.roundingIncrement,c.smallestUnit,c.roundingMode),c.largestUnit);return i==="since"&&(z=ol(z)),z}function lA(i,n,a,h){const f=cp(a),g=v0(i,nn(h),"time",[],"nanosecond","hour");let _=mT(oe(n,Fr),oe(f,Fr));_=Bx(_,g.roundingIncrement,g.smallestUnit,g.roundingMode);let c=_c(Zd({years:0,months:0,weeks:0,days:0},_),g.largestUnit);return i==="since"&&(c=ol(c)),c}function cA(i,n,a,h){const f=q_(a),g=oe(n,kt),_=oe(f,kt);if(!Mh(g,_))throw new RangeError(`cannot compute difference between months of ${g} and ${_} calendars`);const c=v0(i,nn(h),"date",["week","day"],"month","year"),A=ps("%Temporal.Duration%");if(Dh(oe(n,Tn),oe(f,Tn))==0)return new A;const D=vo(g,oe(n,Tn),"year-month");D.day=1;const O=_p(g,D,"constrain"),z=vo(g,oe(f,Tn),"year-month");z.day=1;const V=_p(g,z,"constrain");let Y={date:zs(zv(g,O,V,c.largestUnit),0,0),time:Zn.ZERO};if(c.smallestUnit!=="month"||c.roundingIncrement!==1){const ie=xi(O,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});Y=_1(Y,fs(xi(V,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0})),ie,null,g,c.largestUnit,c.roundingIncrement,c.smallestUnit,c.roundingMode)}let ee=_c(Y,"day");return i==="since"&&(ee=ol(ee)),ee}function uA(i,n,a,h){const f=Y_(a),g=oe(n,kt),_=oe(f,kt);if(!Mh(g,_))throw new RangeError(`cannot compute difference between dates of ${g} and ${_} calendars`);const c=v0(i,nn(h),"datetime",[],"nanosecond","hour"),A=oe(n,wn),D=oe(f,wn),O=ps("%Temporal.Duration%");let z;if(Ld(c.largestUnit)!=="date")z=_c(gT(A,D,c.roundingIncrement,c.smallestUnit,c.roundingMode),c.largestUnit);else{const V=oe(n,Di);if(!HD(V,oe(f,Di)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");if(ne.equal(A,D))return new O;z=_c(oI(A,D,V,g,c.largestUnit,c.roundingIncrement,c.smallestUnit,c.roundingMode),"hour")}return i==="since"&&(z=ol(z)),z}function n0({hour:i,minute:n,second:a,millisecond:h,microsecond:f,nanosecond:g},_){let c=a,A=g;return c+=_.sec,A+=_.subsec,lp(i,n,c,h,f,A)}function l2(i,n){const a=n.addToEpochNs(i);return Ch(a),a}function H_(i,n,a,h,f="constrain"){if(m1(h.date)===0)return l2(i,h.time);const g=Tc(n,i);return l2(Fs(n,xi(zl(a,g.isoDate,h.date,f),g.time),"compatible"),h.time)}function hA(i,n,a){let h=bc(a);i==="subtract"&&(h=ol(h));const f=$d(Od(n),Od(h));if(gh(f))throw new RangeError("For years, months, or weeks arithmetic, use date arithmetic relative to a starting point");const g=xh(n),_=xh(h);return _c(Zd({years:0,months:0,weeks:0,days:0},g.time.add(_.time)),f)}function dA(i,n,a){let h=bc(a);i==="subtract"&&(h=ol(h));const f=Od(h);if(Ld(f)==="date")throw new RangeError(`Duration field ${f} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);const g=xh(h);return bh(l2(oe(n,wn),g.time))}function fA(i,n,a,h){const f=oe(n,kt);let g=bc(a);i==="subtract"&&(g=ol(g));const _=nI(g),c=fi(nn(h));return yo(zl(f,oe(n,Tn),_,c),f)}function pA(i,n,a,h){let f=bc(a);i==="subtract"&&(f=ol(f));const g=fi(nn(h)),_=oe(n,kt),c=xh(f),A=oe(n,wr),D=n0(A.time,c.time),O=zs(c.date,D.deltaDays);return y1(O.years,O.months,O.weeks,O.days,0,0,0,0,0,0),yc(xi(zl(_,A.isoDate,O,g),D),_)}function mA(i,n,a){let h=bc(a);i==="subtract"&&(h=ol(h));const f=xh(h),{hour:g,minute:_,second:c,millisecond:A,microsecond:D,nanosecond:O}=n0(oe(n,Fr),f.time);return zd(f1(g,_,c,A,D,O,"reject"))}function gA(i,n,a,h){let f=bc(a);i==="subtract"&&(f=ol(f));const g=fi(nn(h)),_=jx(f),c=oe(n,kt),A=vo(c,oe(n,Tn),"year-month");A.day=1;let D=_p(c,A,"constrain");if(_<0){const z=zl(c,D,{months:1},"constrain");D=sl(z.year,z.month,z.day-1)}const O=nI(f);return ag(D),Uy(pv(c,vo(c,zl(c,D,O,g),"year-month"),g),c)}function yA(i,n,a,h){let f=bc(a);i==="subtract"&&(f=ol(f));const g=fi(nn(h)),_=oe(n,Di),c=oe(n,kt),A=zy(f);return Ps(H_(oe(n,wn),_,c,A,g),_,c)}function up(i,n,a){const h=Math.trunc(i/n),f=i%n,g=i<0?"negative":"positive",_=Math.abs(h),c=_+1,A=tl(Math.abs(2*f)-n),D=_%2==0,O=l1(a,g),z=f===0?_:c1(_,c,A,D,O);return n*(g==="positive"?z:-z)}function c2(i,n,a,h){const f=t0[a]*n;return(function(g,_,c){const A=Rd(g),D=Rd(_),O=ne.divide(A,D),z=ne.remainder(A,D),V=l1(c,"positive");let Y,ee;ne.lessThan(A,Ol)?(Y=ne.subtract(O,hv),ee=O):(Y=O,ee=ne.add(O,hv));const ie=Rx(Lm(ne.multiply(z,oT)),D)*(ne.lessThan(A,Ol)?-1:1)+0,q=ne.equal(z,Ol)?O:c1(Y,ee,ie,yD(Y),V);return ne.multiply(q,D)})(i,ne.BigInt(f),h)}function u2(i,n,a,h){o2(i);const{year:f,month:g,day:_}=i.isoDate,c=h2(i.time,n,a,h);return xi(sl(f,g,_+c.deltaDays),c)}function h2({hour:i,minute:n,second:a,millisecond:h,microsecond:f,nanosecond:g},_,c,A){let D;switch(c){case"day":case"hour":D=1e3*(1e3*(1e3*(60*(60*i+n)+a)+h)+f)+g;break;case"minute":D=1e3*(1e3*(1e3*(60*n+a)+h)+f)+g;break;case"second":D=1e3*(1e3*(1e3*a+h)+f)+g;break;case"millisecond":D=1e3*(1e3*h+f)+g;break;case"microsecond":D=1e3*f+g;break;case"nanosecond":D=g}const O=t0[c],z=up(D,O*_,A)/O;switch(c){case"day":return{deltaDays:z,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return lp(z,0,0,0,0,0);case"minute":return lp(i,z,0,0,0,0);case"second":return lp(i,n,z,0,0,0);case"millisecond":return lp(i,n,a,z,0,0);case"microsecond":return lp(i,n,a,h,z,0);case"nanosecond":return lp(i,n,a,h,f,z);default:throw new Error(`Invalid unit ${c}`)}}function Bx(i,n,a,h){const f=t0[a];return i.round(ne.BigInt(f*n),h)}function iv(i,n){const a=t0[n];return i.fdiv(ne.BigInt(a))}function Dh(i,n){return i.year!==n.year?tl(i.year-n.year):i.month!==n.month?tl(i.month-n.month):i.day!==n.day?tl(i.day-n.day):0}function d2(i,n){return i.hour!==n.hour?tl(i.hour-n.hour):i.minute!==n.minute?tl(i.minute-n.minute):i.second!==n.second?tl(i.second-n.second):i.millisecond!==n.millisecond?tl(i.millisecond-n.millisecond):i.microsecond!==n.microsecond?tl(i.microsecond-n.microsecond):i.nanosecond!==n.nanosecond?tl(i.nanosecond-n.nanosecond):0}function i0(i,n){const a=Dh(i.isoDate,n.isoDate);return a!==0?a:d2(i.time,n.time)}function lI(i){const n=Vx(i);return globalThis.BigInt!==void 0?globalThis.BigInt(n.toString(10)):n}function Sc(i,n){const a=Rd(i),{quotient:h,remainder:f}=V_(a,Dv);let g=ne.toNumber(h);return n==="floor"&&ne.toNumber(f)<0&&(g-=1),n==="ceil"&&ne.toNumber(f)>0&&(g+=1),g}function wh(i){if(!Number.isInteger(i))throw new RangeError("epoch milliseconds must be an integer");return ne.multiply(ne.BigInt(i),Dv)}function Vx(i){let n=i;if(typeof i=="object"){const a=i[Symbol.toPrimitive];a&&typeof a=="function"&&(n=a.call(i,"number"))}if(typeof n=="number")throw new TypeError("cannot convert number to bigint");return typeof n=="bigint"?ne.BigInt(n.toString(10)):ne.BigInt(n)}const f2=(()=>{let i=ne.BigInt(Date.now()%1e6);return()=>{const n=Date.now(),a=ne.BigInt(n),h=ne.add(wh(n),i);return i=ne.remainder(a,Dv),ne.greaterThan(h,Jy)?Jy:ne.lessThan(h,dv)?dv:h}})();function L_(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}function tl(i){return i<0?-1:i>0?1:i}function nn(i){if(i===void 0)return Object.create(null);if(jr(i)&&i!==null)return i;throw new TypeError("Options parameter must be an object, not "+(i===null?"null":typeof i))}function Km(i,n){const a=Object.create(null);return a[i]=n,a}function qd(i,n,a,h){let f=i[n];if(f!==void 0){if(f=h1(f),!a.includes(f))throw new RangeError(`${n} must be one of ${a.join(", ")}, not ${f}`);return f}if(h===Kd)throw new RangeError(`${n} option is required`);return h}function wo(i){const n=_v(i);if(!n6.includes(_v(n)))throw new RangeError(`invalid calendar identifier ${n}`);switch(n){case"ethiopic-amete-alem":return"ethioaa";case"islamicc":return"islamic-civil"}return n}function _v(i){let n="";for(let a=0;a<i.length;a++){const h=i.charCodeAt(a);n+=h>=65&&h<=90?String.fromCharCode(h+32):String.fromCharCode(h)}return n}function Tp(i){throw new TypeError(`Do not use built-in arithmetic operators with Temporal objects. When comparing, use ${i==="PlainMonthDay"?"Temporal.PlainDate.compare(obj1.toPlainDate(year), obj2.toPlainDate(year))":`Temporal.${i}.compare(obj1, obj2)`}, not obj1 > obj2. When coercing to strings, use \`\${obj}\` or String(obj), not '' + obj. When coercing to numbers, use properties or methods of the object, not \`+obj\`. When concatenating with strings, use \`\${str}\${obj}\` or str.concat(obj), not str + obj. In React, coerce to a string before rendering a Temporal object.`)}const c6=new RegExp(`^${RD.source}$`),u6=new RegExp(`^${/([+-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/.source}$`);function cI(i,n,a,h=i(n),f=i(a)){let g=n,_=a,c=h,A=f;for(;_-g>1;){let D=Math.trunc((g+_)/2);const O=i(D);O===c?(g=D,c=O):O===A&&(_=D,A=O)}return _}function uI(i){return[...i]}function hI(i,n){if(i!=="gregory"&&i!=="iso8601")return;const a=Vv[i];let h=n.year;const{dayOfWeek:f,dayOfYear:g,daysInYear:_}=a.isoToDate(n,{dayOfWeek:!0,dayOfYear:!0,daysInYear:!0}),c=a.getFirstDayOfWeek(),A=a.getMinimalDaysInFirstWeek();let D=(f+7-c)%7,O=(f-g+7001-c)%7,z=Math.floor((g-1+O)/7);if(7-O>=A&&++z,z==0)z=(function(V,Y,ee,ie){let q=(ie-V-ee+1)%7;q<0&&(q+=7);let fe=Math.floor((ee+q-1)/7);return 7-q>=Y&&++fe,fe})(c,A,g+a.isoToDate(a.dateAdd(n,{years:-1},"constrain"),{daysInYear:!0}).daysInYear,f),h--;else if(g>=_-5){let V=(D+_-g)%7;V<0&&(V+=7),6-V>=A&&g+7-D>_&&(z=1,h++)}return{week:z,year:h}}function _A(i,n,a,h,f){if(n!==f.year){if(i*(n-f.year)>0)return!0}else if(a!==f.month){if(i*(a-f.month)>0)return!0}else if(h!==f.day&&i*(h-f.day)>0)return!0;return!1}const Vv={};function Jm(i){if(!i.startsWith("M"))throw new RangeError(`Invalid month code: ${i}.  Month codes must start with M.`);const n=+i.slice(1);if(Number.isNaN(n))throw new RangeError(`Invalid month code: ${i}`);return n}function Ah(i,n=!1){return`M${`${i}`.padStart(2,"0")}${n?"L":""}`}function yT(i,n=void 0,a=12){let{month:h,monthCode:f}=i;if(f===void 0){if(h===void 0)throw new TypeError("Either month or monthCode are required");n==="reject"&&$a(h,1,a),n==="constrain"&&(h=go(h,1,a)),f=Ah(h)}else{const g=Jm(f);if(f!==Ah(g))throw new RangeError(`Invalid month code: ${f}`);if(h!==void 0&&h!==g)throw new RangeError(`monthCode ${f} and month ${h} must match if both are present`);if(h=g,h<1||h>a)throw new RangeError(`Invalid monthCode: ${f}`)}return{...i,month:h,monthCode:f}}Vv.iso8601={resolveFields(i,n){if((n==="date"||n==="year-month")&&i.year===void 0)throw new TypeError("year is required");if((n==="date"||n==="month-day")&&i.day===void 0)throw new TypeError("day is required");Object.assign(i,yT(i))},dateToISO:(i,n)=>tv(i.year,i.month,i.day,n),monthDayToISOReferenceDate(i,n){const{month:a,day:h}=tv(i.year??1972,i.month,i.day,n);return{month:a,day:h,year:1972}},extraFields:()=>[],fieldKeysToIgnore(i){const n=new Set;for(let a=0;a<i.length;a++){const h=i[a];n.add(h),h==="month"?n.add("monthCode"):h==="monthCode"&&n.add("month")}return uI(n)},dateAdd(i,{years:n=0,months:a=0,weeks:h=0,days:f=0},g){let{year:_,month:c,day:A}=i;return _+=n,c+=a,{year:_,month:c}=Fm(_,c),{year:_,month:c,day:A}=tv(_,c,A,g),A+=f+7*h,sl(_,c,A)},dateUntil(i,n,a){const h=-Dh(i,n);if(h===0)return{years:0,months:0,weeks:0,days:0};let f,g=0,_=0;if(a==="year"||a==="month"){let O=n.year-i.year;for(O!==0&&(O-=h);!_A(h,i.year+O,i.month,i.day,n);)g=O,O+=h;let z=h;for(f=Fm(i.year+g,i.month+z);!_A(h,f.year,f.month,i.day,n);)_=z,z+=h,f=Fm(f.year,f.month+h);a==="month"&&(_+=12*g,g=0)}f=Fm(i.year+g,i.month+_);const c=tI(f.year,f.month,i.day);let A=0,D=Qm(n.year,n.month-1,n.day)-Qm(c.year,c.month-1,c.day);return a==="week"&&(A=Math.trunc(D/7),D%=7),{years:g,months:_,weeks:A,days:D}},isoToDate({year:i,month:n,day:a},h){const f={era:void 0,eraYear:void 0,year:i,month:n,day:a,daysInWeek:7,monthsInYear:12};if(h.monthCode&&(f.monthCode=Ah(n)),h.dayOfWeek){const g=n+(n<3?10:-2),_=i-(n<3?1:0),c=Math.floor(_/100),A=_-100*c,D=(a+Math.floor(2.6*g-.2)+(A+Math.floor(A/4))+(Math.floor(c/4)-2*c))%7;f.dayOfWeek=D+(D<=0?7:0)}if(h.dayOfYear){let g=a;for(let _=n-1;_>0;_--)g+=Um(i,_);f.dayOfYear=g}return h.weekOfYear&&(f.weekOfYear=hI("iso8601",{year:i,month:n,day:a})),h.daysInMonth&&(f.daysInMonth=Um(i,n)),(h.daysInYear||h.inLeapYear)&&(f.inLeapYear=Fx(i),f.daysInYear=f.inLeapYear?366:365),f},getFirstDayOfWeek:()=>1,getMinimalDaysInFirstWeek:()=>4};class Ga{constructor(n){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,n!==void 0){let a=0;for(const h of n.map.entries()){if(++a>Ga.MAX_CACHE_ENTRIES)break;this.map.set(...h)}}}get(n){const a=this.map.get(n);return a&&(this.hits++,this.report()),this.calls++,a}set(n,a){this.map.set(n,a),this.misses++,this.report()}report(){}setObject(n){if(Ga.objectMap.get(n))throw new RangeError("object already cached");Ga.objectMap.set(n,this),this.report()}static getCacheForObject(n){let a=Ga.objectMap.get(n);return a||(a=new Ga,Ga.objectMap.set(n,a)),a}}function dI({isoYear:i,isoMonth:n,isoDay:a}){return`${Bv(i)}-${Fl(n)}-${Fl(a)}T00:00Z`}function bw(i,n){return{years:i.year-n.year,months:i.month-n.month,days:i.day-n.day}}Ga.objectMap=new WeakMap,Ga.MAX_CACHE_ENTRIES=1e3;class sg{constructor(){this.eras=[],this.hasEra=!1,this.erasBeginMidYear=!1}getFormatter(){return this.formatter===void 0&&(this.formatter=new Intl.DateTimeFormat(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:"short",timeZone:"UTC"})),this.formatter}getCalendarParts(n){let a=this.getFormatter(),h=new Date(n);if(n==="-271821-04-19T00:00Z"){const f=a.resolvedOptions();a=new Intl.DateTimeFormat(f.locale,{...f,timeZone:"Etc/GMT+1"}),h=new Date("-271821-04-20T00:00Z")}try{return a.formatToParts(h)}catch{throw new RangeError(`Invalid ISO date: ${n}`)}}isoToCalendarDate(n,a){const{year:h,month:f,day:g}=n,_=JSON.stringify({func:"isoToCalendarDate",isoYear:h,isoMonth:f,isoDay:g,id:this.id}),c=a.get(_);if(c)return c;const A=dI({isoYear:h,isoMonth:f,isoDay:g}),D=this.getCalendarParts(A),O={};for(let V=0;V<D.length;V++){const{type:Y,value:ee}=D[V];if(Y!=="year"&&Y!=="relatedYear"||(this.hasEra?O.eraYear=+ee:O.year=+ee),Y==="month"){const ie=/^([0-9]*)(.*?)$/.exec(ee);if(!ie||ie.length!=3||!ie[1]&&!ie[2])throw new RangeError(`Unexpected month: ${ee}`);if(O.month=ie[1]?+ie[1]:1,O.month<1)throw new RangeError(`Invalid month ${ee} from ${A}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(O.month>13)throw new RangeError(`Invalid month ${ee} from ${A}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);ie[2]&&(O.monthExtra=ie[2])}Y==="day"&&(O.day=+ee),this.hasEra&&Y==="era"&&ee!=null&&ee!==""&&(O.era=ee.split(" (")[0].normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(/ /g,"-").toLowerCase())}if(this.hasEra&&O.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.hasEra){const V=this.eras.find((Y=>O.era===Y.genericName));V&&(O.era=V.code)}if(this.reviseIntlEra){const{era:V,eraYear:Y}=this.reviseIntlEra(O,n);O.era=V,O.eraYear=Y}this.checkIcuBugs&&this.checkIcuBugs(n);const z=this.adjustCalendarDate(O,a,"constrain",!0);if(z.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(n)}`);if(z.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(n)}`);if(z.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(n)}`);return a.set(_,z),["constrain","reject"].forEach((V=>{const Y=JSON.stringify({func:"calendarToIsoDate",year:z.year,month:z.month,day:z.day,overflow:V,id:this.id});a.set(Y,n)})),z}validateCalendarDate(n){const{month:a,year:h,day:f,eraYear:g,monthCode:_,monthExtra:c}=n;if(c!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(h===void 0&&g===void 0)throw new TypeError("year or eraYear is required");if(a===void 0&&_===void 0)throw new TypeError("month or monthCode is required");if(f===void 0)throw new RangeError("Missing day");if(_!==void 0){if(typeof _!="string")throw new RangeError("monthCode must be a string, not "+typeof _);if(!/^M([01]?\d)(L?)$/.test(_))throw new RangeError(`Invalid monthCode: ${_}`)}if(this.hasEra&&n.era===void 0!=(n.eraYear===void 0))throw new TypeError("properties era and eraYear must be provided together")}adjustCalendarDate(n,a=void 0,h="constrain",f=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let g=n;this.validateCalendarDate(g);const _=this.monthsInYear(g,a);let{month:c,monthCode:A}=g;return{month:c,monthCode:A}=yT(g,h,_),{...g,month:c,monthCode:A}}regulateMonthDayNaive(n,a,h){const f=this.monthsInYear(n,h);let{month:g,day:_}=n;return a==="reject"?($a(g,1,f),$a(_,1,this.maximumMonthLength(n))):(g=go(g,1,f),_=go(_,1,this.maximumMonthLength({...n,month:g}))),{...n,month:g,day:_}}calendarToIsoDate(n,a="constrain",h){const f=n;let g=this.adjustCalendarDate(n,h,a,!1);g=this.regulateMonthDayNaive(g,a,h);const{year:_,month:c,day:A}=g,D=JSON.stringify({func:"calendarToIsoDate",year:_,month:c,day:A,overflow:a,id:this.id});let O,z=h.get(D);if(z||f.year!==void 0&&f.month!==void 0&&f.day!==void 0&&(f.year!==g.year||f.month!==g.month||f.day!==g.day)&&(O=JSON.stringify({func:"calendarToIsoDate",year:f.year,month:f.month,day:f.day,overflow:a,id:this.id}),z=h.get(O),z))return z;let V=this.estimateIsoDate({year:_,month:c,day:A});const Y=Ee=>{let we=this.addDaysIso(V,Ee);if(g.day>this.minimumMonthLength(g)){let ze=this.isoToCalendarDate(we,h);for(;ze.month!==c||ze.year!==_;){if(a==="reject")throw new RangeError(`day ${A} does not exist in month ${c} of year ${_}`);we=this.addDaysIso(we,-1),ze=this.isoToCalendarDate(we,h)}}return we};let ee=0,ie=this.isoToCalendarDate(V,h),q=bw(g,ie);if(q.years!==0||q.months!==0||q.days!==0){const Ee=365*q.years+30*q.months+q.days;V=this.addDaysIso(V,Ee),ie=this.isoToCalendarDate(V,h),q=bw(g,ie),q.years===0&&q.months===0?V=Y(q.days):ee=this.compareCalendarDates(g,ie)}let fe=8;for(;ee;){V=this.addDaysIso(V,ee*fe);const Ee=ie;ie=this.isoToCalendarDate(V,h);const we=ee;if(ee=this.compareCalendarDates(g,ie),ee){if(q=bw(g,ie),q.years===0&&q.months===0)V=Y(q.days),ee=0;else if(we&&ee!==we)if(fe>1)fe/=2;else{if(a==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...f})}`);this.compareCalendarDates(ie,Ee)>0&&(V=this.addDaysIso(V,-1)),ee=0}}}if(h.set(D,V),O&&h.set(O,V),g.year===void 0||g.month===void 0||g.day===void 0||g.monthCode===void 0||this.hasEra&&(g.era===void 0||g.eraYear===void 0))throw new RangeError("Unexpected missing property");return V}compareCalendarDates(n,a){return n.year!==a.year?tl(n.year-a.year):n.month!==a.month?tl(n.month-a.month):n.day!==a.day?tl(n.day-a.day):0}regulateDate(n,a="constrain",h){const f=this.calendarToIsoDate(n,a,h);return this.isoToCalendarDate(f,h)}addDaysIso(n,a){return sl(n.year,n.month,n.day+a)}addDaysCalendar(n,a,h){const f=this.calendarToIsoDate(n,"constrain",h),g=this.addDaysIso(f,a);return this.isoToCalendarDate(g,h)}addMonthsCalendar(n,a,h,f){let g=n;const{day:_}=g;for(let c=0,A=Math.abs(a);c<A;c++){const{month:D}=g,O=g,z=a<0?-Math.max(_,this.daysInPreviousMonth(g,f)):this.daysInMonth(g,f),V=this.calendarToIsoDate(g,"constrain",f);let Y=this.addDaysIso(V,z);if(g=this.isoToCalendarDate(Y,f),a>0){const ee=this.monthsInYear(O,f);for(;g.month-1!=D%ee;)Y=this.addDaysIso(Y,-1),g=this.isoToCalendarDate(Y,f)}g.day!==_&&(g=this.regulateDate({...g,day:_},"constrain",f))}if(h==="reject"&&g.day!==_)throw new RangeError(`Day ${_} does not exist in resulting calendar month`);return g}addCalendar(n,{years:a=0,months:h=0,weeks:f=0,days:g=0},_,c){const{year:A,day:D,monthCode:O}=n,z=this.adjustCalendarDate({year:A+a,monthCode:O,day:D},c),V=this.addMonthsCalendar(z,h,_,c),Y=g+7*f;return this.addDaysCalendar(V,Y,c)}untilCalendar(n,a,h,f){let g=0,_=0,c=0,A=0;switch(h){case"day":g=this.calendarDaysUntil(n,a,f);break;case"week":{const D=this.calendarDaysUntil(n,a,f);g=D%7,_=(D-g)/7;break}case"month":case"year":{const D=this.compareCalendarDates(a,n);if(!D)return{years:0,months:0,weeks:0,days:0};const O=a.year-n.year,z=a.day-n.day;if(h==="year"&&O){let ee=0;a.monthCode>n.monthCode&&(ee=1),a.monthCode<n.monthCode&&(ee=-1),ee||(ee=Math.sign(z)),A=ee*D<0?O-D:O}let V,Y=A?this.addCalendar(n,{years:A},"constrain",f):n;do c+=D,V=Y,Y=this.addMonthsCalendar(V,D,"constrain",f),Y.day!==n.day&&(Y=this.regulateDate({...Y,day:n.day},"constrain",f));while(this.compareCalendarDates(a,Y)*D>=0);c-=D,g=this.calendarDaysUntil(V,a,f);break}}return{years:A,months:c,weeks:_,days:g}}daysInMonth(n,a){const{day:h}=n,f=this.maximumMonthLength(n),g=this.minimumMonthLength(n);if(g===f)return g;const _=h<=f-g?f:g,c=this.calendarToIsoDate(n,"constrain",a),A=this.addDaysIso(c,_),D=this.isoToCalendarDate(A,a),O=this.addDaysIso(A,-D.day);return this.isoToCalendarDate(O,a).day}daysInPreviousMonth(n,a){const{day:h,month:f,year:g}=n;let _={year:f>1?g:g-1,month:f,day:1};const c=f>1?f-1:this.monthsInYear(_,a);_={..._,month:c};const A=this.minimumMonthLength(_),D=this.maximumMonthLength(_);if(A===D)return D;const O=this.calendarToIsoDate(n,"constrain",a),z=this.addDaysIso(O,-h);return this.isoToCalendarDate(z,a).day}startOfCalendarYear(n){return{year:n.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(n){return{year:n.year,month:n.month,day:1}}calendarDaysUntil(n,a,h){const f=this.calendarToIsoDate(n,"constrain",h),g=this.calendarToIsoDate(a,"constrain",h);return Qm(g.year,g.month-1,g.day)-Qm(f.year,f.month-1,f.day)}monthDaySearchStartYear(n,a){return 1972}monthDayFromFields(n,a,h){let f,g,_,c,A,{era:D,eraYear:O,year:z,month:V,monthCode:Y,day:ee}=n;if(V!==void 0&&z===void 0&&(!this.hasEra||D===void 0||O===void 0))throw new TypeError("when month is present, year (or era and eraYear) are required");(Y===void 0||z!==void 0||this.hasEra&&O!==void 0)&&({monthCode:Y,day:ee}=this.isoToCalendarDate(this.calendarToIsoDate(n,a,h),h));const ie={year:this.monthDaySearchStartYear(Y,ee),month:12,day:31},q=this.isoToCalendarDate(ie,h),fe=q.monthCode>Y||q.monthCode===Y&&q.day>=ee?q.year:q.year-1;for(let Ee=0;Ee<20;Ee++){const we=this.adjustCalendarDate({day:ee,monthCode:Y,year:fe-Ee},h),ze=this.calendarToIsoDate(we,"constrain",h),Ce=this.isoToCalendarDate(ze,h);if({year:f,month:g,day:_}=ze,Ce.monthCode===Y&&Ce.day===ee)return{month:g,day:_,year:f};if(a==="constrain"){const Re=this.maxLengthOfMonthCodeInAnyYear(Ce.monthCode);if(Ce.monthCode===Y&&Ce.day===Re&&ee>Re)return{month:g,day:_,year:f};(c===void 0||Ce.monthCode===c.monthCode&&Ce.day>c.day)&&(c=Ce,A=ze)}}if(a==="constrain"&&A!==void 0)return A;throw new RangeError(`No recent ${this.id} year with monthCode ${Y} and day ${ee}`)}getFirstDayOfWeek(){}getMinimalDaysInFirstWeek(){}}class h6 extends sg{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}}}inLeapYear(n){const{year:a}=n;return(7*a+1)%19<7}monthsInYear(n){return this.inLeapYear(n)?13:12}minimumMonthLength(n){return this.minMaxMonthLength(n,"min")}maximumMonthLength(n){return this.minMaxMonthLength(n,"max")}minMaxMonthLength(n,a){const{month:h,year:f}=n,g=this.getMonthCode(f,h),_=Object.entries(this.months).find((A=>A[1].monthCode===g));if(_===void 0)throw new RangeError(`unmatched Hebrew month: ${h}`);const c=_[1].days;return typeof c=="number"?c:c[a]}maxLengthOfMonthCodeInAnyYear(n){return["M04","M06","M08","M10","M12"].includes(n)?29:30}estimateIsoDate(n){const{year:a}=n;return{year:a-3760,month:1,day:1}}getMonthCode(n,a){return this.inLeapYear({year:n})?a===6?Ah(5,!0):Ah(a<6?a:a-1):Ah(a)}adjustCalendarDate(n,a,h="constrain",f=!1){let{year:g,month:_,monthCode:c,day:A,monthExtra:D}=n;if(g===void 0)throw new TypeError("Missing property: year");if(f){if(D){const O=this.months[D];if(!O)throw new RangeError(`Unrecognized month from formatToParts: ${D}`);_=this.inLeapYear({year:g})?O.leap:O.regular}return c=this.getMonthCode(g,_),{year:g,month:_,day:A,monthCode:c}}if(this.validateCalendarDate(n),_===void 0)if(c.endsWith("L")){if(c!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${c}`);if(_=6,!this.inLeapYear({year:g})){if(h==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${g} which is not a leap year`);_=6,c="M06"}}else{_=Jm(c),this.inLeapYear({year:g})&&_>=6&&_++;const O=this.monthsInYear({year:g});if(_<1||_>O)throw new RangeError(`Invalid monthCode: ${c}`)}else if(h==="reject"?($a(_,1,this.monthsInYear({year:g})),$a(A,1,this.maximumMonthLength({year:g,month:_}))):(_=go(_,1,this.monthsInYear({year:g})),A=go(A,1,this.maximumMonthLength({year:g,month:_}))),c===void 0)c=this.getMonthCode(g,_);else if(this.getMonthCode(g,_)!==c)throw new RangeError(`monthCode ${c} doesn't correspond to month ${_} in Hebrew year ${g}`);return{...n,day:A,month:_,monthCode:c,year:g}}}class b0 extends sg{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425}inLeapYear(n,a){const h={year:n.year,month:1,monthCode:"M01",day:1},f={year:n.year+1,month:1,monthCode:"M01",day:1};return this.calendarDaysUntil(h,f,a)===355}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(){return 30}estimateIsoDate(n){const{year:a}=this.adjustCalendarDate(n);return{year:Math.floor(a*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class d6 extends b0{constructor(){super(...arguments),this.id="islamic"}}class f6 extends b0{constructor(){super(...arguments),this.id="islamic-umalqura"}}class p6 extends b0{constructor(){super(...arguments),this.id="islamic-tbla"}}class m6 extends b0{constructor(){super(...arguments),this.id="islamic-civil"}}class g6 extends b0{constructor(){super(...arguments),this.id="islamic-rgsa"}}class y6 extends b0{constructor(){super(...arguments),this.id="islamicc"}}class _6 extends sg{constructor(){super(...arguments),this.id="persian",this.calendarType="solar"}inLeapYear(n,a){return this.daysInMonth({year:n.year,month:12,day:1},a)===30}monthsInYear(){return 12}minimumMonthLength(n){const{month:a}=n;return a===12?29:a<=6?31:30}maximumMonthLength(n){const{month:a}=n;return a===12?30:a<=6?31:30}maxLengthOfMonthCodeInAnyYear(n){return Jm(n)<=6?31:30}estimateIsoDate(n){const{year:a}=this.adjustCalendarDate(n);return{year:a+621,month:1,day:1}}}class v6 extends sg{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(n){return _T(n.year+78)}monthsInYear(){return 12}minimumMonthLength(n){return this.getMonthInfo(n).length}maximumMonthLength(n){return this.getMonthInfo(n).length}maxLengthOfMonthCodeInAnyYear(n){const a=Jm(n);let h=this.months[a];return h=h.leap??h,h.length}getMonthInfo(n){const{month:a}=n;let h=this.months[a];if(h===void 0)throw new RangeError(`Invalid month: ${a}`);return this.inLeapYear(n)&&h.leap&&(h=h.leap),h}estimateIsoDate(n){const a=this.adjustCalendarDate(n),h=this.getMonthInfo(a);return sl(a.year+78+(h.nextYear?1:0),h.month,h.day+a.day-1)}checkIcuBugs(n){if(this.vulnerableToBceBug&&n.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function _T(i){return i%4==0&&(i%100!=0||i%400==0)}class fI extends sg{constructor(n,a){super(),this.calendarType="solar",this.id=n,this.isoEpoch=a}inLeapYear(n){const{year:a}=this.estimateIsoDate({month:1,day:1,year:n.year});return _T(a)}monthsInYear(){return 12}minimumMonthLength(n){const{month:a}=n;return a===2?this.inLeapYear(n)?29:28:[4,6,9,11].indexOf(a)>=0?30:31}maximumMonthLength(n){return this.minimumMonthLength(n)}maxLengthOfMonthCodeInAnyYear(n){return[31,29,31,30,31,30,31,31,30,31,30,31][Jm(n)-1]}estimateIsoDate(n){const a=this.adjustCalendarDate(n);return tv(a.year+this.isoEpoch.year,a.month+this.isoEpoch.month,a.day+this.isoEpoch.day,"constrain")}}class pI extends sg{constructor(n,a){super(),this.hasEra=!0,this.calendarType="solar",this.id=n;const{eras:h,anchorEra:f}=(function(g){let _,c=g;if(c.length===0)throw new RangeError("Invalid era data: eras are required");if(c.length===1&&c[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(c.length===1&&!c[0].code)throw new RangeError("Invalid era data: at least one named era is required");if(c.filter((D=>D.reverseOf!=null)).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");c.forEach((D=>{if(D.isAnchor||!D.anchorEpoch&&!D.reverseOf){if(_)throw new RangeError("Invalid era data: cannot have multiple anchor eras");_=D,D.anchorEpoch={year:D.hasYearZero?0:1}}else if(!D.code)throw new RangeError("If era name is blank, it must be the anchor era")})),c=c.filter((D=>D.code)),c.forEach((D=>{const{reverseOf:O}=D;if(O){const z=c.find((V=>V.code===O));if(z===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${O}`);D.reverseOf=z,D.anchorEpoch=z.anchorEpoch,D.isoEpoch=z.isoEpoch}D.anchorEpoch.month===void 0&&(D.anchorEpoch.month=1),D.anchorEpoch.day===void 0&&(D.anchorEpoch.day=1)})),c.sort(((D,O)=>{if(D.reverseOf)return 1;if(O.reverseOf)return-1;if(!D.isoEpoch||!O.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return O.isoEpoch.year-D.isoEpoch.year}));const A=c[c.length-1].reverseOf;if(A&&A!==c[c.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return c.forEach(((D,O)=>{D.genericName="era"+(c.length-1-O)})),{eras:c,anchorEra:_||c[0]}})(a);this.anchorEra=f,this.eras=h}inLeapYear(n){const{year:a}=this.estimateIsoDate({month:1,day:1,year:n.year});return _T(a)}monthsInYear(){return 12}minimumMonthLength(n){const{month:a}=n;return a===2?this.inLeapYear(n)?29:28:[4,6,9,11].indexOf(a)>=0?30:31}maximumMonthLength(n){return this.minimumMonthLength(n)}maxLengthOfMonthCodeInAnyYear(n){return[31,29,31,30,31,30,31,31,30,31,30,31][Jm(n)-1]}completeEraYear(n){const a=(c,A,D)=>{const O=n[c];if(O!=null&&O!=A&&!(D||[]).includes(O)){const z=D?.[0];throw new RangeError(`Input ${c} ${O} doesn't match calculated value ${z?`${A} (also called ${z})`:A}`)}},h=c=>{let A;const D={...n,year:c},O=this.eras.find(((z,V)=>{if(V===this.eras.length-1){if(z.reverseOf){if(c>0)throw new RangeError(`Signed year ${c} is invalid for era ${z.code}`);return A=z.anchorEpoch.year-c,!0}return A=c-z.anchorEpoch.year+(z.hasYearZero?0:1),!0}return this.compareCalendarDates(D,z.anchorEpoch)>=0&&(A=c-z.anchorEpoch.year+(z.hasYearZero?0:1),!0)}));if(!O)throw new RangeError(`Year ${c} was not matched by any era`);return{eraYear:A,era:O.code,eraNames:O.names}};let{year:f,eraYear:g,era:_}=n;if(f!=null){const c=h(f);({eraYear:g,era:_}=c),a("era",_,c?.eraNames),a("eraYear",g)}else{if(g==null)throw new RangeError("Either year or eraYear and era are required");{if(_===void 0)throw new RangeError("era and eraYear must be provided together");const c=this.eras.find((({code:A,names:D=[]})=>A===_||D.includes(_)));if(!c)throw new RangeError(`Era ${_} (ISO year ${g}) was not matched by any era`);f=c.reverseOf?c.anchorEpoch.year-g:g+c.anchorEpoch.year-(c.hasYearZero?0:1),a("year",f),{eraYear:g,era:_}=h(f)}}return{...n,year:f,eraYear:g,era:_}}adjustCalendarDate(n,a,h="constrain"){let f=n;const{month:g,monthCode:_}=f;return g===void 0&&(f={...f,month:Jm(_)}),this.validateCalendarDate(f),f=this.completeEraYear(f),super.adjustCalendarDate(f,a,h)}estimateIsoDate(n){const a=this.adjustCalendarDate(n),{year:h,month:f,day:g}=a,{anchorEra:_}=this;return tv(h+_.isoEpoch.year-(_.hasYearZero?0:1),f,g,"constrain")}}class vT extends pI{constructor(n,a){super(n,a)}isoToCalendarDate(n){const{year:a,month:h,day:f}=n,g=Ah(h),_=a-this.anchorEra.isoEpoch.year+1;return this.completeEraYear({year:_,month:h,monthCode:g,day:f})}}const _h={inLeapYear(i){const{year:n}=i;return(n+1)%4==0},monthsInYear:()=>13,minimumMonthLength(i){const{month:n}=i;return n===13?this.inLeapYear(i)?6:5:30},maximumMonthLength(i){return this.minimumMonthLength(i)},maxLengthOfMonthCodeInAnyYear:i=>i==="M13"?6:30};class b6 extends fI{constructor(n,a){super(n,a),this.inLeapYear=_h.inLeapYear,this.monthsInYear=_h.monthsInYear,this.minimumMonthLength=_h.minimumMonthLength,this.maximumMonthLength=_h.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=_h.maxLengthOfMonthCodeInAnyYear}}class mI extends pI{constructor(n,a){super(n,a),this.inLeapYear=_h.inLeapYear,this.monthsInYear=_h.monthsInYear,this.minimumMonthLength=_h.minimumMonthLength,this.maximumMonthLength=_h.maximumMonthLength,this.maxLengthOfMonthCodeInAnyYear=_h.maxLengthOfMonthCodeInAnyYear}}class x6 extends b6{constructor(){super("ethioaa",{year:-5492,month:7,day:17})}}class w6 extends mI{constructor(){super("coptic",[{code:"coptic",isoEpoch:{year:284,month:8,day:29}},{code:"coptic-inverse",reverseOf:"coptic"}])}}class T6 extends mI{constructor(){super("ethiopic",[{code:"ethioaa",names:["ethiopic-amete-alem","mundi"],isoEpoch:{year:-5492,month:7,day:17}},{code:"ethiopic",names:["incar"],isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class S6 extends vT{constructor(){super("roc",[{code:"roc",names:["minguo"],isoEpoch:{year:1912,month:1,day:1}},{code:"roc-inverse",names:["before-roc"],reverseOf:"roc"}])}}class E6 extends fI{constructor(){super("buddhist",{year:-543,month:1,day:1})}}class A6 extends vT{constructor(){super("gregory",[{code:"gregory",names:["ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"gregory-inverse",names:["be","bce"],reverseOf:"gregory"}])}reviseIntlEra(n){let{era:a,eraYear:h}=n;return a==="b"&&(a="gregory-inverse"),a==="a"&&(a="gregory"),{era:a,eraYear:h}}getFirstDayOfWeek(){return 1}getMinimalDaysInFirstWeek(){return 1}}class M6 extends vT{constructor(){super("japanese",[{code:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{code:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{code:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{code:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{code:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{code:"japanese",names:["japanese","gregory","ad","ce"],isoEpoch:{year:1,month:1,day:1}},{code:"japanese-inverse",names:["japanese-inverse","gregory-inverse","bc","bce"],reverseOf:"japanese"}]),this.erasBeginMidYear=!0}reviseIntlEra(n,a){const{era:h,eraYear:f}=n,{year:g}=a;return this.eras.find((_=>_.code===h))?{era:h,eraYear:f}:g<1?{era:"japanese-inverse",eraYear:1-g}:{era:"japanese",eraYear:g}}}class gI extends sg{constructor(){super(...arguments),this.calendarType="lunisolar"}inLeapYear(n,a){const h=this.getMonthList(n.year,a);return Object.entries(h).length===13}monthsInYear(n,a){return this.inLeapYear(n,a)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}maxLengthOfMonthCodeInAnyYear(n){return["M01L","M09L","M10L","M11L","M12L"].includes(n)?29:30}monthDaySearchStartYear(n,a){const h={M01L:[1651,1651],M02L:[1947,1765],M03L:[1966,1955],M04L:[1963,1944],M05L:[1971,1952],M06L:[1960,1941],M07L:[1968,1938],M08L:[1957,1718],M09L:[1832,1832],M10L:[1870,1870],M11L:[1814,1814],M12L:[1890,1890]}[n]??[1972,1972];return a<30?h[0]:h[1]}getMonthList(n,a){if(n===void 0)throw new TypeError("Missing year");const h=JSON.stringify({func:"getMonthList",calendarYear:n,id:this.id}),f=a.get(h);if(f)return f;const g=this.getFormatter(),_=(q,fe)=>{const Ee=dI({isoYear:q,isoMonth:2,isoDay:1}),we=new Date(Ee);we.setUTCDate(fe+1);const ze=g.formatToParts(we),Ce=ze.find((Te=>Te.type==="month")).value,Re=+ze.find((Te=>Te.type==="day")).value,Ne=ze.find((Te=>Te.type==="relatedYear"));let at;if(Ne===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return at=+Ne.value,{calendarMonthString:Ce,calendarDay:Re,calendarYearToVerify:at}};let c=17,{calendarMonthString:A,calendarDay:D,calendarYearToVerify:O}=_(n,c);A!=="1"&&(c+=29,{calendarMonthString:A,calendarDay:D}=_(n,c)),c-=D-5;const z={};let V,Y,ee=1,ie=!1;do({calendarMonthString:A,calendarDay:D,calendarYearToVerify:O}=_(n,c)),V&&(z[Y].daysInMonth=V+30-D),O!==n?ie=!0:(z[A]={monthIndex:ee++},c+=30),V=D,Y=A;while(!ie);return z[Y].daysInMonth=V+30-D,a.set(h,z),z}estimateIsoDate(n){const{year:a,month:h}=n;return{year:a,month:h>=12?12:h+1,day:1}}adjustCalendarDate(n,a,h="constrain",f=!1){let{year:g,month:_,monthExtra:c,day:A,monthCode:D}=n;if(g===void 0)throw new TypeError("Missing property: year");if(f){if(c&&c!=="bis")throw new RangeError(`Unexpected leap month suffix: ${c}`);const O=Ah(_,c!==void 0),z=`${_}${c||""}`,V=this.getMonthList(g,a)[z];if(V===void 0)throw new RangeError(`Unmatched month ${z} in Chinese year ${g}`);return _=V.monthIndex,{year:g,month:_,day:A,monthCode:O}}if(this.validateCalendarDate(n),_===void 0){const O=this.getMonthList(g,a);let z=D.replace(/^M|L$/g,(Y=>Y==="L"?"bis":""));z[0]==="0"&&(z=z.slice(1));let V=O[z];if(_=V&&V.monthIndex,_===void 0&&D.endsWith("L")&&D!="M13L"&&h==="constrain"){const Y=+D.replace(/^M0?|L$/g,"");V=O[Y],V&&(_=V.monthIndex,D=Ah(Y))}if(_===void 0)throw new RangeError(`Unmatched month ${D} in Chinese year ${g}`)}else if(D===void 0){const O=this.getMonthList(g,a),z=Object.entries(O),V=z.length;h==="reject"?($a(_,1,V),$a(A,1,this.maximumMonthLength())):(_=go(_,1,V),A=go(A,1,this.maximumMonthLength()));const Y=z.find((ee=>ee[1].monthIndex===_));if(Y===void 0)throw new RangeError(`Invalid month ${_} in Chinese year ${g}`);D=Ah(+Y[0].replace("bis",""),Y[0].indexOf("bis")!==-1)}else{const O=this.getMonthList(g,a);let z=D.replace(/^M|L$/g,(Y=>Y==="L"?"bis":""));z[0]==="0"&&(z=z.slice(1));const V=O[z];if(!V)throw new RangeError(`Unmatched monthCode ${D} in Chinese year ${g}`);if(_!==V.monthIndex)throw new RangeError(`monthCode ${D} doesn't correspond to month ${_} in Chinese year ${g}`)}return{...n,year:g,month:_,monthCode:D,day:A}}}class C6 extends gI{constructor(){super(...arguments),this.id="chinese"}}class D6 extends gI{constructor(){super(...arguments),this.id="dangi"}}class I6{constructor(n){this.helper=n}extraFields(n){return this.helper.hasEra&&n.includes("year")?["era","eraYear"]:[]}resolveFields(n){if(this.helper.calendarType!=="lunisolar"){const a=new Ga;yT(n,void 0,this.helper.monthsInYear({year:n.year??1972},a))}}dateToISO(n,a){const h=new Ga,f=this.helper.calendarToIsoDate(n,a,h);return h.setObject(f),f}monthDayToISOReferenceDate(n,a){const h=new Ga,f=this.helper.monthDayFromFields(n,a,h);return h.setObject(f),f}fieldKeysToIgnore(n){const a=new Set;for(let h=0;h<n.length;h++){const f=n[h];switch(a.add(f),f){case"era":a.add("eraYear"),a.add("year");break;case"eraYear":a.add("era"),a.add("year");break;case"year":a.add("era"),a.add("eraYear");break;case"month":a.add("monthCode"),this.helper.erasBeginMidYear&&(a.add("era"),a.add("eraYear"));break;case"monthCode":a.add("month"),this.helper.erasBeginMidYear&&(a.add("era"),a.add("eraYear"));break;case"day":this.helper.erasBeginMidYear&&(a.add("era"),a.add("eraYear"))}}return uI(a)}dateAdd(n,{years:a,months:h,weeks:f,days:g},_){const c=Ga.getCacheForObject(n),A=this.helper.isoToCalendarDate(n,c),D=this.helper.addCalendar(A,{years:a,months:h,weeks:f,days:g},_,c),O=this.helper.calendarToIsoDate(D,"constrain",c);return Ga.getCacheForObject(O)||new Ga(c).setObject(O),O}dateUntil(n,a,h){const f=Ga.getCacheForObject(n),g=Ga.getCacheForObject(a),_=this.helper.isoToCalendarDate(n,f),c=this.helper.isoToCalendarDate(a,g);return this.helper.untilCalendar(_,c,h,f)}isoToDate(n,a){const h=Ga.getCacheForObject(n),f=this.helper.isoToCalendarDate(n,h);if(a.dayOfWeek&&(f.dayOfWeek=Vv.iso8601.isoToDate(n,{dayOfWeek:!0}).dayOfWeek),a.dayOfYear){const g=this.helper.startOfCalendarYear(f),_=this.helper.calendarDaysUntil(g,f,h);f.dayOfYear=_+1}if(a.weekOfYear&&(f.weekOfYear=hI(this.helper.id,n)),f.daysInWeek=7,a.daysInMonth&&(f.daysInMonth=this.helper.daysInMonth(f,h)),a.daysInYear){const g=this.helper.startOfCalendarYear(f),_=this.helper.addCalendar(g,{years:1},"constrain",h);f.daysInYear=this.helper.calendarDaysUntil(g,_,h)}return a.monthsInYear&&(f.monthsInYear=this.helper.monthsInYear(f,h)),a.inLeapYear&&(f.inLeapYear=this.helper.inLeapYear(f,h)),f}getFirstDayOfWeek(){return this.helper.getFirstDayOfWeek()}getMinimalDaysInFirstWeek(){return this.helper.getMinimalDaysInFirstWeek()}}for(const i of[h6,_6,T6,x6,w6,C6,D6,S6,v6,E6,A6,M6,d6,f6,p6,m6,g6,y6]){const n=new i;Vv[n.id]=new I6(n)}Jw("calendarImpl",(function(i){return Vv[i]}));const vv=Intl.DateTimeFormat;function Oy(i,n){let a=oe(i,n);return typeof a=="function"&&(a=new vv(oe(i,MD),a(oe(i,Ww))),(function(h,f,g){const _=o1(h);if(_===void 0)throw new TypeError("Missing slots for the given container");if(_[f]===void 0)throw new TypeError(`tried to reset ${f} which was not set`);_[f]=g})(i,n,a)),a}function N_(i){return xo(i,rg)}class bv{constructor(n=void 0,a=void 0){(function(h,f,g){const _=g!==void 0;let c;if(_){const z=["localeMatcher","calendar","numberingSystem","hour12","hourCycle","timeZone","weekday","era","year","month","day","dayPeriod","hour","minute","second","fractionalSecondDigits","timeZoneName","formatMatcher","dateStyle","timeStyle"];c=(function(Y){if(Y==null)throw new TypeError(`Expected object not ${Y}`);return Object(Y)})(g);const V=Object.create(null);for(let Y=0;Y<z.length;Y++){const ee=z[Y];Object.prototype.hasOwnProperty.call(c,ee)&&(V[ee]=c[ee])}c=V}else c=Object.create(null);const A=new vv(f,c),D=A.resolvedOptions();if(nf(h),_){const z=Object.assign(Object.create(null),D);for(const V in z)Object.prototype.hasOwnProperty.call(c,V)||delete z[V];z.hour12=c.hour12,z.hourCycle=c.hourCycle,Bn(h,Ww,z)}else Bn(h,Ww,c);Bn(h,MD,D.locale),Bn(h,rg,A),Bn(h,Py,D.timeZone),Bn(h,U_,D.calendar),Bn(h,xD,j6),Bn(h,wD,z6),Bn(h,TD,F6),Bn(h,SD,P6),Bn(h,ED,B6),Bn(h,AD,V6);const O=_?c.timeZone:void 0;if(O===void 0)Bn(h,Hw,D.timeZone);else{const z=h1(O);if(z.startsWith(""))throw new RangeError("Unicode minus (U+2212) is not supported in time zone offsets");Bn(h,Hw,_o(z))}})(this,n,a)}get format(){lt(this,N_);const n=k6.bind(this);return Object.defineProperties(n,{length:{value:1,enumerable:!1,writable:!1,configurable:!0},name:{value:"",enumerable:!1,writable:!1,configurable:!0}}),n}formatRange(n,a){return lt(this,N_),L6.call(this,n,a)}formatToParts(n,...a){return lt(this,N_),O6.call(this,n,...a)}formatRangeToParts(n,a){return lt(this,N_),N6.call(this,n,a)}resolvedOptions(){return lt(this,N_),R6.call(this)}}"formatToParts"in vv.prototype||delete bv.prototype.formatToParts,"formatRangeToParts"in vv.prototype||delete bv.prototype.formatRangeToParts;const vc=function(i=void 0,n=void 0){return new bv(i,n)};function R6(){const i=oe(this,rg).resolvedOptions();return i.timeZone=oe(this,Hw),i}function k6(i,...n){let a,h,f=r0(i,this);return f.formatter?(a=f.formatter,h=[Sc(f.epochNs,"floor")]):(a=oe(this,rg),h=[i,...n]),a.format(...h)}function O6(i,...n){let a,h,f=r0(i,this);return f.formatter?(a=f.formatter,h=[Sc(f.epochNs,"floor")]):(a=oe(this,rg),h=[i,...n]),a.formatToParts(...h)}function L6(i,n){if(i===void 0||n===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");const a=Ux(i),h=Ux(n);let f,g=[a,h];if(Yd(a)!==Yd(h))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");if(Yd(a)){if(!yI(a,h))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{epochNs:_,formatter:c}=r0(a,this),{epochNs:A,formatter:D}=r0(h,this);c&&(f=c,g=[Sc(_,"floor"),Sc(A,"floor")])}return f||(f=oe(this,rg)),f.formatRange(...g)}function N6(i,n){if(i===void 0||n===void 0)throw new TypeError("Intl.DateTimeFormat.formatRange requires two values");const a=Ux(i),h=Ux(n);let f,g=[a,h];if(Yd(a)!==Yd(h))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");if(Yd(a)){if(!yI(a,h))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{epochNs:_,formatter:c}=r0(a,this),{epochNs:A,formatter:D}=r0(h,this);c&&(f=c,g=[Sc(_,"floor"),Sc(A,"floor")])}return f||(f=oe(this,rg)),f.formatRangeToParts(...g)}function Uv(i={},n={}){const a=Object.assign({},i),h=["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"];for(let f=0;f<h.length;f++){const g=h[f];a[g]=g in n?n[g]:a[g],a[g]!==!1&&a[g]!==void 0||delete a[g]}return a}function P6(i){const n=Uv(i,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});if(n.timeStyle!=="long"&&n.timeStyle!=="full"||(delete n.timeStyle,Object.assign(n,{hour:"numeric",minute:"2-digit",second:"2-digit"})),!b1(n)){if(Gv(i))throw new TypeError(`cannot format Temporal.PlainTime with options [${Object.keys(i)}]`);Object.assign(n,{hour:"numeric",minute:"numeric",second:"numeric"})}return n}function z6(i){const n={short:{year:"2-digit",month:"numeric"},medium:{year:"numeric",month:"short"},long:{year:"numeric",month:"long"},full:{year:"numeric",month:"long"}},a=Uv(i,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in a&&a.dateStyle){const h=a.dateStyle;delete a.dateStyle,Object.assign(a,n[h])}if(!("year"in a||"month"in a||"era"in a)){if(Gv(i))throw new TypeError(`cannot format PlainYearMonth with options [${Object.keys(i)}]`);Object.assign(a,{year:"numeric",month:"numeric"})}return a}function F6(i){const n={short:{month:"numeric",day:"numeric"},medium:{month:"short",day:"numeric"},long:{month:"long",day:"numeric"},full:{month:"long",day:"numeric"}},a=Uv(i,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if("dateStyle"in a&&a.dateStyle){const h=a.dateStyle;delete a.dateStyle,Object.assign(a,n[h])}if(!("month"in a)&&!("day"in a)){if(Gv(i))throw new TypeError(`cannot format PlainMonthDay with options [${Object.keys(i)}]`);Object.assign(a,{month:"numeric",day:"numeric"})}return a}function j6(i){const n=Uv(i,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});if(!v1(n)){if(Gv(i))throw new TypeError(`cannot format PlainDate with options [${Object.keys(i)}]`);Object.assign(n,{year:"numeric",month:"numeric",day:"numeric"})}return n}function B6(i){const n=Uv(i,{timeZoneName:!1});if((n.timeStyle==="long"||n.timeStyle==="full")&&(delete n.timeStyle,Object.assign(n,{hour:"numeric",minute:"2-digit",second:"2-digit"}),n.dateStyle)&&(Object.assign(n,{short:{year:"numeric",month:"numeric",day:"numeric"},medium:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric"},full:{year:"numeric",month:"long",day:"numeric",weekday:"long"}}[n.dateStyle]),delete n.dateStyle),!b1(n)&&!v1(n)){if(Gv(i))throw new TypeError(`cannot format PlainDateTime with options [${Object.keys(i)}]`);Object.assign(n,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}return n}function V6(i){let n=i;return b1(n)||v1(n)||(n=Object.assign({},n,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),n}function v1(i){return"year"in i||"month"in i||"day"in i||"weekday"in i||"dateStyle"in i||"era"in i}function b1(i){return"hour"in i||"minute"in i||"second"in i||"timeStyle"in i||"dayPeriod"in i||"fractionalSecondDigits"in i}function Gv(i){return v1(i)||b1(i)||"dateStyle"in i||"timeStyle"in i||"timeZoneName"in i}function Yd(i){return zr(i)||Jr(i)||fr(i)||$n(i)||hs(i)||kl(i)||us(i)}function Ux(i){return Yd(i)?i:u1(i)}function yI(i,n){return!(!Yd(i)||!Yd(n)||Jr(i)&&!Jr(n)||zr(i)&&!zr(n)||fr(i)&&!fr(n)||$n(i)&&!$n(n)||hs(i)&&!hs(n)||kl(i)&&!kl(n)||us(i)&&!us(n))}function r0(i,n){if(Jr(i)){const a={isoDate:{year:1970,month:1,day:1},time:oe(i,Fr)};return{epochNs:Fs(oe(n,Py),a,"compatible"),formatter:Oy(n,SD)}}if(hs(i)){const a=oe(i,kt),h=oe(n,U_);if(a!==h)throw new RangeError(`cannot format PlainYearMonth with calendar ${a} in locale with calendar ${h}`);const f=xi(oe(i,Tn),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:Fs(oe(n,Py),f,"compatible"),formatter:Oy(n,wD)}}if(kl(i)){const a=oe(i,kt),h=oe(n,U_);if(a!==h)throw new RangeError(`cannot format PlainMonthDay with calendar ${a} in locale with calendar ${h}`);const f=xi(oe(i,Tn),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:Fs(oe(n,Py),f,"compatible"),formatter:Oy(n,TD)}}if(zr(i)){const a=oe(i,kt),h=oe(n,U_);if(a!=="iso8601"&&a!==h)throw new RangeError(`cannot format PlainDate with calendar ${a} in locale with calendar ${h}`);const f=xi(oe(i,Tn),{deltaDays:0,hour:12,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0});return{epochNs:Fs(oe(n,Py),f,"compatible"),formatter:Oy(n,xD)}}if(fr(i)){const a=oe(i,kt),h=oe(n,U_);if(a!=="iso8601"&&a!==h)throw new RangeError(`cannot format PlainDateTime with calendar ${a} in locale with calendar ${h}`);const f=oe(i,wr);return{epochNs:Fs(oe(n,Py),f,"compatible"),formatter:Oy(n,ED)}}if($n(i))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return us(i)?{epochNs:oe(i,wn),formatter:Oy(n,AD)}:{}}function _I(i){const n=Object.create(null);return n.years=oe(i,oo),n.months=oe(i,lo),n.weeks=oe(i,Jo),n.days=oe(i,co),n.hours=oe(i,uo),n.minutes=oe(i,ho),n.seconds=oe(i,fo),n.milliseconds=oe(i,po),n.microseconds=oe(i,mo),n.nanoseconds=oe(i,el),n}bv.prototype.constructor=vc,Object.defineProperty(vc,"prototype",{value:bv.prototype,writable:!1,enumerable:!1,configurable:!1}),vc.supportedLocalesOf=vv.supportedLocalesOf,rf(vc,"Intl.DateTimeFormat");const{format:U6,formatToParts:G6}=Intl.DurationFormat?.prototype??Object.create(null);function vI(i){Intl.DurationFormat.prototype.resolvedOptions.call(this);const n=_I(bc(i));return U6.call(this,n)}Intl.DurationFormat?.prototype&&(Intl.DurationFormat.prototype.format=vI,Intl.DurationFormat.prototype.formatToParts=function(i){Intl.DurationFormat.prototype.resolvedOptions.call(this);const n=_I(bc(i));return G6.call(this,n)});class bT{constructor(n){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");qD(this,Vx(n))}get epochMilliseconds(){return lt(this,us),Sc(oe(this,wn),"floor")}get epochNanoseconds(){return lt(this,us),lI(ne.BigInt(oe(this,wn)))}add(n){return lt(this,us),dA("add",this,n)}subtract(n){return lt(this,us),dA("subtract",this,n)}until(n,a=void 0){return lt(this,us),aA("until",this,n,a)}since(n,a=void 0){return lt(this,us),aA("since",this,n,a)}round(n){if(lt(this,us),n===void 0)throw new TypeError("options parameter is required");const a=typeof n=="string"?Km("smallestUnit",n):nn(n),h=g0(a),f=wu(a,"halfExpand"),g=nl(a,"smallestUnit","time",Kd);return y0(h,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[g],!0),bh(c2(oe(this,wn),h,g,f))}equals(n){lt(this,us);const a=Z_(n),h=oe(this,wn),f=oe(a,wn);return ne.equal(ne.BigInt(h),ne.BigInt(f))}toString(n=void 0){lt(this,us);const a=nn(n),h=Ov(a),f=wu(a,"trunc"),g=nl(a,"smallestUnit","time",void 0);if(g==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');let _=a.timeZone;_!==void 0&&(_=_o(_));const{precision:c,unit:A,increment:D}=Lv(g,h);return XE(bh(c2(oe(this,wn),D,A,f)),_,c)}toJSON(){return lt(this,us),XE(this,void 0,"auto")}toLocaleString(n=void 0,a=void 0){return lt(this,us),new vc(n,a).format(this)}valueOf(){Tp("Instant")}toZonedDateTimeISO(n){lt(this,us);const a=_o(n);return Ps(oe(this,wn),a,"iso8601")}static fromEpochMilliseconds(n){return bh(wh(u1(n)))}static fromEpochNanoseconds(n){return bh(Vx(n))}static from(n){return Z_(n)}static compare(n,a){const h=Z_(n),f=Z_(a),g=oe(h,wn),_=oe(f,wn);return ne.lessThan(g,_)?-1:ne.greaterThan(g,_)?1:0}}rf(bT,"Temporal.Instant");class xT{constructor(n,a,h,f="iso8601"){const g=Dn(n),_=Dn(a),c=Dn(h),A=wo(f===void 0?"iso8601":Da(f));Wm(g,_,c),VD(this,{year:g,month:_,day:c},A)}get calendarId(){return lt(this,zr),oe(this,kt)}get era(){return ro(this,"era")}get eraYear(){return ro(this,"eraYear")}get year(){return ro(this,"year")}get month(){return ro(this,"month")}get monthCode(){return ro(this,"monthCode")}get day(){return ro(this,"day")}get dayOfWeek(){return ro(this,"dayOfWeek")}get dayOfYear(){return ro(this,"dayOfYear")}get weekOfYear(){return ro(this,"weekOfYear")?.week}get yearOfWeek(){return ro(this,"weekOfYear")?.year}get daysInWeek(){return ro(this,"daysInWeek")}get daysInMonth(){return ro(this,"daysInMonth")}get daysInYear(){return ro(this,"daysInYear")}get monthsInYear(){return ro(this,"monthsInYear")}get inLeapYear(){return ro(this,"inLeapYear")}with(n,a=void 0){if(lt(this,zr),!jr(n))throw new TypeError("invalid argument");m0(n);const h=oe(this,kt);let f=vo(h,oe(this,Tn));return f=Hm(h,f,Bl(h,n,["year","month","monthCode","day"],[],"partial")),yo(_p(h,f,fi(nn(a))),h)}withCalendar(n){lt(this,zr);const a=Fv(n);return yo(oe(this,Tn),a)}add(n,a=void 0){return lt(this,zr),fA("add",this,n,a)}subtract(n,a=void 0){return lt(this,zr),fA("subtract",this,n,a)}until(n,a=void 0){return lt(this,zr),sA("until",this,n,a)}since(n,a=void 0){return lt(this,zr),sA("since",this,n,a)}equals(n){lt(this,zr);const a=G_(n);return Dh(oe(this,Tn),oe(a,Tn))===0&&Mh(oe(this,kt),oe(a,kt))}toString(n=void 0){return lt(this,zr),QE(this,kv(nn(n)))}toJSON(){return lt(this,zr),QE(this)}toLocaleString(n=void 0,a=void 0){return lt(this,zr),new vc(n,a).format(this)}valueOf(){Tp("PlainDate")}toPlainDateTime(n=void 0){lt(this,zr);const a=BD(n);return yc(xi(oe(this,Tn),a),oe(this,kt))}toZonedDateTime(n){let a,h;if(lt(this,zr),jr(n)){const _=n.timeZone;_===void 0?a=_o(n):(a=_o(_),h=n.plainTime)}else a=_o(n);const f=oe(this,Tn);let g;return h===void 0?g=op(a,f):(h=cp(h),g=Fs(a,xi(f,oe(h,Fr)),"compatible")),Ps(g,a,oe(this,kt))}toPlainYearMonth(){lt(this,zr);const n=oe(this,kt);return Uy(pv(n,vo(n,oe(this,Tn)),"constrain"),n)}toPlainMonthDay(){lt(this,zr);const n=oe(this,kt);return jy(Px(n,vo(n,oe(this,Tn)),"constrain"),n)}static from(n,a=void 0){return G_(n,a)}static compare(n,a){const h=G_(n),f=G_(a);return Dh(oe(h,Tn),oe(f,Tn))}}function ro(i,n){lt(i,zr);const a=oe(i,Tn);return Nv(i).isoToDate(a,{[n]:!0})[n]}rf(xT,"Temporal.PlainDate");class wT{constructor(n,a,h,f=0,g=0,_=0,c=0,A=0,D=0,O="iso8601"){const z=Dn(n),V=Dn(a),Y=Dn(h),ee=f===void 0?0:Dn(f),ie=g===void 0?0:Dn(g),q=_===void 0?0:Dn(_),fe=c===void 0?0:Dn(c),Ee=A===void 0?0:Dn(A),we=D===void 0?0:Dn(D),ze=wo(O===void 0?"iso8601":Da(O));fT(z,V,Y,ee,ie,q,fe,Ee,we),UD(this,{isoDate:{year:z,month:V,day:Y},time:{hour:ee,minute:ie,second:q,millisecond:fe,microsecond:Ee,nanosecond:we}},ze)}get calendarId(){return lt(this,fr),oe(this,kt)}get year(){return ao(this,"year")}get month(){return ao(this,"month")}get monthCode(){return ao(this,"monthCode")}get day(){return ao(this,"day")}get hour(){return Ly(this,"hour")}get minute(){return Ly(this,"minute")}get second(){return Ly(this,"second")}get millisecond(){return Ly(this,"millisecond")}get microsecond(){return Ly(this,"microsecond")}get nanosecond(){return Ly(this,"nanosecond")}get era(){return ao(this,"era")}get eraYear(){return ao(this,"eraYear")}get dayOfWeek(){return ao(this,"dayOfWeek")}get dayOfYear(){return ao(this,"dayOfYear")}get weekOfYear(){return ao(this,"weekOfYear")?.week}get yearOfWeek(){return ao(this,"weekOfYear")?.year}get daysInWeek(){return ao(this,"daysInWeek")}get daysInYear(){return ao(this,"daysInYear")}get daysInMonth(){return ao(this,"daysInMonth")}get monthsInYear(){return ao(this,"monthsInYear")}get inLeapYear(){return ao(this,"inLeapYear")}with(n,a=void 0){if(lt(this,fr),!jr(n))throw new TypeError("invalid argument");m0(n);const h=oe(this,kt),f=oe(this,wr);let g={...vo(h,f.isoDate),...f.time};return g=Hm(h,g,Bl(h,n,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond"],"partial")),yc(Pv(h,g,fi(nn(a))),h)}withPlainTime(n=void 0){lt(this,fr);const a=BD(n);return yc(xi(oe(this,wr).isoDate,a),oe(this,kt))}withCalendar(n){lt(this,fr);const a=Fv(n);return yc(oe(this,wr),a)}add(n,a=void 0){return lt(this,fr),pA("add",this,n,a)}subtract(n,a=void 0){return lt(this,fr),pA("subtract",this,n,a)}until(n,a=void 0){return lt(this,fr),oA("until",this,n,a)}since(n,a=void 0){return lt(this,fr),oA("since",this,n,a)}round(n){if(lt(this,fr),n===void 0)throw new TypeError("options parameter is required");const a=typeof n=="string"?Km("smallestUnit",n):nn(n),h=g0(a),f=wu(a,"halfExpand"),g=nl(a,"smallestUnit","time",Kd,["day"]),_={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[g];y0(h,_,_===1);const c=oe(this,wr);return yc(h===1&&g==="nanosecond"?c:u2(c,h,g,f),oe(this,kt))}equals(n){lt(this,fr);const a=$_(n);return i0(oe(this,wr),oe(a,wr))===0&&Mh(oe(this,kt),oe(a,kt))}toString(n=void 0){lt(this,fr);const a=nn(n),h=kv(a),f=Ov(a),g=wu(a,"trunc"),_=nl(a,"smallestUnit","time",void 0);if(_==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:c,unit:A,increment:D}=Lv(_,f),O=u2(oe(this,wr),D,A,g);return Xm(O),gv(O,oe(this,kt),c,h)}toJSON(){return lt(this,fr),gv(oe(this,wr),oe(this,kt),"auto")}toLocaleString(n=void 0,a=void 0){return lt(this,fr),new vc(n,a).format(this)}valueOf(){Tp("PlainDateTime")}toZonedDateTime(n,a=void 0){lt(this,fr);const h=_o(n),f=nv(nn(a));return Ps(Fs(h,oe(this,wr),f),h,oe(this,kt))}toPlainDate(){return lt(this,fr),yo(oe(this,wr).isoDate,oe(this,kt))}toPlainTime(){return lt(this,fr),zd(oe(this,wr).time)}static from(n,a=void 0){return $_(n,a)}static compare(n,a){const h=$_(n),f=$_(a);return i0(oe(h,wr),oe(f,wr))}}function ao(i,n){lt(i,fr);const a=oe(i,wr).isoDate;return Nv(i).isoToDate(a,{[n]:!0})[n]}function Ly(i,n){return lt(i,fr),oe(i,wr).time[n]}rf(wT,"Temporal.PlainDateTime");class a0{constructor(n=0,a=0,h=0,f=0,g=0,_=0,c=0,A=0,D=0,O=0){const z=n===void 0?0:yu(n),V=a===void 0?0:yu(a),Y=h===void 0?0:yu(h),ee=f===void 0?0:yu(f),ie=g===void 0?0:yu(g),q=_===void 0?0:yu(_),fe=c===void 0?0:yu(c),Ee=A===void 0?0:yu(A),we=D===void 0?0:yu(D),ze=O===void 0?0:yu(O);y1(z,V,Y,ee,ie,q,fe,Ee,we,ze),nf(this),Bn(this,oo,z),Bn(this,lo,V),Bn(this,Jo,Y),Bn(this,co,ee),Bn(this,uo,ie),Bn(this,ho,q),Bn(this,fo,fe),Bn(this,po,Ee),Bn(this,mo,we),Bn(this,el,ze)}get years(){return lt(this,Pr),oe(this,oo)}get months(){return lt(this,Pr),oe(this,lo)}get weeks(){return lt(this,Pr),oe(this,Jo)}get days(){return lt(this,Pr),oe(this,co)}get hours(){return lt(this,Pr),oe(this,uo)}get minutes(){return lt(this,Pr),oe(this,ho)}get seconds(){return lt(this,Pr),oe(this,fo)}get milliseconds(){return lt(this,Pr),oe(this,po)}get microseconds(){return lt(this,Pr),oe(this,mo)}get nanoseconds(){return lt(this,Pr),oe(this,el)}get sign(){return lt(this,Pr),jx(this)}get blank(){return lt(this,Pr),jx(this)===0}with(n){lt(this,Pr);const a=jD(n),{years:h=oe(this,oo),months:f=oe(this,lo),weeks:g=oe(this,Jo),days:_=oe(this,co),hours:c=oe(this,uo),minutes:A=oe(this,ho),seconds:D=oe(this,fo),milliseconds:O=oe(this,po),microseconds:z=oe(this,mo),nanoseconds:V=oe(this,el)}=a;return new a0(h,f,g,_,c,A,D,O,z,V)}negated(){return lt(this,Pr),ol(this)}abs(){return lt(this,Pr),new a0(Math.abs(oe(this,oo)),Math.abs(oe(this,lo)),Math.abs(oe(this,Jo)),Math.abs(oe(this,co)),Math.abs(oe(this,uo)),Math.abs(oe(this,ho)),Math.abs(oe(this,fo)),Math.abs(oe(this,po)),Math.abs(oe(this,mo)),Math.abs(oe(this,el)))}add(n){return lt(this,Pr),hA("add",this,n)}subtract(n){return lt(this,Pr),hA("subtract",this,n)}round(n){if(lt(this,Pr),n===void 0)throw new TypeError("options parameter is required");const a=Od(this),h=typeof n=="string"?Km("smallestUnit",n):nn(n);let f=nl(h,"largestUnit","datetime",void 0,["auto"]),{plainRelativeTo:g,zonedRelativeTo:_}=vw(h);const c=g0(h),A=wu(h,"halfExpand");let D=nl(h,"smallestUnit","datetime",void 0),O=!0;D||(O=!1,D="nanosecond");const z=$d(a,D);let V=!0;if(f||(V=!1,f=z),f==="auto"&&(f=z),!O&&!V)throw new RangeError("at least one of smallestUnit or largestUnit is required");if($d(f,D)!==f)throw new RangeError(`largestUnit ${f} cannot be smaller than smallestUnit ${D}`);const Y={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[D];if(Y!==void 0&&y0(c,Y,!1),c>1&&Ld(D)==="date"&&f!==D)throw new RangeError("For calendar units with roundingIncrement > 1, use largestUnit = smallestUnit");if(_){let ie=zy(this);const q=oe(_,Di),fe=oe(_,kt),Ee=oe(_,wn);return ie=oI(Ee,H_(Ee,q,fe,ie),q,fe,f,c,D,A),Ld(f)==="date"&&(f="hour"),_c(ie,f)}if(g){let ie=xh(this);const q=n0({hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},ie.time),fe=oe(g,Tn),Ee=oe(g,kt),we=zl(Ee,fe,zs(ie.date,q.deltaDays),"constrain");return ie=sI(xi(fe,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),xi(we,q),Ee,f,c,D,A),_c(ie,f)}if(gh(a))throw new RangeError(`a starting point is required for ${a}s balancing`);if(gh(f))throw new RangeError(`a starting point is required for ${f}s balancing`);let ee=xh(this);if(D==="day"){const{quotient:ie,remainder:q}=ee.time.divmod(Ox);let fe=ee.date.days+ie+iv(q,"day");fe=up(fe,c,A),ee=Zd({years:0,months:0,weeks:0,days:fe},Zn.ZERO)}else ee=Zd({years:0,months:0,weeks:0,days:0},Bx(ee.time,c,D,A));return _c(ee,f)}total(n){if(lt(this,Pr),n===void 0)throw new TypeError("options argument is required");const a=typeof n=="string"?Km("unit",n):nn(n);let{plainRelativeTo:h,zonedRelativeTo:f}=vw(a);const g=nl(a,"unit","datetime",Kd);if(f){const c=zy(this),A=oe(f,Di),D=oe(f,kt),O=oe(f,wn);return(function(z,V,Y,ee,ie){return Ld(ie)==="time"?iv(Zn.fromEpochNsDiff(V,z),ie):rA(rI(z,V,Y,ee,ie),V,Tc(Y,z),Y,ee,ie)})(O,H_(O,A,D,c),A,D,g)}if(h){const c=xh(this);let A=n0({hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0},c.time);const D=oe(h,Tn),O=oe(h,kt),z=zl(O,D,zs(c.date,A.deltaDays),"constrain");return(function(V,Y,ee,ie){if(i0(V,Y)==0)return 0;Xm(V),Xm(Y);const q=iI(V,Y,ee,ie);return ie==="nanosecond"?ne.toNumber(q.time.totalNs):rA(q,fs(Y),V,null,ee,ie)})(xi(D,{deltaDays:0,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0}),xi(z,A),O,g)}const _=Od(this);if(gh(_))throw new RangeError(`a starting point is required for ${_}s total`);if(gh(g))throw new RangeError(`a starting point is required for ${g}s total`);return iv(xh(this).time,g)}toString(n=void 0){lt(this,Pr);const a=nn(n),h=Ov(a),f=wu(a,"trunc"),g=nl(a,"smallestUnit","time",void 0);if(g==="hour"||g==="minute")throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');const{precision:_,unit:c,increment:A}=Lv(g,h);if(c==="nanosecond"&&A===1)return ax(this,_);const D=Od(this);let O=zy(this);const z=Bx(O.time,A,c,f);return O=Zd(O.date,z),ax(_c(O,$d(D,"second")),_)}toJSON(){return lt(this,Pr),ax(this,"auto")}toLocaleString(n=void 0,a=void 0){if(lt(this,Pr),typeof Intl.DurationFormat=="function"){const h=new Intl.DurationFormat(n,a);return vI.call(h,this)}return console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),ax(this,"auto")}valueOf(){Tp("Duration")}static from(n){return bc(n)}static compare(n,a,h=void 0){const f=bc(n),g=bc(a),_=nn(h),{plainRelativeTo:c,zonedRelativeTo:A}=vw(_);if(oe(f,oo)===oe(g,oo)&&oe(f,lo)===oe(g,lo)&&oe(f,Jo)===oe(g,Jo)&&oe(f,co)===oe(g,co)&&oe(f,uo)===oe(g,uo)&&oe(f,ho)===oe(g,ho)&&oe(f,fo)===oe(g,fo)&&oe(f,po)===oe(g,po)&&oe(f,mo)===oe(g,mo)&&oe(f,el)===oe(g,el))return 0;const D=Od(f),O=Od(g),z=zy(f),V=zy(g);if(A&&(Ld(D)==="date"||Ld(O)==="date")){const fe=oe(A,Di),Ee=oe(A,kt),we=oe(A,wn),ze=H_(we,fe,Ee,z),Ce=H_(we,fe,Ee,V);return tl(ne.toNumber(ne.subtract(ze,Ce)))}let Y=z.date.days,ee=V.date.days;if(gh(D)||gh(O)){if(!c)throw new RangeError("A starting point is required for years, months, or weeks comparison");Y=iA(z.date,c),ee=iA(V.date,c)}const ie=z.time.add24HourDays(Y),q=V.time.add24HourDays(ee);return ie.cmp(q)}}rf(a0,"Temporal.Duration");class TT{constructor(n,a,h="iso8601",f=1972){const g=Dn(n),_=Dn(a),c=wo(h===void 0?"iso8601":Da(h)),A=Dn(f);Wm(A,g,_),GD(this,{year:A,month:g,day:_},c)}get monthCode(){return vA(this,"monthCode")}get day(){return vA(this,"day")}get calendarId(){return lt(this,kl),oe(this,kt)}with(n,a=void 0){if(lt(this,kl),!jr(n))throw new TypeError("invalid argument");m0(n);const h=oe(this,kt);let f=vo(h,oe(this,Tn),"month-day");return f=Hm(h,f,Bl(h,n,["year","month","monthCode","day"],[],"partial")),jy(Px(h,f,fi(nn(a))),h)}equals(n){lt(this,kl);const a=HE(n);return Dh(oe(this,Tn),oe(a,Tn))===0&&Mh(oe(this,kt),oe(a,kt))}toString(n=void 0){return lt(this,kl),JE(this,kv(nn(n)))}toJSON(){return lt(this,kl),JE(this)}toLocaleString(n=void 0,a=void 0){return lt(this,kl),new vc(n,a).format(this)}valueOf(){Tp("PlainMonthDay")}toPlainDate(n){if(lt(this,kl),!jr(n))throw new TypeError("argument should be an object");const a=oe(this,kt);return yo(_p(a,Hm(a,vo(a,oe(this,Tn),"month-day"),Bl(a,n,["year"],[],[])),"constrain"),a)}static from(n,a=void 0){return HE(n,a)}}function vA(i,n){lt(i,kl);const a=oe(i,Tn);return Nv(i).isoToDate(a,{[n]:!0})[n]}function xw(i){return Tc(i,f2())}rf(TT,"Temporal.PlainMonthDay");const bI={instant:()=>bh(f2()),plainDateTimeISO:(i=L_())=>yc(xw(_o(i)),"iso8601"),plainDateISO:(i=L_())=>yo(xw(_o(i)).isoDate,"iso8601"),plainTimeISO:(i=L_())=>zd(xw(_o(i)).time),timeZoneId:()=>L_(),zonedDateTimeISO:(i=L_())=>{const n=_o(i);return Ps(f2(),n,"iso8601")},[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(bI,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});class $v{constructor(n=0,a=0,h=0,f=0,g=0,_=0){const c=n===void 0?0:Dn(n),A=a===void 0?0:Dn(a),D=h===void 0?0:Dn(h),O=f===void 0?0:Dn(f),z=g===void 0?0:Dn(g),V=_===void 0?0:Dn(_);g1(c,A,D,O,z,V),$D(this,{hour:c,minute:A,second:D,millisecond:O,microsecond:z,nanosecond:V})}get hour(){return lt(this,Jr),oe(this,Fr).hour}get minute(){return lt(this,Jr),oe(this,Fr).minute}get second(){return lt(this,Jr),oe(this,Fr).second}get millisecond(){return lt(this,Jr),oe(this,Fr).millisecond}get microsecond(){return lt(this,Jr),oe(this,Fr).microsecond}get nanosecond(){return lt(this,Jr),oe(this,Fr).nanosecond}with(n,a=void 0){if(lt(this,Jr),!jr(n))throw new TypeError("invalid argument");m0(n);const h=i2(n,"partial"),f=i2(this);let{hour:g,minute:_,second:c,millisecond:A,microsecond:D,nanosecond:O}=Object.assign(f,h);const z=fi(nn(a));return{hour:g,minute:_,second:c,millisecond:A,microsecond:D,nanosecond:O}=f1(g,_,c,A,D,O,z),new $v(g,_,c,A,D,O)}add(n){return lt(this,Jr),mA("add",this,n)}subtract(n){return lt(this,Jr),mA("subtract",this,n)}until(n,a=void 0){return lt(this,Jr),lA("until",this,n,a)}since(n,a=void 0){return lt(this,Jr),lA("since",this,n,a)}round(n){if(lt(this,Jr),n===void 0)throw new TypeError("options parameter is required");const a=typeof n=="string"?Km("smallestUnit",n):nn(n),h=g0(a),f=wu(a,"halfExpand"),g=nl(a,"smallestUnit","time",Kd);return y0(h,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[g],!1),zd(h2(oe(this,Fr),h,g,f))}equals(n){lt(this,Jr);const a=cp(n);return d2(oe(this,Fr),oe(a,Fr))===0}toString(n=void 0){lt(this,Jr);const a=nn(n),h=Ov(a),f=wu(a,"trunc"),g=nl(a,"smallestUnit","time",void 0);if(g==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:_,unit:c,increment:A}=Lv(g,h);return KE(h2(oe(this,Fr),A,c,f),_)}toJSON(){return lt(this,Jr),KE(oe(this,Fr),"auto")}toLocaleString(n=void 0,a=void 0){return lt(this,Jr),new vc(n,a).format(this)}valueOf(){Tp("PlainTime")}static from(n,a=void 0){return cp(n,a)}static compare(n,a){const h=cp(n),f=cp(a);return d2(oe(h,Fr),oe(f,Fr))}}rf($v,"Temporal.PlainTime");class ST{constructor(n,a,h="iso8601",f=1){const g=Dn(n),_=Dn(a),c=wo(h===void 0?"iso8601":Da(h)),A=Dn(f);Wm(g,_,A),ZD(this,{year:g,month:_,day:A},c)}get year(){return Id(this,"year")}get month(){return Id(this,"month")}get monthCode(){return Id(this,"monthCode")}get calendarId(){return lt(this,hs),oe(this,kt)}get era(){return Id(this,"era")}get eraYear(){return Id(this,"eraYear")}get daysInMonth(){return Id(this,"daysInMonth")}get daysInYear(){return Id(this,"daysInYear")}get monthsInYear(){return Id(this,"monthsInYear")}get inLeapYear(){return Id(this,"inLeapYear")}with(n,a=void 0){if(lt(this,hs),!jr(n))throw new TypeError("invalid argument");m0(n);const h=oe(this,kt);let f=vo(h,oe(this,Tn),"year-month");return f=Hm(h,f,Bl(h,n,["year","month","monthCode"],[],"partial")),Uy(pv(h,f,fi(nn(a))),h)}add(n,a=void 0){return lt(this,hs),gA("add",this,n,a)}subtract(n,a=void 0){return lt(this,hs),gA("subtract",this,n,a)}until(n,a=void 0){return lt(this,hs),cA("until",this,n,a)}since(n,a=void 0){return lt(this,hs),cA("since",this,n,a)}equals(n){lt(this,hs);const a=q_(n);return Dh(oe(this,Tn),oe(a,Tn))===0&&Mh(oe(this,kt),oe(a,kt))}toString(n=void 0){return lt(this,hs),eA(this,kv(nn(n)))}toJSON(){return lt(this,hs),eA(this)}toLocaleString(n=void 0,a=void 0){return lt(this,hs),new vc(n,a).format(this)}valueOf(){Tp("PlainYearMonth")}toPlainDate(n){if(lt(this,hs),!jr(n))throw new TypeError("argument should be an object");const a=oe(this,kt);return yo(_p(a,Hm(a,vo(a,oe(this,Tn),"year-month"),Bl(a,n,["day"],[],[])),"constrain"),a)}static from(n,a=void 0){return q_(n,a)}static compare(n,a){const h=q_(n),f=q_(a);return Dh(oe(h,Tn),oe(f,Tn))}}function Id(i,n){lt(i,hs);const a=oe(i,Tn);return Nv(i).isoToDate(a,{[n]:!0})[n]}rf(ST,"Temporal.PlainYearMonth");const $6=vc.prototype.resolvedOptions;class ET{constructor(n,a,h="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const f=Vx(n);let g=Da(a);const{tzName:_,offsetMinutes:c}=fp(g);if(c===void 0){const A=zx(_);if(!A)throw new RangeError(`unknown time zone ${_}`);g=A.identifier}else g=uT(c);YD(this,f,g,wo(h===void 0?"iso8601":Da(h)))}get calendarId(){return lt(this,$n),oe(this,kt)}get timeZoneId(){return lt(this,$n),oe(this,Di)}get year(){return so(this,"year")}get month(){return so(this,"month")}get monthCode(){return so(this,"monthCode")}get day(){return so(this,"day")}get hour(){return Ny(this,"hour")}get minute(){return Ny(this,"minute")}get second(){return Ny(this,"second")}get millisecond(){return Ny(this,"millisecond")}get microsecond(){return Ny(this,"microsecond")}get nanosecond(){return Ny(this,"nanosecond")}get era(){return so(this,"era")}get eraYear(){return so(this,"eraYear")}get epochMilliseconds(){return lt(this,$n),Sc(oe(this,wn),"floor")}get epochNanoseconds(){return lt(this,$n),lI(oe(this,wn))}get dayOfWeek(){return so(this,"dayOfWeek")}get dayOfYear(){return so(this,"dayOfYear")}get weekOfYear(){return so(this,"weekOfYear")?.week}get yearOfWeek(){return so(this,"weekOfYear")?.year}get hoursInDay(){lt(this,$n);const n=oe(this,Di),a=fh(this).isoDate,h=sl(a.year,a.month,a.day+1),f=op(n,a),g=op(n,h);return iv(Zn.fromEpochNsDiff(g,f),"hour")}get daysInWeek(){return so(this,"daysInWeek")}get daysInMonth(){return so(this,"daysInMonth")}get daysInYear(){return so(this,"daysInYear")}get monthsInYear(){return so(this,"monthsInYear")}get inLeapYear(){return so(this,"inLeapYear")}get offset(){return lt(this,$n),r2(Fd(oe(this,Di),oe(this,wn)))}get offsetNanoseconds(){return lt(this,$n),Fd(oe(this,Di),oe(this,wn))}with(n,a=void 0){if(lt(this,$n),!jr(n))throw new TypeError("invalid zoned-date-time-like");m0(n);const h=oe(this,kt),f=oe(this,Di),g=Fd(f,oe(this,wn)),_=fh(this);let c={...vo(h,_.isoDate),..._.time,offset:r2(g)};c=Hm(h,c,Bl(h,n,["year","month","monthCode","day"],["hour","minute","second","millisecond","microsecond","nanosecond","offset"],"partial"));const A=nn(a),D=nv(A),O=mx(A,"prefer"),z=Pv(h,c,fi(A)),V=_0(c.offset);return Ps(Nx(z.isoDate,z.time,"option",V,f,D,O,!1),f,h)}withPlainTime(n=void 0){lt(this,$n);const a=oe(this,Di),h=oe(this,kt),f=fh(this).isoDate;let g;return g=n===void 0?op(a,f):Fs(a,xi(f,oe(cp(n),Fr)),"compatible"),Ps(g,a,h)}withTimeZone(n){lt(this,$n);const a=_o(n);return Ps(oe(this,wn),a,oe(this,kt))}withCalendar(n){lt(this,$n);const a=Fv(n);return Ps(oe(this,wn),oe(this,Di),a)}add(n,a=void 0){return lt(this,$n),yA("add",this,n,a)}subtract(n,a=void 0){return lt(this,$n),yA("subtract",this,n,a)}until(n,a=void 0){return lt(this,$n),uA("until",this,n,a)}since(n,a=void 0){return lt(this,$n),uA("since",this,n,a)}round(n){if(lt(this,$n),n===void 0)throw new TypeError("options parameter is required");const a=typeof n=="string"?Km("smallestUnit",n):nn(n),h=g0(a),f=wu(a,"halfExpand"),g=nl(a,"smallestUnit","time",Kd,["day"]),_={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[g];if(y0(h,_,_===1),g==="nanosecond"&&h===1)return Ps(oe(this,wn),oe(this,Di),oe(this,kt));const c=oe(this,Di),A=oe(this,wn),D=fh(this);let O;if(g==="day"){const z=D.isoDate,V=sl(z.year,z.month,z.day+1),Y=op(c,z),ee=op(c,V),ie=ne.subtract(ee,Y);O=Zn.fromEpochNsDiff(A,Y).round(ie,f).addToEpochNs(Y)}else{const z=u2(D,h,g,f),V=Fd(c,A);O=Nx(z.isoDate,z.time,"option",V,c,"compatible","prefer",!1)}return Ps(O,c,oe(this,kt))}equals(n){lt(this,$n);const a=Y_(n),h=oe(this,wn),f=oe(a,wn);return!!ne.equal(ne.BigInt(h),ne.BigInt(f))&&!!HD(oe(this,Di),oe(a,Di))&&Mh(oe(this,kt),oe(a,kt))}toString(n=void 0){lt(this,$n);const a=nn(n),h=kv(a),f=Ov(a),g=(function(V){return qd(V,"offset",["auto","never"],"auto")})(a),_=wu(a,"trunc"),c=nl(a,"smallestUnit","time",void 0);if(c==="hour")throw new RangeError('smallestUnit must be a time unit other than "hour"');const A=(function(V){return qd(V,"timeZoneName",["auto","never","critical"],"auto")})(a),{precision:D,unit:O,increment:z}=Lv(c,f);return tA(this,D,h,A,g,{unit:O,increment:z,roundingMode:_})}toLocaleString(n=void 0,a=void 0){lt(this,$n);const h=nn(a),f=Object.create(null);if((function(A,D,O,z){if(D==null)return;const V=Reflect.ownKeys(D);for(let Y=0;Y<V.length;Y++){const ee=V[Y];if(!O.some((ie=>Object.is(ie,ee)))&&Object.prototype.propertyIsEnumerable.call(D,ee)){const ie=D[ee];A[ee]=ie}}})(f,h,["timeZone"]),h.timeZone!==void 0)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");if(f.year===void 0&&f.month===void 0&&f.day===void 0&&f.era===void 0&&f.weekday===void 0&&f.dateStyle===void 0&&f.hour===void 0&&f.minute===void 0&&f.second===void 0&&f.fractionalSecondDigits===void 0&&f.timeStyle===void 0&&f.dayPeriod===void 0&&f.timeZoneName===void 0&&(f.timeZoneName="short"),f.timeZone=oe(this,Di),nA(f.timeZone))throw new RangeError("toLocaleString does not currently support offset time zones");const g=new vc(n,f),_=$6.call(g).calendar,c=oe(this,kt);if(c!=="iso8601"&&_!=="iso8601"&&!Mh(_,c))throw new RangeError(`cannot format ZonedDateTime with calendar ${c} in locale with calendar ${_}`);return g.format(bh(oe(this,wn)))}toJSON(){return lt(this,$n),tA(this,"auto")}valueOf(){Tp("ZonedDateTime")}startOfDay(){lt(this,$n);const n=oe(this,Di);return Ps(op(n,fh(this).isoDate),n,oe(this,kt))}getTimeZoneTransition(n){lt(this,$n);const a=oe(this,Di);if(n===void 0)throw new TypeError("options parameter is required");const h=qd(typeof n=="string"?Km("direction",n):nn(n),"direction",["next","previous"],Kd);if(h===void 0)throw new TypeError("direction option is required");if(nA(a)||a==="UTC")return null;const f=oe(this,wn),g=h==="next"?dT(a,f):s2(a,f);return g===null?null:Ps(g,a,oe(this,kt))}toInstant(){return lt(this,$n),bh(oe(this,wn))}toPlainDate(){return lt(this,$n),yo(fh(this).isoDate,oe(this,kt))}toPlainTime(){return lt(this,$n),zd(fh(this).time)}toPlainDateTime(){return lt(this,$n),yc(fh(this),oe(this,kt))}static from(n,a=void 0){return Y_(n,a)}static compare(n,a){const h=Y_(n),f=Y_(a),g=oe(h,wn),_=oe(f,wn);return ne.lessThan(ne.BigInt(g),ne.BigInt(_))?-1:ne.greaterThan(ne.BigInt(g),ne.BigInt(_))?1:0}}function fh(i){return Tc(oe(i,Di),oe(i,wn))}function so(i,n){lt(i,$n);const a=fh(i).isoDate;return Nv(i).isoToDate(a,{[n]:!0})[n]}function Ny(i,n){return lt(i,$n),fh(i).time[n]}rf(ET,"Temporal.ZonedDateTime");var bA=Object.freeze({__proto__:null,Duration:a0,Instant:bT,Now:bI,PlainDate:xT,PlainDateTime:wT,PlainMonthDay:TT,PlainTime:$v,PlainYearMonth:ST,ZonedDateTime:ET});const Z6=[bT,xT,wT,a0,TT,$v,ST,ET];for(const i of Z6){const n=Object.getOwnPropertyDescriptor(i,"prototype");(n.configurable||n.enumerable||n.writable)&&(n.configurable=!1,n.enumerable=!1,n.writable=!1,Object.defineProperty(i,"prototype",n))}function q6({tripQueryVariables:i,setTripQueryVariables:n}){const a=te.useContext(f0),h=bA.Instant.from(i.dateTime).toZonedDateTimeISO(a).toPlainDateTime().toString({smallestUnit:"minute",calendarName:"never"}),f=te.useCallback(g=>{const _=bA.PlainDateTime.from(g.target.value).toZonedDateTime(a).toString({calendarName:"never",timeZoneName:"never"});n({...i,dateTime:_})},[i,n,a]);return Q.jsxs(zi.Group,{children:[Q.jsx(zi.Label,{column:"sm",htmlFor:"timePicker",title:"Time zone: "+a,children:"Time"}),Q.jsx(zi.Control,{type:"datetime-local",id:"timePicker",size:"sm",onChange:f,value:h})]})}function Y6({tripQueryVariables:i,setTripQueryVariables:n}){return Q.jsxs(zi.Group,{children:[Q.jsx(zi.Label,{column:"sm",htmlFor:"searchWindowInput",children:"Search window"}),Q.jsx(zi.Control,{type:"number",id:"searchWindowInput",size:"sm",placeholder:"(in minutes)",min:1,className:"input-small",value:i.searchWindow||"",onChange:a=>n({...i,searchWindow:Number(a.target.value)>0?Number(a.target.value):void 0})})]})}function H6({tripQueryVariables:i,setTripQueryVariables:n}){return Q.jsxs(zi.Group,{children:[Q.jsx(zi.Label,{column:"sm",htmlFor:"accessSelect",children:"Access"}),Q.jsxs(zi.Select,{id:"accessSelect",size:"sm",className:"input-medium",onChange:a=>{a.target.value!=="not_selected"?n({...i,modes:{...i.modes,accessMode:a.target.value}}):n({...i,modes:i.modes?.directMode||i.modes?.transportModes?{...i.modes,accessMode:void 0}:void 0})},value:i.modes?.accessMode||"not_selected",children:[Q.jsx("option",{value:"not_selected",children:"Not selected"}),Object.values(Zy).map(a=>Q.jsx("option",{value:a,children:a},a))]})]})}function W6({tripQueryVariables:i,setTripQueryVariables:n}){return Q.jsxs(zi.Group,{children:[Q.jsx(zi.Label,{column:"sm",htmlFor:"egressSelect",children:"Egress"}),Q.jsxs(zi.Select,{id:"egressSelect",size:"sm",className:"input-medium",onChange:a=>{a.target.value!=="not_selected"?n({...i,modes:{...i.modes,egressMode:a.target.value}}):n({...i,modes:i.modes?.directMode||i.modes?.transportModes?{...i.modes,egressMode:void 0}:void 0})},value:i.modes?.egressMode||"not_selected",children:[Q.jsx("option",{value:"not_selected",children:"Not selected"}),Object.values(Zy).map(a=>Q.jsx("option",{value:a,children:a},a))]})]})}function X6({tripQueryVariables:i,setTripQueryVariables:n}){return Q.jsxs(zi.Group,{children:[Q.jsx(zi.Label,{column:"sm",htmlFor:"directModeSelect",children:"Direct mode"}),Q.jsxs(zi.Select,{id:"directModeSelect",size:"sm",className:"input-medium",onChange:a=>{a.target.value!=="not_selected"?n({...i,modes:{...i.modes,directMode:a.target.value}}):n({...i,modes:i.modes?.accessMode||i.modes?.egressMode||i.modes?.transportModes?{...i.modes,directMode:void 0}:void 0})},value:i.modes?.directMode||"not_selected",children:[Q.jsx("option",{value:"not_selected",children:"Not selected"}),Object.values(Zy).map(a=>Q.jsx("option",{value:a,children:a},a))]})]})}const Q6=({label:i,options:n,values:a,onChange:h})=>{const[f,g]=te.useState(!1),_=te.useRef(null),c=()=>{g(!f)},A=D=>{const O=D.target.value,z=D.target.checked;h(z?[...a,O]:a.filter(V=>V!==O))};return te.useEffect(()=>{const D=O=>{_.current&&!_.current.contains(O.target)&&g(!1)};return f&&document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[f]),Q.jsxs("div",{className:`dropdown ${f?"show":""}`,ref:_,children:[Q.jsx(zi.Label,{column:"sm",htmlFor:"multiSelectDropdown",children:i}),Q.jsx(zi.Control,{type:"text",id:"multiSelectDropdown",size:"sm",className:"input-medium",value:a.length>0?a.join(", "):"Not selected",onClick:c,onChange:()=>{}}),Q.jsx("div",{style:{width:"20%"},className:`dropdown-menu ${f?"show":""}`,children:n.map(D=>Q.jsx(zi.Check,{style:{marginLeft:"10%"},type:"checkbox",id:`option_${D.id}`,label:D.label,checked:a.includes(D.id),onChange:A,value:`${D.id}`},`${D.id}`))})]})};function K6({tripQueryVariables:i,setTripQueryVariables:n}){const a=te.useMemo(()=>i?.modes?.transportModes?.map(f=>f?.transportMode).filter(f=>!!f)||[],[i.modes?.transportModes]),h=te.useCallback(f=>{const g=f.filter(_=>_!=null).map(_=>({transportMode:_}));if(g.length===0){const _={...i.modes};delete _.transportModes;const c=_.directMode||_.accessMode||_.egressMode;n({...i,modes:c?_:void 0})}else{const _=i.modes?.accessMode||Zy.Foot,c=i.modes?.egressMode||Zy.Foot;n({...i,modes:{...i.modes,transportModes:g,accessMode:_,egressMode:c}})}},[i,n]);return Q.jsx(Q6,{label:"Transit mode",options:Object.values(pM).map(f=>({id:f,label:f.toString()})),values:a,onChange:h})}function J6({tripQueryVariables:i,setTripQueryVariables:n}){return Q.jsxs(zi.Group,{children:[Q.jsx(zi.Label,{column:"sm",htmlFor:"numTripPatternsInput",children:"#"}),Q.jsx(zi.Control,{type:"number",id:"numTripPatternsInput",size:"sm",placeholder:"12",min:1,className:"input-tiny",value:i.numTripPatterns||"",onChange:a=>n({...i,numTripPatterns:Number(a.target.value)>0?Number(a.target.value):void 0})})]})}function ej({tripQueryVariables:i,setTripQueryVariables:n}){return Q.jsxs(zi.Group,{children:[Q.jsx(zi.Label,{column:"sm",htmlFor:"itineraryDebugFilterSelect",children:"Filter debug"}),Q.jsxs(zi.Select,{id:"itineraryDebugFilterSelect",size:"sm",className:"input-medium",onChange:a=>{if(a.target.value==="not_selected"){const h={...i.itineraryFilters};delete h.debug;const f=Object.keys(h).length>0;n({...i,itineraryFilters:f?h:void 0})}else n({...i,itineraryFilters:{...i.itineraryFilters,debug:a.target.value}})},value:i.itineraryFilters?.debug||"not_selected",children:[Q.jsx("option",{value:"not_selected",children:"Not selected"}),Object.values(fM).map(a=>Q.jsx("option",{value:a,children:a},a))]})]})}const tj="https://www.opentripplanner.org/debug-client-assets/2026/01/2026-01-16T10:08/assets/graphql-solid-B1mrnAEK.svg",xA="/graphiql?flavor=transmodel";function nj({tripQueryVariables:i}){const n=mD(i),a=encodeURIComponent(JSON.stringify(n)),h=pD(i),f=encodeURIComponent(h),g="Open in GraphiQL",_=xA.includes("?")?"&":"?",c=`${xA}${_}query=${f}&variables=${a}`;return Q.jsx(dp,{title:g,href:c,target:"_blank",children:Q.jsx("img",{alt:g,title:g,src:tj,width:"20",height:"20",className:"d-inline-block align-middle"})})}function ij({tripQueryVariables:i,setTripQueryVariables:n,onRoute:a,loading:h}){return Q.jsxs("div",{className:"box input-group search-bar",children:[Q.jsxs("div",{className:"input-family",children:[Q.jsx(jE,{label:"From",id:"fromInputField",locationFieldKey:"from",tripQueryVariables:i,setTripQueryVariables:n}),Q.jsx(F4,{tripQueryVariables:i,setTripQueryVariables:n}),Q.jsx(jE,{label:"To",id:"toInputField",locationFieldKey:"to",tripQueryVariables:i,setTripQueryVariables:n})]}),Q.jsxs("div",{className:"input-family",children:[Q.jsx(j4,{tripQueryVariables:i,setTripQueryVariables:n}),Q.jsx(q6,{tripQueryVariables:i,setTripQueryVariables:n})]}),Q.jsxs("div",{className:"input-family",children:[Q.jsx(J6,{tripQueryVariables:i,setTripQueryVariables:n}),Q.jsx(Y6,{tripQueryVariables:i,setTripQueryVariables:n})]}),Q.jsxs("div",{className:"input-family",children:[Q.jsx(H6,{tripQueryVariables:i,setTripQueryVariables:n}),Q.jsx(K6,{tripQueryVariables:i,setTripQueryVariables:n}),Q.jsx(W6,{tripQueryVariables:i,setTripQueryVariables:n}),Q.jsx(X6,{tripQueryVariables:i,setTripQueryVariables:n})]}),Q.jsx(ej,{tripQueryVariables:i,setTripQueryVariables:n}),Q.jsx("div",{className:"search-bar-route-button-wrapper",children:Q.jsxs(R2,{children:[Q.jsxs(dp,{variant:"primary",onClick:()=>a(),disabled:h,children:[h&&Q.jsxs(Q.Fragment,{children:[Q.jsx(EC,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," "]}),"Route"]}),Q.jsx(nj,{tripQueryVariables:i})]})})]})}const xI=te.createContext(void 0);function rj(){const i=te.useContext(xI);if(!i)throw new Error("useTripSchema must be used within a TripSchemaProvider");return i}function Qo(i,n){return n.split(".").reduce((a,h)=>{if(a!=null){if(Array.isArray(a)){const f=Number(h);return Number.isNaN(f)?void 0:a[f]}else if(typeof a=="object")return a[h]}},i)}function Nm(i,n,a){const h=n.split(".");function f(g,_){const c=h[_],A=!isNaN(Number(c));if(_===h.length-1){if(Array.isArray(g)&&A){const V=[...g];return V[Number(c)]=a,V}if(ww(g)&&!A)return{...g,[c]:a};if(A){const V=Array.isArray(g)?[...g]:[];return V[Number(c)]=a,V}else return{...ww(g)?g:{},[c]:a}}const D=_+1,O=h[D],z=!isNaN(Number(O));if(Array.isArray(g)&&A){const V=[...g],Y=g[Number(c)];return V[Number(c)]=f(Y!==void 0?Y:z?[]:{},D),V}else if(ww(g)&&!A){const V={...g},Y=g[c];return V[c]=f(Y!==void 0?Y:z?[]:{},D),V}else if(A){const V=[];return V[Number(c)]=f(z?[]:{},D),V}else return{[c]:f(z?[]:{},D)}}return i==null&&(i=!isNaN(Number(h[0]))?[]:{}),f(i,0)}function ww(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}const aj="data:image/svg+xml,%3csvg%20height='36'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%2036%2036'%20width='36'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='20.75'%20cy='6'%20r='4'/%3e%3cpath%20d='m24.84%2026.23a1%201%200%200%200%20-1.4.29%2016.6%2016.6%200%200%201%20-3.51%203.77c-.33.25-1.56%201.2-2.08%201-.36-.11-.15-.82-.08-1.12l.53-1.57c.22-.64%204.05-12%204.47-13.3.62-1.9.35-3.77-2.48-3.32-.77.08-8.58%201.09-8.72%201.1a1%201%200%200%200%20.13%202s3-.39%203.33-.42a.88.88%200%200%201%20.85.44%202.47%202.47%200%200%201%20-.07%201.71c-.26%201-4.37%2012.58-4.5%2013.25a2.78%202.78%200%200%200%201.18%203%205%205%200%200%200%203.08.83%208.53%208.53%200%200%200%203.09-.62c2.49-1%205.09-3.66%206.46-5.75a1%201%200%200%200%20-.28-1.29z'/%3e%3cpath%20d='m0%200h36v36h-36z'%20fill='none'/%3e%3c/svg%3e",sj="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6.5%201C6.22386%201%206%201.22386%206%201.5C6%201.77614%206.22386%202%206.5%202C7.12671%202%207.45718%202.20028%207.65563%202.47812C7.8781%202.78957%208%203.28837%208%204V11C8%2011.7116%207.8781%2012.2104%207.65563%2012.5219C7.45718%2012.7997%207.12671%2013%206.5%2013C6.22386%2013%206%2013.2239%206%2013.5C6%2013.7761%206.22386%2014%206.5%2014C7.37329%2014%208.04282%2013.7003%208.46937%2013.1031C8.47976%2013.0886%208.48997%2013.0739%208.5%2013.0591C8.51003%2013.0739%208.52024%2013.0886%208.53063%2013.1031C8.95718%2013.7003%209.62671%2014%2010.5%2014C10.7761%2014%2011%2013.7761%2011%2013.5C11%2013.2239%2010.7761%2013%2010.5%2013C9.87329%2013%209.54282%2012.7997%209.34437%2012.5219C9.1219%2012.2104%209%2011.7116%209%2011V4C9%203.28837%209.1219%202.78957%209.34437%202.47812C9.54282%202.20028%209.87329%202%2010.5%202C10.7761%202%2011%201.77614%2011%201.5C11%201.22386%2010.7761%201%2010.5%201C9.62671%201%208.95718%201.29972%208.53063%201.89688C8.52024%201.91143%208.51003%201.92611%208.5%201.9409C8.48997%201.92611%208.47976%201.91143%208.46937%201.89688C8.04282%201.29972%207.37329%201%206.5%201ZM14%205H11V4H14C14.5523%204%2015%204.44772%2015%205V10C15%2010.5523%2014.5523%2011%2014%2011H11V10H14V5ZM6%204V5H1L1%2010H6V11H1C0.447715%2011%200%2010.5523%200%2010V5C0%204.44772%200.447715%204%201%204H6Z'%20fill='currentColor'%20/%3e%3c/svg%3e",oj="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.49998%200.5C5.49998%200.223858%205.72383%200%205.99998%200H7.49998H8.99998C9.27612%200%209.49998%200.223858%209.49998%200.5C9.49998%200.776142%209.27612%201%208.99998%201H7.99998V2.11922C9.09832%202.20409%2010.119%202.56622%2010.992%203.13572C11.0116%203.10851%2011.0336%203.08252%2011.058%203.05806L12.058%202.05806C12.3021%201.81398%2012.6978%201.81398%2012.9419%202.05806C13.186%202.30214%2013.186%202.69786%2012.9419%202.94194L11.967%203.91682C13.1595%205.07925%2013.9%206.70314%2013.9%208.49998C13.9%2012.0346%2011.0346%2014.9%207.49998%2014.9C3.96535%2014.9%201.09998%2012.0346%201.09998%208.49998C1.09998%205.13361%203.69904%202.3743%206.99998%202.11922V1H5.99998C5.72383%201%205.49998%200.776142%205.49998%200.5ZM2.09998%208.49998C2.09998%205.51764%204.51764%203.09998%207.49998%203.09998C10.4823%203.09998%2012.9%205.51764%2012.9%208.49998C12.9%2011.4823%2010.4823%2013.9%207.49998%2013.9C4.51764%2013.9%202.09998%2011.4823%202.09998%208.49998ZM7.49998%208.49998V4.09998C5.06992%204.09998%203.09998%206.06992%203.09998%208.49998C3.09998%2010.93%205.06992%2012.9%207.49998%2012.9C8.715%2012.9%209.815%2012.4075%2010.6112%2011.6112L7.49998%208.49998Z'%20fill='currentColor'%20/%3e%3c/svg%3e",lj=({defaultValue:i,type:n})=>Q.jsxs("span",{children:[i!=null&&Q.jsx("span",{title:`Default: ${i??"None"}`,children:Q.jsx("img",{alt:"Info",src:aj,className:"default-tooltip-icon"})}),n!=null&&n.subtype==="DoubleFunction"&&Q.jsx("span",{title:`Type: ${n.subtype??"None"}
 Format: \`a + b t\`. Example: \`30m + 2.0 t\``,children:Q.jsx("img",{alt:"Info",src:sj,className:"default-tooltip-icon"})}),n!=null&&n.subtype==="Duration"&&Q.jsx("span",{className:"default-tooltip-icon",title:`Type: ${n.subtype??"None"}
 Duration in a lenient ISO-8601 duration format.
Example P2DT2H12M40S, 2d2h12m40s or 1h`,children:Q.jsx("img",{alt:"Info",src:oj,className:"default-tooltip-icon"})})]}),wI=new Set(["numTripPatterns","arriveBy","from","to","dateTime","searchWindow","modes.accessMode","modes.directMode","modes.egressMode"]),TI=({tripQueryVariables:i,setTripQueryVariables:n,setExpandedArguments:a})=>{function h(){let f={};wI.forEach(g=>{const _=Qo(i,g);_!==void 0&&(f=Nm(f,g,_))}),n(f),a&&a({})}return Q.jsx("button",{className:"reset-button",onClick:h,children:"Reset"})};function Tw(i){if(!i)return" ";const n=i.split(".");return n[n.length-1].replace(/([A-Z])/g," $1").trim().replace(/\b\w/g,h=>h.toUpperCase())+" "}function gx(i,n=[]){let a=[];return i?(Object.entries(i).forEach(([h,f])=>{const g=[...n,h].join(".");a=a.concat(cj(h,f,g,n))}),a):[]}function cj(i,n,a,h){let f=[];if(typeof n=="object"&&n.type)if(n.type.type==="Enum"){const g=["Not selected",...n.type.values||[]],_=n.defaultValue!==void 0?n.defaultValue:"Not selected";f.push({path:a,type:{type:"Enum"},defaultValue:_,enumValues:g,isList:n.isList})}else n.type.type==="InputObject"&&n.isList?(f.push({path:a,type:{type:"Group",name:n.type.name},defaultValue:n.defaultValue,isComplex:!0,isList:!0}),f=f.concat(gx(n.type.fields,[...h,`${i}.*`]))):n.type.type==="InputObject"?(f.push({path:a,type:{type:"Group",name:n.type.name},isComplex:!0,isList:!1}),f=f.concat(gx(n.type.fields,[...h,i]))):n.type.type==="Scalar"&&f.push({path:a,type:{type:n.type.type,subtype:n.type.subtype},defaultValue:n.defaultValue,isList:n.isList});else typeof n=="object"&&n.type?.fields?(f.push({path:a,type:{type:"Group"},isComplex:!0}),f=f.concat(gx(n.type.fields,[...h,i]))):f.push({path:a,type:n.type??typeof n,defaultValue:n.defaultValue});return f}const uj=({tripQueryVariables:i,setTripQueryVariables:n,expandedArguments:a,setExpandedArguments:h})=>{const[f]=te.useState(""),{tripArgs:g,loading:_,error:c}=rj(),A=g&&!_&&!c?gx(g.trip.arguments):[];function D(Re){return Re.replace(/\.\d+/g,".*")}function O(Re,Ne){const at=D(Re),Te=A.find(Dt=>Dt.path===at);if(!Te){console.error(`No matching argumentConfig found for path: ${Re}`);return}if(Te.type.subtype!=null&&["String","DoubleFunction","ID","Duration"].includes(Te.type.subtype)&&Te.isList&&typeof Ne=="string"){const Dt=Ne.split(",").map(Ut=>Ut.trim());let Mt=Nm(i,Re,Dt);Mt=Y(Mt,Re),n(Mt);return}let it=Nm(i,Re,Ne);it=Y(it,Re),n(it)}function z(Re){return typeof Re=="object"&&Re!==null&&!Array.isArray(Re)}function V(Re){return Re==null?!0:Array.isArray(Re)?Re.length===0:z(Re)?Object.values(Re).every(V):!1}function Y(Re,Ne){if(!Ne.includes(".")){const Te=Qo(Re,Ne);if(V(Te)){const it={...Re};return delete it[Ne],it}return Re}const at=Ne.split(".");for(let Te=at.length-1;Te>0;Te--){const it=at.slice(0,Te).join("."),Dt=Qo(Re,it);V(Dt)&&(Re=Nm(Re,it,void 0))}return Re}function ee(Re){h({...a,[Re]:!a[Re]})}function ie(){h({})}const q=A.filter(({path:Re})=>Tw(Re).toLowerCase().includes(f.toLowerCase())).filter(({path:Re})=>!wI.has(Re));function fe(Re,Ne,at,Te){const it=Qo(i,Re)??[],Dt=Te.name;return Q.jsxs("div",{children:[it.map((Mt,Ut)=>{const Ht=`${Re}.${Ut}`,Yt=Ne.filter(Tt=>Tt.path.startsWith(`${Re}.*.`)&&Tt.path!==`${Re}.*`).map(Tt=>({...Tt,path:Tt.path.replace(`${Re}.*`,Ht)})),Ve=Yt.filter(Tt=>Tt.path.split(".").length===Ht.split(".").length+1),ut=a[Ht];return Q.jsxs("div",{style:{marginLeft:15},children:[Q.jsxs("span",{style:{cursor:"pointer"},onClick:()=>ee(Ht),children:[ut?" ":" "," [#",Ut+1,"]"]}),Q.jsx("button",{style:{marginLeft:10},onClick:()=>we(Re,Ut),children:"Remove"}),ut&&Q.jsx("div",{style:{marginLeft:20},children:Ce(Ve,at+1,Yt)})]},Ht)}),Q.jsxs("button",{onClick:()=>Ee(Re),children:["+ Add ",Dt]})]})}function Ee(Re){const at=[...Qo(i,Re)??[],{}],Te=Nm(i,Re,at);n(Te)}function we(Re,Ne){const Te=(Qo(i,Re)??[]).filter((Dt,Mt)=>Mt!==Ne);let it=Nm(i,Re,Te);it=Y(it,Re),n(it)}function ze(Re){let Ne=Nm(i,Re,void 0);Ne=Y(Ne,Re),n(Ne)}function Ce(Re,Ne,at){return Re.map(({path:Te,type:it,defaultValue:Dt,enumValues:Mt,isComplex:Ut,isList:Ht})=>{const Yt=a[Te],Ve=Te.split(".").length,ut=at.filter(gt=>{const $t=gt.path.split(".").length;return gt.path.startsWith(`${Te}.`)&&gt.path!==Te&&$t===Ve+1}),Tt=Ne+1;return Q.jsx("div",{style:{marginLeft:`${Ne*15}px`,marginBottom:"10px"},children:Ut?Q.jsxs("div",{children:[Q.jsxs("span",{style:{cursor:"pointer"},onClick:()=>ee(Te),children:[Yt?" ":" "," ",Tw(Te)]}),Yt&&Ht?Q.jsx("div",{style:{marginLeft:20},children:fe(Te,at,Tt,it)}):Yt?Ce(ut,Tt,at):null]}):Q.jsxs("div",{children:[Q.jsxs("label",{className:"argument-label",htmlFor:Te,children:[Tw(Te)," ",Q.jsx(lj,{defaultValue:Dt,type:it})]}),it.subtype==="Boolean"&&(()=>{const gt=Qo(i,Te),$t=gt!==void 0;return Q.jsxs("span",{children:[Q.jsx("input",{type:"checkbox",id:Te,checked:gt??!1,onChange:Le=>O(Te,Le.target.checked)}),$t&&Q.jsx("button",{onClick:()=>ze(Te),className:"remove-argument",style:{fontSize:"10px",paddingTop:"2px",marginLeft:"8px",marginBottom:"0px",marginTop:"-5px",height:"14px",width:"45px",verticalAlign:"middle"},children:"Clear"})]})})(),it.subtype!=null&&["String","DoubleFunction","ID","Duration"].includes(it.subtype)&&Ht&&Q.jsx("input",{className:"comma-separated-input",type:"text",id:Te,value:(()=>{const gt=Qo(i,Te);return Array.isArray(gt)?gt.join(", "):""})(),onChange:gt=>O(Te,gt.target.value),placeholder:"Comma-separated list"}),it.subtype!=null&&["String","DoubleFunction","ID","Duration"].includes(it.subtype)&&!Ht&&Q.jsx("input",{type:"text",id:Te,value:Qo(i,Te)??"",onChange:gt=>O(Te,gt.target.value||void 0)}),it.subtype==="Int"&&Q.jsx("input",{type:"number",id:Te,value:Qo(i,Te)??"",onChange:gt=>{const $t=parseInt(gt.target.value,10);O(Te,Number.isNaN($t)?void 0:$t)}}),it.subtype==="Float"&&Q.jsx("input",{type:"number",id:Te,step:"any",value:Qo(i,Te)??"",onChange:gt=>{const $t=parseFloat(gt.target.value);O(Te,Number.isNaN($t)?void 0:$t)}}),it.subtype==="DateTime"&&Q.jsx("input",{type:"datetime-local",id:Te,value:(Qo(i,Te)??"").slice(0,16),onChange:gt=>{const $t=gt.target.value?new Date(gt.target.value).toISOString():void 0;O(Te,$t)}}),it.type==="Enum"&&Mt&&Ht&&Q.jsx("select",{id:Te,multiple:!0,value:(()=>{const gt=Qo(i,Te);return Array.isArray(gt)?gt:[]})(),onChange:gt=>{const $t=Array.from(gt.target.selectedOptions,Le=>Le.value);O(Te,$t)},children:Mt.map(gt=>Q.jsx("option",{value:gt,children:gt},gt))}),it.type==="Enum"&&Mt&&!Ht&&Q.jsx("select",{id:Te,value:Qo(i,Te)??"Not selected",onChange:gt=>{const $t=gt.target.value==="Not selected"?void 0:gt.target.value;O(Te,$t)},children:Mt.map(gt=>Q.jsx("option",{value:gt,children:gt},gt))})]})},Te)})}return Q.jsxs("div",{className:"left-pane-container below-content",children:[Q.jsxs("div",{className:"panel-header",style:{display:"flex",alignItems:"center",position:"relative"},children:[Q.jsx("button",{className:"collapse-all-button",onClick:ie,style:{padding:"4px 8px"},children:"Collapse all"}),Q.jsx("span",{className:"panel-header-title-with-left-button",children:"Arguments"}),Q.jsx("div",{style:{marginLeft:"auto"},children:Q.jsx(TI,{tripQueryVariables:i,setTripQueryVariables:n,setExpandedArguments:h})})]}),q.length===0?Q.jsx("p",{children:"No arguments found."}):Q.jsx("div",{className:"argument-list",children:Ce(q.filter(Re=>Re.path.split(".").length===1),0,q)})]})},hj="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='icon%20icon-tabler%20icon-tabler-route'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20stroke-width='2'%20stroke='currentColor'%20fill='none'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3ccircle%20cx='6'%20cy='19'%20r='2'%20/%3e%3ccircle%20cx='18'%20cy='5'%20r='2'%20/%3e%3cpath%20d='M12%2019h4.5a3.5%203.5%200%200%200%200%20-7h-8a3.5%203.5%200%200%201%200%20-7h3.5'%20/%3e%3c/svg%3e",dj="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15%2010.5A3.502%203.502%200%200%200%2018.355%208H21a1%201%200%201%200%200-2h-2.645a3.502%203.502%200%200%200-6.71%200H3a1%201%200%200%200%200%202h8.645A3.502%203.502%200%200%200%2015%2010.5zM3%2016a1%201%200%201%200%200%202h2.145a3.502%203.502%200%200%200%206.71%200H21a1%201%200%201%200%200-2h-9.145a3.502%203.502%200%200%200-6.71%200H3z'%20fill='currentColor'/%3e%3c/svg%3e",fj="data:image/svg+xml,%3csvg%20height='16'%20viewBox='0%200%2016%2016'%20width='16'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m1%202h4v2h-2v2l-1%202%201%202v2h2v2h-4v-4l-1-2%201-2zm4%205c.55228475%200%201%20.44771525%201%201s-.44771525%201-1%201-1-.44771525-1-1%20.44771525-1%201-1zm3%200c.55228475%200%201%20.44771525%201%201s-.44771525%201-1%201-1-.44771525-1-1%20.44771525-1%201-1zm3%200c.5522847%200%201%20.44771525%201%201s-.4477153%201-1%201-1-.44771525-1-1%20.4477153-1%201-1zm0-3v-2h4v4l1%202-1%202v4h-4v-2h2v-2l1-2-1-2v-2z'%20fill='%23293040'/%3e%3c/svg%3e",pj=({children:i})=>{const[n,a]=te.useState(0),h=g=>{switch(g){case 0:return Q.jsx("img",{src:hj,alt:"Itinerary results",title:"Itinerary results"});case 1:return Q.jsx("img",{src:dj,alt:"Arguments",title:"Arguments"});case 2:return Q.jsx("img",{width:"25",height:"25",src:fj,alt:"Arguments raw",title:"Arguments raw"});default:return null}},f=Ll.Children.toArray(i).filter(g=>Ll.isValidElement(g));return Q.jsxs("div",{className:"sidebar-container",children:[Q.jsx("div",{className:"sidebar",children:f.map((g,_)=>Q.jsx("div",{className:`sidebar-button ${_===n?"active":""}`,onClick:()=>a(_),children:h(_)},_))}),Q.jsx("div",{className:"sidebar-content",children:f.map((g,_)=>_===n?Q.jsx("div",{children:g},_):null)})]})},mj=({tripQueryVariables:i,setTripQueryVariables:n,setExpandedArguments:a})=>Q.jsxs("div",{className:"left-pane-container below-content",style:{fontSize:"14px"},children:[Q.jsxs("div",{className:"panel-header",style:{display:"flex",alignItems:"center",position:"relative"},children:[Q.jsx("span",{className:"panel-header-title-simple",children:"Arguments raw"}),Q.jsx("div",{style:{marginLeft:"auto"},children:Q.jsx(TI,{tripQueryVariables:i,setTripQueryVariables:n,setExpandedArguments:a})})]}),Q.jsx("pre",{children:JSON.stringify(i,null,2)})]});function gj(i){let n=i;for(;;)if(Bd(n))n=n.ofType;else if(vp(n))n=n.ofType;else break;return n}function SI(i){const n=gj(i);if(l0(n))return{type:"Scalar",subtype:n.name};if(pp(n))return{type:"Enum",values:n.getValues().map(a=>a.name)};if(jd(n)){const a=n.getFields(),h={};for(const f of Object.keys(a)){const g=a[f];if(g.deprecationReason)continue;const _=vp(g.type),c=g.defaultValue!==void 0?g.defaultValue:null;h[f]={type:SI(g.type),defaultValue:c,isList:_}}return{type:"InputObject",name:n.name,fields:h}}return{type:"Scalar",subtype:"String"}}function yj(i){const n=i.getQueryType();if(!n)throw new Error("No Query type found in the schema.");const a=n.getFields().trip;if(!a)throw new Error("No trip query found in the schema.");const h={};return a.args.forEach(f=>{if(f.deprecationReason)return;const g=f.name,_=SI(f.type),c=f.defaultValue!==null?f.defaultValue:null,A=vp(f.type);h[g]={type:_,...c!==null&&{defaultValue:c},isList:A}}),{trip:{arguments:h}}}async function _j(i){const n=$k(),a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!a.ok)throw new Error(`Failed to fetch schema. HTTP error: ${a.status}`);const{data:h}=await a.json(),f=Zk(h);return yj(f)}function vj({endpoint:i,children:n}){const[a,h]=te.useState(null),[f,g]=te.useState(!0),[_,c]=te.useState(null);te.useEffect(()=>{let D=!0;async function O(){g(!0),c(null);try{const z=await _j(i);D&&h(z)}catch(z){console.error("Error loading trip arguments:",z),D&&c("Failed to load trip schema")}finally{D&&g(!1)}}return O(),()=>{D=!1}},[i]);const A={tripArgs:a,loading:f,error:_};return Q.jsx(xI.Provider,{value:A,children:n})}function bj(){const i=A4(),{tripQueryVariables:n,setTripQueryVariables:a}=I4(),[h,f]=te.useState([]),[g,_]=te.useState(!1),[c,A,D]=S4(n),[O,z]=te.useState([0]),[V,Y]=te.useState({}),ee=i?.internalTransitModelTimeZone||Intl.DateTimeFormat().resolvedOptions().timeZone;return te.useEffect(()=>{c?.trip.tripPatterns.length&&z([0])},[c]),Q.jsx("div",{className:"app",children:Q.jsxs(f0.Provider,{value:ee,children:[Q.jsxs("div",{className:"layout",children:[Q.jsx("div",{className:"box logo-section",children:Q.jsx(O4,{serverInfo:i})}),Q.jsx("div",{className:"box input-section",children:Q.jsx(ij,{onRoute:D,tripQueryVariables:n,setTripQueryVariables:a,loading:A})}),Q.jsx("div",{className:"box trip-section",children:Q.jsxs(pj,{children:[Q.jsx(MP,{tripQueryResult:c,selectedTripPatternIndexes:O,setSelectedTripPatternIndexes:z,pageResults:D,loading:A,comparisonSelectedIndexes:h,setComparisonSelectedIndexes:f,onCompare:()=>_(!0)}),Q.jsx(vj,{endpoint:Xx(),children:Q.jsx(uj,{tripQueryVariables:n,setTripQueryVariables:a,expandedArguments:V,setExpandedArguments:Y})}),Q.jsx(mj,{tripQueryVariables:n,setTripQueryVariables:a,setExpandedArguments:Y})]})}),Q.jsx("div",{className:"box map-section",children:Q.jsx(IN,{tripQueryResult:c,tripQueryVariables:n,setTripQueryVariables:a,selectedTripPatternIndexes:O,loading:A})})]}),Q.jsx(b4,{show:g,onHide:()=>_(!1),tripQueryResult:c,selectedIndexes:h})]})})}HI.createRoot(document.getElementById("root")).render(Q.jsx(Ll.StrictMode,{children:Q.jsx(bj,{})}));
